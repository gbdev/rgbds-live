function ki(ee,X){for(var g=0;g<X.length;g++){const I=X[g];if(typeof I!="string"&&!Array.isArray(I)){for(const z in I)if(z!=="default"&&!(z in ee)){const D=Object.getOwnPropertyDescriptor(I,z);D&&Object.defineProperty(ee,z,D.get?D:{enumerable:!0,get:()=>I[z]})}}}return Object.freeze(Object.defineProperty(ee,Symbol.toStringTag,{value:"Module"}))}(function(){const X=document.createElement("link").relList;if(X&&X.supports&&X.supports("modulepreload"))return;for(const z of document.querySelectorAll('link[rel="modulepreload"]'))I(z);new MutationObserver(z=>{for(const D of z)if(D.type==="childList")for(const S of D.addedNodes)S.tagName==="LINK"&&S.rel==="modulepreload"&&I(S)}).observe(document,{childList:!0,subtree:!0});function g(z){const D={};return z.integrity&&(D.integrity=z.integrity),z.referrerPolicy&&(D.referrerPolicy=z.referrerPolicy),z.crossOrigin==="use-credentials"?D.credentials="include":z.crossOrigin==="anonymous"?D.credentials="omit":D.credentials="same-origin",D}function I(z){if(z.ep)return;z.ep=!0;const D=g(z);fetch(z.href,D)}})();var Fn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vr(ee){return ee&&ee.__esModule&&Object.prototype.hasOwnProperty.call(ee,"default")?ee.default:ee}function Nn(ee){throw new Error('Could not dynamically require "'+ee+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Qn={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var Lr;function Bi(){return Lr||(Lr=1,function(ee,X){(function(g){ee.exports=g()})(function(){return function g(I,z,D){function S(h,o){if(!z[h]){if(!I[h]){var n=typeof Nn=="function"&&Nn;if(!o&&n)return n(h,!0);if(A)return A(h,!0);var i=new Error("Cannot find module '"+h+"'");throw i.code="MODULE_NOT_FOUND",i}var t=z[h]={exports:{}};I[h][0].call(t.exports,function(e){var r=I[h][1][e];return S(r||e)},t,t.exports,g,I,z,D)}return z[h].exports}for(var A=typeof Nn=="function"&&Nn,s=0;s<D.length;s++)S(D[s]);return S}({1:[function(g,I,z){var D=g("./utils"),S=g("./support"),A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";z.encode=function(s){for(var h,o,n,i,t,e,r,a=[],u=0,p=s.length,M=p,w=D.getTypeOf(s)!=="string";u<s.length;)M=p-u,n=w?(h=s[u++],o=u<p?s[u++]:0,u<p?s[u++]:0):(h=s.charCodeAt(u++),o=u<p?s.charCodeAt(u++):0,u<p?s.charCodeAt(u++):0),i=h>>2,t=(3&h)<<4|o>>4,e=1<M?(15&o)<<2|n>>6:64,r=2<M?63&n:64,a.push(A.charAt(i)+A.charAt(t)+A.charAt(e)+A.charAt(r));return a.join("")},z.decode=function(s){var h,o,n,i,t,e,r=0,a=0,u="data:";if(s.substr(0,u.length)===u)throw new Error("Invalid base64 input, it looks like a data url.");var p,M=3*(s=s.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(s.charAt(s.length-1)===A.charAt(64)&&M--,s.charAt(s.length-2)===A.charAt(64)&&M--,M%1!=0)throw new Error("Invalid base64 input, bad content length.");for(p=S.uint8array?new Uint8Array(0|M):new Array(0|M);r<s.length;)h=A.indexOf(s.charAt(r++))<<2|(i=A.indexOf(s.charAt(r++)))>>4,o=(15&i)<<4|(t=A.indexOf(s.charAt(r++)))>>2,n=(3&t)<<6|(e=A.indexOf(s.charAt(r++))),p[a++]=h,t!==64&&(p[a++]=o),e!==64&&(p[a++]=n);return p}},{"./support":30,"./utils":32}],2:[function(g,I,z){var D=g("./external"),S=g("./stream/DataWorker"),A=g("./stream/Crc32Probe"),s=g("./stream/DataLengthProbe");function h(o,n,i,t,e){this.compressedSize=o,this.uncompressedSize=n,this.crc32=i,this.compression=t,this.compressedContent=e}h.prototype={getContentWorker:function(){var o=new S(D.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length")),n=this;return o.on("end",function(){if(this.streamInfo.data_length!==n.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),o},getCompressedWorker:function(){return new S(D.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},h.createWorkerFrom=function(o,n,i){return o.pipe(new A).pipe(new s("uncompressedSize")).pipe(n.compressWorker(i)).pipe(new s("compressedSize")).withStreamInfo("compression",n)},I.exports=h},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(g,I,z){var D=g("./stream/GenericWorker");z.STORE={magic:"\0\0",compressWorker:function(){return new D("STORE compression")},uncompressWorker:function(){return new D("STORE decompression")}},z.DEFLATE=g("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(g,I,z){var D=g("./utils"),S=function(){for(var A,s=[],h=0;h<256;h++){A=h;for(var o=0;o<8;o++)A=1&A?3988292384^A>>>1:A>>>1;s[h]=A}return s}();I.exports=function(A,s){return A!==void 0&&A.length?D.getTypeOf(A)!=="string"?function(h,o,n,i){var t=S,e=i+n;h^=-1;for(var r=i;r<e;r++)h=h>>>8^t[255&(h^o[r])];return-1^h}(0|s,A,A.length,0):function(h,o,n,i){var t=S,e=i+n;h^=-1;for(var r=i;r<e;r++)h=h>>>8^t[255&(h^o.charCodeAt(r))];return-1^h}(0|s,A,A.length,0):0}},{"./utils":32}],5:[function(g,I,z){z.base64=!1,z.binary=!1,z.dir=!1,z.createFolders=!0,z.date=null,z.compression=null,z.compressionOptions=null,z.comment=null,z.unixPermissions=null,z.dosPermissions=null},{}],6:[function(g,I,z){var D=null;D=typeof Promise<"u"?Promise:g("lie"),I.exports={Promise:D}},{lie:37}],7:[function(g,I,z){var D=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",S=g("pako"),A=g("./utils"),s=g("./stream/GenericWorker"),h=D?"uint8array":"array";function o(n,i){s.call(this,"FlateWorker/"+n),this._pako=null,this._pakoAction=n,this._pakoOptions=i,this.meta={}}z.magic="\b\0",A.inherits(o,s),o.prototype.processChunk=function(n){this.meta=n.meta,this._pako===null&&this._createPako(),this._pako.push(A.transformTo(h,n.data),!1)},o.prototype.flush=function(){s.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},o.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},o.prototype._createPako=function(){this._pako=new S[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var n=this;this._pako.onData=function(i){n.push({data:i,meta:n.meta})}},z.compressWorker=function(n){return new o("Deflate",n)},z.uncompressWorker=function(){return new o("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(g,I,z){function D(t,e){var r,a="";for(r=0;r<e;r++)a+=String.fromCharCode(255&t),t>>>=8;return a}function S(t,e,r,a,u,p){var M,w,m=t.file,d=t.compression,_=p!==h.utf8encode,T=A.transformTo("string",p(m.name)),R=A.transformTo("string",h.utf8encode(m.name)),$=m.comment,k=A.transformTo("string",p($)),v=A.transformTo("string",h.utf8encode($)),b=R.length!==m.name.length,l=v.length!==$.length,C="",O="",N="",G=m.dir,W=m.date,K={crc32:0,compressedSize:0,uncompressedSize:0};e&&!r||(K.crc32=t.crc32,K.compressedSize=t.compressedSize,K.uncompressedSize=t.uncompressedSize);var V=0;e&&(V|=8),_||!b&&!l||(V|=2048);var Y=0,re=0;G&&(Y|=16),u==="UNIX"?(re=798,Y|=function(ie,ue){var ge=ie;return ie||(ge=ue?16893:33204),(65535&ge)<<16}(m.unixPermissions,G)):(re=20,Y|=function(ie){return 63&(ie||0)}(m.dosPermissions)),M=W.getUTCHours(),M<<=6,M|=W.getUTCMinutes(),M<<=5,M|=W.getUTCSeconds()/2,w=W.getUTCFullYear()-1980,w<<=4,w|=W.getUTCMonth()+1,w<<=5,w|=W.getUTCDate(),b&&(O=D(1,1)+D(o(T),4)+R,C+="up"+D(O.length,2)+O),l&&(N=D(1,1)+D(o(k),4)+v,C+="uc"+D(N.length,2)+N);var Q="";return Q+=`
\0`,Q+=D(V,2),Q+=d.magic,Q+=D(M,2),Q+=D(w,2),Q+=D(K.crc32,4),Q+=D(K.compressedSize,4),Q+=D(K.uncompressedSize,4),Q+=D(T.length,2),Q+=D(C.length,2),{fileRecord:n.LOCAL_FILE_HEADER+Q+T+C,dirRecord:n.CENTRAL_FILE_HEADER+D(re,2)+Q+D(k.length,2)+"\0\0\0\0"+D(Y,4)+D(a,4)+T+C+k}}var A=g("../utils"),s=g("../stream/GenericWorker"),h=g("../utf8"),o=g("../crc32"),n=g("../signature");function i(t,e,r,a){s.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=e,this.zipPlatform=r,this.encodeFileName=a,this.streamFiles=t,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}A.inherits(i,s),i.prototype.push=function(t){var e=t.meta.percent||0,r=this.entriesCount,a=this._sources.length;this.accumulate?this.contentBuffer.push(t):(this.bytesWritten+=t.data.length,s.prototype.push.call(this,{data:t.data,meta:{currentFile:this.currentFile,percent:r?(e+100*(r-a-1))/r:100}}))},i.prototype.openedSource=function(t){this.currentSourceOffset=this.bytesWritten,this.currentFile=t.file.name;var e=this.streamFiles&&!t.file.dir;if(e){var r=S(t,e,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:r.fileRecord,meta:{percent:0}})}else this.accumulate=!0},i.prototype.closedSource=function(t){this.accumulate=!1;var e=this.streamFiles&&!t.file.dir,r=S(t,e,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(r.dirRecord),e)this.push({data:function(a){return n.DATA_DESCRIPTOR+D(a.crc32,4)+D(a.compressedSize,4)+D(a.uncompressedSize,4)}(t),meta:{percent:100}});else for(this.push({data:r.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},i.prototype.flush=function(){for(var t=this.bytesWritten,e=0;e<this.dirRecords.length;e++)this.push({data:this.dirRecords[e],meta:{percent:100}});var r=this.bytesWritten-t,a=function(u,p,M,w,m){var d=A.transformTo("string",m(w));return n.CENTRAL_DIRECTORY_END+"\0\0\0\0"+D(u,2)+D(u,2)+D(p,4)+D(M,4)+D(d.length,2)+d}(this.dirRecords.length,r,t,this.zipComment,this.encodeFileName);this.push({data:a,meta:{percent:100}})},i.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},i.prototype.registerPrevious=function(t){this._sources.push(t);var e=this;return t.on("data",function(r){e.processChunk(r)}),t.on("end",function(){e.closedSource(e.previous.streamInfo),e._sources.length?e.prepareNextSource():e.end()}),t.on("error",function(r){e.error(r)}),this},i.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},i.prototype.error=function(t){var e=this._sources;if(!s.prototype.error.call(this,t))return!1;for(var r=0;r<e.length;r++)try{e[r].error(t)}catch{}return!0},i.prototype.lock=function(){s.prototype.lock.call(this);for(var t=this._sources,e=0;e<t.length;e++)t[e].lock()},I.exports=i},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(g,I,z){var D=g("../compressions"),S=g("./ZipFileWorker");z.generateWorker=function(A,s,h){var o=new S(s.streamFiles,h,s.platform,s.encodeFileName),n=0;try{A.forEach(function(i,t){n++;var e=function(p,M){var w=p||M,m=D[w];if(!m)throw new Error(w+" is not a valid compression method !");return m}(t.options.compression,s.compression),r=t.options.compressionOptions||s.compressionOptions||{},a=t.dir,u=t.date;t._compressWorker(e,r).withStreamInfo("file",{name:i,dir:a,date:u,comment:t.comment||"",unixPermissions:t.unixPermissions,dosPermissions:t.dosPermissions}).pipe(o)}),o.entriesCount=n}catch(i){o.error(i)}return o}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(g,I,z){function D(){if(!(this instanceof D))return new D;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var S=new D;for(var A in this)typeof this[A]!="function"&&(S[A]=this[A]);return S}}(D.prototype=g("./object")).loadAsync=g("./load"),D.support=g("./support"),D.defaults=g("./defaults"),D.version="3.10.1",D.loadAsync=function(S,A){return new D().loadAsync(S,A)},D.external=g("./external"),I.exports=D},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(g,I,z){var D=g("./utils"),S=g("./external"),A=g("./utf8"),s=g("./zipEntries"),h=g("./stream/Crc32Probe"),o=g("./nodejsUtils");function n(i){return new S.Promise(function(t,e){var r=i.decompressed.getContentWorker().pipe(new h);r.on("error",function(a){e(a)}).on("end",function(){r.streamInfo.crc32!==i.decompressed.crc32?e(new Error("Corrupted zip : CRC32 mismatch")):t()}).resume()})}I.exports=function(i,t){var e=this;return t=D.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:A.utf8decode}),o.isNode&&o.isStream(i)?S.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):D.prepareContent("the loaded zip file",i,!0,t.optimizedBinaryString,t.base64).then(function(r){var a=new s(t);return a.load(r),a}).then(function(r){var a=[S.Promise.resolve(r)],u=r.files;if(t.checkCRC32)for(var p=0;p<u.length;p++)a.push(n(u[p]));return S.Promise.all(a)}).then(function(r){for(var a=r.shift(),u=a.files,p=0;p<u.length;p++){var M=u[p],w=M.fileNameStr,m=D.resolve(M.fileNameStr);e.file(m,M.decompressed,{binary:!0,optimizedBinaryString:!0,date:M.date,dir:M.dir,comment:M.fileCommentStr.length?M.fileCommentStr:null,unixPermissions:M.unixPermissions,dosPermissions:M.dosPermissions,createFolders:t.createFolders}),M.dir||(e.file(m).unsafeOriginalName=w)}return a.zipComment.length&&(e.comment=a.zipComment),e})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(g,I,z){var D=g("../utils"),S=g("../stream/GenericWorker");function A(s,h){S.call(this,"Nodejs stream input adapter for "+s),this._upstreamEnded=!1,this._bindStream(h)}D.inherits(A,S),A.prototype._bindStream=function(s){var h=this;(this._stream=s).pause(),s.on("data",function(o){h.push({data:o,meta:{percent:0}})}).on("error",function(o){h.isPaused?this.generatedError=o:h.error(o)}).on("end",function(){h.isPaused?h._upstreamEnded=!0:h.end()})},A.prototype.pause=function(){return!!S.prototype.pause.call(this)&&(this._stream.pause(),!0)},A.prototype.resume=function(){return!!S.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},I.exports=A},{"../stream/GenericWorker":28,"../utils":32}],13:[function(g,I,z){var D=g("readable-stream").Readable;function S(A,s,h){D.call(this,s),this._helper=A;var o=this;A.on("data",function(n,i){o.push(n)||o._helper.pause(),h&&h(i)}).on("error",function(n){o.emit("error",n)}).on("end",function(){o.push(null)})}g("../utils").inherits(S,D),S.prototype._read=function(){this._helper.resume()},I.exports=S},{"../utils":32,"readable-stream":16}],14:[function(g,I,z){I.exports={isNode:typeof Buffer<"u",newBufferFrom:function(D,S){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(D,S);if(typeof D=="number")throw new Error('The "data" argument must not be a number');return new Buffer(D,S)},allocBuffer:function(D){if(Buffer.alloc)return Buffer.alloc(D);var S=new Buffer(D);return S.fill(0),S},isBuffer:function(D){return Buffer.isBuffer(D)},isStream:function(D){return D&&typeof D.on=="function"&&typeof D.pause=="function"&&typeof D.resume=="function"}}},{}],15:[function(g,I,z){function D(m,d,_){var T,R=A.getTypeOf(d),$=A.extend(_||{},o);$.date=$.date||new Date,$.compression!==null&&($.compression=$.compression.toUpperCase()),typeof $.unixPermissions=="string"&&($.unixPermissions=parseInt($.unixPermissions,8)),$.unixPermissions&&16384&$.unixPermissions&&($.dir=!0),$.dosPermissions&&16&$.dosPermissions&&($.dir=!0),$.dir&&(m=u(m)),$.createFolders&&(T=a(m))&&p.call(this,T,!0);var k=R==="string"&&$.binary===!1&&$.base64===!1;_&&_.binary!==void 0||($.binary=!k),(d instanceof n&&d.uncompressedSize===0||$.dir||!d||d.length===0)&&($.base64=!1,$.binary=!0,d="",$.compression="STORE",R="string");var v=null;v=d instanceof n||d instanceof s?d:e.isNode&&e.isStream(d)?new r(m,d):A.prepareContent(m,d,$.binary,$.optimizedBinaryString,$.base64);var b=new i(m,v,$);this.files[m]=b}var S=g("./utf8"),A=g("./utils"),s=g("./stream/GenericWorker"),h=g("./stream/StreamHelper"),o=g("./defaults"),n=g("./compressedObject"),i=g("./zipObject"),t=g("./generate"),e=g("./nodejsUtils"),r=g("./nodejs/NodejsStreamInputAdapter"),a=function(m){m.slice(-1)==="/"&&(m=m.substring(0,m.length-1));var d=m.lastIndexOf("/");return 0<d?m.substring(0,d):""},u=function(m){return m.slice(-1)!=="/"&&(m+="/"),m},p=function(m,d){return d=d!==void 0?d:o.createFolders,m=u(m),this.files[m]||D.call(this,m,null,{dir:!0,createFolders:d}),this.files[m]};function M(m){return Object.prototype.toString.call(m)==="[object RegExp]"}var w={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(m){var d,_,T;for(d in this.files)T=this.files[d],(_=d.slice(this.root.length,d.length))&&d.slice(0,this.root.length)===this.root&&m(_,T)},filter:function(m){var d=[];return this.forEach(function(_,T){m(_,T)&&d.push(T)}),d},file:function(m,d,_){if(arguments.length!==1)return m=this.root+m,D.call(this,m,d,_),this;if(M(m)){var T=m;return this.filter(function($,k){return!k.dir&&T.test($)})}var R=this.files[this.root+m];return R&&!R.dir?R:null},folder:function(m){if(!m)return this;if(M(m))return this.filter(function(R,$){return $.dir&&m.test(R)});var d=this.root+m,_=p.call(this,d),T=this.clone();return T.root=_.name,T},remove:function(m){m=this.root+m;var d=this.files[m];if(d||(m.slice(-1)!=="/"&&(m+="/"),d=this.files[m]),d&&!d.dir)delete this.files[m];else for(var _=this.filter(function(R,$){return $.name.slice(0,m.length)===m}),T=0;T<_.length;T++)delete this.files[_[T].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(m){var d,_={};try{if((_=A.extend(m||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:S.utf8encode})).type=_.type.toLowerCase(),_.compression=_.compression.toUpperCase(),_.type==="binarystring"&&(_.type="string"),!_.type)throw new Error("No output type specified.");A.checkSupport(_.type),_.platform!=="darwin"&&_.platform!=="freebsd"&&_.platform!=="linux"&&_.platform!=="sunos"||(_.platform="UNIX"),_.platform==="win32"&&(_.platform="DOS");var T=_.comment||this.comment||"";d=t.generateWorker(this,_,T)}catch(R){(d=new s("error")).error(R)}return new h(d,_.type||"string",_.mimeType)},generateAsync:function(m,d){return this.generateInternalStream(m).accumulate(d)},generateNodeStream:function(m,d){return(m=m||{}).type||(m.type="nodebuffer"),this.generateInternalStream(m).toNodejsStream(d)}};I.exports=w},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(g,I,z){I.exports=g("stream")},{stream:void 0}],17:[function(g,I,z){var D=g("./DataReader");function S(A){D.call(this,A);for(var s=0;s<this.data.length;s++)A[s]=255&A[s]}g("../utils").inherits(S,D),S.prototype.byteAt=function(A){return this.data[this.zero+A]},S.prototype.lastIndexOfSignature=function(A){for(var s=A.charCodeAt(0),h=A.charCodeAt(1),o=A.charCodeAt(2),n=A.charCodeAt(3),i=this.length-4;0<=i;--i)if(this.data[i]===s&&this.data[i+1]===h&&this.data[i+2]===o&&this.data[i+3]===n)return i-this.zero;return-1},S.prototype.readAndCheckSignature=function(A){var s=A.charCodeAt(0),h=A.charCodeAt(1),o=A.charCodeAt(2),n=A.charCodeAt(3),i=this.readData(4);return s===i[0]&&h===i[1]&&o===i[2]&&n===i[3]},S.prototype.readData=function(A){if(this.checkOffset(A),A===0)return[];var s=this.data.slice(this.zero+this.index,this.zero+this.index+A);return this.index+=A,s},I.exports=S},{"../utils":32,"./DataReader":18}],18:[function(g,I,z){var D=g("../utils");function S(A){this.data=A,this.length=A.length,this.index=0,this.zero=0}S.prototype={checkOffset:function(A){this.checkIndex(this.index+A)},checkIndex:function(A){if(this.length<this.zero+A||A<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+A+"). Corrupted zip ?")},setIndex:function(A){this.checkIndex(A),this.index=A},skip:function(A){this.setIndex(this.index+A)},byteAt:function(){},readInt:function(A){var s,h=0;for(this.checkOffset(A),s=this.index+A-1;s>=this.index;s--)h=(h<<8)+this.byteAt(s);return this.index+=A,h},readString:function(A){return D.transformTo("string",this.readData(A))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var A=this.readInt(4);return new Date(Date.UTC(1980+(A>>25&127),(A>>21&15)-1,A>>16&31,A>>11&31,A>>5&63,(31&A)<<1))}},I.exports=S},{"../utils":32}],19:[function(g,I,z){var D=g("./Uint8ArrayReader");function S(A){D.call(this,A)}g("../utils").inherits(S,D),S.prototype.readData=function(A){this.checkOffset(A);var s=this.data.slice(this.zero+this.index,this.zero+this.index+A);return this.index+=A,s},I.exports=S},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(g,I,z){var D=g("./DataReader");function S(A){D.call(this,A)}g("../utils").inherits(S,D),S.prototype.byteAt=function(A){return this.data.charCodeAt(this.zero+A)},S.prototype.lastIndexOfSignature=function(A){return this.data.lastIndexOf(A)-this.zero},S.prototype.readAndCheckSignature=function(A){return A===this.readData(4)},S.prototype.readData=function(A){this.checkOffset(A);var s=this.data.slice(this.zero+this.index,this.zero+this.index+A);return this.index+=A,s},I.exports=S},{"../utils":32,"./DataReader":18}],21:[function(g,I,z){var D=g("./ArrayReader");function S(A){D.call(this,A)}g("../utils").inherits(S,D),S.prototype.readData=function(A){if(this.checkOffset(A),A===0)return new Uint8Array(0);var s=this.data.subarray(this.zero+this.index,this.zero+this.index+A);return this.index+=A,s},I.exports=S},{"../utils":32,"./ArrayReader":17}],22:[function(g,I,z){var D=g("../utils"),S=g("../support"),A=g("./ArrayReader"),s=g("./StringReader"),h=g("./NodeBufferReader"),o=g("./Uint8ArrayReader");I.exports=function(n){var i=D.getTypeOf(n);return D.checkSupport(i),i!=="string"||S.uint8array?i==="nodebuffer"?new h(n):S.uint8array?new o(D.transformTo("uint8array",n)):new A(D.transformTo("array",n)):new s(n)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(g,I,z){z.LOCAL_FILE_HEADER="PK",z.CENTRAL_FILE_HEADER="PK",z.CENTRAL_DIRECTORY_END="PK",z.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",z.ZIP64_CENTRAL_DIRECTORY_END="PK",z.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(g,I,z){var D=g("./GenericWorker"),S=g("../utils");function A(s){D.call(this,"ConvertWorker to "+s),this.destType=s}S.inherits(A,D),A.prototype.processChunk=function(s){this.push({data:S.transformTo(this.destType,s.data),meta:s.meta})},I.exports=A},{"../utils":32,"./GenericWorker":28}],25:[function(g,I,z){var D=g("./GenericWorker"),S=g("../crc32");function A(){D.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}g("../utils").inherits(A,D),A.prototype.processChunk=function(s){this.streamInfo.crc32=S(s.data,this.streamInfo.crc32||0),this.push(s)},I.exports=A},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(g,I,z){var D=g("../utils"),S=g("./GenericWorker");function A(s){S.call(this,"DataLengthProbe for "+s),this.propName=s,this.withStreamInfo(s,0)}D.inherits(A,S),A.prototype.processChunk=function(s){if(s){var h=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=h+s.data.length}S.prototype.processChunk.call(this,s)},I.exports=A},{"../utils":32,"./GenericWorker":28}],27:[function(g,I,z){var D=g("../utils"),S=g("./GenericWorker");function A(s){S.call(this,"DataWorker");var h=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,s.then(function(o){h.dataIsReady=!0,h.data=o,h.max=o&&o.length||0,h.type=D.getTypeOf(o),h.isPaused||h._tickAndRepeat()},function(o){h.error(o)})}D.inherits(A,S),A.prototype.cleanUp=function(){S.prototype.cleanUp.call(this),this.data=null},A.prototype.resume=function(){return!!S.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,D.delay(this._tickAndRepeat,[],this)),!0)},A.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(D.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},A.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var s=null,h=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":s=this.data.substring(this.index,h);break;case"uint8array":s=this.data.subarray(this.index,h);break;case"array":case"nodebuffer":s=this.data.slice(this.index,h)}return this.index=h,this.push({data:s,meta:{percent:this.max?this.index/this.max*100:0}})},I.exports=A},{"../utils":32,"./GenericWorker":28}],28:[function(g,I,z){function D(S){this.name=S||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}D.prototype={push:function(S){this.emit("data",S)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(S){this.emit("error",S)}return!0},error:function(S){return!this.isFinished&&(this.isPaused?this.generatedError=S:(this.isFinished=!0,this.emit("error",S),this.previous&&this.previous.error(S),this.cleanUp()),!0)},on:function(S,A){return this._listeners[S].push(A),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(S,A){if(this._listeners[S])for(var s=0;s<this._listeners[S].length;s++)this._listeners[S][s].call(this,A)},pipe:function(S){return S.registerPrevious(this)},registerPrevious:function(S){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=S.streamInfo,this.mergeStreamInfo(),this.previous=S;var A=this;return S.on("data",function(s){A.processChunk(s)}),S.on("end",function(){A.end()}),S.on("error",function(s){A.error(s)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var S=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),S=!0),this.previous&&this.previous.resume(),!S},flush:function(){},processChunk:function(S){this.push(S)},withStreamInfo:function(S,A){return this.extraStreamInfo[S]=A,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var S in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,S)&&(this.streamInfo[S]=this.extraStreamInfo[S])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var S="Worker "+this.name;return this.previous?this.previous+" -> "+S:S}},I.exports=D},{}],29:[function(g,I,z){var D=g("../utils"),S=g("./ConvertWorker"),A=g("./GenericWorker"),s=g("../base64"),h=g("../support"),o=g("../external"),n=null;if(h.nodestream)try{n=g("../nodejs/NodejsStreamOutputAdapter")}catch{}function i(e,r){return new o.Promise(function(a,u){var p=[],M=e._internalType,w=e._outputType,m=e._mimeType;e.on("data",function(d,_){p.push(d),r&&r(_)}).on("error",function(d){p=[],u(d)}).on("end",function(){try{var d=function(_,T,R){switch(_){case"blob":return D.newBlob(D.transformTo("arraybuffer",T),R);case"base64":return s.encode(T);default:return D.transformTo(_,T)}}(w,function(_,T){var R,$=0,k=null,v=0;for(R=0;R<T.length;R++)v+=T[R].length;switch(_){case"string":return T.join("");case"array":return Array.prototype.concat.apply([],T);case"uint8array":for(k=new Uint8Array(v),R=0;R<T.length;R++)k.set(T[R],$),$+=T[R].length;return k;case"nodebuffer":return Buffer.concat(T);default:throw new Error("concat : unsupported type '"+_+"'")}}(M,p),m);a(d)}catch(_){u(_)}p=[]}).resume()})}function t(e,r,a){var u=r;switch(r){case"blob":case"arraybuffer":u="uint8array";break;case"base64":u="string"}try{this._internalType=u,this._outputType=r,this._mimeType=a,D.checkSupport(u),this._worker=e.pipe(new S(u)),e.lock()}catch(p){this._worker=new A("error"),this._worker.error(p)}}t.prototype={accumulate:function(e){return i(this,e)},on:function(e,r){var a=this;return e==="data"?this._worker.on(e,function(u){r.call(a,u.data,u.meta)}):this._worker.on(e,function(){D.delay(r,arguments,a)}),this},resume:function(){return D.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(D.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new n(this,{objectMode:this._outputType!=="nodebuffer"},e)}},I.exports=t},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(g,I,z){if(z.base64=!0,z.array=!0,z.string=!0,z.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",z.nodebuffer=typeof Buffer<"u",z.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")z.blob=!1;else{var D=new ArrayBuffer(0);try{z.blob=new Blob([D],{type:"application/zip"}).size===0}catch{try{var S=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);S.append(D),z.blob=S.getBlob("application/zip").size===0}catch{z.blob=!1}}}try{z.nodestream=!!g("readable-stream").Readable}catch{z.nodestream=!1}},{"readable-stream":16}],31:[function(g,I,z){for(var D=g("./utils"),S=g("./support"),A=g("./nodejsUtils"),s=g("./stream/GenericWorker"),h=new Array(256),o=0;o<256;o++)h[o]=252<=o?6:248<=o?5:240<=o?4:224<=o?3:192<=o?2:1;h[254]=h[254]=1;function n(){s.call(this,"utf-8 decode"),this.leftOver=null}function i(){s.call(this,"utf-8 encode")}z.utf8encode=function(t){return S.nodebuffer?A.newBufferFrom(t,"utf-8"):function(e){var r,a,u,p,M,w=e.length,m=0;for(p=0;p<w;p++)(64512&(a=e.charCodeAt(p)))==55296&&p+1<w&&(64512&(u=e.charCodeAt(p+1)))==56320&&(a=65536+(a-55296<<10)+(u-56320),p++),m+=a<128?1:a<2048?2:a<65536?3:4;for(r=S.uint8array?new Uint8Array(m):new Array(m),p=M=0;M<m;p++)(64512&(a=e.charCodeAt(p)))==55296&&p+1<w&&(64512&(u=e.charCodeAt(p+1)))==56320&&(a=65536+(a-55296<<10)+(u-56320),p++),a<128?r[M++]=a:(a<2048?r[M++]=192|a>>>6:(a<65536?r[M++]=224|a>>>12:(r[M++]=240|a>>>18,r[M++]=128|a>>>12&63),r[M++]=128|a>>>6&63),r[M++]=128|63&a);return r}(t)},z.utf8decode=function(t){return S.nodebuffer?D.transformTo("nodebuffer",t).toString("utf-8"):function(e){var r,a,u,p,M=e.length,w=new Array(2*M);for(r=a=0;r<M;)if((u=e[r++])<128)w[a++]=u;else if(4<(p=h[u]))w[a++]=65533,r+=p-1;else{for(u&=p===2?31:p===3?15:7;1<p&&r<M;)u=u<<6|63&e[r++],p--;1<p?w[a++]=65533:u<65536?w[a++]=u:(u-=65536,w[a++]=55296|u>>10&1023,w[a++]=56320|1023&u)}return w.length!==a&&(w.subarray?w=w.subarray(0,a):w.length=a),D.applyFromCharCode(w)}(t=D.transformTo(S.uint8array?"uint8array":"array",t))},D.inherits(n,s),n.prototype.processChunk=function(t){var e=D.transformTo(S.uint8array?"uint8array":"array",t.data);if(this.leftOver&&this.leftOver.length){if(S.uint8array){var r=e;(e=new Uint8Array(r.length+this.leftOver.length)).set(this.leftOver,0),e.set(r,this.leftOver.length)}else e=this.leftOver.concat(e);this.leftOver=null}var a=function(p,M){var w;for((M=M||p.length)>p.length&&(M=p.length),w=M-1;0<=w&&(192&p[w])==128;)w--;return w<0||w===0?M:w+h[p[w]]>M?w:M}(e),u=e;a!==e.length&&(S.uint8array?(u=e.subarray(0,a),this.leftOver=e.subarray(a,e.length)):(u=e.slice(0,a),this.leftOver=e.slice(a,e.length))),this.push({data:z.utf8decode(u),meta:t.meta})},n.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:z.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},z.Utf8DecodeWorker=n,D.inherits(i,s),i.prototype.processChunk=function(t){this.push({data:z.utf8encode(t.data),meta:t.meta})},z.Utf8EncodeWorker=i},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(g,I,z){var D=g("./support"),S=g("./base64"),A=g("./nodejsUtils"),s=g("./external");function h(r){return r}function o(r,a){for(var u=0;u<r.length;++u)a[u]=255&r.charCodeAt(u);return a}g("setimmediate"),z.newBlob=function(r,a){z.checkSupport("blob");try{return new Blob([r],{type:a})}catch{try{var u=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return u.append(r),u.getBlob(a)}catch{throw new Error("Bug : can't construct the Blob.")}}};var n={stringifyByChunk:function(r,a,u){var p=[],M=0,w=r.length;if(w<=u)return String.fromCharCode.apply(null,r);for(;M<w;)a==="array"||a==="nodebuffer"?p.push(String.fromCharCode.apply(null,r.slice(M,Math.min(M+u,w)))):p.push(String.fromCharCode.apply(null,r.subarray(M,Math.min(M+u,w)))),M+=u;return p.join("")},stringifyByChar:function(r){for(var a="",u=0;u<r.length;u++)a+=String.fromCharCode(r[u]);return a},applyCanBeUsed:{uint8array:function(){try{return D.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return D.nodebuffer&&String.fromCharCode.apply(null,A.allocBuffer(1)).length===1}catch{return!1}}()}};function i(r){var a=65536,u=z.getTypeOf(r),p=!0;if(u==="uint8array"?p=n.applyCanBeUsed.uint8array:u==="nodebuffer"&&(p=n.applyCanBeUsed.nodebuffer),p)for(;1<a;)try{return n.stringifyByChunk(r,u,a)}catch{a=Math.floor(a/2)}return n.stringifyByChar(r)}function t(r,a){for(var u=0;u<r.length;u++)a[u]=r[u];return a}z.applyFromCharCode=i;var e={};e.string={string:h,array:function(r){return o(r,new Array(r.length))},arraybuffer:function(r){return e.string.uint8array(r).buffer},uint8array:function(r){return o(r,new Uint8Array(r.length))},nodebuffer:function(r){return o(r,A.allocBuffer(r.length))}},e.array={string:i,array:h,arraybuffer:function(r){return new Uint8Array(r).buffer},uint8array:function(r){return new Uint8Array(r)},nodebuffer:function(r){return A.newBufferFrom(r)}},e.arraybuffer={string:function(r){return i(new Uint8Array(r))},array:function(r){return t(new Uint8Array(r),new Array(r.byteLength))},arraybuffer:h,uint8array:function(r){return new Uint8Array(r)},nodebuffer:function(r){return A.newBufferFrom(new Uint8Array(r))}},e.uint8array={string:i,array:function(r){return t(r,new Array(r.length))},arraybuffer:function(r){return r.buffer},uint8array:h,nodebuffer:function(r){return A.newBufferFrom(r)}},e.nodebuffer={string:i,array:function(r){return t(r,new Array(r.length))},arraybuffer:function(r){return e.nodebuffer.uint8array(r).buffer},uint8array:function(r){return t(r,new Uint8Array(r.length))},nodebuffer:h},z.transformTo=function(r,a){if(a=a||"",!r)return a;z.checkSupport(r);var u=z.getTypeOf(a);return e[u][r](a)},z.resolve=function(r){for(var a=r.split("/"),u=[],p=0;p<a.length;p++){var M=a[p];M==="."||M===""&&p!==0&&p!==a.length-1||(M===".."?u.pop():u.push(M))}return u.join("/")},z.getTypeOf=function(r){return typeof r=="string"?"string":Object.prototype.toString.call(r)==="[object Array]"?"array":D.nodebuffer&&A.isBuffer(r)?"nodebuffer":D.uint8array&&r instanceof Uint8Array?"uint8array":D.arraybuffer&&r instanceof ArrayBuffer?"arraybuffer":void 0},z.checkSupport=function(r){if(!D[r.toLowerCase()])throw new Error(r+" is not supported by this platform")},z.MAX_VALUE_16BITS=65535,z.MAX_VALUE_32BITS=-1,z.pretty=function(r){var a,u,p="";for(u=0;u<(r||"").length;u++)p+="\\x"+((a=r.charCodeAt(u))<16?"0":"")+a.toString(16).toUpperCase();return p},z.delay=function(r,a,u){setImmediate(function(){r.apply(u||null,a||[])})},z.inherits=function(r,a){function u(){}u.prototype=a.prototype,r.prototype=new u},z.extend=function(){var r,a,u={};for(r=0;r<arguments.length;r++)for(a in arguments[r])Object.prototype.hasOwnProperty.call(arguments[r],a)&&u[a]===void 0&&(u[a]=arguments[r][a]);return u},z.prepareContent=function(r,a,u,p,M){return s.Promise.resolve(a).then(function(w){return D.blob&&(w instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(w))!==-1)&&typeof FileReader<"u"?new s.Promise(function(m,d){var _=new FileReader;_.onload=function(T){m(T.target.result)},_.onerror=function(T){d(T.target.error)},_.readAsArrayBuffer(w)}):w}).then(function(w){var m=z.getTypeOf(w);return m?(m==="arraybuffer"?w=z.transformTo("uint8array",w):m==="string"&&(M?w=S.decode(w):u&&p!==!0&&(w=function(d){return o(d,D.uint8array?new Uint8Array(d.length):new Array(d.length))}(w))),w):s.Promise.reject(new Error("Can't read the data of '"+r+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(g,I,z){var D=g("./reader/readerFor"),S=g("./utils"),A=g("./signature"),s=g("./zipEntry"),h=g("./support");function o(n){this.files=[],this.loadOptions=n}o.prototype={checkSignature:function(n){if(!this.reader.readAndCheckSignature(n)){this.reader.index-=4;var i=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+S.pretty(i)+", expected "+S.pretty(n)+")")}},isSignature:function(n,i){var t=this.reader.index;this.reader.setIndex(n);var e=this.reader.readString(4)===i;return this.reader.setIndex(t),e},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var n=this.reader.readData(this.zipCommentLength),i=h.uint8array?"uint8array":"array",t=S.transformTo(i,n);this.zipComment=this.loadOptions.decodeFileName(t)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var n,i,t,e=this.zip64EndOfCentralSize-44;0<e;)n=this.reader.readInt(2),i=this.reader.readInt(4),t=this.reader.readData(i),this.zip64ExtensibleData[n]={id:n,length:i,value:t}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var n,i;for(n=0;n<this.files.length;n++)i=this.files[n],this.reader.setIndex(i.localHeaderOffset),this.checkSignature(A.LOCAL_FILE_HEADER),i.readLocalPart(this.reader),i.handleUTF8(),i.processAttributes()},readCentralDir:function(){var n;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(A.CENTRAL_FILE_HEADER);)(n=new s({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(n);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var n=this.reader.lastIndexOfSignature(A.CENTRAL_DIRECTORY_END);if(n<0)throw this.isSignature(0,A.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(n);var i=n;if(this.checkSignature(A.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===S.MAX_VALUE_16BITS||this.diskWithCentralDirStart===S.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===S.MAX_VALUE_16BITS||this.centralDirRecords===S.MAX_VALUE_16BITS||this.centralDirSize===S.MAX_VALUE_32BITS||this.centralDirOffset===S.MAX_VALUE_32BITS){if(this.zip64=!0,(n=this.reader.lastIndexOfSignature(A.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(n),this.checkSignature(A.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,A.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(A.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(A.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var t=this.centralDirOffset+this.centralDirSize;this.zip64&&(t+=20,t+=12+this.zip64EndOfCentralSize);var e=i-t;if(0<e)this.isSignature(i,A.CENTRAL_FILE_HEADER)||(this.reader.zero=e);else if(e<0)throw new Error("Corrupted zip: missing "+Math.abs(e)+" bytes.")},prepareReader:function(n){this.reader=D(n)},load:function(n){this.prepareReader(n),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},I.exports=o},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(g,I,z){var D=g("./reader/readerFor"),S=g("./utils"),A=g("./compressedObject"),s=g("./crc32"),h=g("./utf8"),o=g("./compressions"),n=g("./support");function i(t,e){this.options=t,this.loadOptions=e}i.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(t){var e,r;if(t.skip(22),this.fileNameLength=t.readInt(2),r=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(r),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((e=function(a){for(var u in o)if(Object.prototype.hasOwnProperty.call(o,u)&&o[u].magic===a)return o[u];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+S.pretty(this.compressionMethod)+" unknown (inner file : "+S.transformTo("string",this.fileName)+")");this.decompressed=new A(this.compressedSize,this.uncompressedSize,this.crc32,e,t.readData(this.compressedSize))},readCentralPart:function(t){this.versionMadeBy=t.readInt(2),t.skip(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4);var e=t.readInt(2);if(this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");t.skip(e),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),t==0&&(this.dosPermissions=63&this.externalFileAttributes),t==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var t=D(this.extraFields[1].value);this.uncompressedSize===S.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===S.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===S.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===S.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(t){var e,r,a,u=t.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});t.index+4<u;)e=t.readInt(2),r=t.readInt(2),a=t.readData(r),this.extraFields[e]={id:e,length:r,value:a};t.setIndex(u)},handleUTF8:function(){var t=n.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=h.utf8decode(this.fileName),this.fileCommentStr=h.utf8decode(this.fileComment);else{var e=this.findExtraFieldUnicodePath();if(e!==null)this.fileNameStr=e;else{var r=S.transformTo(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(r)}var a=this.findExtraFieldUnicodeComment();if(a!==null)this.fileCommentStr=a;else{var u=S.transformTo(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(u)}}},findExtraFieldUnicodePath:function(){var t=this.extraFields[28789];if(t){var e=D(t.value);return e.readInt(1)!==1||s(this.fileName)!==e.readInt(4)?null:h.utf8decode(e.readData(t.length-5))}return null},findExtraFieldUnicodeComment:function(){var t=this.extraFields[25461];if(t){var e=D(t.value);return e.readInt(1)!==1||s(this.fileComment)!==e.readInt(4)?null:h.utf8decode(e.readData(t.length-5))}return null}},I.exports=i},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(g,I,z){function D(e,r,a){this.name=e,this.dir=a.dir,this.date=a.date,this.comment=a.comment,this.unixPermissions=a.unixPermissions,this.dosPermissions=a.dosPermissions,this._data=r,this._dataBinary=a.binary,this.options={compression:a.compression,compressionOptions:a.compressionOptions}}var S=g("./stream/StreamHelper"),A=g("./stream/DataWorker"),s=g("./utf8"),h=g("./compressedObject"),o=g("./stream/GenericWorker");D.prototype={internalStream:function(e){var r=null,a="string";try{if(!e)throw new Error("No output type specified.");var u=(a=e.toLowerCase())==="string"||a==="text";a!=="binarystring"&&a!=="text"||(a="string"),r=this._decompressWorker();var p=!this._dataBinary;p&&!u&&(r=r.pipe(new s.Utf8EncodeWorker)),!p&&u&&(r=r.pipe(new s.Utf8DecodeWorker))}catch(M){(r=new o("error")).error(M)}return new S(r,a,"")},async:function(e,r){return this.internalStream(e).accumulate(r)},nodeStream:function(e,r){return this.internalStream(e||"nodebuffer").toNodejsStream(r)},_compressWorker:function(e,r){if(this._data instanceof h&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var a=this._decompressWorker();return this._dataBinary||(a=a.pipe(new s.Utf8EncodeWorker)),h.createWorkerFrom(a,e,r)},_decompressWorker:function(){return this._data instanceof h?this._data.getContentWorker():this._data instanceof o?this._data:new A(this._data)}};for(var n=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],i=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},t=0;t<n.length;t++)D.prototype[n[t]]=i;I.exports=D},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(g,I,z){(function(D){var S,A,s=D.MutationObserver||D.WebKitMutationObserver;if(s){var h=0,o=new s(e),n=D.document.createTextNode("");o.observe(n,{characterData:!0}),S=function(){n.data=h=++h%2}}else if(D.setImmediate||D.MessageChannel===void 0)S="document"in D&&"onreadystatechange"in D.document.createElement("script")?function(){var r=D.document.createElement("script");r.onreadystatechange=function(){e(),r.onreadystatechange=null,r.parentNode.removeChild(r),r=null},D.document.documentElement.appendChild(r)}:function(){setTimeout(e,0)};else{var i=new D.MessageChannel;i.port1.onmessage=e,S=function(){i.port2.postMessage(0)}}var t=[];function e(){var r,a;A=!0;for(var u=t.length;u;){for(a=t,t=[],r=-1;++r<u;)a[r]();u=t.length}A=!1}I.exports=function(r){t.push(r)!==1||A||S()}}).call(this,typeof Fn<"u"?Fn:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(g,I,z){var D=g("immediate");function S(){}var A={},s=["REJECTED"],h=["FULFILLED"],o=["PENDING"];function n(u){if(typeof u!="function")throw new TypeError("resolver must be a function");this.state=o,this.queue=[],this.outcome=void 0,u!==S&&r(this,u)}function i(u,p,M){this.promise=u,typeof p=="function"&&(this.onFulfilled=p,this.callFulfilled=this.otherCallFulfilled),typeof M=="function"&&(this.onRejected=M,this.callRejected=this.otherCallRejected)}function t(u,p,M){D(function(){var w;try{w=p(M)}catch(m){return A.reject(u,m)}w===u?A.reject(u,new TypeError("Cannot resolve promise with itself")):A.resolve(u,w)})}function e(u){var p=u&&u.then;if(u&&(typeof u=="object"||typeof u=="function")&&typeof p=="function")return function(){p.apply(u,arguments)}}function r(u,p){var M=!1;function w(_){M||(M=!0,A.reject(u,_))}function m(_){M||(M=!0,A.resolve(u,_))}var d=a(function(){p(m,w)});d.status==="error"&&w(d.value)}function a(u,p){var M={};try{M.value=u(p),M.status="success"}catch(w){M.status="error",M.value=w}return M}(I.exports=n).prototype.finally=function(u){if(typeof u!="function")return this;var p=this.constructor;return this.then(function(M){return p.resolve(u()).then(function(){return M})},function(M){return p.resolve(u()).then(function(){throw M})})},n.prototype.catch=function(u){return this.then(null,u)},n.prototype.then=function(u,p){if(typeof u!="function"&&this.state===h||typeof p!="function"&&this.state===s)return this;var M=new this.constructor(S);return this.state!==o?t(M,this.state===h?u:p,this.outcome):this.queue.push(new i(M,u,p)),M},i.prototype.callFulfilled=function(u){A.resolve(this.promise,u)},i.prototype.otherCallFulfilled=function(u){t(this.promise,this.onFulfilled,u)},i.prototype.callRejected=function(u){A.reject(this.promise,u)},i.prototype.otherCallRejected=function(u){t(this.promise,this.onRejected,u)},A.resolve=function(u,p){var M=a(e,p);if(M.status==="error")return A.reject(u,M.value);var w=M.value;if(w)r(u,w);else{u.state=h,u.outcome=p;for(var m=-1,d=u.queue.length;++m<d;)u.queue[m].callFulfilled(p)}return u},A.reject=function(u,p){u.state=s,u.outcome=p;for(var M=-1,w=u.queue.length;++M<w;)u.queue[M].callRejected(p);return u},n.resolve=function(u){return u instanceof this?u:A.resolve(new this(S),u)},n.reject=function(u){var p=new this(S);return A.reject(p,u)},n.all=function(u){var p=this;if(Object.prototype.toString.call(u)!=="[object Array]")return this.reject(new TypeError("must be an array"));var M=u.length,w=!1;if(!M)return this.resolve([]);for(var m=new Array(M),d=0,_=-1,T=new this(S);++_<M;)R(u[_],_);return T;function R($,k){p.resolve($).then(function(v){m[k]=v,++d!==M||w||(w=!0,A.resolve(T,m))},function(v){w||(w=!0,A.reject(T,v))})}},n.race=function(u){var p=this;if(Object.prototype.toString.call(u)!=="[object Array]")return this.reject(new TypeError("must be an array"));var M=u.length,w=!1;if(!M)return this.resolve([]);for(var m=-1,d=new this(S);++m<M;)_=u[m],p.resolve(_).then(function(T){w||(w=!0,A.resolve(d,T))},function(T){w||(w=!0,A.reject(d,T))});var _;return d}},{immediate:36}],38:[function(g,I,z){var D={};(0,g("./lib/utils/common").assign)(D,g("./lib/deflate"),g("./lib/inflate"),g("./lib/zlib/constants")),I.exports=D},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(g,I,z){var D=g("./zlib/deflate"),S=g("./utils/common"),A=g("./utils/strings"),s=g("./zlib/messages"),h=g("./zlib/zstream"),o=Object.prototype.toString,n=0,i=-1,t=0,e=8;function r(u){if(!(this instanceof r))return new r(u);this.options=S.assign({level:i,method:e,chunkSize:16384,windowBits:15,memLevel:8,strategy:t,to:""},u||{});var p=this.options;p.raw&&0<p.windowBits?p.windowBits=-p.windowBits:p.gzip&&0<p.windowBits&&p.windowBits<16&&(p.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var M=D.deflateInit2(this.strm,p.level,p.method,p.windowBits,p.memLevel,p.strategy);if(M!==n)throw new Error(s[M]);if(p.header&&D.deflateSetHeader(this.strm,p.header),p.dictionary){var w;if(w=typeof p.dictionary=="string"?A.string2buf(p.dictionary):o.call(p.dictionary)==="[object ArrayBuffer]"?new Uint8Array(p.dictionary):p.dictionary,(M=D.deflateSetDictionary(this.strm,w))!==n)throw new Error(s[M]);this._dict_set=!0}}function a(u,p){var M=new r(p);if(M.push(u,!0),M.err)throw M.msg||s[M.err];return M.result}r.prototype.push=function(u,p){var M,w,m=this.strm,d=this.options.chunkSize;if(this.ended)return!1;w=p===~~p?p:p===!0?4:0,typeof u=="string"?m.input=A.string2buf(u):o.call(u)==="[object ArrayBuffer]"?m.input=new Uint8Array(u):m.input=u,m.next_in=0,m.avail_in=m.input.length;do{if(m.avail_out===0&&(m.output=new S.Buf8(d),m.next_out=0,m.avail_out=d),(M=D.deflate(m,w))!==1&&M!==n)return this.onEnd(M),!(this.ended=!0);m.avail_out!==0&&(m.avail_in!==0||w!==4&&w!==2)||(this.options.to==="string"?this.onData(A.buf2binstring(S.shrinkBuf(m.output,m.next_out))):this.onData(S.shrinkBuf(m.output,m.next_out)))}while((0<m.avail_in||m.avail_out===0)&&M!==1);return w===4?(M=D.deflateEnd(this.strm),this.onEnd(M),this.ended=!0,M===n):w!==2||(this.onEnd(n),!(m.avail_out=0))},r.prototype.onData=function(u){this.chunks.push(u)},r.prototype.onEnd=function(u){u===n&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=S.flattenChunks(this.chunks)),this.chunks=[],this.err=u,this.msg=this.strm.msg},z.Deflate=r,z.deflate=a,z.deflateRaw=function(u,p){return(p=p||{}).raw=!0,a(u,p)},z.gzip=function(u,p){return(p=p||{}).gzip=!0,a(u,p)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(g,I,z){var D=g("./zlib/inflate"),S=g("./utils/common"),A=g("./utils/strings"),s=g("./zlib/constants"),h=g("./zlib/messages"),o=g("./zlib/zstream"),n=g("./zlib/gzheader"),i=Object.prototype.toString;function t(r){if(!(this instanceof t))return new t(r);this.options=S.assign({chunkSize:16384,windowBits:0,to:""},r||{});var a=this.options;a.raw&&0<=a.windowBits&&a.windowBits<16&&(a.windowBits=-a.windowBits,a.windowBits===0&&(a.windowBits=-15)),!(0<=a.windowBits&&a.windowBits<16)||r&&r.windowBits||(a.windowBits+=32),15<a.windowBits&&a.windowBits<48&&(15&a.windowBits)==0&&(a.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;var u=D.inflateInit2(this.strm,a.windowBits);if(u!==s.Z_OK)throw new Error(h[u]);this.header=new n,D.inflateGetHeader(this.strm,this.header)}function e(r,a){var u=new t(a);if(u.push(r,!0),u.err)throw u.msg||h[u.err];return u.result}t.prototype.push=function(r,a){var u,p,M,w,m,d,_=this.strm,T=this.options.chunkSize,R=this.options.dictionary,$=!1;if(this.ended)return!1;p=a===~~a?a:a===!0?s.Z_FINISH:s.Z_NO_FLUSH,typeof r=="string"?_.input=A.binstring2buf(r):i.call(r)==="[object ArrayBuffer]"?_.input=new Uint8Array(r):_.input=r,_.next_in=0,_.avail_in=_.input.length;do{if(_.avail_out===0&&(_.output=new S.Buf8(T),_.next_out=0,_.avail_out=T),(u=D.inflate(_,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&R&&(d=typeof R=="string"?A.string2buf(R):i.call(R)==="[object ArrayBuffer]"?new Uint8Array(R):R,u=D.inflateSetDictionary(this.strm,d)),u===s.Z_BUF_ERROR&&$===!0&&(u=s.Z_OK,$=!1),u!==s.Z_STREAM_END&&u!==s.Z_OK)return this.onEnd(u),!(this.ended=!0);_.next_out&&(_.avail_out!==0&&u!==s.Z_STREAM_END&&(_.avail_in!==0||p!==s.Z_FINISH&&p!==s.Z_SYNC_FLUSH)||(this.options.to==="string"?(M=A.utf8border(_.output,_.next_out),w=_.next_out-M,m=A.buf2string(_.output,M),_.next_out=w,_.avail_out=T-w,w&&S.arraySet(_.output,_.output,M,w,0),this.onData(m)):this.onData(S.shrinkBuf(_.output,_.next_out)))),_.avail_in===0&&_.avail_out===0&&($=!0)}while((0<_.avail_in||_.avail_out===0)&&u!==s.Z_STREAM_END);return u===s.Z_STREAM_END&&(p=s.Z_FINISH),p===s.Z_FINISH?(u=D.inflateEnd(this.strm),this.onEnd(u),this.ended=!0,u===s.Z_OK):p!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),!(_.avail_out=0))},t.prototype.onData=function(r){this.chunks.push(r)},t.prototype.onEnd=function(r){r===s.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=S.flattenChunks(this.chunks)),this.chunks=[],this.err=r,this.msg=this.strm.msg},z.Inflate=t,z.inflate=e,z.inflateRaw=function(r,a){return(a=a||{}).raw=!0,e(r,a)},z.ungzip=e},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(g,I,z){var D=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";z.assign=function(s){for(var h=Array.prototype.slice.call(arguments,1);h.length;){var o=h.shift();if(o){if(typeof o!="object")throw new TypeError(o+"must be non-object");for(var n in o)o.hasOwnProperty(n)&&(s[n]=o[n])}}return s},z.shrinkBuf=function(s,h){return s.length===h?s:s.subarray?s.subarray(0,h):(s.length=h,s)};var S={arraySet:function(s,h,o,n,i){if(h.subarray&&s.subarray)s.set(h.subarray(o,o+n),i);else for(var t=0;t<n;t++)s[i+t]=h[o+t]},flattenChunks:function(s){var h,o,n,i,t,e;for(h=n=0,o=s.length;h<o;h++)n+=s[h].length;for(e=new Uint8Array(n),h=i=0,o=s.length;h<o;h++)t=s[h],e.set(t,i),i+=t.length;return e}},A={arraySet:function(s,h,o,n,i){for(var t=0;t<n;t++)s[i+t]=h[o+t]},flattenChunks:function(s){return[].concat.apply([],s)}};z.setTyped=function(s){s?(z.Buf8=Uint8Array,z.Buf16=Uint16Array,z.Buf32=Int32Array,z.assign(z,S)):(z.Buf8=Array,z.Buf16=Array,z.Buf32=Array,z.assign(z,A))},z.setTyped(D)},{}],42:[function(g,I,z){var D=g("./common"),S=!0,A=!0;try{String.fromCharCode.apply(null,[0])}catch{S=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{A=!1}for(var s=new D.Buf8(256),h=0;h<256;h++)s[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;function o(n,i){if(i<65537&&(n.subarray&&A||!n.subarray&&S))return String.fromCharCode.apply(null,D.shrinkBuf(n,i));for(var t="",e=0;e<i;e++)t+=String.fromCharCode(n[e]);return t}s[254]=s[254]=1,z.string2buf=function(n){var i,t,e,r,a,u=n.length,p=0;for(r=0;r<u;r++)(64512&(t=n.charCodeAt(r)))==55296&&r+1<u&&(64512&(e=n.charCodeAt(r+1)))==56320&&(t=65536+(t-55296<<10)+(e-56320),r++),p+=t<128?1:t<2048?2:t<65536?3:4;for(i=new D.Buf8(p),r=a=0;a<p;r++)(64512&(t=n.charCodeAt(r)))==55296&&r+1<u&&(64512&(e=n.charCodeAt(r+1)))==56320&&(t=65536+(t-55296<<10)+(e-56320),r++),t<128?i[a++]=t:(t<2048?i[a++]=192|t>>>6:(t<65536?i[a++]=224|t>>>12:(i[a++]=240|t>>>18,i[a++]=128|t>>>12&63),i[a++]=128|t>>>6&63),i[a++]=128|63&t);return i},z.buf2binstring=function(n){return o(n,n.length)},z.binstring2buf=function(n){for(var i=new D.Buf8(n.length),t=0,e=i.length;t<e;t++)i[t]=n.charCodeAt(t);return i},z.buf2string=function(n,i){var t,e,r,a,u=i||n.length,p=new Array(2*u);for(t=e=0;t<u;)if((r=n[t++])<128)p[e++]=r;else if(4<(a=s[r]))p[e++]=65533,t+=a-1;else{for(r&=a===2?31:a===3?15:7;1<a&&t<u;)r=r<<6|63&n[t++],a--;1<a?p[e++]=65533:r<65536?p[e++]=r:(r-=65536,p[e++]=55296|r>>10&1023,p[e++]=56320|1023&r)}return o(p,e)},z.utf8border=function(n,i){var t;for((i=i||n.length)>n.length&&(i=n.length),t=i-1;0<=t&&(192&n[t])==128;)t--;return t<0||t===0?i:t+s[n[t]]>i?t:i}},{"./common":41}],43:[function(g,I,z){I.exports=function(D,S,A,s){for(var h=65535&D|0,o=D>>>16&65535|0,n=0;A!==0;){for(A-=n=2e3<A?2e3:A;o=o+(h=h+S[s++]|0)|0,--n;);h%=65521,o%=65521}return h|o<<16|0}},{}],44:[function(g,I,z){I.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(g,I,z){var D=function(){for(var S,A=[],s=0;s<256;s++){S=s;for(var h=0;h<8;h++)S=1&S?3988292384^S>>>1:S>>>1;A[s]=S}return A}();I.exports=function(S,A,s,h){var o=D,n=h+s;S^=-1;for(var i=h;i<n;i++)S=S>>>8^o[255&(S^A[i])];return-1^S}},{}],46:[function(g,I,z){var D,S=g("../utils/common"),A=g("./trees"),s=g("./adler32"),h=g("./crc32"),o=g("./messages"),n=0,i=4,t=0,e=-2,r=-1,a=4,u=2,p=8,M=9,w=286,m=30,d=19,_=2*w+1,T=15,R=3,$=258,k=$+R+1,v=42,b=113,l=1,C=2,O=3,N=4;function G(U,pe){return U.msg=o[pe],pe}function W(U){return(U<<1)-(4<U?9:0)}function K(U){for(var pe=U.length;0<=--pe;)U[pe]=0}function V(U){var pe=U.state,le=pe.pending;le>U.avail_out&&(le=U.avail_out),le!==0&&(S.arraySet(U.output,pe.pending_buf,pe.pending_out,le,U.next_out),U.next_out+=le,pe.pending_out+=le,U.total_out+=le,U.avail_out-=le,pe.pending-=le,pe.pending===0&&(pe.pending_out=0))}function Y(U,pe){A._tr_flush_block(U,0<=U.block_start?U.block_start:-1,U.strstart-U.block_start,pe),U.block_start=U.strstart,V(U.strm)}function re(U,pe){U.pending_buf[U.pending++]=pe}function Q(U,pe){U.pending_buf[U.pending++]=pe>>>8&255,U.pending_buf[U.pending++]=255&pe}function ie(U,pe){var le,oe,te=U.max_chain_length,ce=U.strstart,ye=U.prev_length,_e=U.nice_match,fe=U.strstart>U.w_size-k?U.strstart-(U.w_size-k):0,be=U.window,$e=U.w_mask,Re=U.prev,he=U.strstart+$,we=be[ce+ye-1],Te=be[ce+ye];U.prev_length>=U.good_match&&(te>>=2),_e>U.lookahead&&(_e=U.lookahead);do if(be[(le=pe)+ye]===Te&&be[le+ye-1]===we&&be[le]===be[ce]&&be[++le]===be[ce+1]){ce+=2,le++;do;while(be[++ce]===be[++le]&&be[++ce]===be[++le]&&be[++ce]===be[++le]&&be[++ce]===be[++le]&&be[++ce]===be[++le]&&be[++ce]===be[++le]&&be[++ce]===be[++le]&&be[++ce]===be[++le]&&ce<he);if(oe=$-(he-ce),ce=he-$,ye<oe){if(U.match_start=pe,_e<=(ye=oe))break;we=be[ce+ye-1],Te=be[ce+ye]}}while((pe=Re[pe&$e])>fe&&--te!=0);return ye<=U.lookahead?ye:U.lookahead}function ue(U){var pe,le,oe,te,ce,ye,_e,fe,be,$e,Re=U.w_size;do{if(te=U.window_size-U.lookahead-U.strstart,U.strstart>=Re+(Re-k)){for(S.arraySet(U.window,U.window,Re,Re,0),U.match_start-=Re,U.strstart-=Re,U.block_start-=Re,pe=le=U.hash_size;oe=U.head[--pe],U.head[pe]=Re<=oe?oe-Re:0,--le;);for(pe=le=Re;oe=U.prev[--pe],U.prev[pe]=Re<=oe?oe-Re:0,--le;);te+=Re}if(U.strm.avail_in===0)break;if(ye=U.strm,_e=U.window,fe=U.strstart+U.lookahead,be=te,$e=void 0,$e=ye.avail_in,be<$e&&($e=be),le=$e===0?0:(ye.avail_in-=$e,S.arraySet(_e,ye.input,ye.next_in,$e,fe),ye.state.wrap===1?ye.adler=s(ye.adler,_e,$e,fe):ye.state.wrap===2&&(ye.adler=h(ye.adler,_e,$e,fe)),ye.next_in+=$e,ye.total_in+=$e,$e),U.lookahead+=le,U.lookahead+U.insert>=R)for(ce=U.strstart-U.insert,U.ins_h=U.window[ce],U.ins_h=(U.ins_h<<U.hash_shift^U.window[ce+1])&U.hash_mask;U.insert&&(U.ins_h=(U.ins_h<<U.hash_shift^U.window[ce+R-1])&U.hash_mask,U.prev[ce&U.w_mask]=U.head[U.ins_h],U.head[U.ins_h]=ce,ce++,U.insert--,!(U.lookahead+U.insert<R)););}while(U.lookahead<k&&U.strm.avail_in!==0)}function ge(U,pe){for(var le,oe;;){if(U.lookahead<k){if(ue(U),U.lookahead<k&&pe===n)return l;if(U.lookahead===0)break}if(le=0,U.lookahead>=R&&(U.ins_h=(U.ins_h<<U.hash_shift^U.window[U.strstart+R-1])&U.hash_mask,le=U.prev[U.strstart&U.w_mask]=U.head[U.ins_h],U.head[U.ins_h]=U.strstart),le!==0&&U.strstart-le<=U.w_size-k&&(U.match_length=ie(U,le)),U.match_length>=R)if(oe=A._tr_tally(U,U.strstart-U.match_start,U.match_length-R),U.lookahead-=U.match_length,U.match_length<=U.max_lazy_match&&U.lookahead>=R){for(U.match_length--;U.strstart++,U.ins_h=(U.ins_h<<U.hash_shift^U.window[U.strstart+R-1])&U.hash_mask,le=U.prev[U.strstart&U.w_mask]=U.head[U.ins_h],U.head[U.ins_h]=U.strstart,--U.match_length!=0;);U.strstart++}else U.strstart+=U.match_length,U.match_length=0,U.ins_h=U.window[U.strstart],U.ins_h=(U.ins_h<<U.hash_shift^U.window[U.strstart+1])&U.hash_mask;else oe=A._tr_tally(U,0,U.window[U.strstart]),U.lookahead--,U.strstart++;if(oe&&(Y(U,!1),U.strm.avail_out===0))return l}return U.insert=U.strstart<R-1?U.strstart:R-1,pe===i?(Y(U,!0),U.strm.avail_out===0?O:N):U.last_lit&&(Y(U,!1),U.strm.avail_out===0)?l:C}function me(U,pe){for(var le,oe,te;;){if(U.lookahead<k){if(ue(U),U.lookahead<k&&pe===n)return l;if(U.lookahead===0)break}if(le=0,U.lookahead>=R&&(U.ins_h=(U.ins_h<<U.hash_shift^U.window[U.strstart+R-1])&U.hash_mask,le=U.prev[U.strstart&U.w_mask]=U.head[U.ins_h],U.head[U.ins_h]=U.strstart),U.prev_length=U.match_length,U.prev_match=U.match_start,U.match_length=R-1,le!==0&&U.prev_length<U.max_lazy_match&&U.strstart-le<=U.w_size-k&&(U.match_length=ie(U,le),U.match_length<=5&&(U.strategy===1||U.match_length===R&&4096<U.strstart-U.match_start)&&(U.match_length=R-1)),U.prev_length>=R&&U.match_length<=U.prev_length){for(te=U.strstart+U.lookahead-R,oe=A._tr_tally(U,U.strstart-1-U.prev_match,U.prev_length-R),U.lookahead-=U.prev_length-1,U.prev_length-=2;++U.strstart<=te&&(U.ins_h=(U.ins_h<<U.hash_shift^U.window[U.strstart+R-1])&U.hash_mask,le=U.prev[U.strstart&U.w_mask]=U.head[U.ins_h],U.head[U.ins_h]=U.strstart),--U.prev_length!=0;);if(U.match_available=0,U.match_length=R-1,U.strstart++,oe&&(Y(U,!1),U.strm.avail_out===0))return l}else if(U.match_available){if((oe=A._tr_tally(U,0,U.window[U.strstart-1]))&&Y(U,!1),U.strstart++,U.lookahead--,U.strm.avail_out===0)return l}else U.match_available=1,U.strstart++,U.lookahead--}return U.match_available&&(oe=A._tr_tally(U,0,U.window[U.strstart-1]),U.match_available=0),U.insert=U.strstart<R-1?U.strstart:R-1,pe===i?(Y(U,!0),U.strm.avail_out===0?O:N):U.last_lit&&(Y(U,!1),U.strm.avail_out===0)?l:C}function ve(U,pe,le,oe,te){this.good_length=U,this.max_lazy=pe,this.nice_length=le,this.max_chain=oe,this.func=te}function Ce(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=p,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new S.Buf16(2*_),this.dyn_dtree=new S.Buf16(2*(2*m+1)),this.bl_tree=new S.Buf16(2*(2*d+1)),K(this.dyn_ltree),K(this.dyn_dtree),K(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new S.Buf16(T+1),this.heap=new S.Buf16(2*w+1),K(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new S.Buf16(2*w+1),K(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Me(U){var pe;return U&&U.state?(U.total_in=U.total_out=0,U.data_type=u,(pe=U.state).pending=0,pe.pending_out=0,pe.wrap<0&&(pe.wrap=-pe.wrap),pe.status=pe.wrap?v:b,U.adler=pe.wrap===2?0:1,pe.last_flush=n,A._tr_init(pe),t):G(U,e)}function Ie(U){var pe=Me(U);return pe===t&&function(le){le.window_size=2*le.w_size,K(le.head),le.max_lazy_match=D[le.level].max_lazy,le.good_match=D[le.level].good_length,le.nice_match=D[le.level].nice_length,le.max_chain_length=D[le.level].max_chain,le.strstart=0,le.block_start=0,le.lookahead=0,le.insert=0,le.match_length=le.prev_length=R-1,le.match_available=0,le.ins_h=0}(U.state),pe}function ze(U,pe,le,oe,te,ce){if(!U)return e;var ye=1;if(pe===r&&(pe=6),oe<0?(ye=0,oe=-oe):15<oe&&(ye=2,oe-=16),te<1||M<te||le!==p||oe<8||15<oe||pe<0||9<pe||ce<0||a<ce)return G(U,e);oe===8&&(oe=9);var _e=new Ce;return(U.state=_e).strm=U,_e.wrap=ye,_e.gzhead=null,_e.w_bits=oe,_e.w_size=1<<_e.w_bits,_e.w_mask=_e.w_size-1,_e.hash_bits=te+7,_e.hash_size=1<<_e.hash_bits,_e.hash_mask=_e.hash_size-1,_e.hash_shift=~~((_e.hash_bits+R-1)/R),_e.window=new S.Buf8(2*_e.w_size),_e.head=new S.Buf16(_e.hash_size),_e.prev=new S.Buf16(_e.w_size),_e.lit_bufsize=1<<te+6,_e.pending_buf_size=4*_e.lit_bufsize,_e.pending_buf=new S.Buf8(_e.pending_buf_size),_e.d_buf=1*_e.lit_bufsize,_e.l_buf=3*_e.lit_bufsize,_e.level=pe,_e.strategy=ce,_e.method=le,Ie(U)}D=[new ve(0,0,0,0,function(U,pe){var le=65535;for(le>U.pending_buf_size-5&&(le=U.pending_buf_size-5);;){if(U.lookahead<=1){if(ue(U),U.lookahead===0&&pe===n)return l;if(U.lookahead===0)break}U.strstart+=U.lookahead,U.lookahead=0;var oe=U.block_start+le;if((U.strstart===0||U.strstart>=oe)&&(U.lookahead=U.strstart-oe,U.strstart=oe,Y(U,!1),U.strm.avail_out===0)||U.strstart-U.block_start>=U.w_size-k&&(Y(U,!1),U.strm.avail_out===0))return l}return U.insert=0,pe===i?(Y(U,!0),U.strm.avail_out===0?O:N):(U.strstart>U.block_start&&(Y(U,!1),U.strm.avail_out),l)}),new ve(4,4,8,4,ge),new ve(4,5,16,8,ge),new ve(4,6,32,32,ge),new ve(4,4,16,16,me),new ve(8,16,32,32,me),new ve(8,16,128,128,me),new ve(8,32,128,256,me),new ve(32,128,258,1024,me),new ve(32,258,258,4096,me)],z.deflateInit=function(U,pe){return ze(U,pe,p,15,8,0)},z.deflateInit2=ze,z.deflateReset=Ie,z.deflateResetKeep=Me,z.deflateSetHeader=function(U,pe){return U&&U.state?U.state.wrap!==2?e:(U.state.gzhead=pe,t):e},z.deflate=function(U,pe){var le,oe,te,ce;if(!U||!U.state||5<pe||pe<0)return U?G(U,e):e;if(oe=U.state,!U.output||!U.input&&U.avail_in!==0||oe.status===666&&pe!==i)return G(U,U.avail_out===0?-5:e);if(oe.strm=U,le=oe.last_flush,oe.last_flush=pe,oe.status===v)if(oe.wrap===2)U.adler=0,re(oe,31),re(oe,139),re(oe,8),oe.gzhead?(re(oe,(oe.gzhead.text?1:0)+(oe.gzhead.hcrc?2:0)+(oe.gzhead.extra?4:0)+(oe.gzhead.name?8:0)+(oe.gzhead.comment?16:0)),re(oe,255&oe.gzhead.time),re(oe,oe.gzhead.time>>8&255),re(oe,oe.gzhead.time>>16&255),re(oe,oe.gzhead.time>>24&255),re(oe,oe.level===9?2:2<=oe.strategy||oe.level<2?4:0),re(oe,255&oe.gzhead.os),oe.gzhead.extra&&oe.gzhead.extra.length&&(re(oe,255&oe.gzhead.extra.length),re(oe,oe.gzhead.extra.length>>8&255)),oe.gzhead.hcrc&&(U.adler=h(U.adler,oe.pending_buf,oe.pending,0)),oe.gzindex=0,oe.status=69):(re(oe,0),re(oe,0),re(oe,0),re(oe,0),re(oe,0),re(oe,oe.level===9?2:2<=oe.strategy||oe.level<2?4:0),re(oe,3),oe.status=b);else{var ye=p+(oe.w_bits-8<<4)<<8;ye|=(2<=oe.strategy||oe.level<2?0:oe.level<6?1:oe.level===6?2:3)<<6,oe.strstart!==0&&(ye|=32),ye+=31-ye%31,oe.status=b,Q(oe,ye),oe.strstart!==0&&(Q(oe,U.adler>>>16),Q(oe,65535&U.adler)),U.adler=1}if(oe.status===69)if(oe.gzhead.extra){for(te=oe.pending;oe.gzindex<(65535&oe.gzhead.extra.length)&&(oe.pending!==oe.pending_buf_size||(oe.gzhead.hcrc&&oe.pending>te&&(U.adler=h(U.adler,oe.pending_buf,oe.pending-te,te)),V(U),te=oe.pending,oe.pending!==oe.pending_buf_size));)re(oe,255&oe.gzhead.extra[oe.gzindex]),oe.gzindex++;oe.gzhead.hcrc&&oe.pending>te&&(U.adler=h(U.adler,oe.pending_buf,oe.pending-te,te)),oe.gzindex===oe.gzhead.extra.length&&(oe.gzindex=0,oe.status=73)}else oe.status=73;if(oe.status===73)if(oe.gzhead.name){te=oe.pending;do{if(oe.pending===oe.pending_buf_size&&(oe.gzhead.hcrc&&oe.pending>te&&(U.adler=h(U.adler,oe.pending_buf,oe.pending-te,te)),V(U),te=oe.pending,oe.pending===oe.pending_buf_size)){ce=1;break}ce=oe.gzindex<oe.gzhead.name.length?255&oe.gzhead.name.charCodeAt(oe.gzindex++):0,re(oe,ce)}while(ce!==0);oe.gzhead.hcrc&&oe.pending>te&&(U.adler=h(U.adler,oe.pending_buf,oe.pending-te,te)),ce===0&&(oe.gzindex=0,oe.status=91)}else oe.status=91;if(oe.status===91)if(oe.gzhead.comment){te=oe.pending;do{if(oe.pending===oe.pending_buf_size&&(oe.gzhead.hcrc&&oe.pending>te&&(U.adler=h(U.adler,oe.pending_buf,oe.pending-te,te)),V(U),te=oe.pending,oe.pending===oe.pending_buf_size)){ce=1;break}ce=oe.gzindex<oe.gzhead.comment.length?255&oe.gzhead.comment.charCodeAt(oe.gzindex++):0,re(oe,ce)}while(ce!==0);oe.gzhead.hcrc&&oe.pending>te&&(U.adler=h(U.adler,oe.pending_buf,oe.pending-te,te)),ce===0&&(oe.status=103)}else oe.status=103;if(oe.status===103&&(oe.gzhead.hcrc?(oe.pending+2>oe.pending_buf_size&&V(U),oe.pending+2<=oe.pending_buf_size&&(re(oe,255&U.adler),re(oe,U.adler>>8&255),U.adler=0,oe.status=b)):oe.status=b),oe.pending!==0){if(V(U),U.avail_out===0)return oe.last_flush=-1,t}else if(U.avail_in===0&&W(pe)<=W(le)&&pe!==i)return G(U,-5);if(oe.status===666&&U.avail_in!==0)return G(U,-5);if(U.avail_in!==0||oe.lookahead!==0||pe!==n&&oe.status!==666){var _e=oe.strategy===2?function(fe,be){for(var $e;;){if(fe.lookahead===0&&(ue(fe),fe.lookahead===0)){if(be===n)return l;break}if(fe.match_length=0,$e=A._tr_tally(fe,0,fe.window[fe.strstart]),fe.lookahead--,fe.strstart++,$e&&(Y(fe,!1),fe.strm.avail_out===0))return l}return fe.insert=0,be===i?(Y(fe,!0),fe.strm.avail_out===0?O:N):fe.last_lit&&(Y(fe,!1),fe.strm.avail_out===0)?l:C}(oe,pe):oe.strategy===3?function(fe,be){for(var $e,Re,he,we,Te=fe.window;;){if(fe.lookahead<=$){if(ue(fe),fe.lookahead<=$&&be===n)return l;if(fe.lookahead===0)break}if(fe.match_length=0,fe.lookahead>=R&&0<fe.strstart&&(Re=Te[he=fe.strstart-1])===Te[++he]&&Re===Te[++he]&&Re===Te[++he]){we=fe.strstart+$;do;while(Re===Te[++he]&&Re===Te[++he]&&Re===Te[++he]&&Re===Te[++he]&&Re===Te[++he]&&Re===Te[++he]&&Re===Te[++he]&&Re===Te[++he]&&he<we);fe.match_length=$-(we-he),fe.match_length>fe.lookahead&&(fe.match_length=fe.lookahead)}if(fe.match_length>=R?($e=A._tr_tally(fe,1,fe.match_length-R),fe.lookahead-=fe.match_length,fe.strstart+=fe.match_length,fe.match_length=0):($e=A._tr_tally(fe,0,fe.window[fe.strstart]),fe.lookahead--,fe.strstart++),$e&&(Y(fe,!1),fe.strm.avail_out===0))return l}return fe.insert=0,be===i?(Y(fe,!0),fe.strm.avail_out===0?O:N):fe.last_lit&&(Y(fe,!1),fe.strm.avail_out===0)?l:C}(oe,pe):D[oe.level].func(oe,pe);if(_e!==O&&_e!==N||(oe.status=666),_e===l||_e===O)return U.avail_out===0&&(oe.last_flush=-1),t;if(_e===C&&(pe===1?A._tr_align(oe):pe!==5&&(A._tr_stored_block(oe,0,0,!1),pe===3&&(K(oe.head),oe.lookahead===0&&(oe.strstart=0,oe.block_start=0,oe.insert=0))),V(U),U.avail_out===0))return oe.last_flush=-1,t}return pe!==i?t:oe.wrap<=0?1:(oe.wrap===2?(re(oe,255&U.adler),re(oe,U.adler>>8&255),re(oe,U.adler>>16&255),re(oe,U.adler>>24&255),re(oe,255&U.total_in),re(oe,U.total_in>>8&255),re(oe,U.total_in>>16&255),re(oe,U.total_in>>24&255)):(Q(oe,U.adler>>>16),Q(oe,65535&U.adler)),V(U),0<oe.wrap&&(oe.wrap=-oe.wrap),oe.pending!==0?t:1)},z.deflateEnd=function(U){var pe;return U&&U.state?(pe=U.state.status)!==v&&pe!==69&&pe!==73&&pe!==91&&pe!==103&&pe!==b&&pe!==666?G(U,e):(U.state=null,pe===b?G(U,-3):t):e},z.deflateSetDictionary=function(U,pe){var le,oe,te,ce,ye,_e,fe,be,$e=pe.length;if(!U||!U.state||(ce=(le=U.state).wrap)===2||ce===1&&le.status!==v||le.lookahead)return e;for(ce===1&&(U.adler=s(U.adler,pe,$e,0)),le.wrap=0,$e>=le.w_size&&(ce===0&&(K(le.head),le.strstart=0,le.block_start=0,le.insert=0),be=new S.Buf8(le.w_size),S.arraySet(be,pe,$e-le.w_size,le.w_size,0),pe=be,$e=le.w_size),ye=U.avail_in,_e=U.next_in,fe=U.input,U.avail_in=$e,U.next_in=0,U.input=pe,ue(le);le.lookahead>=R;){for(oe=le.strstart,te=le.lookahead-(R-1);le.ins_h=(le.ins_h<<le.hash_shift^le.window[oe+R-1])&le.hash_mask,le.prev[oe&le.w_mask]=le.head[le.ins_h],le.head[le.ins_h]=oe,oe++,--te;);le.strstart=oe,le.lookahead=R-1,ue(le)}return le.strstart+=le.lookahead,le.block_start=le.strstart,le.insert=le.lookahead,le.lookahead=0,le.match_length=le.prev_length=R-1,le.match_available=0,U.next_in=_e,U.input=fe,U.avail_in=ye,le.wrap=ce,t},z.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(g,I,z){I.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(g,I,z){I.exports=function(D,S){var A,s,h,o,n,i,t,e,r,a,u,p,M,w,m,d,_,T,R,$,k,v,b,l,C;A=D.state,s=D.next_in,l=D.input,h=s+(D.avail_in-5),o=D.next_out,C=D.output,n=o-(S-D.avail_out),i=o+(D.avail_out-257),t=A.dmax,e=A.wsize,r=A.whave,a=A.wnext,u=A.window,p=A.hold,M=A.bits,w=A.lencode,m=A.distcode,d=(1<<A.lenbits)-1,_=(1<<A.distbits)-1;e:do{M<15&&(p+=l[s++]<<M,M+=8,p+=l[s++]<<M,M+=8),T=w[p&d];t:for(;;){if(p>>>=R=T>>>24,M-=R,(R=T>>>16&255)===0)C[o++]=65535&T;else{if(!(16&R)){if((64&R)==0){T=w[(65535&T)+(p&(1<<R)-1)];continue t}if(32&R){A.mode=12;break e}D.msg="invalid literal/length code",A.mode=30;break e}$=65535&T,(R&=15)&&(M<R&&(p+=l[s++]<<M,M+=8),$+=p&(1<<R)-1,p>>>=R,M-=R),M<15&&(p+=l[s++]<<M,M+=8,p+=l[s++]<<M,M+=8),T=m[p&_];n:for(;;){if(p>>>=R=T>>>24,M-=R,!(16&(R=T>>>16&255))){if((64&R)==0){T=m[(65535&T)+(p&(1<<R)-1)];continue n}D.msg="invalid distance code",A.mode=30;break e}if(k=65535&T,M<(R&=15)&&(p+=l[s++]<<M,(M+=8)<R&&(p+=l[s++]<<M,M+=8)),t<(k+=p&(1<<R)-1)){D.msg="invalid distance too far back",A.mode=30;break e}if(p>>>=R,M-=R,(R=o-n)<k){if(r<(R=k-R)&&A.sane){D.msg="invalid distance too far back",A.mode=30;break e}if(b=u,(v=0)===a){if(v+=e-R,R<$){for($-=R;C[o++]=u[v++],--R;);v=o-k,b=C}}else if(a<R){if(v+=e+a-R,(R-=a)<$){for($-=R;C[o++]=u[v++],--R;);if(v=0,a<$){for($-=R=a;C[o++]=u[v++],--R;);v=o-k,b=C}}}else if(v+=a-R,R<$){for($-=R;C[o++]=u[v++],--R;);v=o-k,b=C}for(;2<$;)C[o++]=b[v++],C[o++]=b[v++],C[o++]=b[v++],$-=3;$&&(C[o++]=b[v++],1<$&&(C[o++]=b[v++]))}else{for(v=o-k;C[o++]=C[v++],C[o++]=C[v++],C[o++]=C[v++],2<($-=3););$&&(C[o++]=C[v++],1<$&&(C[o++]=C[v++]))}break}}break}}while(s<h&&o<i);s-=$=M>>3,p&=(1<<(M-=$<<3))-1,D.next_in=s,D.next_out=o,D.avail_in=s<h?h-s+5:5-(s-h),D.avail_out=o<i?i-o+257:257-(o-i),A.hold=p,A.bits=M}},{}],49:[function(g,I,z){var D=g("../utils/common"),S=g("./adler32"),A=g("./crc32"),s=g("./inffast"),h=g("./inftrees"),o=1,n=2,i=0,t=-2,e=1,r=852,a=592;function u(v){return(v>>>24&255)+(v>>>8&65280)+((65280&v)<<8)+((255&v)<<24)}function p(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new D.Buf16(320),this.work=new D.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function M(v){var b;return v&&v.state?(b=v.state,v.total_in=v.total_out=b.total=0,v.msg="",b.wrap&&(v.adler=1&b.wrap),b.mode=e,b.last=0,b.havedict=0,b.dmax=32768,b.head=null,b.hold=0,b.bits=0,b.lencode=b.lendyn=new D.Buf32(r),b.distcode=b.distdyn=new D.Buf32(a),b.sane=1,b.back=-1,i):t}function w(v){var b;return v&&v.state?((b=v.state).wsize=0,b.whave=0,b.wnext=0,M(v)):t}function m(v,b){var l,C;return v&&v.state?(C=v.state,b<0?(l=0,b=-b):(l=1+(b>>4),b<48&&(b&=15)),b&&(b<8||15<b)?t:(C.window!==null&&C.wbits!==b&&(C.window=null),C.wrap=l,C.wbits=b,w(v))):t}function d(v,b){var l,C;return v?(C=new p,(v.state=C).window=null,(l=m(v,b))!==i&&(v.state=null),l):t}var _,T,R=!0;function $(v){if(R){var b;for(_=new D.Buf32(512),T=new D.Buf32(32),b=0;b<144;)v.lens[b++]=8;for(;b<256;)v.lens[b++]=9;for(;b<280;)v.lens[b++]=7;for(;b<288;)v.lens[b++]=8;for(h(o,v.lens,0,288,_,0,v.work,{bits:9}),b=0;b<32;)v.lens[b++]=5;h(n,v.lens,0,32,T,0,v.work,{bits:5}),R=!1}v.lencode=_,v.lenbits=9,v.distcode=T,v.distbits=5}function k(v,b,l,C){var O,N=v.state;return N.window===null&&(N.wsize=1<<N.wbits,N.wnext=0,N.whave=0,N.window=new D.Buf8(N.wsize)),C>=N.wsize?(D.arraySet(N.window,b,l-N.wsize,N.wsize,0),N.wnext=0,N.whave=N.wsize):(C<(O=N.wsize-N.wnext)&&(O=C),D.arraySet(N.window,b,l-C,O,N.wnext),(C-=O)?(D.arraySet(N.window,b,l-C,C,0),N.wnext=C,N.whave=N.wsize):(N.wnext+=O,N.wnext===N.wsize&&(N.wnext=0),N.whave<N.wsize&&(N.whave+=O))),0}z.inflateReset=w,z.inflateReset2=m,z.inflateResetKeep=M,z.inflateInit=function(v){return d(v,15)},z.inflateInit2=d,z.inflate=function(v,b){var l,C,O,N,G,W,K,V,Y,re,Q,ie,ue,ge,me,ve,Ce,Me,Ie,ze,U,pe,le,oe,te=0,ce=new D.Buf8(4),ye=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!v||!v.state||!v.output||!v.input&&v.avail_in!==0)return t;(l=v.state).mode===12&&(l.mode=13),G=v.next_out,O=v.output,K=v.avail_out,N=v.next_in,C=v.input,W=v.avail_in,V=l.hold,Y=l.bits,re=W,Q=K,pe=i;e:for(;;)switch(l.mode){case e:if(l.wrap===0){l.mode=13;break}for(;Y<16;){if(W===0)break e;W--,V+=C[N++]<<Y,Y+=8}if(2&l.wrap&&V===35615){ce[l.check=0]=255&V,ce[1]=V>>>8&255,l.check=A(l.check,ce,2,0),Y=V=0,l.mode=2;break}if(l.flags=0,l.head&&(l.head.done=!1),!(1&l.wrap)||(((255&V)<<8)+(V>>8))%31){v.msg="incorrect header check",l.mode=30;break}if((15&V)!=8){v.msg="unknown compression method",l.mode=30;break}if(Y-=4,U=8+(15&(V>>>=4)),l.wbits===0)l.wbits=U;else if(U>l.wbits){v.msg="invalid window size",l.mode=30;break}l.dmax=1<<U,v.adler=l.check=1,l.mode=512&V?10:12,Y=V=0;break;case 2:for(;Y<16;){if(W===0)break e;W--,V+=C[N++]<<Y,Y+=8}if(l.flags=V,(255&l.flags)!=8){v.msg="unknown compression method",l.mode=30;break}if(57344&l.flags){v.msg="unknown header flags set",l.mode=30;break}l.head&&(l.head.text=V>>8&1),512&l.flags&&(ce[0]=255&V,ce[1]=V>>>8&255,l.check=A(l.check,ce,2,0)),Y=V=0,l.mode=3;case 3:for(;Y<32;){if(W===0)break e;W--,V+=C[N++]<<Y,Y+=8}l.head&&(l.head.time=V),512&l.flags&&(ce[0]=255&V,ce[1]=V>>>8&255,ce[2]=V>>>16&255,ce[3]=V>>>24&255,l.check=A(l.check,ce,4,0)),Y=V=0,l.mode=4;case 4:for(;Y<16;){if(W===0)break e;W--,V+=C[N++]<<Y,Y+=8}l.head&&(l.head.xflags=255&V,l.head.os=V>>8),512&l.flags&&(ce[0]=255&V,ce[1]=V>>>8&255,l.check=A(l.check,ce,2,0)),Y=V=0,l.mode=5;case 5:if(1024&l.flags){for(;Y<16;){if(W===0)break e;W--,V+=C[N++]<<Y,Y+=8}l.length=V,l.head&&(l.head.extra_len=V),512&l.flags&&(ce[0]=255&V,ce[1]=V>>>8&255,l.check=A(l.check,ce,2,0)),Y=V=0}else l.head&&(l.head.extra=null);l.mode=6;case 6:if(1024&l.flags&&(W<(ie=l.length)&&(ie=W),ie&&(l.head&&(U=l.head.extra_len-l.length,l.head.extra||(l.head.extra=new Array(l.head.extra_len)),D.arraySet(l.head.extra,C,N,ie,U)),512&l.flags&&(l.check=A(l.check,C,ie,N)),W-=ie,N+=ie,l.length-=ie),l.length))break e;l.length=0,l.mode=7;case 7:if(2048&l.flags){if(W===0)break e;for(ie=0;U=C[N+ie++],l.head&&U&&l.length<65536&&(l.head.name+=String.fromCharCode(U)),U&&ie<W;);if(512&l.flags&&(l.check=A(l.check,C,ie,N)),W-=ie,N+=ie,U)break e}else l.head&&(l.head.name=null);l.length=0,l.mode=8;case 8:if(4096&l.flags){if(W===0)break e;for(ie=0;U=C[N+ie++],l.head&&U&&l.length<65536&&(l.head.comment+=String.fromCharCode(U)),U&&ie<W;);if(512&l.flags&&(l.check=A(l.check,C,ie,N)),W-=ie,N+=ie,U)break e}else l.head&&(l.head.comment=null);l.mode=9;case 9:if(512&l.flags){for(;Y<16;){if(W===0)break e;W--,V+=C[N++]<<Y,Y+=8}if(V!==(65535&l.check)){v.msg="header crc mismatch",l.mode=30;break}Y=V=0}l.head&&(l.head.hcrc=l.flags>>9&1,l.head.done=!0),v.adler=l.check=0,l.mode=12;break;case 10:for(;Y<32;){if(W===0)break e;W--,V+=C[N++]<<Y,Y+=8}v.adler=l.check=u(V),Y=V=0,l.mode=11;case 11:if(l.havedict===0)return v.next_out=G,v.avail_out=K,v.next_in=N,v.avail_in=W,l.hold=V,l.bits=Y,2;v.adler=l.check=1,l.mode=12;case 12:if(b===5||b===6)break e;case 13:if(l.last){V>>>=7&Y,Y-=7&Y,l.mode=27;break}for(;Y<3;){if(W===0)break e;W--,V+=C[N++]<<Y,Y+=8}switch(l.last=1&V,Y-=1,3&(V>>>=1)){case 0:l.mode=14;break;case 1:if($(l),l.mode=20,b!==6)break;V>>>=2,Y-=2;break e;case 2:l.mode=17;break;case 3:v.msg="invalid block type",l.mode=30}V>>>=2,Y-=2;break;case 14:for(V>>>=7&Y,Y-=7&Y;Y<32;){if(W===0)break e;W--,V+=C[N++]<<Y,Y+=8}if((65535&V)!=(V>>>16^65535)){v.msg="invalid stored block lengths",l.mode=30;break}if(l.length=65535&V,Y=V=0,l.mode=15,b===6)break e;case 15:l.mode=16;case 16:if(ie=l.length){if(W<ie&&(ie=W),K<ie&&(ie=K),ie===0)break e;D.arraySet(O,C,N,ie,G),W-=ie,N+=ie,K-=ie,G+=ie,l.length-=ie;break}l.mode=12;break;case 17:for(;Y<14;){if(W===0)break e;W--,V+=C[N++]<<Y,Y+=8}if(l.nlen=257+(31&V),V>>>=5,Y-=5,l.ndist=1+(31&V),V>>>=5,Y-=5,l.ncode=4+(15&V),V>>>=4,Y-=4,286<l.nlen||30<l.ndist){v.msg="too many length or distance symbols",l.mode=30;break}l.have=0,l.mode=18;case 18:for(;l.have<l.ncode;){for(;Y<3;){if(W===0)break e;W--,V+=C[N++]<<Y,Y+=8}l.lens[ye[l.have++]]=7&V,V>>>=3,Y-=3}for(;l.have<19;)l.lens[ye[l.have++]]=0;if(l.lencode=l.lendyn,l.lenbits=7,le={bits:l.lenbits},pe=h(0,l.lens,0,19,l.lencode,0,l.work,le),l.lenbits=le.bits,pe){v.msg="invalid code lengths set",l.mode=30;break}l.have=0,l.mode=19;case 19:for(;l.have<l.nlen+l.ndist;){for(;ve=(te=l.lencode[V&(1<<l.lenbits)-1])>>>16&255,Ce=65535&te,!((me=te>>>24)<=Y);){if(W===0)break e;W--,V+=C[N++]<<Y,Y+=8}if(Ce<16)V>>>=me,Y-=me,l.lens[l.have++]=Ce;else{if(Ce===16){for(oe=me+2;Y<oe;){if(W===0)break e;W--,V+=C[N++]<<Y,Y+=8}if(V>>>=me,Y-=me,l.have===0){v.msg="invalid bit length repeat",l.mode=30;break}U=l.lens[l.have-1],ie=3+(3&V),V>>>=2,Y-=2}else if(Ce===17){for(oe=me+3;Y<oe;){if(W===0)break e;W--,V+=C[N++]<<Y,Y+=8}Y-=me,U=0,ie=3+(7&(V>>>=me)),V>>>=3,Y-=3}else{for(oe=me+7;Y<oe;){if(W===0)break e;W--,V+=C[N++]<<Y,Y+=8}Y-=me,U=0,ie=11+(127&(V>>>=me)),V>>>=7,Y-=7}if(l.have+ie>l.nlen+l.ndist){v.msg="invalid bit length repeat",l.mode=30;break}for(;ie--;)l.lens[l.have++]=U}}if(l.mode===30)break;if(l.lens[256]===0){v.msg="invalid code -- missing end-of-block",l.mode=30;break}if(l.lenbits=9,le={bits:l.lenbits},pe=h(o,l.lens,0,l.nlen,l.lencode,0,l.work,le),l.lenbits=le.bits,pe){v.msg="invalid literal/lengths set",l.mode=30;break}if(l.distbits=6,l.distcode=l.distdyn,le={bits:l.distbits},pe=h(n,l.lens,l.nlen,l.ndist,l.distcode,0,l.work,le),l.distbits=le.bits,pe){v.msg="invalid distances set",l.mode=30;break}if(l.mode=20,b===6)break e;case 20:l.mode=21;case 21:if(6<=W&&258<=K){v.next_out=G,v.avail_out=K,v.next_in=N,v.avail_in=W,l.hold=V,l.bits=Y,s(v,Q),G=v.next_out,O=v.output,K=v.avail_out,N=v.next_in,C=v.input,W=v.avail_in,V=l.hold,Y=l.bits,l.mode===12&&(l.back=-1);break}for(l.back=0;ve=(te=l.lencode[V&(1<<l.lenbits)-1])>>>16&255,Ce=65535&te,!((me=te>>>24)<=Y);){if(W===0)break e;W--,V+=C[N++]<<Y,Y+=8}if(ve&&(240&ve)==0){for(Me=me,Ie=ve,ze=Ce;ve=(te=l.lencode[ze+((V&(1<<Me+Ie)-1)>>Me)])>>>16&255,Ce=65535&te,!(Me+(me=te>>>24)<=Y);){if(W===0)break e;W--,V+=C[N++]<<Y,Y+=8}V>>>=Me,Y-=Me,l.back+=Me}if(V>>>=me,Y-=me,l.back+=me,l.length=Ce,ve===0){l.mode=26;break}if(32&ve){l.back=-1,l.mode=12;break}if(64&ve){v.msg="invalid literal/length code",l.mode=30;break}l.extra=15&ve,l.mode=22;case 22:if(l.extra){for(oe=l.extra;Y<oe;){if(W===0)break e;W--,V+=C[N++]<<Y,Y+=8}l.length+=V&(1<<l.extra)-1,V>>>=l.extra,Y-=l.extra,l.back+=l.extra}l.was=l.length,l.mode=23;case 23:for(;ve=(te=l.distcode[V&(1<<l.distbits)-1])>>>16&255,Ce=65535&te,!((me=te>>>24)<=Y);){if(W===0)break e;W--,V+=C[N++]<<Y,Y+=8}if((240&ve)==0){for(Me=me,Ie=ve,ze=Ce;ve=(te=l.distcode[ze+((V&(1<<Me+Ie)-1)>>Me)])>>>16&255,Ce=65535&te,!(Me+(me=te>>>24)<=Y);){if(W===0)break e;W--,V+=C[N++]<<Y,Y+=8}V>>>=Me,Y-=Me,l.back+=Me}if(V>>>=me,Y-=me,l.back+=me,64&ve){v.msg="invalid distance code",l.mode=30;break}l.offset=Ce,l.extra=15&ve,l.mode=24;case 24:if(l.extra){for(oe=l.extra;Y<oe;){if(W===0)break e;W--,V+=C[N++]<<Y,Y+=8}l.offset+=V&(1<<l.extra)-1,V>>>=l.extra,Y-=l.extra,l.back+=l.extra}if(l.offset>l.dmax){v.msg="invalid distance too far back",l.mode=30;break}l.mode=25;case 25:if(K===0)break e;if(ie=Q-K,l.offset>ie){if((ie=l.offset-ie)>l.whave&&l.sane){v.msg="invalid distance too far back",l.mode=30;break}ue=ie>l.wnext?(ie-=l.wnext,l.wsize-ie):l.wnext-ie,ie>l.length&&(ie=l.length),ge=l.window}else ge=O,ue=G-l.offset,ie=l.length;for(K<ie&&(ie=K),K-=ie,l.length-=ie;O[G++]=ge[ue++],--ie;);l.length===0&&(l.mode=21);break;case 26:if(K===0)break e;O[G++]=l.length,K--,l.mode=21;break;case 27:if(l.wrap){for(;Y<32;){if(W===0)break e;W--,V|=C[N++]<<Y,Y+=8}if(Q-=K,v.total_out+=Q,l.total+=Q,Q&&(v.adler=l.check=l.flags?A(l.check,O,Q,G-Q):S(l.check,O,Q,G-Q)),Q=K,(l.flags?V:u(V))!==l.check){v.msg="incorrect data check",l.mode=30;break}Y=V=0}l.mode=28;case 28:if(l.wrap&&l.flags){for(;Y<32;){if(W===0)break e;W--,V+=C[N++]<<Y,Y+=8}if(V!==(4294967295&l.total)){v.msg="incorrect length check",l.mode=30;break}Y=V=0}l.mode=29;case 29:pe=1;break e;case 30:pe=-3;break e;case 31:return-4;case 32:default:return t}return v.next_out=G,v.avail_out=K,v.next_in=N,v.avail_in=W,l.hold=V,l.bits=Y,(l.wsize||Q!==v.avail_out&&l.mode<30&&(l.mode<27||b!==4))&&k(v,v.output,v.next_out,Q-v.avail_out)?(l.mode=31,-4):(re-=v.avail_in,Q-=v.avail_out,v.total_in+=re,v.total_out+=Q,l.total+=Q,l.wrap&&Q&&(v.adler=l.check=l.flags?A(l.check,O,Q,v.next_out-Q):S(l.check,O,Q,v.next_out-Q)),v.data_type=l.bits+(l.last?64:0)+(l.mode===12?128:0)+(l.mode===20||l.mode===15?256:0),(re==0&&Q===0||b===4)&&pe===i&&(pe=-5),pe)},z.inflateEnd=function(v){if(!v||!v.state)return t;var b=v.state;return b.window&&(b.window=null),v.state=null,i},z.inflateGetHeader=function(v,b){var l;return v&&v.state?(2&(l=v.state).wrap)==0?t:((l.head=b).done=!1,i):t},z.inflateSetDictionary=function(v,b){var l,C=b.length;return v&&v.state?(l=v.state).wrap!==0&&l.mode!==11?t:l.mode===11&&S(1,b,C,0)!==l.check?-3:k(v,b,C,C)?(l.mode=31,-4):(l.havedict=1,i):t},z.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(g,I,z){var D=g("../utils/common"),S=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],A=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];I.exports=function(o,n,i,t,e,r,a,u){var p,M,w,m,d,_,T,R,$,k=u.bits,v=0,b=0,l=0,C=0,O=0,N=0,G=0,W=0,K=0,V=0,Y=null,re=0,Q=new D.Buf16(16),ie=new D.Buf16(16),ue=null,ge=0;for(v=0;v<=15;v++)Q[v]=0;for(b=0;b<t;b++)Q[n[i+b]]++;for(O=k,C=15;1<=C&&Q[C]===0;C--);if(C<O&&(O=C),C===0)return e[r++]=20971520,e[r++]=20971520,u.bits=1,0;for(l=1;l<C&&Q[l]===0;l++);for(O<l&&(O=l),v=W=1;v<=15;v++)if(W<<=1,(W-=Q[v])<0)return-1;if(0<W&&(o===0||C!==1))return-1;for(ie[1]=0,v=1;v<15;v++)ie[v+1]=ie[v]+Q[v];for(b=0;b<t;b++)n[i+b]!==0&&(a[ie[n[i+b]]++]=b);if(_=o===0?(Y=ue=a,19):o===1?(Y=S,re-=257,ue=A,ge-=257,256):(Y=s,ue=h,-1),v=l,d=r,G=b=V=0,w=-1,m=(K=1<<(N=O))-1,o===1&&852<K||o===2&&592<K)return 1;for(;;){for(T=v-G,$=a[b]<_?(R=0,a[b]):a[b]>_?(R=ue[ge+a[b]],Y[re+a[b]]):(R=96,0),p=1<<v-G,l=M=1<<N;e[d+(V>>G)+(M-=p)]=T<<24|R<<16|$|0,M!==0;);for(p=1<<v-1;V&p;)p>>=1;if(p!==0?(V&=p-1,V+=p):V=0,b++,--Q[v]==0){if(v===C)break;v=n[i+a[b]]}if(O<v&&(V&m)!==w){for(G===0&&(G=O),d+=l,W=1<<(N=v-G);N+G<C&&!((W-=Q[N+G])<=0);)N++,W<<=1;if(K+=1<<N,o===1&&852<K||o===2&&592<K)return 1;e[w=V&m]=O<<24|N<<16|d-r|0}}return V!==0&&(e[d+V]=v-G<<24|64<<16|0),u.bits=O,0}},{"../utils/common":41}],51:[function(g,I,z){I.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(g,I,z){var D=g("../utils/common"),S=0,A=1;function s(te){for(var ce=te.length;0<=--ce;)te[ce]=0}var h=0,o=29,n=256,i=n+1+o,t=30,e=19,r=2*i+1,a=15,u=16,p=7,M=256,w=16,m=17,d=18,_=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],T=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],R=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],$=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],k=new Array(2*(i+2));s(k);var v=new Array(2*t);s(v);var b=new Array(512);s(b);var l=new Array(256);s(l);var C=new Array(o);s(C);var O,N,G,W=new Array(t);function K(te,ce,ye,_e,fe){this.static_tree=te,this.extra_bits=ce,this.extra_base=ye,this.elems=_e,this.max_length=fe,this.has_stree=te&&te.length}function V(te,ce){this.dyn_tree=te,this.max_code=0,this.stat_desc=ce}function Y(te){return te<256?b[te]:b[256+(te>>>7)]}function re(te,ce){te.pending_buf[te.pending++]=255&ce,te.pending_buf[te.pending++]=ce>>>8&255}function Q(te,ce,ye){te.bi_valid>u-ye?(te.bi_buf|=ce<<te.bi_valid&65535,re(te,te.bi_buf),te.bi_buf=ce>>u-te.bi_valid,te.bi_valid+=ye-u):(te.bi_buf|=ce<<te.bi_valid&65535,te.bi_valid+=ye)}function ie(te,ce,ye){Q(te,ye[2*ce],ye[2*ce+1])}function ue(te,ce){for(var ye=0;ye|=1&te,te>>>=1,ye<<=1,0<--ce;);return ye>>>1}function ge(te,ce,ye){var _e,fe,be=new Array(a+1),$e=0;for(_e=1;_e<=a;_e++)be[_e]=$e=$e+ye[_e-1]<<1;for(fe=0;fe<=ce;fe++){var Re=te[2*fe+1];Re!==0&&(te[2*fe]=ue(be[Re]++,Re))}}function me(te){var ce;for(ce=0;ce<i;ce++)te.dyn_ltree[2*ce]=0;for(ce=0;ce<t;ce++)te.dyn_dtree[2*ce]=0;for(ce=0;ce<e;ce++)te.bl_tree[2*ce]=0;te.dyn_ltree[2*M]=1,te.opt_len=te.static_len=0,te.last_lit=te.matches=0}function ve(te){8<te.bi_valid?re(te,te.bi_buf):0<te.bi_valid&&(te.pending_buf[te.pending++]=te.bi_buf),te.bi_buf=0,te.bi_valid=0}function Ce(te,ce,ye,_e){var fe=2*ce,be=2*ye;return te[fe]<te[be]||te[fe]===te[be]&&_e[ce]<=_e[ye]}function Me(te,ce,ye){for(var _e=te.heap[ye],fe=ye<<1;fe<=te.heap_len&&(fe<te.heap_len&&Ce(ce,te.heap[fe+1],te.heap[fe],te.depth)&&fe++,!Ce(ce,_e,te.heap[fe],te.depth));)te.heap[ye]=te.heap[fe],ye=fe,fe<<=1;te.heap[ye]=_e}function Ie(te,ce,ye){var _e,fe,be,$e,Re=0;if(te.last_lit!==0)for(;_e=te.pending_buf[te.d_buf+2*Re]<<8|te.pending_buf[te.d_buf+2*Re+1],fe=te.pending_buf[te.l_buf+Re],Re++,_e===0?ie(te,fe,ce):(ie(te,(be=l[fe])+n+1,ce),($e=_[be])!==0&&Q(te,fe-=C[be],$e),ie(te,be=Y(--_e),ye),($e=T[be])!==0&&Q(te,_e-=W[be],$e)),Re<te.last_lit;);ie(te,M,ce)}function ze(te,ce){var ye,_e,fe,be=ce.dyn_tree,$e=ce.stat_desc.static_tree,Re=ce.stat_desc.has_stree,he=ce.stat_desc.elems,we=-1;for(te.heap_len=0,te.heap_max=r,ye=0;ye<he;ye++)be[2*ye]!==0?(te.heap[++te.heap_len]=we=ye,te.depth[ye]=0):be[2*ye+1]=0;for(;te.heap_len<2;)be[2*(fe=te.heap[++te.heap_len]=we<2?++we:0)]=1,te.depth[fe]=0,te.opt_len--,Re&&(te.static_len-=$e[2*fe+1]);for(ce.max_code=we,ye=te.heap_len>>1;1<=ye;ye--)Me(te,be,ye);for(fe=he;ye=te.heap[1],te.heap[1]=te.heap[te.heap_len--],Me(te,be,1),_e=te.heap[1],te.heap[--te.heap_max]=ye,te.heap[--te.heap_max]=_e,be[2*fe]=be[2*ye]+be[2*_e],te.depth[fe]=(te.depth[ye]>=te.depth[_e]?te.depth[ye]:te.depth[_e])+1,be[2*ye+1]=be[2*_e+1]=fe,te.heap[1]=fe++,Me(te,be,1),2<=te.heap_len;);te.heap[--te.heap_max]=te.heap[1],function(Te,se){var We,Ge,Ae,Ee,ke,Oe,Fe=se.dyn_tree,f=se.max_code,Ye=se.stat_desc.static_tree,Be=se.stat_desc.has_stree,tt=se.stat_desc.extra_bits,dt=se.stat_desc.extra_base,ht=se.stat_desc.max_length,vt=0;for(Ee=0;Ee<=a;Ee++)Te.bl_count[Ee]=0;for(Fe[2*Te.heap[Te.heap_max]+1]=0,We=Te.heap_max+1;We<r;We++)ht<(Ee=Fe[2*Fe[2*(Ge=Te.heap[We])+1]+1]+1)&&(Ee=ht,vt++),Fe[2*Ge+1]=Ee,f<Ge||(Te.bl_count[Ee]++,ke=0,dt<=Ge&&(ke=tt[Ge-dt]),Oe=Fe[2*Ge],Te.opt_len+=Oe*(Ee+ke),Be&&(Te.static_len+=Oe*(Ye[2*Ge+1]+ke)));if(vt!==0){do{for(Ee=ht-1;Te.bl_count[Ee]===0;)Ee--;Te.bl_count[Ee]--,Te.bl_count[Ee+1]+=2,Te.bl_count[ht]--,vt-=2}while(0<vt);for(Ee=ht;Ee!==0;Ee--)for(Ge=Te.bl_count[Ee];Ge!==0;)f<(Ae=Te.heap[--We])||(Fe[2*Ae+1]!==Ee&&(Te.opt_len+=(Ee-Fe[2*Ae+1])*Fe[2*Ae],Fe[2*Ae+1]=Ee),Ge--)}}(te,ce),ge(be,we,te.bl_count)}function U(te,ce,ye){var _e,fe,be=-1,$e=ce[1],Re=0,he=7,we=4;for($e===0&&(he=138,we=3),ce[2*(ye+1)+1]=65535,_e=0;_e<=ye;_e++)fe=$e,$e=ce[2*(_e+1)+1],++Re<he&&fe===$e||(Re<we?te.bl_tree[2*fe]+=Re:fe!==0?(fe!==be&&te.bl_tree[2*fe]++,te.bl_tree[2*w]++):Re<=10?te.bl_tree[2*m]++:te.bl_tree[2*d]++,be=fe,we=(Re=0)===$e?(he=138,3):fe===$e?(he=6,3):(he=7,4))}function pe(te,ce,ye){var _e,fe,be=-1,$e=ce[1],Re=0,he=7,we=4;for($e===0&&(he=138,we=3),_e=0;_e<=ye;_e++)if(fe=$e,$e=ce[2*(_e+1)+1],!(++Re<he&&fe===$e)){if(Re<we)for(;ie(te,fe,te.bl_tree),--Re!=0;);else fe!==0?(fe!==be&&(ie(te,fe,te.bl_tree),Re--),ie(te,w,te.bl_tree),Q(te,Re-3,2)):Re<=10?(ie(te,m,te.bl_tree),Q(te,Re-3,3)):(ie(te,d,te.bl_tree),Q(te,Re-11,7));be=fe,we=(Re=0)===$e?(he=138,3):fe===$e?(he=6,3):(he=7,4)}}s(W);var le=!1;function oe(te,ce,ye,_e){Q(te,(h<<1)+(_e?1:0),3),function(fe,be,$e,Re){ve(fe),re(fe,$e),re(fe,~$e),D.arraySet(fe.pending_buf,fe.window,be,$e,fe.pending),fe.pending+=$e}(te,ce,ye)}z._tr_init=function(te){le||(function(){var ce,ye,_e,fe,be,$e=new Array(a+1);for(fe=_e=0;fe<o-1;fe++)for(C[fe]=_e,ce=0;ce<1<<_[fe];ce++)l[_e++]=fe;for(l[_e-1]=fe,fe=be=0;fe<16;fe++)for(W[fe]=be,ce=0;ce<1<<T[fe];ce++)b[be++]=fe;for(be>>=7;fe<t;fe++)for(W[fe]=be<<7,ce=0;ce<1<<T[fe]-7;ce++)b[256+be++]=fe;for(ye=0;ye<=a;ye++)$e[ye]=0;for(ce=0;ce<=143;)k[2*ce+1]=8,ce++,$e[8]++;for(;ce<=255;)k[2*ce+1]=9,ce++,$e[9]++;for(;ce<=279;)k[2*ce+1]=7,ce++,$e[7]++;for(;ce<=287;)k[2*ce+1]=8,ce++,$e[8]++;for(ge(k,i+1,$e),ce=0;ce<t;ce++)v[2*ce+1]=5,v[2*ce]=ue(ce,5);O=new K(k,_,n+1,i,a),N=new K(v,T,0,t,a),G=new K(new Array(0),R,0,e,p)}(),le=!0),te.l_desc=new V(te.dyn_ltree,O),te.d_desc=new V(te.dyn_dtree,N),te.bl_desc=new V(te.bl_tree,G),te.bi_buf=0,te.bi_valid=0,me(te)},z._tr_stored_block=oe,z._tr_flush_block=function(te,ce,ye,_e){var fe,be,$e=0;0<te.level?(te.strm.data_type===2&&(te.strm.data_type=function(Re){var he,we=4093624447;for(he=0;he<=31;he++,we>>>=1)if(1&we&&Re.dyn_ltree[2*he]!==0)return S;if(Re.dyn_ltree[18]!==0||Re.dyn_ltree[20]!==0||Re.dyn_ltree[26]!==0)return A;for(he=32;he<n;he++)if(Re.dyn_ltree[2*he]!==0)return A;return S}(te)),ze(te,te.l_desc),ze(te,te.d_desc),$e=function(Re){var he;for(U(Re,Re.dyn_ltree,Re.l_desc.max_code),U(Re,Re.dyn_dtree,Re.d_desc.max_code),ze(Re,Re.bl_desc),he=e-1;3<=he&&Re.bl_tree[2*$[he]+1]===0;he--);return Re.opt_len+=3*(he+1)+5+5+4,he}(te),fe=te.opt_len+3+7>>>3,(be=te.static_len+3+7>>>3)<=fe&&(fe=be)):fe=be=ye+5,ye+4<=fe&&ce!==-1?oe(te,ce,ye,_e):te.strategy===4||be===fe?(Q(te,2+(_e?1:0),3),Ie(te,k,v)):(Q(te,4+(_e?1:0),3),function(Re,he,we,Te){var se;for(Q(Re,he-257,5),Q(Re,we-1,5),Q(Re,Te-4,4),se=0;se<Te;se++)Q(Re,Re.bl_tree[2*$[se]+1],3);pe(Re,Re.dyn_ltree,he-1),pe(Re,Re.dyn_dtree,we-1)}(te,te.l_desc.max_code+1,te.d_desc.max_code+1,$e+1),Ie(te,te.dyn_ltree,te.dyn_dtree)),me(te),_e&&ve(te)},z._tr_tally=function(te,ce,ye){return te.pending_buf[te.d_buf+2*te.last_lit]=ce>>>8&255,te.pending_buf[te.d_buf+2*te.last_lit+1]=255&ce,te.pending_buf[te.l_buf+te.last_lit]=255&ye,te.last_lit++,ce===0?te.dyn_ltree[2*ye]++:(te.matches++,ce--,te.dyn_ltree[2*(l[ye]+n+1)]++,te.dyn_dtree[2*Y(ce)]++),te.last_lit===te.lit_bufsize-1},z._tr_align=function(te){Q(te,2,3),ie(te,M,k),function(ce){ce.bi_valid===16?(re(ce,ce.bi_buf),ce.bi_buf=0,ce.bi_valid=0):8<=ce.bi_valid&&(ce.pending_buf[ce.pending++]=255&ce.bi_buf,ce.bi_buf>>=8,ce.bi_valid-=8)}(te)}},{"../utils/common":41}],53:[function(g,I,z){I.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(g,I,z){(function(D){(function(S,A){if(!S.setImmediate){var s,h,o,n,i=1,t={},e=!1,r=S.document,a=Object.getPrototypeOf&&Object.getPrototypeOf(S);a=a&&a.setTimeout?a:S,s={}.toString.call(S.process)==="[object process]"?function(w){process.nextTick(function(){p(w)})}:function(){if(S.postMessage&&!S.importScripts){var w=!0,m=S.onmessage;return S.onmessage=function(){w=!1},S.postMessage("","*"),S.onmessage=m,w}}()?(n="setImmediate$"+Math.random()+"$",S.addEventListener?S.addEventListener("message",M,!1):S.attachEvent("onmessage",M),function(w){S.postMessage(n+w,"*")}):S.MessageChannel?((o=new MessageChannel).port1.onmessage=function(w){p(w.data)},function(w){o.port2.postMessage(w)}):r&&"onreadystatechange"in r.createElement("script")?(h=r.documentElement,function(w){var m=r.createElement("script");m.onreadystatechange=function(){p(w),m.onreadystatechange=null,h.removeChild(m),m=null},h.appendChild(m)}):function(w){setTimeout(p,0,w)},a.setImmediate=function(w){typeof w!="function"&&(w=new Function(""+w));for(var m=new Array(arguments.length-1),d=0;d<m.length;d++)m[d]=arguments[d+1];var _={callback:w,args:m};return t[i]=_,s(i),i++},a.clearImmediate=u}function u(w){delete t[w]}function p(w){if(e)setTimeout(p,0,w);else{var m=t[w];if(m){e=!0;try{(function(d){var _=d.callback,T=d.args;switch(T.length){case 0:_();break;case 1:_(T[0]);break;case 2:_(T[0],T[1]);break;case 3:_(T[0],T[1],T[2]);break;default:_.apply(A,T)}})(m)}finally{u(w),e=!1}}}}function M(w){w.source===S&&typeof w.data=="string"&&w.data.indexOf(n)===0&&p(+w.data.slice(n.length))}})(typeof self>"u"?D===void 0?this:D:self)}).call(this,typeof Fn<"u"?Fn:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(Qn)),Qn.exports}var Oi=Bi();const qr=vr(Oi);var er={exports:{}},kr;function xi(){return kr||(kr=1,function(ee){var X=function(){var g=String.fromCharCode,I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",z="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",D={};function S(s,h){if(!D[s]){D[s]={};for(var o=0;o<s.length;o++)D[s][s.charAt(o)]=o}return D[s][h]}var A={compressToBase64:function(s){if(s==null)return"";var h=A._compress(s,6,function(o){return I.charAt(o)});switch(h.length%4){default:case 0:return h;case 1:return h+"===";case 2:return h+"==";case 3:return h+"="}},decompressFromBase64:function(s){return s==null?"":s==""?null:A._decompress(s.length,32,function(h){return S(I,s.charAt(h))})},compressToUTF16:function(s){return s==null?"":A._compress(s,15,function(h){return g(h+32)})+" "},decompressFromUTF16:function(s){return s==null?"":s==""?null:A._decompress(s.length,16384,function(h){return s.charCodeAt(h)-32})},compressToUint8Array:function(s){for(var h=A.compress(s),o=new Uint8Array(h.length*2),n=0,i=h.length;n<i;n++){var t=h.charCodeAt(n);o[n*2]=t>>>8,o[n*2+1]=t%256}return o},decompressFromUint8Array:function(s){if(s==null)return A.decompress(s);for(var h=new Array(s.length/2),o=0,n=h.length;o<n;o++)h[o]=s[o*2]*256+s[o*2+1];var i=[];return h.forEach(function(t){i.push(g(t))}),A.decompress(i.join(""))},compressToEncodedURIComponent:function(s){return s==null?"":A._compress(s,6,function(h){return z.charAt(h)})},decompressFromEncodedURIComponent:function(s){return s==null?"":s==""?null:(s=s.replace(/ /g,"+"),A._decompress(s.length,32,function(h){return S(z,s.charAt(h))}))},compress:function(s){return A._compress(s,16,function(h){return g(h)})},_compress:function(s,h,o){if(s==null)return"";var n,i,t={},e={},r="",a="",u="",p=2,M=3,w=2,m=[],d=0,_=0,T;for(T=0;T<s.length;T+=1)if(r=s.charAt(T),Object.prototype.hasOwnProperty.call(t,r)||(t[r]=M++,e[r]=!0),a=u+r,Object.prototype.hasOwnProperty.call(t,a))u=a;else{if(Object.prototype.hasOwnProperty.call(e,u)){if(u.charCodeAt(0)<256){for(n=0;n<w;n++)d=d<<1,_==h-1?(_=0,m.push(o(d)),d=0):_++;for(i=u.charCodeAt(0),n=0;n<8;n++)d=d<<1|i&1,_==h-1?(_=0,m.push(o(d)),d=0):_++,i=i>>1}else{for(i=1,n=0;n<w;n++)d=d<<1|i,_==h-1?(_=0,m.push(o(d)),d=0):_++,i=0;for(i=u.charCodeAt(0),n=0;n<16;n++)d=d<<1|i&1,_==h-1?(_=0,m.push(o(d)),d=0):_++,i=i>>1}p--,p==0&&(p=Math.pow(2,w),w++),delete e[u]}else for(i=t[u],n=0;n<w;n++)d=d<<1|i&1,_==h-1?(_=0,m.push(o(d)),d=0):_++,i=i>>1;p--,p==0&&(p=Math.pow(2,w),w++),t[a]=M++,u=String(r)}if(u!==""){if(Object.prototype.hasOwnProperty.call(e,u)){if(u.charCodeAt(0)<256){for(n=0;n<w;n++)d=d<<1,_==h-1?(_=0,m.push(o(d)),d=0):_++;for(i=u.charCodeAt(0),n=0;n<8;n++)d=d<<1|i&1,_==h-1?(_=0,m.push(o(d)),d=0):_++,i=i>>1}else{for(i=1,n=0;n<w;n++)d=d<<1|i,_==h-1?(_=0,m.push(o(d)),d=0):_++,i=0;for(i=u.charCodeAt(0),n=0;n<16;n++)d=d<<1|i&1,_==h-1?(_=0,m.push(o(d)),d=0):_++,i=i>>1}p--,p==0&&(p=Math.pow(2,w),w++),delete e[u]}else for(i=t[u],n=0;n<w;n++)d=d<<1|i&1,_==h-1?(_=0,m.push(o(d)),d=0):_++,i=i>>1;p--,p==0&&(p=Math.pow(2,w),w++)}for(i=2,n=0;n<w;n++)d=d<<1|i&1,_==h-1?(_=0,m.push(o(d)),d=0):_++,i=i>>1;for(;;)if(d=d<<1,_==h-1){m.push(o(d));break}else _++;return m.join("")},decompress:function(s){return s==null?"":s==""?null:A._decompress(s.length,32768,function(h){return s.charCodeAt(h)})},_decompress:function(s,h,o){var n=[],i=4,t=4,e=3,r="",a=[],u,p,M,w,m,d,_,T={val:o(0),position:h,index:1};for(u=0;u<3;u+=1)n[u]=u;for(M=0,m=Math.pow(2,2),d=1;d!=m;)w=T.val&T.position,T.position>>=1,T.position==0&&(T.position=h,T.val=o(T.index++)),M|=(w>0?1:0)*d,d<<=1;switch(M){case 0:for(M=0,m=Math.pow(2,8),d=1;d!=m;)w=T.val&T.position,T.position>>=1,T.position==0&&(T.position=h,T.val=o(T.index++)),M|=(w>0?1:0)*d,d<<=1;_=g(M);break;case 1:for(M=0,m=Math.pow(2,16),d=1;d!=m;)w=T.val&T.position,T.position>>=1,T.position==0&&(T.position=h,T.val=o(T.index++)),M|=(w>0?1:0)*d,d<<=1;_=g(M);break;case 2:return""}for(n[3]=_,p=_,a.push(_);;){if(T.index>s)return"";for(M=0,m=Math.pow(2,e),d=1;d!=m;)w=T.val&T.position,T.position>>=1,T.position==0&&(T.position=h,T.val=o(T.index++)),M|=(w>0?1:0)*d,d<<=1;switch(_=M){case 0:for(M=0,m=Math.pow(2,8),d=1;d!=m;)w=T.val&T.position,T.position>>=1,T.position==0&&(T.position=h,T.val=o(T.index++)),M|=(w>0?1:0)*d,d<<=1;n[t++]=g(M),_=t-1,i--;break;case 1:for(M=0,m=Math.pow(2,16),d=1;d!=m;)w=T.val&T.position,T.position>>=1,T.position==0&&(T.position=h,T.val=o(T.index++)),M|=(w>0?1:0)*d,d<<=1;n[t++]=g(M),_=t-1,i--;break;case 2:return a.join("")}if(i==0&&(i=Math.pow(2,e),e++),n[_])r=n[_];else if(_===t)r=p+p.charAt(0);else return null;a.push(r),n[t++]=p+r.charAt(0),i--,p=r,i==0&&(i=Math.pow(2,e),e++)}}};return A}();ee!=null?ee.exports=X:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return X})}(er)),er.exports}var Ii=xi();const Vr=vr(Ii);var tr={exports:{}},Br;function Fi(){return Br||(Br=1,function(ee,X){(function(){var g="ace",I=function(){return this}();!I&&typeof window<"u"&&(I=window);var z=function(o,n,i){if(typeof o!="string"){z.original?z.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace());return}arguments.length==2&&(i=n),z.modules[o]||(z.payloads[o]=i,z.modules[o]=null)};z.modules={},z.payloads={};var D=function(o,n,i){if(typeof n=="string"){var t=s(o,n);if(t!=null)return i&&i(),t}else if(Object.prototype.toString.call(n)==="[object Array]"){for(var e=[],r=0,a=n.length;r<a;++r){var u=s(o,n[r]);if(u==null&&S.original)return;e.push(u)}return i&&i.apply(null,e)||!0}},S=function(o,n){var i=D("",o,n);return i==null&&S.original?S.original.apply(this,arguments):i},A=function(o,n){if(n.indexOf("!")!==-1){var i=n.split("!");return A(o,i[0])+"!"+A(o,i[1])}if(n.charAt(0)=="."){var t=o.split("/").slice(0,-1).join("/");for(n=t+"/"+n;n.indexOf(".")!==-1&&e!=n;){var e=n;n=n.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return n},s=function(o,n){n=A(o,n);var i=z.modules[n];if(!i){if(i=z.payloads[n],typeof i=="function"){var t={},e={id:n,uri:"",exports:t,packaged:!0},r=function(u,p){return D(n,u,p)},a=i(r,t,e);t=a||e.exports,z.modules[n]=t,delete z.payloads[n]}i=z.modules[n]=t||i}return i};function h(o){var n=I;I[o]||(I[o]={}),n=I[o],(!n.define||!n.define.packaged)&&(z.original=n.define,n.define=z,n.define.packaged=!0),(!n.require||!n.require.packaged)&&(S.original=n.require,n.require=S,n.require.packaged=!0)}h(g)})(),ace.define("ace/lib/es6-shim",["require","exports","module"],function(g,I,z){function D(S,A,s){Object.defineProperty(S,A,{value:s,enumerable:!1,writable:!0,configurable:!0})}String.prototype.startsWith||D(String.prototype,"startsWith",function(S,A){return A=A||0,this.lastIndexOf(S,A)===A}),String.prototype.endsWith||D(String.prototype,"endsWith",function(S,A){var s=this;(A===void 0||A>s.length)&&(A=s.length),A-=S.length;var h=s.indexOf(S,A);return h!==-1&&h===A}),String.prototype.repeat||D(String.prototype,"repeat",function(S){for(var A="",s=this;S>0;)S&1&&(A+=s),(S>>=1)&&(s+=s);return A}),String.prototype.includes||D(String.prototype,"includes",function(S,A){return this.indexOf(S,A)!=-1}),Object.assign||(Object.assign=function(S){if(S==null)throw new TypeError("Cannot convert undefined or null to object");for(var A=Object(S),s=1;s<arguments.length;s++){var h=arguments[s];h!=null&&Object.keys(h).forEach(function(o){A[o]=h[o]})}return A}),Object.values||(Object.values=function(S){return Object.keys(S).map(function(A){return S[A]})}),Array.prototype.find||D(Array.prototype,"find",function(S){for(var A=this.length,s=arguments[1],h=0;h<A;h++){var o=this[h];if(S.call(s,o,h,this))return o}}),Array.prototype.findIndex||D(Array.prototype,"findIndex",function(S){for(var A=this.length,s=arguments[1],h=0;h<A;h++){var o=this[h];if(S.call(s,o,h,this))return h}}),Array.prototype.includes||D(Array.prototype,"includes",function(S,A){return this.indexOf(S,A)!=-1}),Array.prototype.fill||D(Array.prototype,"fill",function(S){for(var A=this,s=A.length>>>0,h=arguments[1],o=h>>0,n=o<0?Math.max(s+o,0):Math.min(o,s),i=arguments[2],t=i===void 0?s:i>>0,e=t<0?Math.max(s+t,0):Math.min(t,s);n<e;)A[n]=S,n++;return A}),Array.of||D(Array,"of",function(){return Array.prototype.slice.call(arguments)})}),ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/es6-shim"],function(g,I,z){g("./es6-shim")}),ace.define("ace/lib/deep_copy",["require","exports","module"],function(g,I,z){I.deepCopy=function D(S){if(typeof S!="object"||!S)return S;var A;if(Array.isArray(S)){A=[];for(var s=0;s<S.length;s++)A[s]=D(S[s]);return A}if(Object.prototype.toString.call(S)!=="[object Object]")return S;A={};for(var s in S)A[s]=D(S[s]);return A}}),ace.define("ace/lib/lang",["require","exports","module","ace/lib/deep_copy"],function(g,I,z){I.last=function(A){return A[A.length-1]},I.stringReverse=function(A){return A.split("").reverse().join("")},I.stringRepeat=function(A,s){for(var h="";s>0;)s&1&&(h+=A),(s>>=1)&&(A+=A);return h};var D=/^\s\s*/,S=/\s\s*$/;I.stringTrimLeft=function(A){return A.replace(D,"")},I.stringTrimRight=function(A){return A.replace(S,"")},I.copyObject=function(A){var s={};for(var h in A)s[h]=A[h];return s},I.copyArray=function(A){for(var s=[],h=0,o=A.length;h<o;h++)A[h]&&typeof A[h]=="object"?s[h]=this.copyObject(A[h]):s[h]=A[h];return s},I.deepCopy=g("./deep_copy").deepCopy,I.arrayToMap=function(A){for(var s={},h=0;h<A.length;h++)s[A[h]]=1;return s},I.createMap=function(A){var s=Object.create(null);for(var h in A)s[h]=A[h];return s},I.arrayRemove=function(A,s){for(var h=0;h<=A.length;h++)s===A[h]&&A.splice(h,1)},I.escapeRegExp=function(A){return A.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},I.escapeHTML=function(A){return(""+A).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},I.getMatchOffsets=function(A,s){var h=[];return A.replace(s,function(o){h.push({offset:arguments[arguments.length-2],length:o.length})}),h},I.deferredCall=function(A){var s=null,h=function(){s=null,A()},o=function(n){return o.cancel(),s=setTimeout(h,n||0),o};return o.schedule=o,o.call=function(){return this.cancel(),A(),o},o.cancel=function(){return clearTimeout(s),s=null,o},o.isPending=function(){return s},o},I.delayedCall=function(A,s){var h=null,o=function(){h=null,A()},n=function(i){h==null&&(h=setTimeout(o,i||s))};return n.delay=function(i){h&&clearTimeout(h),h=setTimeout(o,i||s)},n.schedule=n,n.call=function(){this.cancel(),A()},n.cancel=function(){h&&clearTimeout(h),h=null},n.isPending=function(){return h},n},I.supportsLookbehind=function(){try{new RegExp("(?<=.)")}catch{return!1}return!0},I.skipEmptyMatch=function(A,s,h){return h&&A.codePointAt(s)>65535?2:1}}),ace.define("ace/lib/useragent",["require","exports","module"],function(g,I,z){I.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},I.getOS=function(){return I.isMac?I.OS.MAC:I.isLinux?I.OS.LINUX:I.OS.WINDOWS};var D=typeof navigator=="object"?navigator:{},S=(/mac|win|linux/i.exec(D.platform)||["other"])[0].toLowerCase(),A=D.userAgent||"",s=D.appName||"";I.isWin=S=="win",I.isMac=S=="mac",I.isLinux=S=="linux",I.isIE=s=="Microsoft Internet Explorer"||s.indexOf("MSAppHost")>=0?parseFloat((A.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((A.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),I.isOldIE=I.isIE&&I.isIE<9,I.isGecko=I.isMozilla=A.match(/ Gecko\/\d+/),I.isOpera=typeof opera=="object"&&Object.prototype.toString.call(window.opera)=="[object Opera]",I.isWebKit=parseFloat(A.split("WebKit/")[1])||void 0,I.isChrome=parseFloat(A.split(" Chrome/")[1])||void 0,I.isSafari=parseFloat(A.split(" Safari/")[1])&&!I.isChrome||void 0,I.isEdge=parseFloat(A.split(" Edge/")[1])||void 0,I.isAIR=A.indexOf("AdobeAIR")>=0,I.isAndroid=A.indexOf("Android")>=0,I.isChromeOS=A.indexOf(" CrOS ")>=0,I.isIOS=/iPad|iPhone|iPod/.test(A)&&!window.MSStream,I.isIOS&&(I.isMac=!0),I.isMobile=I.isIOS||I.isAndroid}),ace.define("ace/lib/dom",["require","exports","module","ace/lib/useragent"],function(g,I,z){var D=g("./useragent"),S="http://www.w3.org/1999/xhtml";I.buildDom=function i(t,e,r){if(typeof t=="string"&&t){var a=document.createTextNode(t);return e&&e.appendChild(a),a}if(!Array.isArray(t))return t&&t.appendChild&&e&&e.appendChild(t),t;if(typeof t[0]!="string"||!t[0]){for(var u=[],p=0;p<t.length;p++){var M=i(t[p],e,r);M&&u.push(M)}return u}var w=document.createElement(t[0]),m=t[1],d=1;m&&typeof m=="object"&&!Array.isArray(m)&&(d=2);for(var p=d;p<t.length;p++)i(t[p],w,r);return d==2&&Object.keys(m).forEach(function(_){var T=m[_];_==="class"?w.className=Array.isArray(T)?T.join(" "):T:typeof T=="function"||_=="value"||_[0]=="$"?w[_]=T:_==="ref"?r&&(r[T]=w):_==="style"?typeof T=="string"&&(w.style.cssText=T):T!=null&&w.setAttribute(_,T)}),e&&e.appendChild(w),w},I.getDocumentHead=function(i){return i||(i=document),i.head||i.getElementsByTagName("head")[0]||i.documentElement},I.createElement=function(i,t){return document.createElementNS?document.createElementNS(t||S,i):document.createElement(i)},I.removeChildren=function(i){i.innerHTML=""},I.createTextNode=function(i,t){var e=t?t.ownerDocument:document;return e.createTextNode(i)},I.createFragment=function(i){var t=i?i.ownerDocument:document;return t.createDocumentFragment()},I.hasCssClass=function(i,t){var e=(i.className+"").split(/\s+/g);return e.indexOf(t)!==-1},I.addCssClass=function(i,t){I.hasCssClass(i,t)||(i.className+=" "+t)},I.removeCssClass=function(i,t){for(var e=i.className.split(/\s+/g);;){var r=e.indexOf(t);if(r==-1)break;e.splice(r,1)}i.className=e.join(" ")},I.toggleCssClass=function(i,t){for(var e=i.className.split(/\s+/g),r=!0;;){var a=e.indexOf(t);if(a==-1)break;r=!1,e.splice(a,1)}return r&&e.push(t),i.className=e.join(" "),r},I.setCssClass=function(i,t,e){e?I.addCssClass(i,t):I.removeCssClass(i,t)},I.hasCssString=function(i,t){var e=0,r;if(t=t||document,r=t.querySelectorAll("style")){for(;e<r.length;)if(r[e++].id===i)return!0}},I.removeElementById=function(i,t){t=t||document,t.getElementById(i)&&t.getElementById(i).remove()};var A,s=[];I.useStrictCSP=function(i){A=i,i==!1?h():s||(s=[])};function h(){var i=s;s=null,i&&i.forEach(function(t){o(t[0],t[1])})}function o(i,t,e){if(!(typeof document>"u")){if(s){if(e)h();else if(e===!1)return s.push([i,t])}if(!A){var r=e;!e||!e.getRootNode?r=document:(r=e.getRootNode(),(!r||r==e)&&(r=document));var a=r.ownerDocument||r;if(t&&I.hasCssString(t,r))return null;t&&(i+=`
/*# sourceURL=ace/css/`+t+" */");var u=I.createElement("style");u.appendChild(a.createTextNode(i)),t&&(u.id=t),r==a&&(r=I.getDocumentHead(a)),r.insertBefore(u,r.firstChild)}}}if(I.importCssString=o,I.importCssStylsheet=function(i,t){I.buildDom(["link",{rel:"stylesheet",href:i}],I.getDocumentHead(t))},I.scrollbarWidth=function(i){var t=I.createElement("ace_inner");t.style.width="100%",t.style.minWidth="0px",t.style.height="200px",t.style.display="block";var e=I.createElement("ace_outer"),r=e.style;r.position="absolute",r.left="-10000px",r.overflow="hidden",r.width="200px",r.minWidth="0px",r.height="150px",r.display="block",e.appendChild(t);var a=i&&i.documentElement||document&&document.documentElement;if(!a)return 0;a.appendChild(e);var u=t.offsetWidth;r.overflow="scroll";var p=t.offsetWidth;return u===p&&(p=e.clientWidth),a.removeChild(e),u-p},I.computedStyle=function(i,t){return window.getComputedStyle(i,"")||{}},I.setStyle=function(i,t,e){i[t]!==e&&(i[t]=e)},I.HAS_CSS_ANIMATION=!1,I.HAS_CSS_TRANSFORMS=!1,I.HI_DPI=D.isWin?typeof window<"u"&&window.devicePixelRatio>=1.5:!0,D.isChromeOS&&(I.HI_DPI=!1),typeof document<"u"){var n=document.createElement("div");I.HI_DPI&&n.style.transform!==void 0&&(I.HAS_CSS_TRANSFORMS=!0),!D.isEdge&&typeof n.style.animationName<"u"&&(I.HAS_CSS_ANIMATION=!0),n=null}I.HAS_CSS_TRANSFORMS?I.translate=function(i,t,e){i.style.transform="translate("+Math.round(t)+"px, "+Math.round(e)+"px)"}:I.translate=function(i,t,e){i.style.top=Math.round(e)+"px",i.style.left=Math.round(t)+"px"}}),ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(g,I,z){/*
* based on code from:
*
* @license RequireJS text 0.25.0 Copyright (c) 2010-2011, The Dojo Foundation All Rights Reserved.
* Available via the MIT or new BSD license.
* see: http://github.com/jrburke/requirejs for details
*/var D=g("./dom");I.get=function(S,A){var s=new XMLHttpRequest;s.open("GET",S,!0),s.onreadystatechange=function(){s.readyState===4&&A(s.responseText)},s.send(null)},I.loadScript=function(S,A){var s=D.getDocumentHead(),h=document.createElement("script");h.src=S,s.appendChild(h),h.onload=h.onreadystatechange=function(o,n){(n||!h.readyState||h.readyState=="loaded"||h.readyState=="complete")&&(h=h.onload=h.onreadystatechange=null,n||A())}},I.qualifyURL=function(S){var A=document.createElement("a");return A.href=S,A.href}}),ace.define("ace/lib/oop",["require","exports","module"],function(g,I,z){I.inherits=function(D,S){D.super_=S,D.prototype=Object.create(S.prototype,{constructor:{value:D,enumerable:!1,writable:!0,configurable:!0}})},I.mixin=function(D,S){for(var A in S)D[A]=S[A];return D},I.implement=function(D,S){I.mixin(D,S)}}),ace.define("ace/lib/event_emitter",["require","exports","module"],function(g,I,z){var D={},S=function(){this.propagationStopped=!0},A=function(){this.defaultPrevented=!0};D._emit=D._dispatchEvent=function(s,h){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var o=this._eventRegistry[s]||[],n=this._defaultHandlers[s];if(!(!o.length&&!n)){(typeof h!="object"||!h)&&(h={}),h.type||(h.type=s),h.stopPropagation||(h.stopPropagation=S),h.preventDefault||(h.preventDefault=A),o=o.slice();for(var i=0;i<o.length&&(o[i](h,this),!h.propagationStopped);i++);if(n&&!h.defaultPrevented)return n(h,this)}},D._signal=function(s,h){var o=(this._eventRegistry||{})[s];if(o){o=o.slice();for(var n=0;n<o.length;n++)o[n](h,this)}},D.once=function(s,h){var o=this;if(this.on(s,function n(){o.off(s,n),h.apply(null,arguments)}),!h)return new Promise(function(n){h=n})},D.setDefaultHandler=function(s,h){var o=this._defaultHandlers;if(o||(o=this._defaultHandlers={_disabled_:{}}),o[s]){var n=o[s],i=o._disabled_[s];i||(o._disabled_[s]=i=[]),i.push(n);var t=i.indexOf(h);t!=-1&&i.splice(t,1)}o[s]=h},D.removeDefaultHandler=function(s,h){var o=this._defaultHandlers;if(o){var n=o._disabled_[s];if(o[s]==h)n&&this.setDefaultHandler(s,n.pop());else if(n){var i=n.indexOf(h);i!=-1&&n.splice(i,1)}}},D.on=D.addEventListener=function(s,h,o){this._eventRegistry=this._eventRegistry||{};var n=this._eventRegistry[s];return n||(n=this._eventRegistry[s]=[]),n.indexOf(h)==-1&&n[o?"unshift":"push"](h),h},D.off=D.removeListener=D.removeEventListener=function(s,h){this._eventRegistry=this._eventRegistry||{};var o=this._eventRegistry[s];if(o){var n=o.indexOf(h);n!==-1&&o.splice(n,1)}},D.removeAllListeners=function(s){s||(this._eventRegistry=this._defaultHandlers=void 0),this._eventRegistry&&(this._eventRegistry[s]=void 0),this._defaultHandlers&&(this._defaultHandlers[s]=void 0)},I.EventEmitter=D}),ace.define("ace/lib/report_error",["require","exports","module"],function(g,I,z){I.reportError=function(S,A){var s=new Error(S);s.data=A,typeof console=="object"&&console.error&&console.error(s),setTimeout(function(){throw s})}}),ace.define("ace/lib/default_english_messages",["require","exports","module"],function(g,I,z){var D={"autocomplete.popup.aria-roledescription":"Autocomplete suggestions","autocomplete.popup.aria-label":"Autocomplete suggestions","autocomplete.popup.item.aria-roledescription":"item","autocomplete.loading":"Loading...","editor.scroller.aria-roledescription":"editor","editor.scroller.aria-label":"Editor content, press Enter to start editing, press Escape to exit","editor.gutter.aria-roledescription":"editor","editor.gutter.aria-label":"Editor gutter, press Enter to interact with controls using arrow keys, press Escape to exit","error-marker.good-state":"Looks good!","prompt.recently-used":"Recently used","prompt.other-commands":"Other commands","prompt.no-matching-commands":"No matching commands","search-box.find.placeholder":"Search for","search-box.find-all.text":"All","search-box.replace.placeholder":"Replace with","search-box.replace-next.text":"Replace","search-box.replace-all.text":"All","search-box.toggle-replace.title":"Toggle Replace mode","search-box.toggle-regexp.title":"RegExp Search","search-box.toggle-case.title":"CaseSensitive Search","search-box.toggle-whole-word.title":"Whole Word Search","search-box.toggle-in-selection.title":"Search In Selection","search-box.search-counter":"$0 of $1","text-input.aria-roledescription":"editor","text-input.aria-label":"Cursor at row $0","gutter.code-folding.range.aria-label":"Toggle code folding, rows $0 through $1","gutter.code-folding.closed.aria-label":"Toggle code folding, rows $0 through $1","gutter.code-folding.open.aria-label":"Toggle code folding, row $0","gutter.code-folding.closed.title":"Unfold code","gutter.code-folding.open.title":"Fold code","gutter.annotation.aria-label.error":"Error, read annotations row $0","gutter.annotation.aria-label.warning":"Warning, read annotations row $0","gutter.annotation.aria-label.info":"Info, read annotations row $0","inline-fold.closed.title":"Unfold code","gutter-tooltip.aria-label.error.singular":"error","gutter-tooltip.aria-label.error.plural":"errors","gutter-tooltip.aria-label.warning.singular":"warning","gutter-tooltip.aria-label.warning.plural":"warnings","gutter-tooltip.aria-label.info.singular":"information message","gutter-tooltip.aria-label.info.plural":"information messages","gutter.annotation.aria-label.security":"Security finding, read annotations row $0","gutter.annotation.aria-label.hint":"Suggestion, read annotations row $0","gutter-tooltip.aria-label.security.singular":"security finding","gutter-tooltip.aria-label.security.plural":"security findings","gutter-tooltip.aria-label.hint.singular":"suggestion","gutter-tooltip.aria-label.hint.plural":"suggestions"};I.defaultEnglishMessages=D}),ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/lib/report_error","ace/lib/default_english_messages"],function(g,I,z){"no use strict";var D=g("./oop"),S=g("./event_emitter").EventEmitter,A=g("./report_error").reportError,s=g("./default_english_messages").defaultEnglishMessages,h={setOptions:function(e){Object.keys(e).forEach(function(r){this.setOption(r,e[r])},this)},getOptions:function(e){var r={};if(e)Array.isArray(e)||(r=e,e=Object.keys(r));else{var a=this.$options;e=Object.keys(a).filter(function(u){return!a[u].hidden})}return e.forEach(function(u){r[u]=this.getOption(u)},this),r},setOption:function(e,r){if(this["$"+e]!==r){var a=this.$options[e];if(!a)return o('misspelled option "'+e+'"');if(a.forwardTo)return this[a.forwardTo]&&this[a.forwardTo].setOption(e,r);a.handlesSet||(this["$"+e]=r),a&&a.set&&a.set.call(this,r)}},getOption:function(e){var r=this.$options[e];return r?r.forwardTo?this[r.forwardTo]&&this[r.forwardTo].getOption(e):r&&r.get?r.get.call(this):this["$"+e]:o('misspelled option "'+e+'"')}};function o(e){typeof console<"u"&&console.warn&&console.warn.apply(console,arguments)}var n,i,t=function(){function e(){this.$defaultOptions={},n=s,i="dollarSigns"}return e.prototype.defineOptions=function(r,a,u){return r.$options||(this.$defaultOptions[a]=r.$options={}),Object.keys(u).forEach(function(p){var M=u[p];typeof M=="string"&&(M={forwardTo:M}),M.name||(M.name=p),r.$options[M.name]=M,"initialValue"in M&&(r["$"+M.name]=M.initialValue)}),D.implement(r,h),this},e.prototype.resetOptions=function(r){Object.keys(r.$options).forEach(function(a){var u=r.$options[a];"value"in u&&r.setOption(a,u.value)})},e.prototype.setDefaultValue=function(r,a,u){if(!r){for(r in this.$defaultOptions)if(this.$defaultOptions[r][a])break;if(!this.$defaultOptions[r][a])return!1}var p=this.$defaultOptions[r]||(this.$defaultOptions[r]={});p[a]&&(p.forwardTo?this.setDefaultValue(p.forwardTo,a,u):p[a].value=u)},e.prototype.setDefaultValues=function(r,a){Object.keys(a).forEach(function(u){this.setDefaultValue(r,u,a[u])},this)},e.prototype.setMessages=function(r,a){n=r,a&&a.placeholders&&(i=a.placeholders)},e.prototype.nls=function(r,a,u){n[r]||(o("No message found for the key '"+r+"' in the provided messages, trying to find a translation for the default string '"+a+"'."),n[a]||o("No message found for the default string '"+a+"' in the provided messages. Falling back to the default English message."));var p=n[r]||n[a]||a;return u&&(i==="dollarSigns"&&(p=p.replace(/\$(\$|[\d]+)/g,function(M,w){return w=="$"?"$":u[w]})),i==="curlyBrackets"&&(p=p.replace(/\{([^\}]+)\}/g,function(M,w){return u[w]}))),p},e}();t.prototype.warn=o,t.prototype.reportError=A,D.implement(t.prototype,S),I.AppConfig=t}),ace.define("ace/theme/textmate-css",["require","exports","module"],function(g,I,z){z.exports=`.ace-tm .ace_gutter {
  background: #f0f0f0;
  color: #333;
}

.ace-tm .ace_print-margin {
  width: 1px;
  background: #e8e8e8;
}

.ace-tm .ace_fold {
    background-color: #6B72E6;
}

.ace-tm {
  background-color: #FFFFFF;
  color: black;
}

.ace-tm .ace_cursor {
  color: black;
}
        
.ace-tm .ace_invisible {
  color: rgb(191, 191, 191);
}

.ace-tm .ace_storage,
.ace-tm .ace_keyword {
  color: blue;
}

.ace-tm .ace_constant {
  color: rgb(197, 6, 11);
}

.ace-tm .ace_constant.ace_buildin {
  color: rgb(88, 72, 246);
}

.ace-tm .ace_constant.ace_language {
  color: rgb(88, 92, 246);
}

.ace-tm .ace_constant.ace_library {
  color: rgb(6, 150, 14);
}

.ace-tm .ace_invalid {
  background-color: rgba(255, 0, 0, 0.1);
  color: red;
}

.ace-tm .ace_support.ace_function {
  color: rgb(60, 76, 114);
}

.ace-tm .ace_support.ace_constant {
  color: rgb(6, 150, 14);
}

.ace-tm .ace_support.ace_type,
.ace-tm .ace_support.ace_class {
  color: rgb(109, 121, 222);
}

.ace-tm .ace_keyword.ace_operator {
  color: rgb(104, 118, 135);
}

.ace-tm .ace_string {
  color: rgb(3, 106, 7);
}

.ace-tm .ace_comment {
  color: rgb(76, 136, 107);
}

.ace-tm .ace_comment.ace_doc {
  color: rgb(0, 102, 255);
}

.ace-tm .ace_comment.ace_doc.ace_tag {
  color: rgb(128, 159, 191);
}

.ace-tm .ace_constant.ace_numeric {
  color: rgb(0, 0, 205);
}

.ace-tm .ace_variable {
  color: rgb(49, 132, 149);
}

.ace-tm .ace_xml-pe {
  color: rgb(104, 104, 91);
}

.ace-tm .ace_entity.ace_name.ace_function {
  color: #0000A2;
}


.ace-tm .ace_heading {
  color: rgb(12, 7, 255);
}

.ace-tm .ace_list {
  color:rgb(185, 6, 144);
}

.ace-tm .ace_meta.ace_tag {
  color:rgb(0, 22, 142);
}

.ace-tm .ace_string.ace_regex {
  color: rgb(255, 0, 0)
}

.ace-tm .ace_marker-layer .ace_selection {
  background: rgb(181, 213, 255);
}
.ace-tm.ace_multiselect .ace_selection.ace_start {
  box-shadow: 0 0 3px 0px white;
}
.ace-tm .ace_marker-layer .ace_step {
  background: rgb(252, 255, 0);
}

.ace-tm .ace_marker-layer .ace_stack {
  background: rgb(164, 229, 101);
}

.ace-tm .ace_marker-layer .ace_bracket {
  margin: -1px 0 0 -1px;
  border: 1px solid rgb(192, 192, 192);
}

.ace-tm .ace_marker-layer .ace_active-line {
  background: rgba(0, 0, 0, 0.07);
}

.ace-tm .ace_gutter-active-line {
    background-color : #dcdcdc;
}

.ace-tm .ace_marker-layer .ace_selected-word {
  background: rgb(250, 250, 255);
  border: 1px solid rgb(200, 200, 250);
}

.ace-tm .ace_indent-guide {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;
}

.ace-tm .ace_indent-guide-active {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAZSURBVHjaYvj///9/hivKyv8BAAAA//8DACLqBhbvk+/eAAAAAElFTkSuQmCC") right repeat-y;
}
`}),ace.define("ace/theme/textmate",["require","exports","module","ace/theme/textmate-css","ace/lib/dom"],function(g,I,z){I.isDark=!1,I.cssClass="ace-tm",I.cssText=g("./textmate-css"),I.$id="ace/theme/textmate";var D=g("../lib/dom");D.importCssString(I.cssText,I.cssClass,!1)}),ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/net","ace/lib/dom","ace/lib/app_config","ace/theme/textmate"],function(g,I,z){"no use strict";var D=g("./lib/lang"),S=g("./lib/net"),A=g("./lib/dom"),s=g("./lib/app_config").AppConfig;z.exports=I=new s;var h={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{},loadWorkerFromBlob:!0,sharedPopups:!1,useStrictCSP:null};I.get=function(t){if(!h.hasOwnProperty(t))throw new Error("Unknown config key: "+t);return h[t]},I.set=function(t,e){if(h.hasOwnProperty(t))h[t]=e;else if(this.setDefaultValue("",t,e)==!1)throw new Error("Unknown config key: "+t);t=="useStrictCSP"&&A.useStrictCSP(e)},I.all=function(){return D.copyObject(h)},I.$modes={},I.moduleUrl=function(t,e){if(h.$moduleUrls[t])return h.$moduleUrls[t];var r=t.split("/");e=e||r[r.length-2]||"";var a=e=="snippets"?"/":"-",u=r[r.length-1];if(e=="worker"&&a=="-"){var p=new RegExp("^"+e+"[\\-_]|[\\-_]"+e+"$","g");u=u.replace(p,"")}(!u||u==e)&&r.length>1&&(u=r[r.length-2]);var M=h[e+"Path"];return M==null?M=h.basePath:a=="/"&&(e=a=""),M&&M.slice(-1)!="/"&&(M+="/"),M+e+a+u+this.get("suffix")},I.setModuleUrl=function(t,e){return h.$moduleUrls[t]=e};var o=function(t,e){if(t==="ace/theme/textmate"||t==="./theme/textmate")return e(null,g("./theme/textmate"));if(n)return n(t,e);console.error("loader is not configured")},n;I.setLoader=function(t){n=t},I.dynamicModules=Object.create(null),I.$loading={},I.$loaded={},I.loadModule=function(t,e){var r;if(Array.isArray(t))var a=t[0],u=t[1];else if(typeof t=="string")var u=t;var p=function(M){if(M&&!I.$loading[u])return e&&e(M);if(I.$loading[u]||(I.$loading[u]=[]),I.$loading[u].push(e),!(I.$loading[u].length>1)){var w=function(){o(u,function(m,d){d&&(I.$loaded[u]=d),I._emit("load.module",{name:u,module:d});var _=I.$loading[u];I.$loading[u]=null,_.forEach(function(T){T&&T(d)})})};if(!I.get("packaged"))return w();S.loadScript(I.moduleUrl(u,a),w),i()}};if(I.dynamicModules[u])I.dynamicModules[u]().then(function(M){M.default?p(M.default):p(M)});else{try{r=this.$require(u)}catch{}p(r||I.$loaded[u])}},I.$require=function(t){if(typeof z.require=="function"){var e="require";return z[e](t)}},I.setModuleLoader=function(t,e){I.dynamicModules[t]=e};var i=function(){!h.basePath&&!h.workerPath&&!h.modePath&&!h.themePath&&!Object.keys(h.$moduleUrls).length&&(console.error("Unable to infer path to ace from script src,","use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes","or with webpack use ace/webpack-resolver"),i=function(){})};I.version="1.36.2"}),ace.define("ace/loader_build",["require","exports","module","ace/lib/fixoldbrowsers","ace/config"],function(g,I,z){g("./lib/fixoldbrowsers");var D=g("./config");D.setLoader(function(h,o){g([h],function(n){o(null,n)})});var S=function(){return this||typeof window<"u"&&window}();z.exports=function(h){D.init=A,D.$require=g,h.require=g},A(!0);function A(h){if(!(!S||!S.document)){D.set("packaged",h||g.packaged||z.packaged||S.define&&(void 0).packaged);var o={},n="",i=document.currentScript||document._currentScript,t=i&&i.ownerDocument||document;i&&i.src&&(n=i.src.split(/[?#]/)[0].split("/").slice(0,-1).join("/")||"");for(var e=t.getElementsByTagName("script"),r=0;r<e.length;r++){var a=e[r],u=a.src||a.getAttribute("src");if(u){for(var p=a.attributes,M=0,w=p.length;M<w;M++){var m=p[M];m.name.indexOf("data-ace-")===0&&(o[s(m.name.replace(/^data-ace-/,""))]=m.value)}var d=u.match(/^(.*)\/ace([\-.]\w+)?\.js(\?|$)/);d&&(n=d[1])}}n&&(o.base=o.base||n,o.packaged=!0),o.basePath=o.base,o.workerPath=o.workerPath||o.base,o.modePath=o.modePath||o.base,o.themePath=o.themePath||o.base,delete o.base;for(var _ in o)typeof o[_]<"u"&&D.set(_,o[_])}}function s(h){return h.replace(/-(.)/g,function(o,n){return n.toUpperCase()})}}),ace.define("ace/range",["require","exports","module"],function(g,I,z){var D=function(){function S(A,s,h,o){this.start={row:A,column:s},this.end={row:h,column:o}}return S.prototype.isEqual=function(A){return this.start.row===A.start.row&&this.end.row===A.end.row&&this.start.column===A.start.column&&this.end.column===A.end.column},S.prototype.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},S.prototype.contains=function(A,s){return this.compare(A,s)==0},S.prototype.compareRange=function(A){var s,h=A.end,o=A.start;return s=this.compare(h.row,h.column),s==1?(s=this.compare(o.row,o.column),s==1?2:s==0?1:0):s==-1?-2:(s=this.compare(o.row,o.column),s==-1?-1:s==1?42:0)},S.prototype.comparePoint=function(A){return this.compare(A.row,A.column)},S.prototype.containsRange=function(A){return this.comparePoint(A.start)==0&&this.comparePoint(A.end)==0},S.prototype.intersects=function(A){var s=this.compareRange(A);return s==-1||s==0||s==1},S.prototype.isEnd=function(A,s){return this.end.row==A&&this.end.column==s},S.prototype.isStart=function(A,s){return this.start.row==A&&this.start.column==s},S.prototype.setStart=function(A,s){typeof A=="object"?(this.start.column=A.column,this.start.row=A.row):(this.start.row=A,this.start.column=s)},S.prototype.setEnd=function(A,s){typeof A=="object"?(this.end.column=A.column,this.end.row=A.row):(this.end.row=A,this.end.column=s)},S.prototype.inside=function(A,s){return this.compare(A,s)==0?!(this.isEnd(A,s)||this.isStart(A,s)):!1},S.prototype.insideStart=function(A,s){return this.compare(A,s)==0?!this.isEnd(A,s):!1},S.prototype.insideEnd=function(A,s){return this.compare(A,s)==0?!this.isStart(A,s):!1},S.prototype.compare=function(A,s){return!this.isMultiLine()&&A===this.start.row?s<this.start.column?-1:s>this.end.column?1:0:A<this.start.row?-1:A>this.end.row?1:this.start.row===A?s>=this.start.column?0:-1:this.end.row===A?s<=this.end.column?0:1:0},S.prototype.compareStart=function(A,s){return this.start.row==A&&this.start.column==s?-1:this.compare(A,s)},S.prototype.compareEnd=function(A,s){return this.end.row==A&&this.end.column==s?1:this.compare(A,s)},S.prototype.compareInside=function(A,s){return this.end.row==A&&this.end.column==s?1:this.start.row==A&&this.start.column==s?-1:this.compare(A,s)},S.prototype.clipRows=function(A,s){if(this.end.row>s)var h={row:s+1,column:0};else if(this.end.row<A)var h={row:A,column:0};if(this.start.row>s)var o={row:s+1,column:0};else if(this.start.row<A)var o={row:A,column:0};return S.fromPoints(o||this.start,h||this.end)},S.prototype.extend=function(A,s){var h=this.compare(A,s);if(h==0)return this;if(h==-1)var o={row:A,column:s};else var n={row:A,column:s};return S.fromPoints(o||this.start,n||this.end)},S.prototype.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},S.prototype.isMultiLine=function(){return this.start.row!==this.end.row},S.prototype.clone=function(){return S.fromPoints(this.start,this.end)},S.prototype.collapseRows=function(){return this.end.column==0?new S(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new S(this.start.row,0,this.end.row,0)},S.prototype.toScreenRange=function(A){var s=A.documentToScreenPosition(this.start),h=A.documentToScreenPosition(this.end);return new S(s.row,s.column,h.row,h.column)},S.prototype.moveBy=function(A,s){this.start.row+=A,this.start.column+=s,this.end.row+=A,this.end.column+=s},S}();D.fromPoints=function(S,A){return new D(S.row,S.column,A.row,A.column)},D.comparePoints=function(S,A){return S.row-A.row||S.column-A.column},I.Range=D}),ace.define("ace/lib/keys",["require","exports","module","ace/lib/oop"],function(g,I,z){for(var D=g("./oop"),S={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta",91:"MetaLeft",92:"MetaRight",93:"ContextMenu"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8,control:1},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete","-13":"NumpadEnter",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",59:";",61:"=",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}},A={Command:224,Backspace:8,Tab:9,Return:13,Enter:13,Pause:19,Escape:27,PageUp:33,PageDown:34,End:35,Home:36,Insert:45,Delete:46,ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:40,Backquote:192,Minus:189,Equal:187,BracketLeft:219,Backslash:220,BracketRight:221,Semicolon:186,Quote:222,Comma:188,Period:190,Slash:191,Space:32,NumpadAdd:107,NumpadDecimal:110,NumpadSubtract:109,NumpadDivide:111,NumpadMultiply:106},s=0;s<10;s++)A["Digit"+s]=48+s,A["Numpad"+s]=96+s,S.PRINTABLE_KEYS[48+s]=""+s,S.FUNCTION_KEYS[96+s]="Numpad"+s;for(var s=65;s<91;s++){var h=String.fromCharCode(s+32);A["Key"+h.toUpperCase()]=s,S.PRINTABLE_KEYS[s]=h}for(var s=1;s<13;s++)A["F"+s]=111+s,S.FUNCTION_KEYS[111+s]="F"+s;var o={Shift:16,Control:17,Alt:18,Meta:224};for(var n in o)A[n]=A[n+"Left"]=A[n+"Right"]=o[n];I.$codeToKeyCode=A,S.PRINTABLE_KEYS[173]="-";for(var i in S.FUNCTION_KEYS){var t=S.FUNCTION_KEYS[i].toLowerCase();S[t]=parseInt(i,10)}for(var i in S.PRINTABLE_KEYS){var t=S.PRINTABLE_KEYS[i].toLowerCase();S[t]=parseInt(i,10)}D.mixin(S,S.MODIFIER_KEYS),D.mixin(S,S.PRINTABLE_KEYS),D.mixin(S,S.FUNCTION_KEYS),S.enter=S.return,S.escape=S.esc,S.del=S.delete,function(){for(var e=["cmd","ctrl","alt","shift"],r=Math.pow(2,e.length);r--;)S.KEY_MODS[r]=e.filter(function(a){return r&S.KEY_MODS[a]}).join("-")+"-"}(),S.KEY_MODS[0]="",S.KEY_MODS[-1]="input-",D.mixin(I,S),I.default=I,I.keyCodeToString=function(e){var r=S[e];return typeof r!="string"&&(r=String.fromCharCode(e)),r.toLowerCase()}}),ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(g,I,z){var D=g("./keys"),S=g("./useragent"),A=null,s=0,h;function o(){h=!1;try{document.createComment("").addEventListener("test",function(){},{get passive(){return h={passive:!1},!0}})}catch{}}function n(){return h==null&&o(),h}function i(M,w,m){this.elem=M,this.type=w,this.callback=m}i.prototype.destroy=function(){e(this.elem,this.type,this.callback),this.elem=this.type=this.callback=void 0};var t=I.addListener=function(M,w,m,d){M.addEventListener(w,m,n()),d&&d.$toDestroy.push(new i(M,w,m))},e=I.removeListener=function(M,w,m){M.removeEventListener(w,m,n())};I.stopEvent=function(M){return I.stopPropagation(M),I.preventDefault(M),!1},I.stopPropagation=function(M){M.stopPropagation&&M.stopPropagation()},I.preventDefault=function(M){M.preventDefault&&M.preventDefault()},I.getButton=function(M){return M.type=="dblclick"?0:M.type=="contextmenu"||S.isMac&&M.ctrlKey&&!M.altKey&&!M.shiftKey?2:M.button},I.capture=function(M,w,m){var d=M&&M.ownerDocument||document;function _(T){w&&w(T),m&&m(T),e(d,"mousemove",w),e(d,"mouseup",_),e(d,"dragstart",_)}return t(d,"mousemove",w),t(d,"mouseup",_),t(d,"dragstart",_),_},I.addMouseWheelListener=function(M,w,m){t(M,"wheel",function(d){var _=.15,T=d.deltaX||0,R=d.deltaY||0;switch(d.deltaMode){case d.DOM_DELTA_PIXEL:d.wheelX=T*_,d.wheelY=R*_;break;case d.DOM_DELTA_LINE:var $=15;d.wheelX=T*$,d.wheelY=R*$;break;case d.DOM_DELTA_PAGE:var k=150;d.wheelX=T*k,d.wheelY=R*k;break}w(d)},m)},I.addMultiMouseDownListener=function(M,w,m,d,_){var T=0,R,$,k,v={2:"dblclick",3:"tripleclick",4:"quadclick"};function b(l){if(I.getButton(l)!==0?T=0:l.detail>1?(T++,T>4&&(T=1)):T=1,S.isIE){var C=Math.abs(l.clientX-R)>5||Math.abs(l.clientY-$)>5;(!k||C)&&(T=1),k&&clearTimeout(k),k=setTimeout(function(){k=null},w[T-1]||600),T==1&&(R=l.clientX,$=l.clientY)}if(l._clicks=T,m[d]("mousedown",l),T>4)T=0;else if(T>1)return m[d](v[T],l)}Array.isArray(M)||(M=[M]),M.forEach(function(l){t(l,"mousedown",b,_)})};function r(M){return 0|(M.ctrlKey?1:0)|(M.altKey?2:0)|(M.shiftKey?4:0)|(M.metaKey?8:0)}I.getModifierString=function(M){return D.KEY_MODS[r(M)]};function a(M,w,m){var d=r(w);if(!m&&w.code&&(m=D.$codeToKeyCode[w.code]||m),!S.isMac&&A){if(w.getModifierState&&(w.getModifierState("OS")||w.getModifierState("Win"))&&(d|=8),A.altGr)if((3&d)!=3)A.altGr=0;else return;if(m===18||m===17){var _=w.location;if(m===17&&_===1)A[m]==1&&(s=w.timeStamp);else if(m===18&&d===3&&_===2){var T=w.timeStamp-s;T<50&&(A.altGr=!0)}}}if(m in D.MODIFIER_KEYS&&(m=-1),!(!d&&m===13&&w.location===3&&(M(w,d,-m),w.defaultPrevented))){if(S.isChromeOS&&d&8){if(M(w,d,m),w.defaultPrevented)return;d&=-9}return!d&&!(m in D.FUNCTION_KEYS)&&!(m in D.PRINTABLE_KEYS)?!1:M(w,d,m)}}I.addCommandKeyListener=function(M,w,m){var d=null;t(M,"keydown",function(_){A[_.keyCode]=(A[_.keyCode]||0)+1;var T=a(w,_,_.keyCode);return d=_.defaultPrevented,T},m),t(M,"keypress",function(_){d&&(_.ctrlKey||_.altKey||_.shiftKey||_.metaKey)&&(I.stopEvent(_),d=null)},m),t(M,"keyup",function(_){A[_.keyCode]=null},m),A||(u(),t(window,"focus",u))};function u(){A=Object.create(null)}if(typeof window=="object"&&window.postMessage&&!S.isOldIE){var p=1;I.nextTick=function(M,w){w=w||window;var m="zero-timeout-message-"+p++,d=function(_){_.data==m&&(I.stopPropagation(_),e(w,"message",d),M())};t(w,"message",d),w.postMessage(m,"*")}}I.$idleBlocked=!1,I.onIdle=function(M,w){return setTimeout(function m(){I.$idleBlocked?setTimeout(m,100):M()},w)},I.$idleBlockId=null,I.blockIdle=function(M){I.$idleBlockId&&clearTimeout(I.$idleBlockId),I.$idleBlocked=!0,I.$idleBlockId=setTimeout(function(){I.$idleBlocked=!1},M||100)},I.nextFrame=typeof window=="object"&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),I.nextFrame?I.nextFrame=I.nextFrame.bind(window):I.nextFrame=function(M){setTimeout(M,17)}}),ace.define("ace/clipboard",["require","exports","module"],function(g,I,z){var D;z.exports={lineMode:!1,pasteCancelled:function(){return D&&D>Date.now()-50?!0:D=!1},cancel:function(){D=Date.now()}}}),ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/config","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/clipboard","ace/lib/keys"],function(g,I,z){var D=g("../lib/event"),S=g("../config").nls,A=g("../lib/useragent"),s=g("../lib/dom"),h=g("../lib/lang"),o=g("../clipboard"),n=A.isChrome<18,i=A.isIE,t=A.isChrome>63,e=400,r=g("../lib/keys"),a=r.KEY_MODS,u=A.isIOS,p=u?/\s/:/\n/,M=A.isMobile,w;w=function(m,d){var _=s.createElement("textarea");_.className="ace_text-input",_.setAttribute("wrap","off"),_.setAttribute("autocorrect","off"),_.setAttribute("autocapitalize","off"),_.setAttribute("spellcheck","false"),_.style.opacity="0",m.insertBefore(_,m.firstChild);var T=!1,R=!1,$=!1,k=!1,v="";M||(_.style.fontSize="1px");var b=!1,l=!1,C="",O=0,N=0,G=0,W=Number.MAX_SAFE_INTEGER,K=Number.MIN_SAFE_INTEGER,V=0;try{var Y=document.activeElement===_}catch{}this.setNumberOfExtraLines=function(he){if(W=Number.MAX_SAFE_INTEGER,K=Number.MIN_SAFE_INTEGER,he<0){V=0;return}V=he},this.setAriaOptions=function(he){if(he.activeDescendant?(_.setAttribute("aria-haspopup","true"),_.setAttribute("aria-autocomplete",he.inline?"both":"list"),_.setAttribute("aria-activedescendant",he.activeDescendant)):(_.setAttribute("aria-haspopup","false"),_.setAttribute("aria-autocomplete","both"),_.removeAttribute("aria-activedescendant")),he.role&&_.setAttribute("role",he.role),he.setLabel){_.setAttribute("aria-roledescription",S("text-input.aria-roledescription","editor"));var we="";if(d.$textInputAriaLabel&&(we+="".concat(d.$textInputAriaLabel,", ")),d.session){var Te=d.session.selection.cursor.row;we+=S("text-input.aria-label","Cursor at row $0",[Te+1])}_.setAttribute("aria-label",we)}},this.setAriaOptions({role:"textbox"}),D.addListener(_,"blur",function(he){l||(d.onBlur(he),Y=!1)},d),D.addListener(_,"focus",function(he){if(!l){if(Y=!0,A.isEdge)try{if(!document.hasFocus())return}catch{}d.onFocus(he),A.isEdge?setTimeout(Q):Q()}},d),this.$focusScroll=!1,this.focus=function(){if(this.setAriaOptions({setLabel:d.renderer.enableKeyboardAccessibility}),v||t||this.$focusScroll=="browser")return _.focus({preventScroll:!0});var he=_.style.top;_.style.position="fixed",_.style.top="0px";try{var we=_.getBoundingClientRect().top!=0}catch{return}var Te=[];if(we)for(var se=_.parentElement;se&&se.nodeType==1;)Te.push(se),se.setAttribute("ace_nocontext","true"),!se.parentElement&&se.getRootNode?se=se.getRootNode().host:se=se.parentElement;_.focus({preventScroll:!0}),we&&Te.forEach(function(We){We.removeAttribute("ace_nocontext")}),setTimeout(function(){_.style.position="",_.style.top=="0px"&&(_.style.top=he)},0)},this.blur=function(){_.blur()},this.isFocused=function(){return Y},d.on("beforeEndOperation",function(){var he=d.curOp,we=he&&he.command&&he.command.name;if(we!="insertstring"){var Te=we&&(he.docChanged||he.selectionChanged);$&&Te&&(C=_.value="",te()),Q()}});var re=function(he,we){for(var Te=we,se=1;se<=he-W&&se<2*V+1;se++)Te+=d.session.getLine(he-se).length+1;return Te},Q=u?function(he){if(!(!Y||T&&!he||k)){he||(he="");var we=`
 ab`+he+`cde fg
`;we!=_.value&&(_.value=C=we);var Te=4,se=4+(he.length||(d.selection.isEmpty()?0:1));(O!=Te||N!=se)&&_.setSelectionRange(Te,se),O=Te,N=se}}:function(){if(!($||k)&&!(!Y&&!me)){$=!0;var he=0,we=0,Te="";if(d.session){var se=d.selection,We=se.getRange(),Ge=se.cursor.row;Ge===K+1?(W=K+1,K=W+2*V):Ge===W-1?(K=W-1,W=K-2*V):(Ge<W-1||Ge>K+1)&&(W=Ge>V?Ge-V:0,K=Ge>V?Ge+V:2*V);for(var Ae=[],Ee=W;Ee<=K;Ee++)Ae.push(d.session.getLine(Ee));if(Te=Ae.join(`
`),he=re(We.start.row,We.start.column),we=re(We.end.row,We.end.column),We.start.row<W){var ke=d.session.getLine(W-1);he=We.start.row<W-1?0:he,we+=ke.length+1,Te=ke+`
`+Te}else if(We.end.row>K){var Oe=d.session.getLine(K+1);we=We.end.row>K+1?Oe.length:We.end.column,we+=Te.length+1,Te=Te+`
`+Oe}else M&&Ge>0&&(Te=`
`+Te,we+=1,he+=1);Te.length>e&&(he<e&&we<e?Te=Te.slice(0,e):(Te=`
`,he==we?he=we=0:(he=0,we=1)));var Fe=Te+`

`;Fe!=C&&(_.value=C=Fe,O=N=Fe.length)}if(me&&(O=_.selectionStart,N=_.selectionEnd),N!=we||O!=he||_.selectionEnd!=N)try{_.setSelectionRange(he,we),O=he,N=we}catch{}$=!1}};this.resetSelection=Q,Y&&d.onFocus();var ie=function(he){return he.selectionStart===0&&he.selectionEnd>=C.length&&he.value===C&&C&&he.selectionEnd!==N},ue=function(he){$||(T?T=!1:ie(_)?(d.selectAll(),Q()):M&&_.selectionStart!=O&&Q())},ge=null;this.setInputHandler=function(he){ge=he},this.getInputHandler=function(){return ge};var me=!1,ve=function(he,we){if(me&&(me=!1),R)return Q(),he&&d.onPaste(he),R=!1,"";for(var Te=_.selectionStart,se=_.selectionEnd,We=O,Ge=C.length-N,Ae=he,Ee=he.length-Te,ke=he.length-se,Oe=0;We>0&&C[Oe]==he[Oe];)Oe++,We--;for(Ae=Ae.slice(Oe),Oe=1;Ge>0&&C.length-Oe>O-1&&C[C.length-Oe]==he[he.length-Oe];)Oe++,Ge--;Ee-=Oe-1,ke-=Oe-1;var Fe=Ae.length-Oe+1;if(Fe<0&&(We=-Fe,Fe=0),Ae=Ae.slice(0,Fe),!we&&!Ae&&!Ee&&!We&&!Ge&&!ke)return"";k=!0;var f=!1;return A.isAndroid&&Ae==". "&&(Ae="  ",f=!0),Ae&&!We&&!Ge&&!Ee&&!ke||b?d.onTextInput(Ae):d.onTextInput(Ae,{extendLeft:We,extendRight:Ge,restoreStart:Ee,restoreEnd:ke}),k=!1,C=he,O=Te,N=se,G=ke,f?`
`:Ae},Ce=function(he){if($)return oe();if(he&&he.inputType){if(he.inputType=="historyUndo")return d.execCommand("undo");if(he.inputType=="historyRedo")return d.execCommand("redo")}var we=_.value,Te=ve(we,!0);(we.length>e+100||p.test(Te)||M&&O<1&&O==N)&&Q()},Me=function(he,we,Te){var se=he.clipboardData||window.clipboardData;if(!(!se||n)){var We=i||Te?"Text":"text/plain";try{return we?se.setData(We,we)!==!1:se.getData(We)}catch(Ge){if(!Te)return Me(Ge,we,!0)}}},Ie=function(he,we){var Te=d.getCopyText();if(!Te)return D.preventDefault(he);Me(he,Te)?(u&&(Q(Te),T=Te,setTimeout(function(){T=!1},10)),we?d.onCut():d.onCopy(),D.preventDefault(he)):(T=!0,_.value=Te,_.select(),setTimeout(function(){T=!1,Q(),we?d.onCut():d.onCopy()}))},ze=function(he){Ie(he,!0)},U=function(he){Ie(he,!1)},pe=function(he){var we=Me(he);o.pasteCancelled()||(typeof we=="string"?(we&&d.onPaste(we,he),A.isIE&&setTimeout(Q),D.preventDefault(he)):(_.value="",R=!0))};D.addCommandKeyListener(_,function(he,we,Te){if(!$)return d.onCommandKey(he,we,Te)},d),D.addListener(_,"select",ue,d),D.addListener(_,"input",Ce,d),D.addListener(_,"cut",ze,d),D.addListener(_,"copy",U,d),D.addListener(_,"paste",pe,d),(!("oncut"in _)||!("oncopy"in _)||!("onpaste"in _))&&D.addListener(m,"keydown",function(he){if(!(A.isMac&&!he.metaKey||!he.ctrlKey))switch(he.keyCode){case 67:U(he);break;case 86:pe(he);break;case 88:ze(he);break}},d);var le=function(he){if(!($||!d.onCompositionStart||d.$readOnly)&&($={},!b)){he.data&&($.useTextareaForIME=!1),setTimeout(oe,0),d._signal("compositionStart"),d.on("mousedown",ce);var we=d.getSelectionRange();we.end.row=we.start.row,we.end.column=we.start.column,$.markerRange=we,$.selectionStart=O,d.onCompositionStart($),$.useTextareaForIME?(C=_.value="",O=0,N=0):(_.msGetInputContext&&($.context=_.msGetInputContext()),_.getInputContext&&($.context=_.getInputContext()))}},oe=function(){if(!(!$||!d.onCompositionUpdate||d.$readOnly)){if(b)return ce();if($.useTextareaForIME)d.onCompositionUpdate(_.value);else{var he=_.value;ve(he),$.markerRange&&($.context&&($.markerRange.start.column=$.selectionStart=$.context.compositionStartOffset),$.markerRange.end.column=$.markerRange.start.column+N-$.selectionStart+G)}}},te=function(he){!d.onCompositionEnd||d.$readOnly||($=!1,d.onCompositionEnd(),d.off("mousedown",ce),he&&Ce())};function ce(){l=!0,_.blur(),_.focus(),l=!1}var ye=h.delayedCall(oe,50).schedule.bind(null,null);function _e(he){he.keyCode==27&&_.value.length<_.selectionStart&&($||(C=_.value),O=N=-1,Q()),ye()}D.addListener(_,"compositionstart",le,d),D.addListener(_,"compositionupdate",oe,d),D.addListener(_,"keyup",_e,d),D.addListener(_,"keydown",ye,d),D.addListener(_,"compositionend",te,d),this.getElement=function(){return _},this.setCommandMode=function(he){b=he,_.readOnly=!1},this.setReadOnly=function(he){b||(_.readOnly=he)},this.setCopyWithEmptySelection=function(he){},this.onContextMenu=function(he){me=!0,Q(),d._emit("nativecontextmenu",{target:d,domEvent:he}),this.moveToMouse(he,!0)},this.moveToMouse=function(he,we){v||(v=_.style.cssText),_.style.cssText=(we?"z-index:100000;":"")+(A.isIE?"opacity:0.1;":"")+"text-indent: -"+(O+N)*d.renderer.characterWidth*.5+"px;";var Te=d.container.getBoundingClientRect(),se=s.computedStyle(d.container),We=Te.top+(parseInt(se.borderTopWidth)||0),Ge=Te.left+(parseInt(Te.borderLeftWidth)||0),Ae=Te.bottom-We-_.clientHeight-2,Ee=function(ke){s.translate(_,ke.clientX-Ge-2,Math.min(ke.clientY-We-2,Ae))};Ee(he),he.type=="mousedown"&&(d.renderer.$isMousePressed=!0,clearTimeout(fe),A.isWin&&D.capture(d.container,Ee,be))},this.onContextMenuClose=be;var fe;function be(){clearTimeout(fe),fe=setTimeout(function(){v&&(_.style.cssText=v,v=""),d.renderer.$isMousePressed=!1,d.renderer.$keepTextAreaAtCursor&&d.renderer.$moveTextAreaToCursor()},0)}var $e=function(he){d.textInput.onContextMenu(he),be()};D.addListener(_,"mouseup",$e,d),D.addListener(_,"mousedown",function(he){he.preventDefault(),be()},d),D.addListener(d.renderer.scroller,"contextmenu",$e,d),D.addListener(_,"contextmenu",$e,d),u&&Re(m,d,_);function Re(he,we,Te){var se=null,We=!1;Te.addEventListener("keydown",function(Ae){se&&clearTimeout(se),We=!0},!0),Te.addEventListener("keyup",function(Ae){se=setTimeout(function(){We=!1},100)},!0);var Ge=function(Ae){if(document.activeElement===Te&&!(We||$||we.$mouseHandler.isMousePressed)&&!T){var Ee=Te.selectionStart,ke=Te.selectionEnd,Oe=null,Fe=0;if(Ee==0?Oe=r.up:Ee==1?Oe=r.home:ke>N&&C[ke]==`
`?Oe=r.end:Ee<O&&C[Ee-1]==" "?(Oe=r.left,Fe=a.option):Ee<O||Ee==O&&N!=O&&Ee==ke?Oe=r.left:ke>N&&C.slice(0,ke).split(`
`).length>2?Oe=r.down:ke>N&&C[ke-1]==" "?(Oe=r.right,Fe=a.option):(ke>N||ke==N&&N!=O&&Ee==ke)&&(Oe=r.right),Ee!==ke&&(Fe|=a.shift),Oe){var f=we.onCommandKey({},Fe,Oe);if(!f&&we.commands){Oe=r.keyCodeToString(Oe);var Ye=we.commands.findKeyCommand(Fe,Oe);Ye&&we.execCommand(Ye)}O=Ee,N=ke,Q("")}}};document.addEventListener("selectionchange",Ge),we.on("destroy",function(){document.removeEventListener("selectionchange",Ge)})}this.destroy=function(){_.parentElement&&_.parentElement.removeChild(_)}},I.TextInput=w,I.$setUserAgentForTests=function(m,d){M=m,u=d}}),ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/useragent"],function(g,I,z){var D=g("../lib/useragent"),S=0,A=550,s=function(){function n(i){i.$clickSelection=null;var t=i.editor;t.setDefaultHandler("mousedown",this.onMouseDown.bind(i)),t.setDefaultHandler("dblclick",this.onDoubleClick.bind(i)),t.setDefaultHandler("tripleclick",this.onTripleClick.bind(i)),t.setDefaultHandler("quadclick",this.onQuadClick.bind(i)),t.setDefaultHandler("mousewheel",this.onMouseWheel.bind(i));var e=["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"];e.forEach(function(r){i[r]=this[r]},this),i.selectByLines=this.extendSelectionBy.bind(i,"getLineRange"),i.selectByWords=this.extendSelectionBy.bind(i,"getWordRange")}return n.prototype.onMouseDown=function(i){var t=i.inSelection(),e=i.getDocumentPosition();this.mousedownEvent=i;var r=this.editor,a=i.getButton();if(a!==0){var u=r.getSelectionRange(),p=u.isEmpty();(p||a==1)&&r.selection.moveToPosition(e),a==2&&(r.textInput.onContextMenu(i.domEvent),D.isMozilla||i.preventDefault());return}if(this.mousedownEvent.time=Date.now(),t&&!r.isFocused()&&(r.focus(),this.$focusTimeout&&!this.$clickSelection&&!r.inMultiSelectMode)){this.setState("focusWait"),this.captureMouse(i);return}return this.captureMouse(i),this.startSelect(e,i.domEvent._clicks>1),i.preventDefault()},n.prototype.startSelect=function(i,t){i=i||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var e=this.editor;this.mousedownEvent&&(this.mousedownEvent.getShiftKey()?e.selection.selectToPosition(i):t||e.selection.moveToPosition(i),t||this.select(),e.setStyle("ace_selecting"),this.setState("select"))},n.prototype.select=function(){var i,t=this.editor,e=t.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var r=this.$clickSelection.comparePoint(e);if(r==-1)i=this.$clickSelection.end;else if(r==1)i=this.$clickSelection.start;else{var a=o(this.$clickSelection,e);e=a.cursor,i=a.anchor}t.selection.setSelectionAnchor(i.row,i.column)}t.selection.selectToPosition(e),t.renderer.scrollCursorIntoView()},n.prototype.extendSelectionBy=function(i){var t,e=this.editor,r=e.renderer.screenToTextCoordinates(this.x,this.y),a=e.selection[i](r.row,r.column);if(this.$clickSelection){var u=this.$clickSelection.comparePoint(a.start),p=this.$clickSelection.comparePoint(a.end);if(u==-1&&p<=0)t=this.$clickSelection.end,(a.end.row!=r.row||a.end.column!=r.column)&&(r=a.start);else if(p==1&&u>=0)t=this.$clickSelection.start,(a.start.row!=r.row||a.start.column!=r.column)&&(r=a.end);else if(u==-1&&p==1)r=a.end,t=a.start;else{var M=o(this.$clickSelection,r);r=M.cursor,t=M.anchor}e.selection.setSelectionAnchor(t.row,t.column)}e.selection.selectToPosition(r),e.renderer.scrollCursorIntoView()},n.prototype.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting")},n.prototype.focusWait=function(){var i=h(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),t=Date.now();(i>S||t-this.mousedownEvent.time>this.$focusTimeout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},n.prototype.onDoubleClick=function(i){var t=i.getDocumentPosition(),e=this.editor,r=e.session,a=r.getBracketRange(t);a?(a.isEmpty()&&(a.start.column--,a.end.column++),this.setState("select")):(a=e.selection.getWordRange(t.row,t.column),this.setState("selectByWords")),this.$clickSelection=a,this.select()},n.prototype.onTripleClick=function(i){var t=i.getDocumentPosition(),e=this.editor;this.setState("selectByLines");var r=e.getSelectionRange();r.isMultiLine()&&r.contains(t.row,t.column)?(this.$clickSelection=e.selection.getLineRange(r.start.row),this.$clickSelection.end=e.selection.getLineRange(r.end.row).end):this.$clickSelection=e.selection.getLineRange(t.row),this.select()},n.prototype.onQuadClick=function(i){var t=this.editor;t.selectAll(),this.$clickSelection=t.getSelectionRange(),this.setState("selectAll")},n.prototype.onMouseWheel=function(i){if(!i.getAccelKey()){i.getShiftKey()&&i.wheelY&&!i.wheelX&&(i.wheelX=i.wheelY,i.wheelY=0);var t=this.editor;this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0});var e=this.$lastScroll,r=i.domEvent.timeStamp,a=r-e.t,u=a?i.wheelX/a:e.vx,p=a?i.wheelY/a:e.vy;a<A&&(u=(u+e.vx)/2,p=(p+e.vy)/2);var M=Math.abs(u/p),w=!1;if(M>=1&&t.renderer.isScrollableBy(i.wheelX*i.speed,0)&&(w=!0),M<=1&&t.renderer.isScrollableBy(0,i.wheelY*i.speed)&&(w=!0),w)e.allowed=r;else if(r-e.allowed<A){var m=Math.abs(u)<=1.5*Math.abs(e.vx)&&Math.abs(p)<=1.5*Math.abs(e.vy);m?(w=!0,e.allowed=r):e.allowed=0}if(e.t=r,e.vx=u,e.vy=p,w)return t.renderer.scrollBy(i.wheelX*i.speed,i.wheelY*i.speed),i.stop()}},n}();s.prototype.selectEnd=s.prototype.selectByLinesEnd,s.prototype.selectAllEnd=s.prototype.selectByLinesEnd,s.prototype.selectByWordsEnd=s.prototype.selectByLinesEnd,I.DefaultHandlers=s;function h(n,i,t,e){return Math.sqrt(Math.pow(t-n,2)+Math.pow(e-i,2))}function o(n,i){if(n.start.row==n.end.row)var t=2*i.column-n.start.column-n.end.column;else if(n.start.row==n.end.row-1&&!n.start.column&&!n.end.column)var t=i.column-4;else var t=2*i.row-n.start.row-n.end.row;return t<0?{cursor:n.start,anchor:n.end}:{cursor:n.end,anchor:n.start}}}),ace.define("ace/lib/scroll",["require","exports","module"],function(g,I,z){I.preventParentScroll=function(S){S.stopPropagation();var A=S.currentTarget,s=A.scrollHeight>A.clientHeight;s||S.preventDefault()}}),ace.define("ace/tooltip",["require","exports","module","ace/lib/dom","ace/lib/event","ace/range","ace/lib/scroll"],function(g,I,z){var D=this&&this.__extends||function(){var r=function(a,u){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,M){p.__proto__=M}||function(p,M){for(var w in M)Object.prototype.hasOwnProperty.call(M,w)&&(p[w]=M[w])},r(a,u)};return function(a,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");r(a,u);function p(){this.constructor=a}a.prototype=u===null?Object.create(u):(p.prototype=u.prototype,new p)}}(),S=this&&this.__values||function(r){var a=typeof Symbol=="function"&&Symbol.iterator,u=a&&r[a],p=0;if(u)return u.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&p>=r.length&&(r=void 0),{value:r&&r[p++],done:!r}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")},A=g("./lib/dom");g("./lib/event");var s=g("./range").Range,h=g("./lib/scroll").preventParentScroll,o="ace_tooltip",n=function(){function r(a){this.isOpen=!1,this.$element=null,this.$parentNode=a}return r.prototype.$init=function(){return this.$element=A.createElement("div"),this.$element.className=o,this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},r.prototype.getElement=function(){return this.$element||this.$init()},r.prototype.setText=function(a){this.getElement().textContent=a},r.prototype.setHtml=function(a){this.getElement().innerHTML=a},r.prototype.setPosition=function(a,u){this.getElement().style.left=a+"px",this.getElement().style.top=u+"px"},r.prototype.setClassName=function(a){A.addCssClass(this.getElement(),a)},r.prototype.setTheme=function(a){this.$element.className=o+" "+(a.isDark?"ace_dark ":"")+(a.cssClass||"")},r.prototype.show=function(a,u,p){a!=null&&this.setText(a),u!=null&&p!=null&&this.setPosition(u,p),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},r.prototype.hide=function(a){this.isOpen&&(this.getElement().style.display="none",this.getElement().className=o,this.isOpen=!1)},r.prototype.getHeight=function(){return this.getElement().offsetHeight},r.prototype.getWidth=function(){return this.getElement().offsetWidth},r.prototype.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)},r}(),i=function(){function r(){this.popups=[]}return r.prototype.addPopup=function(a){this.popups.push(a),this.updatePopups()},r.prototype.removePopup=function(a){var u=this.popups.indexOf(a);u!==-1&&(this.popups.splice(u,1),this.updatePopups())},r.prototype.updatePopups=function(){var a,u,p,M;this.popups.sort(function(v,b){return b.priority-v.priority});var w=[];try{for(var m=S(this.popups),d=m.next();!d.done;d=m.next()){var _=d.value,T=!0;try{for(var R=(p=void 0,S(w)),$=R.next();!$.done;$=R.next()){var k=$.value;if(this.doPopupsOverlap(k,_)){T=!1;break}}}catch(v){p={error:v}}finally{try{$&&!$.done&&(M=R.return)&&M.call(R)}finally{if(p)throw p.error}}T?w.push(_):_.hide()}}catch(v){a={error:v}}finally{try{d&&!d.done&&(u=m.return)&&u.call(m)}finally{if(a)throw a.error}}},r.prototype.doPopupsOverlap=function(a,u){var p=a.getElement().getBoundingClientRect(),M=u.getElement().getBoundingClientRect();return p.left<M.right&&p.right>M.left&&p.top<M.bottom&&p.bottom>M.top},r}(),t=new i;I.popupManager=t,I.Tooltip=n;var e=function(r){D(a,r);function a(u){u===void 0&&(u=document.body);var p=r.call(this,u)||this;p.timeout=void 0,p.lastT=0,p.idleTime=350,p.lastEvent=void 0,p.onMouseOut=p.onMouseOut.bind(p),p.onMouseMove=p.onMouseMove.bind(p),p.waitForHover=p.waitForHover.bind(p),p.hide=p.hide.bind(p);var M=p.getElement();return M.style.whiteSpace="pre-wrap",M.style.pointerEvents="auto",M.addEventListener("mouseout",p.onMouseOut),M.tabIndex=-1,M.addEventListener("blur",(function(){M.contains(document.activeElement)||this.hide()}).bind(p)),M.addEventListener("wheel",h),p}return a.prototype.addToEditor=function(u){u.on("mousemove",this.onMouseMove),u.on("mousedown",this.hide),u.renderer.getMouseEventTarget().addEventListener("mouseout",this.onMouseOut,!0)},a.prototype.removeFromEditor=function(u){u.off("mousemove",this.onMouseMove),u.off("mousedown",this.hide),u.renderer.getMouseEventTarget().removeEventListener("mouseout",this.onMouseOut,!0),this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},a.prototype.onMouseMove=function(u,p){this.lastEvent=u,this.lastT=Date.now();var M=p.$mouseHandler.isMousePressed;if(this.isOpen){var w=this.lastEvent&&this.lastEvent.getDocumentPosition();(!this.range||!this.range.contains(w.row,w.column)||M||this.isOutsideOfText(this.lastEvent))&&this.hide()}this.timeout||M||(this.lastEvent=u,this.timeout=setTimeout(this.waitForHover,this.idleTime))},a.prototype.waitForHover=function(){this.timeout&&clearTimeout(this.timeout);var u=Date.now()-this.lastT;if(this.idleTime-u>10){this.timeout=setTimeout(this.waitForHover,this.idleTime-u);return}this.timeout=null,this.lastEvent&&!this.isOutsideOfText(this.lastEvent)&&this.$gatherData(this.lastEvent,this.lastEvent.editor)},a.prototype.isOutsideOfText=function(u){var p=u.editor,M=u.getDocumentPosition(),w=p.session.getLine(M.row);if(M.column==w.length){var m=p.renderer.pixelToScreenCoordinates(u.clientX,u.clientY),d=p.session.documentToScreenPosition(M.row,M.column);if(d.column!=m.column||d.row!=m.row)return!0}return!1},a.prototype.setDataProvider=function(u){this.$gatherData=u},a.prototype.showForRange=function(u,p,M,w){var m=10;if(!(w&&w!=this.lastEvent)&&!(this.isOpen&&document.activeElement==this.getElement())){var d=u.renderer;this.isOpen||(t.addPopup(this),this.$registerCloseEvents(),this.setTheme(d.theme)),this.isOpen=!0,this.addMarker(p,u.session),this.range=s.fromPoints(p.start,p.end);var _=d.textToScreenCoordinates(p.start.row,p.start.column),T=d.scroller.getBoundingClientRect();_.pageX<T.left&&(_.pageX=T.left);var R=this.getElement();R.innerHTML="",R.appendChild(M),R.style.maxHeight="",R.style.display="block";var $=R.clientHeight,k=R.clientWidth,v=window.innerHeight-_.pageY-d.lineHeight,b=!0;_.pageY-$<0&&_.pageY<v&&(b=!1),R.style.maxHeight=(b?_.pageY:v)-m+"px",R.style.top=b?"":_.pageY+d.lineHeight+"px",R.style.bottom=b?window.innerHeight-_.pageY+"px":"",R.style.left=Math.min(_.pageX,window.innerWidth-k-m)+"px"}},a.prototype.addMarker=function(u,p){this.marker&&this.$markerSession.removeMarker(this.marker),this.$markerSession=p,this.marker=p&&p.addMarker(u,"ace_highlight-marker","text")},a.prototype.hide=function(u){!u&&document.activeElement==this.getElement()||u&&u.target&&(u.type!="keydown"||u.ctrlKey||u.metaKey)&&this.$element.contains(u.target)||(this.lastEvent=null,this.timeout&&clearTimeout(this.timeout),this.timeout=null,this.addMarker(null),this.isOpen&&(this.$removeCloseEvents(),this.getElement().style.display="none",this.isOpen=!1,t.removePopup(this)))},a.prototype.$registerCloseEvents=function(){window.addEventListener("keydown",this.hide,!0),window.addEventListener("wheel",this.hide,!0),window.addEventListener("mousedown",this.hide,!0)},a.prototype.$removeCloseEvents=function(){window.removeEventListener("keydown",this.hide,!0),window.removeEventListener("wheel",this.hide,!0),window.removeEventListener("mousedown",this.hide,!0)},a.prototype.onMouseOut=function(u){this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.lastEvent=null,this.isOpen&&(!u.relatedTarget||this.getElement().contains(u.relatedTarget)||u&&u.currentTarget.contains(u.relatedTarget)||u.relatedTarget.classList.contains("ace_content")||this.hide())},a}(n);I.HoverTooltip=e}),ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/tooltip","ace/config","ace/lib/lang"],function(g,I,z){var D=this&&this.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,u){a.__proto__=u}||function(a,u){for(var p in u)Object.prototype.hasOwnProperty.call(u,p)&&(a[p]=u[p])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function a(){this.constructor=e}e.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}}(),S=this&&this.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],a=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&a>=t.length&&(t=void 0),{value:t&&t[a++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},A=g("../lib/dom"),s=g("../lib/event"),h=g("../tooltip").Tooltip,o=g("../config").nls;g("../lib/lang");function n(t){var e=t.editor,r=e.renderer.$gutterLayer,a=new i(e);t.editor.setDefaultHandler("guttermousedown",function(d){if(!(!e.isFocused()||d.getButton()!=0)){var _=r.getRegion(d);if(_!="foldWidgets"){var T=d.getDocumentPosition().row,R=e.session.selection;if(d.getShiftKey())R.selectTo(T,0);else{if(d.domEvent.detail==2)return e.selectAll(),d.preventDefault();t.$clickSelection=e.selection.getLineRange(T)}return t.setState("selectByLines"),t.captureMouse(d),d.preventDefault()}}});var u,p;function M(){var d=p.getDocumentPosition().row,_=e.session.getLength();if(d==_){var T=e.renderer.pixelToScreenCoordinates(0,p.y).row,R=p.$pos;if(T>e.session.documentToScreenRow(R.row,R.column))return w()}if(a.showTooltip(d),!!a.isOpen)if(e.on("mousewheel",w),t.$tooltipFollowsMouse)m(p);else{var $=p.getGutterRow(),k=r.$lines.get($);if(k){var v=k.element.querySelector(".ace_gutter_annotation"),b=v.getBoundingClientRect(),l=a.getElement().style;l.left=b.right+"px",l.top=b.bottom+"px"}else m(p)}}function w(){u&&(u=clearTimeout(u)),a.isOpen&&(a.hideTooltip(),e.off("mousewheel",w))}function m(d){a.setPosition(d.x,d.y)}t.editor.setDefaultHandler("guttermousemove",function(d){var _=d.domEvent.target||d.domEvent.srcElement;if(A.hasCssClass(_,"ace_fold-widget"))return w();a.isOpen&&t.$tooltipFollowsMouse&&m(d),p=d,!u&&(u=setTimeout(function(){u=null,p&&!t.isMousePressed?M():w()},50))}),s.addListener(e.renderer.$gutter,"mouseout",function(d){p=null,!(!a.isOpen||u)&&(u=setTimeout(function(){u=null,w()},50))},e),e.on("changeSession",w),e.on("input",w)}I.GutterHandler=n;var i=function(t){D(e,t);function e(r){var a=t.call(this,r.container)||this;return a.editor=r,a}return e.prototype.setPosition=function(r,a){var u=window.innerWidth||document.documentElement.clientWidth,p=window.innerHeight||document.documentElement.clientHeight,M=this.getWidth(),w=this.getHeight();r+=15,a+=15,r+M>u&&(r-=r+M-u),a+w>p&&(a-=20+w),h.prototype.setPosition.call(this,r,a)},Object.defineProperty(e,"annotationLabels",{get:function(){return{error:{singular:o("gutter-tooltip.aria-label.error.singular","error"),plural:o("gutter-tooltip.aria-label.error.plural","errors")},security:{singular:o("gutter-tooltip.aria-label.security.singular","security finding"),plural:o("gutter-tooltip.aria-label.security.plural","security findings")},warning:{singular:o("gutter-tooltip.aria-label.warning.singular","warning"),plural:o("gutter-tooltip.aria-label.warning.plural","warnings")},info:{singular:o("gutter-tooltip.aria-label.info.singular","information message"),plural:o("gutter-tooltip.aria-label.info.plural","information messages")},hint:{singular:o("gutter-tooltip.aria-label.hint.singular","suggestion"),plural:o("gutter-tooltip.aria-label.hint.plural","suggestions")}}},enumerable:!1,configurable:!0}),e.prototype.showTooltip=function(r){var a,u=this.editor.renderer.$gutterLayer,p=u.$annotations[r],M;p?M={displayText:Array.from(p.displayText),type:Array.from(p.type)}:M={displayText:[],type:[]};var w=u.session.getFoldLine(r);if(w&&u.$showFoldedAnnotations){for(var m={error:[],security:[],warning:[],info:[],hint:[]},d={error:1,security:2,warning:3,info:4,hint:5},_,T=r+1;T<=w.end.row;T++)if(u.$annotations[T])for(var R=0;R<u.$annotations[T].text.length;R++){var $=u.$annotations[T].type[R];m[$].push(u.$annotations[T].text[R]),(!_||d[$]<d[_])&&(_=$)}if(["error","security","warning"].includes(_)){var k="".concat(e.annotationsToSummaryString(m)," in folded code.");M.displayText.push(k),M.type.push(_+"_fold")}}if(M.displayText.length===0)return this.hide();for(var v={error:[],security:[],warning:[],info:[],hint:[]},b=u.$useSvgGutterIcons?"ace_icon_svg":"ace_icon",T=0;T<M.displayText.length;T++){var l=A.createElement("span"),C=A.createElement("span");(a=C.classList).add.apply(a,["ace_".concat(M.type[T]),b]),C.setAttribute("aria-label","".concat(e.annotationLabels[M.type[T].replace("_fold","")].singular)),C.setAttribute("role","img"),C.appendChild(A.createTextNode(" ")),l.appendChild(C),l.appendChild(A.createTextNode(M.displayText[T])),l.appendChild(A.createElement("br")),v[M.type[T].replace("_fold","")].push(l)}var O=this.getElement();A.removeChildren(O),v.error.forEach(function(N){return O.appendChild(N)}),v.security.forEach(function(N){return O.appendChild(N)}),v.warning.forEach(function(N){return O.appendChild(N)}),v.info.forEach(function(N){return O.appendChild(N)}),v.hint.forEach(function(N){return O.appendChild(N)}),O.setAttribute("aria-live","polite"),this.isOpen||(this.setTheme(this.editor.renderer.theme),this.setClassName("ace_gutter-tooltip")),this.show(),this.editor._signal("showGutterTooltip",this)},e.prototype.hideTooltip=function(){this.$element.removeAttribute("aria-live"),this.hide(),this.editor._signal("hideGutterTooltip",this)},e.annotationsToSummaryString=function(r){var a,u,p=[],M=["error","security","warning","info","hint"];try{for(var w=S(M),m=w.next();!m.done;m=w.next()){var d=m.value;if(r[d].length){var _=r[d].length===1?e.annotationLabels[d].singular:e.annotationLabels[d].plural;p.push("".concat(r[d].length," ").concat(_))}}}catch(T){a={error:T}}finally{try{m&&!m.done&&(u=w.return)&&u.call(w)}finally{if(a)throw a.error}}return p.join(", ")},e}(h);I.GutterTooltip=i}),ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(g,I,z){var D=g("../lib/event"),S=g("../lib/useragent"),A=function(){function s(h,o){this.speed,this.wheelX,this.wheelY,this.domEvent=h,this.editor=o,this.x=this.clientX=h.clientX,this.y=this.clientY=h.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1}return s.prototype.stopPropagation=function(){D.stopPropagation(this.domEvent),this.propagationStopped=!0},s.prototype.preventDefault=function(){D.preventDefault(this.domEvent),this.defaultPrevented=!0},s.prototype.stop=function(){this.stopPropagation(),this.preventDefault()},s.prototype.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},s.prototype.getGutterRow=function(){var h=this.getDocumentPosition().row,o=this.editor.session.documentToScreenRow(h,0),n=this.editor.session.documentToScreenRow(this.editor.renderer.$gutterLayer.$lines.get(0).row,0);return o-n},s.prototype.inSelection=function(){if(this.$inSelection!==null)return this.$inSelection;var h=this.editor,o=h.getSelectionRange();if(o.isEmpty())this.$inSelection=!1;else{var n=this.getDocumentPosition();this.$inSelection=o.contains(n.row,n.column)}return this.$inSelection},s.prototype.getButton=function(){return D.getButton(this.domEvent)},s.prototype.getShiftKey=function(){return this.domEvent.shiftKey},s.prototype.getAccelKey=function(){return S.isMac?this.domEvent.metaKey:this.domEvent.ctrlKey},s}();I.MouseEvent=A}),ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(g,I,z){var D=g("../lib/dom"),S=g("../lib/event"),A=g("../lib/useragent"),s=200,h=200,o=5;function n(t){var e=t.editor,r=D.createElement("div");r.style.cssText="top:-100px;position:absolute;z-index:2147483647;opacity:0.5",r.textContent="";var a=["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"];a.forEach(function(re){t[re]=this[re]},this),e.on("mousedown",this.onMouseDown.bind(t));var u=e.container,p,M,w,m,d,_,T=0,R,$,k,v,b;this.onDragStart=function(re){if(this.cancelDrag||!u.draggable){var Q=this;return setTimeout(function(){Q.startSelect(),Q.captureMouse(re)},0),re.preventDefault()}d=e.getSelectionRange();var ie=re.dataTransfer;ie.effectAllowed=e.getReadOnly()?"copy":"copyMove",e.container.appendChild(r),ie.setDragImage&&ie.setDragImage(r,0,0),setTimeout(function(){e.container.removeChild(r)}),ie.clearData(),ie.setData("Text",e.session.getTextRange()),$=!0,this.setState("drag")},this.onDragEnd=function(re){if(u.draggable=!1,$=!1,this.setState(null),!e.getReadOnly()){var Q=re.dataTransfer.dropEffect;!R&&Q=="move"&&e.session.remove(e.getSelectionRange()),e.$resetCursorStyle()}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(re){if(!(e.getReadOnly()||!V(re.dataTransfer)))return M=re.clientX,w=re.clientY,p||N(),T++,re.dataTransfer.dropEffect=R=Y(re),S.preventDefault(re)},this.onDragOver=function(re){if(!(e.getReadOnly()||!V(re.dataTransfer)))return M=re.clientX,w=re.clientY,p||(N(),T++),W!==null&&(W=null),re.dataTransfer.dropEffect=R=Y(re),S.preventDefault(re)},this.onDragLeave=function(re){if(T--,T<=0&&p)return G(),R=null,S.preventDefault(re)},this.onDrop=function(re){if(_){var Q=re.dataTransfer;if($)switch(R){case"move":d.contains(_.row,_.column)?d={start:_,end:_}:d=e.moveText(d,_);break;case"copy":d=e.moveText(d,_,!0);break}else{var ie=Q.getData("Text");d={start:_,end:e.session.insert(_,ie)},e.focus(),R=null}return G(),S.preventDefault(re)}},S.addListener(u,"dragstart",this.onDragStart.bind(t),e),S.addListener(u,"dragend",this.onDragEnd.bind(t),e),S.addListener(u,"dragenter",this.onDragEnter.bind(t),e),S.addListener(u,"dragover",this.onDragOver.bind(t),e),S.addListener(u,"dragleave",this.onDragLeave.bind(t),e),S.addListener(u,"drop",this.onDrop.bind(t),e);function l(re,Q){var ie=Date.now(),ue=!Q||re.row!=Q.row,ge=!Q||re.column!=Q.column;if(!v||ue||ge)e.moveCursorToPosition(re),v=ie,b={x:M,y:w};else{var me=i(b.x,b.y,M,w);me>o?v=null:ie-v>=h&&(e.renderer.scrollCursorIntoView(),v=null)}}function C(re,Q){var ie=Date.now(),ue=e.renderer.layerConfig.lineHeight,ge=e.renderer.layerConfig.characterWidth,me=e.renderer.scroller.getBoundingClientRect(),ve={x:{left:M-me.left,right:me.right-M},y:{top:w-me.top,bottom:me.bottom-w}},Ce=Math.min(ve.x.left,ve.x.right),Me=Math.min(ve.y.top,ve.y.bottom),Ie={row:re.row,column:re.column};Ce/ge<=2&&(Ie.column+=ve.x.left<ve.x.right?-3:2),Me/ue<=1&&(Ie.row+=ve.y.top<ve.y.bottom?-1:1);var ze=re.row!=Ie.row,U=re.column!=Ie.column,pe=!Q||re.row!=Q.row;ze||U&&!pe?k?ie-k>=s&&e.renderer.scrollCursorIntoView(Ie):k=ie:k=null}function O(){var re=_;_=e.renderer.screenToTextCoordinates(M,w),l(_,re),C(_,re)}function N(){d=e.selection.toOrientedRange(),p=e.session.addMarker(d,"ace_selection",e.getSelectionStyle()),e.clearSelection(),e.isFocused()&&e.renderer.$cursorLayer.setBlinking(!1),clearInterval(m),O(),m=setInterval(O,20),T=0,S.addListener(document,"mousemove",K)}function G(){clearInterval(m),e.session.removeMarker(p),p=null,e.selection.fromOrientedRange(d),e.isFocused()&&!$&&e.$resetCursorStyle(),d=null,_=null,T=0,k=null,v=null,S.removeListener(document,"mousemove",K)}var W=null;function K(){W==null&&(W=setTimeout(function(){W!=null&&p&&G()},20))}function V(re){var Q=re.types;return!Q||Array.prototype.some.call(Q,function(ie){return ie=="text/plain"||ie=="Text"})}function Y(re){var Q=["copy","copymove","all","uninitialized"],ie=["move","copymove","linkmove","all","uninitialized"],ue=A.isMac?re.altKey:re.ctrlKey,ge="uninitialized";try{ge=re.dataTransfer.effectAllowed.toLowerCase()}catch{}var me="none";return ue&&Q.indexOf(ge)>=0?me="copy":ie.indexOf(ge)>=0?me="move":Q.indexOf(ge)>=0&&(me="copy"),me}}(function(){this.dragWait=function(){var t=Date.now()-this.mousedownEvent.time;t>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){var t=this.editor.container;t.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(t){this.editor.$resetCursorStyle(),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var t=this.editor,e=t.container;e.draggable=!0,t.renderer.$cursorLayer.setBlinking(!1),t.setStyle("ace_dragging");var r=A.isWin?"default":"move";t.renderer.setCursorStyle(r),this.setState("dragReady")},this.onMouseDrag=function(t){var e=this.editor.container;if(A.isIE&&this.state=="dragReady"){var r=i(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);r>3&&e.dragDrop()}if(this.state==="dragWait"){var r=i(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);r>0&&(e.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))}},this.onMouseDown=function(t){if(this.$dragEnabled){this.mousedownEvent=t;var e=this.editor,r=t.inSelection(),a=t.getButton(),u=t.domEvent.detail||1;if(u===1&&a===0&&r){if(t.editor.inMultiSelectMode&&(t.getAccelKey()||t.getShiftKey()))return;this.mousedownEvent.time=Date.now();var p=t.domEvent.target||t.domEvent.srcElement;if("unselectable"in p&&(p.unselectable="on"),e.getDragDelay()){if(A.isWebKit){this.cancelDrag=!0;var M=e.container;M.draggable=!0}this.setState("dragWait")}else this.startDrag();this.captureMouse(t,this.onMouseDrag.bind(this)),t.defaultPrevented=!0}}}}).call(n.prototype);function i(t,e,r,a){return Math.sqrt(Math.pow(r-t,2)+Math.pow(a-e,2))}I.DragdropHandler=n}),ace.define("ace/mouse/touch_handler",["require","exports","module","ace/mouse/mouse_event","ace/lib/event","ace/lib/dom"],function(g,I,z){var D=g("./mouse_event").MouseEvent,S=g("../lib/event"),A=g("../lib/dom");I.addTouchListeners=function(s,h){var o="scroll",n,i,t,e,r,a,u=0,p,M=0,w=0,m=0,d,_;function T(){var l=window.navigator&&window.navigator.clipboard,C=!1,O=function(){var W=h.getCopyText(),K=h.session.getUndoManager().hasUndo();_.replaceChild(A.buildDom(C?["span",!W&&N("selectall")&&["span",{class:"ace_mobile-button",action:"selectall"},"Select All"],W&&N("copy")&&["span",{class:"ace_mobile-button",action:"copy"},"Copy"],W&&N("cut")&&["span",{class:"ace_mobile-button",action:"cut"},"Cut"],l&&N("paste")&&["span",{class:"ace_mobile-button",action:"paste"},"Paste"],K&&N("undo")&&["span",{class:"ace_mobile-button",action:"undo"},"Undo"],N("find")&&["span",{class:"ace_mobile-button",action:"find"},"Find"],N("openCommandPalette")&&["span",{class:"ace_mobile-button",action:"openCommandPalette"},"Palette"]]:["span"]),_.firstChild)},N=function(W){return h.commands.canExecute(W,h)},G=function(W){var K=W.target.getAttribute("action");if(K=="more"||!C)return C=!C,O();K=="paste"?l.readText().then(function(V){h.execCommand(K,V)}):K&&((K=="cut"||K=="copy")&&(l?l.writeText(h.getCopyText()):document.execCommand("copy")),h.execCommand(K)),_.firstChild.style.display="none",C=!1,K!="openCommandPalette"&&h.focus()};_=A.buildDom(["div",{class:"ace_mobile-menu",ontouchstart:function(W){o="menu",W.stopPropagation(),W.preventDefault(),h.textInput.focus()},ontouchend:function(W){W.stopPropagation(),W.preventDefault(),G(W)},onclick:G},["span"],["span",{class:"ace_mobile-button",action:"more"},"..."]],h.container)}function R(){if(!h.getOption("enableMobileMenu")){_&&$();return}_||T();var l=h.selection.cursor,C=h.renderer.textToScreenCoordinates(l.row,l.column),O=h.renderer.textToScreenCoordinates(0,0).pageX,N=h.renderer.scrollLeft,G=h.container.getBoundingClientRect();_.style.top=C.pageY-G.top-3+"px",C.pageX-G.left<G.width-70?(_.style.left="",_.style.right="10px"):(_.style.right="",_.style.left=O+N-G.left+"px"),_.style.display="",_.firstChild.style.display="none",h.on("input",$)}function $(l){_&&(_.style.display="none"),h.off("input",$)}function k(){r=null,clearTimeout(r);var l=h.selection.getRange(),C=l.contains(p.row,p.column);(l.isEmpty()||!C)&&(h.selection.moveToPosition(p),h.selection.selectWord()),o="wait",R()}function v(){r=null,clearTimeout(r),h.selection.moveToPosition(p);var l=M>=2?h.selection.getLineRange(p.row):h.session.getBracketRange(p);l&&!l.isEmpty()?h.selection.setRange(l):h.selection.selectWord(),o="wait"}S.addListener(s,"contextmenu",function(l){if(d){var C=h.textInput.getElement();C.focus()}},h),S.addListener(s,"touchstart",function(l){var C=l.touches;if(r||C.length>1){clearTimeout(r),r=null,t=-1,o="zoom";return}d=h.$mouseHandler.isMousePressed=!0;var O=h.renderer.layerConfig.lineHeight,N=h.renderer.layerConfig.lineHeight,G=l.timeStamp;e=G;var W=C[0],K=W.clientX,V=W.clientY;Math.abs(n-K)+Math.abs(i-V)>O&&(t=-1),n=l.clientX=K,i=l.clientY=V,w=m=0;var Y=new D(l,h);if(p=Y.getDocumentPosition(),G-t<500&&C.length==1&&!u)M++,l.preventDefault(),l.button=0,v();else{M=0;var re=h.selection.cursor,Q=h.selection.isEmpty()?re:h.selection.anchor,ie=h.renderer.$cursorLayer.getPixelPosition(re,!0),ue=h.renderer.$cursorLayer.getPixelPosition(Q,!0),ge=h.renderer.scroller.getBoundingClientRect(),me=h.renderer.layerConfig.offset,ve=h.renderer.scrollLeft,Ce=function(ze,U){return ze=ze/N,U=U/O-.75,ze*ze+U*U};if(l.clientX<ge.left){o="zoom";return}var Me=Ce(l.clientX-ge.left-ie.left+ve,l.clientY-ge.top-ie.top+me),Ie=Ce(l.clientX-ge.left-ue.left+ve,l.clientY-ge.top-ue.top+me);Me<3.5&&Ie<3.5&&(o=Me>Ie?"cursor":"anchor"),Ie<3.5?o="anchor":Me<3.5?o="cursor":o="scroll",r=setTimeout(k,450)}t=G},h),S.addListener(s,"touchend",function(l){d=h.$mouseHandler.isMousePressed=!1,a&&clearInterval(a),o=="zoom"?(o="",u=0):r?(h.selection.moveToPosition(p),u=0,R()):o=="scroll"?(b(),$()):R(),clearTimeout(r),r=null},h),S.addListener(s,"touchmove",function(l){r&&(clearTimeout(r),r=null);var C=l.touches;if(!(C.length>1||o=="zoom")){var O=C[0],N=n-O.clientX,G=i-O.clientY;if(o=="wait")if(N*N+G*G>4)o="cursor";else return l.preventDefault();n=O.clientX,i=O.clientY,l.clientX=O.clientX,l.clientY=O.clientY;var W=l.timeStamp,K=W-e;if(e=W,o=="scroll"){var V=new D(l,h);V.speed=1,V.wheelX=N,V.wheelY=G,10*Math.abs(N)<Math.abs(G)&&(N=0),10*Math.abs(G)<Math.abs(N)&&(G=0),K!=0&&(w=N/K,m=G/K),h._emit("mousewheel",V),V.propagationStopped||(w=m=0)}else{var Y=new D(l,h),re=Y.getDocumentPosition();o=="cursor"?h.selection.moveCursorToPosition(re):o=="anchor"&&h.selection.setSelectionAnchor(re.row,re.column),h.renderer.scrollCursorIntoView(re),l.preventDefault()}}},h);function b(){u+=60,a=setInterval(function(){u--<=0&&(clearInterval(a),a=null),Math.abs(w)<.01&&(w=0),Math.abs(m)<.01&&(m=0),u<20&&(w=.9*w),u<20&&(m=.9*m);var l=h.session.getScrollTop();h.renderer.scrollBy(10*w,10*m),l==h.session.getScrollTop()&&(u=0)},10)}}}),ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/mouse/touch_handler","ace/config"],function(g,I,z){var D=g("../lib/event"),S=g("../lib/useragent"),A=g("./default_handlers").DefaultHandlers,s=g("./default_gutter_handler").GutterHandler,h=g("./mouse_event").MouseEvent,o=g("./dragdrop_handler").DragdropHandler,n=g("./touch_handler").addTouchListeners,i=g("../config"),t=function(){function e(r){this.$dragDelay,this.$dragEnabled,this.$mouseMoved,this.mouseEvent,this.$focusTimeout;var a=this;this.editor=r,new A(this),new s(this),new o(this);var u=function(w){var m=!document.hasFocus||!document.hasFocus()||!r.isFocused()&&document.activeElement==(r.textInput&&r.textInput.getElement());m&&window.focus(),r.focus(),setTimeout(function(){r.isFocused()||r.focus()})},p=r.renderer.getMouseEventTarget();D.addListener(p,"click",this.onMouseEvent.bind(this,"click"),r),D.addListener(p,"mousemove",this.onMouseMove.bind(this,"mousemove"),r),D.addMultiMouseDownListener([p,r.renderer.scrollBarV&&r.renderer.scrollBarV.inner,r.renderer.scrollBarH&&r.renderer.scrollBarH.inner,r.textInput&&r.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent",r),D.addMouseWheelListener(r.container,this.onMouseWheel.bind(this,"mousewheel"),r),n(r.container,r);var M=r.renderer.$gutter;D.addListener(M,"mousedown",this.onMouseEvent.bind(this,"guttermousedown"),r),D.addListener(M,"click",this.onMouseEvent.bind(this,"gutterclick"),r),D.addListener(M,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick"),r),D.addListener(M,"mousemove",this.onMouseEvent.bind(this,"guttermousemove"),r),D.addListener(p,"mousedown",u,r),D.addListener(M,"mousedown",u,r),S.isIE&&r.renderer.scrollBarV&&(D.addListener(r.renderer.scrollBarV.element,"mousedown",u,r),D.addListener(r.renderer.scrollBarH.element,"mousedown",u,r)),r.on("mousemove",function(w){if(!(a.state||a.$dragDelay||!a.$dragEnabled)){var m=r.renderer.screenToTextCoordinates(w.x,w.y),d=r.session.selection.getRange(),_=r.renderer;!d.isEmpty()&&d.insideStart(m.row,m.column)?_.setCursorStyle("default"):_.setCursorStyle("")}},r)}return e.prototype.onMouseEvent=function(r,a){this.editor.session&&this.editor._emit(r,new h(a,this.editor))},e.prototype.onMouseMove=function(r,a){var u=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;!u||!u.length||this.editor._emit(r,new h(a,this.editor))},e.prototype.onMouseWheel=function(r,a){var u=new h(a,this.editor);u.speed=this.$scrollSpeed*2,u.wheelX=a.wheelX,u.wheelY=a.wheelY,this.editor._emit(r,u)},e.prototype.setState=function(r){this.state=r},e.prototype.captureMouse=function(r,a){this.x=r.x,this.y=r.y,this.isMousePressed=!0;var u=this.editor,p=this.editor.renderer;p.$isMousePressed=!0;var M=this,w=function(R){if(R){if(S.isWebKit&&!R.which&&M.releaseMouse)return M.releaseMouse();M.x=R.clientX,M.y=R.clientY,a&&a(R),M.mouseEvent=new h(R,M.editor),M.$mouseMoved=!0}},m=function(R){u.off("beforeEndOperation",_),clearInterval(T),u.session&&d(),M[M.state+"End"]&&M[M.state+"End"](R),M.state="",M.isMousePressed=p.$isMousePressed=!1,p.$keepTextAreaAtCursor&&p.$moveTextAreaToCursor(),M.$onCaptureMouseMove=M.releaseMouse=null,R&&M.onMouseEvent("mouseup",R),u.endOperation()},d=function(){M[M.state]&&M[M.state](),M.$mouseMoved=!1};if(S.isOldIE&&r.domEvent.type=="dblclick")return setTimeout(function(){m(r)});var _=function(R){M.releaseMouse&&u.curOp.command.name&&u.curOp.selectionChanged&&(M[M.state+"End"]&&M[M.state+"End"](),M.state="",M.releaseMouse())};u.on("beforeEndOperation",_),u.startOperation({command:{name:"mouse"}}),M.$onCaptureMouseMove=w,M.releaseMouse=D.capture(this.editor.container,w,m);var T=setInterval(d,20)},e.prototype.cancelContextMenu=function(){var r=(function(a){a&&a.domEvent&&a.domEvent.type!="contextmenu"||(this.editor.off("nativecontextmenu",r),a&&a.domEvent&&D.stopEvent(a.domEvent))}).bind(this);setTimeout(r,10),this.editor.on("nativecontextmenu",r)},e.prototype.destroy=function(){this.releaseMouse&&this.releaseMouse()},e}();t.prototype.releaseMouse=null,i.defineOptions(t.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:S.isMac?150:0},dragEnabled:{initialValue:!0},focusTimeout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),I.MouseHandler=t}),ace.define("ace/mouse/fold_handler",["require","exports","module","ace/lib/dom"],function(g,I,z){var D=g("../lib/dom"),S=function(){function A(s){s.on("click",function(h){var o=h.getDocumentPosition(),n=s.session,i=n.getFoldAt(o.row,o.column,1);i&&(h.getAccelKey()?n.removeFold(i):n.expandFold(i),h.stop());var t=h.domEvent&&h.domEvent.target;t&&D.hasCssClass(t,"ace_inline_button")&&D.hasCssClass(t,"ace_toggle_wrap")&&(n.setOption("wrap",!n.getUseWrapMode()),s.renderer.scrollCursorIntoView())}),s.on("gutterclick",function(h){var o=s.renderer.$gutterLayer.getRegion(h);if(o=="foldWidgets"){var n=h.getDocumentPosition().row,i=s.session;i.foldWidgets&&i.foldWidgets[n]&&s.session.onFoldWidgetClick(n,h),s.isFocused()||s.focus(),h.stop()}}),s.on("gutterdblclick",function(h){var o=s.renderer.$gutterLayer.getRegion(h);if(o=="foldWidgets"){var n=h.getDocumentPosition().row,i=s.session,t=i.getParentFoldRangeData(n,!0),e=t.range||t.firstRange;if(e){n=e.start.row;var r=i.getFoldAt(n,i.getLine(n).length,1);r?i.removeFold(r):(i.addFold("...",e),s.renderer.scrollCursorIntoView({row:e.start.row,column:0}))}h.stop()}})}return A}();I.FoldHandler=S}),ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(g,I,z){var D=g("../lib/keys"),S=g("../lib/event"),A=function(){function s(h){this.$editor=h,this.$data={editor:h},this.$handlers=[],this.setDefaultHandler(h.commands)}return s.prototype.setDefaultHandler=function(h){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=h,this.addKeyboardHandler(h,0)},s.prototype.setKeyboardHandler=function(h){var o=this.$handlers;if(o[o.length-1]!=h){for(;o[o.length-1]&&o[o.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(o[o.length-1]);this.addKeyboardHandler(h,1)}},s.prototype.addKeyboardHandler=function(h,o){if(h){typeof h=="function"&&!h.handleKeyboard&&(h.handleKeyboard=h);var n=this.$handlers.indexOf(h);n!=-1&&this.$handlers.splice(n,1),o==null?this.$handlers.push(h):this.$handlers.splice(o,0,h),n==-1&&h.attach&&h.attach(this.$editor)}},s.prototype.removeKeyboardHandler=function(h){var o=this.$handlers.indexOf(h);return o==-1?!1:(this.$handlers.splice(o,1),h.detach&&h.detach(this.$editor),!0)},s.prototype.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},s.prototype.getStatusText=function(){var h=this.$data,o=h.editor;return this.$handlers.map(function(n){return n.getStatusText&&n.getStatusText(o,h)||""}).filter(Boolean).join(" ")},s.prototype.$callKeyboardHandlers=function(h,o,n,i){for(var t,e=!1,r=this.$editor.commands,a=this.$handlers.length;a--&&(t=this.$handlers[a].handleKeyboard(this.$data,h,o,n,i),!(!(!t||!t.command)&&(t.command=="null"?e=!0:e=r.exec(t.command,this.$editor,t.args,i),e&&i&&h!=-1&&t.passEvent!=!0&&t.command.passEvent!=!0&&S.stopEvent(i),e))););return!e&&h==-1&&(t={command:"insertstring"},e=r.exec("insertstring",this.$editor,o)),e&&this.$editor._signal&&this.$editor._signal("keyboardActivity",t),e},s.prototype.onCommandKey=function(h,o,n){var i=D.keyCodeToString(n);return this.$callKeyboardHandlers(o,i,n,h)},s.prototype.onTextInput=function(h){return this.$callKeyboardHandlers(-1,h)},s}();I.KeyBinding=A}),ace.define("ace/lib/bidiutil",["require","exports","module"],function(g,I,z){var D=0,S=0,A=!1,s=!1,h=!1,o=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],n=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],i=0,t=1,e=0,r=1,a=2,u=3,p=4,M=5,w=6,m=7,d=8,_=9,T=10,R=11,$=12,k=13,v=14,b=15,l=16,C=17,O=18,N=[O,O,O,O,O,O,O,O,O,w,M,w,d,M,O,O,O,O,O,O,O,O,O,O,O,O,O,O,M,M,M,w,d,p,p,R,R,R,p,p,p,p,p,T,_,T,_,_,a,a,a,a,a,a,a,a,a,a,_,p,p,p,p,p,p,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,p,p,p,p,p,p,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,p,p,p,p,O,O,O,O,O,O,M,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,_,p,R,R,R,R,p,p,p,p,e,p,p,O,p,p,R,R,a,a,p,e,p,p,p,a,e,p,p,p,p,p],G=[d,d,d,d,d,d,d,d,d,d,d,O,O,O,e,r,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,d,M,k,v,b,l,C,_,R,R,R,R,R,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,_,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,p,d];function W(re,Q,ie,ue){var ge=D?n:o,me=null,ve=null,Ce=null,Me=0,Ie=null,ze=null,U=-1,pe=null,le=null,oe=[];if(!ue)for(pe=0,ue=[];pe<ie;pe++)ue[pe]=Y(re[pe]);for(S=D,A=!1,s=!1,h=!1,le=0;le<ie;le++){if(me=Me,oe[le]=ve=V(re,ue,oe,le),Me=ge[me][ve],Ie=Me&240,Me&=15,Q[le]=Ce=ge[Me][5],Ie>0)if(Ie==16){for(pe=U;pe<le;pe++)Q[pe]=1;U=-1}else U=-1;if(ze=ge[Me][6],ze)U==-1&&(U=le);else if(U>-1){for(pe=U;pe<le;pe++)Q[pe]=Ce;U=-1}ue[le]==M&&(Q[le]=0),S|=Ce}if(h){for(pe=0;pe<ie;pe++)if(ue[pe]==w){Q[pe]=D;for(var te=pe-1;te>=0&&ue[te]==d;te--)Q[te]=D}}}function K(re,Q,ie){if(!(S<re)){if(re==1&&D==t&&!s){ie.reverse();return}for(var ue=ie.length,ge=0,me,ve,Ce,Me;ge<ue;){if(Q[ge]>=re){for(me=ge+1;me<ue&&Q[me]>=re;)me++;for(ve=ge,Ce=me-1;ve<Ce;ve++,Ce--)Me=ie[ve],ie[ve]=ie[Ce],ie[Ce]=Me;ge=me}ge++}}}function V(re,Q,ie,ue){var ge=Q[ue],me,ve,Ce,Me;switch(ge){case e:case r:A=!1;case p:case u:return ge;case a:return A?u:a;case m:return A=!0,r;case d:return p;case _:return ue<1||ue+1>=Q.length||(me=ie[ue-1])!=a&&me!=u||(ve=Q[ue+1])!=a&&ve!=u?p:(A&&(ve=u),ve==me?ve:p);case T:return me=ue>0?ie[ue-1]:M,me==a&&ue+1<Q.length&&Q[ue+1]==a?a:p;case R:if(ue>0&&ie[ue-1]==a)return a;if(A)return p;for(Me=ue+1,Ce=Q.length;Me<Ce&&Q[Me]==R;)Me++;return Me<Ce&&Q[Me]==a?a:p;case $:for(Ce=Q.length,Me=ue+1;Me<Ce&&Q[Me]==$;)Me++;if(Me<Ce){var Ie=re[ue],ze=Ie>=1425&&Ie<=2303||Ie==64286;if(me=Q[Me],ze&&(me==r||me==m))return r}return ue<1||(me=Q[ue-1])==M?p:ie[ue-1];case M:return A=!1,s=!0,D;case w:return h=!0,p;case k:case v:case l:case C:case b:A=!1;case O:return p}}function Y(re){var Q=re.charCodeAt(0),ie=Q>>8;return ie==0?Q>191?e:N[Q]:ie==5?/[\u0591-\u05f4]/.test(re)?r:e:ie==6?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(re)?$:/[\u0660-\u0669\u066b-\u066c]/.test(re)?u:Q==1642?R:/[\u06f0-\u06f9]/.test(re)?a:m:ie==32&&Q<=8287?G[Q&255]:ie==254&&Q>=65136?m:p}I.L=e,I.R=r,I.EN=a,I.ON_R=3,I.AN=4,I.R_H=5,I.B=6,I.RLE=7,I.DOT="",I.doBidiReorder=function(re,Q,ie){if(re.length<2)return{};var ue=re.split(""),ge=new Array(ue.length),me=new Array(ue.length),ve=[];D=ie?t:i,W(ue,ve,ue.length,Q);for(var Ce=0;Ce<ge.length;ge[Ce]=Ce,Ce++);K(2,ve,ge),K(1,ve,ge);for(var Ce=0;Ce<ge.length-1;Ce++)Q[Ce]===u?ve[Ce]=I.AN:ve[Ce]===r&&(Q[Ce]>m&&Q[Ce]<k||Q[Ce]===p||Q[Ce]===O)?ve[Ce]=I.ON_R:Ce>0&&ue[Ce-1]===""&&/\u0622|\u0623|\u0625|\u0627/.test(ue[Ce])&&(ve[Ce-1]=ve[Ce]=I.R_H,Ce++);ue[ue.length-1]===I.DOT&&(ve[ue.length-1]=I.B),ue[0]===""&&(ve[0]=I.RLE);for(var Ce=0;Ce<ge.length;Ce++)me[Ce]=ve[ge[Ce]];return{logicalFromVisual:ge,bidiLevels:me}},I.hasBidiCharacters=function(re,Q){for(var ie=!1,ue=0;ue<re.length;ue++)Q[ue]=Y(re.charAt(ue)),!ie&&(Q[ue]==r||Q[ue]==m||Q[ue]==u)&&(ie=!0);return ie},I.getVisualFromLogicalIdx=function(re,Q){for(var ie=0;ie<Q.logicalFromVisual.length;ie++)if(Q.logicalFromVisual[ie]==re)return ie;return 0}}),ace.define("ace/bidihandler",["require","exports","module","ace/lib/bidiutil","ace/lib/lang"],function(g,I,z){var D=g("./lib/bidiutil"),S=g("./lib/lang"),A=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\u202B]/,s=function(){function h(o){this.session=o,this.bidiMap={},this.currentRow=null,this.bidiUtil=D,this.charWidths=[],this.EOL="",this.showInvisibles=!0,this.isRtlDir=!1,this.$isRtl=!1,this.line="",this.wrapIndent=0,this.EOF="",this.RLE="",this.contentWidth=0,this.fontMetrics=null,this.rtlLineOffset=0,this.wrapOffset=0,this.isMoveLeftOperation=!1,this.seenBidi=A.test(o.getValue())}return h.prototype.isBidiRow=function(o,n,i){return this.seenBidi?(o!==this.currentRow&&(this.currentRow=o,this.updateRowLine(n,i),this.updateBidiMap()),this.bidiMap.bidiLevels):!1},h.prototype.onChange=function(o){this.seenBidi?this.currentRow=null:o.action=="insert"&&A.test(o.lines.join(`
`))&&(this.seenBidi=!0,this.currentRow=null)},h.prototype.getDocumentRow=function(){var o=0,n=this.session.$screenRowCache;if(n.length){var i=this.session.$getRowCacheIndex(n,this.currentRow);i>=0&&(o=this.session.$docRowCache[i])}return o},h.prototype.getSplitIndex=function(){var o=0,n=this.session.$screenRowCache;if(n.length)for(var i,t=this.session.$getRowCacheIndex(n,this.currentRow);this.currentRow-o>0&&(i=this.session.$getRowCacheIndex(n,this.currentRow-o-1),i===t);)t=i,o++;else o=this.currentRow;return o},h.prototype.updateRowLine=function(o,n){o===void 0&&(o=this.getDocumentRow());var i=o===this.session.getLength()-1,t=i?this.EOF:this.EOL;if(this.wrapIndent=0,this.line=this.session.getLine(o),this.isRtlDir=this.$isRtl||this.line.charAt(0)===this.RLE,this.session.$useWrapMode){var e=this.session.$wrapData[o];e&&(n===void 0&&(n=this.getSplitIndex()),n>0&&e.length?(this.wrapIndent=e.indent,this.wrapOffset=this.wrapIndent*this.charWidths[D.L],this.line=n<e.length?this.line.substring(e[n-1],e[n]):this.line.substring(e[e.length-1])):this.line=this.line.substring(0,e[n]),n==e.length&&(this.line+=this.showInvisibles?t:D.DOT))}else this.line+=this.showInvisibles?t:D.DOT;var r=this.session,a=0,u;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,function(p,M){return p==="	"||r.isFullWidth(p.charCodeAt(0))?(u=p==="	"?r.getScreenTabSize(M+a):2,a+=u-1,S.stringRepeat(D.DOT,u)):p}),this.isRtlDir&&(this.fontMetrics.$main.textContent=this.line.charAt(this.line.length-1)==D.DOT?this.line.substr(0,this.line.length-1):this.line,this.rtlLineOffset=this.contentWidth-this.fontMetrics.$main.getBoundingClientRect().width)},h.prototype.updateBidiMap=function(){var o=[];D.hasBidiCharacters(this.line,o)||this.isRtlDir?this.bidiMap=D.doBidiReorder(this.line,o,this.isRtlDir):this.bidiMap={}},h.prototype.markAsDirty=function(){this.currentRow=null},h.prototype.updateCharacterWidths=function(o){if(this.characterWidth!==o.$characterSize.width){this.fontMetrics=o;var n=this.characterWidth=o.$characterSize.width,i=o.$measureCharWidth("");this.charWidths[D.L]=this.charWidths[D.EN]=this.charWidths[D.ON_R]=n,this.charWidths[D.R]=this.charWidths[D.AN]=i,this.charWidths[D.R_H]=i*.45,this.charWidths[D.B]=this.charWidths[D.RLE]=0,this.currentRow=null}},h.prototype.setShowInvisibles=function(o){this.showInvisibles=o,this.currentRow=null},h.prototype.setEolChar=function(o){this.EOL=o},h.prototype.setContentWidth=function(o){this.contentWidth=o},h.prototype.isRtlLine=function(o){return this.$isRtl?!0:o!=null?this.session.getLine(o).charAt(0)==this.RLE:this.isRtlDir},h.prototype.setRtlDirection=function(o,n){for(var i=o.getCursorPosition(),t=o.selection.getSelectionAnchor().row;t<=i.row;t++)!n&&o.session.getLine(t).charAt(0)===o.session.$bidiHandler.RLE?o.session.doc.removeInLine(t,0,1):n&&o.session.getLine(t).charAt(0)!==o.session.$bidiHandler.RLE&&o.session.doc.insert({column:0,row:t},o.session.$bidiHandler.RLE)},h.prototype.getPosLeft=function(o){o-=this.wrapIndent;var n=this.line.charAt(0)===this.RLE?1:0,i=o>n?this.session.getOverwrite()?o:o-1:n,t=D.getVisualFromLogicalIdx(i,this.bidiMap),e=this.bidiMap.bidiLevels,r=0;!this.session.getOverwrite()&&o<=n&&e[t]%2!==0&&t++;for(var a=0;a<t;a++)r+=this.charWidths[e[a]];return!this.session.getOverwrite()&&o>n&&e[t]%2===0&&(r+=this.charWidths[e[t]]),this.wrapIndent&&(r+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset),this.isRtlDir&&(r+=this.rtlLineOffset),r},h.prototype.getSelections=function(o,n){var i=this.bidiMap,t=i.bidiLevels,e,r=[],a=0,u=Math.min(o,n)-this.wrapIndent,p=Math.max(o,n)-this.wrapIndent,M=!1,w=!1,m=0;this.wrapIndent&&(a+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(var d,_=0;_<t.length;_++)d=i.logicalFromVisual[_],e=t[_],M=d>=u&&d<p,M&&!w?m=a:!M&&w&&r.push({left:m,width:a-m}),a+=this.charWidths[e],w=M;if(M&&_===t.length&&r.push({left:m,width:a-m}),this.isRtlDir)for(var T=0;T<r.length;T++)r[T].left+=this.rtlLineOffset;return r},h.prototype.offsetToCol=function(i){this.isRtlDir&&(i-=this.rtlLineOffset);var n=0,i=Math.max(i,0),t=0,e=0,r=this.bidiMap.bidiLevels,a=this.charWidths[r[e]];for(this.wrapIndent&&(i-=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);i>t+a/2;){if(t+=a,e===r.length-1){a=0;break}a=this.charWidths[r[++e]]}return e>0&&r[e-1]%2!==0&&r[e]%2===0?(i<t&&e--,n=this.bidiMap.logicalFromVisual[e]):e>0&&r[e-1]%2===0&&r[e]%2!==0?n=1+(i>t?this.bidiMap.logicalFromVisual[e]:this.bidiMap.logicalFromVisual[e-1]):this.isRtlDir&&e===r.length-1&&a===0&&r[e-1]%2===0||!this.isRtlDir&&e===0&&r[e]%2!==0?n=1+this.bidiMap.logicalFromVisual[e]:(e>0&&r[e-1]%2!==0&&a!==0&&e--,n=this.bidiMap.logicalFromVisual[e]),n===0&&this.isRtlDir&&n++,n+this.wrapIndent},h}();I.BidiHandler=s}),ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(g,I,z){var D=g("./lib/oop"),S=g("./lib/lang"),A=g("./lib/event_emitter").EventEmitter,s=g("./range").Range,h=function(){function o(n){this.session=n,this.doc=n.getDocument(),this.clearSelection(),this.cursor=this.lead=this.doc.createAnchor(0,0),this.anchor=this.doc.createAnchor(0,0),this.$silent=!1;var i=this;this.cursor.on("change",function(t){i.$cursorChanged=!0,i.$silent||i._emit("changeCursor"),!i.$isEmpty&&!i.$silent&&i._emit("changeSelection"),!i.$keepDesiredColumnOnChange&&t.old.column!=t.value.column&&(i.$desiredColumn=null)}),this.anchor.on("change",function(){i.$anchorChanged=!0,!i.$isEmpty&&!i.$silent&&i._emit("changeSelection")})}return o.prototype.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},o.prototype.isMultiLine=function(){return!this.$isEmpty&&this.anchor.row!=this.cursor.row},o.prototype.getCursor=function(){return this.lead.getPosition()},o.prototype.setAnchor=function(n,i){this.$isEmpty=!1,this.anchor.setPosition(n,i)},o.prototype.getAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},o.prototype.getSelectionLead=function(){return this.lead.getPosition()},o.prototype.isBackwards=function(){var n=this.anchor,i=this.lead;return n.row>i.row||n.row==i.row&&n.column>i.column},o.prototype.getRange=function(){var n=this.anchor,i=this.lead;return this.$isEmpty?s.fromPoints(i,i):this.isBackwards()?s.fromPoints(i,n):s.fromPoints(n,i)},o.prototype.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},o.prototype.selectAll=function(){this.$setSelection(0,0,Number.MAX_VALUE,Number.MAX_VALUE)},o.prototype.setRange=function(n,i){var t=i?n.end:n.start,e=i?n.start:n.end;this.$setSelection(t.row,t.column,e.row,e.column)},o.prototype.$setSelection=function(n,i,t,e){if(!this.$silent){var r=this.$isEmpty,a=this.inMultiSelectMode;this.$silent=!0,this.$cursorChanged=this.$anchorChanged=!1,this.anchor.setPosition(n,i),this.cursor.setPosition(t,e),this.$isEmpty=!s.comparePoints(this.anchor,this.cursor),this.$silent=!1,this.$cursorChanged&&this._emit("changeCursor"),(this.$cursorChanged||this.$anchorChanged||r!=this.$isEmpty||a)&&this._emit("changeSelection")}},o.prototype.$moveSelection=function(n){var i=this.lead;this.$isEmpty&&this.setSelectionAnchor(i.row,i.column),n.call(this)},o.prototype.selectTo=function(n,i){this.$moveSelection(function(){this.moveCursorTo(n,i)})},o.prototype.selectToPosition=function(n){this.$moveSelection(function(){this.moveCursorToPosition(n)})},o.prototype.moveTo=function(n,i){this.clearSelection(),this.moveCursorTo(n,i)},o.prototype.moveToPosition=function(n){this.clearSelection(),this.moveCursorToPosition(n)},o.prototype.selectUp=function(){this.$moveSelection(this.moveCursorUp)},o.prototype.selectDown=function(){this.$moveSelection(this.moveCursorDown)},o.prototype.selectRight=function(){this.$moveSelection(this.moveCursorRight)},o.prototype.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},o.prototype.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},o.prototype.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},o.prototype.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},o.prototype.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},o.prototype.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},o.prototype.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},o.prototype.getWordRange=function(n,i){if(typeof i>"u"){var t=n||this.lead;n=t.row,i=t.column}return this.session.getWordRange(n,i)},o.prototype.selectWord=function(){this.setSelectionRange(this.getWordRange())},o.prototype.selectAWord=function(){var n=this.getCursor(),i=this.session.getAWordRange(n.row,n.column);this.setSelectionRange(i)},o.prototype.getLineRange=function(n,i){var t=typeof n=="number"?n:this.lead.row,e,r=this.session.getFoldLine(t);return r?(t=r.start.row,e=r.end.row):e=t,i===!0?new s(t,0,e,this.session.getLine(e).length):new s(t,0,e+1,0)},o.prototype.selectLine=function(){this.setSelectionRange(this.getLineRange())},o.prototype.moveCursorUp=function(){this.moveCursorBy(-1,0)},o.prototype.moveCursorDown=function(){this.moveCursorBy(1,0)},o.prototype.wouldMoveIntoSoftTab=function(n,i,t){var e=n.column,r=n.column+i;return t<0&&(e=n.column-i,r=n.column),this.session.isTabStop(n)&&this.doc.getLine(n.row).slice(e,r).split(" ").length-1==i},o.prototype.moveCursorLeft=function(){var n=this.lead.getPosition(),i;if(i=this.session.getFoldAt(n.row,n.column,-1))this.moveCursorTo(i.start.row,i.start.column);else if(n.column===0)n.row>0&&this.moveCursorTo(n.row-1,this.doc.getLine(n.row-1).length);else{var t=this.session.getTabSize();this.wouldMoveIntoSoftTab(n,t,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-t):this.moveCursorBy(0,-1)}},o.prototype.moveCursorRight=function(){var n=this.lead.getPosition(),i;if(i=this.session.getFoldAt(n.row,n.column,1))this.moveCursorTo(i.end.row,i.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var t=this.session.getTabSize(),n=this.lead;this.wouldMoveIntoSoftTab(n,t,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,t):this.moveCursorBy(0,1)}},o.prototype.moveCursorLineStart=function(){var n=this.lead.row,i=this.lead.column,t=this.session.documentToScreenRow(n,i),e=this.session.screenToDocumentPosition(t,0),r=this.session.getDisplayLine(n,null,e.row,e.column),a=r.match(/^\s*/);a[0].length!=i&&!this.session.$useEmacsStyleLineStart&&(e.column+=a[0].length),this.moveCursorToPosition(e)},o.prototype.moveCursorLineEnd=function(){var n=this.lead,i=this.session.getDocumentLastRowColumnPosition(n.row,n.column);if(this.lead.column==i.column){var t=this.session.getLine(i.row);if(i.column==t.length){var e=t.search(/\s+$/);e>0&&(i.column=e)}}this.moveCursorTo(i.row,i.column)},o.prototype.moveCursorFileEnd=function(){var n=this.doc.getLength()-1,i=this.doc.getLine(n).length;this.moveCursorTo(n,i)},o.prototype.moveCursorFileStart=function(){this.moveCursorTo(0,0)},o.prototype.moveCursorLongWordRight=function(){var n=this.lead.row,i=this.lead.column,t=this.doc.getLine(n),e=t.substring(i);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var r=this.session.getFoldAt(n,i,1);if(r){this.moveCursorTo(r.end.row,r.end.column);return}if(this.session.nonTokenRe.exec(e)&&(i+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,e=t.substring(i)),i>=t.length){this.moveCursorTo(n,t.length),this.moveCursorRight(),n<this.doc.getLength()-1&&this.moveCursorWordRight();return}this.session.tokenRe.exec(e)&&(i+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(n,i)},o.prototype.moveCursorLongWordLeft=function(){var n=this.lead.row,i=this.lead.column,t;if(t=this.session.getFoldAt(n,i,-1)){this.moveCursorTo(t.start.row,t.start.column);return}var e=this.session.getFoldStringAt(n,i,-1);e==null&&(e=this.doc.getLine(n).substring(0,i));var r=S.stringReverse(e);if(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(r)&&(i-=this.session.nonTokenRe.lastIndex,r=r.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),i<=0){this.moveCursorTo(n,0),this.moveCursorLeft(),n>0&&this.moveCursorWordLeft();return}this.session.tokenRe.exec(r)&&(i-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(n,i)},o.prototype.$shortWordEndIndex=function(n){var i=0,t,e=/\s/,r=this.session.tokenRe;if(r.lastIndex=0,this.session.tokenRe.exec(n))i=this.session.tokenRe.lastIndex;else{for(;(t=n[i])&&e.test(t);)i++;if(i<1){for(r.lastIndex=0;(t=n[i])&&!r.test(t);)if(r.lastIndex=0,i++,e.test(t))if(i>2){i--;break}else{for(;(t=n[i])&&e.test(t);)i++;if(i>2)break}}}return r.lastIndex=0,i},o.prototype.moveCursorShortWordRight=function(){var n=this.lead.row,i=this.lead.column,t=this.doc.getLine(n),e=t.substring(i),r=this.session.getFoldAt(n,i,1);if(r)return this.moveCursorTo(r.end.row,r.end.column);if(i==t.length){var a=this.doc.getLength();do n++,e=this.doc.getLine(n);while(n<a&&/^\s*$/.test(e));/^\s+/.test(e)||(e=""),i=0}var u=this.$shortWordEndIndex(e);this.moveCursorTo(n,i+u)},o.prototype.moveCursorShortWordLeft=function(){var n=this.lead.row,i=this.lead.column,t;if(t=this.session.getFoldAt(n,i,-1))return this.moveCursorTo(t.start.row,t.start.column);var e=this.session.getLine(n).substring(0,i);if(i===0){do n--,e=this.doc.getLine(n);while(n>0&&/^\s*$/.test(e));i=e.length,/\s+$/.test(e)||(e="")}var r=S.stringReverse(e),a=this.$shortWordEndIndex(r);return this.moveCursorTo(n,i-a)},o.prototype.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},o.prototype.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},o.prototype.moveCursorBy=function(n,i){var t=this.session.documentToScreenPosition(this.lead.row,this.lead.column),e;if(i===0&&(n!==0&&(this.session.$bidiHandler.isBidiRow(t.row,this.lead.row)?(e=this.session.$bidiHandler.getPosLeft(t.column),t.column=Math.round(e/this.session.$bidiHandler.charWidths[0])):e=t.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?t.column=this.$desiredColumn:this.$desiredColumn=t.column),n!=0&&this.session.lineWidgets&&this.session.lineWidgets[this.lead.row]){var r=this.session.lineWidgets[this.lead.row];n<0?n-=r.rowsAbove||0:n>0&&(n+=r.rowCount-(r.rowsAbove||0))}var a=this.session.screenToDocumentPosition(t.row+n,t.column,e);n!==0&&i===0&&a.row===this.lead.row&&(a.column,this.lead.column),this.moveCursorTo(a.row,a.column+i,i===0)},o.prototype.moveCursorToPosition=function(n){this.moveCursorTo(n.row,n.column)},o.prototype.moveCursorTo=function(n,i,t){var e=this.session.getFoldAt(n,i,1);e&&(n=e.start.row,i=e.start.column),this.$keepDesiredColumnOnChange=!0;var r=this.session.getLine(n);/[\uDC00-\uDFFF]/.test(r.charAt(i))&&r.charAt(i-1)&&(this.lead.row==n&&this.lead.column==i+1?i=i-1:i=i+1),this.lead.setPosition(n,i),this.$keepDesiredColumnOnChange=!1,t||(this.$desiredColumn=null)},o.prototype.moveCursorToScreen=function(n,i,t){var e=this.session.screenToDocumentPosition(n,i);this.moveCursorTo(e.row,e.column,t)},o.prototype.detach=function(){this.lead.detach(),this.anchor.detach()},o.prototype.fromOrientedRange=function(n){this.setSelectionRange(n,n.cursor==n.start),this.$desiredColumn=n.desiredColumn||this.$desiredColumn},o.prototype.toOrientedRange=function(n){var i=this.getRange();return n?(n.start.column=i.start.column,n.start.row=i.start.row,n.end.column=i.end.column,n.end.row=i.end.row):n=i,n.cursor=this.isBackwards()?n.start:n.end,n.desiredColumn=this.$desiredColumn,n},o.prototype.getRangeOfMovements=function(n){var i=this.getCursor();try{n(this);var t=this.getCursor();return s.fromPoints(i,t)}catch{return s.fromPoints(i,i)}finally{this.moveCursorToPosition(i)}},o.prototype.toJSON=function(){if(this.rangeCount)var n=this.ranges.map(function(i){var t=i.clone();return t.isBackwards=i.cursor==i.start,t});else{var n=this.getRange();n.isBackwards=this.isBackwards()}return n},o.prototype.fromJSON=function(n){if(n.start==null)if(this.rangeList&&n.length>1){this.toSingleRange(n[0]);for(var i=n.length;i--;){var t=s.fromPoints(n[i].start,n[i].end);n[i].isBackwards&&(t.cursor=t.start),this.addRange(t,!0)}return}else n=n[0];this.rangeList&&this.toSingleRange(n),this.setSelectionRange(n,n.isBackwards)},o.prototype.isEqual=function(n){if((n.length||this.rangeCount)&&n.length!=this.rangeCount)return!1;if(!n.length||!this.ranges)return this.getRange().isEqual(n);for(var i=this.ranges.length;i--;)if(!this.ranges[i].isEqual(n[i]))return!1;return!0},o}();h.prototype.setSelectionAnchor=h.prototype.setAnchor,h.prototype.getSelectionAnchor=h.prototype.getAnchor,h.prototype.setSelectionRange=h.prototype.setRange,D.implement(h.prototype,A),I.Selection=h}),ace.define("ace/tokenizer",["require","exports","module","ace/lib/report_error"],function(g,I,z){var D=g("./lib/report_error").reportError,S=2e3,A=function(){function s(h){this.splitRegex,this.states=h,this.regExps={},this.matchMappings={};for(var o in this.states){for(var n=this.states[o],i=[],t=0,e=this.matchMappings[o]={defaultToken:"text"},r="g",a=[],u=0;u<n.length;u++){var p=n[u];if(p.defaultToken&&(e.defaultToken=p.defaultToken),p.caseInsensitive&&r.indexOf("i")===-1&&(r+="i"),p.unicode&&r.indexOf("u")===-1&&(r+="u"),p.regex!=null){p.regex instanceof RegExp&&(p.regex=p.regex.toString().slice(1,-1));var M=p.regex,w=new RegExp("(?:("+M+")|(.))").exec("a").length-2;Array.isArray(p.token)?p.token.length==1||w==1?p.token=p.token[0]:w-1!=p.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:p,groupCount:w-1}),p.token=p.token[0]):(p.tokenArray=p.token,p.token=null,p.onMatch=this.$arrayTokens):typeof p.token=="function"&&!p.onMatch&&(w>1?p.onMatch=this.$applyToken:p.onMatch=p.token),w>1&&(/\\\d/.test(p.regex)?M=p.regex.replace(/\\([0-9]+)/g,function(m,d){return"\\"+(parseInt(d,10)+t+1)}):(w=1,M=this.removeCapturingGroups(p.regex)),!p.splitRegex&&typeof p.token!="string"&&a.push(p)),e[t]=u,t+=w,i.push(M),p.onMatch||(p.onMatch=null)}}i.length||(e[0]=0,i.push("$")),a.forEach(function(m){m.splitRegex=this.createSplitterRegexp(m.regex,r)},this),this.regExps[o]=new RegExp("("+i.join(")|(")+")|($)",r)}}return s.prototype.$setMaxTokenCount=function(h){S=h|0},s.prototype.$applyToken=function(h){var o=this.splitRegex.exec(h).slice(1),n=this.token.apply(this,o);if(typeof n=="string")return[{type:n,value:h}];for(var i=[],t=0,e=n.length;t<e;t++)o[t]&&(i[i.length]={type:n[t],value:o[t]});return i},s.prototype.$arrayTokens=function(h){if(!h)return[];var o=this.splitRegex.exec(h);if(!o)return"text";for(var n=[],i=this.tokenArray,t=0,e=i.length;t<e;t++)o[t+1]&&(n[n.length]={type:i[t],value:o[t+1]});return n},s.prototype.removeCapturingGroups=function(h){var o=h.replace(/\\.|\[(?:\\.|[^\\\]])*|\(\?[:=!<]|(\()/g,function(n,i){return i?"(?:":n});return o},s.prototype.createSplitterRegexp=function(h,o){if(h.indexOf("(?=")!=-1){var n=0,i=!1,t={};h.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(e,r,a,u,p,M){return i?i=p!="]":p?i=!0:u?(n==t.stack&&(t.end=M+1,t.stack=-1),n--):a&&(n++,a.length!=1&&(t.stack=n,t.start=M)),e}),t.end!=null&&/^\)*$/.test(h.substr(t.end))&&(h=h.substring(0,t.start)+h.substr(t.end))}return h.charAt(0)!="^"&&(h="^"+h),h.charAt(h.length-1)!="$"&&(h+="$"),new RegExp(h,(o||"").replace("g",""))},s.prototype.getLineTokens=function(h,o){if(o&&typeof o!="string"){var n=o.slice(0);o=n[0],o==="#tmp"&&(n.shift(),o=n.shift())}else var n=[];var i=o||"start",t=this.states[i];t||(i="start",t=this.states[i]);var e=this.matchMappings[i],r=this.regExps[i];r.lastIndex=0;for(var a,u=[],p=0,M=0,w={type:null,value:""};a=r.exec(h);){var m=e.defaultToken,d=null,_=a[0],T=r.lastIndex;if(T-_.length>p){var R=h.substring(p,T-_.length);w.type==m?w.value+=R:(w.type&&u.push(w),w={type:m,value:R})}for(var $=0;$<a.length-2;$++)if(a[$+1]!==void 0){d=t[e[$]],d.onMatch?m=d.onMatch(_,i,n,h):m=d.token,d.next&&(typeof d.next=="string"?i=d.next:i=d.next(i,n),t=this.states[i],t||(this.reportError("state doesn't exist",i),i="start",t=this.states[i]),e=this.matchMappings[i],p=T,r=this.regExps[i],r.lastIndex=T),d.consumeLineEnd&&(p=T);break}if(_){if(typeof m=="string")(!d||d.merge!==!1)&&w.type===m?w.value+=_:(w.type&&u.push(w),w={type:m,value:_});else if(m){w.type&&u.push(w),w={type:null,value:""};for(var $=0;$<m.length;$++)u.push(m[$])}}if(p==h.length)break;if(p=T,M++>S){for(M>2*h.length&&this.reportError("infinite loop with in ace tokenizer",{startState:o,line:h});p<h.length;)w.type&&u.push(w),w={value:h.substring(p,p+=500),type:"overflow"};i="start",n=[];break}}return w.type&&u.push(w),n.length>1&&n[0]!==i&&n.unshift("#tmp",i),{tokens:u,state:n.length?n:i}},s}();A.prototype.reportError=D,I.Tokenizer=A}),ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/deep_copy"],function(g,I,z){var D=g("../lib/deep_copy").deepCopy,S;S=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}},(function(){this.addRules=function(h,o){if(!o){for(var n in h)this.$rules[n]=h[n];return}for(var n in h){for(var i=h[n],t=0;t<i.length;t++){var e=i[t];(e.next||e.onMatch)&&(typeof e.next=="string"&&e.next.indexOf(o)!==0&&(e.next=o+e.next),e.nextState&&e.nextState.indexOf(o)!==0&&(e.nextState=o+e.nextState))}this.$rules[o+n]=i}},this.getRules=function(){return this.$rules},this.embedRules=function(h,o,n,i,t){var e=typeof h=="function"?new h().getRules():h;if(i)for(var r=0;r<i.length;r++)i[r]=o+i[r];else{i=[];for(var a in e)i.push(o+a)}if(this.addRules(e,o),n)for(var u=Array.prototype[t?"push":"unshift"],r=0;r<i.length;r++)u.apply(this.$rules[i[r]],D(n));this.$embeds||(this.$embeds=[]),this.$embeds.push(o)},this.getEmbeds=function(){return this.$embeds};var A=function(h,o){return(h!="start"||o.length)&&o.unshift(this.nextState,h),this.nextState},s=function(h,o){return o.shift(),o.shift()||"start"};this.normalizeRules=function(){var h=0,o=this.$rules;function n(i){var t=o[i];t.processed=!0;for(var e=0;e<t.length;e++){var r=t[e],a=null;Array.isArray(r)&&(a=r,r={}),!r.regex&&r.start&&(r.regex=r.start,r.next||(r.next=[]),r.next.push({defaultToken:r.token},{token:r.token+".end",regex:r.end||r.start,next:"pop"}),r.token=r.token+".start",r.push=!0);var u=r.next||r.push;if(u&&Array.isArray(u)){var p=r.stateName;p||(p=r.token,typeof p!="string"&&(p=p[0]||""),o[p]&&(p+=h++)),o[p]=u,r.next=p,n(p)}else u=="pop"&&(r.next=s);if(r.push&&(r.nextState=r.next||r.push,r.next=A,delete r.push),r.rules)for(var M in r.rules)o[M]?o[M].push&&o[M].push.apply(o[M],r.rules[M]):o[M]=r.rules[M];var w=typeof r=="string"?r:r.include;if(w&&(w==="$self"&&(w="start"),Array.isArray(w)?a=w.map(function(d){return o[d]}):a=o[w]),a){var m=[e,1].concat(a);r.noEscape&&(m=m.filter(function(d){return!d.next})),t.splice.apply(t,m),e--}r.keywordMap&&(r.token=this.createKeywordMapper(r.keywordMap,r.defaultToken||"text",r.caseInsensitive),delete r.defaultToken)}}Object.keys(o).forEach(n,this)},this.createKeywordMapper=function(h,o,n,i){var t=Object.create(null);return this.$keywordList=[],Object.keys(h).forEach(function(e){for(var r=h[e],a=r.split(i||"|"),u=a.length;u--;){var p=a[u];this.$keywordList.push(p),n&&(p=p.toLowerCase()),t[p]=e}},this),h=null,n?function(e){return t[e.toLowerCase()]||o}:function(e){return t[e]||o}},this.getKeywords=function(){return this.$keywords}}).call(S.prototype),I.TextHighlightRules=S}),ace.define("ace/mode/behaviour",["require","exports","module"],function(g,I,z){var D;D=function(){this.$behaviours={}},(function(){this.add=function(S,A,s){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[S]:this.$behaviours[S]={}}this.$behaviours[S][A]=s},this.addBehaviours=function(S){for(var A in S)for(var s in S[A])this.add(A,s,S[A][s])},this.remove=function(S){this.$behaviours&&this.$behaviours[S]&&delete this.$behaviours[S]},this.inherit=function(S,A){if(typeof S=="function")var s=new S().getBehaviours(A);else var s=S.getBehaviours(A);this.addBehaviours(s)},this.getBehaviours=function(S){if(S){for(var A={},s=0;s<S.length;s++)this.$behaviours[S[s]]&&(A[S[s]]=this.$behaviours[S[s]]);return A}else return this.$behaviours}}).call(D.prototype),I.Behaviour=D}),ace.define("ace/token_iterator",["require","exports","module","ace/range"],function(g,I,z){var D=g("./range").Range,S=function(){function A(s,h,o){this.$session=s,this.$row=h,this.$rowTokens=s.getTokens(h);var n=s.getTokenAt(h,o);this.$tokenIndex=n?n.index:-1}return A.prototype.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},A.prototype.stepForward=function(){this.$tokenIndex+=1;for(var s;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,s||(s=this.$session.getLength()),this.$row>=s)return this.$row=s-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},A.prototype.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},A.prototype.getCurrentTokenRow=function(){return this.$row},A.prototype.getCurrentTokenColumn=function(){var s=this.$rowTokens,h=this.$tokenIndex,o=s[h].start;if(o!==void 0)return o;for(o=0;h>0;)h-=1,o+=s[h].value.length;return o},A.prototype.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},A.prototype.getCurrentTokenRange=function(){var s=this.$rowTokens[this.$tokenIndex],h=this.getCurrentTokenColumn();return new D(this.$row,h,this.$row,h+s.value.length)},A}();I.TokenIterator=S}),ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(g,I,z){var D=g("../../lib/oop"),S=g("../behaviour").Behaviour,A=g("../../token_iterator").TokenIterator,s=g("../../lib/lang"),h=["text","paren.rparen","rparen","paren","punctuation.operator"],o=["text","paren.rparen","rparen","paren","punctuation.operator","comment"],n,i={},t={'"':'"',"'":"'"},e=function(u){var p=-1;if(u.multiSelect&&(p=u.selection.index,i.rangeCount!=u.multiSelect.rangeCount&&(i={rangeCount:u.multiSelect.rangeCount})),i[p])return n=i[p];n=i[p]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},r=function(u,p,M,w){var m=u.end.row-u.start.row;return{text:M+p+w,selection:[0,u.start.column+1,m,u.end.column+(m?0:1)]}},a;a=function(u){u=u||{},this.add("braces","insertion",function(p,M,w,m,d){var _=w.getCursorPosition(),T=m.doc.getLine(_.row);if(d=="{"){e(w);var R=w.getSelectionRange(),$=m.doc.getTextRange(R),k=m.getTokenAt(_.row,_.column);if($!==""&&$!=="{"&&w.getWrapBehavioursEnabled())return r(R,$,"{","}");if(k&&/(?:string)\.quasi|\.xml/.test(k.type)){var v=[/tag\-(?:open|name)/,/attribute\-name/];return v.some(function(W){return W.test(k.type)})||/(string)\.quasi/.test(k.type)&&k.value[_.column-k.start-1]!=="$"?void 0:(a.recordAutoInsert(w,m,"}"),{text:"{}",selection:[1,1]})}else if(a.isSaneInsertion(w,m))return/[\]\}\)]/.test(T[_.column])||w.inMultiSelectMode||u.braces?(a.recordAutoInsert(w,m,"}"),{text:"{}",selection:[1,1]}):(a.recordMaybeInsert(w,m,"{"),{text:"{",selection:[1,1]})}else if(d=="}"){e(w);var b=T.substring(_.column,_.column+1);if(b=="}"){var l=m.$findOpeningBracket("}",{column:_.column+1,row:_.row});if(l!==null&&a.isAutoInsertedClosing(_,T,d))return a.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}else if(d==`
`||d==`\r
`){e(w);var C="";a.isMaybeInsertedClosing(_,T)&&(C=s.stringRepeat("}",n.maybeInsertedBrackets),a.clearMaybeInsertedClosing());var b=T.substring(_.column,_.column+1);if(b==="}"){var O=m.findMatchingBracket({row:_.row,column:_.column+1},"}");if(!O)return null;var N=this.$getIndent(m.getLine(O.row))}else if(C)var N=this.$getIndent(T);else{a.clearMaybeInsertedClosing();return}var G=N+m.getTabString();return{text:`
`+G+`
`+N+C,selection:[1,G.length,1,G.length]}}else a.clearMaybeInsertedClosing()}),this.add("braces","deletion",function(p,M,w,m,d){var _=m.doc.getTextRange(d);if(!d.isMultiLine()&&_=="{"){e(w);var T=m.doc.getLine(d.start.row),R=T.substring(d.end.column,d.end.column+1);if(R=="}")return d.end.column++,d;n.maybeInsertedBrackets--}}),this.add("parens","insertion",function(p,M,w,m,d){if(d=="("){e(w);var _=w.getSelectionRange(),T=m.doc.getTextRange(_);if(T!==""&&w.getWrapBehavioursEnabled())return r(_,T,"(",")");if(a.isSaneInsertion(w,m))return a.recordAutoInsert(w,m,")"),{text:"()",selection:[1,1]}}else if(d==")"){e(w);var R=w.getCursorPosition(),$=m.doc.getLine(R.row),k=$.substring(R.column,R.column+1);if(k==")"){var v=m.$findOpeningBracket(")",{column:R.column+1,row:R.row});if(v!==null&&a.isAutoInsertedClosing(R,$,d))return a.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("parens","deletion",function(p,M,w,m,d){var _=m.doc.getTextRange(d);if(!d.isMultiLine()&&_=="("){e(w);var T=m.doc.getLine(d.start.row),R=T.substring(d.start.column+1,d.start.column+2);if(R==")")return d.end.column++,d}}),this.add("brackets","insertion",function(p,M,w,m,d){if(d=="["){e(w);var _=w.getSelectionRange(),T=m.doc.getTextRange(_);if(T!==""&&w.getWrapBehavioursEnabled())return r(_,T,"[","]");if(a.isSaneInsertion(w,m))return a.recordAutoInsert(w,m,"]"),{text:"[]",selection:[1,1]}}else if(d=="]"){e(w);var R=w.getCursorPosition(),$=m.doc.getLine(R.row),k=$.substring(R.column,R.column+1);if(k=="]"){var v=m.$findOpeningBracket("]",{column:R.column+1,row:R.row});if(v!==null&&a.isAutoInsertedClosing(R,$,d))return a.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("brackets","deletion",function(p,M,w,m,d){var _=m.doc.getTextRange(d);if(!d.isMultiLine()&&_=="["){e(w);var T=m.doc.getLine(d.start.row),R=T.substring(d.start.column+1,d.start.column+2);if(R=="]")return d.end.column++,d}}),this.add("string_dquotes","insertion",function(p,M,w,m,d){var _=m.$mode.$quotes||t;if(d.length==1&&_[d]){if(this.lineCommentStart&&this.lineCommentStart.indexOf(d)!=-1)return;e(w);var T=d,R=w.getSelectionRange(),$=m.doc.getTextRange(R);if($!==""&&($.length!=1||!_[$])&&w.getWrapBehavioursEnabled())return r(R,$,T,T);if(!$){var k=w.getCursorPosition(),v=m.doc.getLine(k.row),b=v.substring(k.column-1,k.column),l=v.substring(k.column,k.column+1),C=m.getTokenAt(k.row,k.column),O=m.getTokenAt(k.row,k.column+1);if(b=="\\"&&C&&/escape/.test(C.type))return null;var N=C&&/string|escape/.test(C.type),G=!O||/string|escape/.test(O.type),W;if(l==T)W=N!==G,W&&/string\.end/.test(O.type)&&(W=!1);else{if(N&&!G||N&&G)return null;var K=m.$mode.tokenRe;K.lastIndex=0;var V=K.test(b);K.lastIndex=0;var Y=K.test(l),re=m.$mode.$pairQuotesAfter,Q=re&&re[T]&&re[T].test(b);if(!Q&&V||Y||l&&!/[\s;,.})\]\\]/.test(l))return null;var ie=v[k.column-2];if(b==T&&(ie==T||K.test(ie)))return null;W=!0}return{text:W?T+T:"",selection:[1,1]}}}}),this.add("string_dquotes","deletion",function(p,M,w,m,d){var _=m.$mode.$quotes||t,T=m.doc.getTextRange(d);if(!d.isMultiLine()&&_.hasOwnProperty(T)){e(w);var R=m.doc.getLine(d.start.row),$=R.substring(d.start.column+1,d.start.column+2);if($==T)return d.end.column++,d}}),u.closeDocComment!==!1&&this.add("doc comment end","insertion",function(p,M,w,m,d){if(p==="doc-start"&&(d===`
`||d===`\r
`)&&w.selection.isEmpty()){var _=w.getCursorPosition();if(_.column===0)return;for(var T=m.doc.getLine(_.row),R=m.doc.getLine(_.row+1),$=m.getTokens(_.row),k=0,v=0;v<$.length;v++){k+=$[v].value.length;var b=$[v];if(k>=_.column){if(k===_.column){if(!/\.doc/.test(b.type))return;if(/\*\//.test(b.value)){var l=$[v+1];if(!l||!/\.doc/.test(l.type))return}}var C=_.column-(k-b.value.length),O=b.value.indexOf("*/"),N=b.value.indexOf("/**",O>-1?O+2:0);if(N!==-1&&C>N&&C<N+3||O!==-1&&N!==-1&&C>=O&&C<=N||!/\.doc/.test(b.type))return;break}}var G=this.$getIndent(T);if(/\s*\*/.test(R))return/^\s*\*/.test(T)?{text:d+G+"* ",selection:[1,2+G.length,1,2+G.length]}:{text:d+G+" * ",selection:[1,3+G.length,1,3+G.length]};if(/\/\*\*/.test(T.substring(0,_.column)))return{text:d+G+" * "+d+" "+G+"*/",selection:[1,4+G.length,1,4+G.length]}}})},a.isSaneInsertion=function(u,p){var M=u.getCursorPosition(),w=new A(p,M.row,M.column);if(!this.$matchTokenType(w.getCurrentToken()||"text",h)){if(/[)}\]]/.test(u.session.getLine(M.row)[M.column]))return!0;var m=new A(p,M.row,M.column+1);if(!this.$matchTokenType(m.getCurrentToken()||"text",h))return!1}return w.stepForward(),w.getCurrentTokenRow()!==M.row||this.$matchTokenType(w.getCurrentToken()||"text",o)},a.$matchTokenType=function(u,p){return p.indexOf(u.type||u)>-1},a.recordAutoInsert=function(u,p,M){var w=u.getCursorPosition(),m=p.doc.getLine(w.row);this.isAutoInsertedClosing(w,m,n.autoInsertedLineEnd[0])||(n.autoInsertedBrackets=0),n.autoInsertedRow=w.row,n.autoInsertedLineEnd=M+m.substr(w.column),n.autoInsertedBrackets++},a.recordMaybeInsert=function(u,p,M){var w=u.getCursorPosition(),m=p.doc.getLine(w.row);this.isMaybeInsertedClosing(w,m)||(n.maybeInsertedBrackets=0),n.maybeInsertedRow=w.row,n.maybeInsertedLineStart=m.substr(0,w.column)+M,n.maybeInsertedLineEnd=m.substr(w.column),n.maybeInsertedBrackets++},a.isAutoInsertedClosing=function(u,p,M){return n.autoInsertedBrackets>0&&u.row===n.autoInsertedRow&&M===n.autoInsertedLineEnd[0]&&p.substr(u.column)===n.autoInsertedLineEnd},a.isMaybeInsertedClosing=function(u,p){return n.maybeInsertedBrackets>0&&u.row===n.maybeInsertedRow&&p.substr(u.column)===n.maybeInsertedLineEnd&&p.substr(0,u.column)==n.maybeInsertedLineStart},a.popAutoInsertedClosing=function(){n.autoInsertedLineEnd=n.autoInsertedLineEnd.substr(1),n.autoInsertedBrackets--},a.clearMaybeInsertedClosing=function(){n&&(n.maybeInsertedBrackets=0,n.maybeInsertedRow=-1)},D.inherits(a,S),I.CstyleBehaviour=a}),ace.define("ace/unicode",["require","exports","module"],function(g,I,z){for(var D=[48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2],S=0,A=[],s=0;s<D.length;s+=2)A.push(S+=D[s]),D[s+1]&&A.push(45,S+=D[s+1]);I.wordChars=String.fromCharCode.apply(null,A)}),ace.define("ace/mode/text",["require","exports","module","ace/config","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour/cstyle","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(g,I,z){var D=g("../config"),S=g("../tokenizer").Tokenizer,A=g("./text_highlight_rules").TextHighlightRules,s=g("./behaviour/cstyle").CstyleBehaviour,h=g("../unicode"),o=g("../lib/lang"),n=g("../token_iterator").TokenIterator,i=g("../range").Range,t;t=function(){this.HighlightRules=A},(function(){this.$defaultBehaviour=new s,this.tokenRe=new RegExp("^["+h.wordChars+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+h.wordChars+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new S(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(e,r,a,u){var p=r.doc,M=!0,w=!0,m=1/0,d=r.getTabSize(),_=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))var $=this.lineCommentStart.map(o.escapeRegExp).join("|"),T=this.lineCommentStart[0];else var $=o.escapeRegExp(this.lineCommentStart),T=this.lineCommentStart;$=new RegExp("^(\\s*)(?:"+$+") ?"),_=r.getUseSoftTabs();var b=function(Y,re){var Q=Y.match($);if(Q){var ie=Q[1].length,ue=Q[0].length;!O(Y,ie,ue)&&Q[0][ue-1]==" "&&ue--,p.removeInLine(re,ie,ue)}},C=T+" ",v=function(Y,re){(!M||/\S/.test(Y))&&(O(Y,m,m)?p.insertInLine({row:re,column:m},C):p.insertInLine({row:re,column:m},T))},l=function(Y,re){return $.test(Y)},O=function(Y,re,Q){for(var ie=0;re--&&Y.charAt(re)==" ";)ie++;if(ie%d!=0)return!1;for(var ie=0;Y.charAt(Q++)==" ";)ie++;return d>2?ie%d!=d-1:ie%d==0}}else{if(!this.blockComment)return!1;var T=this.blockComment.start,R=this.blockComment.end,$=new RegExp("^(\\s*)(?:"+o.escapeRegExp(T)+")"),k=new RegExp("(?:"+o.escapeRegExp(R)+")\\s*$"),v=function(W,K){l(W,K)||(!M||/\S/.test(W))&&(p.insertInLine({row:K,column:W.length},R),p.insertInLine({row:K,column:m},T))},b=function(W,K){var V;(V=W.match(k))&&p.removeInLine(K,W.length-V[0].length,W.length),(V=W.match($))&&p.removeInLine(K,V[1].length,V[0].length)},l=function(W,K){if($.test(W))return!0;for(var V=r.getTokens(K),Y=0;Y<V.length;Y++)if(V[Y].type==="comment")return!0}}function N(W){for(var K=a;K<=u;K++)W(p.getLine(K),K)}var G=1/0;N(function(W,K){var V=W.search(/\S/);V!==-1?(V<m&&(m=V),w&&!l(W,K)&&(w=!1)):G>W.length&&(G=W.length)}),m==1/0&&(m=G,M=!1,w=!1),_&&m%d!=0&&(m=Math.floor(m/d)*d),N(w?b:v)},this.toggleBlockComment=function(e,r,a,u){var p=this.blockComment;if(p){!p.start&&p[0]&&(p=p[0]);var M=new n(r,u.row,u.column),w=M.getCurrentToken();r.selection;var m=r.selection.toOrientedRange(),d,_;if(w&&/comment/.test(w.type)){for(var T,R;w&&/comment/.test(w.type);){var $=w.value.indexOf(p.start);if($!=-1){var k=M.getCurrentTokenRow(),v=M.getCurrentTokenColumn()+$;T=new i(k,v,k,v+p.start.length);break}w=M.stepBackward()}for(var M=new n(r,u.row,u.column),w=M.getCurrentToken();w&&/comment/.test(w.type);){var $=w.value.indexOf(p.end);if($!=-1){var k=M.getCurrentTokenRow(),v=M.getCurrentTokenColumn()+$;R=new i(k,v,k,v+p.end.length);break}w=M.stepForward()}R&&r.remove(R),T&&(r.remove(T),d=T.start.row,_=-p.start.length)}else _=p.start.length,d=a.start.row,r.insert(a.end,p.end),r.insert(a.start,p.start);m.start.row==d&&(m.start.column+=_),m.end.row==d&&(m.end.column+=_),r.selection.fromOrientedRange(m)}},this.getNextLineIndent=function(e,r,a){return this.$getIndent(r)},this.checkOutdent=function(e,r,a){return!1},this.autoOutdent=function(e,r,a){},this.$getIndent=function(e){return e.match(/^\s*/)[0]},this.createWorker=function(e){return null},this.createModeDelegates=function(e){this.$embeds=[],this.$modes={};for(var r in e)if(e[r]){var a=e[r],u=a.prototype.$id,p=D.$modes[u];p||(D.$modes[u]=p=new a),D.$modes[r]||(D.$modes[r]=p),this.$embeds.push(r),this.$modes[r]=p}for(var M=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"],w=function(d){(function(_){var T=M[d],R=_[T];_[M[d]]=function(){return this.$delegator(T,arguments,R)}})(m)},m=this,r=0;r<M.length;r++)w(r)},this.$delegator=function(e,r,a){var u=r[0]||"start";if(typeof u!="string"){if(Array.isArray(u[2])){var p=u[2][u[2].length-1],M=this.$modes[p];if(M)return M[e].apply(M,[u[1]].concat([].slice.call(r,1)))}u=u[0]||"start"}for(var w=0;w<this.$embeds.length;w++)if(this.$modes[this.$embeds[w]]){var m=u.split(this.$embeds[w]);if(!m[0]&&m[1]){r[0]=m[1];var M=this.$modes[this.$embeds[w]];return M[e].apply(M,r)}}var d=a.apply(this,r);return a?d:void 0},this.transformAction=function(e,r,a,u,p){if(this.$behaviour){var M=this.$behaviour.getBehaviours();for(var w in M)if(M[w][r]){var m=M[w][r].apply(this,arguments);if(m)return m}}},this.getKeywords=function(e){if(!this.completionKeywords){var r=this.$tokenizer.rules,a=[];for(var u in r)for(var p=r[u],M=0,w=p.length;M<w;M++)if(typeof p[M].token=="string")/keyword|support|storage/.test(p[M].token)&&a.push(p[M].regex);else if(typeof p[M].token=="object"){for(var m=0,d=p[M].token.length;m<d;m++)if(/keyword|support|storage/.test(p[M].token[m])){var u=p[M].regex.match(/\(.+?\)/g)[m];a.push(u.substr(1,u.length-2))}}this.completionKeywords=a}return e?a.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(e,r,a,u){var p=this.$keywordList||this.$createKeywordList();return p.map(function(M){return{name:M,value:M,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}).call(t.prototype),I.Mode=t}),ace.define("ace/apply_delta",["require","exports","module"],function(g,I,z){I.applyDelta=function(D,S,A){var s=S.start.row,h=S.start.column,o=D[s]||"";switch(S.action){case"insert":var n=S.lines;if(n.length===1)D[s]=o.substring(0,h)+S.lines[0]+o.substring(h);else{var i=[s,1].concat(S.lines);D.splice.apply(D,i),D[s]=o.substring(0,h)+D[s],D[s+S.lines.length-1]+=o.substring(h)}break;case"remove":var t=S.end.column,e=S.end.row;s===e?D[s]=o.substring(0,h)+o.substring(t):D.splice(s,e-s+1,o.substring(0,h)+D[e].substring(t));break}}}),ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(g,I,z){var D=g("./lib/oop"),S=g("./lib/event_emitter").EventEmitter,A=function(){function o(n,i,t){this.$onChange=this.onChange.bind(this),this.attach(n),typeof i!="number"?this.setPosition(i.row,i.column):this.setPosition(i,t)}return o.prototype.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},o.prototype.getDocument=function(){return this.document},o.prototype.onChange=function(n){if(!(n.start.row==n.end.row&&n.start.row!=this.row)&&!(n.start.row>this.row)){var i=h(n,{row:this.row,column:this.column},this.$insertRight);this.setPosition(i.row,i.column,!0)}},o.prototype.setPosition=function(n,i,t){var e;if(t?e={row:n,column:i}:e=this.$clipPositionToDocument(n,i),!(this.row==e.row&&this.column==e.column)){var r={row:this.row,column:this.column};this.row=e.row,this.column=e.column,this._signal("change",{old:r,value:e})}},o.prototype.detach=function(){this.document.off("change",this.$onChange)},o.prototype.attach=function(n){this.document=n||this.document,this.document.on("change",this.$onChange)},o.prototype.$clipPositionToDocument=function(n,i){var t={};return n>=this.document.getLength()?(t.row=Math.max(0,this.document.getLength()-1),t.column=this.document.getLine(t.row).length):n<0?(t.row=0,t.column=0):(t.row=n,t.column=Math.min(this.document.getLine(t.row).length,Math.max(0,i))),i<0&&(t.column=0),t},o}();A.prototype.$insertRight=!1,D.implement(A.prototype,S);function s(o,n,i){var t=i?o.column<=n.column:o.column<n.column;return o.row<n.row||o.row==n.row&&t}function h(o,n,i){var t=o.action=="insert",e=(t?1:-1)*(o.end.row-o.start.row),r=(t?1:-1)*(o.end.column-o.start.column),a=o.start,u=t?a:o.end;return s(n,a,i)?{row:n.row,column:n.column}:s(u,n,!i)?{row:n.row+e,column:n.column+(n.row==u.row?r:0)}:{row:a.row,column:a.column}}I.Anchor=A}),ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(g,I,z){var D=g("./lib/oop"),S=g("./apply_delta").applyDelta,A=g("./lib/event_emitter").EventEmitter,s=g("./range").Range,h=g("./anchor").Anchor,o=function(){function n(i){this.$lines=[""],i.length===0?this.$lines=[""]:Array.isArray(i)?this.insertMergedLines({row:0,column:0},i):this.insert({row:0,column:0},i)}return n.prototype.setValue=function(i){var t=this.getLength()-1;this.remove(new s(0,0,t,this.getLine(t).length)),this.insert({row:0,column:0},i||"")},n.prototype.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},n.prototype.createAnchor=function(i,t){return new h(this,i,t)},n.prototype.$detectNewLine=function(i){var t=i.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=t?t[1]:`
`,this._signal("changeNewLineMode")},n.prototype.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return`\r
`;case"unix":return`
`;default:return this.$autoNewLine||`
`}},n.prototype.setNewLineMode=function(i){this.$newLineMode!==i&&(this.$newLineMode=i,this._signal("changeNewLineMode"))},n.prototype.getNewLineMode=function(){return this.$newLineMode},n.prototype.isNewLine=function(i){return i==`\r
`||i=="\r"||i==`
`},n.prototype.getLine=function(i){return this.$lines[i]||""},n.prototype.getLines=function(i,t){return this.$lines.slice(i,t+1)},n.prototype.getAllLines=function(){return this.getLines(0,this.getLength())},n.prototype.getLength=function(){return this.$lines.length},n.prototype.getTextRange=function(i){return this.getLinesForRange(i).join(this.getNewLineCharacter())},n.prototype.getLinesForRange=function(i){var t;if(i.start.row===i.end.row)t=[this.getLine(i.start.row).substring(i.start.column,i.end.column)];else{t=this.getLines(i.start.row,i.end.row),t[0]=(t[0]||"").substring(i.start.column);var e=t.length-1;i.end.row-i.start.row==e&&(t[e]=t[e].substring(0,i.end.column))}return t},n.prototype.insertLines=function(i,t){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(i,t)},n.prototype.removeLines=function(i,t){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(i,t)},n.prototype.insertNewLine=function(i){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(i,["",""])},n.prototype.insert=function(i,t){return this.getLength()<=1&&this.$detectNewLine(t),this.insertMergedLines(i,this.$split(t))},n.prototype.insertInLine=function(i,t){var e=this.clippedPos(i.row,i.column),r=this.pos(i.row,i.column+t.length);return this.applyDelta({start:e,end:r,action:"insert",lines:[t]},!0),this.clonePos(r)},n.prototype.clippedPos=function(i,t){var e=this.getLength();i===void 0?i=e:i<0?i=0:i>=e&&(i=e-1,t=void 0);var r=this.getLine(i);return t==null&&(t=r.length),t=Math.min(Math.max(t,0),r.length),{row:i,column:t}},n.prototype.clonePos=function(i){return{row:i.row,column:i.column}},n.prototype.pos=function(i,t){return{row:i,column:t}},n.prototype.$clipPosition=function(i){var t=this.getLength();return i.row>=t?(i.row=Math.max(0,t-1),i.column=this.getLine(t-1).length):(i.row=Math.max(0,i.row),i.column=Math.min(Math.max(i.column,0),this.getLine(i.row).length)),i},n.prototype.insertFullLines=function(i,t){i=Math.min(Math.max(i,0),this.getLength());var e=0;i<this.getLength()?(t=t.concat([""]),e=0):(t=[""].concat(t),i--,e=this.$lines[i].length),this.insertMergedLines({row:i,column:e},t)},n.prototype.insertMergedLines=function(i,t){var e=this.clippedPos(i.row,i.column),r={row:e.row+t.length-1,column:(t.length==1?e.column:0)+t[t.length-1].length};return this.applyDelta({start:e,end:r,action:"insert",lines:t}),this.clonePos(r)},n.prototype.remove=function(i){var t=this.clippedPos(i.start.row,i.start.column),e=this.clippedPos(i.end.row,i.end.column);return this.applyDelta({start:t,end:e,action:"remove",lines:this.getLinesForRange({start:t,end:e})}),this.clonePos(t)},n.prototype.removeInLine=function(i,t,e){var r=this.clippedPos(i,t),a=this.clippedPos(i,e);return this.applyDelta({start:r,end:a,action:"remove",lines:this.getLinesForRange({start:r,end:a})},!0),this.clonePos(r)},n.prototype.removeFullLines=function(i,t){i=Math.min(Math.max(0,i),this.getLength()-1),t=Math.min(Math.max(0,t),this.getLength()-1);var e=t==this.getLength()-1&&i>0,r=t<this.getLength()-1,a=e?i-1:i,u=e?this.getLine(a).length:0,p=r?t+1:t,M=r?0:this.getLine(p).length,w=new s(a,u,p,M),m=this.$lines.slice(i,t+1);return this.applyDelta({start:w.start,end:w.end,action:"remove",lines:this.getLinesForRange(w)}),m},n.prototype.removeNewLine=function(i){i<this.getLength()-1&&i>=0&&this.applyDelta({start:this.pos(i,this.getLine(i).length),end:this.pos(i+1,0),action:"remove",lines:["",""]})},n.prototype.replace=function(i,t){if(i instanceof s||(i=s.fromPoints(i.start,i.end)),t.length===0&&i.isEmpty())return i.start;if(t==this.getTextRange(i))return i.end;this.remove(i);var e;return t?e=this.insert(i.start,t):e=i.start,e},n.prototype.applyDeltas=function(i){for(var t=0;t<i.length;t++)this.applyDelta(i[t])},n.prototype.revertDeltas=function(i){for(var t=i.length-1;t>=0;t--)this.revertDelta(i[t])},n.prototype.applyDelta=function(i,t){var e=i.action=="insert";(e?i.lines.length<=1&&!i.lines[0]:!s.comparePoints(i.start,i.end))||(e&&i.lines.length>2e4?this.$splitAndapplyLargeDelta(i,2e4):(S(this.$lines,i,t),this._signal("change",i)))},n.prototype.$safeApplyDelta=function(i){var t=this.$lines.length;(i.action=="remove"&&i.start.row<t&&i.end.row<t||i.action=="insert"&&i.start.row<=t)&&this.applyDelta(i)},n.prototype.$splitAndapplyLargeDelta=function(i,t){for(var e=i.lines,r=e.length-t+1,a=i.start.row,u=i.start.column,p=0,M=0;p<r;p=M){M+=t-1;var w=e.slice(p,M);w.push(""),this.applyDelta({start:this.pos(a+p,u),end:this.pos(a+M,u=0),action:i.action,lines:w},!0)}i.lines=e.slice(p),i.start.row=a+p,i.start.column=u,this.applyDelta(i,!0)},n.prototype.revertDelta=function(i){this.$safeApplyDelta({start:this.clonePos(i.start),end:this.clonePos(i.end),action:i.action=="insert"?"remove":"insert",lines:i.lines.slice()})},n.prototype.indexToPosition=function(i,t){for(var e=this.$lines||this.getAllLines(),r=this.getNewLineCharacter().length,a=t||0,u=e.length;a<u;a++)if(i-=e[a].length+r,i<0)return{row:a,column:i+e[a].length+r};return{row:u-1,column:i+e[u-1].length+r}},n.prototype.positionToIndex=function(i,t){for(var e=this.$lines||this.getAllLines(),r=this.getNewLineCharacter().length,a=0,u=Math.min(i.row,e.length),p=t||0;p<u;++p)a+=e[p].length+r;return a+i.column},n.prototype.$split=function(i){return i.split(/\r\n|\r|\n/)},n}();o.prototype.$autoNewLine="",o.prototype.$newLineMode="auto",D.implement(o.prototype,A),I.Document=o}),ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(g,I,z){var D=g("./lib/oop"),S=g("./lib/event_emitter").EventEmitter,A=function(){function s(h,o){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=h;var n=this;this.$worker=function(){if(n.running){for(var i=new Date,t=n.currentLine,e=-1,r=n.doc,a=t;n.lines[t];)t++;var u=r.getLength(),p=0;for(n.running=!1;t<u;){n.$tokenizeRow(t),e=t;do t++;while(n.lines[t]);if(p++,p%5===0&&new Date-i>20){n.running=setTimeout(n.$worker,20);break}}n.currentLine=t,e==-1&&(e=t),a<=e&&n.fireUpdateEvent(a,e)}}}return s.prototype.setTokenizer=function(h){this.tokenizer=h,this.lines=[],this.states=[],this.start(0)},s.prototype.setDocument=function(h){this.doc=h,this.lines=[],this.states=[],this.stop()},s.prototype.fireUpdateEvent=function(h,o){var n={first:h,last:o};this._signal("update",{data:n})},s.prototype.start=function(h){this.currentLine=Math.min(h||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},s.prototype.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},s.prototype.$updateOnChange=function(h){var o=h.start.row,n=h.end.row-o;if(n===0)this.lines[o]=null;else if(h.action=="remove")this.lines.splice(o,n+1,null),this.states.splice(o,n+1,null);else{var i=Array(n+1);i.unshift(o,1),this.lines.splice.apply(this.lines,i),this.states.splice.apply(this.states,i)}this.currentLine=Math.min(o,this.currentLine,this.doc.getLength()),this.stop()},s.prototype.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},s.prototype.getTokens=function(h){return this.lines[h]||this.$tokenizeRow(h)},s.prototype.getState=function(h){return this.currentLine==h&&this.$tokenizeRow(h),this.states[h]||"start"},s.prototype.$tokenizeRow=function(h){var o=this.doc.getLine(h),n=this.states[h-1],i=this.tokenizer.getLineTokens(o,n,h);return this.states[h]+""!=i.state+""?(this.states[h]=i.state,this.lines[h+1]=null,this.currentLine>h+1&&(this.currentLine=h+1)):this.currentLine==h&&(this.currentLine=h+1),this.lines[h]=i.tokens},s.prototype.cleanup=function(){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.removeAllListeners()},s}();D.implement(A.prototype,S),I.BackgroundTokenizer=A}),ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/range"],function(g,I,z){var D=g("./lib/lang"),S=g("./range").Range,A=function(){function s(h,o,n){n===void 0&&(n="text"),this.setRegexp(h),this.clazz=o,this.type=n}return s.prototype.setRegexp=function(h){this.regExp+""!=h+""&&(this.regExp=h,this.cache=[])},s.prototype.update=function(h,o,n,i){if(this.regExp)for(var t=i.firstRow,e=i.lastRow,r={},a=t;a<=e;a++){var u=this.cache[a];u==null&&(u=D.getMatchOffsets(n.getLine(a),this.regExp),u.length>this.MAX_RANGES&&(u=u.slice(0,this.MAX_RANGES)),u=u.map(function(m){return new S(a,m.offset,a,m.offset+m.length)}),this.cache[a]=u.length?u:"");for(var p=u.length;p--;){var M=u[p].toScreenRange(n),w=M.toString();r[w]||(r[w]=!0,o.drawSingleLineMarker(h,M,this.clazz,i))}}},s}();A.prototype.MAX_RANGES=500,I.SearchHighlight=A}),ace.define("ace/undomanager",["require","exports","module","ace/range"],function(g,I,z){var D=function(){function m(){this.$keepRedoStack,this.$maxRev=0,this.$fromUndo=!1,this.$undoDepth=1/0,this.reset()}return m.prototype.addSession=function(d){this.$session=d},m.prototype.add=function(d,_,T){if(!this.$fromUndo&&d!=this.$lastDelta){if(this.$keepRedoStack||(this.$redoStack.length=0),_===!1||!this.lastDeltas){this.lastDeltas=[];var R=this.$undoStack.length;R>this.$undoDepth-1&&this.$undoStack.splice(0,R-this.$undoDepth+1),this.$undoStack.push(this.lastDeltas),d.id=this.$rev=++this.$maxRev}(d.action=="remove"||d.action=="insert")&&(this.$lastDelta=d),this.lastDeltas.push(d)}},m.prototype.addSelection=function(d,_){this.selections.push({value:d,rev:_||this.$rev})},m.prototype.startNewGroup=function(){return this.lastDeltas=null,this.$rev},m.prototype.markIgnored=function(d,_){_==null&&(_=this.$rev+1);for(var T=this.$undoStack,R=T.length;R--;){var $=T[R][0];if($.id<=d)break;$.id<_&&($.ignore=!0)}this.lastDeltas=null},m.prototype.getSelection=function(d,_){for(var T=this.selections,R=T.length;R--;){var $=T[R];if($.rev<d)return _&&($=T[R+1]),$}},m.prototype.getRevision=function(){return this.$rev},m.prototype.getDeltas=function(d,_){_==null&&(_=this.$rev+1);for(var T=this.$undoStack,R=null,$=0,k=T.length;k--;){var v=T[k][0];if(v.id<_&&!R&&(R=k+1),v.id<=d){$=k+1;break}}return T.slice($,R)},m.prototype.getChangedRanges=function(d,_){_==null&&(_=this.$rev+1)},m.prototype.getChangedLines=function(d,_){_==null&&(_=this.$rev+1)},m.prototype.undo=function(d,_){this.lastDeltas=null;var T=this.$undoStack;if(S(T,T.length)){d||(d=this.$session),this.$redoStackBaseRev!==this.$rev&&this.$redoStack.length&&(this.$redoStack=[]),this.$fromUndo=!0;var R=T.pop(),$=null;return R&&($=d.undoChanges(R,_),this.$redoStack.push(R),this.$syncRev()),this.$fromUndo=!1,$}},m.prototype.redo=function(d,_){if(this.lastDeltas=null,d||(d=this.$session),this.$fromUndo=!0,this.$redoStackBaseRev!=this.$rev){var T=this.getDeltas(this.$redoStackBaseRev,this.$rev+1);w(this.$redoStack,T),this.$redoStackBaseRev=this.$rev,this.$redoStack.forEach(function(k){k[0].id=++this.$maxRev},this)}var R=this.$redoStack.pop(),$=null;return R&&($=d.redoChanges(R,_),this.$undoStack.push(R),this.$syncRev()),this.$fromUndo=!1,$},m.prototype.$syncRev=function(){var d=this.$undoStack,_=d[d.length-1],T=_&&_[0].id||0;this.$redoStackBaseRev=T,this.$rev=T},m.prototype.reset=function(){this.lastDeltas=null,this.$lastDelta=null,this.$undoStack=[],this.$redoStack=[],this.$rev=0,this.mark=0,this.$redoStackBaseRev=this.$rev,this.selections=[]},m.prototype.canUndo=function(){return this.$undoStack.length>0},m.prototype.canRedo=function(){return this.$redoStack.length>0},m.prototype.bookmark=function(d){d==null&&(d=this.$rev),this.mark=d},m.prototype.isAtBookmark=function(){return this.$rev===this.mark},m.prototype.toJSON=function(){return{$redoStack:this.$redoStack,$undoStack:this.$undoStack}},m.prototype.fromJSON=function(d){this.reset(),this.$undoStack=d.$undoStack,this.$redoStack=d.$redoStack},m.prototype.$prettyPrint=function(d){return d?n(d):n(this.$undoStack)+`
---
`+n(this.$redoStack)},m}();D.prototype.hasUndo=D.prototype.canUndo,D.prototype.hasRedo=D.prototype.canRedo,D.prototype.isClean=D.prototype.isAtBookmark,D.prototype.markClean=D.prototype.bookmark;function S(m,d){for(var _=d;_--;){var T=m[_];if(T&&!T[0].ignore){for(;_<d-1;){var R=e(m[_],m[_+1]);m[_]=R[0],m[_+1]=R[1],_++}return!0}}}var A=g("./range").Range,s=A.comparePoints;A.comparePoints;function h(m){return{row:m.row,column:m.column}}function o(m){return{start:h(m.start),end:h(m.end),action:m.action,lines:m.lines.slice()}}function n(m){if(m=m||this,Array.isArray(m))return m.map(n).join(`
`);var d="";return m.action?(d=m.action=="insert"?"+":"-",d+="["+m.lines+"]"):m.value&&(Array.isArray(m.value)?d=m.value.map(i).join(`
`):d=i(m.value)),m.start&&(d+=i(m)),(m.id||m.rev)&&(d+="	("+(m.id||m.rev)+")"),d}function i(m){return m.start.row+":"+m.start.column+"=>"+m.end.row+":"+m.end.column}function t(m,d){var _=m.action=="insert",T=d.action=="insert";if(_&&T)if(s(d.start,m.end)>=0)a(d,m,-1);else if(s(d.start,m.start)<=0)a(m,d,1);else return null;else if(_&&!T)if(s(d.start,m.end)>=0)a(d,m,-1);else if(s(d.end,m.start)<=0)a(m,d,-1);else return null;else if(!_&&T)if(s(d.start,m.start)>=0)a(d,m,1);else if(s(d.start,m.start)<=0)a(m,d,1);else return null;else if(!_&&!T)if(s(d.start,m.start)>=0)a(d,m,1);else if(s(d.end,m.start)<=0)a(m,d,-1);else return null;return[d,m]}function e(m,d){for(var _=m.length;_--;)for(var T=0;T<d.length;T++)if(!t(m[_],d[T])){for(;_<m.length;){for(;T--;)t(d[T],m[_]);T=d.length,_++}return[m,d]}return m.selectionBefore=d.selectionBefore=m.selectionAfter=d.selectionAfter=null,[d,m]}function r(m,d){var _=m.action=="insert",T=d.action=="insert";if(_&&T)s(m.start,d.start)<0?a(d,m,1):a(m,d,1);else if(_&&!T)s(m.start,d.end)>=0?a(m,d,-1):(s(m.start,d.start)<=0||a(m,A.fromPoints(d.start,m.start),-1),a(d,m,1));else if(!_&&T)s(d.start,m.end)>=0?a(d,m,-1):(s(d.start,m.start)<=0||a(d,A.fromPoints(m.start,d.start),-1),a(m,d,1));else if(!_&&!T)if(s(d.start,m.end)>=0)a(d,m,-1);else if(s(d.end,m.start)<=0)a(m,d,-1);else{var R,$;return s(m.start,d.start)<0&&(R=m,m=p(m,d.start)),s(m.end,d.end)>0&&($=p(m,d.end)),u(d.end,m.start,m.end,-1),$&&!R&&(m.lines=$.lines,m.start=$.start,m.end=$.end,$=m),[d,R,$].filter(Boolean)}return[d,m]}function a(m,d,_){u(m.start,d.start,d.end,_),u(m.end,d.start,d.end,_)}function u(m,d,_,T){m.row==(T==1?d:_).row&&(m.column+=T*(_.column-d.column)),m.row+=T*(_.row-d.row)}function p(m,d){var _=m.lines,T=m.end;m.end=h(d);var R=m.end.row-m.start.row,$=_.splice(R,_.length),k=R?d.column:d.column-m.start.column;_.push($[0].substring(0,k)),$[0]=$[0].substr(k);var v={start:h(d),end:T,lines:$,action:m.action};return v}function M(m,d){d=o(d);for(var _=m.length;_--;){for(var T=m[_],R=0;R<T.length;R++){var $=T[R],k=r($,d);d=k[0],k.length!=2&&(k[2]?(T.splice(R+1,1,k[1],k[2]),R++):k[1]||(T.splice(R,1),R--))}T.length||m.splice(_,1)}return m}function w(m,d){for(var _=0;_<d.length;_++)for(var T=d[_],R=0;R<T.length;R++)M(m,T[R])}I.UndoManager=D}),ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(g,I,z){var D=g("../range").Range,S=function(){function A(s,h){this.foldData=s,Array.isArray(h)?this.folds=h:h=this.folds=[h];var o=h[h.length-1];this.range=new D(h[0].start.row,h[0].start.column,o.end.row,o.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(n){n.setFoldLine(this)},this)}return A.prototype.shiftRow=function(s){this.start.row+=s,this.end.row+=s,this.folds.forEach(function(h){h.start.row+=s,h.end.row+=s})},A.prototype.addFold=function(s){if(s.sameRow){if(s.start.row<this.startRow||s.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(s),this.folds.sort(function(h,o){return-h.range.compareEnd(o.start.row,o.start.column)}),this.range.compareEnd(s.start.row,s.start.column)>0?(this.end.row=s.end.row,this.end.column=s.end.column):this.range.compareStart(s.end.row,s.end.column)<0&&(this.start.row=s.start.row,this.start.column=s.start.column)}else if(s.start.row==this.end.row)this.folds.push(s),this.end.row=s.end.row,this.end.column=s.end.column;else if(s.end.row==this.start.row)this.folds.unshift(s),this.start.row=s.start.row,this.start.column=s.start.column;else throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");s.foldLine=this},A.prototype.containsRow=function(s){return s>=this.start.row&&s<=this.end.row},A.prototype.walk=function(s,h,o){var n=0,i=this.folds,t,e,r,a=!0;h==null&&(h=this.end.row,o=this.end.column);for(var u=0;u<i.length;u++){if(t=i[u],e=t.range.compareStart(h,o),e==-1){s(null,h,o,n,a);return}if(r=s(null,t.start.row,t.start.column,n,a),r=!r&&s(t.placeholder,t.start.row,t.start.column,n),r||e===0)return;a=!t.sameRow,n=t.end.column}s(null,h,o,n,a)},A.prototype.getNextFoldTo=function(s,h){for(var o,n,i=0;i<this.folds.length;i++){if(o=this.folds[i],n=o.range.compareEnd(s,h),n==-1)return{fold:o,kind:"after"};if(n===0)return{fold:o,kind:"inside"}}return null},A.prototype.addRemoveChars=function(s,h,o){var n=this.getNextFoldTo(s,h),i,t;if(n){if(i=n.fold,n.kind=="inside"&&i.start.column!=h&&i.start.row!=s)window.console&&window.console.log(s,h,i);else if(i.start.row==s){t=this.folds;var e=t.indexOf(i);for(e===0&&(this.start.column+=o),e;e<t.length;e++){if(i=t[e],i.start.column+=o,!i.sameRow)return;i.end.column+=o}this.end.column+=o}}},A.prototype.split=function(s,h){var o=this.getNextFoldTo(s,h);if(!o||o.kind=="inside")return null;var n=o.fold,i=this.folds,t=this.foldData,e=i.indexOf(n),r=i[e-1];this.end.row=r.end.row,this.end.column=r.end.column,i=i.splice(e,i.length-e);var a=new A(t,i);return t.splice(t.indexOf(this)+1,0,a),a},A.prototype.merge=function(s){for(var h=s.folds,o=0;o<h.length;o++)this.addFold(h[o]);var n=this.foldData;n.splice(n.indexOf(s),1)},A.prototype.toString=function(){var s=[this.range.toString()+": ["];return this.folds.forEach(function(h){s.push("  "+h.toString())}),s.push("]"),s.join(`
`)},A.prototype.idxToPosition=function(s){for(var h=0,o=0;o<this.folds.length;o++){var n=this.folds[o];if(s-=n.start.column-h,s<0)return{row:n.start.row,column:n.start.column+s};if(s-=n.placeholder.length,s<0)return n.start;h=n.end.column}return{row:this.end.row,column:this.end.column+s}},A}();I.FoldLine=S}),ace.define("ace/range_list",["require","exports","module","ace/range"],function(g,I,z){var D=g("./range").Range,S=D.comparePoints,A=function(){function s(){this.ranges=[],this.$bias=1}return s.prototype.pointIndex=function(h,o,n){for(var i=this.ranges,t=n||0;t<i.length;t++){var e=i[t],r=S(h,e.end);if(!(r>0)){var a=S(h,e.start);return r===0?o&&a!==0?-t-2:t:a>0||a===0&&!o?t:-t-1}}return-t-1},s.prototype.add=function(h){var o=!h.isEmpty(),n=this.pointIndex(h.start,o);n<0&&(n=-n-1);var i=this.pointIndex(h.end,o,n);return i<0?i=-i-1:i++,this.ranges.splice(n,i-n,h)},s.prototype.addList=function(h){for(var o=[],n=h.length;n--;)o.push.apply(o,this.add(h[n]));return o},s.prototype.substractPoint=function(h){var o=this.pointIndex(h);if(o>=0)return this.ranges.splice(o,1)},s.prototype.merge=function(){var h=[],o=this.ranges;o=o.sort(function(r,a){return S(r.start,a.start)});for(var n=o[0],i,t=1;t<o.length;t++){i=n,n=o[t];var e=S(i.end,n.start);e<0||e==0&&!i.isEmpty()&&!n.isEmpty()||(S(i.end,n.end)<0&&(i.end.row=n.end.row,i.end.column=n.end.column),o.splice(t,1),h.push(n),n=i,t--)}return this.ranges=o,h},s.prototype.contains=function(h,o){return this.pointIndex({row:h,column:o})>=0},s.prototype.containsPoint=function(h){return this.pointIndex(h)>=0},s.prototype.rangeAtPoint=function(h){var o=this.pointIndex(h);if(o>=0)return this.ranges[o]},s.prototype.clipRows=function(h,o){var n=this.ranges;if(n[0].start.row>o||n[n.length-1].start.row<h)return[];var i=this.pointIndex({row:h,column:0});i<0&&(i=-i-1);var t=this.pointIndex({row:o,column:0},i);t<0&&(t=-t-1);for(var e=[],r=i;r<t;r++)e.push(n[r]);return e},s.prototype.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},s.prototype.attach=function(h){this.session&&this.detach(),this.session=h,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},s.prototype.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},s.prototype.$onChange=function(h){for(var o=h.start,n=h.end,i=o.row,t=n.row,e=this.ranges,r=0,a=e.length;r<a;r++){var u=e[r];if(u.end.row>=i)break}if(h.action=="insert")for(var p=t-i,M=-o.column+n.column;r<a;r++){var u=e[r];if(u.start.row>i)break;if(u.start.row==i&&u.start.column>=o.column&&(u.start.column==o.column&&this.$bias<=0||(u.start.column+=M,u.start.row+=p)),u.end.row==i&&u.end.column>=o.column){if(u.end.column==o.column&&this.$bias<0)continue;u.end.column==o.column&&M>0&&r<a-1&&u.end.column>u.start.column&&u.end.column==e[r+1].start.column&&(u.end.column-=M),u.end.column+=M,u.end.row+=p}}else for(var p=i-t,M=o.column-n.column;r<a;r++){var u=e[r];if(u.start.row>t)break;u.end.row<t&&(i<u.end.row||i==u.end.row&&o.column<u.end.column)?(u.end.row=i,u.end.column=o.column):u.end.row==t?u.end.column<=n.column?(p||u.end.column>o.column)&&(u.end.column=o.column,u.end.row=o.row):(u.end.column+=M,u.end.row+=p):u.end.row>t&&(u.end.row+=p),u.start.row<t&&(i<u.start.row||i==u.start.row&&o.column<u.start.column)?(u.start.row=i,u.start.column=o.column):u.start.row==t?u.start.column<=n.column?(p||u.start.column>o.column)&&(u.start.column=o.column,u.start.row=o.row):(u.start.column+=M,u.start.row+=p):u.start.row>t&&(u.start.row+=p)}if(p!=0&&r<a)for(;r<a;r++){var u=e[r];u.start.row+=p,u.end.row+=p}},s}();A.prototype.comparePoints=S,I.RangeList=A}),ace.define("ace/edit_session/fold",["require","exports","module","ace/range_list"],function(g,I,z){var D=this&&this.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(r[u]=a[u])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),S=g("../range_list").RangeList,A=function(i){D(t,i);function t(e,r){var a=i.call(this)||this;return a.foldLine=null,a.placeholder=r,a.range=e,a.start=e.start,a.end=e.end,a.sameRow=e.start.row==e.end.row,a.subFolds=a.ranges=[],a}return t.prototype.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},t.prototype.setFoldLine=function(e){this.foldLine=e,this.subFolds.forEach(function(r){r.setFoldLine(e)})},t.prototype.clone=function(){var e=this.range.clone(),r=new t(e,this.placeholder);return this.subFolds.forEach(function(a){r.subFolds.push(a.clone())}),r.collapseChildren=this.collapseChildren,r},t.prototype.addSubFold=function(e){if(!this.range.isEqual(e)){h(e,this.start);for(var M=e.start.row,w=e.start.column,r=0,a=-1;r<this.subFolds.length&&(a=this.subFolds[r].range.compare(M,w),a==1);r++);var u=this.subFolds[r],p=0;if(a==0){if(u.range.containsRange(e))return u.addSubFold(e);p=1}for(var M=e.range.end.row,w=e.range.end.column,m=r,a=-1;m<this.subFolds.length&&(a=this.subFolds[m].range.compare(M,w),a==1);m++);a==0&&m++;for(var d=this.subFolds.splice(r,m-r,e),_=a==0?d.length-1:d.length,T=p;T<_;T++)e.addSubFold(d[T]);return e.setFoldLine(this.foldLine),e}},t.prototype.restoreRange=function(e){return n(e,this.start)},t}(S);function s(i,t){i.row-=t.row,i.row==0&&(i.column-=t.column)}function h(i,t){s(i.start,t),s(i.end,t)}function o(i,t){i.row==0&&(i.column+=t.column),i.row+=t.row}function n(i,t){o(i.start,t),o(i.end,t)}I.Fold=A}),ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator","ace/mouse/mouse_event"],function(g,I,z){var D=g("../range").Range,S=g("./fold_line").FoldLine,A=g("./fold").Fold,s=g("../token_iterator").TokenIterator,h=g("../mouse/mouse_event").MouseEvent;function o(){this.getFoldAt=function(n,i,t){var e=this.getFoldLine(n);if(!e)return null;for(var r=e.folds,a=0;a<r.length;a++){var u=r[a].range;if(u.contains(n,i)){if(t==1&&u.isEnd(n,i)&&!u.isEmpty())continue;if(t==-1&&u.isStart(n,i)&&!u.isEmpty())continue;return r[a]}}},this.getFoldsInRange=function(n){var i=n.start,t=n.end,e=this.$foldData,r=[];i.column+=1,t.column-=1;for(var a=0;a<e.length;a++){var u=e[a].range.compareRange(n);if(u!=2){if(u==-2)break;for(var p=e[a].folds,M=0;M<p.length;M++){var w=p[M];if(u=w.range.compareRange(n),u==-2)break;if(u==2)continue;if(u==42)break;r.push(w)}}}return i.column-=1,t.column+=1,r},this.getFoldsInRangeList=function(n){if(Array.isArray(n)){var i=[];n.forEach(function(t){i=i.concat(this.getFoldsInRange(t))},this)}else var i=this.getFoldsInRange(n);return i},this.getAllFolds=function(){for(var n=[],i=this.$foldData,t=0;t<i.length;t++)for(var e=0;e<i[t].folds.length;e++)n.push(i[t].folds[e]);return n},this.getFoldStringAt=function(n,i,t,e){if(e=e||this.getFoldLine(n),!e)return null;for(var r={end:{column:0}},a,u,p=0;p<e.folds.length;p++){u=e.folds[p];var M=u.range.compareEnd(n,i);if(M==-1){a=this.getLine(u.start.row).substring(r.end.column,u.start.column);break}else if(M===0)return null;r=u}return a||(a=this.getLine(u.start.row).substring(r.end.column)),t==-1?a.substring(0,i-r.end.column):t==1?a.substring(i-r.end.column):a},this.getFoldLine=function(n,i){var t=this.$foldData,e=0;for(i&&(e=t.indexOf(i)),e==-1&&(e=0),e;e<t.length;e++){var r=t[e];if(r.start.row<=n&&r.end.row>=n)return r;if(r.end.row>n)return null}return null},this.getNextFoldLine=function(n,i){var t=this.$foldData,e=0;for(i&&(e=t.indexOf(i)),e==-1&&(e=0),e;e<t.length;e++){var r=t[e];if(r.end.row>=n)return r}return null},this.getFoldedRowCount=function(n,i){for(var t=this.$foldData,e=i-n+1,r=0;r<t.length;r++){var a=t[r],u=a.end.row,p=a.start.row;if(u>=i){p<i&&(p>=n?e-=i-p:e=0);break}else u>=n&&(p>=n?e-=u-p:e-=u-n+1)}return e},this.$addFoldLine=function(n){return this.$foldData.push(n),this.$foldData.sort(function(i,t){return i.start.row-t.start.row}),n},this.addFold=function(n,i){var t=this.$foldData,e=!1,r;n instanceof A?r=n:(r=new A(i,n),r.collapseChildren=i.collapseChildren),this.$clipRangeToDocument(r.range);var a=r.start.row,u=r.start.column,p=r.end.row,M=r.end.column,w=this.getFoldAt(a,u,1),m=this.getFoldAt(p,M,-1);if(w&&m==w)return w.addSubFold(r);w&&!w.range.isStart(a,u)&&this.removeFold(w),m&&!m.range.isEnd(p,M)&&this.removeFold(m);var d=this.getFoldsInRange(r.range);d.length>0&&(this.removeFolds(d),r.collapseChildren||d.forEach(function($){r.addSubFold($)}));for(var _=0;_<t.length;_++){var T=t[_];if(p==T.start.row){T.addFold(r),e=!0;break}else if(a==T.end.row){if(T.addFold(r),e=!0,!r.sameRow){var R=t[_+1];if(R&&R.start.row==p){T.merge(R);break}}break}else if(p<=T.start.row)break}return e||(T=this.$addFoldLine(new S(this.$foldData,r))),this.$useWrapMode?this.$updateWrapData(T.start.row,T.start.row):this.$updateRowLengthCache(T.start.row,T.start.row),this.$modified=!0,this._signal("changeFold",{data:r,action:"add"}),r},this.addFolds=function(n){n.forEach(function(i){this.addFold(i)},this)},this.removeFold=function(n){var i=n.foldLine,t=i.start.row,e=i.end.row,r=this.$foldData,a=i.folds;if(a.length==1)r.splice(r.indexOf(i),1);else if(i.range.isEnd(n.end.row,n.end.column))a.pop(),i.end.row=a[a.length-1].end.row,i.end.column=a[a.length-1].end.column;else if(i.range.isStart(n.start.row,n.start.column))a.shift(),i.start.row=a[0].start.row,i.start.column=a[0].start.column;else if(n.sameRow)a.splice(a.indexOf(n),1);else{var u=i.split(n.start.row,n.start.column);a=u.folds,a.shift(),u.start.row=a[0].start.row,u.start.column=a[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(t,e):this.$updateRowLengthCache(t,e)),this.$modified=!0,this._signal("changeFold",{data:n,action:"remove"})},this.removeFolds=function(n){for(var i=[],t=0;t<n.length;t++)i.push(n[t]);i.forEach(function(e){this.removeFold(e)},this),this.$modified=!0},this.expandFold=function(n){this.removeFold(n),n.subFolds.forEach(function(i){n.restoreRange(i),this.addFold(i)},this),n.collapseChildren>0&&this.foldAll(n.start.row+1,n.end.row,n.collapseChildren-1),n.subFolds=[]},this.expandFolds=function(n){n.forEach(function(i){this.expandFold(i)},this)},this.unfold=function(n,i){var t,e;if(n==null)t=new D(0,0,this.getLength(),0),i==null&&(i=!0);else if(typeof n=="number")t=new D(n,0,n,this.getLine(n).length);else if("row"in n)t=D.fromPoints(n,n);else{if(Array.isArray(n))return e=[],n.forEach(function(a){e=e.concat(this.unfold(a))},this),e;t=n}e=this.getFoldsInRangeList(t);for(var r=e;e.length==1&&D.comparePoints(e[0].start,t.start)<0&&D.comparePoints(e[0].end,t.end)>0;)this.expandFolds(e),e=this.getFoldsInRangeList(t);if(i!=!1?this.removeFolds(e):this.expandFolds(e),r.length)return r},this.isRowFolded=function(n,i){return!!this.getFoldLine(n,i)},this.getRowFoldEnd=function(n,i){var t=this.getFoldLine(n,i);return t?t.end.row:n},this.getRowFoldStart=function(n,i){var t=this.getFoldLine(n,i);return t?t.start.row:n},this.getFoldDisplayLine=function(n,i,t,e,r){e==null&&(e=n.start.row),r==null&&(r=0),i==null&&(i=n.end.row),t==null&&(t=this.getLine(i).length);var a=this.doc,u="";return n.walk(function(p,M,w,m){if(!(M<e)){if(M==e){if(w<r)return;m=Math.max(r,m)}p!=null?u+=p:u+=a.getLine(M).substring(m,w)}},i,t),u},this.getDisplayLine=function(n,i,t,e){var r=this.getFoldLine(n);if(r)return this.getFoldDisplayLine(r,n,i,t,e);var a;return a=this.doc.getLine(n),a.substring(e||0,i||a.length)},this.$cloneFoldData=function(){var n=[];return n=this.$foldData.map(function(i){var t=i.folds.map(function(e){return e.clone()});return new S(n,t)}),n},this.toggleFold=function(n){var i=this.selection,t=i.getRange(),e,r;if(t.isEmpty()){var a=t.start;if(e=this.getFoldAt(a.row,a.column),e){this.expandFold(e);return}else(r=this.findMatchingBracket(a))?t.comparePoint(r)==1?t.end=r:(t.start=r,t.start.column++,t.end.column--):(r=this.findMatchingBracket({row:a.row,column:a.column+1}))?(t.comparePoint(r)==1?t.end=r:t.start=r,t.start.column++):t=this.getCommentFoldRange(a.row,a.column)||t}else{var u=this.getFoldsInRange(t);if(n&&u.length){this.expandFolds(u);return}else u.length==1&&(e=u[0])}if(e||(e=this.getFoldAt(t.start.row,t.start.column)),e&&e.range.toString()==t.toString()){this.expandFold(e);return}var p="...";if(!t.isMultiLine()){if(p=this.getTextRange(t),p.length<4)return;p=p.trim().substring(0,2)+".."}this.addFold(p,t)},this.getCommentFoldRange=function(n,i,t){var e=new s(this,n,i),r=e.getCurrentToken(),a=r&&r.type;if(r&&/^comment|string/.test(a)){a=a.match(/comment|string/)[0],a=="comment"&&(a+="|doc-start|\\.doc");var u=new RegExp(a),p=new D;if(t!=1){do r=e.stepBackward();while(r&&u.test(r.type));r=e.stepForward()}p.start.row=e.getCurrentTokenRow(),p.start.column=e.getCurrentTokenColumn()+r.value.length,e=new s(this,n,i);var M=this.getState(e.$row);if(t!=-1){var w=-1;do if(r=e.stepForward(),w==-1){var m=this.getState(e.$row);M.toString()!==m.toString()&&(w=e.$row)}else if(e.$row>w)break;while(r&&u.test(r.type));r=e.stepBackward()}else r=e.getCurrentToken();return p.end.row=e.getCurrentTokenRow(),p.end.column=e.getCurrentTokenColumn(),p}},this.foldAll=function(n,i,t,e){t==null&&(t=1e5);var r=this.foldWidgets;if(r){i=i||this.getLength(),n=n||0;for(var a=n;a<i;a++)if(r[a]==null&&(r[a]=this.getFoldWidget(a)),r[a]=="start"&&!(e&&!e(a))){var u=this.getFoldWidgetRange(a);u&&u.isMultiLine()&&u.end.row<=i&&u.start.row>=n&&(a=u.end.row,u.collapseChildren=t,this.addFold("...",u))}}},this.foldToLevel=function(n){for(this.foldAll();n-- >0;)this.unfold(null,!1)},this.foldAllComments=function(){var n=this;this.foldAll(null,null,null,function(i){for(var t=n.getTokens(i),e=0;e<t.length;e++){var r=t[e];if(!(r.type=="text"&&/^\s+$/.test(r.value)))return!!/comment/.test(r.type)}})},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(n){if(!this.$foldStyles[n])throw new Error("invalid fold style: "+n+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=n){this.$foldStyle=n,n=="manual"&&this.unfold();var i=this.$foldMode;this.$setFolding(null),this.$setFolding(i)}},this.$setFolding=function(n){if(this.$foldMode!=n){if(this.$foldMode=n,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),!n||this.$foldStyle=="manual"){this.foldWidgets=null;return}this.foldWidgets=[],this.getFoldWidget=n.getFoldWidget.bind(n,this,this.$foldStyle),this.getFoldWidgetRange=n.getFoldWidgetRange.bind(n,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)}},this.getParentFoldRangeData=function(n,i){var t=this.foldWidgets;if(!t||i&&t[n])return{};for(var e=n-1,r;e>=0;){var a=t[e];if(a==null&&(a=t[e]=this.getFoldWidget(e)),a=="start"){var u=this.getFoldWidgetRange(e);if(r||(r=u),u&&u.end.row>=n)break}e--}return{range:e!==-1&&u,firstRange:r}},this.onFoldWidgetClick=function(n,i){i instanceof h&&(i=i.domEvent);var t={children:i.shiftKey,all:i.ctrlKey||i.metaKey,siblings:i.altKey},e=this.$toggleFoldWidget(n,t);if(!e){var r=i.target||i.srcElement;r&&/ace_fold-widget/.test(r.className)&&(r.className+=" ace_invalid")}},this.$toggleFoldWidget=function(n,i){if(this.getFoldWidget){var t=this.getFoldWidget(n),e=this.getLine(n),r=t==="end"?-1:1,a=this.getFoldAt(n,r===-1?0:e.length,r);if(a)return i.children||i.all?this.removeFold(a):this.expandFold(a),a;var u=this.getFoldWidgetRange(n,!0);if(u&&!u.isMultiLine()&&(a=this.getFoldAt(u.start.row,u.start.column,1),a&&u.isEqual(a.range)))return this.removeFold(a),a;if(i.siblings){var p=this.getParentFoldRangeData(n);if(p.range)var M=p.range.start.row+1,w=p.range.end.row;this.foldAll(M,w,i.all?1e4:0)}else i.children?(w=u?u.end.row:this.getLength(),this.foldAll(n+1,w,i.all?1e4:0)):u&&(i.all&&(u.collapseChildren=1e4),this.addFold("...",u));return u}},this.toggleFoldWidget=function(n){var i=this.selection.getCursor().row;i=this.getRowFoldStart(i);var t=this.$toggleFoldWidget(i,{});if(!t){var e=this.getParentFoldRangeData(i,!0);if(t=e.range||e.firstRange,t){i=t.start.row;var r=this.getFoldAt(i,this.getLine(i).length,1);r?this.removeFold(r):this.addFold("...",t)}}},this.updateFoldWidgets=function(n){var i=n.start.row,t=n.end.row-i;if(t===0)this.foldWidgets[i]=null;else if(n.action=="remove")this.foldWidgets.splice(i,t+1,null);else{var e=Array(t+1);e.unshift(i,1),this.foldWidgets.splice.apply(this.foldWidgets,e)}},this.tokenizerUpdateFoldWidgets=function(n){var i=n.data;i.first!=i.last&&this.foldWidgets.length>i.first&&this.foldWidgets.splice(i.first,this.foldWidgets.length)}}I.Folding=o}),ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(g,I,z){var D=g("../token_iterator").TokenIterator,S=g("../range").Range;function A(){this.findMatchingBracket=function(s,h){if(s.column==0)return null;var o=h||this.getLine(s.row).charAt(s.column-1);if(o=="")return null;var n=o.match(/([\(\[\{])|([\)\]\}])/);return n?n[1]?this.$findClosingBracket(n[1],s):this.$findOpeningBracket(n[2],s):null},this.getBracketRange=function(s){var h=this.getLine(s.row),o=!0,n,i=h.charAt(s.column-1),t=i&&i.match(/([\(\[\{])|([\)\]\}])/);if(t||(i=h.charAt(s.column),s={row:s.row,column:s.column+1},t=i&&i.match(/([\(\[\{])|([\)\]\}])/),o=!1),!t)return null;if(t[1]){var e=this.$findClosingBracket(t[1],s);if(!e)return null;n=S.fromPoints(s,e),o||(n.end.column++,n.start.column--),n.cursor=n.end}else{var e=this.$findOpeningBracket(t[2],s);if(!e)return null;n=S.fromPoints(e,s),o||(n.start.column++,n.end.column--),n.cursor=n.start}return n},this.getMatchingBracketRanges=function(s,h){var o=this.getLine(s.row),n=/([\(\[\{])|([\)\]\}])/,i=!h&&o.charAt(s.column-1),t=i&&i.match(n);if(t||(i=(h===void 0||h)&&o.charAt(s.column),s={row:s.row,column:s.column+1},t=i&&i.match(n)),!t)return null;var e=new S(s.row,s.column-1,s.row,s.column),r=t[1]?this.$findClosingBracket(t[1],s):this.$findOpeningBracket(t[2],s);if(!r)return[e];var a=new S(r.row,r.column,r.row,r.column+1);return[e,a]},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{","<":">",">":"<"},this.$findOpeningBracket=function(s,h,o){var n=this.$brackets[s],i=1,t=new D(this,h.row,h.column),e=t.getCurrentToken();if(e||(e=t.stepForward()),!!e){o||(o=new RegExp("(\\.?"+e.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)").replace(/-close\b/,"-(close|open)")+")+"));for(var r=h.column-t.getCurrentTokenColumn()-2,a=e.value;;){for(;r>=0;){var u=a.charAt(r);if(u==n){if(i-=1,i==0)return{row:t.getCurrentTokenRow(),column:r+t.getCurrentTokenColumn()}}else u==s&&(i+=1);r-=1}do e=t.stepBackward();while(e&&!o.test(e.type));if(e==null)break;a=e.value,r=a.length-1}return null}},this.$findClosingBracket=function(s,h,o){var n=this.$brackets[s],i=1,t=new D(this,h.row,h.column),e=t.getCurrentToken();if(e||(e=t.stepForward()),!!e){o||(o=new RegExp("(\\.?"+e.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)").replace(/-open\b/,"-(close|open)")+")+"));for(var r=h.column-t.getCurrentTokenColumn();;){for(var a=e.value,u=a.length;r<u;){var p=a.charAt(r);if(p==n){if(i-=1,i==0)return{row:t.getCurrentTokenRow(),column:r+t.getCurrentTokenColumn()}}else p==s&&(i+=1);r+=1}do e=t.stepForward();while(e&&!o.test(e.type));if(e==null)break;r=0}return null}},this.getMatchingTags=function(s){var h=new D(this,s.row,s.column),o=this.$findTagName(h);if(o){var n=h.stepBackward();return n.value==="<"?this.$findClosingTag(h,o):this.$findOpeningTag(h,o)}},this.$findTagName=function(s){var h=s.getCurrentToken(),o=!1,n=!1;if(h&&h.type.indexOf("tag-name")===-1)do n?h=s.stepBackward():h=s.stepForward(),h&&(h.value==="/>"?n=!0:h.type.indexOf("tag-name")!==-1&&(o=!0));while(h&&!o);return h},this.$findClosingTag=function(s,h){var o,n=h.value,i=h.value,t=0,e=new S(s.getCurrentTokenRow(),s.getCurrentTokenColumn(),s.getCurrentTokenRow(),s.getCurrentTokenColumn()+1);h=s.stepForward();var r=new S(s.getCurrentTokenRow(),s.getCurrentTokenColumn(),s.getCurrentTokenRow(),s.getCurrentTokenColumn()+h.value.length),a=!1;do{if(o=h,o.type.indexOf("tag-close")!==-1&&!a){var u=new S(s.getCurrentTokenRow(),s.getCurrentTokenColumn(),s.getCurrentTokenRow(),s.getCurrentTokenColumn()+1);a=!0}if(h=s.stepForward(),h){if(h.value===">"&&!a){var u=new S(s.getCurrentTokenRow(),s.getCurrentTokenColumn(),s.getCurrentTokenRow(),s.getCurrentTokenColumn()+1);a=!0}if(h.type.indexOf("tag-name")!==-1){if(n=h.value,i===n){if(o.value==="<")t++;else if(o.value==="</"&&(t--,t<0)){s.stepBackward();var p=new S(s.getCurrentTokenRow(),s.getCurrentTokenColumn(),s.getCurrentTokenRow(),s.getCurrentTokenColumn()+2);h=s.stepForward();var M=new S(s.getCurrentTokenRow(),s.getCurrentTokenColumn(),s.getCurrentTokenRow(),s.getCurrentTokenColumn()+h.value.length);if(h.type.indexOf("tag-close")===-1&&(h=s.stepForward()),h&&h.value===">")var w=new S(s.getCurrentTokenRow(),s.getCurrentTokenColumn(),s.getCurrentTokenRow(),s.getCurrentTokenColumn()+1);else return}}}else if(i===n&&h.value==="/>"&&(t--,t<0))var p=new S(s.getCurrentTokenRow(),s.getCurrentTokenColumn(),s.getCurrentTokenRow(),s.getCurrentTokenColumn()+2),M=p,w=M,u=new S(r.end.row,r.end.column,r.end.row,r.end.column+1)}}while(h&&t>=0);if(e&&u&&p&&w&&r&&M)return{openTag:new S(e.start.row,e.start.column,u.end.row,u.end.column),closeTag:new S(p.start.row,p.start.column,w.end.row,w.end.column),openTagName:r,closeTagName:M}},this.$findOpeningTag=function(s,h){var o=s.getCurrentToken(),n=h.value,i=0,t=s.getCurrentTokenRow(),e=s.getCurrentTokenColumn(),r=e+2,a=new S(t,e,t,r);s.stepForward();var u=new S(s.getCurrentTokenRow(),s.getCurrentTokenColumn(),s.getCurrentTokenRow(),s.getCurrentTokenColumn()+h.value.length);if(h.type.indexOf("tag-close")===-1&&(h=s.stepForward()),!(!h||h.value!==">")){var p=new S(s.getCurrentTokenRow(),s.getCurrentTokenColumn(),s.getCurrentTokenRow(),s.getCurrentTokenColumn()+1);s.stepBackward(),s.stepBackward();do if(h=o,t=s.getCurrentTokenRow(),e=s.getCurrentTokenColumn(),r=e+h.value.length,o=s.stepBackward(),h){if(h.type.indexOf("tag-name")!==-1){if(n===h.value)if(o.value==="<"){if(i++,i>0){var M=new S(t,e,t,r),w=new S(s.getCurrentTokenRow(),s.getCurrentTokenColumn(),s.getCurrentTokenRow(),s.getCurrentTokenColumn()+1);do h=s.stepForward();while(h&&h.value!==">");var m=new S(s.getCurrentTokenRow(),s.getCurrentTokenColumn(),s.getCurrentTokenRow(),s.getCurrentTokenColumn()+1)}}else o.value==="</"&&i--}else if(h.value==="/>"){for(var d=0,_=o;_;){if(_.type.indexOf("tag-name")!==-1&&_.value===n){i--;break}else if(_.value==="<")break;_=s.stepBackward(),d++}for(var T=0;T<d;T++)s.stepForward()}}while(o&&i<=0);if(w&&m&&a&&p&&M&&u)return{openTag:new S(w.start.row,w.start.column,m.end.row,m.end.column),closeTag:new S(a.start.row,a.start.column,p.end.row,p.end.column),openTagName:M,closeTagName:u}}}}I.BracketMatch=A}),ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/bidihandler","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/undomanager","ace/edit_session/folding","ace/edit_session/bracket_match"],function(g,I,z){var D=g("./lib/oop"),S=g("./lib/lang"),A=g("./bidihandler").BidiHandler,s=g("./config"),h=g("./lib/event_emitter").EventEmitter,o=g("./selection").Selection,n=g("./mode/text").Mode,i=g("./range").Range,t=g("./document").Document,e=g("./background_tokenizer").BackgroundTokenizer,r=g("./search_highlight").SearchHighlight,a=g("./undomanager").UndoManager,u=function(){function k(v,b){this.doc,this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.id="session"+ ++k.$uid,this.$foldData.toString=function(){return this.join(`
`)},this.bgTokenizer=new e(new n().getTokenizer(),this);var l=this;this.bgTokenizer.on("update",function(C){l._signal("tokenizerUpdate",C)}),this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),(typeof v!="object"||!v.getLine)&&(v=new t(v)),this.setDocument(v),this.selection=new o(this),this.$bidiHandler=new A(this),s.resetOptions(this),this.setMode(b),s._signal("session",this),this.destroyed=!1}return k.prototype.setDocument=function(v){this.doc&&this.doc.off("change",this.$onChange),this.doc=v,v.on("change",this.$onChange,!0),this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},k.prototype.getDocument=function(){return this.doc},k.prototype.$resetRowCache=function(v){if(!v){this.$docRowCache=[],this.$screenRowCache=[];return}var b=this.$docRowCache.length,l=this.$getRowCacheIndex(this.$docRowCache,v)+1;b>l&&(this.$docRowCache.splice(l,b),this.$screenRowCache.splice(l,b))},k.prototype.$getRowCacheIndex=function(v,b){for(var l=0,C=v.length-1;l<=C;){var O=l+C>>1,N=v[O];if(b>N)l=O+1;else if(b<N)C=O-1;else return O}return l-1},k.prototype.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.destroyed||this.bgTokenizer.start(0)},k.prototype.onChangeFold=function(v){var b=v.data;this.$resetRowCache(b.start.row)},k.prototype.onChange=function(v){this.$modified=!0,this.$bidiHandler.onChange(v),this.$resetRowCache(v.start.row);var b=this.$updateInternalDataOnChange(v);!this.$fromUndo&&this.$undoManager&&(b&&b.length&&(this.$undoManager.add({action:"removeFolds",folds:b},this.mergeUndoDeltas),this.mergeUndoDeltas=!0),this.$undoManager.add(v,this.mergeUndoDeltas),this.mergeUndoDeltas=!0,this.$informUndoManager.schedule()),this.bgTokenizer.$updateOnChange(v),this._signal("change",v)},k.prototype.setValue=function(v){this.doc.setValue(v),this.selection.moveTo(0,0),this.$resetRowCache(0),this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},k.fromJSON=function(v){typeof v=="string"&&(v=JSON.parse(v));var b=new a;b.$undoStack=v.history.undo,b.$redoStack=v.history.redo,b.mark=v.history.mark,b.$rev=v.history.rev;var l=new k(v.value);return v.folds.forEach(function(C){l.addFold("...",i.fromPoints(C.start,C.end))}),l.setAnnotations(v.annotations),l.setBreakpoints(v.breakpoints),l.setMode(v.mode),l.setScrollLeft(v.scrollLeft),l.setScrollTop(v.scrollTop),l.setUndoManager(b),l.selection.fromJSON(v.selection),l},k.prototype.toJSON=function(){return{annotations:this.$annotations,breakpoints:this.$breakpoints,folds:this.getAllFolds().map(function(v){return v.range}),history:this.getUndoManager(),mode:this.$mode.$id,scrollLeft:this.$scrollLeft,scrollTop:this.$scrollTop,selection:this.selection.toJSON(),value:this.doc.getValue()}},k.prototype.toString=function(){return this.doc.getValue()},k.prototype.getSelection=function(){return this.selection},k.prototype.getState=function(v){return this.bgTokenizer.getState(v)},k.prototype.getTokens=function(v){return this.bgTokenizer.getTokens(v)},k.prototype.getTokenAt=function(v,b){var l=this.bgTokenizer.getTokens(v),C,O=0;if(b==null){var N=l.length-1;O=this.getLine(v).length}else for(var N=0;N<l.length&&(O+=l[N].value.length,!(O>=b));N++);return C=l[N],C?(C.index=N,C.start=O-C.value.length,C):null},k.prototype.setUndoManager=function(v){if(this.$undoManager=v,this.$informUndoManager&&this.$informUndoManager.cancel(),v){var b=this;v.addSession(this),this.$syncInformUndoManager=function(){b.$informUndoManager.cancel(),b.mergeUndoDeltas=!1},this.$informUndoManager=S.delayedCall(this.$syncInformUndoManager)}else this.$syncInformUndoManager=function(){}},k.prototype.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},k.prototype.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},k.prototype.getTabString=function(){return this.getUseSoftTabs()?S.stringRepeat(" ",this.getTabSize()):"	"},k.prototype.setUseSoftTabs=function(v){this.setOption("useSoftTabs",v)},k.prototype.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},k.prototype.setTabSize=function(v){this.setOption("tabSize",v)},k.prototype.getTabSize=function(){return this.$tabSize},k.prototype.isTabStop=function(v){return this.$useSoftTabs&&v.column%this.$tabSize===0},k.prototype.setNavigateWithinSoftTabs=function(v){this.setOption("navigateWithinSoftTabs",v)},k.prototype.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},k.prototype.setOverwrite=function(v){this.setOption("overwrite",v)},k.prototype.getOverwrite=function(){return this.$overwrite},k.prototype.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},k.prototype.addGutterDecoration=function(v,b){this.$decorations[v]||(this.$decorations[v]=""),this.$decorations[v]+=" "+b,this._signal("changeBreakpoint",{})},k.prototype.removeGutterDecoration=function(v,b){this.$decorations[v]=(this.$decorations[v]||"").replace(" "+b,""),this._signal("changeBreakpoint",{})},k.prototype.getBreakpoints=function(){return this.$breakpoints},k.prototype.setBreakpoints=function(v){this.$breakpoints=[];for(var b=0;b<v.length;b++)this.$breakpoints[v[b]]="ace_breakpoint";this._signal("changeBreakpoint",{})},k.prototype.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},k.prototype.setBreakpoint=function(v,b){b===void 0&&(b="ace_breakpoint"),b?this.$breakpoints[v]=b:delete this.$breakpoints[v],this._signal("changeBreakpoint",{})},k.prototype.clearBreakpoint=function(v){delete this.$breakpoints[v],this._signal("changeBreakpoint",{})},k.prototype.addMarker=function(v,b,l,C){var O=this.$markerId++,N={range:v,type:l||"line",renderer:typeof l=="function"?l:null,clazz:b,inFront:!!C,id:O};return C?(this.$frontMarkers[O]=N,this._signal("changeFrontMarker")):(this.$backMarkers[O]=N,this._signal("changeBackMarker")),O},k.prototype.addDynamicMarker=function(v,b){if(v.update){var l=this.$markerId++;return v.id=l,v.inFront=!!b,b?(this.$frontMarkers[l]=v,this._signal("changeFrontMarker")):(this.$backMarkers[l]=v,this._signal("changeBackMarker")),v}},k.prototype.removeMarker=function(v){var b=this.$frontMarkers[v]||this.$backMarkers[v];if(b){var l=b.inFront?this.$frontMarkers:this.$backMarkers;delete l[v],this._signal(b.inFront?"changeFrontMarker":"changeBackMarker")}},k.prototype.getMarkers=function(v){return v?this.$frontMarkers:this.$backMarkers},k.prototype.highlight=function(v){if(!this.$searchHighlight){var b=new r(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(b)}this.$searchHighlight.setRegexp(v)},k.prototype.highlightLines=function(v,b,l,C){typeof b!="number"&&(l=b,b=v),l||(l="ace_step");var O=new i(v,0,b,1/0);return O.id=this.addMarker(O,l,"fullLine",C),O},k.prototype.setAnnotations=function(v){this.$annotations=v,this._signal("changeAnnotation",{})},k.prototype.getAnnotations=function(){return this.$annotations||[]},k.prototype.clearAnnotations=function(){this.setAnnotations([])},k.prototype.$detectNewLine=function(v){var b=v.match(/^.*?(\r?\n)/m);b?this.$autoNewLine=b[1]:this.$autoNewLine=`
`},k.prototype.getWordRange=function(v,b){var l=this.getLine(v),C=!1;if(b>0&&(C=!!l.charAt(b-1).match(this.tokenRe)),C||(C=!!l.charAt(b).match(this.tokenRe)),C)var O=this.tokenRe;else if(/^\s+$/.test(l.slice(b-1,b+1)))var O=/\s/;else var O=this.nonTokenRe;var N=b;if(N>0){do N--;while(N>=0&&l.charAt(N).match(O));N++}for(var G=b;G<l.length&&l.charAt(G).match(O);)G++;return new i(v,N,v,G)},k.prototype.getAWordRange=function(v,b){for(var l=this.getWordRange(v,b),C=this.getLine(l.end.row);C.charAt(l.end.column).match(/[ \t]/);)l.end.column+=1;return l},k.prototype.setNewLineMode=function(v){this.doc.setNewLineMode(v)},k.prototype.getNewLineMode=function(){return this.doc.getNewLineMode()},k.prototype.setUseWorker=function(v){this.setOption("useWorker",v)},k.prototype.getUseWorker=function(){return this.$useWorker},k.prototype.onReloadTokenizer=function(v){var b=v.data;this.bgTokenizer.start(b.first),this._signal("tokenizerUpdate",v)},k.prototype.setMode=function(v,b){if(v&&typeof v=="object"){if(v.getTokenizer)return this.$onChangeMode(v);var l=v,C=l.path}else C=v||"ace/mode/text";if(this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new n),this.$modes[C]&&!l){this.$onChangeMode(this.$modes[C]),b&&b();return}this.$modeId=C,s.loadModule(["mode",C],(function(O){if(this.$modeId!==C)return b&&b();this.$modes[C]&&!l?this.$onChangeMode(this.$modes[C]):O&&O.Mode&&(O=new O.Mode(l),l||(this.$modes[C]=O,O.$id=C),this.$onChangeMode(O)),b&&b()}).bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},k.prototype.$onChangeMode=function(v,b){if(b||(this.$modeId=v.$id),this.$mode!==v){var l=this.$mode;this.$mode=v,this.$stopWorker(),this.$useWorker&&this.$startWorker();var C=v.getTokenizer();if(C.on!==void 0){var O=this.onReloadTokenizer.bind(this);C.on("update",O)}this.bgTokenizer.setTokenizer(C),this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=v.tokenRe,this.nonTokenRe=v.nonTokenRe,b||(v.attachToSession&&v.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(v.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode",{oldMode:l,mode:v}))}},k.prototype.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},k.prototype.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(v){s.warn("Could not load worker",v),this.$worker=null}},k.prototype.getMode=function(){return this.$mode},k.prototype.setScrollTop=function(v){this.$scrollTop===v||isNaN(v)||(this.$scrollTop=v,this._signal("changeScrollTop",v))},k.prototype.getScrollTop=function(){return this.$scrollTop},k.prototype.setScrollLeft=function(v){this.$scrollLeft===v||isNaN(v)||(this.$scrollLeft=v,this._signal("changeScrollLeft",v))},k.prototype.getScrollLeft=function(){return this.$scrollLeft},k.prototype.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},k.prototype.getLineWidgetMaxWidth=function(){if(this.lineWidgetsWidth!=null)return this.lineWidgetsWidth;var v=0;return this.lineWidgets.forEach(function(b){b&&b.screenWidth>v&&(v=b.screenWidth)}),this.lineWidgetWidth=v},k.prototype.$computeWidth=function(v){if(this.$modified||v){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var b=this.doc.getAllLines(),l=this.$rowLengthCache,C=0,O=0,N=this.$foldData[O],G=N?N.start.row:1/0,W=b.length,K=0;K<W;K++){if(K>G){if(K=N.end.row+1,K>=W)break;N=this.$foldData[O++],G=N?N.start.row:1/0}l[K]==null&&(l[K]=this.$getStringScreenWidth(b[K])[0]),l[K]>C&&(C=l[K])}this.screenWidth=C}},k.prototype.getLine=function(v){return this.doc.getLine(v)},k.prototype.getLines=function(v,b){return this.doc.getLines(v,b)},k.prototype.getLength=function(){return this.doc.getLength()},k.prototype.getTextRange=function(v){return this.doc.getTextRange(v||this.selection.getRange())},k.prototype.insert=function(v,b){return this.doc.insert(v,b)},k.prototype.remove=function(v){return this.doc.remove(v)},k.prototype.removeFullLines=function(v,b){return this.doc.removeFullLines(v,b)},k.prototype.undoChanges=function(v,b){if(v.length){this.$fromUndo=!0;for(var l=v.length-1;l!=-1;l--){var C=v[l];C.action=="insert"||C.action=="remove"?this.doc.revertDelta(C):C.folds&&this.addFolds(C.folds)}!b&&this.$undoSelect&&(v.selectionBefore?this.selection.fromJSON(v.selectionBefore):this.selection.setRange(this.$getUndoSelection(v,!0))),this.$fromUndo=!1}},k.prototype.redoChanges=function(v,b){if(v.length){this.$fromUndo=!0;for(var l=0;l<v.length;l++){var C=v[l];(C.action=="insert"||C.action=="remove")&&this.doc.$safeApplyDelta(C)}!b&&this.$undoSelect&&(v.selectionAfter?this.selection.fromJSON(v.selectionAfter):this.selection.setRange(this.$getUndoSelection(v,!1))),this.$fromUndo=!1}},k.prototype.setUndoSelect=function(v){this.$undoSelect=v},k.prototype.$getUndoSelection=function(v,b){function l(W){return b?W.action!=="insert":W.action==="insert"}for(var C,O,N=0;N<v.length;N++){var G=v[N];if(G.start){if(!C){l(G)?C=i.fromPoints(G.start,G.end):C=i.fromPoints(G.start,G.start);continue}l(G)?(O=G.start,C.compare(O.row,O.column)==-1&&C.setStart(O),O=G.end,C.compare(O.row,O.column)==1&&C.setEnd(O)):(O=G.start,C.compare(O.row,O.column)==-1&&(C=i.fromPoints(G.start,G.start)))}}return C},k.prototype.replace=function(v,b){return this.doc.replace(v,b)},k.prototype.moveText=function(v,b,l){var C=this.getTextRange(v),O=this.getFoldsInRange(v),N=i.fromPoints(b,b);if(!l){this.remove(v);var G=v.start.row-v.end.row,W=G?-v.end.column:v.start.column-v.end.column;W&&(N.start.row==v.end.row&&N.start.column>v.end.column&&(N.start.column+=W),N.end.row==v.end.row&&N.end.column>v.end.column&&(N.end.column+=W)),G&&N.start.row>=v.end.row&&(N.start.row+=G,N.end.row+=G)}if(N.end=this.insert(N.start,C),O.length){var K=v.start,V=N.start,G=V.row-K.row,W=V.column-K.column;this.addFolds(O.map(function(Q){return Q=Q.clone(),Q.start.row==K.row&&(Q.start.column+=W),Q.end.row==K.row&&(Q.end.column+=W),Q.start.row+=G,Q.end.row+=G,Q}))}return N},k.prototype.indentRows=function(v,b,l){l=l.replace(/\t/g,this.getTabString());for(var C=v;C<=b;C++)this.doc.insertInLine({row:C,column:0},l)},k.prototype.outdentRows=function(v){for(var b=v.collapseRows(),l=new i(0,0,0,0),C=this.getTabSize(),O=b.start.row;O<=b.end.row;++O){var N=this.getLine(O);l.start.row=O,l.end.row=O;for(var G=0;G<C&&N.charAt(G)==" ";++G);G<C&&N.charAt(G)=="	"?(l.start.column=G,l.end.column=G+1):(l.start.column=0,l.end.column=G),this.remove(l)}},k.prototype.$moveLines=function(v,b,l){if(v=this.getRowFoldStart(v),b=this.getRowFoldEnd(b),l<0){var C=this.getRowFoldStart(v+l);if(C<0)return 0;var O=C-v}else if(l>0){var C=this.getRowFoldEnd(b+l);if(C>this.doc.getLength()-1)return 0;var O=C-b}else{v=this.$clipRowToDocument(v),b=this.$clipRowToDocument(b);var O=b-v+1}var N=new i(v,0,b,Number.MAX_VALUE),G=this.getFoldsInRange(N).map(function(K){return K=K.clone(),K.start.row+=O,K.end.row+=O,K}),W=l==0?this.doc.getLines(v,b):this.doc.removeFullLines(v,b);return this.doc.insertFullLines(v+O,W),G.length&&this.addFolds(G),O},k.prototype.moveLinesUp=function(v,b){return this.$moveLines(v,b,-1)},k.prototype.moveLinesDown=function(v,b){return this.$moveLines(v,b,1)},k.prototype.duplicateLines=function(v,b){return this.$moveLines(v,b,0)},k.prototype.$clipRowToDocument=function(v){return Math.max(0,Math.min(v,this.doc.getLength()-1))},k.prototype.$clipColumnToRow=function(v,b){return b<0?0:Math.min(this.doc.getLine(v).length,b)},k.prototype.$clipPositionToDocument=function(v,b){if(b=Math.max(0,b),v<0)v=0,b=0;else{var l=this.doc.getLength();v>=l?(v=l-1,b=this.doc.getLine(l-1).length):b=Math.min(this.doc.getLine(v).length,b)}return{row:v,column:b}},k.prototype.$clipRangeToDocument=function(v){v.start.row<0?(v.start.row=0,v.start.column=0):v.start.column=this.$clipColumnToRow(v.start.row,v.start.column);var b=this.doc.getLength()-1;return v.end.row>b?(v.end.row=b,v.end.column=this.doc.getLine(b).length):v.end.column=this.$clipColumnToRow(v.end.row,v.end.column),v},k.prototype.setUseWrapMode=function(v){if(v!=this.$useWrapMode){if(this.$useWrapMode=v,this.$modified=!0,this.$resetRowCache(0),v){var b=this.getLength();this.$wrapData=Array(b),this.$updateWrapData(0,b-1)}this._signal("changeWrapMode")}},k.prototype.getUseWrapMode=function(){return this.$useWrapMode},k.prototype.setWrapLimitRange=function(v,b){(this.$wrapLimitRange.min!==v||this.$wrapLimitRange.max!==b)&&(this.$wrapLimitRange={min:v,max:b},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode"))},k.prototype.adjustWrapLimit=function(v,b){var l=this.$wrapLimitRange;l.max<0&&(l={min:b,max:b});var C=this.$constrainWrapLimit(v,l.min,l.max);return C!=this.$wrapLimit&&C>1?(this.$wrapLimit=C,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0):!1},k.prototype.$constrainWrapLimit=function(v,b,l){return b&&(v=Math.max(b,v)),l&&(v=Math.min(l,v)),v},k.prototype.getWrapLimit=function(){return this.$wrapLimit},k.prototype.setWrapLimit=function(v){this.setWrapLimitRange(v,v)},k.prototype.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},k.prototype.$updateInternalDataOnChange=function(v){var b=this.$useWrapMode,l=v.action,C=v.start,O=v.end,N=C.row,G=O.row,W=G-N,K=null;if(this.$updating=!0,W!=0)if(l==="remove"){this[b?"$wrapData":"$rowLengthCache"].splice(N,W);var V=this.$foldData;K=this.getFoldsInRange(v),this.removeFolds(K);var Y=this.getFoldLine(O.row),re=0;if(Y){Y.addRemoveChars(O.row,O.column,C.column-O.column),Y.shiftRow(-W);var Q=this.getFoldLine(N);Q&&Q!==Y&&(Q.merge(Y),Y=Q),re=V.indexOf(Y)+1}for(re;re<V.length;re++){var Y=V[re];Y.start.row>=O.row&&Y.shiftRow(-W)}G=N}else{var ie=Array(W);ie.unshift(N,0);var ue=b?this.$wrapData:this.$rowLengthCache;ue.splice.apply(ue,ie);var V=this.$foldData,Y=this.getFoldLine(N),re=0;if(Y){var ge=Y.range.compareInside(C.row,C.column);ge==0?(Y=Y.split(C.row,C.column),Y&&(Y.shiftRow(W),Y.addRemoveChars(G,0,O.column-C.column))):ge==-1&&(Y.addRemoveChars(N,0,O.column-C.column),Y.shiftRow(W)),re=V.indexOf(Y)+1}for(re;re<V.length;re++){var Y=V[re];Y.start.row>=N&&Y.shiftRow(W)}}else{W=Math.abs(v.start.column-v.end.column),l==="remove"&&(K=this.getFoldsInRange(v),this.removeFolds(K),W=-W);var Y=this.getFoldLine(N);Y&&Y.addRemoveChars(N,C.column,W)}return b&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,b?this.$updateWrapData(N,G):this.$updateRowLengthCache(N,G),K},k.prototype.$updateRowLengthCache=function(v,b){this.$rowLengthCache[v]=null,this.$rowLengthCache[b]=null},k.prototype.$updateWrapData=function(v,b){var l=this.doc.getAllLines(),C=this.getTabSize(),O=this.$wrapData,N=this.$wrapLimit,G,W,K=v;for(b=Math.min(b,l.length-1);K<=b;)W=this.getFoldLine(K,W),W?(G=[],W.walk((function(V,Y,re,Q){var ie;if(V!=null){ie=this.$getDisplayTokens(V,G.length),ie[0]=w;for(var ue=1;ue<ie.length;ue++)ie[ue]=m}else ie=this.$getDisplayTokens(l[Y].substring(Q,re),G.length);G=G.concat(ie)}).bind(this),W.end.row,l[W.end.row].length+1),O[W.start.row]=this.$computeWrapSplits(G,N,C),K=W.end.row+1):(G=this.$getDisplayTokens(l[K]),O[K]=this.$computeWrapSplits(G,N,C),K++)},k.prototype.$computeWrapSplits=function(v,b,l){if(v.length==0)return[];var C=[],O=v.length,N=0,G=0,W=this.$wrapAsCode,K=this.$indentedSoftWrap,V=b<=Math.max(2*l,8)||K===!1?0:Math.floor(b/2);function Y(){var ge=0;if(V===0)return ge;if(K)for(var me=0;me<v.length;me++){var ve=v[me];if(ve==_)ge+=1;else if(ve==T)ge+=l;else{if(ve==R)continue;break}}return W&&K!==!1&&(ge+=l),Math.min(ge,V)}function re(ge){for(var me=ge-N,ve=N;ve<ge;ve++){var Ce=v[ve];(Ce===12||Ce===2)&&(me-=1)}C.length||(Q=Y(),C.indent=Q),G+=me,C.push(G),N=ge}for(var Q=0;O-N>b-Q;){var ie=N+b-Q;if(v[ie-1]>=_&&v[ie]>=_){re(ie);continue}if(v[ie]==w||v[ie]==m){for(ie;ie!=N-1&&v[ie]!=w;ie--);if(ie>N){re(ie);continue}for(ie=N+b,ie;ie<v.length&&v[ie]==m;ie++);if(ie==v.length)break;re(ie);continue}for(var ue=Math.max(ie-(b-(b>>2)),N-1);ie>ue&&v[ie]<w;)ie--;if(W){for(;ie>ue&&v[ie]<w;)ie--;for(;ie>ue&&v[ie]==d;)ie--}else for(;ie>ue&&v[ie]<_;)ie--;if(ie>ue){re(++ie);continue}ie=N+b,v[ie]==M&&ie--,re(ie-Q)}return C},k.prototype.$getDisplayTokens=function(v,b){var l=[],C;b=b||0;for(var O=0;O<v.length;O++){var N=v.charCodeAt(O);if(N==9){C=this.getScreenTabSize(l.length+b),l.push(T);for(var G=1;G<C;G++)l.push(R)}else N==32?l.push(_):N>39&&N<48||N>57&&N<64?l.push(d):N>=4352&&$(N)?l.push(p,M):l.push(p)}return l},k.prototype.$getStringScreenWidth=function(v,b,l){if(b==0)return[0,0];b==null&&(b=1/0),l=l||0;var C,O;for(O=0;O<v.length&&(C=v.charCodeAt(O),C==9?l+=this.getScreenTabSize(l):C>=4352&&$(C)?l+=2:l+=1,!(l>b));O++);return[l,O]},k.prototype.getRowLength=function(v){var b=1;return this.lineWidgets&&(b+=this.lineWidgets[v]&&this.lineWidgets[v].rowCount||0),!this.$useWrapMode||!this.$wrapData[v]?b:this.$wrapData[v].length+b},k.prototype.getRowLineCount=function(v){return!this.$useWrapMode||!this.$wrapData[v]?1:this.$wrapData[v].length+1},k.prototype.getRowWrapIndent=function(v){if(this.$useWrapMode){var b=this.screenToDocumentPosition(v,Number.MAX_VALUE),l=this.$wrapData[b.row];return l.length&&l[0]<b.column?l.indent:0}else return 0},k.prototype.getScreenLastRowColumn=function(v){var b=this.screenToDocumentPosition(v,Number.MAX_VALUE);return this.documentToScreenColumn(b.row,b.column)},k.prototype.getDocumentLastRowColumn=function(v,b){var l=this.documentToScreenRow(v,b);return this.getScreenLastRowColumn(l)},k.prototype.getDocumentLastRowColumnPosition=function(v,b){var l=this.documentToScreenRow(v,b);return this.screenToDocumentPosition(l,Number.MAX_VALUE/10)},k.prototype.getRowSplitData=function(v){if(this.$useWrapMode)return this.$wrapData[v]},k.prototype.getScreenTabSize=function(v){return this.$tabSize-(v%this.$tabSize|0)},k.prototype.screenToDocumentRow=function(v,b){return this.screenToDocumentPosition(v,b).row},k.prototype.screenToDocumentColumn=function(v,b){return this.screenToDocumentPosition(v,b).column},k.prototype.screenToDocumentPosition=function(v,b,l){if(v<0)return{row:0,column:0};var C,O=0,N=0,G,W=0,K=0,V=this.$screenRowCache,Y=this.$getRowCacheIndex(V,v),re=V.length;if(re&&Y>=0)var W=V[Y],O=this.$docRowCache[Y],Q=v>V[re-1];else var Q=!re;for(var ie=this.getLength()-1,ue=this.getNextFoldLine(O),ge=ue?ue.start.row:1/0;W<=v&&(K=this.getRowLength(O),!(W+K>v||O>=ie));)W+=K,O++,O>ge&&(O=ue.end.row+1,ue=this.getNextFoldLine(O,ue),ge=ue?ue.start.row:1/0),Q&&(this.$docRowCache.push(O),this.$screenRowCache.push(W));if(ue&&ue.start.row<=O)C=this.getFoldDisplayLine(ue),O=ue.start.row;else{if(W+K<=v||O>ie)return{row:ie,column:this.getLine(ie).length};C=this.getLine(O),ue=null}var me=0,ve=Math.floor(v-W);if(this.$useWrapMode){var Ce=this.$wrapData[O];Ce&&(G=Ce[ve],ve>0&&Ce.length&&(me=Ce.indent,N=Ce[ve-1]||Ce[Ce.length-1],C=C.substring(N)))}return l!==void 0&&this.$bidiHandler.isBidiRow(W+ve,O,ve)&&(b=this.$bidiHandler.offsetToCol(l)),N+=this.$getStringScreenWidth(C,b-me)[1],this.$useWrapMode&&N>=G&&(N=G-1),ue?ue.idxToPosition(N):{row:O,column:N}},k.prototype.documentToScreenPosition=function(v,b){if(typeof b>"u")var l=this.$clipPositionToDocument(v.row,v.column);else l=this.$clipPositionToDocument(v,b);v=l.row,b=l.column;var C=0,O=null,N=null;N=this.getFoldAt(v,b,1),N&&(v=N.start.row,b=N.start.column);var G,W=0,K=this.$docRowCache,V=this.$getRowCacheIndex(K,v),Y=K.length;if(Y&&V>=0)var W=K[V],C=this.$screenRowCache[V],re=v>K[Y-1];else var re=!Y;for(var Q=this.getNextFoldLine(W),ie=Q?Q.start.row:1/0;W<v;){if(W>=ie){if(G=Q.end.row+1,G>v)break;Q=this.getNextFoldLine(G,Q),ie=Q?Q.start.row:1/0}else G=W+1;C+=this.getRowLength(W),W=G,re&&(this.$docRowCache.push(W),this.$screenRowCache.push(C))}var ue="";Q&&W>=ie?(ue=this.getFoldDisplayLine(Q,v,b),O=Q.start.row):(ue=this.getLine(v).substring(0,b),O=v);var ge=0;if(this.$useWrapMode){var me=this.$wrapData[O];if(me){for(var ve=0;ue.length>=me[ve];)C++,ve++;ue=ue.substring(me[ve-1]||0,ue.length),ge=ve>0?me.indent:0}}return this.lineWidgets&&this.lineWidgets[W]&&this.lineWidgets[W].rowsAbove&&(C+=this.lineWidgets[W].rowsAbove),{row:C,column:ge+this.$getStringScreenWidth(ue)[0]}},k.prototype.documentToScreenColumn=function(v,b){return this.documentToScreenPosition(v,b).column},k.prototype.documentToScreenRow=function(v,b){return this.documentToScreenPosition(v,b).row},k.prototype.getScreenLength=function(){var v=0,b=null;if(this.$useWrapMode)for(var O=this.$wrapData.length,N=0,C=0,b=this.$foldData[C++],G=b?b.start.row:1/0;N<O;){var W=this.$wrapData[N];v+=W?W.length+1:1,N++,N>G&&(N=b.end.row+1,b=this.$foldData[C++],G=b?b.start.row:1/0)}else{v=this.getLength();for(var l=this.$foldData,C=0;C<l.length;C++)b=l[C],v-=b.end.row-b.start.row}return this.lineWidgets&&(v+=this.$getWidgetScreenLength()),v},k.prototype.$setFontMetrics=function(v){this.$enableVarChar&&(this.$getStringScreenWidth=function(b,l,C){if(l===0)return[0,0];l||(l=1/0),C=C||0;var O,N;for(N=0;N<b.length&&(O=b.charAt(N),O==="	"?C+=this.getScreenTabSize(C):C+=v.getCharacterWidth(O),!(C>l));N++);return[C,N]})},k.prototype.getPrecedingCharacter=function(){var v=this.selection.getCursor();if(v.column===0)return v.row===0?"":this.doc.getNewLineCharacter();var b=this.getLine(v.row);return b[v.column-1]},k.prototype.destroy=function(){this.destroyed||(this.bgTokenizer.setDocument(null),this.bgTokenizer.cleanup(),this.destroyed=!0),this.$stopWorker(),this.removeAllListeners(),this.doc&&this.doc.off("change",this.$onChange),this.selection.detach()},k}();u.$uid=0,u.prototype.$modes=s.$modes,u.prototype.getValue=u.prototype.toString,u.prototype.$defaultUndoManager={undo:function(){},redo:function(){},hasUndo:function(){},hasRedo:function(){},reset:function(){},add:function(){},addSelection:function(){},startNewGroup:function(){},addSession:function(){}},u.prototype.$overwrite=!1,u.prototype.$mode=null,u.prototype.$modeId=null,u.prototype.$scrollTop=0,u.prototype.$scrollLeft=0,u.prototype.$wrapLimit=80,u.prototype.$useWrapMode=!1,u.prototype.$wrapLimitRange={min:null,max:null},u.prototype.lineWidgets=null,u.prototype.isFullWidth=$,D.implement(u.prototype,h);var p=1,M=2,w=3,m=4,d=9,_=10,T=11,R=12;function $(k){return k<4352?!1:k>=4352&&k<=4447||k>=4515&&k<=4519||k>=4602&&k<=4607||k>=9001&&k<=9002||k>=11904&&k<=11929||k>=11931&&k<=12019||k>=12032&&k<=12245||k>=12272&&k<=12283||k>=12288&&k<=12350||k>=12353&&k<=12438||k>=12441&&k<=12543||k>=12549&&k<=12589||k>=12593&&k<=12686||k>=12688&&k<=12730||k>=12736&&k<=12771||k>=12784&&k<=12830||k>=12832&&k<=12871||k>=12880&&k<=13054||k>=13056&&k<=19903||k>=19968&&k<=42124||k>=42128&&k<=42182||k>=43360&&k<=43388||k>=44032&&k<=55203||k>=55216&&k<=55238||k>=55243&&k<=55291||k>=63744&&k<=64255||k>=65040&&k<=65049||k>=65072&&k<=65106||k>=65108&&k<=65126||k>=65128&&k<=65131||k>=65281&&k<=65376||k>=65504&&k<=65510}g("./edit_session/folding").Folding.call(u.prototype),g("./edit_session/bracket_match").BracketMatch.call(u.prototype),s.defineOptions(u.prototype,"session",{wrap:{set:function(k){if(!k||k=="off"?k=!1:k=="free"?k=!0:k=="printMargin"?k=-1:typeof k=="string"&&(k=parseInt(k,10)||!1),this.$wrap!=k)if(this.$wrap=k,!k)this.setUseWrapMode(!1);else{var v=typeof k=="number"?k:null;this.setWrapLimitRange(v,v),this.setUseWrapMode(!0)}},get:function(){return this.getUseWrapMode()?this.$wrap==-1?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(k){k=k=="auto"?this.$mode.type!="text":k!="text",k!=this.$wrapAsCode&&(this.$wrapAsCode=k,this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0)))},initialValue:"auto"},indentedSoftWrap:{set:function(){this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0))},initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(k){this.$useWorker=k,this.$stopWorker(),k&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(k){k=parseInt(k),k>0&&this.$tabSize!==k&&(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=k,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},foldStyle:{set:function(k){this.setFoldStyle(k)},handlesSet:!0},overwrite:{set:function(k){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(k){this.doc.setNewLineMode(k)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(k){this.setMode(k)},get:function(){return this.$modeId},handlesSet:!0}}),I.EditSession=u}),ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(g,I,z){var D=g("./lib/lang"),S=g("./lib/oop"),A=g("./range").Range,s=function(){function o(){this.$options={}}return o.prototype.set=function(n){return S.mixin(this.$options,n),this},o.prototype.getOptions=function(){return D.copyObject(this.$options)},o.prototype.setOptions=function(n){this.$options=n},o.prototype.find=function(n){var i=this.$options,t=this.$matchIterator(n,i);if(!t)return!1;var e=null;return t.forEach(function(r,a,u,p){return e=new A(r,a,u,p),a==p&&i.start&&i.start.start&&i.skipCurrent!=!1&&e.isEqual(i.start)?(e=null,!1):!0}),e},o.prototype.findAll=function(n){var i=this.$options;if(!i.needle)return[];this.$assembleRegExp(i);var t=i.range,e=t?n.getLines(t.start.row,t.end.row):n.doc.getAllLines(),r=[],a=i.re;if(i.$isMultiLine){var u=a.length,p=e.length-u,M;e:for(var w=a.offset||0;w<=p;w++){for(var m=0;m<u;m++)if(e[w+m].search(a[m])==-1)continue e;var d=e[w],_=e[w+u-1],T=d.length-d.match(a[0])[0].length,R=_.match(a[u-1])[0].length;M&&M.end.row===w&&M.end.column>T||(r.push(M=new A(w,T,w+u-1,R)),u>2&&(w=w+u-2))}}else for(var $=0;$<e.length;$++)for(var k=D.getMatchOffsets(e[$],a),m=0;m<k.length;m++){var v=k[m];r.push(new A($,v.offset,$,v.offset+v.length))}if(t){for(var b=t.start.column,l=t.end.column,$=0,m=r.length-1;$<m&&r[$].start.column<b&&r[$].start.row==0;)$++;for(var C=t.end.row-t.start.row;$<m&&r[m].end.column>l&&r[m].end.row==C;)m--;for(r=r.slice($,m+1),$=0,m=r.length;$<m;$++)r[$].start.row+=t.start.row,r[$].end.row+=t.start.row}return r},o.prototype.replace=function(n,i){var t=this.$options,e=this.$assembleRegExp(t);if(t.$isMultiLine)return i;if(e){var r=e.exec(n);if(!r||r[0].length!=n.length)return null;if(t.regExp||(i=i.replace(/\$/g,"$$$$")),i=n.replace(e,i),t.preserveCase){i=i.split("");for(var a=Math.min(n.length,n.length);a--;){var u=n[a];u&&u.toLowerCase()!=u?i[a]=i[a].toUpperCase():i[a]=i[a].toLowerCase()}i=i.join("")}return i}},o.prototype.$assembleRegExp=function(n,i){if(n.needle instanceof RegExp)return n.re=n.needle;var t=n.needle;if(!n.needle)return n.re=!1;n.regExp||(t=D.escapeRegExp(t));var e=n.caseSensitive?"gm":"gmi";try{new RegExp(t,"u"),n.$supportsUnicodeFlag=!0,e+="u"}catch{n.$supportsUnicodeFlag=!1}if(n.wholeWord&&(t=h(t,n)),n.$isMultiLine=!i&&/[\n\r]/.test(t),n.$isMultiLine)return n.re=this.$assembleMultilineRegExp(t,e);try{var r=new RegExp(t,e)}catch{r=!1}return n.re=r},o.prototype.$assembleMultilineRegExp=function(n,i){for(var t=n.replace(/\r\n|\r|\n/g,`$
^`).split(`
`),e=[],r=0;r<t.length;r++)try{e.push(new RegExp(t[r],i))}catch{return!1}return e},o.prototype.$matchIterator=function(n,i){var t=this.$assembleRegExp(i);if(!t)return!1;var e=i.backwards==!0,r=i.skipCurrent!=!1,a=t.unicode,u=i.range,p=i.start;p||(p=u?u[e?"end":"start"]:n.selection.getRange()),p.start&&(p=p[r!=e?"end":"start"]);var M=u?u.start.row:0,w=u?u.end.row:n.getLength()-1;if(e)var m=function(T){var R=p.row;if(!_(R,p.column,T)){for(R--;R>=M;R--)if(_(R,Number.MAX_VALUE,T))return;if(i.wrap!=!1){for(R=w,M=p.row;R>=M;R--)if(_(R,Number.MAX_VALUE,T))return}}};else var m=function(R){var $=p.row;if(!_($,p.column,R)){for($=$+1;$<=w;$++)if(_($,0,R))return;if(i.wrap!=!1){for($=M,w=p.row;$<=w;$++)if(_($,0,R))return}}};if(i.$isMultiLine)var d=t.length,_=function(T,R,$){var k=e?T-d+1:T;if(!(k<0||k+d>n.getLength())){var v=n.getLine(k),b=v.search(t[0]);if(!(!e&&b<R||b===-1)){for(var l=1;l<d;l++)if(v=n.getLine(k+l),v.search(t[l])==-1)return;var C=v.match(t[d-1])[0].length;if(!(e&&C>R)&&$(k,b,k+d-1,C))return!0}}};else if(e)var _=function(R,$,k){var v=n.getLine(R),b=[],l,C=0;for(t.lastIndex=0;l=t.exec(v);){var O=l[0].length;if(C=l.index,!O){if(C>=v.length)break;t.lastIndex=C+=D.skipEmptyMatch(v,C,a)}if(l.index+O>$)break;b.push(l.index,O)}for(var N=b.length-1;N>=0;N-=2){var G=b[N-1],O=b[N];if(k(R,G,R,G+O))return!0}};else var _=function(R,$,k){var v=n.getLine(R),b,l;for(t.lastIndex=$;l=t.exec(v);){var C=l[0].length;if(b=l.index,k(R,b,R,b+C))return!0;if(!C&&(t.lastIndex=b+=D.skipEmptyMatch(v,b,a),b>=v.length))return!1}};return{forEach:m}},o}();function h(o,n){var i=D.supportsLookbehind();function t(u,p){p===void 0&&(p=!0);var M=i&&n.$supportsUnicodeFlag?new RegExp("[\\p{L}\\p{N}_]","u"):new RegExp("\\w");return M.test(u)||n.regExp?i&&n.$supportsUnicodeFlag?p?"(?<=^|[^\\p{L}\\p{N}_])":"(?=[^\\p{L}\\p{N}_]|$)":"\\b":""}var e=Array.from(o),r=e[0],a=e[e.length-1];return t(r)+o+t(a,!1)}I.Search=s}),ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(g,I,z){var D=this&&this.__extends||function(){var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(r[u]=a[u])},i(t,e)};return function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}(),S=g("../lib/keys"),A=g("../lib/useragent"),s=S.KEY_MODS,h=function(){function i(t,e){this.$init(t,e,!1)}return i.prototype.$init=function(t,e,r){this.platform=e||(A.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(t),this.$singleCommand=r},i.prototype.addCommand=function(t){this.commands[t.name]&&this.removeCommand(t),this.commands[t.name]=t,t.bindKey&&this._buildKeyHash(t)},i.prototype.removeCommand=function(t,e){var r=t&&(typeof t=="string"?t:t.name);t=this.commands[r],e||delete this.commands[r];var a=this.commandKeyBinding;for(var u in a){var p=a[u];if(p==t)delete a[u];else if(Array.isArray(p)){var M=p.indexOf(t);M!=-1&&(p.splice(M,1),p.length==1&&(a[u]=p[0]))}}},i.prototype.bindKey=function(t,e,r){if(typeof t=="object"&&t&&(r==null&&(r=t.position),t=t[this.platform]),!!t){if(typeof e=="function")return this.addCommand({exec:e,bindKey:t,name:e.name||t});t.split("|").forEach(function(a){var u="";if(a.indexOf(" ")!=-1){var p=a.split(/\s+/);a=p.pop(),p.forEach(function(m){var d=this.parseKeys(m),_=s[d.hashId]+d.key;u+=(u?" ":"")+_,this._addCommandToBinding(u,"chainKeys")},this),u+=" "}var M=this.parseKeys(a),w=s[M.hashId]+M.key;this._addCommandToBinding(u+w,e,r)},this)}},i.prototype._addCommandToBinding=function(t,e,r){var a=this.commandKeyBinding,u;if(!e)delete a[t];else if(!a[t]||this.$singleCommand)a[t]=e;else{Array.isArray(a[t])?(u=a[t].indexOf(e))!=-1&&a[t].splice(u,1):a[t]=[a[t]],typeof r!="number"&&(r=o(e));var p=a[t];for(u=0;u<p.length;u++){var M=p[u],w=o(M);if(w>r)break}p.splice(u,0,e)}},i.prototype.addCommands=function(t){t&&Object.keys(t).forEach(function(e){var r=t[e];if(r){if(typeof r=="string")return this.bindKey(r,e);typeof r=="function"&&(r={exec:r}),typeof r=="object"&&(r.name||(r.name=e),this.addCommand(r))}},this)},i.prototype.removeCommands=function(t){Object.keys(t).forEach(function(e){this.removeCommand(t[e])},this)},i.prototype.bindKeys=function(t){Object.keys(t).forEach(function(e){this.bindKey(e,t[e])},this)},i.prototype._buildKeyHash=function(t){this.bindKey(t.bindKey,t)},i.prototype.parseKeys=function(t){var e=t.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(w){return w}),r=e.pop(),a=S[r];if(S.FUNCTION_KEYS[a])r=S.FUNCTION_KEYS[a].toLowerCase();else if(e.length){if(e.length==1&&e[0]=="shift")return{key:r.toUpperCase(),hashId:-1}}else return{key:r,hashId:-1};for(var u=0,p=e.length;p--;){var M=S.KEY_MODS[e[p]];if(M==null)return typeof console<"u"&&console.error("invalid modifier "+e[p]+" in "+t),!1;u|=M}return{key:r,hashId:u}},i.prototype.findKeyCommand=function(t,e){var r=s[t]+e;return this.commandKeyBinding[r]},i.prototype.handleKeyboard=function(t,e,r,a){if(!(a<0)){var u=s[e]+r,p=this.commandKeyBinding[u];return t.$keyChain&&(t.$keyChain+=" "+u,p=this.commandKeyBinding[t.$keyChain]||p),p&&(p=="chainKeys"||p[p.length-1]=="chainKeys")?(t.$keyChain=t.$keyChain||u,{command:"null"}):(t.$keyChain&&((!e||e==4)&&r.length==1?t.$keyChain=t.$keyChain.slice(0,-u.length-1):(e==-1||a>0)&&(t.$keyChain="")),{command:p})}},i.prototype.getStatusText=function(t,e){return e.$keyChain||""},i}();function o(i){return typeof i=="object"&&i.bindKey&&i.bindKey.position||(i.isDefault?-100:0)}var n=function(i){D(t,i);function t(e,r){var a=i.call(this,e,r)||this;return a.$singleCommand=!0,a}return t}(h);n.call=function(i,t,e){h.prototype.$init.call(i,t,e,!0)},h.call=function(i,t,e){h.prototype.$init.call(i,t,e,!1)},I.HashHandler=n,I.MultiHashHandler=h}),ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(g,I,z){var D=this&&this.__extends||function(){var o=function(n,i){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},o(n,i)};return function(n,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");o(n,i);function t(){this.constructor=n}n.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}}(),S=g("../lib/oop"),A=g("../keyboard/hash_handler").MultiHashHandler,s=g("../lib/event_emitter").EventEmitter,h=function(o){D(n,o);function n(i,t){var e=o.call(this,t,i)||this;return e.byName=e.commands,e.setDefaultHandler("exec",function(r){return r.args?r.command.exec(r.editor,r.args,r.event,!1):r.command.exec(r.editor,{},r.event,!0)}),e}return n.prototype.exec=function(i,t,e){if(Array.isArray(i)){for(var r=i.length;r--;)if(this.exec(i[r],t,e))return!0;return!1}if(typeof i=="string"&&(i=this.commands[i]),!this.canExecute(i,t))return!1;var a={editor:t,command:i,args:e};return a.returnValue=this._emit("exec",a),this._signal("afterExec",a),a.returnValue!==!1},n.prototype.canExecute=function(i,t){return typeof i=="string"&&(i=this.commands[i]),!(!i||t&&t.$readOnly&&!i.readOnly||this.$checkCommandState!=!1&&i.isAvailable&&!i.isAvailable(t))},n.prototype.toggleRecording=function(i){if(!this.$inReplay)return i&&i._emit("changeStatus"),this.recording?(this.macro.pop(),this.off("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=(function(t){this.macro.push([t.command,t.args])}).bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},n.prototype.replay=function(i){if(!(this.$inReplay||!this.macro)){if(this.recording)return this.toggleRecording(i);try{this.$inReplay=!0,this.macro.forEach(function(t){typeof t=="string"?this.exec(t,i):this.exec(t[0],i,t[1])},this)}finally{this.$inReplay=!1}}},n.prototype.trimMacro=function(i){return i.map(function(t){return typeof t[0]!="string"&&(t[0]=t[0].name),t[1]||(t=t[0]),t})},n}(A);S.implement(h.prototype,s),I.CommandManager=h}),ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],function(g,I,z){var D=g("../lib/lang"),S=g("../config"),A=g("../range").Range;function s(o,n){return{win:o,mac:n}}I.commands=[{name:"showSettingsMenu",description:"Show settings menu",bindKey:s("Ctrl-,","Command-,"),exec:function(o){S.loadModule("ace/ext/settings_menu",function(n){n.init(o),o.showSettingsMenu()})},readOnly:!0},{name:"goToNextError",description:"Go to next error",bindKey:s("Alt-E","F4"),exec:function(o){S.loadModule("ace/ext/error_marker",function(n){n.showErrorMarker(o,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",description:"Go to previous error",bindKey:s("Alt-Shift-E","Shift-F4"),exec:function(o){S.loadModule("ace/ext/error_marker",function(n){n.showErrorMarker(o,-1)})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",description:"Select all",bindKey:s("Ctrl-A","Command-A"),exec:function(o){o.selectAll()},readOnly:!0},{name:"centerselection",description:"Center selection",bindKey:s(null,"Ctrl-L"),exec:function(o){o.centerSelection()},readOnly:!0},{name:"gotoline",description:"Go to line...",bindKey:s("Ctrl-L","Command-L"),exec:function(o,n){typeof n=="number"&&!isNaN(n)&&o.gotoLine(n),o.prompt({$type:"gotoLine"})},readOnly:!0},{name:"fold",bindKey:s("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(o){o.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:s("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(o){o.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",description:"Toggle fold widget",bindKey:s("F2","F2"),exec:function(o){o.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",description:"Toggle parent fold widget",bindKey:s("Alt-F2","Alt-F2"),exec:function(o){o.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",description:"Fold all",bindKey:s(null,"Ctrl-Command-Option-0"),exec:function(o){o.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldAllComments",description:"Fold all comments",bindKey:s(null,"Ctrl-Command-Option-0"),exec:function(o){o.session.foldAllComments()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",description:"Fold other",bindKey:s("Alt-0","Command-Option-0"),exec:function(o){o.session.foldAll(),o.session.unfold(o.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",description:"Unfold all",bindKey:s("Alt-Shift-0","Command-Option-Shift-0"),exec:function(o){o.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",description:"Find next",bindKey:s("Ctrl-K","Command-G"),exec:function(o){o.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",description:"Find previous",bindKey:s("Ctrl-Shift-K","Command-Shift-G"),exec:function(o){o.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",description:"Select or find next",bindKey:s("Alt-K","Ctrl-G"),exec:function(o){o.selection.isEmpty()?o.selection.selectWord():o.findNext()},readOnly:!0},{name:"selectOrFindPrevious",description:"Select or find previous",bindKey:s("Alt-Shift-K","Ctrl-Shift-G"),exec:function(o){o.selection.isEmpty()?o.selection.selectWord():o.findPrevious()},readOnly:!0},{name:"find",description:"Find",bindKey:s("Ctrl-F","Command-F"),exec:function(o){S.loadModule("ace/ext/searchbox",function(n){n.Search(o)})},readOnly:!0},{name:"overwrite",description:"Overwrite",bindKey:"Insert",exec:function(o){o.toggleOverwrite()},readOnly:!0},{name:"selecttostart",description:"Select to start",bindKey:s("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(o){o.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",description:"Go to start",bindKey:s("Ctrl-Home","Command-Home|Command-Up"),exec:function(o){o.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",description:"Select up",bindKey:s("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(o){o.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",description:"Go line up",bindKey:s("Up","Up|Ctrl-P"),exec:function(o,n){o.navigateUp(n.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",description:"Select to end",bindKey:s("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(o){o.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",description:"Go to end",bindKey:s("Ctrl-End","Command-End|Command-Down"),exec:function(o){o.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",description:"Select down",bindKey:s("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(o){o.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",description:"Go line down",bindKey:s("Down","Down|Ctrl-N"),exec:function(o,n){o.navigateDown(n.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",description:"Select word left",bindKey:s("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(o){o.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",description:"Go to word left",bindKey:s("Ctrl-Left","Option-Left"),exec:function(o){o.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",description:"Select to line start",bindKey:s("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(o){o.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",description:"Go to line start",bindKey:s("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(o){o.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",description:"Select left",bindKey:s("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(o){o.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",description:"Go to left",bindKey:s("Left","Left|Ctrl-B"),exec:function(o,n){o.navigateLeft(n.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",description:"Select word right",bindKey:s("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(o){o.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",description:"Go to word right",bindKey:s("Ctrl-Right","Option-Right"),exec:function(o){o.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",description:"Select to line end",bindKey:s("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(o){o.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",description:"Go to line end",bindKey:s("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(o){o.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",description:"Select right",bindKey:s("Shift-Right","Shift-Right"),exec:function(o){o.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",description:"Go to right",bindKey:s("Right","Right|Ctrl-F"),exec:function(o,n){o.navigateRight(n.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",description:"Select page down",bindKey:"Shift-PageDown",exec:function(o){o.selectPageDown()},readOnly:!0},{name:"pagedown",description:"Page down",bindKey:s(null,"Option-PageDown"),exec:function(o){o.scrollPageDown()},readOnly:!0},{name:"gotopagedown",description:"Go to page down",bindKey:s("PageDown","PageDown|Ctrl-V"),exec:function(o){o.gotoPageDown()},readOnly:!0},{name:"selectpageup",description:"Select page up",bindKey:"Shift-PageUp",exec:function(o){o.selectPageUp()},readOnly:!0},{name:"pageup",description:"Page up",bindKey:s(null,"Option-PageUp"),exec:function(o){o.scrollPageUp()},readOnly:!0},{name:"gotopageup",description:"Go to page up",bindKey:"PageUp",exec:function(o){o.gotoPageUp()},readOnly:!0},{name:"scrollup",description:"Scroll up",bindKey:s("Ctrl-Up",null),exec:function(o){o.renderer.scrollBy(0,-2*o.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",description:"Scroll down",bindKey:s("Ctrl-Down",null),exec:function(o){o.renderer.scrollBy(0,2*o.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",description:"Select line start",bindKey:"Shift-Home",exec:function(o){o.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",description:"Select line end",bindKey:"Shift-End",exec:function(o){o.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",description:"Toggle recording",bindKey:s("Ctrl-Alt-E","Command-Option-E"),exec:function(o){o.commands.toggleRecording(o)},readOnly:!0},{name:"replaymacro",description:"Replay macro",bindKey:s("Ctrl-Shift-E","Command-Shift-E"),exec:function(o){o.commands.replay(o)},readOnly:!0},{name:"jumptomatching",description:"Jump to matching",bindKey:s("Ctrl-\\|Ctrl-P","Command-\\"),exec:function(o){o.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",description:"Select to matching",bindKey:s("Ctrl-Shift-\\|Ctrl-Shift-P","Command-Shift-\\"),exec:function(o){o.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",description:"Expand to matching",bindKey:s("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(o){o.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",description:"Pass keys to browser",bindKey:s(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",description:"Copy",exec:function(o){},readOnly:!0},{name:"cut",description:"Cut",exec:function(o){var n=o.$copyWithEmptySelection&&o.selection.isEmpty(),i=n?o.selection.getLineRange():o.selection.getRange();o._emit("cut",i),i.isEmpty()||o.session.remove(i),o.clearSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",description:"Paste",exec:function(o,n){o.$handlePaste(n)},scrollIntoView:"cursor"},{name:"removeline",description:"Remove line",bindKey:s("Ctrl-D","Command-D"),exec:function(o){o.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",description:"Duplicate selection",bindKey:s("Ctrl-Shift-D","Command-Shift-D"),exec:function(o){o.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",description:"Sort lines",bindKey:s("Ctrl-Alt-S","Command-Alt-S"),exec:function(o){o.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",description:"Toggle comment",bindKey:s("Ctrl-/","Command-/"),exec:function(o){o.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",description:"Toggle block comment",bindKey:s("Ctrl-Shift-/","Command-Shift-/"),exec:function(o){o.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",description:"Modify number up",bindKey:s("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(o){o.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",description:"Modify number down",bindKey:s("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(o){o.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",description:"Replace",bindKey:s("Ctrl-H","Command-Option-F"),exec:function(o){S.loadModule("ace/ext/searchbox",function(n){n.Search(o,!0)})}},{name:"undo",description:"Undo",bindKey:s("Ctrl-Z","Command-Z"),exec:function(o){o.undo()}},{name:"redo",description:"Redo",bindKey:s("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(o){o.redo()}},{name:"copylinesup",description:"Copy lines up",bindKey:s("Alt-Shift-Up","Command-Option-Up"),exec:function(o){o.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",description:"Move lines up",bindKey:s("Alt-Up","Option-Up"),exec:function(o){o.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",description:"Copy lines down",bindKey:s("Alt-Shift-Down","Command-Option-Down"),exec:function(o){o.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",description:"Move lines down",bindKey:s("Alt-Down","Option-Down"),exec:function(o){o.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",description:"Delete",bindKey:s("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(o){o.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",description:"Backspace",bindKey:s("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(o){o.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",description:"Cut or delete",bindKey:s("Shift-Delete",null),exec:function(o){if(o.selection.isEmpty())o.remove("left");else return!1},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",description:"Remove to line start",bindKey:s("Alt-Backspace","Command-Backspace"),exec:function(o){o.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",description:"Remove to line end",bindKey:s("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(o){o.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",description:"Remove to line start hard",bindKey:s("Ctrl-Shift-Backspace",null),exec:function(o){var n=o.selection.getRange();n.start.column=0,o.session.remove(n)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",description:"Remove to line end hard",bindKey:s("Ctrl-Shift-Delete",null),exec:function(o){var n=o.selection.getRange();n.end.column=Number.MAX_VALUE,o.session.remove(n)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",description:"Remove word left",bindKey:s("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(o){o.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",description:"Remove word right",bindKey:s("Ctrl-Delete","Alt-Delete"),exec:function(o){o.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",description:"Outdent",bindKey:s("Shift-Tab","Shift-Tab"),exec:function(o){o.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",description:"Indent",bindKey:s("Tab","Tab"),exec:function(o){o.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",description:"Block outdent",bindKey:s("Ctrl-[","Ctrl-["),exec:function(o){o.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",description:"Block indent",bindKey:s("Ctrl-]","Ctrl-]"),exec:function(o){o.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",description:"Insert string",exec:function(o,n){o.insert(n)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",description:"Insert text",exec:function(o,n){o.insert(D.stringRepeat(n.text||"",n.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",description:"Split line",bindKey:s(null,"Ctrl-O"),exec:function(o){o.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",description:"Transpose letters",bindKey:s("Alt-Shift-X","Ctrl-T"),exec:function(o){o.transposeLetters()},multiSelectAction:function(o){o.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",description:"To uppercase",bindKey:s("Ctrl-U","Ctrl-U"),exec:function(o){o.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",description:"To lowercase",bindKey:s("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(o){o.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"autoindent",description:"Auto Indent",bindKey:s(null,null),exec:function(o){o.autoIndent()},scrollIntoView:"animate"},{name:"expandtoline",description:"Expand to line",bindKey:s("Ctrl-Shift-L","Command-Shift-L"),exec:function(o){var n=o.selection.getRange();n.start.column=n.end.column=0,n.end.row++,o.selection.setRange(n,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"openlink",bindKey:s("Ctrl+F3","F3"),exec:function(o){o.openLink()}},{name:"joinlines",description:"Join lines",bindKey:s(null,null),exec:function(o){for(var n=o.selection.isBackwards(),i=n?o.selection.getSelectionLead():o.selection.getSelectionAnchor(),t=n?o.selection.getSelectionAnchor():o.selection.getSelectionLead(),e=o.session.doc.getLine(i.row).length,r=o.session.doc.getTextRange(o.selection.getRange()),a=r.replace(/\n\s*/," ").length,u=o.session.doc.getLine(i.row),p=i.row+1;p<=t.row+1;p++){var M=D.stringTrimLeft(D.stringTrimRight(o.session.doc.getLine(p)));M.length!==0&&(M=" "+M),u+=M}t.row+1<o.session.doc.getLength()-1&&(u+=o.session.doc.getNewLineCharacter()),o.clearSelection(),o.session.doc.replace(new A(i.row,0,t.row+2,0),u),a>0?(o.selection.moveCursorTo(i.row,i.column),o.selection.selectTo(i.row,i.column+a)):(e=o.session.doc.getLine(i.row).length>e?e+1:e,o.selection.moveCursorTo(i.row,e))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",description:"Invert selection",bindKey:s(null,null),exec:function(o){var n=o.session.doc.getLength()-1,i=o.session.doc.getLine(n).length,t=o.selection.rangeList.ranges,e=[];t.length<1&&(t=[o.selection.getRange()]);for(var r=0;r<t.length;r++)r==t.length-1&&(t[r].end.row===n&&t[r].end.column===i||e.push(new A(t[r].end.row,t[r].end.column,n,i))),r===0?t[r].start.row===0&&t[r].start.column===0||e.push(new A(0,0,t[r].start.row,t[r].start.column)):e.push(new A(t[r-1].end.row,t[r-1].end.column,t[r].start.row,t[r].start.column));o.exitMultiSelectMode(),o.clearSelection();for(var r=0;r<e.length;r++)o.selection.addRange(e[r],!1)},readOnly:!0,scrollIntoView:"none"},{name:"addLineAfter",description:"Add new line after the current line",exec:function(o){o.selection.clearSelection(),o.navigateLineEnd(),o.insert(`
`)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"addLineBefore",description:"Add new line before the current line",exec:function(o){o.selection.clearSelection();var n=o.getCursorPosition();o.selection.moveTo(n.row-1,Number.MAX_VALUE),o.insert(`
`),n.row===0&&o.navigateUp()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"openCommandPallete",exec:function(o){console.warn("This is an obsolete command. Please use `openCommandPalette` instead."),o.prompt({$type:"commands"})},readOnly:!0},{name:"openCommandPalette",description:"Open command palette",bindKey:s("F1","F1"),exec:function(o){o.prompt({$type:"commands"})},readOnly:!0},{name:"modeSelect",description:"Change language mode...",bindKey:s(null,null),exec:function(o){o.prompt({$type:"modes"})},readOnly:!0}];for(var h=1;h<9;h++)I.commands.push({name:"foldToLevel"+h,description:"Fold To Level "+h,level:h,exec:function(o){o.session.foldToLevel(this.level)},scrollIntoView:"center",readOnly:!0})}),ace.define("ace/line_widgets",["require","exports","module","ace/lib/dom"],function(g,I,z){var D=g("./lib/dom"),S=function(){function A(s){this.session=s,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}return A.prototype.getRowLength=function(s){var h;return this.lineWidgets?h=this.lineWidgets[s]&&this.lineWidgets[s].rowCount||0:h=0,!this.$useWrapMode||!this.$wrapData[s]?1+h:this.$wrapData[s].length+1+h},A.prototype.$getWidgetScreenLength=function(){var s=0;return this.lineWidgets.forEach(function(h){h&&h.rowCount&&!h.hidden&&(s+=h.rowCount)}),s},A.prototype.$onChangeEditor=function(s){this.attach(s.editor)},A.prototype.attach=function(s){s&&s.widgetManager&&s.widgetManager!=this&&s.widgetManager.detach(),this.editor!=s&&(this.detach(),this.editor=s,s&&(s.widgetManager=this,s.renderer.on("beforeRender",this.measureWidgets),s.renderer.on("afterRender",this.renderWidgets)))},A.prototype.detach=function(s){var h=this.editor;if(h){this.editor=null,h.widgetManager=null,h.renderer.off("beforeRender",this.measureWidgets),h.renderer.off("afterRender",this.renderWidgets);var o=this.session.lineWidgets;o&&o.forEach(function(n){n&&n.el&&n.el.parentNode&&(n._inDocument=!1,n.el.parentNode.removeChild(n.el))})}},A.prototype.updateOnFold=function(s,h){var o=h.lineWidgets;if(!(!o||!s.action)){for(var n=s.data,i=n.start.row,t=n.end.row,e=s.action=="add",r=i+1;r<t;r++)o[r]&&(o[r].hidden=e);o[t]&&(e?o[i]?o[t].hidden=e:o[i]=o[t]:(o[i]==o[t]&&(o[i]=void 0),o[t].hidden=e))}},A.prototype.updateOnChange=function(s){var h=this.session.lineWidgets;if(h){var o=s.start.row,n=s.end.row-o;if(n!==0)if(s.action=="remove"){var i=h.splice(o+1,n);!h[o]&&i[i.length-1]&&(h[o]=i.pop()),i.forEach(function(e){e&&this.removeLineWidget(e)},this),this.$updateRows()}else{var t=new Array(n);h[o]&&h[o].column!=null&&s.start.column>h[o].column&&o++,t.unshift(o,0),h.splice.apply(h,t),this.$updateRows()}}},A.prototype.$updateRows=function(){var s=this.session.lineWidgets;if(s){var h=!0;s.forEach(function(o,n){if(o)for(h=!1,o.row=n;o.$oldWidget;)o.$oldWidget.row=n,o=o.$oldWidget}),h&&(this.session.lineWidgets=null)}},A.prototype.$registerLineWidget=function(s){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var h=this.session.lineWidgets[s.row];return h&&(s.$oldWidget=h,h.el&&h.el.parentNode&&(h.el.parentNode.removeChild(h.el),h._inDocument=!1)),this.session.lineWidgets[s.row]=s,s},A.prototype.addLineWidget=function(s){if(this.$registerLineWidget(s),s.session=this.session,!this.editor)return s;var h=this.editor.renderer;s.html&&!s.el&&(s.el=D.createElement("div"),s.el.innerHTML=s.html),s.text&&!s.el&&(s.el=D.createElement("div"),s.el.textContent=s.text),s.el&&(D.addCssClass(s.el,"ace_lineWidgetContainer"),s.className&&D.addCssClass(s.el,s.className),s.el.style.position="absolute",s.el.style.zIndex="5",h.container.appendChild(s.el),s._inDocument=!0,s.coverGutter||(s.el.style.zIndex="3"),s.pixelHeight==null&&(s.pixelHeight=s.el.offsetHeight)),s.rowCount==null&&(s.rowCount=s.pixelHeight/h.layerConfig.lineHeight);var o=this.session.getFoldAt(s.row,0);if(s.$fold=o,o){var n=this.session.lineWidgets;s.row==o.end.row&&!n[o.start.row]?n[o.start.row]=s:s.hidden=!0}return this.session._emit("changeFold",{data:{start:{row:s.row}}}),this.$updateRows(),this.renderWidgets(null,h),this.onWidgetChanged(s),s},A.prototype.removeLineWidget=function(s){if(s._inDocument=!1,s.session=null,s.el&&s.el.parentNode&&s.el.parentNode.removeChild(s.el),s.editor&&s.editor.destroy)try{s.editor.destroy()}catch{}if(this.session.lineWidgets){var h=this.session.lineWidgets[s.row];if(h==s)this.session.lineWidgets[s.row]=s.$oldWidget,s.$oldWidget&&this.onWidgetChanged(s.$oldWidget);else for(;h;){if(h.$oldWidget==s){h.$oldWidget=s.$oldWidget;break}h=h.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:s.row}}}),this.$updateRows()},A.prototype.getWidgetsAtRow=function(s){for(var h=this.session.lineWidgets,o=h&&h[s],n=[];o;)n.push(o),o=o.$oldWidget;return n},A.prototype.onWidgetChanged=function(s){this.session._changedWidgets.push(s),this.editor&&this.editor.renderer.updateFull()},A.prototype.measureWidgets=function(s,h){var o=this.session._changedWidgets,n=h.layerConfig;if(!(!o||!o.length)){for(var i=1/0,t=0;t<o.length;t++){var e=o[t];if(!(!e||!e.el)&&e.session==this.session){if(!e._inDocument){if(this.session.lineWidgets[e.row]!=e)continue;e._inDocument=!0,h.container.appendChild(e.el)}e.h=e.el.offsetHeight,e.fixedWidth||(e.w=e.el.offsetWidth,e.screenWidth=Math.ceil(e.w/n.characterWidth));var r=e.h/n.lineHeight;e.coverLine&&(r-=this.session.getRowLineCount(e.row),r<0&&(r=0)),e.rowCount!=r&&(e.rowCount=r,e.row<i&&(i=e.row))}}i!=1/0&&(this.session._emit("changeFold",{data:{start:{row:i}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},A.prototype.renderWidgets=function(s,h){var o=h.layerConfig,n=this.session.lineWidgets;if(n){for(var i=Math.min(this.firstRow,o.firstRow),t=Math.max(this.lastRow,o.lastRow,n.length);i>0&&!n[i];)i--;this.firstRow=o.firstRow,this.lastRow=o.lastRow,h.$cursorLayer.config=o;for(var e=i;e<=t;e++){var r=n[e];if(!(!r||!r.el)){if(r.hidden){r.el.style.top=-100-(r.pixelHeight||0)+"px";continue}r._inDocument||(r._inDocument=!0,h.container.appendChild(r.el));var a=h.$cursorLayer.getPixelPosition({row:e,column:0},!0).top;r.coverLine||(a+=o.lineHeight*this.session.getRowLineCount(r.row)),r.el.style.top=a-o.offset+"px";var u=r.coverGutter?0:h.gutterWidth;r.fixedWidth||(u-=h.scrollLeft),r.el.style.left=u+"px",r.fullWidth&&r.screenWidth&&(r.el.style.minWidth=o.width+2*o.padding+"px"),r.fixedWidth?r.el.style.right=h.scrollBar.getWidth()+"px":r.el.style.right=""}}}},A}();I.LineWidgets=S}),ace.define("ace/keyboard/gutter_handler",["require","exports","module","ace/lib/keys","ace/mouse/default_gutter_handler"],function(g,I,z){var D=g("../lib/keys"),S=g("../mouse/default_gutter_handler").GutterTooltip,A=function(){function h(o){this.editor=o,this.gutterLayer=o.renderer.$gutterLayer,this.element=o.renderer.$gutter,this.lines=o.renderer.$gutterLayer.$lines,this.activeRowIndex=null,this.activeLane=null,this.annotationTooltip=new S(this.editor)}return h.prototype.addListener=function(){this.element.addEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.addEventListener("focusout",this.$blurGutter.bind(this)),this.editor.on("mousewheel",this.$blurGutter.bind(this))},h.prototype.removeListener=function(){this.element.removeEventListener("keydown",this.$onGutterKeyDown.bind(this)),this.element.removeEventListener("focusout",this.$blurGutter.bind(this)),this.editor.off("mousewheel",this.$blurGutter.bind(this))},h.prototype.$onGutterKeyDown=function(o){if(this.annotationTooltip.isOpen){o.preventDefault(),o.keyCode===D.escape&&this.annotationTooltip.hideTooltip();return}if(o.target===this.element){if(o.keyCode!=D.enter)return;o.preventDefault();var n=this.editor.getCursorPosition().row;this.editor.isRowVisible(n)||this.editor.scrollToLine(n,!0,!0),setTimeout((function(){var i=this.$rowToRowIndex(this.gutterLayer.$cursorCell.row),t=this.$findNearestFoldWidget(i),e=this.$findNearestAnnotation(i);if(!(t===null&&e===null)){if(t===null&&e!==null){this.activeRowIndex=e,this.activeLane="annotation",this.$focusAnnotation(this.activeRowIndex);return}if(t!==null&&e===null){this.activeRowIndex=t,this.activeLane="fold",this.$focusFoldWidget(this.activeRowIndex);return}if(Math.abs(e-i)<Math.abs(t-i)){this.activeRowIndex=e,this.activeLane="annotation",this.$focusAnnotation(this.activeRowIndex);return}else{this.activeRowIndex=t,this.activeLane="fold",this.$focusFoldWidget(this.activeRowIndex);return}}}).bind(this),10);return}this.$handleGutterKeyboardInteraction(o),setTimeout((function(){this.editor._signal("gutterkeydown",new s(o,this))}).bind(this),10)},h.prototype.$handleGutterKeyboardInteraction=function(o){if(o.keyCode===D.tab){o.preventDefault();return}if(o.keyCode===D.escape){o.preventDefault(),this.$blurGutter(),this.element.focus(),this.lane=null;return}if(o.keyCode===D.up){switch(o.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetUp();break;case"annotation":this.$moveAnnotationUp();break}return}if(o.keyCode===D.down){switch(o.preventDefault(),this.activeLane){case"fold":this.$moveFoldWidgetDown();break;case"annotation":this.$moveAnnotationDown();break}return}if(o.keyCode===D.left){o.preventDefault(),this.$switchLane("annotation");return}if(o.keyCode===D.right){o.preventDefault(),this.$switchLane("fold");return}if(o.keyCode===D.enter||o.keyCode===D.space){switch(o.preventDefault(),this.activeLane){case"fold":if(this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)]==="start"){var n=this.$rowIndexToRow(this.activeRowIndex);this.editor.session.onFoldWidgetClick(this.$rowIndexToRow(this.activeRowIndex),o),setTimeout((function(){this.$rowIndexToRow(this.activeRowIndex)!==n&&(this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=this.$rowToRowIndex(n),this.$focusFoldWidget(this.activeRowIndex))}).bind(this),10);break}else if(this.gutterLayer.session.foldWidgets[this.$rowIndexToRow(this.activeRowIndex)]==="end")break;return;case"annotation":var i=this.lines.cells[this.activeRowIndex].element.childNodes[2],t=i.getBoundingClientRect(),e=this.annotationTooltip.getElement().style;e.left=t.right+"px",e.top=t.bottom+"px",this.annotationTooltip.showTooltip(this.$rowIndexToRow(this.activeRowIndex));break}return}},h.prototype.$blurGutter=function(){if(this.activeRowIndex!==null)switch(this.activeLane){case"fold":this.$blurFoldWidget(this.activeRowIndex);break;case"annotation":this.$blurAnnotation(this.activeRowIndex);break}this.annotationTooltip.isOpen&&this.annotationTooltip.hideTooltip()},h.prototype.$isFoldWidgetVisible=function(o){var n=this.editor.isRowFullyVisible(this.$rowIndexToRow(o)),i=this.$getFoldWidget(o).style.display!=="none";return n&&i},h.prototype.$isAnnotationVisible=function(o){var n=this.editor.isRowFullyVisible(this.$rowIndexToRow(o)),i=this.$getAnnotation(o).style.display!=="none";return n&&i},h.prototype.$getFoldWidget=function(o){var n=this.lines.get(o),i=n.element;return i.childNodes[1]},h.prototype.$getAnnotation=function(o){var n=this.lines.get(o),i=n.element;return i.childNodes[2]},h.prototype.$findNearestFoldWidget=function(o){if(this.$isFoldWidgetVisible(o))return o;for(var n=0;o-n>0||o+n<this.lines.getLength()-1;){if(n++,o-n>=0&&this.$isFoldWidgetVisible(o-n))return o-n;if(o+n<=this.lines.getLength()-1&&this.$isFoldWidgetVisible(o+n))return o+n}return null},h.prototype.$findNearestAnnotation=function(o){if(this.$isAnnotationVisible(o))return o;for(var n=0;o-n>0||o+n<this.lines.getLength()-1;){if(n++,o-n>=0&&this.$isAnnotationVisible(o-n))return o-n;if(o+n<=this.lines.getLength()-1&&this.$isAnnotationVisible(o+n))return o+n}return null},h.prototype.$focusFoldWidget=function(o){if(o!=null){var n=this.$getFoldWidget(o);n.classList.add(this.editor.renderer.keyboardFocusClassName),n.focus()}},h.prototype.$focusAnnotation=function(o){if(o!=null){var n=this.$getAnnotation(o);n.classList.add(this.editor.renderer.keyboardFocusClassName),n.focus()}},h.prototype.$blurFoldWidget=function(o){var n=this.$getFoldWidget(o);n.classList.remove(this.editor.renderer.keyboardFocusClassName),n.blur()},h.prototype.$blurAnnotation=function(o){var n=this.$getAnnotation(o);n.classList.remove(this.editor.renderer.keyboardFocusClassName),n.blur()},h.prototype.$moveFoldWidgetUp=function(){for(var o=this.activeRowIndex;o>0;)if(o--,this.$isFoldWidgetVisible(o)){this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=o,this.$focusFoldWidget(this.activeRowIndex);return}},h.prototype.$moveFoldWidgetDown=function(){for(var o=this.activeRowIndex;o<this.lines.getLength()-1;)if(o++,this.$isFoldWidgetVisible(o)){this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=o,this.$focusFoldWidget(this.activeRowIndex);return}},h.prototype.$moveAnnotationUp=function(){for(var o=this.activeRowIndex;o>0;)if(o--,this.$isAnnotationVisible(o)){this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=o,this.$focusAnnotation(this.activeRowIndex);return}},h.prototype.$moveAnnotationDown=function(){for(var o=this.activeRowIndex;o<this.lines.getLength()-1;)if(o++,this.$isAnnotationVisible(o)){this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=o,this.$focusAnnotation(this.activeRowIndex);return}},h.prototype.$switchLane=function(o){switch(o){case"annotation":if(this.activeLane==="annotation")break;var n=this.$findNearestAnnotation(this.activeRowIndex);if(n==null)break;this.activeLane="annotation",this.$blurFoldWidget(this.activeRowIndex),this.activeRowIndex=n,this.$focusAnnotation(this.activeRowIndex);break;case"fold":if(this.activeLane==="fold")break;var i=this.$findNearestFoldWidget(this.activeRowIndex);if(i==null)break;this.activeLane="fold",this.$blurAnnotation(this.activeRowIndex),this.activeRowIndex=i,this.$focusFoldWidget(this.activeRowIndex);break}},h.prototype.$rowIndexToRow=function(o){var n=this.lines.get(o);return n?n.row:null},h.prototype.$rowToRowIndex=function(o){for(var n=0;n<this.lines.getLength();n++){var i=this.lines.get(n);if(i.row==o)return n}return null},h}();I.GutterKeyboardHandler=A;var s=function(){function h(o,n){this.gutterKeyboardHandler=n,this.domEvent=o}return h.prototype.getKey=function(){return D.keyCodeToString(this.domEvent.keyCode)},h.prototype.getRow=function(){return this.gutterKeyboardHandler.$rowIndexToRow(this.gutterKeyboardHandler.activeRowIndex)},h.prototype.isInAnnotationLane=function(){return this.gutterKeyboardHandler.activeLane==="annotation"},h.prototype.isInFoldLane=function(){return this.gutterKeyboardHandler.activeLane==="fold"},h}();I.GutterKeyboardEvent=s}),ace.define("ace/editor",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator","ace/line_widgets","ace/keyboard/gutter_handler","ace/config","ace/clipboard","ace/lib/keys"],function(g,I,z){var D=this&&this.__values||function(b){var l=typeof Symbol=="function"&&Symbol.iterator,C=l&&b[l],O=0;if(C)return C.call(b);if(b&&typeof b.length=="number")return{next:function(){return b&&O>=b.length&&(b=void 0),{value:b&&b[O++],done:!b}}};throw new TypeError(l?"Object is not iterable.":"Symbol.iterator is not defined.")},S=g("./lib/oop"),A=g("./lib/dom"),s=g("./lib/lang"),h=g("./lib/useragent"),o=g("./keyboard/textinput").TextInput,n=g("./mouse/mouse_handler").MouseHandler,i=g("./mouse/fold_handler").FoldHandler,t=g("./keyboard/keybinding").KeyBinding,e=g("./edit_session").EditSession,r=g("./search").Search,a=g("./range").Range,u=g("./lib/event_emitter").EventEmitter,p=g("./commands/command_manager").CommandManager,M=g("./commands/default_commands").commands,w=g("./config"),m=g("./token_iterator").TokenIterator,d=g("./line_widgets").LineWidgets,_=g("./keyboard/gutter_handler").GutterKeyboardHandler,T=g("./config").nls,R=g("./clipboard"),$=g("./lib/keys"),k=function(){function b(l,C,O){this.session,this.$toDestroy=[];var N=l.getContainerElement();this.container=N,this.renderer=l,this.id="editor"+ ++b.$uid,this.commands=new p(h.isMac?"mac":"win",M),typeof document=="object"&&(this.textInput=new o(l.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new n(this),new i(this)),this.keyBinding=new t(this),this.$search=new r().set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=s.delayedCall((function(){this._signal("input",{}),this.session&&!this.session.destroyed&&this.session.bgTokenizer.scheduleStart()}).bind(this)),this.on("change",function(G,W){W._$emitInputEvent.schedule(31)}),this.setSession(C||O&&O.session||new e("")),w.resetOptions(this),O&&this.setOptions(O),w._signal("editor",this)}return b.prototype.$initOperationListeners=function(){this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=s.delayedCall(this.endOperation.bind(this,!0)),this.on("change",(function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.docChanged=!0}).bind(this),!0),this.on("changeSelection",(function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.selectionChanged=!0}).bind(this),!0)},b.prototype.startOperation=function(l){if(this.curOp){if(!l||this.curOp.command)return;this.prevOp=this.curOp}l||(this.previousCommand=null,l={}),this.$opResetTimer.schedule(),this.curOp=this.session.curOp={command:l.command||{},args:l.args,scrollTop:this.renderer.scrollTop},this.curOp.selectionBefore=this.selection.toJSON()},b.prototype.endOperation=function(l){if(this.curOp&&this.session){if(l&&l.returnValue===!1||!this.session)return this.curOp=null;if(l==!0&&this.curOp.command&&this.curOp.command.name=="mouse"||(this._signal("beforeEndOperation"),!this.curOp))return;var C=this.curOp.command,O=C&&C.scrollIntoView;if(O){switch(O){case"center-animate":O="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var N=this.selection.getRange(),G=this.renderer.layerConfig;(N.start.row>=G.lastRow||N.end.row<=G.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead);break}O=="animate"&&this.renderer.animateScrolling(this.curOp.scrollTop)}var W=this.selection.toJSON();this.curOp.selectionAfter=W,this.$lastSel=this.selection.toJSON(),this.session.getUndoManager().addSelection(W),this.prevOp=this.curOp,this.curOp=null}},b.prototype.$historyTracker=function(l){if(this.$mergeUndoDeltas){var C=this.prevOp,O=this.$mergeableCommands,N=C.command&&l.command.name==C.command.name;if(l.command.name=="insertstring"){var G=l.args;this.mergeNextCommand===void 0&&(this.mergeNextCommand=!0),N=N&&this.mergeNextCommand&&(!/\s/.test(G)||/\s/.test(C.args)),this.mergeNextCommand=!0}else N=N&&O.indexOf(l.command.name)!==-1;this.$mergeUndoDeltas!="always"&&Date.now()-this.sequenceStartTime>2e3&&(N=!1),N?this.session.mergeUndoDeltas=!0:O.indexOf(l.command.name)!==-1&&(this.sequenceStartTime=Date.now())}},b.prototype.setKeyboardHandler=function(l,C){if(l&&typeof l=="string"&&l!="ace"){this.$keybindingId=l;var O=this;w.loadModule(["keybinding",l],function(N){O.$keybindingId==l&&O.keyBinding.setKeyboardHandler(N&&N.handler),C&&C()})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(l),C&&C()},b.prototype.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},b.prototype.setSession=function(l){if(this.session!=l){this.curOp&&this.endOperation(),this.curOp={};var C=this.session;if(C){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange);var O=this.session.getSelection();O.off("changeCursor",this.$onCursorChange),O.off("changeSelection",this.$onSelectionChange)}this.session=l,l?(this.$onDocumentChange=this.onDocumentChange.bind(this),l.on("change",this.$onDocumentChange),this.renderer.setSession(l),this.$onChangeMode=this.onChangeMode.bind(this),l.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),l.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),l.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),l.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),l.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),l.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=l.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.onCursorChange(),this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(l)),this._signal("changeSession",{session:l,oldSession:C}),this.curOp=null,C&&C._signal("changeEditor",{oldEditor:this}),l&&l._signal("changeEditor",{editor:this}),l&&!l.destroyed&&l.bgTokenizer.scheduleStart()}},b.prototype.getSession=function(){return this.session},b.prototype.setValue=function(l,C){return this.session.doc.setValue(l),C?C==1?this.navigateFileEnd():C==-1&&this.navigateFileStart():this.selectAll(),l},b.prototype.getValue=function(){return this.session.getValue()},b.prototype.getSelection=function(){return this.selection},b.prototype.resize=function(l){this.renderer.onResize(l)},b.prototype.setTheme=function(l,C){this.renderer.setTheme(l,C)},b.prototype.getTheme=function(){return this.renderer.getTheme()},b.prototype.setStyle=function(l){this.renderer.setStyle(l)},b.prototype.unsetStyle=function(l){this.renderer.unsetStyle(l)},b.prototype.getFontSize=function(){return this.getOption("fontSize")||A.computedStyle(this.container).fontSize},b.prototype.setFontSize=function(l){this.setOption("fontSize",l)},b.prototype.$highlightBrackets=function(){if(!this.$highlightPending){var l=this;this.$highlightPending=!0,setTimeout(function(){l.$highlightPending=!1;var C=l.session;if(!(!C||C.destroyed)){C.$bracketHighlight&&(C.$bracketHighlight.markerIds.forEach(function(Q){C.removeMarker(Q)}),C.$bracketHighlight=null);var O=l.getCursorPosition(),N=l.getKeyboardHandler(),G=N&&N.$getDirectionForHighlight&&N.$getDirectionForHighlight(l),W=C.getMatchingBracketRanges(O,G);if(!W){var K=new m(C,O.row,O.column),V=K.getCurrentToken();if(V&&/\b(?:tag-open|tag-name)/.test(V.type)){var Y=C.getMatchingTags(O);Y&&(W=[Y.openTagName.isEmpty()?Y.openTag:Y.openTagName,Y.closeTagName.isEmpty()?Y.closeTag:Y.closeTagName])}}if(!W&&C.$mode.getMatching&&(W=C.$mode.getMatching(l.session)),!W){l.getHighlightIndentGuides()&&l.renderer.$textLayer.$highlightIndentGuide();return}var re="ace_bracket";Array.isArray(W)?W.length==1&&(re="ace_error_bracket"):W=[W],W.length==2&&(a.comparePoints(W[0].end,W[1].start)==0?W=[a.fromPoints(W[0].start,W[1].end)]:a.comparePoints(W[0].start,W[1].end)==0&&(W=[a.fromPoints(W[1].start,W[0].end)])),C.$bracketHighlight={ranges:W,markerIds:W.map(function(Q){return C.addMarker(Q,re,"text")})},l.getHighlightIndentGuides()&&l.renderer.$textLayer.$highlightIndentGuide()}},50)}},b.prototype.focus=function(){this.textInput.focus()},b.prototype.isFocused=function(){return this.textInput.isFocused()},b.prototype.blur=function(){this.textInput.blur()},b.prototype.onFocus=function(l){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",l))},b.prototype.onBlur=function(l){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",l))},b.prototype.$cursorChange=function(){this.renderer.updateCursor(),this.$highlightBrackets(),this.$updateHighlightActiveLine()},b.prototype.onDocumentChange=function(l){var C=this.session.$useWrapMode,O=l.start.row==l.end.row?l.end.row:1/0;this.renderer.updateLines(l.start.row,O,C),this._signal("change",l),this.$cursorChange()},b.prototype.onTokenizerUpdate=function(l){var C=l.data;this.renderer.updateLines(C.first,C.last)},b.prototype.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},b.prototype.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},b.prototype.onCursorChange=function(){this.$cursorChange(),this._signal("changeSelection")},b.prototype.$updateHighlightActiveLine=function(){var l=this.getSession(),C;if(this.$highlightActiveLine&&((this.$selectionStyle!="line"||!this.selection.isMultiLine())&&(C=this.getCursorPosition()),this.renderer.theme&&this.renderer.theme.$selectionColorConflict&&!this.selection.isEmpty()&&(C=!1),this.renderer.$maxLines&&this.session.getLength()===1&&!(this.renderer.$minLines>1)&&(C=!1)),l.$highlightLineMarker&&!C)l.removeMarker(l.$highlightLineMarker.id),l.$highlightLineMarker=null;else if(!l.$highlightLineMarker&&C){var O=new a(C.row,C.column,C.row,1/0);O.id=l.addMarker(O,"ace_active-line","screenLine"),l.$highlightLineMarker=O}else C&&(l.$highlightLineMarker.start.row=C.row,l.$highlightLineMarker.end.row=C.row,l.$highlightLineMarker.start.column=C.column,l._signal("changeBackMarker"))},b.prototype.onSelectionChange=function(l){var C=this.session;if(C.$selectionMarker&&C.removeMarker(C.$selectionMarker),C.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var O=this.selection.getRange(),N=this.getSelectionStyle();C.$selectionMarker=C.addMarker(O,"ace_selection",N)}var G=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(G),this._signal("changeSelection")},b.prototype.$getSelectionHighLightRegexp=function(){var l=this.session,C=this.getSelectionRange();if(!(C.isEmpty()||C.isMultiLine())){var O=C.start.column,N=C.end.column,G=l.getLine(C.start.row),W=G.substring(O,N);if(!(W.length>5e3||!/[\w\d]/.test(W))){var K=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:W}),V=G.substring(O-1,N+1);if(K.test(V))return K}}},b.prototype.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},b.prototype.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},b.prototype.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},b.prototype.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},b.prototype.onChangeMode=function(l){this.renderer.updateText(),this._emit("changeMode",l)},b.prototype.onChangeWrapLimit=function(){this.renderer.updateFull()},b.prototype.onChangeWrapMode=function(){this.renderer.onResize(!0)},b.prototype.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},b.prototype.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},b.prototype.getCopyText=function(){var l=this.getSelectedText(),C=this.session.doc.getNewLineCharacter(),O=!1;if(!l&&this.$copyWithEmptySelection){O=!0;for(var N=this.selection.getAllRanges(),G=0;G<N.length;G++){var W=N[G];G&&N[G-1].start.row==W.start.row||(l+=this.session.getLine(W.start.row)+C)}}var K={text:l};return this._signal("copy",K),R.lineMode=O?K.text:!1,K.text},b.prototype.onCopy=function(){this.commands.exec("copy",this)},b.prototype.onCut=function(){this.commands.exec("cut",this)},b.prototype.onPaste=function(l,C){var O={text:l,event:C};this.commands.exec("paste",this,O)},b.prototype.$handlePaste=function(l){typeof l=="string"&&(l={text:l}),this._signal("paste",l);var C=l.text,O=C===R.lineMode,N=this.session;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)O?N.insert({row:this.selection.lead.row,column:0},C):this.insert(C);else if(O)this.selection.rangeList.ranges.forEach(function(re){N.insert({row:re.start.row,column:0},C)});else{var G=C.split(/\r\n|\r|\n/),W=this.selection.rangeList.ranges,K=G.length==2&&(!G[0]||!G[1]);if(G.length!=W.length||K)return this.commands.exec("insertstring",this,C);for(var V=W.length;V--;){var Y=W[V];Y.isEmpty()||N.remove(Y),N.insert(Y.start,G[V])}}},b.prototype.execCommand=function(l,C){return this.commands.exec(l,this,C)},b.prototype.insert=function(l,C){var O=this.session,N=O.getMode(),G=this.getCursorPosition();if(this.getBehavioursEnabled()&&!C){var W=N.transformAction(O.getState(G.row),"insertion",this,O,l);W&&(l!==W.text&&(this.inVirtualSelectionMode||(this.session.mergeUndoDeltas=!1,this.mergeNextCommand=!1)),l=W.text)}if(l=="	"&&(l=this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()&&l.indexOf(`
`)==-1){var K=a.fromPoints(G,G);K.end.column+=l.length,this.session.remove(K)}}else{var K=this.getSelectionRange();G=this.session.remove(K),this.clearSelection()}if(l==`
`||l==`\r
`){var Q=O.getLine(G.row);if(G.column>Q.search(/\S|$/)){var V=Q.substr(G.column).search(/\S|$/);O.doc.removeInLine(G.row,G.column,G.column+V)}}this.clearSelection();var Y=G.column,re=O.getState(G.row),Q=O.getLine(G.row),ie=N.checkOutdent(re,Q,l);if(O.insert(G,l),W&&W.selection&&(W.selection.length==2?this.selection.setSelectionRange(new a(G.row,Y+W.selection[0],G.row,Y+W.selection[1])):this.selection.setSelectionRange(new a(G.row+W.selection[0],W.selection[1],G.row+W.selection[2],W.selection[3]))),this.$enableAutoIndent){if(O.getDocument().isNewLine(l)){var ue=N.getNextLineIndent(re,Q.slice(0,G.column),O.getTabString());O.insert({row:G.row+1,column:0},ue)}ie&&N.autoOutdent(re,O,G.row)}},b.prototype.autoIndent=function(){for(var l=this.session,C=l.getMode(),O=this.selection.isEmpty()?[new a(0,0,l.doc.getLength()-1,0)]:this.selection.getAllRanges(),N="",G="",W="",K=l.getTabString(),V=0;V<O.length;V++)for(var Y=O[V].start.row,re=O[V].end.row,Q=Y;Q<=re;Q++){Q>0&&(N=l.getState(Q-1),G=l.getLine(Q-1),W=C.getNextLineIndent(N,G,K));var ie=l.getLine(Q),ue=C.$getIndent(ie);if(W!==ue){if(ue.length>0){var ge=new a(Q,0,Q,ue.length);l.remove(ge)}W.length>0&&l.insert({row:Q,column:0},W)}C.autoOutdent(N,l,Q)}},b.prototype.onTextInput=function(l,C){if(!C)return this.keyBinding.onTextInput(l);this.startOperation({command:{name:"insertstring"}});var O=this.applyComposition.bind(this,l,C);this.selection.rangeCount?this.forEachSelection(O):O(),this.endOperation()},b.prototype.applyComposition=function(l,C){if(C.extendLeft||C.extendRight){var O=this.selection.getRange();O.start.column-=C.extendLeft,O.end.column+=C.extendRight,O.start.column<0&&(O.start.row--,O.start.column+=this.session.getLine(O.start.row).length+1),this.selection.setRange(O),!l&&!O.isEmpty()&&this.remove()}if((l||!this.selection.isEmpty())&&this.insert(l,!0),C.restoreStart||C.restoreEnd){var O=this.selection.getRange();O.start.column-=C.restoreStart,O.end.column-=C.restoreEnd,this.selection.setRange(O)}},b.prototype.onCommandKey=function(l,C,O){return this.keyBinding.onCommandKey(l,C,O)},b.prototype.setOverwrite=function(l){this.session.setOverwrite(l)},b.prototype.getOverwrite=function(){return this.session.getOverwrite()},b.prototype.toggleOverwrite=function(){this.session.toggleOverwrite()},b.prototype.setScrollSpeed=function(l){this.setOption("scrollSpeed",l)},b.prototype.getScrollSpeed=function(){return this.getOption("scrollSpeed")},b.prototype.setDragDelay=function(l){this.setOption("dragDelay",l)},b.prototype.getDragDelay=function(){return this.getOption("dragDelay")},b.prototype.setSelectionStyle=function(l){this.setOption("selectionStyle",l)},b.prototype.getSelectionStyle=function(){return this.getOption("selectionStyle")},b.prototype.setHighlightActiveLine=function(l){this.setOption("highlightActiveLine",l)},b.prototype.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},b.prototype.setHighlightGutterLine=function(l){this.setOption("highlightGutterLine",l)},b.prototype.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},b.prototype.setHighlightSelectedWord=function(l){this.setOption("highlightSelectedWord",l)},b.prototype.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},b.prototype.setAnimatedScroll=function(l){this.renderer.setAnimatedScroll(l)},b.prototype.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},b.prototype.setShowInvisibles=function(l){this.renderer.setShowInvisibles(l)},b.prototype.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},b.prototype.setDisplayIndentGuides=function(l){this.renderer.setDisplayIndentGuides(l)},b.prototype.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},b.prototype.setHighlightIndentGuides=function(l){this.renderer.setHighlightIndentGuides(l)},b.prototype.getHighlightIndentGuides=function(){return this.renderer.getHighlightIndentGuides()},b.prototype.setShowPrintMargin=function(l){this.renderer.setShowPrintMargin(l)},b.prototype.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},b.prototype.setPrintMarginColumn=function(l){this.renderer.setPrintMarginColumn(l)},b.prototype.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},b.prototype.setReadOnly=function(l){this.setOption("readOnly",l)},b.prototype.getReadOnly=function(){return this.getOption("readOnly")},b.prototype.setBehavioursEnabled=function(l){this.setOption("behavioursEnabled",l)},b.prototype.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},b.prototype.setWrapBehavioursEnabled=function(l){this.setOption("wrapBehavioursEnabled",l)},b.prototype.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},b.prototype.setShowFoldWidgets=function(l){this.setOption("showFoldWidgets",l)},b.prototype.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},b.prototype.setFadeFoldWidgets=function(l){this.setOption("fadeFoldWidgets",l)},b.prototype.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},b.prototype.remove=function(l){this.selection.isEmpty()&&(l=="left"?this.selection.selectLeft():this.selection.selectRight());var C=this.getSelectionRange();if(this.getBehavioursEnabled()){var O=this.session,N=O.getState(C.start.row),G=O.getMode().transformAction(N,"deletion",this,O,C);if(C.end.column===0){var W=O.getTextRange(C);if(W[W.length-1]==`
`){var K=O.getLine(C.end.row);/^\s+$/.test(K)&&(C.end.column=K.length)}}G&&(C=G)}this.session.remove(C),this.clearSelection()},b.prototype.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},b.prototype.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},b.prototype.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.selection.isEmpty()&&this.selection.selectLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},b.prototype.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var l=this.getSelectionRange();l.start.column==l.end.column&&l.start.row==l.end.row&&(l.end.column=0,l.end.row++),this.session.remove(l),this.clearSelection()},b.prototype.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var l=this.getCursorPosition();this.insert(`
`),this.moveCursorToPosition(l)},b.prototype.setGhostText=function(l,C){this.session.widgetManager||(this.session.widgetManager=new d(this.session),this.session.widgetManager.attach(this)),this.renderer.setGhostText(l,C)},b.prototype.removeGhostText=function(){this.session.widgetManager&&this.renderer.removeGhostText()},b.prototype.transposeLetters=function(){if(this.selection.isEmpty()){var l=this.getCursorPosition(),C=l.column;if(C!==0){var O=this.session.getLine(l.row),N,G;C<O.length?(N=O.charAt(C)+O.charAt(C-1),G=new a(l.row,C-1,l.row,C+1)):(N=O.charAt(C-1)+O.charAt(C-2),G=new a(l.row,C-2,l.row,C)),this.session.replace(G,N),this.session.selection.moveToPosition(G.end)}}},b.prototype.toLowerCase=function(){var l=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var C=this.getSelectionRange(),O=this.session.getTextRange(C);this.session.replace(C,O.toLowerCase()),this.selection.setSelectionRange(l)},b.prototype.toUpperCase=function(){var l=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var C=this.getSelectionRange(),O=this.session.getTextRange(C);this.session.replace(C,O.toUpperCase()),this.selection.setSelectionRange(l)},b.prototype.indent=function(){var l=this.session,C=this.getSelectionRange();if(C.start.row<C.end.row){var O=this.$getSelectedRows();l.indentRows(O.first,O.last,"	");return}else if(C.start.column<C.end.column){var N=l.getTextRange(C);if(!/^\s+$/.test(N)){var O=this.$getSelectedRows();l.indentRows(O.first,O.last,"	");return}}var G=l.getLine(C.start.row),W=C.start,K=l.getTabSize(),V=l.documentToScreenColumn(W.row,W.column);if(this.session.getUseSoftTabs())var Y=K-V%K,re=s.stringRepeat(" ",Y);else{for(var Y=V%K;G[C.start.column-1]==" "&&Y;)C.start.column--,Y--;this.selection.setSelectionRange(C),re="	"}return this.insert(re)},b.prototype.blockIndent=function(){var l=this.$getSelectedRows();this.session.indentRows(l.first,l.last,"	")},b.prototype.blockOutdent=function(){var l=this.session.getSelection();this.session.outdentRows(l.getRange())},b.prototype.sortLines=function(){for(var l=this.$getSelectedRows(),C=this.session,O=[],N=l.first;N<=l.last;N++)O.push(C.getLine(N));O.sort(function(K,V){return K.toLowerCase()<V.toLowerCase()?-1:K.toLowerCase()>V.toLowerCase()?1:0});for(var G=new a(0,0,0,0),N=l.first;N<=l.last;N++){var W=C.getLine(N);G.start.row=N,G.end.row=N,G.end.column=W.length,C.replace(G,O[N-l.first])}},b.prototype.toggleCommentLines=function(){var l=this.session.getState(this.getCursorPosition().row),C=this.$getSelectedRows();this.session.getMode().toggleCommentLines(l,this.session,C.first,C.last)},b.prototype.toggleBlockComment=function(){var l=this.getCursorPosition(),C=this.session.getState(l.row),O=this.getSelectionRange();this.session.getMode().toggleBlockComment(C,this.session,O,l)},b.prototype.getNumberAt=function(l,C){var O=/[\-]?[0-9]+(?:\.[0-9]+)?/g;O.lastIndex=0;for(var N=this.session.getLine(l);O.lastIndex<C;){var G=O.exec(N);if(G.index<=C&&G.index+G[0].length>=C){var W={value:G[0],start:G.index,end:G.index+G[0].length};return W}}return null},b.prototype.modifyNumber=function(l){var C=this.selection.getCursor().row,O=this.selection.getCursor().column,N=new a(C,O-1,C,O),G=this.session.getTextRange(N);if(!isNaN(parseFloat(G))&&isFinite(G)){var W=this.getNumberAt(C,O);if(W){var K=W.value.indexOf(".")>=0?W.start+W.value.indexOf(".")+1:W.end,V=W.start+W.value.length-K,Y=parseFloat(W.value);Y*=Math.pow(10,V),K!==W.end&&O<K?l*=Math.pow(10,W.end-O-1):l*=Math.pow(10,W.end-O),Y+=l,Y/=Math.pow(10,V);var re=Y.toFixed(V),Q=new a(C,W.start,C,W.end);this.session.replace(Q,re),this.moveCursorTo(C,Math.max(W.start+1,O+re.length-W.value.length))}}else this.toggleWord()},b.prototype.toggleWord=function(){var l=this.selection.getCursor().row,C=this.selection.getCursor().column;this.selection.selectWord();var O=this.getSelectedText(),N=this.selection.getWordRange().start.column,G=O.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g,"$1 ").split(/\s/),W=C-N-1;W<0&&(W=0);var K=0,V=0,Y=this;O.match(/[A-Za-z0-9_]+/)&&G.forEach(function(Me,Ie){V=K+Me.length,W>=K&&W<=V&&(O=Me,Y.selection.clearSelection(),Y.moveCursorTo(l,K+N),Y.selection.selectTo(l,V+N)),K=V});for(var re=this.$toggleWordPairs,Q,ie=0;ie<re.length;ie++)for(var ue=re[ie],ge=0;ge<=1;ge++){var me=+!ge,ve=O.match(new RegExp("^\\s?_?("+s.escapeRegExp(ue[ge])+")\\s?$","i"));if(ve){var Ce=O.match(new RegExp("([_]|^|\\s)("+s.escapeRegExp(ve[1])+")($|\\s)","g"));Ce&&(Q=O.replace(new RegExp(s.escapeRegExp(ue[ge]),"i"),function(Me){var Ie=ue[me];return Me.toUpperCase()==Me?Ie=Ie.toUpperCase():Me.charAt(0).toUpperCase()==Me.charAt(0)&&(Ie=Ie.substr(0,0)+ue[me].charAt(0).toUpperCase()+Ie.substr(1)),Ie}),this.insert(Q),Q="")}}},b.prototype.findLinkAt=function(l,C){var O,N,G=this.session.getLine(l),W=G.split(/((?:https?|ftp):\/\/[\S]+)/),K=C;K<0&&(K=0);var V=0,Y=0,re;try{for(var Q=D(W),ie=Q.next();!ie.done;ie=Q.next()){var ue=ie.value;if(Y=V+ue.length,K>=V&&K<=Y&&ue.match(/((?:https?|ftp):\/\/[\S]+)/)){re=ue.replace(/[\s:.,'";}\]]+$/,"");break}V=Y}}catch(ge){O={error:ge}}finally{try{ie&&!ie.done&&(N=Q.return)&&N.call(Q)}finally{if(O)throw O.error}}return re},b.prototype.openLink=function(){var l=this.selection.getCursor(),C=this.findLinkAt(l.row,l.column);return C&&window.open(C,"_blank"),C!=null},b.prototype.removeLines=function(){var l=this.$getSelectedRows();this.session.removeFullLines(l.first,l.last),this.clearSelection()},b.prototype.duplicateSelection=function(){var l=this.selection,C=this.session,O=l.getRange(),N=l.isBackwards();if(O.isEmpty()){var G=O.start.row;C.duplicateLines(G,G)}else{var W=N?O.start:O.end,K=C.insert(W,C.getTextRange(O));O.start=W,O.end=K,l.setSelectionRange(O,N)}},b.prototype.moveLinesDown=function(){this.$moveLines(1,!1)},b.prototype.moveLinesUp=function(){this.$moveLines(-1,!1)},b.prototype.moveText=function(l,C,O){return this.session.moveText(l,C,O)},b.prototype.copyLinesUp=function(){this.$moveLines(-1,!0)},b.prototype.copyLinesDown=function(){this.$moveLines(1,!0)},b.prototype.$moveLines=function(l,C){var O,N,G=this.selection;if(!G.inMultiSelectMode||this.inVirtualSelectionMode){var W=G.toOrientedRange();O=this.$getSelectedRows(W),N=this.session.$moveLines(O.first,O.last,C?0:l),C&&l==-1&&(N=0),W.moveBy(N,0),G.fromOrientedRange(W)}else{var K=G.rangeList.ranges;G.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var V=0,Y=0,re=K.length,Q=0;Q<re;Q++){var ie=Q;K[Q].moveBy(V,0),O=this.$getSelectedRows(K[Q]);for(var ue=O.first,ge=O.last;++Q<re;){Y&&K[Q].moveBy(Y,0);var me=this.$getSelectedRows(K[Q]);if(C&&me.first!=ge)break;if(!C&&me.first>ge+1)break;ge=me.last}for(Q--,V=this.session.$moveLines(ue,ge,C?0:l),C&&l==-1&&(ie=Q+1);ie<=Q;)K[ie].moveBy(V,0),ie++;C||(V=0),Y+=V}G.fromOrientedRange(G.ranges[0]),G.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},b.prototype.$getSelectedRows=function(l){return l=(l||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(l.start.row),last:this.session.getRowFoldEnd(l.end.row)}},b.prototype.onCompositionStart=function(l){this.renderer.showComposition(l)},b.prototype.onCompositionUpdate=function(l){this.renderer.setCompositionText(l)},b.prototype.onCompositionEnd=function(){this.renderer.hideComposition()},b.prototype.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},b.prototype.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},b.prototype.isRowVisible=function(l){return l>=this.getFirstVisibleRow()&&l<=this.getLastVisibleRow()},b.prototype.isRowFullyVisible=function(l){return l>=this.renderer.getFirstFullyVisibleRow()&&l<=this.renderer.getLastFullyVisibleRow()},b.prototype.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},b.prototype.$moveByPage=function(l,C){var O=this.renderer,N=this.renderer.layerConfig,G=l*Math.floor(N.height/N.lineHeight);C===!0?this.selection.$moveSelection(function(){this.moveCursorBy(G,0)}):C===!1&&(this.selection.moveCursorBy(G,0),this.selection.clearSelection());var W=O.scrollTop;O.scrollBy(0,G*N.lineHeight),C!=null&&O.scrollCursorIntoView(null,.5),O.animateScrolling(W)},b.prototype.selectPageDown=function(){this.$moveByPage(1,!0)},b.prototype.selectPageUp=function(){this.$moveByPage(-1,!0)},b.prototype.gotoPageDown=function(){this.$moveByPage(1,!1)},b.prototype.gotoPageUp=function(){this.$moveByPage(-1,!1)},b.prototype.scrollPageDown=function(){this.$moveByPage(1)},b.prototype.scrollPageUp=function(){this.$moveByPage(-1)},b.prototype.scrollToRow=function(l){this.renderer.scrollToRow(l)},b.prototype.scrollToLine=function(l,C,O,N){this.renderer.scrollToLine(l,C,O,N)},b.prototype.centerSelection=function(){var l=this.getSelectionRange(),C={row:Math.floor(l.start.row+(l.end.row-l.start.row)/2),column:Math.floor(l.start.column+(l.end.column-l.start.column)/2)};this.renderer.alignCursor(C,.5)},b.prototype.getCursorPosition=function(){return this.selection.getCursor()},b.prototype.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},b.prototype.getSelectionRange=function(){return this.selection.getRange()},b.prototype.selectAll=function(){this.selection.selectAll()},b.prototype.clearSelection=function(){this.selection.clearSelection()},b.prototype.moveCursorTo=function(l,C){this.selection.moveCursorTo(l,C)},b.prototype.moveCursorToPosition=function(l){this.selection.moveCursorToPosition(l)},b.prototype.jumpToMatching=function(l,C){var O=this.getCursorPosition(),N=new m(this.session,O.row,O.column),G=N.getCurrentToken(),W=0;G&&G.type.indexOf("tag-name")!==-1&&(G=N.stepBackward());var K=G||N.stepForward();if(K){var V,Y=!1,re={},Q=O.column-K.start,ie,ue={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(K.value.match(/[{}()\[\]]/g)){for(;Q<K.value.length&&!Y;Q++)if(ue[K.value[Q]])switch(ie=ue[K.value[Q]]+"."+K.type.replace("rparen","lparen"),isNaN(re[ie])&&(re[ie]=0),K.value[Q]){case"(":case"[":case"{":re[ie]++;break;case")":case"]":case"}":re[ie]--,re[ie]===-1&&(V="bracket",Y=!0);break}}else K.type.indexOf("tag-name")!==-1&&(isNaN(re[K.value])&&(re[K.value]=0),G.value==="<"&&W>1?re[K.value]++:G.value==="</"&&re[K.value]--,re[K.value]===-1&&(V="tag",Y=!0));Y||(G=K,W++,K=N.stepForward(),Q=0)}while(K&&!Y);if(V){var ge,me;if(V==="bracket")ge=this.session.getBracketRange(O),ge||(ge=new a(N.getCurrentTokenRow(),N.getCurrentTokenColumn()+Q-1,N.getCurrentTokenRow(),N.getCurrentTokenColumn()+Q-1),me=ge.start,(C||me.row===O.row&&Math.abs(me.column-O.column)<2)&&(ge=this.session.getBracketRange(me)));else if(V==="tag"){if(!K||K.type.indexOf("tag-name")===-1)return;if(ge=new a(N.getCurrentTokenRow(),N.getCurrentTokenColumn()-2,N.getCurrentTokenRow(),N.getCurrentTokenColumn()-2),ge.compare(O.row,O.column)===0){var ve=this.session.getMatchingTags(O);ve&&(ve.openTag.contains(O.row,O.column)?(ge=ve.closeTag,me=ge.start):(ge=ve.openTag,ve.closeTag.start.row===O.row&&ve.closeTag.start.column===O.column?me=ge.end:me=ge.start))}me=me||ge.start}me=ge&&ge.cursor||me,me&&(l?ge&&C?this.selection.setRange(ge):ge&&ge.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(me.row,me.column):this.selection.moveTo(me.row,me.column))}}},b.prototype.gotoLine=function(l,C,O){this.selection.clearSelection(),this.session.unfold({row:l-1,column:C||0}),this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(l-1,C||0),this.isRowFullyVisible(l-1)||this.scrollToLine(l-1,!0,O)},b.prototype.navigateTo=function(l,C){this.selection.moveTo(l,C)},b.prototype.navigateUp=function(l){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var C=this.selection.anchor.getPosition();return this.moveCursorToPosition(C)}this.selection.clearSelection(),this.selection.moveCursorBy(-l||-1,0)},b.prototype.navigateDown=function(l){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var C=this.selection.anchor.getPosition();return this.moveCursorToPosition(C)}this.selection.clearSelection(),this.selection.moveCursorBy(l||1,0)},b.prototype.navigateLeft=function(l){if(this.selection.isEmpty())for(l=l||1;l--;)this.selection.moveCursorLeft();else{var C=this.getSelectionRange().start;this.moveCursorToPosition(C)}this.clearSelection()},b.prototype.navigateRight=function(l){if(this.selection.isEmpty())for(l=l||1;l--;)this.selection.moveCursorRight();else{var C=this.getSelectionRange().end;this.moveCursorToPosition(C)}this.clearSelection()},b.prototype.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},b.prototype.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},b.prototype.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},b.prototype.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},b.prototype.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},b.prototype.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},b.prototype.replace=function(l,C){C&&this.$search.set(C);var O=this.$search.find(this.session),N=0;return O&&(this.$tryReplace(O,l)&&(N=1),this.selection.setSelectionRange(O),this.renderer.scrollSelectionIntoView(O.start,O.end)),N},b.prototype.replaceAll=function(l,C){C&&this.$search.set(C);var O=this.$search.findAll(this.session),N=0;if(!O.length)return N;var G=this.getSelectionRange();this.selection.moveTo(0,0);for(var W=O.length-1;W>=0;--W)this.$tryReplace(O[W],l)&&N++;return this.selection.setSelectionRange(G),N},b.prototype.$tryReplace=function(l,C){var O=this.session.getTextRange(l);return C=this.$search.replace(O,C),C!==null?(l.end=this.session.replace(l,C),l):null},b.prototype.getLastSearchOptions=function(){return this.$search.getOptions()},b.prototype.find=function(l,C,O){C||(C={}),typeof l=="string"||l instanceof RegExp?C.needle=l:typeof l=="object"&&S.mixin(C,l);var N=this.selection.getRange();C.needle==null&&(l=this.session.getTextRange(N)||this.$search.$options.needle,l||(N=this.session.getWordRange(N.start.row,N.start.column),l=this.session.getTextRange(N)),this.$search.set({needle:l})),this.$search.set(C),C.start||this.$search.set({start:N});var G=this.$search.find(this.session);if(C.preventScroll)return G;if(G)return this.revealRange(G,O),G;C.backwards?N.start=N.end:N.end=N.start,this.selection.setRange(N)},b.prototype.findNext=function(l,C){this.find({skipCurrent:!0,backwards:!1},l,C)},b.prototype.findPrevious=function(l,C){this.find(l,{skipCurrent:!0,backwards:!0},C)},b.prototype.revealRange=function(l,C){this.session.unfold(l),this.selection.setSelectionRange(l);var O=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(l.start,l.end,.5),C!==!1&&this.renderer.animateScrolling(O)},b.prototype.undo=function(){this.session.getUndoManager().undo(this.session),this.renderer.scrollCursorIntoView(null,.5)},b.prototype.redo=function(){this.session.getUndoManager().redo(this.session),this.renderer.scrollCursorIntoView(null,.5)},b.prototype.destroy=function(){this.$toDestroy&&(this.$toDestroy.forEach(function(l){l.destroy()}),this.$toDestroy=null),this.$mouseHandler&&this.$mouseHandler.destroy(),this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy(),this._$emitInputEvent&&this._$emitInputEvent.cancel(),this.removeAllListeners()},b.prototype.setAutoScrollEditorIntoView=function(l){if(l){var C,O=this,N=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var G=this.$scrollAnchor;G.style.cssText="position:absolute",this.container.insertBefore(G,this.container.firstChild);var W=this.on("changeSelection",function(){N=!0}),K=this.renderer.on("beforeRender",function(){N&&(C=O.renderer.container.getBoundingClientRect())}),V=this.renderer.on("afterRender",function(){if(N&&C&&(O.isFocused()||O.searchBox&&O.searchBox.isFocused())){var Y=O.renderer,re=Y.$cursorLayer.$pixelPos,Q=Y.layerConfig,ie=re.top-Q.offset;re.top>=0&&ie+C.top<0?N=!0:re.top<Q.height&&re.top+C.top+Q.lineHeight>window.innerHeight?N=!1:N=null,N!=null&&(G.style.top=ie+"px",G.style.left=re.left+"px",G.style.height=Q.lineHeight+"px",G.scrollIntoView(N)),N=C=null}});this.setAutoScrollEditorIntoView=function(Y){Y||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",W),this.renderer.off("afterRender",V),this.renderer.off("beforeRender",K))}}},b.prototype.$resetCursorStyle=function(){var l=this.$cursorStyle||"ace",C=this.renderer.$cursorLayer;C&&(C.setSmoothBlinking(/smooth/.test(l)),C.isBlinking=!this.$readOnly&&l!="wide",A.setCssClass(C.element,"ace_slim-cursors",/slim/.test(l)))},b.prototype.prompt=function(l,C,O){var N=this;w.loadModule("ace/ext/prompt",function(G){G.prompt(N,l,C,O)})},b}();k.$uid=0,k.prototype.curOp=null,k.prototype.prevOp={},k.prototype.$mergeableCommands=["backspace","del","insertstring"],k.prototype.$toggleWordPairs=[["first","last"],["true","false"],["yes","no"],["width","height"],["top","bottom"],["right","left"],["on","off"],["x","y"],["get","set"],["max","min"],["horizontal","vertical"],["show","hide"],["add","remove"],["up","down"],["before","after"],["even","odd"],["in","out"],["inside","outside"],["next","previous"],["increase","decrease"],["attach","detach"],["&&","||"],["==","!="]],S.implement(k.prototype,u),w.defineOptions(k.prototype,"editor",{selectionStyle:{set:function(b){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:b})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(b){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(b){this.textInput.setReadOnly(b),this.$resetCursorStyle()},initialValue:!1},copyWithEmptySelection:{set:function(b){this.textInput.setCopyWithEmptySelection(b)},initialValue:!1},cursorStyle:{set:function(b){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},enableAutoIndent:{initialValue:!0},autoScrollEditorIntoView:{set:function(b){this.setAutoScrollEditorIntoView(b)}},keyboardHandler:{set:function(b){this.setKeyboardHandler(b)},get:function(){return this.$keybindingId},handlesSet:!0},value:{set:function(b){this.session.setValue(b)},get:function(){return this.getValue()},handlesSet:!0,hidden:!0},session:{set:function(b){this.setSession(b)},get:function(){return this.session},handlesSet:!0,hidden:!0},showLineNumbers:{set:function(b){this.renderer.$gutterLayer.setShowLineNumbers(b),this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER),b&&this.$relativeLineNumbers?v.attach(this):v.detach(this)},initialValue:!0},relativeLineNumbers:{set:function(b){this.$showLineNumbers&&b?v.attach(this):v.detach(this)}},placeholder:{set:function(b){this.$updatePlaceholder||(this.$updatePlaceholder=(function(){var l=this.session&&(this.renderer.$composition||this.session.getLength()>1||this.session.getLine(0).length>0);if(l&&this.renderer.placeholderNode)this.renderer.off("afterRender",this.$updatePlaceholder),A.removeCssClass(this.container,"ace_hasPlaceholder"),this.renderer.placeholderNode.remove(),this.renderer.placeholderNode=null;else if(!l&&!this.renderer.placeholderNode){this.renderer.on("afterRender",this.$updatePlaceholder),A.addCssClass(this.container,"ace_hasPlaceholder");var C=A.createElement("div");C.className="ace_placeholder",C.textContent=this.$placeholder||"",this.renderer.placeholderNode=C,this.renderer.content.appendChild(this.renderer.placeholderNode)}else!l&&this.renderer.placeholderNode&&(this.renderer.placeholderNode.textContent=this.$placeholder||"")}).bind(this),this.on("input",this.$updatePlaceholder)),this.$updatePlaceholder()}},enableKeyboardAccessibility:{set:function(b){var l={name:"blurTextInput",description:"Set focus to the editor content div to allow tabbing through the page",bindKey:"Esc",exec:function(N){N.blur(),N.renderer.scroller.focus()},readOnly:!0},C=function(N){if(N.target==this.renderer.scroller&&N.keyCode===$.enter){N.preventDefault();var G=this.getCursorPosition().row;this.isRowVisible(G)||this.scrollToLine(G,!0,!0),this.focus()}},O;b?(this.renderer.enableKeyboardAccessibility=!0,this.renderer.keyboardFocusClassName="ace_keyboard-focus",this.textInput.getElement().setAttribute("tabindex",-1),this.textInput.setNumberOfExtraLines(h.isWin?3:0),this.renderer.scroller.setAttribute("tabindex",0),this.renderer.scroller.setAttribute("role","group"),this.renderer.scroller.setAttribute("aria-roledescription",T("editor.scroller.aria-roledescription","editor")),this.renderer.scroller.classList.add(this.renderer.keyboardFocusClassName),this.renderer.scroller.setAttribute("aria-label",T("editor.scroller.aria-label","Editor content, press Enter to start editing, press Escape to exit")),this.renderer.scroller.addEventListener("keyup",C.bind(this)),this.commands.addCommand(l),this.renderer.$gutter.setAttribute("tabindex",0),this.renderer.$gutter.setAttribute("aria-hidden",!1),this.renderer.$gutter.setAttribute("role","group"),this.renderer.$gutter.setAttribute("aria-roledescription",T("editor.gutter.aria-roledescription","editor")),this.renderer.$gutter.setAttribute("aria-label",T("editor.gutter.aria-label","Editor gutter, press Enter to interact with controls using arrow keys, press Escape to exit")),this.renderer.$gutter.classList.add(this.renderer.keyboardFocusClassName),this.renderer.content.setAttribute("aria-hidden",!0),O||(O=new _(this)),O.addListener(),this.textInput.setAriaOptions({setLabel:!0})):(this.renderer.enableKeyboardAccessibility=!1,this.textInput.getElement().setAttribute("tabindex",0),this.textInput.setNumberOfExtraLines(0),this.renderer.scroller.setAttribute("tabindex",-1),this.renderer.scroller.removeAttribute("role"),this.renderer.scroller.removeAttribute("aria-roledescription"),this.renderer.scroller.classList.remove(this.renderer.keyboardFocusClassName),this.renderer.scroller.removeAttribute("aria-label"),this.renderer.scroller.removeEventListener("keyup",C.bind(this)),this.commands.removeCommand(l),this.renderer.content.removeAttribute("aria-hidden"),this.renderer.$gutter.setAttribute("tabindex",-1),this.renderer.$gutter.setAttribute("aria-hidden",!0),this.renderer.$gutter.removeAttribute("role"),this.renderer.$gutter.removeAttribute("aria-roledescription"),this.renderer.$gutter.removeAttribute("aria-label"),this.renderer.$gutter.classList.remove(this.renderer.keyboardFocusClassName),O&&O.removeListener())},initialValue:!1},textInputAriaLabel:{set:function(b){this.$textInputAriaLabel=b},initialValue:""},enableMobileMenu:{set:function(b){this.$enableMobileMenu=b},initialValue:!0},customScrollbar:"renderer",hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",displayIndentGuides:"renderer",highlightIndentGuides:"renderer",showGutter:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",hasCssTransforms:"renderer",maxPixelHeight:"renderer",useTextareaForIME:"renderer",useResizeObserver:"renderer",useSvgGutterIcons:"renderer",showFoldedAnnotations:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimeout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",navigateWithinSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"});var v={getText:function(b,l){return(Math.abs(b.selection.lead.row-l)||l+1+(l<9?"":""))+""},getWidth:function(b,l,C){return Math.max(l.toString().length,(C.lastRow+1).toString().length,2)*C.characterWidth},update:function(b,l){l.renderer.$loop.schedule(l.renderer.CHANGE_GUTTER)},attach:function(b){b.renderer.$gutterLayer.$renderer=this,b.on("changeSelection",this.update),this.update(null,b)},detach:function(b){b.renderer.$gutterLayer.$renderer==this&&(b.renderer.$gutterLayer.$renderer=null),b.off("changeSelection",this.update),this.update(null,b)}};I.Editor=k}),ace.define("ace/layer/lines",["require","exports","module","ace/lib/dom"],function(g,I,z){var D=g("../lib/dom"),S=function(){function A(s,h){this.element=s,this.canvasHeight=h||5e5,this.element.style.height=this.canvasHeight*2+"px",this.cells=[],this.cellCache=[],this.$offsetCoefficient=0}return A.prototype.moveContainer=function(s){D.translate(this.element,0,-(s.firstRowScreen*s.lineHeight%this.canvasHeight)-s.offset*this.$offsetCoefficient)},A.prototype.pageChanged=function(s,h){return Math.floor(s.firstRowScreen*s.lineHeight/this.canvasHeight)!==Math.floor(h.firstRowScreen*h.lineHeight/this.canvasHeight)},A.prototype.computeLineTop=function(s,h,o){var n=h.firstRowScreen*h.lineHeight,i=Math.floor(n/this.canvasHeight),t=o.documentToScreenRow(s,0)*h.lineHeight;return t-i*this.canvasHeight},A.prototype.computeLineHeight=function(s,h,o){return h.lineHeight*o.getRowLineCount(s)},A.prototype.getLength=function(){return this.cells.length},A.prototype.get=function(s){return this.cells[s]},A.prototype.shift=function(){this.$cacheCell(this.cells.shift())},A.prototype.pop=function(){this.$cacheCell(this.cells.pop())},A.prototype.push=function(s){if(Array.isArray(s)){this.cells.push.apply(this.cells,s);for(var h=D.createFragment(this.element),o=0;o<s.length;o++)h.appendChild(s[o].element);this.element.appendChild(h)}else this.cells.push(s),this.element.appendChild(s.element)},A.prototype.unshift=function(s){if(Array.isArray(s)){this.cells.unshift.apply(this.cells,s);for(var h=D.createFragment(this.element),o=0;o<s.length;o++)h.appendChild(s[o].element);this.element.firstChild?this.element.insertBefore(h,this.element.firstChild):this.element.appendChild(h)}else this.cells.unshift(s),this.element.insertAdjacentElement("afterbegin",s.element)},A.prototype.last=function(){return this.cells.length?this.cells[this.cells.length-1]:null},A.prototype.$cacheCell=function(s){s&&(s.element.remove(),this.cellCache.push(s))},A.prototype.createCell=function(s,h,o,n){var i=this.cellCache.pop();if(!i){var t=D.createElement("div");n&&n(t),this.element.appendChild(t),i={element:t,text:"",row:s}}return i.row=s,i},A}();I.Lines=S}),ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/layer/lines","ace/config"],function(g,I,z){var D=g("../lib/dom"),S=g("../lib/oop"),A=g("../lib/lang"),s=g("../lib/event_emitter").EventEmitter,h=g("./lines").Lines,o=g("../config").nls,n=function(){function t(e){this.element=D.createElement("div"),this.element.className="ace_layer ace_gutter-layer",e.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$lines=new h(this.element),this.$lines.$offsetCoefficient=1}return t.prototype.setSession=function(e){this.session&&this.session.off("change",this.$updateAnnotations),this.session=e,e&&e.on("change",this.$updateAnnotations)},t.prototype.addGutterDecoration=function(e,r){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(e,r)},t.prototype.removeGutterDecoration=function(e,r){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(e,r)},t.prototype.setAnnotations=function(e){this.$annotations=[];for(var r=0;r<e.length;r++){var a=e[r],u=a.row,p=this.$annotations[u];p||(p=this.$annotations[u]={text:[],type:[],displayText:[]});var M=a.text,w=a.text,m=a.type;M=M?A.escapeHTML(M):a.html||"",w=w||a.html||"",p.text.indexOf(M)===-1&&(p.text.push(M),p.type.push(m),p.displayText.push(w));var d=a.className;d?p.className=d:m==="error"?p.className=" ace_error":m==="security"&&!/\bace_error\b/.test(p.className)?p.className=" ace_security":m==="warning"&&!/\bace_(error|security)\b/.test(p.className)?p.className=" ace_warning":m==="info"&&!p.className?p.className=" ace_info":m==="hint"&&!p.className&&(p.className=" ace_hint")}},t.prototype.$updateAnnotations=function(e){if(this.$annotations.length){var r=e.start.row,a=e.end.row-r;if(a!==0)if(e.action=="remove")this.$annotations.splice(r,a+1,null);else{var u=new Array(a+1);u.unshift(r,1),this.$annotations.splice.apply(this.$annotations,u)}}},t.prototype.update=function(e){this.config=e;var r=this.session,a=e.firstRow,u=Math.min(e.lastRow+e.gutterOffset,r.getLength()-1);this.oldLastRow=u,this.config=e,this.$lines.moveContainer(e),this.$updateCursorRow();for(var p=r.getNextFoldLine(a),M=p?p.start.row:1/0,w=null,m=-1,d=a;;){if(d>M&&(d=p.end.row+1,p=r.getNextFoldLine(d,p),M=p?p.start.row:1/0),d>u){for(;this.$lines.getLength()>m+1;)this.$lines.pop();break}w=this.$lines.get(++m),w?w.row=d:(w=this.$lines.createCell(d,e,this.session,i),this.$lines.push(w)),this.$renderCell(w,e,p,d),d++}this._signal("afterRender"),this.$updateGutterWidth(e)},t.prototype.$updateGutterWidth=function(e){var r=this.session,a=r.gutterRenderer||this.$renderer,u=r.$firstLineNumber,p=this.$lines.last()?this.$lines.last().text:"";(this.$fixedWidth||r.$useWrapMode)&&(p=r.getLength()+u-1);var M=a?a.getWidth(r,p,e):p.toString().length*e.characterWidth,w=this.$padding||this.$computePadding();M+=w.left+w.right,M!==this.gutterWidth&&!isNaN(M)&&(this.gutterWidth=M,this.element.parentNode.style.width=this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._signal("changeGutterWidth",M))},t.prototype.$updateCursorRow=function(){if(this.$highlightGutterLine){var e=this.session.selection.getCursor();this.$cursorRow!==e.row&&(this.$cursorRow=e.row)}},t.prototype.updateLineHighlight=function(){if(this.$highlightGutterLine){var e=this.session.selection.cursor.row;if(this.$cursorRow=e,!(this.$cursorCell&&this.$cursorCell.row==e)){this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ",""));var r=this.$lines.cells;this.$cursorCell=null;for(var a=0;a<r.length;a++){var u=r[a];if(u.row>=this.$cursorRow){if(u.row>this.$cursorRow){var p=this.session.getFoldLine(this.$cursorRow);if(a>0&&p&&p.start.row==r[a-1].row)u=r[a-1];else break}u.element.className="ace_gutter-active-line "+u.element.className,this.$cursorCell=u;break}}}}},t.prototype.scrollLines=function(e){var r=this.config;if(this.config=e,this.$updateCursorRow(),this.$lines.pageChanged(r,e))return this.update(e);this.$lines.moveContainer(e);var a=Math.min(e.lastRow+e.gutterOffset,this.session.getLength()-1),u=this.oldLastRow;if(this.oldLastRow=a,!r||u<e.firstRow)return this.update(e);if(a<r.firstRow)return this.update(e);if(r.firstRow<e.firstRow)for(var p=this.session.getFoldedRowCount(r.firstRow,e.firstRow-1);p>0;p--)this.$lines.shift();if(u>a)for(var p=this.session.getFoldedRowCount(a+1,u);p>0;p--)this.$lines.pop();e.firstRow<r.firstRow&&this.$lines.unshift(this.$renderLines(e,e.firstRow,r.firstRow-1)),a>u&&this.$lines.push(this.$renderLines(e,u+1,a)),this.updateLineHighlight(),this._signal("afterRender"),this.$updateGutterWidth(e)},t.prototype.$renderLines=function(e,r,a){for(var u=[],p=r,M=this.session.getNextFoldLine(p),w=M?M.start.row:1/0;p>w&&(p=M.end.row+1,M=this.session.getNextFoldLine(p,M),w=M?M.start.row:1/0),!(p>a);){var m=this.$lines.createCell(p,e,this.session,i);this.$renderCell(m,e,M,p),u.push(m),p++}return u},t.prototype.$renderCell=function(e,r,a,u){var p=e.element,M=this.session,w=p.childNodes[0],m=p.childNodes[1],d=p.childNodes[2],_=d.firstChild,T=M.$firstLineNumber,R=M.$breakpoints,$=M.$decorations,k=M.gutterRenderer||this.$renderer,v=this.$showFoldWidgets&&M.foldWidgets,b=a?a.start.row:Number.MAX_VALUE,l=r.lineHeight+"px",C=this.$useSvgGutterIcons?"ace_gutter-cell_svg-icons ":"ace_gutter-cell ",O=this.$useSvgGutterIcons?"ace_icon_svg":"ace_icon",N=(k?k.getText(M,u):u+T).toString();if(this.$highlightGutterLine&&(u==this.$cursorRow||a&&u<this.$cursorRow&&u>=b&&this.$cursorRow<=a.end.row)&&(C+="ace_gutter-active-line ",this.$cursorCell!=e&&(this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ","")),this.$cursorCell=e)),R[u]&&(C+=R[u]),$[u]&&(C+=$[u]),this.$annotations[u]&&u!==b&&(C+=this.$annotations[u].className),v){var G=v[u];G==null&&(G=v[u]=M.getFoldWidget(u))}if(G){var W="ace_fold-widget ace_"+G,K=G=="start"&&u==b&&u<a.end.row;if(K){W+=" ace_closed";for(var V="",Y=!1,re=u+1;re<=a.end.row;re++)if(this.$annotations[re]){if(this.$annotations[re].className===" ace_error"){Y=!0,V=" ace_error_fold";break}this.$annotations[re].className===" ace_security"?(Y=!0,V=" ace_security_fold"):this.$annotations[re].className===" ace_warning"&&V!==" ace_security_fold"&&(Y=!0,V=" ace_warning_fold")}C+=V}else W+=" ace_open";m.className!=W&&(m.className=W),D.setStyle(m.style,"height",l),D.setStyle(m.style,"display","inline-block"),m.setAttribute("role","button"),m.setAttribute("tabindex","-1");var Q=M.getFoldWidgetRange(u);Q?m.setAttribute("aria-label",o("gutter.code-folding.range.aria-label","Toggle code folding, rows $0 through $1",[Q.start.row+1,Q.end.row+1])):a?m.setAttribute("aria-label",o("gutter.code-folding.closed.aria-label","Toggle code folding, rows $0 through $1",[a.start.row+1,a.end.row+1])):m.setAttribute("aria-label",o("gutter.code-folding.open.aria-label","Toggle code folding, row $0",[u+1])),K?(m.setAttribute("aria-expanded","false"),m.setAttribute("title",o("gutter.code-folding.closed.title","Unfold code"))):(m.setAttribute("aria-expanded","true"),m.setAttribute("title",o("gutter.code-folding.open.title","Fold code")))}else m&&(D.setStyle(m.style,"display","none"),m.setAttribute("tabindex","0"),m.removeAttribute("role"),m.removeAttribute("aria-label"));if(Y&&this.$showFoldedAnnotations){d.className="ace_gutter_annotation",_.className=O,_.className+=V,D.setStyle(_.style,"height",l),D.setStyle(d.style,"display","block"),D.setStyle(d.style,"height",l);var ie;switch(V){case" ace_error_fold":ie=o("gutter.annotation.aria-label.error","Error, read annotations row $0",[N]);break;case" ace_security_fold":ie=o("gutter.annotation.aria-label.security","Security finding, read annotations row $0",[N]);break;case" ace_warning_fold":ie=o("gutter.annotation.aria-label.warning","Warning, read annotations row $0",[N]);break}d.setAttribute("aria-label",ie),d.setAttribute("tabindex","-1"),d.setAttribute("role","button")}else if(this.$annotations[u]){d.className="ace_gutter_annotation",_.className=O,this.$useSvgGutterIcons?_.className+=this.$annotations[u].className:p.classList.add(this.$annotations[u].className.replace(" ","")),D.setStyle(_.style,"height",l),D.setStyle(d.style,"display","block"),D.setStyle(d.style,"height",l);var ie;switch(this.$annotations[u].className){case" ace_error":ie=o("gutter.annotation.aria-label.error","Error, read annotations row $0",[N]);break;case" ace_security":ie=o("gutter.annotation.aria-label.security","Security finding, read annotations row $0",[N]);break;case" ace_warning":ie=o("gutter.annotation.aria-label.warning","Warning, read annotations row $0",[N]);break;case" ace_info":ie=o("gutter.annotation.aria-label.info","Info, read annotations row $0",[N]);break;case" ace_hint":ie=o("gutter.annotation.aria-label.hint","Suggestion, read annotations row $0",[N]);break}d.setAttribute("aria-label",ie),d.setAttribute("tabindex","-1"),d.setAttribute("role","button")}else D.setStyle(d.style,"display","none"),d.removeAttribute("aria-label"),d.removeAttribute("role"),d.setAttribute("tabindex","0");return N!==w.data&&(w.data=N),p.className!=C&&(p.className=C),D.setStyle(e.element.style,"height",this.$lines.computeLineHeight(u,r,M)+"px"),D.setStyle(e.element.style,"top",this.$lines.computeLineTop(u,r,M)+"px"),e.text=N,d.style.display==="none"&&m.style.display==="none"?e.element.setAttribute("aria-hidden",!0):e.element.setAttribute("aria-hidden",!1),e},t.prototype.setHighlightGutterLine=function(e){this.$highlightGutterLine=e},t.prototype.setShowLineNumbers=function(e){this.$renderer=!e&&{getWidth:function(){return 0},getText:function(){return""}}},t.prototype.getShowLineNumbers=function(){return this.$showLineNumbers},t.prototype.setShowFoldWidgets=function(e){e?D.addCssClass(this.element,"ace_folding-enabled"):D.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=e,this.$padding=null},t.prototype.getShowFoldWidgets=function(){return this.$showFoldWidgets},t.prototype.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var e=D.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=(parseInt(e.borderLeftWidth)||0)+(parseInt(e.paddingLeft)||0)+1,this.$padding.right=(parseInt(e.borderRightWidth)||0)+(parseInt(e.paddingRight)||0),this.$padding},t.prototype.getRegion=function(e){var r=this.$padding||this.$computePadding(),a=this.element.getBoundingClientRect();if(e.x<r.left+a.left)return"markers";if(this.$showFoldWidgets&&e.x>a.right-r.right)return"foldWidgets"},t}();n.prototype.$fixedWidth=!1,n.prototype.$highlightGutterLine=!0,n.prototype.$renderer="",n.prototype.$showLineNumbers=!0,n.prototype.$showFoldWidgets=!0,S.implement(n.prototype,s);function i(t){var e=document.createTextNode("");t.appendChild(e);var r=D.createElement("span");t.appendChild(r);var a=D.createElement("span");t.appendChild(a);var u=D.createElement("span");return a.appendChild(u),t}I.Gutter=n}),ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(g,I,z){var D=g("../range").Range,S=g("../lib/dom"),A=function(){function h(o){this.element=S.createElement("div"),this.element.className="ace_layer ace_marker-layer",o.appendChild(this.element)}return h.prototype.setPadding=function(o){this.$padding=o},h.prototype.setSession=function(o){this.session=o},h.prototype.setMarkers=function(o){this.markers=o},h.prototype.elt=function(o,n){var i=this.i!=-1&&this.element.childNodes[this.i];i?this.i++:(i=document.createElement("div"),this.element.appendChild(i),this.i=-1),i.style.cssText=n,i.className=o},h.prototype.update=function(o){if(o){this.config=o,this.i=0;var n;for(var i in this.markers){var t=this.markers[i];if(!t.range){t.update(n,this,this.session,o);continue}var e=t.range.clipRows(o.firstRow,o.lastRow);if(!e.isEmpty())if(e=e.toScreenRange(this.session),t.renderer){var r=this.$getTop(e.start.row,o),a=this.$padding+e.start.column*o.characterWidth;t.renderer(n,e,a,r,o)}else t.type=="fullLine"?this.drawFullLineMarker(n,e,t.clazz,o):t.type=="screenLine"?this.drawScreenLineMarker(n,e,t.clazz,o):e.isMultiLine()?t.type=="text"?this.drawTextMarker(n,e,t.clazz,o):this.drawMultiLineMarker(n,e,t.clazz,o):this.drawSingleLineMarker(n,e,t.clazz+" ace_start ace_br15",o)}if(this.i!=-1)for(;this.i<this.element.childElementCount;)this.element.removeChild(this.element.lastChild)}},h.prototype.$getTop=function(o,n){return(o-n.firstRowScreen)*n.lineHeight},h.prototype.drawTextMarker=function(o,n,i,t,e){for(var r=this.session,a=n.start.row,u=n.end.row,p=a,M=0,w=0,m=r.getScreenLastRowColumn(p),d=new D(p,n.start.column,p,w);p<=u;p++)d.start.row=d.end.row=p,d.start.column=p==a?n.start.column:r.getRowWrapIndent(p),d.end.column=m,M=w,w=m,m=p+1<u?r.getScreenLastRowColumn(p+1):p==u?0:n.end.column,this.drawSingleLineMarker(o,d,i+(p==a?" ace_start":"")+" ace_br"+s(p==a||p==a+1&&n.start.column,M<w,w>m,p==u),t,p==u?0:1,e)},h.prototype.drawMultiLineMarker=function(o,n,i,t,e){var r=this.$padding,a=t.lineHeight,u=this.$getTop(n.start.row,t),p=r+n.start.column*t.characterWidth;if(e=e||"",this.session.$bidiHandler.isBidiRow(n.start.row)){var M=n.clone();M.end.row=M.start.row,M.end.column=this.session.getLine(M.start.row).length,this.drawBidiSingleLineMarker(o,M,i+" ace_br1 ace_start",t,null,e)}else this.elt(i+" ace_br1 ace_start","height:"+a+"px;right:"+r+"px;top:"+u+"px;left:"+p+"px;"+(e||""));if(this.session.$bidiHandler.isBidiRow(n.end.row)){var M=n.clone();M.start.row=M.end.row,M.start.column=0,this.drawBidiSingleLineMarker(o,M,i+" ace_br12",t,null,e)}else{u=this.$getTop(n.end.row,t);var w=n.end.column*t.characterWidth;this.elt(i+" ace_br12","height:"+a+"px;width:"+w+"px;top:"+u+"px;left:"+r+"px;"+(e||""))}if(a=(n.end.row-n.start.row-1)*t.lineHeight,!(a<=0)){u=this.$getTop(n.start.row+1,t);var m=(n.start.column?1:0)|(n.end.column?0:8);this.elt(i+(m?" ace_br"+m:""),"height:"+a+"px;right:"+r+"px;top:"+u+"px;left:"+r+"px;"+(e||""))}},h.prototype.drawSingleLineMarker=function(o,n,i,t,e,r){if(this.session.$bidiHandler.isBidiRow(n.start.row))return this.drawBidiSingleLineMarker(o,n,i,t,e,r);var a=t.lineHeight,u=(n.end.column+(e||0)-n.start.column)*t.characterWidth,p=this.$getTop(n.start.row,t),M=this.$padding+n.start.column*t.characterWidth;this.elt(i,"height:"+a+"px;width:"+u+"px;top:"+p+"px;left:"+M+"px;"+(r||""))},h.prototype.drawBidiSingleLineMarker=function(o,n,i,t,e,r){var a=t.lineHeight,u=this.$getTop(n.start.row,t),p=this.$padding,M=this.session.$bidiHandler.getSelections(n.start.column,n.end.column);M.forEach(function(w){this.elt(i,"height:"+a+"px;width:"+(w.width+(e||0))+"px;top:"+u+"px;left:"+(p+w.left)+"px;"+(r||""))},this)},h.prototype.drawFullLineMarker=function(o,n,i,t,e){var r=this.$getTop(n.start.row,t),a=t.lineHeight;n.start.row!=n.end.row&&(a+=this.$getTop(n.end.row,t)-r),this.elt(i,"height:"+a+"px;top:"+r+"px;left:0;right:0;"+(e||""))},h.prototype.drawScreenLineMarker=function(o,n,i,t,e){var r=this.$getTop(n.start.row,t),a=t.lineHeight;this.elt(i,"height:"+a+"px;top:"+r+"px;left:0;right:0;"+(e||""))},h}();A.prototype.$padding=0;function s(h,o,n,i){return(h?1:0)|(o?2:0)|(n?4:0)|(i?8:0)}I.Marker=A}),ace.define("ace/layer/text_util",["require","exports","module"],function(g,I,z){var D=new Set(["text","rparen","lparen"]);I.isTextToken=function(S){return D.has(S)}}),ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/layer/lines","ace/lib/event_emitter","ace/config","ace/layer/text_util"],function(g,I,z){var D=g("../lib/oop"),S=g("../lib/dom"),A=g("../lib/lang"),s=g("./lines").Lines,h=g("../lib/event_emitter").EventEmitter,o=g("../config").nls,n=g("./text_util").isTextToken,i=function(){function t(e){this.dom=S,this.element=this.dom.createElement("div"),this.element.className="ace_layer ace_text-layer",e.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this),this.$lines=new s(this.element)}return t.prototype.$updateEolChar=function(){var e=this.session.doc,r=e.getNewLineCharacter()==`
`&&e.getNewLineMode()!="windows",a=r?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=a)return this.EOL_CHAR=a,!0},t.prototype.setPadding=function(e){this.$padding=e,this.element.style.margin="0 "+e+"px"},t.prototype.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},t.prototype.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},t.prototype.$setFontMetrics=function(e){this.$fontMetrics=e,this.$fontMetrics.on("changeCharacterSize",(function(r){this._signal("changeCharacterSize",r)}).bind(this)),this.$pollSizeChanges()},t.prototype.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},t.prototype.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},t.prototype.setSession=function(e){this.session=e,e&&this.$computeTabString()},t.prototype.setShowInvisibles=function(e){return this.showInvisibles==e?!1:(this.showInvisibles=e,typeof e=="string"?(this.showSpaces=/tab/i.test(e),this.showTabs=/space/i.test(e),this.showEOL=/eol/i.test(e)):this.showSpaces=this.showTabs=this.showEOL=e,this.$computeTabString(),!0)},t.prototype.setDisplayIndentGuides=function(e){return this.displayIndentGuides==e?!1:(this.displayIndentGuides=e,this.$computeTabString(),!0)},t.prototype.setHighlightIndentGuides=function(e){return this.$highlightIndentGuides===e?!1:(this.$highlightIndentGuides=e,e)},t.prototype.$computeTabString=function(){var e=this.session.getTabSize();this.tabSize=e;for(var r=this.$tabStrings=[0],a=1;a<e+1;a++)if(this.showTabs){var u=this.dom.createElement("span");u.className="ace_invisible ace_invisible_tab",u.textContent=A.stringRepeat(this.TAB_CHAR,a),r.push(u)}else r.push(this.dom.createTextNode(A.stringRepeat(" ",a),this.element));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var p="ace_indent-guide",M=this.showSpaces?" ace_invisible ace_invisible_space":"",w=this.showSpaces?A.stringRepeat(this.SPACE_CHAR,this.tabSize):A.stringRepeat(" ",this.tabSize),m=this.showTabs?" ace_invisible ace_invisible_tab":"",d=this.showTabs?A.stringRepeat(this.TAB_CHAR,this.tabSize):w,u=this.dom.createElement("span");u.className=p+M,u.textContent=w,this.$tabStrings[" "]=u;var u=this.dom.createElement("span");u.className=p+m,u.textContent=d,this.$tabStrings["	"]=u}},t.prototype.updateLines=function(e,r,a){if(this.config.lastRow!=e.lastRow||this.config.firstRow!=e.firstRow)return this.update(e);this.config=e;for(var u=Math.max(r,e.firstRow),p=Math.min(a,e.lastRow),M=this.element.childNodes,w=0,d=e.firstRow;d<u;d++){var _=this.session.getFoldLine(d);if(_)if(_.containsRow(u)){u=_.start.row;break}else d=_.end.row;w++}for(var m=!1,d=u,_=this.session.getNextFoldLine(d),T=_?_.start.row:1/0;d>T&&(d=_.end.row+1,_=this.session.getNextFoldLine(d,_),T=_?_.start.row:1/0),!(d>p);){var R=M[w++];if(R){this.dom.removeChildren(R),this.$renderLine(R,d,d==T?_:!1),m&&(R.style.top=this.$lines.computeLineTop(d,e,this.session)+"px");var $=e.lineHeight*this.session.getRowLength(d)+"px";R.style.height!=$&&(m=!0,R.style.height=$)}d++}if(m)for(;w<this.$lines.cells.length;){var k=this.$lines.cells[w++];k.element.style.top=this.$lines.computeLineTop(k.row,e,this.session)+"px"}},t.prototype.scrollLines=function(e){var r=this.config;if(this.config=e,this.$lines.pageChanged(r,e))return this.update(e);this.$lines.moveContainer(e);var a=e.lastRow,u=r?r.lastRow:-1;if(!r||u<e.firstRow)return this.update(e);if(a<r.firstRow)return this.update(e);if(!r||r.lastRow<e.firstRow)return this.update(e);if(e.lastRow<r.firstRow)return this.update(e);if(r.firstRow<e.firstRow)for(var p=this.session.getFoldedRowCount(r.firstRow,e.firstRow-1);p>0;p--)this.$lines.shift();if(r.lastRow>e.lastRow)for(var p=this.session.getFoldedRowCount(e.lastRow+1,r.lastRow);p>0;p--)this.$lines.pop();e.firstRow<r.firstRow&&this.$lines.unshift(this.$renderLinesFragment(e,e.firstRow,r.firstRow-1)),e.lastRow>r.lastRow&&this.$lines.push(this.$renderLinesFragment(e,r.lastRow+1,e.lastRow)),this.$highlightIndentGuide()},t.prototype.$renderLinesFragment=function(e,r,a){for(var u=[],p=r,M=this.session.getNextFoldLine(p),w=M?M.start.row:1/0;p>w&&(p=M.end.row+1,M=this.session.getNextFoldLine(p,M),w=M?M.start.row:1/0),!(p>a);){var m=this.$lines.createCell(p,e,this.session),d=m.element;this.dom.removeChildren(d),S.setStyle(d.style,"height",this.$lines.computeLineHeight(p,e,this.session)+"px"),S.setStyle(d.style,"top",this.$lines.computeLineTop(p,e,this.session)+"px"),this.$renderLine(d,p,p==w?M:!1),this.$useLineGroups()?d.className="ace_line_group":d.className="ace_line",u.push(m),p++}return u},t.prototype.update=function(e){this.$lines.moveContainer(e),this.config=e;for(var r=e.firstRow,a=e.lastRow,u=this.$lines;u.getLength();)u.pop();u.push(this.$renderLinesFragment(e,r,a))},t.prototype.$renderToken=function(e,r,a,u){for(var p=this,M=/(\t)|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\uFEFF\uFFF9-\uFFFC\u2066\u2067\u2068\u202A\u202B\u202D\u202E\u202C\u2069]+)|(\u3000)|([\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,w=this.dom.createFragment(this.element),m,d=0;m=M.exec(u);){var _=m[1],T=m[2],R=m[3],$=m[4],k=m[5];if(!(!p.showSpaces&&T)){var v=d!=m.index?u.slice(d,m.index):"";if(d=m.index+m[0].length,v&&w.appendChild(this.dom.createTextNode(v,this.element)),_){var b=p.session.getScreenTabSize(r+m.index);w.appendChild(p.$tabStrings[b].cloneNode(!0)),r+=b-1}else if(T)if(p.showSpaces){var l=this.dom.createElement("span");l.className="ace_invisible ace_invisible_space",l.textContent=A.stringRepeat(p.SPACE_CHAR,T.length),w.appendChild(l)}else w.appendChild(this.dom.createTextNode(T,this.element));else if(R){var l=this.dom.createElement("span");l.className="ace_invisible ace_invisible_space ace_invalid",l.textContent=A.stringRepeat(p.SPACE_CHAR,R.length),w.appendChild(l)}else if($){r+=1;var l=this.dom.createElement("span");l.style.width=p.config.characterWidth*2+"px",l.className=p.showSpaces?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",l.textContent=p.showSpaces?p.SPACE_CHAR:$,w.appendChild(l)}else if(k){r+=1;var l=this.dom.createElement("span");l.style.width=p.config.characterWidth*2+"px",l.className="ace_cjk",l.textContent=k,w.appendChild(l)}}}if(w.appendChild(this.dom.createTextNode(d?u.slice(d):u,this.element)),n(a.type))e.appendChild(w);else{var C="ace_"+a.type.replace(/\./g," ace_"),l=this.dom.createElement("span");a.type=="fold"&&(l.style.width=a.value.length*this.config.characterWidth+"px",l.setAttribute("title",o("inline-fold.closed.title","Unfold code"))),l.className=C,l.appendChild(w),e.appendChild(l)}return r+u.length},t.prototype.renderIndentGuide=function(e,r,a){var u=r.search(this.$indentGuideRe);if(u<=0||u>=a)return r;if(r[0]==" "){u-=u%this.tabSize;for(var p=u/this.tabSize,M=0;M<p;M++)e.appendChild(this.$tabStrings[" "].cloneNode(!0));return this.$highlightIndentGuide(),r.substr(u)}else if(r[0]=="	"){for(var M=0;M<u;M++)e.appendChild(this.$tabStrings["	"].cloneNode(!0));return this.$highlightIndentGuide(),r.substr(u)}return this.$highlightIndentGuide(),r},t.prototype.$highlightIndentGuide=function(){if(!(!this.$highlightIndentGuides||!this.displayIndentGuides)){this.$highlightIndentGuideMarker={indentLevel:void 0,start:void 0,end:void 0,dir:void 0};var e=this.session.doc.$lines;if(e){var r=this.session.selection.getCursor(),a=/^\s*/.exec(this.session.doc.getLine(r.row))[0].length,u=Math.floor(a/this.tabSize);this.$highlightIndentGuideMarker={indentLevel:u,start:r.row};var p=this.session.$bracketHighlight;if(p){for(var M=this.session.$bracketHighlight.ranges,w=0;w<M.length;w++)if(r.row!==M[w].start.row){this.$highlightIndentGuideMarker.end=M[w].start.row,r.row>M[w].start.row?this.$highlightIndentGuideMarker.dir=-1:this.$highlightIndentGuideMarker.dir=1;break}}if(!this.$highlightIndentGuideMarker.end&&e[r.row]!==""&&r.column===e[r.row].length){this.$highlightIndentGuideMarker.dir=1;for(var w=r.row+1;w<e.length;w++){var m=e[w],d=/^\s*/.exec(m)[0].length;if(m!==""&&(this.$highlightIndentGuideMarker.end=w,d<=a))break}}this.$renderHighlightIndentGuide()}}},t.prototype.$clearActiveIndentGuide=function(){for(var e=this.$lines.cells,r=0;r<e.length;r++){var a=e[r],u=a.element.childNodes;if(u.length>0){for(var p=0;p<u.length;p++)if(u[p].classList&&u[p].classList.contains("ace_indent-guide-active")){u[p].classList.remove("ace_indent-guide-active");break}}}},t.prototype.$setIndentGuideActive=function(e,r){var a=this.session.doc.getLine(e.row);if(a!==""){var u=e.element.childNodes;if(u){var p=u[r-1];p&&p.classList&&p.classList.contains("ace_indent-guide")&&p.classList.add("ace_indent-guide-active")}}},t.prototype.$renderHighlightIndentGuide=function(){if(this.$lines){var e=this.$lines.cells;this.$clearActiveIndentGuide();var r=this.$highlightIndentGuideMarker.indentLevel;if(r!==0)if(this.$highlightIndentGuideMarker.dir===1)for(var a=0;a<e.length;a++){var u=e[a];if(this.$highlightIndentGuideMarker.end&&u.row>=this.$highlightIndentGuideMarker.start+1){if(u.row>=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(u,r)}}else for(var a=e.length-1;a>=0;a--){var u=e[a];if(this.$highlightIndentGuideMarker.end&&u.row<this.$highlightIndentGuideMarker.start){if(u.row<=this.$highlightIndentGuideMarker.end)break;this.$setIndentGuideActive(u,r)}}}},t.prototype.$createLineElement=function(e){var r=this.dom.createElement("div");return r.className="ace_line",r.style.height=this.config.lineHeight+"px",r},t.prototype.$renderWrappedLine=function(e,r,a){var u=0,p=0,M=a[0],w=0,m=this.$createLineElement();e.appendChild(m);for(var d=0;d<r.length;d++){var _=r[d],T=_.value;if(d==0&&this.displayIndentGuides){if(u=T.length,T=this.renderIndentGuide(m,T,M),!T)continue;u-=T.length}if(u+T.length<M)w=this.$renderToken(m,w,_,T),u+=T.length;else{for(;u+T.length>=M;)w=this.$renderToken(m,w,_,T.substring(0,M-u)),T=T.substring(M-u),u=M,m=this.$createLineElement(),e.appendChild(m),m.appendChild(this.dom.createTextNode(A.stringRepeat("",a.indent),this.element)),p++,w=0,M=a[p]||Number.MAX_VALUE;T.length!=0&&(u+=T.length,w=this.$renderToken(m,w,_,T))}}a[a.length-1]>this.MAX_LINE_LENGTH&&this.$renderOverflowMessage(m,w,null,"",!0)},t.prototype.$renderSimpleLine=function(e,r){for(var a=0,u=0;u<r.length;u++){var p=r[u],M=p.value;if(!(u==0&&this.displayIndentGuides&&(M=this.renderIndentGuide(e,M),!M))){if(a+M.length>this.MAX_LINE_LENGTH)return this.$renderOverflowMessage(e,a,p,M);a=this.$renderToken(e,a,p,M)}}},t.prototype.$renderOverflowMessage=function(e,r,a,u,p){a&&this.$renderToken(e,r,a,u.slice(0,this.MAX_LINE_LENGTH-r));var M=this.dom.createElement("span");M.className="ace_inline_button ace_keyword ace_toggle_wrap",M.textContent=p?"<hide>":"<click to see more...>",e.appendChild(M)},t.prototype.$renderLine=function(e,r,a){if(!a&&a!=!1&&(a=this.session.getFoldLine(r)),a)var u=this.$getFoldLineTokens(r,a);else var u=this.session.getTokens(r);var p=e;if(u.length){var M=this.session.getRowSplitData(r);if(M&&M.length){this.$renderWrappedLine(e,u,M);var p=e.lastChild}else{var p=e;this.$useLineGroups()&&(p=this.$createLineElement(),e.appendChild(p)),this.$renderSimpleLine(p,u)}}else this.$useLineGroups()&&(p=this.$createLineElement(),e.appendChild(p));if(this.showEOL&&p){a&&(r=a.end.row);var w=this.dom.createElement("span");w.className="ace_invisible ace_invisible_eol",w.textContent=r==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,p.appendChild(w)}},t.prototype.$getFoldLineTokens=function(e,r){var a=this.session,u=[];function p(w,m,d){for(var _=0,T=0;T+w[_].value.length<m;)if(T+=w[_].value.length,_++,_==w.length)return;if(T!=m){var R=w[_].value.substring(m-T);R.length>d-m&&(R=R.substring(0,d-m)),u.push({type:w[_].type,value:R}),T=m+R.length,_+=1}for(;T<d&&_<w.length;){var R=w[_].value;R.length+T>d?u.push({type:w[_].type,value:R.substring(0,d-T)}):u.push(w[_]),T+=R.length,_+=1}}var M=a.getTokens(e);return r.walk(function(w,m,d,_,T){w!=null?u.push({type:"fold",value:w}):(T&&(M=a.getTokens(m)),M.length&&p(M,_,d))},r.end.row,this.session.getLine(r.end.row).length),u},t.prototype.$useLineGroups=function(){return this.session.getUseWrapMode()},t}();i.prototype.EOF_CHAR="",i.prototype.EOL_CHAR_LF="",i.prototype.EOL_CHAR_CRLF="",i.prototype.EOL_CHAR=i.prototype.EOL_CHAR_LF,i.prototype.TAB_CHAR="",i.prototype.SPACE_CHAR="",i.prototype.$padding=0,i.prototype.MAX_LINE_LENGTH=1e4,i.prototype.showInvisibles=!1,i.prototype.showSpaces=!1,i.prototype.showTabs=!1,i.prototype.showEOL=!1,i.prototype.displayIndentGuides=!0,i.prototype.$highlightIndentGuides=!0,i.prototype.$tabStrings=[],i.prototype.destroy={},i.prototype.onChangeTabSize=i.prototype.$computeTabString,D.implement(i.prototype,h),I.Text=i}),ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(g,I,z){var D=g("../lib/dom"),S=function(){function A(s){this.element=D.createElement("div"),this.element.className="ace_layer ace_cursor-layer",s.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),D.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateOpacity.bind(this)}return A.prototype.$updateOpacity=function(s){for(var h=this.cursors,o=h.length;o--;)D.setStyle(h[o].style,"opacity",s?"":"0")},A.prototype.$startCssAnimation=function(){for(var s=this.cursors,h=s.length;h--;)s[h].style.animationDuration=this.blinkInterval+"ms";this.$isAnimating=!0,setTimeout((function(){this.$isAnimating&&D.addCssClass(this.element,"ace_animate-blinking")}).bind(this))},A.prototype.$stopCssAnimation=function(){this.$isAnimating=!1,D.removeCssClass(this.element,"ace_animate-blinking")},A.prototype.setPadding=function(s){this.$padding=s},A.prototype.setSession=function(s){this.session=s},A.prototype.setBlinking=function(s){s!=this.isBlinking&&(this.isBlinking=s,this.restartTimer())},A.prototype.setBlinkInterval=function(s){s!=this.blinkInterval&&(this.blinkInterval=s,this.restartTimer())},A.prototype.setSmoothBlinking=function(s){s!=this.smoothBlinking&&(this.smoothBlinking=s,D.setCssClass(this.element,"ace_smooth-blinking",s),this.$updateCursors(!0),this.restartTimer())},A.prototype.addCursor=function(){var s=D.createElement("div");return s.className="ace_cursor",this.element.appendChild(s),this.cursors.push(s),s},A.prototype.removeCursor=function(){if(this.cursors.length>1){var s=this.cursors.pop();return s.parentNode.removeChild(s),s}},A.prototype.hideCursor=function(){this.isVisible=!1,D.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},A.prototype.showCursor=function(){this.isVisible=!0,D.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},A.prototype.restartTimer=function(){var s=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.$stopCssAnimation(),this.smoothBlinking&&(this.$isSmoothBlinking=!1,D.removeCssClass(this.element,"ace_smooth-blinking")),s(!0),!this.isBlinking||!this.blinkInterval||!this.isVisible){this.$stopCssAnimation();return}if(this.smoothBlinking&&(this.$isSmoothBlinking=!0,setTimeout((function(){this.$isSmoothBlinking&&D.addCssClass(this.element,"ace_smooth-blinking")}).bind(this))),D.HAS_CSS_ANIMATION)this.$startCssAnimation();else{var h=(function(){this.timeoutId=setTimeout(function(){s(!1)},.6*this.blinkInterval)}).bind(this);this.intervalId=setInterval(function(){s(!0),h()},this.blinkInterval),h()}},A.prototype.getPixelPosition=function(s,h){if(!this.config||!this.session)return{left:0,top:0};s||(s=this.session.selection.getCursor());var o=this.session.documentToScreenPosition(s),n=this.$padding+(this.session.$bidiHandler.isBidiRow(o.row,s.row)?this.session.$bidiHandler.getPosLeft(o.column):o.column*this.config.characterWidth),i=(o.row-(h?this.config.firstRowScreen:0))*this.config.lineHeight;return{left:n,top:i}},A.prototype.isCursorInView=function(s,h){return s.top>=0&&s.top<h.maxHeight},A.prototype.update=function(s){this.config=s;var h=this.session.$selectionMarkers,o=0,n=0;(h===void 0||h.length===0)&&(h=[{cursor:null}]);for(var o=0,i=h.length;o<i;o++){var t=this.getPixelPosition(h[o].cursor,!0);if(!((t.top>s.height+s.offset||t.top<0)&&o>1)){var e=this.cursors[n++]||this.addCursor(),r=e.style;this.drawCursor?this.drawCursor(e,t,s,h[o],this.session):this.isCursorInView(t,s)?(D.setStyle(r,"display","block"),D.translate(e,t.left,t.top),D.setStyle(r,"width",Math.round(s.characterWidth)+"px"),D.setStyle(r,"height",s.lineHeight+"px")):D.setStyle(r,"display","none")}}for(;this.cursors.length>n;)this.removeCursor();var a=this.session.getOverwrite();this.$setOverwrite(a),this.$pixelPos=t,this.restartTimer()},A.prototype.$setOverwrite=function(s){s!=this.overwrite&&(this.overwrite=s,s?D.addCssClass(this.element,"ace_overwrite-cursors"):D.removeCssClass(this.element,"ace_overwrite-cursors"))},A.prototype.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)},A}();S.prototype.$padding=0,S.prototype.drawCursor=null,I.Cursor=S}),ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(g,I,z){var D=this&&this.__extends||function(){var e=function(r,a){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,p){u.__proto__=p}||function(u,p){for(var M in p)Object.prototype.hasOwnProperty.call(p,M)&&(u[M]=p[M])},e(r,a)};return function(r,a){if(typeof a!="function"&&a!==null)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");e(r,a);function u(){this.constructor=r}r.prototype=a===null?Object.create(a):(u.prototype=a.prototype,new u)}}(),S=g("./lib/oop"),A=g("./lib/dom"),s=g("./lib/event"),h=g("./lib/event_emitter").EventEmitter,o=32768,n=function(){function e(r,a){this.element=A.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+a,this.inner=A.createElement("div"),this.inner.className="ace_scrollbar-inner",this.inner.textContent="",this.element.appendChild(this.inner),r.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,s.addListener(this.element,"scroll",this.onScroll.bind(this)),s.addListener(this.element,"mousedown",s.preventDefault)}return e.prototype.setVisible=function(r){this.element.style.display=r?"":"none",this.isVisible=r,this.coeff=1},e}();S.implement(n.prototype,h);var i=function(e){D(r,e);function r(a,u){var p=e.call(this,a,"-v")||this;return p.scrollTop=0,p.scrollHeight=0,u.$scrollbarWidth=p.width=A.scrollbarWidth(a.ownerDocument),p.inner.style.width=p.element.style.width=(p.width||15)+5+"px",p.$minWidth=0,p}return r.prototype.onScroll=function(){if(!this.skipEvent){if(this.scrollTop=this.element.scrollTop,this.coeff!=1){var a=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-a)/(this.coeff-a)}this._emit("scroll",{data:this.scrollTop})}this.skipEvent=!1},r.prototype.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},r.prototype.setHeight=function(a){this.element.style.height=a+"px"},r.prototype.setScrollHeight=function(a){this.scrollHeight=a,a>o?(this.coeff=o/a,a=o):this.coeff!=1&&(this.coeff=1),this.inner.style.height=a+"px"},r.prototype.setScrollTop=function(a){this.scrollTop!=a&&(this.skipEvent=!0,this.scrollTop=a,this.element.scrollTop=a*this.coeff)},r}(n);i.prototype.setInnerHeight=i.prototype.setScrollHeight;var t=function(e){D(r,e);function r(a,u){var p=e.call(this,a,"-h")||this;return p.scrollLeft=0,p.height=u.$scrollbarWidth,p.inner.style.height=p.element.style.height=(p.height||15)+5+"px",p}return r.prototype.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},r.prototype.getHeight=function(){return this.isVisible?this.height:0},r.prototype.setWidth=function(a){this.element.style.width=a+"px"},r.prototype.setInnerWidth=function(a){this.inner.style.width=a+"px"},r.prototype.setScrollWidth=function(a){this.inner.style.width=a+"px"},r.prototype.setScrollLeft=function(a){this.scrollLeft!=a&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=a)},r}(n);I.ScrollBar=i,I.ScrollBarV=i,I.ScrollBarH=t,I.VScrollBar=i,I.HScrollBar=t}),ace.define("ace/scrollbar_custom",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(g,I,z){var D=this&&this.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,u){a.__proto__=u}||function(a,u){for(var p in u)Object.prototype.hasOwnProperty.call(u,p)&&(a[p]=u[p])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function a(){this.constructor=e}e.prototype=r===null?Object.create(r):(a.prototype=r.prototype,new a)}}(),S=g("./lib/oop"),A=g("./lib/dom"),s=g("./lib/event"),h=g("./lib/event_emitter").EventEmitter;A.importCssString(`.ace_editor>.ace_sb-v div, .ace_editor>.ace_sb-h div{
  position: absolute;
  background: rgba(128, 128, 128, 0.6);
  -moz-box-sizing: border-box;
  box-sizing: border-box;
  border: 1px solid #bbb;
  border-radius: 2px;
  z-index: 8;
}
.ace_editor>.ace_sb-v, .ace_editor>.ace_sb-h {
  position: absolute;
  z-index: 6;
  background: none;
  overflow: hidden!important;
}
.ace_editor>.ace_sb-v {
  z-index: 6;
  right: 0;
  top: 0;
  width: 12px;
}
.ace_editor>.ace_sb-v div {
  z-index: 8;
  right: 0;
  width: 100%;
}
.ace_editor>.ace_sb-h {
  bottom: 0;
  left: 0;
  height: 12px;
}
.ace_editor>.ace_sb-h div {
  bottom: 0;
  height: 100%;
}
.ace_editor>.ace_sb_grabbed {
  z-index: 8;
  background: #000;
}`,"ace_scrollbar.css",!1);var o=function(){function t(e,r){this.element=A.createElement("div"),this.element.className="ace_sb"+r,this.inner=A.createElement("div"),this.inner.className="",this.element.appendChild(this.inner),this.VScrollWidth=12,this.HScrollHeight=12,e.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,s.addMultiMouseDownListener(this.element,[500,300,300],this,"onMouseDown")}return t.prototype.setVisible=function(e){this.element.style.display=e?"":"none",this.isVisible=e,this.coeff=1},t}();S.implement(o.prototype,h);var n=function(t){D(e,t);function e(r,a){var u=t.call(this,r,"-v")||this;return u.scrollTop=0,u.scrollHeight=0,u.parent=r,u.width=u.VScrollWidth,u.renderer=a,u.inner.style.width=u.element.style.width=(u.width||15)+"px",u.$minWidth=0,u}return e.prototype.onMouseDown=function(r,a){if(r==="mousedown"&&!(s.getButton(a)!==0||a.detail===2)){if(a.target===this.inner){var u=this,p=a.clientY,M=function($){p=$.clientY},w=function(){clearInterval(T)},m=a.clientY,d=this.thumbTop,_=function(){if(p!==void 0){var $=u.scrollTopFromThumbTop(d+p-m);$!==u.scrollTop&&u._emit("scroll",{data:$})}};s.capture(this.inner,M,w);var T=setInterval(_,20);return s.preventDefault(a)}var R=a.clientY-this.element.getBoundingClientRect().top-this.thumbHeight/2;return this._emit("scroll",{data:this.scrollTopFromThumbTop(R)}),s.preventDefault(a)}},e.prototype.getHeight=function(){return this.height},e.prototype.scrollTopFromThumbTop=function(r){var a=r*(this.pageHeight-this.viewHeight)/(this.slideHeight-this.thumbHeight);return a=a>>0,a<0?a=0:a>this.pageHeight-this.viewHeight&&(a=this.pageHeight-this.viewHeight),a},e.prototype.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},e.prototype.setHeight=function(r){this.height=Math.max(0,r),this.slideHeight=this.height,this.viewHeight=this.height,this.setScrollHeight(this.pageHeight,!0)},e.prototype.setScrollHeight=function(r,a){this.pageHeight===r&&!a||(this.pageHeight=r,this.thumbHeight=this.slideHeight*this.viewHeight/this.pageHeight,this.thumbHeight>this.slideHeight&&(this.thumbHeight=this.slideHeight),this.thumbHeight<15&&(this.thumbHeight=15),this.inner.style.height=this.thumbHeight+"px",this.scrollTop>this.pageHeight-this.viewHeight&&(this.scrollTop=this.pageHeight-this.viewHeight,this.scrollTop<0&&(this.scrollTop=0),this._emit("scroll",{data:this.scrollTop})))},e.prototype.setScrollTop=function(r){this.scrollTop=r,r<0&&(r=0),this.thumbTop=r*(this.slideHeight-this.thumbHeight)/(this.pageHeight-this.viewHeight),this.inner.style.top=this.thumbTop+"px"},e}(o);n.prototype.setInnerHeight=n.prototype.setScrollHeight;var i=function(t){D(e,t);function e(r,a){var u=t.call(this,r,"-h")||this;return u.scrollLeft=0,u.scrollWidth=0,u.height=u.HScrollHeight,u.inner.style.height=u.element.style.height=(u.height||12)+"px",u.renderer=a,u}return e.prototype.onMouseDown=function(r,a){if(r==="mousedown"&&!(s.getButton(a)!==0||a.detail===2)){if(a.target===this.inner){var u=this,p=a.clientX,M=function($){p=$.clientX},w=function(){clearInterval(T)},m=a.clientX,d=this.thumbLeft,_=function(){if(p!==void 0){var $=u.scrollLeftFromThumbLeft(d+p-m);$!==u.scrollLeft&&u._emit("scroll",{data:$})}};s.capture(this.inner,M,w);var T=setInterval(_,20);return s.preventDefault(a)}var R=a.clientX-this.element.getBoundingClientRect().left-this.thumbWidth/2;return this._emit("scroll",{data:this.scrollLeftFromThumbLeft(R)}),s.preventDefault(a)}},e.prototype.getHeight=function(){return this.isVisible?this.height:0},e.prototype.scrollLeftFromThumbLeft=function(r){var a=r*(this.pageWidth-this.viewWidth)/(this.slideWidth-this.thumbWidth);return a=a>>0,a<0?a=0:a>this.pageWidth-this.viewWidth&&(a=this.pageWidth-this.viewWidth),a},e.prototype.setWidth=function(r){this.width=Math.max(0,r),this.element.style.width=this.width+"px",this.slideWidth=this.width,this.viewWidth=this.width,this.setScrollWidth(this.pageWidth,!0)},e.prototype.setScrollWidth=function(r,a){this.pageWidth===r&&!a||(this.pageWidth=r,this.thumbWidth=this.slideWidth*this.viewWidth/this.pageWidth,this.thumbWidth>this.slideWidth&&(this.thumbWidth=this.slideWidth),this.thumbWidth<15&&(this.thumbWidth=15),this.inner.style.width=this.thumbWidth+"px",this.scrollLeft>this.pageWidth-this.viewWidth&&(this.scrollLeft=this.pageWidth-this.viewWidth,this.scrollLeft<0&&(this.scrollLeft=0),this._emit("scroll",{data:this.scrollLeft})))},e.prototype.setScrollLeft=function(r){this.scrollLeft=r,r<0&&(r=0),this.thumbLeft=r*(this.slideWidth-this.thumbWidth)/(this.pageWidth-this.viewWidth),this.inner.style.left=this.thumbLeft+"px"},e}(o);i.prototype.setInnerWidth=i.prototype.setScrollWidth,I.ScrollBar=n,I.ScrollBarV=n,I.ScrollBarH=i,I.VScrollBar=n,I.HScrollBar=i}),ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],function(g,I,z){var D=g("./lib/event"),S=function(){function A(s,h){this.onRender=s,this.pending=!1,this.changes=0,this.$recursionLimit=2,this.window=h||window;var o=this;this._flush=function(n){o.pending=!1;var i=o.changes;if(i&&(D.blockIdle(100),o.changes=0,o.onRender(i)),o.changes){if(o.$recursionLimit--<0)return;o.schedule()}else o.$recursionLimit=2}}return A.prototype.schedule=function(s){this.changes=this.changes|s,this.changes&&!this.pending&&(D.nextFrame(this._flush),this.pending=!0)},A.prototype.clear=function(s){var h=this.changes;return this.changes=0,h},A}();I.RenderLoop=S}),ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/lib/useragent","ace/lib/event_emitter"],function(g,I,z){var D=g("../lib/oop"),S=g("../lib/dom"),A=g("../lib/lang"),s=g("../lib/event"),h=g("../lib/useragent"),o=g("../lib/event_emitter").EventEmitter,n=512,i=typeof ResizeObserver=="function",t=200,e=function(){function r(a){this.el=S.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=S.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=S.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),a.appendChild(this.el),this.$measureNode.textContent=A.stringRepeat("X",n),this.$characterSize={width:0,height:0},i?this.$addObserver():this.checkForSizeChanges()}return r.prototype.$setMeasureNodeStyles=function(a,u){a.width=a.height="auto",a.left=a.top="0px",a.visibility="hidden",a.position="absolute",a.whiteSpace="pre",h.isIE<8?a["font-family"]="inherit":a.font="inherit",a.overflow=u?"hidden":"visible"},r.prototype.checkForSizeChanges=function(a){if(a===void 0&&(a=this.$measureSizes()),a&&(this.$characterSize.width!==a.width||this.$characterSize.height!==a.height)){this.$measureNode.style.fontWeight="bold";var u=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=a,this.charSizes=Object.create(null),this.allowBoldFonts=u&&u.width===a.width&&u.height===a.height,this._emit("changeCharacterSize",{data:a})}},r.prototype.$addObserver=function(){var a=this;this.$observer=new window.ResizeObserver(function(u){a.checkForSizeChanges()}),this.$observer.observe(this.$measureNode)},r.prototype.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer||this.$observer)return this.$pollSizeChangesTimer;var a=this;return this.$pollSizeChangesTimer=s.onIdle(function u(){a.checkForSizeChanges(),s.onIdle(u,500)},500)},r.prototype.setPolling=function(a){a?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},r.prototype.$measureSizes=function(a){var u={height:(a||this.$measureNode).clientHeight,width:(a||this.$measureNode).clientWidth/n};return u.width===0||u.height===0?null:u},r.prototype.$measureCharWidth=function(a){this.$main.textContent=A.stringRepeat(a,n);var u=this.$main.getBoundingClientRect();return u.width/n},r.prototype.getCharacterWidth=function(a){var u=this.charSizes[a];return u===void 0&&(u=this.charSizes[a]=this.$measureCharWidth(a)/this.$characterSize.width),u},r.prototype.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$observer&&this.$observer.disconnect(),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},r.prototype.$getZoom=function(a){return!a||!a.parentElement?1:(Number(window.getComputedStyle(a).zoom)||1)*this.$getZoom(a.parentElement)},r.prototype.$initTransformMeasureNodes=function(){var a=function(u,p){return["div",{style:"position: absolute;top:"+u+"px;left:"+p+"px;"}]};this.els=S.buildDom([a(0,0),a(t,0),a(0,t),a(t,t)],this.el)},r.prototype.transformCoordinates=function(a,u){if(a){var p=this.$getZoom(this.el);a=d(1/p,a)}function M(K,V,Y){var re=K[1]*V[0]-K[0]*V[1];return[(-V[1]*Y[0]+V[0]*Y[1])/re,(+K[1]*Y[0]-K[0]*Y[1])/re]}function w(K,V){return[K[0]-V[0],K[1]-V[1]]}function m(K,V){return[K[0]+V[0],K[1]+V[1]]}function d(K,V){return[K*V[0],K*V[1]]}this.els||this.$initTransformMeasureNodes();function _(K){var V=K.getBoundingClientRect();return[V.left,V.top]}var T=_(this.els[0]),R=_(this.els[1]),$=_(this.els[2]),k=_(this.els[3]),v=M(w(k,R),w(k,$),w(m(R,$),m(k,T))),b=d(1+v[0],w(R,T)),l=d(1+v[1],w($,T));if(u){var C=u,O=v[0]*C[0]/t+v[1]*C[1]/t+1,N=m(d(C[0],b),d(C[1],l));return m(d(1/O/t,N),T)}var G=w(a,T),W=M(w(b,d(v[0],G)),w(l,d(v[1],G)),G);return d(t,W)},r}();e.prototype.$characterSize={width:0,height:0},D.implement(e.prototype,o),I.FontMetrics=e}),ace.define("ace/css/editor-css",["require","exports","module"],function(g,I,z){z.exports=`
.ace_br1 {border-top-left-radius    : 3px;}
.ace_br2 {border-top-right-radius   : 3px;}
.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}
.ace_br4 {border-bottom-right-radius: 3px;}
.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}
.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}
.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}
.ace_br8 {border-bottom-left-radius : 3px;}
.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}
.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}
.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}
.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}
.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}


.ace_editor {
    position: relative;
    overflow: hidden;
    padding: 0;
    font: 12px/normal 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'Source Code Pro', 'source-code-pro', monospace;
    direction: ltr;
    text-align: left;
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
    forced-color-adjust: none;
}

.ace_scroller {
    position: absolute;
    overflow: hidden;
    top: 0;
    bottom: 0;
    background-color: inherit;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    cursor: text;
}

.ace_content {
    position: absolute;
    box-sizing: border-box;
    min-width: 100%;
    contain: style size layout;
    font-variant-ligatures: no-common-ligatures;
}

.ace_keyboard-focus:focus {
    box-shadow: inset 0 0 0 2px #5E9ED6;
    outline: none;
}

.ace_dragging .ace_scroller:before{
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    content: '';
    background: rgba(250, 250, 250, 0.01);
    z-index: 1000;
}
.ace_dragging.ace_dark .ace_scroller:before{
    background: rgba(0, 0, 0, 0.01);
}

.ace_gutter {
    position: absolute;
    overflow : hidden;
    width: auto;
    top: 0;
    bottom: 0;
    left: 0;
    cursor: default;
    z-index: 4;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    contain: style size layout;
}

.ace_gutter-active-line {
    position: absolute;
    left: 0;
    right: 0;
}

.ace_scroller.ace_scroll-left:after {
    content: "";
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;
    pointer-events: none;
}

.ace_gutter-cell, .ace_gutter-cell_svg-icons {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    padding-left: 19px;
    padding-right: 6px;
    background-repeat: no-repeat;
}

.ace_gutter-cell_svg-icons .ace_gutter_annotation {
    margin-left: -14px;
    float: left;
}

.ace_gutter-cell .ace_gutter_annotation {
    margin-left: -19px;
    float: left;
}

.ace_gutter-cell.ace_error, .ace_icon.ace_error, .ace_icon.ace_error_fold, .ace_gutter-cell.ace_security, .ace_icon.ace_security, .ace_icon.ace_security_fold {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_gutter-cell.ace_warning, .ace_icon.ace_warning, .ace_icon.ace_warning_fold {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_gutter-cell.ace_info, .ace_icon.ace_info, .ace_gutter-cell.ace_hint, .ace_icon.ace_hint {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");
    background-repeat: no-repeat;
    background-position: 2px center;
}

.ace_dark .ace_gutter-cell.ace_info, .ace_dark .ace_icon.ace_info, .ace_dark .ace_gutter-cell.ace_hint, .ace_dark .ace_icon.ace_hint {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");
}

.ace_icon_svg.ace_error {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJyZWQiIHNoYXBlLXJlbmRlcmluZz0iZ2VvbWV0cmljUHJlY2lzaW9uIj4KPGNpcmNsZSBmaWxsPSJub25lIiBjeD0iOCIgY3k9IjgiIHI9IjciIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPGxpbmUgeDE9IjExIiB5MT0iNSIgeDI9IjUiIHkyPSIxMSIvPgo8bGluZSB4MT0iMTEiIHkxPSIxMSIgeDI9IjUiIHkyPSI1Ii8+CjwvZz4KPC9zdmc+");
    background-color: crimson;
}
.ace_icon_svg.ace_security {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICA8ZyBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZT0iZGFya29yYW5nZSIgZmlsbD0ibm9uZSIgc2hhcGUtcmVuZGVyaW5nPSJnZW9tZXRyaWNQcmVjaXNpb24iPgogICAgICAgIDxwYXRoIGNsYXNzPSJzdHJva2UtbGluZWpvaW4tcm91bmQiIGQ9Ik04IDE0LjgzMDdDOCAxNC44MzA3IDIgMTIuOTA0NyAyIDguMDg5OTJWMy4yNjU0OEM1LjMxIDMuMjY1NDggNy45ODk5OSAxLjM0OTE4IDcuOTg5OTkgMS4zNDkxOEM3Ljk4OTk5IDEuMzQ5MTggMTAuNjkgMy4yNjU0OCAxNCAzLjI2NTQ4VjguMDg5OTJDMTQgMTIuOTA0NyA4IDE0LjgzMDcgOCAxNC44MzA3WiIvPgogICAgICAgIDxwYXRoIGQ9Ik0yIDguMDg5OTJWMy4yNjU0OEM1LjMxIDMuMjY1NDggNy45ODk5OSAxLjM0OTE4IDcuOTg5OTkgMS4zNDkxOCIvPgogICAgICAgIDxwYXRoIGQ9Ik0xMy45OSA4LjA4OTkyVjMuMjY1NDhDMTAuNjggMy4yNjU0OCA4IDEuMzQ5MTggOCAxLjM0OTE4Ii8+CiAgICAgICAgPHBhdGggY2xhc3M9InN0cm9rZS1saW5lam9pbi1yb3VuZCIgZD0iTTggNFY5Ii8+CiAgICAgICAgPHBhdGggY2xhc3M9InN0cm9rZS1saW5lam9pbi1yb3VuZCIgZD0iTTggMTBWMTIiLz4KICAgIDwvZz4KPC9zdmc+");
    background-color: crimson;
}
.ace_icon_svg.ace_warning {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJkYXJrb3JhbmdlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+Cjxwb2x5Z29uIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGZpbGw9Im5vbmUiIHBvaW50cz0iOCAxIDE1IDE1IDEgMTUgOCAxIi8+CjxyZWN0IHg9IjgiIHk9IjEyIiB3aWR0aD0iMC4wMSIgaGVpZ2h0PSIwLjAxIi8+CjxsaW5lIHgxPSI4IiB5MT0iNiIgeDI9IjgiIHkyPSIxMCIvPgo8L2c+Cjwvc3ZnPg==");
    background-color: darkorange;
}
.ace_icon_svg.ace_info {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiI+CjxnIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlPSJibHVlIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+CjxjaXJjbGUgZmlsbD0ibm9uZSIgY3g9IjgiIGN5PSI4IiByPSI3IiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjxwb2x5bGluZSBwb2ludHM9IjggMTEgOCA4Ii8+Cjxwb2x5bGluZSBwb2ludHM9IjkgOCA2IDgiLz4KPGxpbmUgeDE9IjEwIiB5MT0iMTEiIHgyPSI2IiB5Mj0iMTEiLz4KPHJlY3QgeD0iOCIgeT0iNSIgd2lkdGg9IjAuMDEiIGhlaWdodD0iMC4wMSIvPgo8L2c+Cjwvc3ZnPg==");
    background-color: royalblue;
}
.ace_icon_svg.ace_hint {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICA8ZyBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZT0ic2lsdmVyIiBmaWxsPSJub25lIiBzaGFwZS1yZW5kZXJpbmc9Imdlb21ldHJpY1ByZWNpc2lvbiI+CiAgICAgICAgPHBhdGggY2xhc3M9InN0cm9rZS1saW5lam9pbi1yb3VuZCIgZD0iTTYgMTRIMTAiLz4KICAgICAgICA8cGF0aCBkPSJNOCAxMUg5QzkgOS40NzAwMiAxMiA4LjU0MDAyIDEyIDUuNzYwMDJDMTIuMDIgNC40MDAwMiAxMS4zOSAzLjM2MDAyIDEwLjQzIDIuNjcwMDJDOSAxLjY0MDAyIDcuMDAwMDEgMS42NDAwMiA1LjU3MDAxIDIuNjcwMDJDNC42MTAwMSAzLjM2MDAyIDMuOTggNC40MDAwMiA0IDUuNzYwMDJDNCA4LjU0MDAyIDcuMDAwMDEgOS40NzAwMiA3LjAwMDAxIDExSDhaIi8+CiAgICA8L2c+Cjwvc3ZnPg==");
    background-color: silver;
}

.ace_icon_svg.ace_error_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSI+CiAgPHBhdGggZD0ibSAxOC45Mjk4NTEsNy44Mjk4MDc2IGMgMC4xNDYzNTMsNi4zMzc0NjA0IC02LjMyMzE0Nyw3Ljc3Nzg0NDQgLTcuNDc3OTEyLDcuNzc3ODQ0NCAtMi4xMDcyNzI2LC0wLjEyODc1IDUuMTE3Njc4LDAuMzU2MjQ5IDUuMDUxNjk4LC03Ljg3MDA2MTggLTAuNjA0NjcyLC04LjAwMzk3MzQ5IC03LjA3NzI3MDYsLTcuNTYzMTE4OSAtNC44NTczLC03LjQzMDM5NTU2IDEuNjA2LC0wLjExNTE0MjI1IDYuODk3NDg1LDEuMjYyNTQ1OTYgNy4yODM1MTQsNy41MjI2MTI5NiB6IiBmaWxsPSJjcmltc29uIiBzdHJva2Utd2lkdGg9IjIiLz4KICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0ibSA4LjExNDc1NjIsMi4wNTI5ODI4IGMgMy4zNDkxNjk4LDAgNi4wNjQxMzI4LDIuNjc2ODYyNyA2LjA2NDEzMjgsNS45Nzg5NTMgMCwzLjMwMjExMjIgLTIuNzE0OTYzLDUuOTc4OTIwMiAtNi4wNjQxMzI4LDUuOTc4OTIwMiAtMy4zNDkxNDczLDAgLTYuMDY0MTc3MiwtMi42NzY4MDggLTYuMDY0MTc3MiwtNS45Nzg5MjAyIDAuMDA1MzksLTMuMjk5ODg2MSAyLjcxNzI2NTYsLTUuOTczNjQwOCA2LjA2NDE3NzIsLTUuOTc4OTUzIHogbSAwLC0xLjczNTgyNzE5IGMgLTQuMzIxNDgzNiwwIC03LjgyNDc0MDM4LDMuNDU0MDE4NDkgLTcuODI0NzQwMzgsNy43MTQ3ODAxOSAwLDQuMjYwNzI4MiAzLjUwMzI1Njc4LDcuNzE0NzQ1MiA3LjgyNDc0MDM4LDcuNzE0NzQ1MiA0LjMyMTQ0OTgsMCA3LjgyNDY5OTgsLTMuNDU0MDE3IDcuODI0Njk5OCwtNy43MTQ3NDUyIDAsLTIuMDQ2MDkxNCAtMC44MjQzOTIsLTQuMDA4MzY3MiAtMi4yOTE3NTYsLTUuNDU1MTc0NiBDIDEyLjE4MDIyNSwxLjEyOTk2NDggMTAuMTkwMDEzLDAuMzE3MTU1NjEgOC4xMTQ3NTYyLDAuMzE3MTU1NjEgWiBNIDYuOTM3NDU2Myw4LjI0MDU5ODUgNC42NzE4Njg1LDEwLjQ4NTg1MiA2LjAwODY4MTQsMTEuODc2NzI4IDguMzE3MDAzNSw5LjYwMDc5MTEgMTAuNjI1MzM3LDExLjg3NjcyOCAxMS45NjIxMzgsMTAuNDg1ODUyIDkuNjk2NTUwOCw4LjI0MDU5ODUgMTEuOTYyMTM4LDYuMDA2ODA2NiAxMC41NzMyNDYsNC42Mzc0MzM1IDguMzE3MDAzNSw2Ljg3MzQyOTcgNi4wNjA3NjA3LDQuNjM3NDMzNSA0LjY3MTg2ODUsNi4wMDY4MDY2IFoiIGZpbGw9ImNyaW1zb24iIHN0cm9rZS13aWR0aD0iMiIvPgo8L3N2Zz4=");
    background-color: crimson;
}
.ace_icon_svg.ace_security_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMTcgMTQiIGZpbGw9Im5vbmUiPgogICAgPHBhdGggZD0iTTEwLjAwMDEgMTMuNjk5MkMxMC4wMDAxIDEzLjY5OTIgMTEuOTI0MSAxMy40NzYzIDEzIDEyLjY5OTJDMTQuNDEzOSAxMS42NzgxIDE2IDEwLjUgMTYuMTI1MSA2LjgxMTI2VjIuNTg5ODdDMTYuMTI1MSAyLjU0NzY4IDE2LjEyMjEgMi41MDYxOSAxNi4xMTY0IDIuNDY1NTlWMS43MTQ4NUgxNS4yNDE0TDE1LjIzMDcgMS43MTQ4NEwxNC42MjUxIDEuNjk5MjJWNi44MTEyM0MxNC42MjUxIDguNTEwNjEgMTQuNjI1MSA5LjQ2NDYxIDEyLjc4MjQgMTEuNzIxQzEyLjE1ODYgMTIuNDg0OCAxMC4wMDAxIDEzLjY5OTIgMTAuMDAwMSAxMy42OTkyWiIgZmlsbD0iY3JpbXNvbiIgc3Ryb2tlLXdpZHRoPSIyIi8+CiAgICA8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTcuMzM2MDkgMC4zNjc0NzVDNy4wMzIxNCAwLjE1MjY1MiA2LjYyNTQ4IDAuMTUzNjE0IDYuMzIyNTMgMC4zNjk5OTdMNi4zMDg2OSAwLjM3OTU1NEM2LjI5NTUzIDAuMzg4NTg4IDYuMjczODggMC40MDMyNjYgNi4yNDQxNyAwLjQyMjc4OUM2LjE4NDcxIDAuNDYxODYgNi4wOTMyMSAwLjUyMDE3MSA1Ljk3MzEzIDAuNTkxMzczQzUuNzMyNTEgMC43MzQwNTkgNS4zNzk5IDAuOTI2ODY0IDQuOTQyNzkgMS4xMjAwOUM0LjA2MTQ0IDEuNTA5NyAyLjg3NTQxIDEuODgzNzcgMS41ODk4NCAxLjg4Mzc3SDAuNzE0ODQ0VjIuNzU4NzdWNi45ODAxNUMwLjcxNDg0NCA5LjQ5Mzc0IDIuMjg4NjYgMTEuMTk3MyAzLjcwMjU0IDEyLjIxODVDNC40MTg0NSAxMi43MzU1IDUuMTI4NzQgMTMuMTA1MyA1LjY1NzMzIDEzLjM0NTdDNS45MjI4NCAxMy40NjY0IDYuMTQ1NjYgMTMuNTU1OSA2LjMwNDY1IDEzLjYxNjFDNi4zODQyMyAxMy42NDYyIDYuNDQ4MDUgMTMuNjY5IDYuNDkzNDkgMTMuNjg0OEM2LjUxNjIyIDEzLjY5MjcgNi41MzQzOCAxMy42OTg5IDYuNTQ3NjQgMTMuNzAzM0w2LjU2MzgyIDEzLjcwODdMNi41NjkwOCAxMy43MTA0TDYuNTcwOTkgMTMuNzExTDYuODM5ODQgMTMuNzUzM0w2LjU3MjQyIDEzLjcxMTVDNi43NDYzMyAxMy43NjczIDYuOTMzMzUgMTMuNzY3MyA3LjEwNzI3IDEzLjcxMTVMNy4xMDg3IDEzLjcxMUw3LjExMDYxIDEzLjcxMDRMNy4xMTU4NyAxMy43MDg3TDcuMTMyMDUgMTMuNzAzM0M3LjE0NTMxIDEzLjY5ODkgNy4xNjM0NiAxMy42OTI3IDcuMTg2MTkgMTMuNjg0OEM3LjIzMTY0IDEzLjY2OSA3LjI5NTQ2IDEzLjY0NjIgNy4zNzUwMyAxMy42MTYxQzcuNTM0MDMgMTMuNTU1OSA3Ljc1Njg1IDEzLjQ2NjQgOC4wMjIzNiAxMy4zNDU3QzguNTUwOTUgMTMuMTA1MyA5LjI2MTIzIDEyLjczNTUgOS45NzcxNSAxMi4yMTg1QzExLjM5MSAxMS4xOTczIDEyLjk2NDggOS40OTM3NyAxMi45NjQ4IDYuOTgwMThWMi43NTg4QzEyLjk2NDggMi43MTY2IDEyLjk2MTkgMi42NzUxMSAxMi45NTYxIDIuNjM0NTFWMS44ODM3N0gxMi4wODExQzEyLjA3NzUgMS44ODM3NyAxMi4wNzQgMS44ODM3NyAxMi4wNzA0IDEuODgzNzdDMTAuNzk3OSAxLjg4MDA0IDkuNjE5NjIgMS41MTEwMiA4LjczODk0IDEuMTI0ODZDOC43MzUzNCAxLjEyMzI3IDguNzMxNzQgMS4xMjE2OCA4LjcyODE0IDEuMTIwMDlDOC4yOTEwMyAwLjkyNjg2NCA3LjkzODQyIDAuNzM0MDU5IDcuNjk3NzkgMC41OTEzNzNDNy41Nzc3MiAwLjUyMDE3MSA3LjQ4NjIyIDAuNDYxODYgNy40MjY3NiAwLjQyMjc4OUM3LjM5NzA1IDAuNDAzMjY2IDcuMzc1MzkgMC4zODg1ODggNy4zNjIyNCAwLjM3OTU1NEw3LjM0ODk2IDAuMzcwMzVDNy4zNDg5NiAwLjM3MDM1IDcuMzQ4NDcgMC4zNzAwMiA3LjM0NTYzIDAuMzc0MDU0TDcuMzM3NzkgMC4zNjg2NTlMNy4zMzYwOSAwLjM2NzQ3NVpNOC4wMzQ3MSAyLjcyNjkxQzguODYwNCAzLjA5MDYzIDkuOTYwNjYgMy40NjMwOSAxMS4yMDYxIDMuNTg5MDdWNi45ODAxNUgxMS4yMTQ4QzExLjIxNDggOC42Nzk1MyAxMC4xNjM3IDkuOTI1MDcgOC45NTI1NCAxMC43OTk4QzguMzU1OTUgMTEuMjMwNiA3Ljc1Mzc0IDExLjU0NTQgNy4yOTc5NiAxMS43NTI3QzcuMTE2NzEgMTEuODM1MSA2Ljk2MDYyIDExLjg5OTYgNi44Mzk4NCAxMS45NDY5QzYuNzE5MDYgMTEuODk5NiA2LjU2Mjk3IDExLjgzNTEgNi4zODE3MyAxMS43NTI3QzUuOTI1OTUgMTEuNTQ1NCA1LjMyMzczIDExLjIzMDYgNC43MjcxNSAxMC43OTk4QzMuNTE2MDMgOS45MjUwNyAyLjQ2NDg0IDguNjc5NTUgMi40NjQ4NCA2Ljk4MDE4VjMuNTg5MDlDMy43MTczOCAzLjQ2MjM5IDQuODIzMDggMy4wODYzOSA1LjY1MDMzIDIuNzIwNzFDNi4xNDIyOCAyLjUwMzI0IDYuNTQ0ODUgMi4yODUzNyA2LjgzMjU0IDIuMTE2MjRDNy4xMjE4MSAyLjI4NTM1IDcuNTI3IDIuNTAzNTIgOC4wMjE5NiAyLjcyMTMxQzguMDI2MiAyLjcyMzE3IDguMDMwNDUgMi43MjUwNCA4LjAzNDcxIDIuNzI2OTFaTTUuOTY0ODQgMy40MDE0N1Y3Ljc3NjQ3SDcuNzE0ODRWMy40MDE0N0g1Ljk2NDg0Wk01Ljk2NDg0IDEwLjQwMTVWOC42NTE0N0g3LjcxNDg0VjEwLjQwMTVINS45NjQ4NFoiIGZpbGw9ImNyaW1zb24iIHN0cm9rZS13aWR0aD0iMiIvPgo8L3N2Zz4=");
    background-color: crimson;
}
.ace_icon_svg.ace_warning_fold {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAyMCAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNC43NzY5IDE0LjczMzdMOC42NTE5MiAyLjQ4MzY5QzguMzI5NDYgMS44Mzg3NyA3LjQwOTEzIDEuODM4NzcgNy4wODY2NyAyLjQ4MzY5TDAuOTYxNjY5IDE0LjczMzdDMC42NzA3NzUgMTUuMzE1NSAxLjA5MzgzIDE2IDEuNzQ0MjkgMTZIMTMuOTk0M0MxNC42NDQ4IDE2IDE1LjA2NzggMTUuMzE1NSAxNC43NzY5IDE0LjczMzdaTTMuMTYwMDcgMTQuMjVMNy44NjkyOSA0LjgzMTU2TDEyLjU3ODUgMTQuMjVIMy4xNjAwN1pNOC43NDQyOSAxMS42MjVWMTMuMzc1SDYuOTk0MjlWMTEuNjI1SDguNzQ0MjlaTTYuOTk0MjkgMTAuNzVWNy4yNUg4Ljc0NDI5VjEwLjc1SDYuOTk0MjlaIiBmaWxsPSIjRUM3MjExIi8+CjxwYXRoIGQ9Ik0xMS4xOTkxIDIuOTUyMzhDMTAuODgwOSAyLjMxNDY3IDEwLjM1MzcgMS44MDUyNiA5LjcwNTUgMS41MDlMMTEuMDQxIDEuMDY5NzhDMTEuNjg4MyAwLjk0OTgxNCAxMi4zMzcgMS4yNzI2MyAxMi42MzE3IDEuODYxNDFMMTcuNjEzNiAxMS44MTYxQzE4LjM1MjcgMTMuMjkyOSAxNy41OTM4IDE1LjA4MDQgMTYuMDE4IDE1LjU3NDVDMTYuNDA0NCAxNC40NTA3IDE2LjMyMzEgMTMuMjE4OCAxNS43OTI0IDEyLjE1NTVMMTEuMTk5MSAyLjk1MjM4WiIgZmlsbD0iI0VDNzIxMSIvPgo8L3N2Zz4=");
    background-color: darkorange;
}

.ace_scrollbar {
    contain: strict;
    position: absolute;
    right: 0;
    bottom: 0;
    z-index: 6;
}

.ace_scrollbar-inner {
    position: absolute;
    cursor: text;
    left: 0;
    top: 0;
}

.ace_scrollbar-v{
    overflow-x: hidden;
    overflow-y: scroll;
    top: 0;
}

.ace_scrollbar-h {
    overflow-x: scroll;
    overflow-y: hidden;
    left: 0;
}

.ace_print-margin {
    position: absolute;
    height: 100%;
}

.ace_text-input {
    position: absolute;
    z-index: 0;
    width: 0.5em;
    height: 1em;
    opacity: 0;
    background: transparent;
    -moz-appearance: none;
    appearance: none;
    border: none;
    resize: none;
    outline: none;
    overflow: hidden;
    font: inherit;
    padding: 0 1px;
    margin: 0 -1px;
    contain: strict;
    -ms-user-select: text;
    -moz-user-select: text;
    -webkit-user-select: text;
    user-select: text;
    /*with \`pre-line\` chrome inserts &nbsp; instead of space*/
    white-space: pre!important;
}
.ace_text-input.ace_composition {
    background: transparent;
    color: inherit;
    z-index: 1000;
    opacity: 1;
}
.ace_composition_placeholder { color: transparent }
.ace_composition_marker { 
    border-bottom: 1px solid;
    position: absolute;
    border-radius: 0;
    margin-top: 1px;
}

[ace_nocontext=true] {
    transform: none!important;
    filter: none!important;
    clip-path: none!important;
    mask : none!important;
    contain: none!important;
    perspective: none!important;
    mix-blend-mode: initial!important;
    z-index: auto;
}

.ace_layer {
    z-index: 1;
    position: absolute;
    overflow: hidden;
    /* workaround for chrome bug https://github.com/ajaxorg/ace/issues/2312*/
    word-wrap: normal;
    white-space: pre;
    height: 100%;
    width: 100%;
    box-sizing: border-box;
    /* setting pointer-events: auto; on node under the mouse, which changes
        during scroll, will break mouse wheel scrolling in Safari */
    pointer-events: none;
}

.ace_gutter-layer {
    position: relative;
    width: auto;
    text-align: right;
    pointer-events: auto;
    height: 1000000px;
    contain: style size layout;
}

.ace_text-layer {
    font: inherit !important;
    position: absolute;
    height: 1000000px;
    width: 1000000px;
    contain: style size layout;
}

.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {
    contain: style size layout;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
}

.ace_hidpi .ace_text-layer,
.ace_hidpi .ace_gutter-layer,
.ace_hidpi .ace_content,
.ace_hidpi .ace_gutter {
    contain: strict;
}
.ace_hidpi .ace_text-layer > .ace_line, 
.ace_hidpi .ace_text-layer > .ace_line_group {
    contain: strict;
}

.ace_cjk {
    display: inline-block;
    text-align: center;
}

.ace_cursor-layer {
    z-index: 4;
}

.ace_cursor {
    z-index: 4;
    position: absolute;
    box-sizing: border-box;
    border-left: 2px solid;
    /* workaround for smooth cursor repaintng whole screen in chrome */
    transform: translatez(0);
}

.ace_multiselect .ace_cursor {
    border-left-width: 1px;
}

.ace_slim-cursors .ace_cursor {
    border-left-width: 1px;
}

.ace_overwrite-cursors .ace_cursor {
    border-left-width: 0;
    border-bottom: 1px solid;
}

.ace_hidden-cursors .ace_cursor {
    opacity: 0.2;
}

.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {
    opacity: 0;
}

.ace_smooth-blinking .ace_cursor {
    transition: opacity 0.18s;
}

.ace_animate-blinking .ace_cursor {
    animation-duration: 1000ms;
    animation-timing-function: step-end;
    animation-name: blink-ace-animate;
    animation-iteration-count: infinite;
}

.ace_animate-blinking.ace_smooth-blinking .ace_cursor {
    animation-duration: 1000ms;
    animation-timing-function: ease-in-out;
    animation-name: blink-ace-animate-smooth;
}
    
@keyframes blink-ace-animate {
    from, to { opacity: 1; }
    60% { opacity: 0; }
}

@keyframes blink-ace-animate-smooth {
    from, to { opacity: 1; }
    45% { opacity: 1; }
    60% { opacity: 0; }
    85% { opacity: 0; }
}

.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {
    position: absolute;
    z-index: 3;
}

.ace_marker-layer .ace_selection {
    position: absolute;
    z-index: 5;
}

.ace_marker-layer .ace_bracket {
    position: absolute;
    z-index: 6;
}

.ace_marker-layer .ace_error_bracket {
    position: absolute;
    border-bottom: 1px solid #DE5555;
    border-radius: 0;
}

.ace_marker-layer .ace_active-line {
    position: absolute;
    z-index: 2;
}

.ace_marker-layer .ace_selected-word {
    position: absolute;
    z-index: 4;
    box-sizing: border-box;
}

.ace_line .ace_fold {
    box-sizing: border-box;

    display: inline-block;
    height: 11px;
    margin-top: -2px;
    vertical-align: middle;

    background-image:
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");
    background-repeat: no-repeat, repeat-x;
    background-position: center center, top left;
    color: transparent;

    border: 1px solid black;
    border-radius: 2px;

    cursor: pointer;
    pointer-events: auto;
}

.ace_dark .ace_fold {
}

.ace_fold:hover{
    background-image:
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),
        url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");
}

.ace_tooltip {
    background-color: #f5f5f5;
    border: 1px solid gray;
    border-radius: 1px;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
    color: black;
    max-width: 100%;
    padding: 3px 4px;
    position: fixed;
    z-index: 999999;
    box-sizing: border-box;
    cursor: default;
    white-space: pre-wrap;
    word-wrap: break-word;
    line-height: normal;
    font-style: normal;
    font-weight: normal;
    letter-spacing: normal;
    pointer-events: none;
    overflow: auto;
    max-width: min(60em, 66vw);
    overscroll-behavior: contain;
}
.ace_tooltip pre {
    white-space: pre-wrap;
}

.ace_tooltip.ace_dark {
    background-color: #636363;
    color: #fff;
}

.ace_tooltip:focus {
    outline: 1px solid #5E9ED6;
}

.ace_icon {
    display: inline-block;
    width: 18px;
    vertical-align: top;
}

.ace_icon_svg {
    display: inline-block;
    width: 12px;
    vertical-align: top;
    -webkit-mask-repeat: no-repeat;
    -webkit-mask-size: 12px;
    -webkit-mask-position: center;
}

.ace_folding-enabled > .ace_gutter-cell, .ace_folding-enabled > .ace_gutter-cell_svg-icons {
    padding-right: 13px;
}

.ace_fold-widget {
    box-sizing: border-box;

    margin: 0 -12px 0 1px;
    display: none;
    width: 11px;
    vertical-align: top;

    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");
    background-repeat: no-repeat;
    background-position: center;

    border-radius: 3px;
    
    border: 1px solid transparent;
    cursor: pointer;
}

.ace_folding-enabled .ace_fold-widget {
    display: inline-block;   
}

.ace_fold-widget.ace_end {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");
}

.ace_fold-widget.ace_closed {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");
}

.ace_fold-widget:hover {
    border: 1px solid rgba(0, 0, 0, 0.3);
    background-color: rgba(255, 255, 255, 0.2);
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);
}

.ace_fold-widget:active {
    border: 1px solid rgba(0, 0, 0, 0.4);
    background-color: rgba(0, 0, 0, 0.05);
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);
}
/**
 * Dark version for fold widgets
 */
.ace_dark .ace_fold-widget {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");
}
.ace_dark .ace_fold-widget.ace_end {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");
}
.ace_dark .ace_fold-widget.ace_closed {
    background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");
}
.ace_dark .ace_fold-widget:hover {
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);
    background-color: rgba(255, 255, 255, 0.1);
}
.ace_dark .ace_fold-widget:active {
    box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);
}

.ace_inline_button {
    border: 1px solid lightgray;
    display: inline-block;
    margin: -1px 8px;
    padding: 0 5px;
    pointer-events: auto;
    cursor: pointer;
}
.ace_inline_button:hover {
    border-color: gray;
    background: rgba(200,200,200,0.2);
    display: inline-block;
    pointer-events: auto;
}

.ace_fold-widget.ace_invalid {
    background-color: #FFB4B4;
    border-color: #DE5555;
}

.ace_fade-fold-widgets .ace_fold-widget {
    transition: opacity 0.4s ease 0.05s;
    opacity: 0;
}

.ace_fade-fold-widgets:hover .ace_fold-widget {
    transition: opacity 0.05s ease 0.05s;
    opacity:1;
}

.ace_underline {
    text-decoration: underline;
}

.ace_bold {
    font-weight: bold;
}

.ace_nobold .ace_bold {
    font-weight: normal;
}

.ace_italic {
    font-style: italic;
}


.ace_error-marker {
    background-color: rgba(255, 0, 0,0.2);
    position: absolute;
    z-index: 9;
}

.ace_highlight-marker {
    background-color: rgba(255, 255, 0,0.2);
    position: absolute;
    z-index: 8;
}

.ace_mobile-menu {
    position: absolute;
    line-height: 1.5;
    border-radius: 4px;
    -ms-user-select: none;
    -moz-user-select: none;
    -webkit-user-select: none;
    user-select: none;
    background: white;
    box-shadow: 1px 3px 2px grey;
    border: 1px solid #dcdcdc;
    color: black;
}
.ace_dark > .ace_mobile-menu {
    background: #333;
    color: #ccc;
    box-shadow: 1px 3px 2px grey;
    border: 1px solid #444;

}
.ace_mobile-button {
    padding: 2px;
    cursor: pointer;
    overflow: hidden;
}
.ace_mobile-button:hover {
    background-color: #eee;
    opacity:1;
}
.ace_mobile-button:active {
    background-color: #ddd;
}

.ace_placeholder {
    position: relative;
    font-family: arial;
    transform: scale(0.9);
    transform-origin: left;
    white-space: pre;
    opacity: 0.7;
    margin: 0 10px;
    z-index: 1;
}

.ace_ghost_text {
    opacity: 0.5;
    font-style: italic;
}

.ace_ghost_text_container > div {
    white-space: pre;
}

.ghost_text_line_wrapped::after {
    content: "";
    position: absolute;
}

.ace_lineWidgetContainer.ace_ghost_text {
    margin: 0px 4px
}

.ace_screenreader-only {
    position:absolute;
    left:-10000px;
    top:auto;
    width:1px;
    height:1px;
    overflow:hidden;
}

.ace_hidden_token {
    display: none;
}`}),ace.define("ace/layer/decorators",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event_emitter"],function(g,I,z){var D=g("../lib/dom"),S=g("../lib/oop"),A=g("../lib/event_emitter").EventEmitter,s=function(){function h(o,n){this.canvas=D.createElement("canvas"),this.renderer=n,this.pixelRatio=1,this.maxHeight=n.layerConfig.maxHeight,this.lineHeight=n.layerConfig.lineHeight,this.canvasHeight=o.parent.scrollHeight,this.heightRatio=this.canvasHeight/this.maxHeight,this.canvasWidth=o.width,this.minDecorationHeight=2*this.pixelRatio|0,this.halfMinDecorationHeight=this.minDecorationHeight/2|0,this.canvas.width=this.canvasWidth,this.canvas.height=this.canvasHeight,this.canvas.style.top="0px",this.canvas.style.right="0px",this.canvas.style.zIndex="7px",this.canvas.style.position="absolute",this.colors={},this.colors.dark={error:"rgba(255, 18, 18, 1)",warning:"rgba(18, 136, 18, 1)",info:"rgba(18, 18, 136, 1)"},this.colors.light={error:"rgb(255,51,51)",warning:"rgb(32,133,72)",info:"rgb(35,68,138)"},o.element.appendChild(this.canvas)}return h.prototype.$updateDecorators=function(o){var n=this.renderer.theme.isDark===!0?this.colors.dark:this.colors.light;if(o){this.maxHeight=o.maxHeight,this.lineHeight=o.lineHeight,this.canvasHeight=o.height;var i=(o.lastRow+1)*this.lineHeight;i<this.canvasHeight?this.heightRatio=1:this.heightRatio=this.canvasHeight/this.maxHeight}var t=this.canvas.getContext("2d");function e(k,v){return k.priority<v.priority?-1:k.priority>v.priority?1:0}var r=this.renderer.session.$annotations;if(t.clearRect(0,0,this.canvas.width,this.canvas.height),r){var a={info:1,warning:2,error:3};r.forEach(function(k){k.priority=a[k.type]||null}),r=r.sort(e);for(var u=this.renderer.session.$foldData,p=0;p<r.length;p++){var M=r[p].row,w=this.compensateFoldRows(M,u),m=Math.round((M-w)*this.lineHeight*this.heightRatio),d=Math.round((M-w)*this.lineHeight*this.heightRatio),_=Math.round(((M-w)*this.lineHeight+this.lineHeight)*this.heightRatio),T=_-d;if(T<this.minDecorationHeight){var R=(d+_)/2|0;R<this.halfMinDecorationHeight?R=this.halfMinDecorationHeight:R+this.halfMinDecorationHeight>this.canvasHeight&&(R=this.canvasHeight-this.halfMinDecorationHeight),d=Math.round(R-this.halfMinDecorationHeight),_=Math.round(R+this.halfMinDecorationHeight)}t.fillStyle=n[r[p].type]||null,t.fillRect(0,m,this.canvasWidth,_-d)}}var $=this.renderer.session.selection.getCursor();if($){var w=this.compensateFoldRows($.row,u),m=Math.round(($.row-w)*this.lineHeight*this.heightRatio);t.fillStyle="rgba(0, 0, 0, 0.5)",t.fillRect(0,m,this.canvasWidth,2)}},h.prototype.compensateFoldRows=function(o,n){var i=0;if(n&&n.length>0)for(var t=0;t<n.length;t++)o>n[t].start.row&&o<n[t].end.row?i+=o-n[t].start.row:o>=n[t].end.row&&(i+=n[t].end.row-n[t].start.row);return i},h}();S.implement(s.prototype,A),I.Decorator=s}),ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/config","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/scrollbar_custom","ace/scrollbar_custom","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter","ace/css/editor-css","ace/layer/decorators","ace/lib/useragent","ace/layer/text_util"],function(g,I,z){var D=g("./lib/oop"),S=g("./lib/dom"),A=g("./lib/lang"),s=g("./config"),h=g("./layer/gutter").Gutter,o=g("./layer/marker").Marker,n=g("./layer/text").Text,i=g("./layer/cursor").Cursor,t=g("./scrollbar").HScrollBar,e=g("./scrollbar").VScrollBar,r=g("./scrollbar_custom").HScrollBar,a=g("./scrollbar_custom").VScrollBar,u=g("./renderloop").RenderLoop,p=g("./layer/font_metrics").FontMetrics,M=g("./lib/event_emitter").EventEmitter,w=g("./css/editor-css"),m=g("./layer/decorators").Decorator,d=g("./lib/useragent"),_=g("./layer/text_util").isTextToken;S.importCssString(w,"ace_editor.css",!1);var T=function(){function R($,k){var v=this;this.container=$||S.createElement("div"),S.addCssClass(this.container,"ace_editor"),S.HI_DPI&&S.addCssClass(this.container,"ace_hidpi"),this.setTheme(k),s.get("useStrictCSP")==null&&s.set("useStrictCSP",!1),this.$gutter=S.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden","true"),this.scroller=S.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=S.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new h(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new o(this.content);var b=this.$textLayer=new n(this.content);this.canvas=b.element,this.$markerFront=new o(this.content),this.$cursorLayer=new i(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new e(this.container,this),this.scrollBarH=new t(this.container,this),this.scrollBarV.on("scroll",function(l){v.$scrollAnimation||v.session.setScrollTop(l.data-v.scrollMargin.top)}),this.scrollBarH.on("scroll",function(l){v.$scrollAnimation||v.session.setScrollLeft(l.data-v.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new p(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.on("changeCharacterSize",function(l){v.updateCharacterSize(),v.onResize(!0,v.gutterWidth,v.$size.width,v.$size.height),v._signal("changeCharacterSize",l)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.margin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$keepTextAreaAtCursor=!d.isIOS,this.$loop=new u(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),this.$addResizeObserver(),s.resetOptions(this),s._signal("renderer",this)}return R.prototype.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin(),S.setStyle(this.scroller.style,"line-height",this.lineHeight+"px")},R.prototype.setSession=function($){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=$,$&&this.scrollMargin.top&&$.getScrollTop()<=0&&$.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession($),this.$markerBack.setSession($),this.$markerFront.setSession($),this.$gutterLayer.setSession($),this.$textLayer.setSession($),$&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},R.prototype.updateLines=function($,k,v){if(k===void 0&&(k=1/0),this.$changedLines?(this.$changedLines.firstRow>$&&(this.$changedLines.firstRow=$),this.$changedLines.lastRow<k&&(this.$changedLines.lastRow=k)):this.$changedLines={firstRow:$,lastRow:k},this.$changedLines.lastRow<this.layerConfig.firstRow)if(v)this.$changedLines.lastRow=this.layerConfig.lastRow;else return;this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},R.prototype.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},R.prototype.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},R.prototype.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},R.prototype.updateFull=function($){$?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},R.prototype.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},R.prototype.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},R.prototype.onResize=function($,k,v,b){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=$?1:0;var l=this.container;b||(b=l.clientHeight||l.scrollHeight),!b&&this.$maxLines&&this.lineHeight>1&&(!l.style.height||l.style.height=="0px")&&(l.style.height="1px",b=l.clientHeight||l.scrollHeight),v||(v=l.clientWidth||l.scrollWidth);var C=this.$updateCachedSize($,k,v,b);if(this.$resizeTimer&&this.$resizeTimer.cancel(),!this.$size.scrollerHeight||!v&&!b)return this.resizing=0;$&&(this.$gutterLayer.$padding=null),$?this.$renderChanges(C|this.$changes,!0):this.$loop.schedule(C|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.$customScrollbar&&this.$updateCustomScrollbar(!0)}},R.prototype.$updateCachedSize=function($,k,v,b){b-=this.$extraHeight||0;var l=0,C=this.$size,O={width:C.width,height:C.height,scrollerHeight:C.scrollerHeight,scrollerWidth:C.scrollerWidth};if(b&&($||C.height!=b)&&(C.height=b,l|=this.CHANGE_SIZE,C.scrollerHeight=C.height,this.$horizScroll&&(C.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.setHeight(C.scrollerHeight),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",l=l|this.CHANGE_SCROLL),v&&($||C.width!=v)){l|=this.CHANGE_SIZE,C.width=v,k==null&&(k=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=k,S.setStyle(this.scrollBarH.element.style,"left",k+"px"),S.setStyle(this.scroller.style,"left",k+this.margin.left+"px"),C.scrollerWidth=Math.max(0,v-k-this.scrollBarV.getWidth()-this.margin.h),S.setStyle(this.$gutter.style,"left",this.margin.left+"px");var N=this.scrollBarV.getWidth()+"px";S.setStyle(this.scrollBarH.element.style,"right",N),S.setStyle(this.scroller.style,"right",N),S.setStyle(this.scroller.style,"bottom",this.scrollBarH.getHeight()),this.scrollBarH.setWidth(C.scrollerWidth),(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||$)&&(l|=this.CHANGE_FULL)}return C.$dirty=!v||!b,l&&this._signal("resize",O),l},R.prototype.onGutterResize=function($){var k=this.$showGutter?$:0;k!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,k,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):this.$computeLayerConfig()},R.prototype.adjustWrapLimit=function(){var $=this.$size.scrollerWidth-this.$padding*2,k=Math.floor($/this.characterWidth);return this.session.adjustWrapLimit(k,this.$showPrintMargin&&this.$printMarginColumn)},R.prototype.setAnimatedScroll=function($){this.setOption("animatedScroll",$)},R.prototype.getAnimatedScroll=function(){return this.$animatedScroll},R.prototype.setShowInvisibles=function($){this.setOption("showInvisibles",$),this.session.$bidiHandler.setShowInvisibles($)},R.prototype.getShowInvisibles=function(){return this.getOption("showInvisibles")},R.prototype.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},R.prototype.setDisplayIndentGuides=function($){this.setOption("displayIndentGuides",$)},R.prototype.getHighlightIndentGuides=function(){return this.getOption("highlightIndentGuides")},R.prototype.setHighlightIndentGuides=function($){this.setOption("highlightIndentGuides",$)},R.prototype.setShowPrintMargin=function($){this.setOption("showPrintMargin",$)},R.prototype.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},R.prototype.setPrintMarginColumn=function($){this.setOption("printMarginColumn",$)},R.prototype.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},R.prototype.getShowGutter=function(){return this.getOption("showGutter")},R.prototype.setShowGutter=function($){return this.setOption("showGutter",$)},R.prototype.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},R.prototype.setFadeFoldWidgets=function($){this.setOption("fadeFoldWidgets",$)},R.prototype.setHighlightGutterLine=function($){this.setOption("highlightGutterLine",$)},R.prototype.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},R.prototype.$updatePrintMargin=function(){if(!(!this.$showPrintMargin&&!this.$printMarginEl)){if(!this.$printMarginEl){var $=S.createElement("div");$.className="ace_layer ace_print-margin-layer",this.$printMarginEl=S.createElement("div"),this.$printMarginEl.className="ace_print-margin",$.appendChild(this.$printMarginEl),this.content.insertBefore($,this.content.firstChild)}var k=this.$printMarginEl.style;k.left=Math.round(this.characterWidth*this.$printMarginColumn+this.$padding)+"px",k.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&this.session.$wrap==-1&&this.adjustWrapLimit()}},R.prototype.getContainerElement=function(){return this.container},R.prototype.getMouseEventTarget=function(){return this.scroller},R.prototype.getTextAreaContainer=function(){return this.container},R.prototype.$moveTextAreaToCursor=function(){if(!this.$isMousePressed){var $=this.textarea.style,k=this.$composition;if(!this.$keepTextAreaAtCursor&&!k){S.translate(this.textarea,-100,0);return}var v=this.$cursorLayer.$pixelPos;if(v){k&&k.markerRange&&(v=this.$cursorLayer.getPixelPosition(k.markerRange.start,!0));var b=this.layerConfig,l=v.top,C=v.left;l-=b.offset;var O=k&&k.useTextareaForIME||d.isMobile?this.lineHeight:1;if(l<0||l>b.height-O){S.translate(this.textarea,0,0);return}var N=1,G=this.$size.height-O;if(!k)l+=this.lineHeight;else if(k.useTextareaForIME){var W=this.textarea.value;N=this.characterWidth*this.session.$getStringScreenWidth(W)[0]}else l+=this.lineHeight+2;C-=this.scrollLeft,C>this.$size.scrollerWidth-N&&(C=this.$size.scrollerWidth-N),C+=this.gutterWidth+this.margin.left,S.setStyle($,"height",O+"px"),S.setStyle($,"width",N+"px"),S.translate(this.textarea,Math.min(C,this.$size.scrollerWidth-N),Math.min(l,G))}}},R.prototype.getFirstVisibleRow=function(){return this.layerConfig.firstRow},R.prototype.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(this.layerConfig.offset===0?0:1)},R.prototype.getLastFullyVisibleRow=function(){var $=this.layerConfig,k=$.lastRow,v=this.session.documentToScreenRow(k,0)*$.lineHeight;return v-this.session.getScrollTop()>$.height-$.lineHeight?k-1:k},R.prototype.getLastVisibleRow=function(){return this.layerConfig.lastRow},R.prototype.setPadding=function($){this.$padding=$,this.$textLayer.setPadding($),this.$cursorLayer.setPadding($),this.$markerFront.setPadding($),this.$markerBack.setPadding($),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},R.prototype.setScrollMargin=function($,k,v,b){var l=this.scrollMargin;l.top=$|0,l.bottom=k|0,l.right=b|0,l.left=v|0,l.v=l.top+l.bottom,l.h=l.left+l.right,l.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-l.top),this.updateFull()},R.prototype.setMargin=function($,k,v,b){var l=this.margin;l.top=$|0,l.bottom=k|0,l.right=b|0,l.left=v|0,l.v=l.top+l.bottom,l.h=l.left+l.right,this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this.updateFull()},R.prototype.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},R.prototype.setHScrollBarAlwaysVisible=function($){this.setOption("hScrollBarAlwaysVisible",$)},R.prototype.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},R.prototype.setVScrollBarAlwaysVisible=function($){this.setOption("vScrollBarAlwaysVisible",$)},R.prototype.$updateScrollBarV=function(){var $=this.layerConfig.maxHeight,k=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&($-=(k-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>$-k&&($=this.scrollTop+k,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight($+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},R.prototype.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},R.prototype.freeze=function(){this.$frozen=!0},R.prototype.unfreeze=function(){this.$frozen=!1},R.prototype.$renderChanges=function($,k){if(this.$changes&&($|=this.$changes,this.$changes=0),!this.session||!this.container.offsetWidth||this.$frozen||!$&&!k){this.$changes|=$;return}if(this.$size.$dirty)return this.$changes|=$,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender",$),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var v=this.layerConfig;if($&this.CHANGE_FULL||$&this.CHANGE_SIZE||$&this.CHANGE_TEXT||$&this.CHANGE_LINES||$&this.CHANGE_SCROLL||$&this.CHANGE_H_SCROLL){if($|=this.$computeLayerConfig()|this.$loop.clear(),v.firstRow!=this.layerConfig.firstRow&&v.firstRowScreen==this.layerConfig.firstRowScreen){var b=this.scrollTop+(v.firstRow-Math.max(this.layerConfig.firstRow,0))*this.lineHeight;b>0&&(this.scrollTop=b,$=$|this.CHANGE_SCROLL,$|=this.$computeLayerConfig()|this.$loop.clear())}v=this.layerConfig,this.$updateScrollBarV(),$&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),S.translate(this.content,-this.scrollLeft,-v.offset);var l=v.width+2*this.$padding+"px",C=v.minHeight+"px";S.setStyle(this.content.style,"width",l),S.setStyle(this.content.style,"height",C)}if($&this.CHANGE_H_SCROLL&&(S.translate(this.content,-this.scrollLeft,-v.offset),this.scroller.className=this.scrollLeft<=0?"ace_scroller ":"ace_scroller ace_scroll-left ",this.enableKeyboardAccessibility&&(this.scroller.className+=this.keyboardFocusClassName)),$&this.CHANGE_FULL){this.$changedLines=null,this.$textLayer.update(v),this.$showGutter&&this.$gutterLayer.update(v),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(v),this.$markerBack.update(v),this.$markerFront.update(v),this.$cursorLayer.update(v),this.$moveTextAreaToCursor(),this._signal("afterRender",$);return}if($&this.CHANGE_SCROLL){this.$changedLines=null,$&this.CHANGE_TEXT||$&this.CHANGE_LINES?this.$textLayer.update(v):this.$textLayer.scrollLines(v),this.$showGutter&&($&this.CHANGE_GUTTER||$&this.CHANGE_LINES?this.$gutterLayer.update(v):this.$gutterLayer.scrollLines(v)),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(v),this.$markerBack.update(v),this.$markerFront.update(v),this.$cursorLayer.update(v),this.$moveTextAreaToCursor(),this._signal("afterRender",$);return}$&this.CHANGE_TEXT?(this.$changedLines=null,this.$textLayer.update(v),this.$showGutter&&this.$gutterLayer.update(v),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(v)):$&this.CHANGE_LINES?((this.$updateLines()||$&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(v),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(v)):$&this.CHANGE_TEXT||$&this.CHANGE_GUTTER?(this.$showGutter&&this.$gutterLayer.update(v),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(v)):$&this.CHANGE_CURSOR&&(this.$highlightGutterLine&&this.$gutterLayer.updateLineHighlight(v),this.$customScrollbar&&this.$scrollDecorator.$updateDecorators(v)),$&this.CHANGE_CURSOR&&(this.$cursorLayer.update(v),this.$moveTextAreaToCursor()),$&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(v),$&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(v),this._signal("afterRender",$)},R.prototype.$autosize=function(){var $=this.session.getScreenLength()*this.lineHeight,k=this.$maxLines*this.lineHeight,v=Math.min(k,Math.max((this.$minLines||1)*this.lineHeight,$))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(v+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&v>this.$maxPixelHeight&&(v=this.$maxPixelHeight);var b=v<=2*this.lineHeight,l=!b&&$>k;if(v!=this.desiredHeight||this.$size.height!=this.desiredHeight||l!=this.$vScroll){l!=this.$vScroll&&(this.$vScroll=l,this.scrollBarV.setVisible(l));var C=this.container.clientWidth;this.container.style.height=v+"px",this.$updateCachedSize(!0,this.$gutterWidth,C,v),this.desiredHeight=v,this._signal("autosize")}},R.prototype.$computeLayerConfig=function(){var $=this.session,k=this.$size,v=k.height<=2*this.lineHeight,b=this.session.getScreenLength(),l=b*this.lineHeight,C=this.$getLongestLine(),O=!v&&(this.$hScrollBarAlwaysVisible||k.scrollerWidth-C-2*this.$padding<0),N=this.$horizScroll!==O;N&&(this.$horizScroll=O,this.scrollBarH.setVisible(O));var G=this.$vScroll;this.$maxLines&&this.lineHeight>1&&this.$autosize();var W=k.scrollerHeight+this.lineHeight,K=!this.$maxLines&&this.$scrollPastEnd?(k.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;l+=K;var V=this.scrollMargin;this.session.setScrollTop(Math.max(-V.top,Math.min(this.scrollTop,l-k.scrollerHeight+V.bottom))),this.session.setScrollLeft(Math.max(-V.left,Math.min(this.scrollLeft,C+2*this.$padding-k.scrollerWidth+V.right)));var Y=!v&&(this.$vScrollBarAlwaysVisible||k.scrollerHeight-l+K<0||this.scrollTop>V.top),re=G!==Y;re&&(this.$vScroll=Y,this.scrollBarV.setVisible(Y));var Q=this.scrollTop%this.lineHeight,ie=Math.ceil(W/this.lineHeight)-1,ue=Math.max(0,Math.round((this.scrollTop-Q)/this.lineHeight)),ge=ue+ie,me,ve,Ce=this.lineHeight;ue=$.screenToDocumentRow(ue,0);var Me=$.getFoldLine(ue);Me&&(ue=Me.start.row),me=$.documentToScreenRow(ue,0),ve=$.getRowLength(ue)*Ce,ge=Math.min($.screenToDocumentRow(ge,0),$.getLength()-1),W=k.scrollerHeight+$.getRowLength(ge)*Ce+ve,Q=this.scrollTop-me*Ce;var Ie=0;return(this.layerConfig.width!=C||N)&&(Ie=this.CHANGE_H_SCROLL),(N||re)&&(Ie|=this.$updateCachedSize(!0,this.gutterWidth,k.width,k.height),this._signal("scrollbarVisibilityChanged"),re&&(C=this.$getLongestLine())),this.layerConfig={width:C,padding:this.$padding,firstRow:ue,firstRowScreen:me,lastRow:ge,lineHeight:Ce,characterWidth:this.characterWidth,minHeight:W,maxHeight:l,offset:Q,gutterOffset:Ce?Math.max(0,Math.ceil((Q+k.height-k.scrollerHeight)/Ce)):0,height:this.$size.scrollerHeight},this.session.$bidiHandler&&this.session.$bidiHandler.setContentWidth(C-this.$padding),Ie},R.prototype.$updateLines=function(){if(this.$changedLines){var $=this.$changedLines.firstRow,k=this.$changedLines.lastRow;this.$changedLines=null;var v=this.layerConfig;if(!($>v.lastRow+1)&&!(k<v.firstRow)){if(k===1/0){this.$showGutter&&this.$gutterLayer.update(v),this.$textLayer.update(v);return}return this.$textLayer.updateLines(v,$,k),!0}}},R.prototype.$getLongestLine=function(){var $=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&($+=1),this.$textLayer&&$>this.$textLayer.MAX_LINE_LENGTH&&($=this.$textLayer.MAX_LINE_LENGTH+30),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round($*this.characterWidth))},R.prototype.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},R.prototype.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},R.prototype.addGutterDecoration=function($,k){this.$gutterLayer.addGutterDecoration($,k)},R.prototype.removeGutterDecoration=function($,k){this.$gutterLayer.removeGutterDecoration($,k)},R.prototype.updateBreakpoints=function($){this._rows=$,this.$loop.schedule(this.CHANGE_GUTTER)},R.prototype.setAnnotations=function($){this.$gutterLayer.setAnnotations($),this.$loop.schedule(this.CHANGE_GUTTER)},R.prototype.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},R.prototype.hideCursor=function(){this.$cursorLayer.hideCursor()},R.prototype.showCursor=function(){this.$cursorLayer.showCursor()},R.prototype.scrollSelectionIntoView=function($,k,v){this.scrollCursorIntoView($,v),this.scrollCursorIntoView(k,v)},R.prototype.scrollCursorIntoView=function($,k,v){if(this.$size.scrollerHeight!==0){var b=this.$cursorLayer.getPixelPosition($),l=b.left,C=b.top,O=v&&v.top||0,N=v&&v.bottom||0;this.$scrollAnimation&&(this.$stopAnimation=!0);var G=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;G+O>C?(k&&G+O>C+this.lineHeight&&(C-=k*this.$size.scrollerHeight),C===0&&(C=-this.scrollMargin.top),this.session.setScrollTop(C)):G+this.$size.scrollerHeight-N<C+this.lineHeight&&(k&&G+this.$size.scrollerHeight-N<C-this.lineHeight&&(C+=k*this.$size.scrollerHeight),this.session.setScrollTop(C+this.lineHeight+N-this.$size.scrollerHeight));var W=this.scrollLeft,K=2*this.layerConfig.characterWidth;l-K<W?(l-=K,l<this.$padding+K&&(l=-this.scrollMargin.left),this.session.setScrollLeft(l)):(l+=K,W+this.$size.scrollerWidth<l+this.characterWidth?this.session.setScrollLeft(Math.round(l+this.characterWidth-this.$size.scrollerWidth)):W<=this.$padding&&l-W<this.characterWidth&&this.session.setScrollLeft(0))}},R.prototype.getScrollTop=function(){return this.session.getScrollTop()},R.prototype.getScrollLeft=function(){return this.session.getScrollLeft()},R.prototype.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},R.prototype.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},R.prototype.scrollToRow=function($){this.session.setScrollTop($*this.lineHeight)},R.prototype.alignCursor=function($,k){typeof $=="number"&&($={row:$,column:0});var v=this.$cursorLayer.getPixelPosition($),b=this.$size.scrollerHeight-this.lineHeight,l=v.top-b*(k||0);return this.session.setScrollTop(l),l},R.prototype.$calcSteps=function($,k){var v=0,b=this.STEPS,l=[],C=function(O,N,G){return G*(Math.pow(O-1,3)+1)+N};for(v=0;v<b;++v)l.push(C(v/this.STEPS,$,k-$));return l},R.prototype.scrollToLine=function($,k,v,b){var l=this.$cursorLayer.getPixelPosition({row:$,column:0}),C=l.top;k&&(C-=this.$size.scrollerHeight/2);var O=this.scrollTop;this.session.setScrollTop(C),v!==!1&&this.animateScrolling(O,b)},R.prototype.animateScrolling=function($,k){var v=this.scrollTop;if(!this.$animatedScroll)return;var b=this;if($==v)return;if(this.$scrollAnimation){var l=this.$scrollAnimation.steps;if(l.length&&($=l[0],$==v))return}var C=b.$calcSteps($,v);this.$scrollAnimation={from:$,to:v,steps:C},clearInterval(this.$timer),b.session.setScrollTop(C.shift()),b.session.$scrollTop=v;function O(){b.$timer=clearInterval(b.$timer),b.$scrollAnimation=null,b.$stopAnimation=!1,k&&k()}this.$timer=setInterval(function(){if(b.$stopAnimation){O();return}if(!b.session)return clearInterval(b.$timer);C.length?(b.session.setScrollTop(C.shift()),b.session.$scrollTop=v):v!=null?(b.session.$scrollTop=-1,b.session.setScrollTop(v),v=null):O()},10)},R.prototype.scrollToY=function($){this.scrollTop!==$&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=$)},R.prototype.scrollToX=function($){this.scrollLeft!==$&&(this.scrollLeft=$),this.$loop.schedule(this.CHANGE_H_SCROLL)},R.prototype.scrollTo=function($,k){this.session.setScrollTop(k),this.session.setScrollLeft($)},R.prototype.scrollBy=function($,k){k&&this.session.setScrollTop(this.session.getScrollTop()+k),$&&this.session.setScrollLeft(this.session.getScrollLeft()+$)},R.prototype.isScrollableBy=function($,k){if(k<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||k>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||$<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||$>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right)return!0},R.prototype.pixelToScreenCoordinates=function($,k){var v;if(this.$hasCssTransforms){v={top:0,left:0};var b=this.$fontMetrics.transformCoordinates([$,k]);$=b[1]-this.gutterWidth-this.margin.left,k=b[0]}else v=this.scroller.getBoundingClientRect();var l=$+this.scrollLeft-v.left-this.$padding,C=l/this.characterWidth,O=Math.floor((k+this.scrollTop-v.top)/this.lineHeight),N=this.$blockCursor?Math.floor(C):Math.round(C);return{row:O,column:N,side:C-N>0?1:-1,offsetX:l}},R.prototype.screenToTextCoordinates=function($,k){var v;if(this.$hasCssTransforms){v={top:0,left:0};var b=this.$fontMetrics.transformCoordinates([$,k]);$=b[1]-this.gutterWidth-this.margin.left,k=b[0]}else v=this.scroller.getBoundingClientRect();var l=$+this.scrollLeft-v.left-this.$padding,C=l/this.characterWidth,O=this.$blockCursor?Math.floor(C):Math.round(C),N=Math.floor((k+this.scrollTop-v.top)/this.lineHeight);return this.session.screenToDocumentPosition(N,Math.max(O,0),l)},R.prototype.textToScreenCoordinates=function($,k){var v=this.scroller.getBoundingClientRect(),b=this.session.documentToScreenPosition($,k),l=this.$padding+(this.session.$bidiHandler.isBidiRow(b.row,$)?this.session.$bidiHandler.getPosLeft(b.column):Math.round(b.column*this.characterWidth)),C=b.row*this.lineHeight;return{pageX:v.left+l-this.scrollLeft,pageY:v.top+C-this.scrollTop}},R.prototype.visualizeFocus=function(){S.addCssClass(this.container,"ace_focus")},R.prototype.visualizeBlur=function(){S.removeCssClass(this.container,"ace_focus")},R.prototype.showComposition=function($){this.$composition=$,$.cssText||($.cssText=this.textarea.style.cssText),$.useTextareaForIME==null&&($.useTextareaForIME=this.$useTextareaForIME),this.$useTextareaForIME?(S.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor(),this.$cursorLayer.element.style.display="none"):$.markerId=this.session.addMarker($.markerRange,"ace_composition_marker","text")},R.prototype.setCompositionText=function($){var k=this.session.selection.cursor;this.addToken($,"composition_placeholder",k.row,k.column),this.$moveTextAreaToCursor()},R.prototype.hideComposition=function(){if(this.$composition){this.$composition.markerId&&this.session.removeMarker(this.$composition.markerId),S.removeCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText=this.$composition.cssText;var $=this.session.selection.cursor;this.removeExtraToken($.row,$.column),this.$composition=null,this.$cursorLayer.element.style.display=""}},R.prototype.setGhostText=function($,k){var v=this.session.selection.cursor,b=k||{row:v.row,column:v.column};this.removeGhostText();var l=this.$calculateWrappedTextChunks($,b);this.addToken(l[0].text,"ghost_text",b.row,b.column),this.$ghostText={text:$,position:{row:b.row,column:b.column}};var C=S.createElement("div");if(l.length>1){var O=this.hideTokensAfterPosition(b.row,b.column),N;l.slice(1).forEach(function(re){var Q=S.createElement("div"),ie=S.createElement("span");ie.className="ace_ghost_text",re.wrapped&&(Q.className="ghost_text_line_wrapped"),re.text.length===0&&(re.text=" "),ie.appendChild(S.createTextNode(re.text)),Q.appendChild(ie),C.appendChild(Q),N=Q}),O.forEach(function(re){var Q=S.createElement("span");_(re.type)||(Q.className="ace_"+re.type.replace(/\./g," ace_")),Q.appendChild(S.createTextNode(re.value)),N.appendChild(Q)}),this.$ghostTextWidget={el:C,row:b.row,column:b.column,className:"ace_ghost_text_container"},this.session.widgetManager.addLineWidget(this.$ghostTextWidget);var G=this.$cursorLayer.getPixelPosition(b,!0),W=this.container,K=W.getBoundingClientRect().height,V=l.length*this.lineHeight,Y=V<K-G.top;if(Y)return;V<K?this.scrollBy(0,(l.length-1)*this.lineHeight):this.scrollToRow(b.row)}},R.prototype.$calculateWrappedTextChunks=function($,k){var v=this.$size.scrollerWidth-this.$padding*2,b=Math.floor(v/this.characterWidth)-2;b=b<=0?60:b;for(var l=$.split(/\r?\n/),C=[],O=0;O<l.length;O++){var N=this.session.$getDisplayTokens(l[O],k.column),G=this.session.$computeWrapSplits(N,b,this.session.$tabSize);if(G.length>0){var W=0;G.push(l[O].length);for(var K=0;K<G.length;K++){var V=l[O].slice(W,G[K]);C.push({text:V,wrapped:!0}),W=G[K]}}else C.push({text:l[O],wrapped:!1})}return C},R.prototype.removeGhostText=function(){if(this.$ghostText){var $=this.$ghostText.position;this.removeExtraToken($.row,$.column),this.$ghostTextWidget&&(this.session.widgetManager.removeLineWidget(this.$ghostTextWidget),this.$ghostTextWidget=null),this.$ghostText=null}},R.prototype.addToken=function($,k,v,b){var l=this.session;l.bgTokenizer.lines[v]=null;var C={type:k,value:$},O=l.getTokens(v);if(b==null||!O.length)O.push(C);else for(var N=0,G=0;G<O.length;G++){var W=O[G];if(N+=W.value.length,b<=N){var K=W.value.length-(N-b),V=W.value.slice(0,K),Y=W.value.slice(K);O.splice(G,1,{type:W.type,value:V},C,{type:W.type,value:Y});break}}this.updateLines(v,v)},R.prototype.hideTokensAfterPosition=function($,k){for(var v=this.session.getTokens($),b=0,l=!1,C=[],O=0;O<v.length;O++){var N=v[O];if(b+=N.value.length,N.type!=="ghost_text"){if(l){C.push({type:N.type,value:N.value}),N.type="hidden_token";continue}b===k&&(l=!0)}}return this.updateLines($,$),C},R.prototype.removeExtraToken=function($,k){this.session.bgTokenizer.lines[$]=null,this.updateLines($,$)},R.prototype.setTheme=function($,k){var v=this;if(this.$themeId=$,v._dispatchEvent("themeChange",{theme:$}),!$||typeof $=="string"){var b=$||this.$options.theme.initialValue;s.loadModule(["theme",b],l)}else l($);function l(C){if(v.$themeId!=$)return k&&k();if(!C||!C.cssClass)throw new Error("couldn't load module "+$+" or it didn't call define");C.$id&&(v.$themeId=C.$id),S.importCssString(C.cssText,C.cssClass,v.container),v.theme&&S.removeCssClass(v.container,v.theme.cssClass);var O="padding"in C?C.padding:"padding"in(v.theme||{})?4:v.$padding;v.$padding&&O!=v.$padding&&v.setPadding(O),v.$theme=C.cssClass,v.theme=C,S.addCssClass(v.container,C.cssClass),S.setCssClass(v.container,"ace_dark",C.isDark),v.$size&&(v.$size.width=0,v.$updateSizeAsync()),v._dispatchEvent("themeLoaded",{theme:C}),k&&k(),d.isSafari&&v.scroller&&(v.scroller.style.background="red",v.scroller.style.background="")}},R.prototype.getTheme=function(){return this.$themeId},R.prototype.setStyle=function($,k){S.setCssClass(this.container,$,k!==!1)},R.prototype.unsetStyle=function($){S.removeCssClass(this.container,$)},R.prototype.setCursorStyle=function($){S.setStyle(this.scroller.style,"cursor",$)},R.prototype.setMouseCursor=function($){S.setStyle(this.scroller.style,"cursor",$)},R.prototype.attachToShadowRoot=function(){S.importCssString(w,"ace_editor.css",this.container)},R.prototype.destroy=function(){this.freeze(),this.$fontMetrics.destroy(),this.$cursorLayer.destroy(),this.removeAllListeners(),this.container.textContent="",this.setOption("useResizeObserver",!1)},R.prototype.$updateCustomScrollbar=function($){var k=this;this.$horizScroll=this.$vScroll=null,this.scrollBarV.element.remove(),this.scrollBarH.element.remove(),this.$scrollDecorator&&delete this.$scrollDecorator,$===!0?(this.scrollBarV=new a(this.container,this),this.scrollBarH=new r(this.container,this),this.scrollBarV.setHeight(this.$size.scrollerHeight),this.scrollBarH.setWidth(this.$size.scrollerWidth),this.scrollBarV.addEventListener("scroll",function(v){k.$scrollAnimation||k.session.setScrollTop(v.data-k.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(v){k.$scrollAnimation||k.session.setScrollLeft(v.data-k.scrollMargin.left)}),this.$scrollDecorator=new m(this.scrollBarV,this),this.$scrollDecorator.$updateDecorators()):(this.scrollBarV=new e(this.container,this),this.scrollBarH=new t(this.container,this),this.scrollBarV.addEventListener("scroll",function(v){k.$scrollAnimation||k.session.setScrollTop(v.data-k.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(v){k.$scrollAnimation||k.session.setScrollLeft(v.data-k.scrollMargin.left)}))},R.prototype.$addResizeObserver=function(){if(!(!window.ResizeObserver||this.$resizeObserver)){var $=this;this.$resizeTimer=A.delayedCall(function(){$.destroyed||$.onResize()},50),this.$resizeObserver=new window.ResizeObserver(function(k){var v=k[0].contentRect.width,b=k[0].contentRect.height;Math.abs($.$size.width-v)>1||Math.abs($.$size.height-b)>1?$.$resizeTimer.delay():$.$resizeTimer.cancel()}),this.$resizeObserver.observe(this.container)}},R}();T.prototype.CHANGE_CURSOR=1,T.prototype.CHANGE_MARKER=2,T.prototype.CHANGE_GUTTER=4,T.prototype.CHANGE_SCROLL=8,T.prototype.CHANGE_LINES=16,T.prototype.CHANGE_TEXT=32,T.prototype.CHANGE_SIZE=64,T.prototype.CHANGE_MARKER_BACK=128,T.prototype.CHANGE_MARKER_FRONT=256,T.prototype.CHANGE_FULL=512,T.prototype.CHANGE_H_SCROLL=1024,T.prototype.$changes=0,T.prototype.$padding=null,T.prototype.$frozen=!1,T.prototype.STEPS=8,D.implement(T.prototype,M),s.defineOptions(T.prototype,"renderer",{useResizeObserver:{set:function(R){!R&&this.$resizeObserver?(this.$resizeObserver.disconnect(),this.$resizeTimer.cancel(),this.$resizeTimer=this.$resizeObserver=null):R&&!this.$resizeObserver&&this.$addResizeObserver()}},animatedScroll:{initialValue:!1},showInvisibles:{set:function(R){this.$textLayer.setShowInvisibles(R)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(R){typeof R=="number"&&(this.$printMarginColumn=R),this.$showPrintMargin=!!R,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(R){this.$gutter.style.display=R?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},useSvgGutterIcons:{set:function(R){this.$gutterLayer.$useSvgGutterIcons=R},initialValue:!1},showFoldedAnnotations:{set:function(R){this.$gutterLayer.$showFoldedAnnotations=R},initialValue:!1},fadeFoldWidgets:{set:function(R){S.setCssClass(this.$gutter,"ace_fade-fold-widgets",R)},initialValue:!1},showFoldWidgets:{set:function(R){this.$gutterLayer.setShowFoldWidgets(R),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(R){this.$textLayer.setDisplayIndentGuides(R)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightIndentGuides:{set:function(R){this.$textLayer.setHighlightIndentGuides(R)==!0?this.$textLayer.$highlightIndentGuide():this.$textLayer.$clearActiveIndentGuide(this.$textLayer.$lines.cells)},initialValue:!0},highlightGutterLine:{set:function(R){this.$gutterLayer.setHighlightGutterLine(R),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},hScrollBarAlwaysVisible:{set:function(R){(!this.$hScrollBarAlwaysVisible||!this.$horizScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(R){(!this.$vScrollBarAlwaysVisible||!this.$vScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(R){typeof R=="number"&&(R=R+"px"),this.container.style.fontSize=R,this.updateFontSize()},initialValue:12},fontFamily:{set:function(R){this.container.style.fontFamily=R,this.updateFontSize()}},maxLines:{set:function(R){this.updateFull()}},minLines:{set:function(R){this.$minLines<562949953421311||(this.$minLines=0),this.updateFull()}},maxPixelHeight:{set:function(R){this.updateFull()},initialValue:0},scrollPastEnd:{set:function(R){R=+R||0,this.$scrollPastEnd!=R&&(this.$scrollPastEnd=R,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(R){this.$gutterLayer.$fixedWidth=!!R,this.$loop.schedule(this.CHANGE_GUTTER)}},customScrollbar:{set:function(R){this.$updateCustomScrollbar(R)},initialValue:!1},theme:{set:function(R){this.setTheme(R)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0},hasCssTransforms:{},useTextareaForIME:{initialValue:!d.isMobile&&!d.isIE}}),I.VirtualRenderer=T}),ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],function(g,I,z){var D=g("../lib/oop"),S=g("../lib/net"),A=g("../lib/event_emitter").EventEmitter,s=g("../config");function h(t){var e="importScripts('"+S.qualifyURL(t)+"');";try{return new Blob([e],{type:"application/javascript"})}catch{var r=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,a=new r;return a.append(e),a.getBlob("application/javascript")}}function o(t){if(typeof Worker>"u")return{postMessage:function(){},terminate:function(){}};if(s.get("loadWorkerFromBlob")){var e=h(t),r=window.URL||window.webkitURL,a=r.createObjectURL(e);return new Worker(a)}return new Worker(t)}var n=function(t){t.postMessage||(t=this.$createWorkerFromOldConfig.apply(this,arguments)),this.$worker=t,this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){D.implement(this,A),this.$createWorkerFromOldConfig=function(t,e,r,a,u){if(g.nameToUrl&&!g.toUrl&&(g.toUrl=g.nameToUrl),s.get("packaged")||!g.toUrl)a=a||s.moduleUrl(e,"worker");else{var p=this.$normalizePath;a=a||p(g.toUrl("ace/worker/worker.js",null,"_"));var M={};t.forEach(function(w){M[w]=p(g.toUrl(w,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}return this.$worker=o(a),u&&this.send("importScripts",u),this.$worker.postMessage({init:!0,tlns:M,module:e,classname:r}),this.$worker},this.onMessage=function(t){var e=t.data;switch(e.type){case"event":this._signal(e.name,{data:e.data});break;case"call":var r=this.callbacks[e.id];r&&(r(e.data),delete this.callbacks[e.id]);break;case"error":this.reportError(e.data);break;case"log":window.console&&console.log&&console.log.apply(console,e.data);break}},this.reportError=function(t){window.console&&console.error&&console.error(t)},this.$normalizePath=function(t){return S.qualifyURL(t)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker.onerror=function(t){t.preventDefault()},this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(t,e){this.$worker.postMessage({command:t,args:e})},this.call=function(t,e,r){if(r){var a=this.callbackId++;this.callbacks[a]=r,e.push(a)}this.send(t,e)},this.emit=function(t,e){try{e.data&&e.data.err&&(e.data.err={message:e.data.err.message,stack:e.data.err.stack,code:e.data.err.code}),this.$worker&&this.$worker.postMessage({event:t,data:{data:e.data}})}catch(r){console.error(r.stack)}},this.attachToDocument=function(t){this.$doc&&this.terminate(),this.$doc=t,this.call("setValue",[t.getValue()]),t.on("change",this.changeListener,!0)},this.changeListener=function(t){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),t.action=="insert"?this.deltaQueue.push(t.start,t.lines):this.deltaQueue.push(t.start,t.end)},this.$sendDeltaQueue=function(){var t=this.deltaQueue;t&&(this.deltaQueue=null,t.length>50&&t.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:t}))}}).call(n.prototype);var i=function(t,e,r){var a=null,u=!1,p=Object.create(A),M=[],w=new n({messageBuffer:M,terminate:function(){},postMessage:function(d){M.push(d),a&&(u?setTimeout(m):m())}});w.setEmitSync=function(d){u=d};var m=function(){var d=M.shift();d.command?a[d.command].apply(a,d.args):d.event&&p._signal(d.event,d.data)};return p.postMessage=function(d){w.onMessage({data:d})},p.callback=function(d,_){this.postMessage({type:"call",id:_,data:d})},p.emit=function(d,_){this.postMessage({type:"event",name:d,data:_})},s.loadModule(["worker",e],function(d){for(a=new d[r](p);M.length;)m()}),w};I.UIWorkerClient=i,I.WorkerClient=n,I.createWorker=o}),ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(g,I,z){var D=g("./range").Range,S=g("./lib/event_emitter").EventEmitter,A=g("./lib/oop"),s=function(){function h(o,n,i,t,e,r){var a=this;this.length=n,this.session=o,this.doc=o.getDocument(),this.mainClass=e,this.othersClass=r,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate,!0),this.$others=t,this.$onCursorChange=function(){setTimeout(function(){a.onCursorChange()})},this.$pos=i;var u=o.getUndoManager().$undoStack||o.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=u.length,this.setup(),o.selection.on("changeCursor",this.$onCursorChange)}return h.prototype.setup=function(){var o=this,n=this.doc,i=this.session;this.selectionBefore=i.selection.toJSON(),i.selection.inMultiSelectMode&&i.selection.toSingleRange(),this.pos=n.createAnchor(this.$pos.row,this.$pos.column);var t=this.pos;t.$insertRight=!0,t.detach(),t.markerId=i.addMarker(new D(t.row,t.column,t.row,t.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach(function(e){var r=n.createAnchor(e.row,e.column);r.$insertRight=!0,r.detach(),o.others.push(r)}),i.setUndoSelect(!1)},h.prototype.showOtherMarkers=function(){if(!this.othersActive){var o=this.session,n=this;this.othersActive=!0,this.others.forEach(function(i){i.markerId=o.addMarker(new D(i.row,i.column,i.row,i.column+n.length),n.othersClass,null,!1)})}},h.prototype.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var o=0;o<this.others.length;o++)this.session.removeMarker(this.others[o].markerId)}},h.prototype.onUpdate=function(o){if(this.$updating)return this.updateAnchors(o);var n=o;if(n.start.row===n.end.row&&n.start.row===this.pos.row){this.$updating=!0;var i=o.action==="insert"?n.end.column-n.start.column:n.start.column-n.end.column,t=n.start.column>=this.pos.column&&n.start.column<=this.pos.column+this.length+1,e=n.start.column-this.pos.column;if(this.updateAnchors(o),t&&(this.length+=i),t&&!this.session.$fromUndo){if(o.action==="insert")for(var r=this.others.length-1;r>=0;r--){var a=this.others[r],u={row:a.row,column:a.column+e};this.doc.insertMergedLines(u,o.lines)}else if(o.action==="remove")for(var r=this.others.length-1;r>=0;r--){var a=this.others[r],u={row:a.row,column:a.column+e};this.doc.remove(new D(u.row,u.column,u.row,u.column-i))}}this.$updating=!1,this.updateMarkers()}},h.prototype.updateAnchors=function(o){this.pos.onChange(o);for(var n=this.others.length;n--;)this.others[n].onChange(o);this.updateMarkers()},h.prototype.updateMarkers=function(){if(!this.$updating){var o=this,n=this.session,i=function(e,r){n.removeMarker(e.markerId),e.markerId=n.addMarker(new D(e.row,e.column,e.row,e.column+o.length),r,null,!1)};i(this.pos,this.mainClass);for(var t=this.others.length;t--;)i(this.others[t],this.othersClass)}},h.prototype.onCursorChange=function(o){if(!(this.$updating||!this.session)){var n=this.session.selection.getCursor();n.row===this.pos.row&&n.column>=this.pos.column&&n.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",o)):(this.hideOtherMarkers(),this._emit("cursorLeave",o))}},h.prototype.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.off("change",this.$onUpdate),this.session.selection.off("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},h.prototype.cancel=function(){if(this.$undoStackDepth!==-1){for(var o=this.session.getUndoManager(),n=(o.$undoStack||o.$undostack).length-this.$undoStackDepth,i=0;i<n;i++)o.undo(this.session,!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}},h}();A.implement(s.prototype,S),I.PlaceHolder=s}),ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(g,I,z){var D=g("../lib/event"),S=g("../lib/useragent");function A(h,o){return h.row==o.row&&h.column==o.column}function s(h){var o=h.domEvent,n=o.altKey,i=o.shiftKey,t=o.ctrlKey,e=h.getAccelKey(),r=h.getButton();if(t&&S.isMac&&(r=o.button),h.editor.inMultiSelectMode&&r==2){h.editor.textInput.onContextMenu(h.domEvent);return}if(!t&&!n&&!e){r===0&&h.editor.inMultiSelectMode&&h.editor.exitMultiSelectMode();return}if(r===0){var a=h.editor,u=a.selection,p=a.inMultiSelectMode,M=h.getDocumentPosition(),w=u.getCursor(),m=h.inSelection()||u.isEmpty()&&A(M,w),d=h.x,_=h.y,T=function(V){d=V.clientX,_=V.clientY},R=a.session,$=a.renderer.pixelToScreenCoordinates(d,_),k=$,v;if(a.$mouseHandler.$enableJumpToDef)t&&n||e&&n?v=i?"block":"add":n&&a.$blockSelectEnabled&&(v="block");else if(e&&!n){if(v="add",!p&&i)return}else n&&a.$blockSelectEnabled&&(v="block");if(v&&S.isMac&&o.ctrlKey&&a.$mouseHandler.cancelContextMenu(),v=="add"){if(!p&&m)return;if(!p){var b=u.toOrientedRange();a.addSelectionMarker(b)}var l=u.rangeList.rangeAtPoint(M);a.inVirtualSelectionMode=!0,i&&(l=null,b=u.ranges[0]||b,a.removeSelectionMarker(b)),a.once("mouseup",function(){var V=u.toOrientedRange();l&&V.isEmpty()&&A(l.cursor,V.cursor)?u.substractPoint(V.cursor):(i?u.substractPoint(b.cursor):b&&(a.removeSelectionMarker(b),u.addRange(b)),u.addRange(V)),a.inVirtualSelectionMode=!1})}else if(v=="block"){h.stop(),a.inVirtualSelectionMode=!0;var C,O=[],N=function(){var V=a.renderer.pixelToScreenCoordinates(d,_),Y=R.screenToDocumentPosition(V.row,V.column,V.offsetX);A(k,V)&&A(Y,u.lead)||(k=V,a.selection.moveToPosition(Y),a.renderer.scrollCursorIntoView(),a.removeSelectionMarkers(O),O=u.rectangularRangeBlock(k,$),a.$mouseHandler.$clickSelection&&O.length==1&&O[0].isEmpty()&&(O[0]=a.$mouseHandler.$clickSelection.clone()),O.forEach(a.addSelectionMarker,a),a.updateSelectionMarkers())};p&&!e?u.toSingleRange():!p&&e&&(C=u.toOrientedRange(),a.addSelectionMarker(C)),i?$=R.documentToScreenPosition(u.lead):u.moveToPosition(M),k={row:-1,column:-1};var G=function(V){N(),clearInterval(K),a.removeSelectionMarkers(O),O.length||(O=[u.toOrientedRange()]),C&&(a.removeSelectionMarker(C),u.toSingleRange(C));for(var Y=0;Y<O.length;Y++)u.addRange(O[Y]);a.inVirtualSelectionMode=!1,a.$mouseHandler.$clickSelection=null},W=N;D.capture(a.container,T,G);var K=setInterval(function(){W()},20);return h.preventDefault()}}}I.onMouseDown=s}),ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(g,I,z){I.defaultCommands=[{name:"addCursorAbove",description:"Add cursor above",exec:function(S){S.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",description:"Add cursor below",exec:function(S){S.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",description:"Add cursor above (skip current)",exec:function(S){S.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",description:"Add cursor below (skip current)",exec:function(S){S.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",description:"Select more before",exec:function(S){S.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",description:"Select more after",exec:function(S){S.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",description:"Select next before",exec:function(S){S.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",description:"Select next after",exec:function(S){S.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"toggleSplitSelectionIntoLines",description:"Split selection into lines",exec:function(S){S.multiSelect.rangeCount>1?S.multiSelect.joinSelections():S.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"splitSelectionIntoLines",description:"Split into lines",exec:function(S){S.multiSelect.splitIntoLines()},readOnly:!0},{name:"alignCursors",description:"Align cursors",exec:function(S){S.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",description:"Find all",exec:function(S){S.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],I.multiSelectCommands=[{name:"singleSelection",description:"Single selection",bindKey:"esc",exec:function(S){S.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(S){return S&&S.inMultiSelectMode}}];var D=g("../keyboard/hash_handler").HashHandler;I.keyboardHandler=new D(I.multiSelectCommands)}),ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(g,I,z){var D=g("./range_list").RangeList,S=g("./range").Range,A=g("./selection").Selection,s=g("./mouse/multi_select_handler").onMouseDown,h=g("./lib/event"),o=g("./lib/lang"),n=g("./commands/multi_select_commands");I.commands=n.defaultCommands.concat(n.multiSelectCommands);var i=g("./search").Search,t=new i;function e(w,m,d){return t.$options.wrap=!0,t.$options.needle=m,t.$options.backwards=d==-1,t.find(w)}var r=g("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(r.prototype),(function(){this.ranges=null,this.rangeList=null,this.addRange=function(w,m){if(w){if(!this.inMultiSelectMode&&this.rangeCount===0){var d=this.toOrientedRange();if(this.rangeList.add(d),this.rangeList.add(w),this.rangeList.ranges.length!=2)return this.rangeList.removeAll(),m||this.fromOrientedRange(w);this.rangeList.removeAll(),this.rangeList.add(d),this.$onAddRange(d)}w.cursor||(w.cursor=w.end);var _=this.rangeList.add(w);return this.$onAddRange(w),_.length&&this.$onRemoveRange(_),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),m||this.fromOrientedRange(w)}},this.toSingleRange=function(w){w=w||this.ranges[0];var m=this.rangeList.removeAll();m.length&&this.$onRemoveRange(m),w&&this.fromOrientedRange(w)},this.substractPoint=function(w){var m=this.rangeList.substractPoint(w);if(m)return this.$onRemoveRange(m),m[0]},this.mergeOverlappingRanges=function(){var w=this.rangeList.merge();w.length&&this.$onRemoveRange(w)},this.$onAddRange=function(w){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(w),this._signal("addRange",{range:w})},this.$onRemoveRange=function(w){if(this.rangeCount=this.rangeList.ranges.length,this.rangeCount==1&&this.inMultiSelectMode){var m=this.rangeList.ranges.pop();w.push(m),this.rangeCount=0}for(var d=w.length;d--;){var _=this.ranges.indexOf(w[d]);this.ranges.splice(_,1)}this._signal("removeRange",{ranges:w}),this.rangeCount===0&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),m=m||this.ranges[0],m&&!m.isEqual(this.getRange())&&this.fromOrientedRange(m)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new D,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){for(var w=this.ranges.length?this.ranges:[this.getRange()],m=[],d=0;d<w.length;d++){var _=w[d],T=_.start.row,R=_.end.row;if(T===R)m.push(_.clone());else{for(m.push(new S(T,_.start.column,T,this.session.getLine(T).length));++T<R;)m.push(this.getLineRange(T,!0));m.push(new S(R,0,R,_.end.column))}d==0&&!this.isBackwards()&&(m=m.reverse())}this.toSingleRange();for(var d=m.length;d--;)this.addRange(m[d])},this.joinSelections=function(){var w=this.rangeList.ranges,m=w[w.length-1],d=S.fromPoints(w[0].start,m.end);this.toSingleRange(),this.setSelectionRange(d,m.cursor==m.start)},this.toggleBlockSelection=function(){if(this.rangeCount>1){var w=this.rangeList.ranges,m=w[w.length-1],d=S.fromPoints(w[0].start,m.end);this.toSingleRange(),this.setSelectionRange(d,m.cursor==m.start)}else{var _=this.session.documentToScreenPosition(this.cursor),T=this.session.documentToScreenPosition(this.anchor),R=this.rectangularRangeBlock(_,T);R.forEach(this.addRange,this)}},this.rectangularRangeBlock=function(w,m,d){var _=[],T=w.column<m.column;if(T)var R=w.column,$=m.column,k=w.offsetX,v=m.offsetX;else var R=m.column,$=w.column,k=m.offsetX,v=w.offsetX;var b=w.row<m.row;if(b)var l=w.row,C=m.row;else var l=m.row,C=w.row;R<0&&(R=0),l<0&&(l=0),l==C&&(d=!0);for(var O,N=l;N<=C;N++){var G=S.fromPoints(this.session.screenToDocumentPosition(N,R,k),this.session.screenToDocumentPosition(N,$,v));if(G.isEmpty()){if(O&&u(G.end,O))break;O=G.end}G.cursor=T?G.start:G.end,_.push(G)}if(b&&_.reverse(),!d){for(var W=_.length-1;_[W].isEmpty()&&W>0;)W--;if(W>0)for(var K=0;_[K].isEmpty();)K++;for(var V=W;V>=K;V--)_[V].isEmpty()&&_.splice(V,1)}return _}}).call(A.prototype);var a=g("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(w){w.cursor||(w.cursor=w.end);var m=this.getSelectionStyle();return w.marker=this.session.addMarker(w,"ace_selection",m),this.session.$selectionMarkers.push(w),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,w},this.removeSelectionMarker=function(w){if(w.marker){this.session.removeMarker(w.marker);var m=this.session.$selectionMarkers.indexOf(w);m!=-1&&this.session.$selectionMarkers.splice(m,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(w){for(var m=this.session.$selectionMarkers,d=w.length;d--;){var _=w[d];if(_.marker){this.session.removeMarker(_.marker);var T=m.indexOf(_);T!=-1&&m.splice(T,1)}}this.session.selectionMarkerCount=m.length},this.$onAddRange=function(w){this.addSelectionMarker(w.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(w){this.removeSelectionMarkers(w.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(w){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(n.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(w){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(n.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(w){var m=w.command,d=w.editor;if(d.multiSelect){if(m.multiSelectAction)m.multiSelectAction=="forEach"?_=d.forEachSelection(m,w.args):m.multiSelectAction=="forEachLine"?_=d.forEachSelection(m,w.args,!0):m.multiSelectAction=="single"?(d.exitMultiSelectMode(),_=m.exec(d,w.args||{})):_=m.multiSelectAction(d,w.args||{});else{var _=m.exec(d,w.args||{});d.multiSelect.addRange(d.multiSelect.toOrientedRange()),d.multiSelect.mergeOverlappingRanges()}return _}},this.forEachSelection=function(w,m,d){if(!this.inVirtualSelectionMode){var _=d&&d.keepOrder,T=d==!0||d&&d.$byLines,R=this.session,$=this.selection,k=$.rangeList,v=(_?$:k).ranges,b;if(!v.length)return w.exec?w.exec(this,m||{}):w(this,m||{});var l=$._eventRegistry;$._eventRegistry={};var C=new A(R);this.inVirtualSelectionMode=!0;for(var O=v.length;O--;){if(T)for(;O>0&&v[O].start.row==v[O-1].end.row;)O--;C.fromOrientedRange(v[O]),C.index=O,this.selection=R.selection=C;var N=w.exec?w.exec(this,m||{}):w(this,m||{});!b&&N!==void 0&&(b=N),C.toOrientedRange(v[O])}C.detach(),this.selection=R.selection=$,this.inVirtualSelectionMode=!1,$._eventRegistry=l,$.mergeOverlappingRanges(),$.ranges[0]&&$.fromOrientedRange($.ranges[0]);var G=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),G&&G.from==G.to&&this.renderer.animateScrolling(G.from),b}},this.exitMultiSelectMode=function(){!this.inMultiSelectMode||this.inVirtualSelectionMode||this.multiSelect.toSingleRange()},this.getSelectedText=function(){var w="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var m=this.multiSelect.rangeList.ranges,d=[],_=0;_<m.length;_++)d.push(this.session.getTextRange(m[_]));var T=this.session.getDocument().getNewLineCharacter();w=d.join(T),w.length==(d.length-1)*T.length&&(w="")}else this.selection.isEmpty()||(w=this.session.getTextRange(this.getSelectionRange()));return w},this.$checkMultiselectChange=function(w,m){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var d=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&m==this.multiSelect.anchor)return;var _=m==this.multiSelect.anchor?d.cursor==d.start?d.end:d.start:d.cursor;_.row!=m.row||this.session.$clipPositionToDocument(_.row,_.column).column!=m.column?this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange()):this.multiSelect.mergeOverlappingRanges()}},this.findAll=function(w,m,d){if(m=m||{},m.needle=w||m.needle,m.needle==null){var _=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();m.needle=this.session.getTextRange(_)}this.$search.set(m);var T=this.$search.findAll(this.session);if(!T.length)return 0;var R=this.multiSelect;d||R.toSingleRange(T[0]);for(var $=T.length;$--;)R.addRange(T[$],!0);return _&&R.rangeList.rangeAtPoint(_.start)&&R.addRange(_,!0),T.length},this.selectMoreLines=function(w,m){var d=this.selection.toOrientedRange(),_=d.cursor==d.end,T=this.session.documentToScreenPosition(d.cursor);this.selection.$desiredColumn&&(T.column=this.selection.$desiredColumn);var R=this.session.screenToDocumentPosition(T.row+w,T.column);if(d.isEmpty())var k=R;else var $=this.session.documentToScreenPosition(_?d.end:d.start),k=this.session.screenToDocumentPosition($.row+w,$.column);if(_){var v=S.fromPoints(R,k);v.cursor=v.start}else{var v=S.fromPoints(k,R);v.cursor=v.end}if(v.desiredColumn=T.column,!this.selection.inMultiSelectMode)this.selection.addRange(d);else if(m)var b=d.cursor;this.selection.addRange(v),b&&this.selection.substractPoint(b)},this.transposeSelections=function(w){for(var m=this.session,d=m.multiSelect,_=d.ranges,T=_.length;T--;){var R=_[T];if(R.isEmpty()){var $=m.getWordRange(R.start.row,R.start.column);R.start.row=$.start.row,R.start.column=$.start.column,R.end.row=$.end.row,R.end.column=$.end.column}}d.mergeOverlappingRanges();for(var k=[],T=_.length;T--;){var R=_[T];k.unshift(m.getTextRange(R))}w<0?k.unshift(k.pop()):k.push(k.shift());for(var T=_.length;T--;){var R=_[T],v=R.clone();m.replace(R,k[T]),R.start.row=v.start.row,R.start.column=v.start.column}d.fromOrientedRange(d.ranges[0])},this.selectMore=function(w,m,d){var _=this.session,T=_.multiSelect,R=T.toOrientedRange();if(!(R.isEmpty()&&(R=_.getWordRange(R.start.row,R.start.column),R.cursor=w==-1?R.start:R.end,this.multiSelect.addRange(R),d))){var $=_.getTextRange(R),k=e(_,$,w);k&&(k.cursor=w==-1?k.start:k.end,this.session.unfold(k),this.multiSelect.addRange(k),this.renderer.scrollCursorIntoView(null,.5)),m&&this.multiSelect.substractPoint(R.cursor)}},this.alignCursors=function(){var w=this.session,m=w.multiSelect,d=m.ranges,_=-1,T=d.filter(function(W){if(W.cursor.row==_)return!0;_=W.cursor.row});if(!d.length||T.length==d.length-1){var R=this.selection.getRange(),$=R.start.row,k=R.end.row,v=$==k;if(v){var b=this.session.getLength(),l;do l=this.session.getLine(k);while(/[=:]/.test(l)&&++k<b);do l=this.session.getLine($);while(/[=:]/.test(l)&&--$>0);$<0&&($=0),k>=b&&(k=b-1)}var C=this.session.removeFullLines($,k);C=this.$reAlignText(C,v),this.session.insert({row:$,column:0},C.join(`
`)+`
`),v||(R.start.column=0,R.end.column=C[C.length-1].length),this.selection.setRange(R)}else{T.forEach(function(W){m.substractPoint(W.cursor)});var O=0,N=1/0,G=d.map(function(W){var K=W.cursor,V=w.getLine(K.row),Y=V.substr(K.column).search(/\S/g);return Y==-1&&(Y=0),K.column>O&&(O=K.column),Y<N&&(N=Y),Y});d.forEach(function(W,K){var V=W.cursor,Y=O-V.column,re=G[K]-N;Y>re?w.insert(V,o.stringRepeat(" ",Y-re)):w.remove(new S(V.row,V.column,V.row,V.column-Y+re)),W.start.column=W.end.column=O,W.start.row=W.end.row=V.row,W.cursor=W.end}),m.fromOrientedRange(d[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}},this.$reAlignText=function(w,m){var d=!0,_=!0,T,R,$;return w.map(function(C){var O=C.match(/(\s*)(.*?)(\s*)([=:].*)/);return O?T==null?(T=O[1].length,R=O[2].length,$=O[3].length,O):(T+R+$!=O[1].length+O[2].length+O[3].length&&(_=!1),T!=O[1].length&&(d=!1),T>O[1].length&&(T=O[1].length),R<O[2].length&&(R=O[2].length),$>O[3].length&&($=O[3].length),O):[C]}).map(m?v:d?_?b:v:l);function k(C){return o.stringRepeat(" ",C)}function v(C){return C[2]?k(T)+C[2]+k(R-C[2].length+$)+C[4].replace(/^([=:])\s+/,"$1 "):C[0]}function b(C){return C[2]?k(T+R-C[2].length)+C[2]+k($)+C[4].replace(/^([=:])\s+/,"$1 "):C[0]}function l(C){return C[2]?k(T)+C[2]+k($)+C[4].replace(/^([=:])\s+/,"$1 "):C[0]}}}).call(a.prototype);function u(w,m){return w.row==m.row&&w.column==m.column}I.onSessionChange=function(w){var m=w.session;m&&!m.multiSelect&&(m.$selectionMarkers=[],m.selection.$initRangeList(),m.multiSelect=m.selection),this.multiSelect=m&&m.multiSelect;var d=w.oldSession;d&&(d.multiSelect.off("addRange",this.$onAddRange),d.multiSelect.off("removeRange",this.$onRemoveRange),d.multiSelect.off("multiSelect",this.$onMultiSelect),d.multiSelect.off("singleSelect",this.$onSingleSelect),d.multiSelect.lead.off("change",this.$checkMultiselectChange),d.multiSelect.anchor.off("change",this.$checkMultiselectChange)),m&&(m.multiSelect.on("addRange",this.$onAddRange),m.multiSelect.on("removeRange",this.$onRemoveRange),m.multiSelect.on("multiSelect",this.$onMultiSelect),m.multiSelect.on("singleSelect",this.$onSingleSelect),m.multiSelect.lead.on("change",this.$checkMultiselectChange),m.multiSelect.anchor.on("change",this.$checkMultiselectChange)),m&&this.inMultiSelectMode!=m.selection.inMultiSelectMode&&(m.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())};function p(w){w.$multiselectOnSessionChange||(w.$onAddRange=w.$onAddRange.bind(w),w.$onRemoveRange=w.$onRemoveRange.bind(w),w.$onMultiSelect=w.$onMultiSelect.bind(w),w.$onSingleSelect=w.$onSingleSelect.bind(w),w.$multiselectOnSessionChange=I.onSessionChange.bind(w),w.$checkMultiselectChange=w.$checkMultiselectChange.bind(w),w.$multiselectOnSessionChange(w),w.on("changeSession",w.$multiselectOnSessionChange),w.on("mousedown",s),w.commands.addCommands(n.defaultCommands),M(w))}function M(w){if(!w.textInput)return;var m=w.textInput.getElement(),d=!1;h.addListener(m,"keydown",function(T){var R=T.keyCode==18&&!(T.ctrlKey||T.shiftKey||T.metaKey);w.$blockSelectEnabled&&R?d||(w.renderer.setMouseCursor("crosshair"),d=!0):d&&_()},w),h.addListener(m,"keyup",_,w),h.addListener(m,"blur",_,w);function _(T){d&&(w.renderer.setMouseCursor(""),d=!1)}}I.MultiSelect=p,g("./config").defineOptions(a.prototype,"editor",{enableMultiselect:{set:function(w){p(this),w?this.on("mousedown",s):this.off("mousedown",s)},value:!0},enableBlockSelect:{set:function(w){this.$blockSelectEnabled=w},value:!0}})}),ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(g,I,z){var D=g("../../range").Range,S=I.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(A,s,h){var o=A.getLine(h);return this.foldingStartMarker.test(o)?"start":s=="markbeginend"&&this.foldingStopMarker&&this.foldingStopMarker.test(o)?"end":""},this.getFoldWidgetRange=function(A,s,h){return null},this.indentationBlock=function(A,s,h){var o=/\S/,n=A.getLine(s),i=n.search(o);if(i!=-1){for(var t=h||n.length,e=A.getLength(),r=s,a=s;++s<e;){var u=A.getLine(s).search(o);if(u!=-1){if(u<=i){var p=A.getTokenAt(s,0);if(!p||p.type!=="string")break}a=s}}if(a>r){var M=A.getLine(a).length;return new D(r,t,a,M)}}},this.openingBracketBlock=function(A,s,h,o,n){var i={row:h,column:o+1},t=A.$findClosingBracket(s,i,n);if(t){var e=A.foldWidgets[t.row];return e==null&&(e=A.getFoldWidget(t.row)),e=="start"&&t.row>i.row&&(t.row--,t.column=A.getLine(t.row).length),D.fromPoints(i,t)}},this.closingBracketBlock=function(A,s,h,o,n){var i={row:h,column:o},t=A.$findOpeningBracket(s,i);if(t)return t.column++,i.column--,D.fromPoints(t,i)}}).call(S.prototype)}),ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range","ace/config"],function(g,I,z){var D=g("../line_widgets").LineWidgets,S=g("../lib/dom"),A=g("../range").Range,s=g("../config").nls;function h(n,i,t){for(var e=0,r=n.length-1;e<=r;){var a=e+r>>1,u=t(i,n[a]);if(u>0)e=a+1;else if(u<0)r=a-1;else return a}return-(e+1)}function o(n,i,t){var e=n.getAnnotations().sort(A.comparePoints);if(e.length){var r=h(e,{row:i,column:-1},A.comparePoints);r<0&&(r=-r-1),r>=e.length?r=t>0?0:e.length-1:r===0&&t<0&&(r=e.length-1);var a=e[r];if(!(!a||!t)){if(a.row===i){do a=e[r+=t];while(a&&a.row===i);if(!a)return e.slice()}var u=[];i=a.row;do u[t<0?"unshift":"push"](a),a=e[r+=t];while(a&&a.row==i);return u.length&&u}}}I.showErrorMarker=function(n,i){var t=n.session;t.widgetManager||(t.widgetManager=new D(t),t.widgetManager.attach(n));var e=n.getCursorPosition(),r=e.row,a=t.widgetManager.getWidgetsAtRow(r).filter(function(R){return R.type=="errorMarker"})[0];a?a.destroy():r-=i;var u=o(t,r,i),p;if(u){var M=u[0];e.column=(M.pos&&typeof M.column!="number"?M.pos.sc:M.column)||0,e.row=M.row,p=n.renderer.$gutterLayer.$annotations[e.row]}else{if(a)return;p={displayText:[s("error-marker.good-state","Looks good!")],className:"ace_ok"}}n.session.unfold(e.row),n.selection.moveToPosition(e);var w={row:e.row,fixedWidth:!0,coverGutter:!0,el:S.createElement("div"),type:"errorMarker"},m=w.el.appendChild(S.createElement("div")),d=w.el.appendChild(S.createElement("div"));d.className="error_widget_arrow "+p.className;var _=n.renderer.$cursorLayer.getPixelPosition(e).left;d.style.left=_+n.renderer.gutterWidth-5+"px",w.el.className="error_widget_wrapper",m.className="error_widget "+p.className,p.displayText.forEach(function(R,$){m.appendChild(S.createTextNode(R)),$<p.displayText.length-1&&m.appendChild(S.createElement("br"))}),m.appendChild(S.createElement("div"));var T=function(R,$,k){if($===0&&(k==="esc"||k==="return"))return w.destroy(),{command:"null"}};w.destroy=function(){n.$mouseHandler.isMousePressed||(n.keyBinding.removeKeyboardHandler(T),t.widgetManager.removeLineWidget(w),n.off("changeSelection",w.destroy),n.off("changeSession",w.destroy),n.off("mouseup",w.destroy),n.off("change",w.destroy))},n.keyBinding.addKeyboardHandler(T),n.on("changeSelection",w.destroy),n.on("changeSession",w.destroy),n.on("mouseup",w.destroy),n.on("change",w.destroy),n.session.widgetManager.addLineWidget(w),w.el.onmousedown=n.focus.bind(n),n.renderer.scrollCursorIntoView(null,.5,{bottom:w.el.offsetHeight})},S.importCssString(`
    .error_widget_wrapper {
        background: inherit;
        color: inherit;
        border:none
    }
    .error_widget {
        border-top: solid 2px;
        border-bottom: solid 2px;
        margin: 5px 0;
        padding: 10px 40px;
        white-space: pre-wrap;
    }
    .error_widget.ace_error, .error_widget_arrow.ace_error{
        border-color: #ff5a5a
    }
    .error_widget.ace_warning, .error_widget_arrow.ace_warning{
        border-color: #F1D817
    }
    .error_widget.ace_info, .error_widget_arrow.ace_info{
        border-color: #5a5a5a
    }
    .error_widget.ace_ok, .error_widget_arrow.ace_ok{
        border-color: #5aaa5a
    }
    .error_widget_arrow {
        position: absolute;
        border: solid 5px;
        border-top-color: transparent!important;
        border-right-color: transparent!important;
        border-left-color: transparent!important;
        top: -5px;
    }
`,"error_marker.css",!1)}),ace.define("ace/ace",["require","exports","module","ace/lib/dom","ace/range","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config","ace/loader_build"],function(g,I,z){g("./loader_build")(I);var D=g("./lib/dom"),S=g("./range").Range,A=g("./editor").Editor,s=g("./edit_session").EditSession,h=g("./undomanager").UndoManager,o=g("./virtual_renderer").VirtualRenderer;g("./worker/worker_client"),g("./keyboard/hash_handler"),g("./placeholder"),g("./multi_select"),g("./mode/folding/fold_mode"),g("./theme/textmate"),g("./ext/error_marker"),I.config=g("./config"),I.edit=function(n,i){if(typeof n=="string"){var t=n;if(n=document.getElementById(t),!n)throw new Error("ace.edit can't find div #"+t)}if(n&&n.env&&n.env.editor instanceof A)return n.env.editor;var e="";if(n&&/input|textarea/i.test(n.tagName)){var r=n;e=r.value,n=D.createElement("pre"),r.parentNode.replaceChild(n,r)}else n&&(e=n.textContent,n.innerHTML="");var a=I.createEditSession(e),u=new A(new o(n),a,i),p={document:a,editor:u,onResize:u.resize.bind(u,null)};return r&&(p.textarea=r),u.on("destroy",function(){p.editor.container.env=null}),u.container.env=u.env=p,u},I.createEditSession=function(n,i){var t=new s(n,i);return t.setUndoManager(new h),t},I.Range=S,I.Editor=A,I.EditSession=s,I.UndoManager=h,I.VirtualRenderer=o,I.version=I.config.version}),function(){ace.require(["ace/ace"],function(g){g&&(g.config.init(!0),g.define=ace.define);var I=function(){return this}();!I&&typeof window<"u"&&(I=window),!I&&typeof self<"u"&&(I=self),I.ace||(I.ace=g);for(var z in g)g.hasOwnProperty(z)&&(I.ace[z]=g[z]);I.ace.default=I.ace,ee&&(ee.exports=I.ace)})}()}(tr)),tr.exports}var Zn=Fi();const Ni=vr(Zn),On=ki({__proto__:null,default:Ni},[Zn]);var nr={exports:{}},Or;function Pi(){return Or||(Or=1,function(ee,X){ace.define("ace/mode/coffee_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(g,I,z){var D=g("../lib/oop"),S=g("./text_highlight_rules").TextHighlightRules;D.inherits(A,S);function A(){var s="[$A-Za-z_\\x7f-\\uffff][$\\w\\x7f-\\uffff]*",h="this|throw|then|try|typeof|super|switch|return|break|by|continue|catch|class|in|instanceof|is|isnt|if|else|extends|for|own|finally|function|while|when|new|no|not|delete|debugger|do|loop|of|off|or|on|unless|until|and|yes|yield|export|import|default",o="true|false|null|undefined|NaN|Infinity",n="case|const|function|var|void|with|enum|implements|interface|let|package|private|protected|public|static",i="Array|Boolean|Date|Function|Number|Object|RegExp|ReferenceError|String|Error|EvalError|InternalError|RangeError|ReferenceError|StopIteration|SyntaxError|TypeError|URIError|ArrayBuffer|Float32Array|Float64Array|Int16Array|Int32Array|Int8Array|Uint16Array|Uint32Array|Uint8Array|Uint8ClampedArray",t="Math|JSON|isNaN|isFinite|parseInt|parseFloat|encodeURI|encodeURIComponent|decodeURI|decodeURIComponent|String|",e="window|arguments|prototype|document",r=this.createKeywordMapper({keyword:h,"constant.language":o,"invalid.illegal":n,"language.support.class":i,"language.support.function":t,"variable.language":e},"identifier"),a={token:["paren.lparen","variable.parameter","paren.rparen","text","storage.type"],regex:/(?:(\()((?:"[^")]*?"|'[^')]*?'|\/[^\/)]*?\/|[^()"'\/])*?)(\))(\s*))?([\-=]>)/.source},u=/\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|[0-2][0-7]{0,2}|3[0-6][0-7]?|37[0-7]?|[4-7][0-7]?|.)/;this.$rules={start:[{token:"constant.numeric",regex:"(?:0x[\\da-fA-F]+|(?:\\d+(?:\\.\\d+)?|\\.\\d+)(?:[eE][+-]?\\d+)?)"},{stateName:"qdoc",token:"string",regex:"'''",next:[{token:"string",regex:"'''",next:"start"},{token:"constant.language.escape",regex:u},{defaultToken:"string"}]},{stateName:"qqdoc",token:"string",regex:'"""',next:[{token:"string",regex:'"""',next:"start"},{token:"paren.string",regex:"#{",push:"start"},{token:"constant.language.escape",regex:u},{defaultToken:"string"}]},{stateName:"qstring",token:"string",regex:"'",next:[{token:"string",regex:"'",next:"start"},{token:"constant.language.escape",regex:u},{defaultToken:"string"}]},{stateName:"qqstring",token:"string.start",regex:'"',next:[{token:"string.end",regex:'"',next:"start"},{token:"paren.string",regex:"#{",push:"start"},{token:"constant.language.escape",regex:u},{defaultToken:"string"}]},{stateName:"js",token:"string",regex:"`",next:[{token:"string",regex:"`",next:"start"},{token:"constant.language.escape",regex:u},{defaultToken:"string"}]},{regex:"[{}]",onMatch:function(p,M,w){return this.next="",p=="{"&&w.length?(w.unshift("start",M),"paren"):p=="}"&&w.length&&(w.shift(),this.next=w.shift()||"",this.next.indexOf("string")!=-1)?"paren.string":"paren"}},{token:"string.regex",regex:"///",next:"heregex"},{token:"string.regex",regex:/(?:\/(?![\s=])[^[\/\n\\]*(?:(?:\\[\s\S]|\[[^\]\n\\]*(?:\\[\s\S][^\]\n\\]*)*])[^[\/\n\\]*)*\/)(?:[imgy]{0,4})(?!\w)/},{token:"comment",regex:"###(?!#)",next:"comment"},{token:"comment",regex:"#.*"},{token:["punctuation.operator","text","identifier"],regex:"(\\.)(\\s*)("+n+")"},{token:"punctuation.operator",regex:"\\.{1,3}"},{token:["keyword","text","language.support.class","text","keyword","text","language.support.class"],regex:"(class)(\\s+)("+s+")(?:(\\s+)(extends)(\\s+)("+s+"))?"},{token:["entity.name.function","text","keyword.operator","text"].concat(a.token),regex:"("+s+")(\\s*)([=:])(\\s*)"+a.regex},a,{token:"variable",regex:"@(?:"+s+")?"},{token:r,regex:s},{token:"punctuation.operator",regex:"\\,|\\."},{token:"storage.type",regex:"[\\-=]>"},{token:"keyword.operator",regex:"(?:[-+*/%<>&|^!?=]=|>>>=?|\\-\\-|\\+\\+|::|&&=|\\|\\|=|<<=|>>=|\\?\\.|\\.{2,3}|[!*+-=><])"},{token:"paren.lparen",regex:"[({[]"},{token:"paren.rparen",regex:"[\\]})]"},{token:"text",regex:"\\s+"}],heregex:[{token:"string.regex",regex:".*?///[imgy]{0,4}",next:"start"},{token:"comment.regex",regex:"\\s+(?:#.*)?"},{token:"string.regex",regex:"\\S+"}],comment:[{token:"comment",regex:"###",next:"start"},{defaultToken:"comment"}]},this.normalizeRules()}I.CoffeeHighlightRules=A}),ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(g,I,z){var D=g("../range").Range,S=function(){};(function(){this.checkOutdent=function(A,s){return/^\s+$/.test(A)?/^\s*\}/.test(s):!1},this.autoOutdent=function(A,s){var h=A.getLine(s),o=h.match(/^(\s*\})/);if(!o)return 0;var n=o[1].length,i=A.findMatchingBracket({row:s,column:n});if(!i||i.row==s)return 0;var t=this.$getIndent(A.getLine(i.row));A.replace(new D(s,0,s,n-1),t)},this.$getIndent=function(A){return A.match(/^\s*/)[0]}}).call(S.prototype),I.MatchingBraceOutdent=S}),ace.define("ace/mode/folding/coffee",["require","exports","module","ace/lib/oop","ace/mode/folding/fold_mode","ace/range"],function(g,I,z){var D=g("../../lib/oop"),S=g("./fold_mode").FoldMode,A=g("../../range").Range,s=I.FoldMode=function(){};D.inherits(s,S),(function(){this.commentBlock=function(h,o){var n=/\S/,i=h.getLine(o),t=i.search(n);if(!(t==-1||i[t]!="#")){for(var e=i.length,r=h.getLength(),a=o,u=o;++o<r;){i=h.getLine(o);var p=i.search(n);if(p!=-1){if(i[p]!="#")break;u=o}}if(u>a){var M=h.getLine(u).length;return new A(a,e,u,M)}}},this.getFoldWidgetRange=function(h,o,n){var i=this.indentationBlock(h,n);if(i||(i=this.commentBlock(h,n),i))return i},this.getFoldWidget=function(h,o,n){var i=h.getLine(n),t=i.search(/\S/),e=h.getLine(n+1),r=h.getLine(n-1),a=r.search(/\S/),u=e.search(/\S/);if(t==-1)return h.foldWidgets[n-1]=a!=-1&&a<u?"start":"","";if(a==-1){if(t==u&&i[t]=="#"&&e[t]=="#")return h.foldWidgets[n-1]="",h.foldWidgets[n+1]="","start"}else if(a==t&&i[t]=="#"&&r[t]=="#"&&h.getLine(n-2).search(/\S/)==-1)return h.foldWidgets[n-1]="start",h.foldWidgets[n+1]="","";return a!=-1&&a<t?h.foldWidgets[n-1]="start":h.foldWidgets[n-1]="",t<u?"start":""}}).call(s.prototype)}),ace.define("ace/mode/coffee",["require","exports","module","ace/mode/coffee_highlight_rules","ace/mode/matching_brace_outdent","ace/mode/folding/coffee","ace/range","ace/mode/text","ace/worker/worker_client","ace/lib/oop"],function(g,I,z){var D=g("./coffee_highlight_rules").CoffeeHighlightRules,S=g("./matching_brace_outdent").MatchingBraceOutdent,A=g("./folding/coffee").FoldMode;g("../range").Range;var s=g("./text").Mode,h=g("../worker/worker_client").WorkerClient,o=g("../lib/oop");function n(){this.HighlightRules=D,this.$outdent=new S,this.foldingRules=new A}o.inherits(n,s),(function(){var i=/(?:[({[=:]|[-=]>|\b(?:else|try|(?:swi|ca)tch(?:\s+[$A-Za-z_\x7f-\uffff][$\w\x7f-\uffff]*)?|finally))\s*$|^\s*(else\b\s*)?(?:if|for|while|loop)\b(?!.*\bthen\b)/;this.lineCommentStart="#",this.blockComment={start:"###",end:"###"},this.getNextLineIndent=function(t,e,r){var a=this.$getIndent(e),u=this.getTokenizer().getLineTokens(e,t).tokens;return!(u.length&&u[u.length-1].type==="comment")&&t==="start"&&i.test(e)&&(a+=r),a},this.checkOutdent=function(t,e,r){return this.$outdent.checkOutdent(e,r)},this.autoOutdent=function(t,e,r){this.$outdent.autoOutdent(e,r)},this.createWorker=function(t){var e=new h(["ace"],"ace/mode/coffee_worker","Worker");return e.attachToDocument(t.getDocument()),e.on("annotate",function(r){t.setAnnotations(r.data)}),e.on("terminate",function(){t.clearAnnotations()}),e},this.$id="ace/mode/coffee",this.snippetFileId="ace/snippets/coffee"}).call(n.prototype),I.Mode=n}),function(){ace.require(["ace/mode/coffee"],function(g){ee&&(ee.exports=g)})}()}(nr)),nr.exports}Pi();var rr={exports:{}},xr;function Ui(){return xr||(xr=1,function(ee,X){ace.define("ace/theme/tomorrow-css",["require","exports","module"],function(g,I,z){z.exports=`.ace-tomorrow .ace_gutter {
  background: #f6f6f6;
  color: #4D4D4C
}

.ace-tomorrow .ace_print-margin {
  width: 1px;
  background: #f6f6f6
}

.ace-tomorrow {
  background-color: #FFFFFF;
  color: #4D4D4C
}

.ace-tomorrow .ace_cursor {
  color: #AEAFAD
}

.ace-tomorrow .ace_marker-layer .ace_selection {
  background: #D6D6D6
}

.ace-tomorrow.ace_multiselect .ace_selection.ace_start {
  box-shadow: 0 0 3px 0px #FFFFFF;
}

.ace-tomorrow .ace_marker-layer .ace_step {
  background: rgb(255, 255, 0)
}

.ace-tomorrow .ace_marker-layer .ace_bracket {
  margin: -1px 0 0 -1px;
  border: 1px solid #D1D1D1
}

.ace-tomorrow .ace_marker-layer .ace_active-line {
  background: #EFEFEF
}

.ace-tomorrow .ace_gutter-active-line {
  background-color : #dcdcdc
}

.ace-tomorrow .ace_marker-layer .ace_selected-word {
  border: 1px solid #D6D6D6
}

.ace-tomorrow .ace_invisible {
  color: #D1D1D1
}

.ace-tomorrow .ace_keyword,
.ace-tomorrow .ace_meta,
.ace-tomorrow .ace_storage,
.ace-tomorrow .ace_storage.ace_type,
.ace-tomorrow .ace_support.ace_type {
  color: #8959A8
}

.ace-tomorrow .ace_keyword.ace_operator {
  color: #3E999F
}

.ace-tomorrow .ace_constant.ace_character,
.ace-tomorrow .ace_constant.ace_language,
.ace-tomorrow .ace_constant.ace_numeric,
.ace-tomorrow .ace_keyword.ace_other.ace_unit,
.ace-tomorrow .ace_support.ace_constant,
.ace-tomorrow .ace_variable.ace_parameter {
  color: #F5871F
}

.ace-tomorrow .ace_constant.ace_other {
  color: #666969
}

.ace-tomorrow .ace_invalid {
  color: #FFFFFF;
  background-color: #C82829
}

.ace-tomorrow .ace_invalid.ace_deprecated {
  color: #FFFFFF;
  background-color: #8959A8
}

.ace-tomorrow .ace_fold {
  background-color: #4271AE;
  border-color: #4D4D4C
}

.ace-tomorrow .ace_entity.ace_name.ace_function,
.ace-tomorrow .ace_support.ace_function,
.ace-tomorrow .ace_variable {
  color: #4271AE
}

.ace-tomorrow .ace_support.ace_class,
.ace-tomorrow .ace_support.ace_type {
  color: #C99E00
}

.ace-tomorrow .ace_heading,
.ace-tomorrow .ace_markup.ace_heading,
.ace-tomorrow .ace_string {
  color: #718C00
}

.ace-tomorrow .ace_entity.ace_name.ace_tag,
.ace-tomorrow .ace_entity.ace_other.ace_attribute-name,
.ace-tomorrow .ace_meta.ace_tag,
.ace-tomorrow .ace_string.ace_regexp,
.ace-tomorrow .ace_variable {
  color: #C82829
}

.ace-tomorrow .ace_comment {
  color: #8E908C
}

.ace-tomorrow .ace_indent-guide {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bdu3f/BwAlfgctduB85QAAAABJRU5ErkJggg==) right repeat-y
}

.ace-tomorrow .ace_indent-guide-active {
  background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAAZSURBVHjaYvj///9/hivKyv8BAAAA//8DACLqBhbvk+/eAAAAAElFTkSuQmCC") right repeat-y;
} 
`}),ace.define("ace/theme/tomorrow",["require","exports","module","ace/theme/tomorrow-css","ace/lib/dom"],function(g,I,z){I.isDark=!1,I.cssClass="ace-tomorrow",I.cssText=g("./tomorrow-css");var D=g("../lib/dom");D.importCssString(I.cssText,I.cssClass,!1)}),function(){ace.require(["ace/theme/tomorrow"],function(g){ee&&(ee.exports=g)})}()}(rr)),rr.exports}Ui();var ir={exports:{}},Ir;function Hi(){return Ir||(Ir=1,function(ee,X){ace.define("ace/snippets",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event_emitter","ace/lib/lang","ace/range","ace/range_list","ace/keyboard/hash_handler","ace/tokenizer","ace/clipboard","ace/editor"],function(g,I,z){var D=g("./lib/dom"),S=g("./lib/oop"),A=g("./lib/event_emitter").EventEmitter,s=g("./lib/lang"),h=g("./range").Range,o=g("./range_list").RangeList,n=g("./keyboard/hash_handler").HashHandler,i=g("./tokenizer").Tokenizer,t=g("./clipboard"),e={CURRENT_WORD:function(d){return d.session.getTextRange(d.session.getWordRange())},SELECTION:function(d,_,T){var R=d.session.getTextRange();return T?R.replace(/\n\r?([ \t]*\S)/g,`
`+T+"$1"):R},CURRENT_LINE:function(d){return d.session.getLine(d.getCursorPosition().row)},PREV_LINE:function(d){return d.session.getLine(d.getCursorPosition().row-1)},LINE_INDEX:function(d){return d.getCursorPosition().row},LINE_NUMBER:function(d){return d.getCursorPosition().row+1},SOFT_TABS:function(d){return d.session.getUseSoftTabs()?"YES":"NO"},TAB_SIZE:function(d){return d.session.getTabSize()},CLIPBOARD:function(d){return t.getText&&t.getText()},FILENAME:function(d){return/[^/\\]*$/.exec(this.FILEPATH(d))[0]},FILENAME_BASE:function(d){return/[^/\\]*$/.exec(this.FILEPATH(d))[0].replace(/\.[^.]*$/,"")},DIRECTORY:function(d){return this.FILEPATH(d).replace(/[^/\\]*$/,"")},FILEPATH:function(d){return"/not implemented.txt"},WORKSPACE_NAME:function(){return"Unknown"},FULLNAME:function(){return"Unknown"},BLOCK_COMMENT_START:function(d){var _=d.session.$mode||{};return _.blockComment&&_.blockComment.start||""},BLOCK_COMMENT_END:function(d){var _=d.session.$mode||{};return _.blockComment&&_.blockComment.end||""},LINE_COMMENT:function(d){var _=d.session.$mode||{};return _.lineCommentStart||""},CURRENT_YEAR:r.bind(null,{year:"numeric"}),CURRENT_YEAR_SHORT:r.bind(null,{year:"2-digit"}),CURRENT_MONTH:r.bind(null,{month:"numeric"}),CURRENT_MONTH_NAME:r.bind(null,{month:"long"}),CURRENT_MONTH_NAME_SHORT:r.bind(null,{month:"short"}),CURRENT_DATE:r.bind(null,{day:"2-digit"}),CURRENT_DAY_NAME:r.bind(null,{weekday:"long"}),CURRENT_DAY_NAME_SHORT:r.bind(null,{weekday:"short"}),CURRENT_HOUR:r.bind(null,{hour:"2-digit",hour12:!1}),CURRENT_MINUTE:r.bind(null,{minute:"2-digit"}),CURRENT_SECOND:r.bind(null,{second:"2-digit"})};e.SELECTED_TEXT=e.SELECTION;function r(d){var _=new Date().toLocaleString("en-us",d);return _.length==1?"0"+_:_}var a=function(){function d(){this.snippetMap={},this.snippetNameMap={},this.variables=e}return d.prototype.getTokenizer=function(){return d.$tokenizer||this.createTokenizer()},d.prototype.createTokenizer=function(){function _($){return $=$.substr(1),/^\d+$/.test($)?[{tabstopId:parseInt($,10)}]:[{text:$}]}function T($){return"(?:[^\\\\"+$+"]|\\\\.)"}var R={regex:"/("+T("/")+"+)/",onMatch:function($,k,v){var b=v[0];return b.fmtString=!0,b.guard=$.slice(1,-1),b.flag="",""},next:"formatString"};return d.$tokenizer=new i({start:[{regex:/\\./,onMatch:function($,k,v){var b=$[1];return(b=="}"&&v.length||"`$\\".indexOf(b)!=-1)&&($=b),[$]}},{regex:/}/,onMatch:function($,k,v){return[v.length?v.shift():$]}},{regex:/\$(?:\d+|\w+)/,onMatch:_},{regex:/\$\{[\dA-Z_a-z]+/,onMatch:function($,k,v){var b=_($.substr(1));return v.unshift(b[0]),b},next:"snippetVar"},{regex:/\n/,token:"newline",merge:!1}],snippetVar:[{regex:"\\|"+T("\\|")+"*\\|",onMatch:function($,k,v){var b=$.slice(1,-1).replace(/\\[,|\\]|,/g,function(l){return l.length==2?l[1]:"\0"}).split("\0").map(function(l){return{value:l}});return v[0].choices=b,[b[0]]},next:"start"},R,{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"start"}],formatString:[{regex:/:/,onMatch:function($,k,v){return v.length&&v[0].expectElse?(v[0].expectElse=!1,v[0].ifEnd={elseEnd:v[0]},[v[0].ifEnd]):":"}},{regex:/\\./,onMatch:function($,k,v){var b=$[1];return b=="}"&&v.length||"`$\\".indexOf(b)!=-1?$=b:b=="n"?$=`
`:b=="t"?$="	":"ulULE".indexOf(b)!=-1&&($={changeCase:b,local:b>"a"}),[$]}},{regex:"/\\w*}",onMatch:function($,k,v){var b=v.shift();return b&&(b.flag=$.slice(1,-1)),this.next=b&&b.tabstopId?"start":"",[b||$]},next:"start"},{regex:/\$(?:\d+|\w+)/,onMatch:function($,k,v){return[{text:$.slice(1)}]}},{regex:/\${\w+/,onMatch:function($,k,v){var b={text:$.slice(2)};return v.unshift(b),[b]},next:"formatStringVar"},{regex:/\n/,token:"newline",merge:!1},{regex:/}/,onMatch:function($,k,v){var b=v.shift();return this.next=b&&b.tabstopId?"start":"",[b||$]},next:"start"}],formatStringVar:[{regex:/:\/\w+}/,onMatch:function($,k,v){var b=v[0];return b.formatFunction=$.slice(2,-1),[v.shift()]},next:"formatString"},R,{regex:/:[\?\-+]?/,onMatch:function($,k,v){$[1]=="+"&&(v[0].ifEnd=v[0]),$[1]=="?"&&(v[0].expectElse=!0)},next:"formatString"},{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"formatString"}]}),d.$tokenizer},d.prototype.tokenizeTmSnippet=function(_,T){return this.getTokenizer().getLineTokens(_,T).tokens.map(function(R){return R.value||R})},d.prototype.getVariableValue=function(_,T,R){if(/^\d+$/.test(T))return(this.variables.__||{})[T]||"";if(/^[A-Z]\d+$/.test(T))return(this.variables[T[0]+"__"]||{})[T.substr(1)]||"";if(T=T.replace(/^TM_/,""),!this.variables.hasOwnProperty(T))return"";var $=this.variables[T];return typeof $=="function"&&($=this.variables[T](_,T,R)),$??""},d.prototype.tmStrFormat=function(_,T,R){if(!T.fmt)return _;var $=T.flag||"",k=T.guard;k=new RegExp(k,$.replace(/[^gim]/g,""));var v=typeof T.fmt=="string"?this.tokenizeTmSnippet(T.fmt,"formatString"):T.fmt,b=this,l=_.replace(k,function(){var C=b.variables.__;b.variables.__=[].slice.call(arguments);for(var O=b.resolveVariables(v,R),N="E",G=0;G<O.length;G++){var W=O[G];if(typeof W=="object")if(O[G]="",W.changeCase&&W.local){var K=O[G+1];K&&typeof K=="string"&&(W.changeCase=="u"?O[G]=K[0].toUpperCase():O[G]=K[0].toLowerCase(),O[G+1]=K.substr(1))}else W.changeCase&&(N=W.changeCase);else N=="U"?O[G]=W.toUpperCase():N=="L"&&(O[G]=W.toLowerCase())}return b.variables.__=C,O.join("")});return l},d.prototype.tmFormatFunction=function(_,T,R){return T.formatFunction=="upcase"?_.toUpperCase():T.formatFunction=="downcase"?_.toLowerCase():_},d.prototype.resolveVariables=function(_,T){for(var R=[],$="",k=!0,v=0;v<_.length;v++){var b=_[v];if(typeof b=="string"){R.push(b),b==`
`?(k=!0,$=""):k&&($=/^\t*/.exec(b)[0],k=/\S/.test(b));continue}if(b){if(k=!1,b.fmtString){var l=_.indexOf(b,v+1);l==-1&&(l=_.length),b.fmt=_.slice(v+1,l),v=l}if(b.text){var C=this.getVariableValue(T,b.text,$)+"";b.fmtString&&(C=this.tmStrFormat(C,b,T)),b.formatFunction&&(C=this.tmFormatFunction(C,b,T)),C&&!b.ifEnd?(R.push(C),O(b)):!C&&b.ifEnd&&O(b.ifEnd)}else b.elseEnd?O(b.elseEnd):(b.tabstopId!=null||b.changeCase!=null)&&R.push(b)}}function O(N){var G=_.indexOf(N,v+1);G!=-1&&(v=G)}return R},d.prototype.getDisplayTextForSnippet=function(_,T){var R=u.call(this,_,T);return R.text},d.prototype.insertSnippetForSelection=function(_,T,R){R===void 0&&(R={});var $=u.call(this,_,T,R),k=_.getSelectionRange(),v=_.session.replace(k,$.text),b=new p(_),l=_.inVirtualSelectionMode&&_.selection.index;b.addTabstops($.tabstops,k.start,v,l)},d.prototype.insertSnippet=function(_,T,R){R===void 0&&(R={});var $=this;if(_.inVirtualSelectionMode)return $.insertSnippetForSelection(_,T,R);_.forEachSelection(function(){$.insertSnippetForSelection(_,T,R)},null,{keepOrder:!0}),_.tabstopManager&&_.tabstopManager.tabNext()},d.prototype.$getScope=function(_){var T=_.session.$mode.$id||"";if(T=T.split("/").pop(),T==="html"||T==="php"){T==="php"&&!_.session.$mode.inlinePhp&&(T="html");var R=_.getCursorPosition(),$=_.session.getState(R.row);typeof $=="object"&&($=$[0]),$.substring&&($.substring(0,3)=="js-"?T="javascript":$.substring(0,4)=="css-"?T="css":$.substring(0,4)=="php-"&&(T="php"))}return T},d.prototype.getActiveScopes=function(_){var T=this.$getScope(_),R=[T],$=this.snippetMap;return $[T]&&$[T].includeScopes&&R.push.apply(R,$[T].includeScopes),R.push("_"),R},d.prototype.expandWithTab=function(_,T){var R=this,$=_.forEachSelection(function(){return R.expandSnippetForSelection(_,T)},null,{keepOrder:!0});return $&&_.tabstopManager&&_.tabstopManager.tabNext(),$},d.prototype.expandSnippetForSelection=function(_,T){var R=_.getCursorPosition(),$=_.session.getLine(R.row),k=$.substring(0,R.column),v=$.substr(R.column),b=this.snippetMap,l;return this.getActiveScopes(_).some(function(C){var O=b[C];return O&&(l=this.findMatchingSnippet(O,k,v)),!!l},this),l?(T&&T.dryRun||(_.session.doc.removeInLine(R.row,R.column-l.replaceBefore.length,R.column+l.replaceAfter.length),this.variables.M__=l.matchBefore,this.variables.T__=l.matchAfter,this.insertSnippetForSelection(_,l.content),this.variables.M__=this.variables.T__=null),!0):!1},d.prototype.findMatchingSnippet=function(_,T,R){for(var $=_.length;$--;){var k=_[$];if(!(k.startRe&&!k.startRe.test(T))&&!(k.endRe&&!k.endRe.test(R))&&!(!k.startRe&&!k.endRe))return k.matchBefore=k.startRe?k.startRe.exec(T):[""],k.matchAfter=k.endRe?k.endRe.exec(R):[""],k.replaceBefore=k.triggerRe?k.triggerRe.exec(T)[0]:"",k.replaceAfter=k.endTriggerRe?k.endTriggerRe.exec(R)[0]:"",k}},d.prototype.register=function(_,T){var R=this.snippetMap,$=this.snippetNameMap,k=this;_||(_=[]);function v(C){return C&&!/^\^?\(.*\)\$?$|^\\b$/.test(C)&&(C="(?:"+C+")"),C||""}function b(C,O,N){return C=v(C),O=v(O),C=O+C,C&&C[C.length-1]!="$"&&(C=C+"$"),new RegExp(C)}function l(C){C.scope||(C.scope=T||"_"),T=C.scope,R[T]||(R[T]=[],$[T]={});var O=$[T];if(C.name){var N=O[C.name];N&&k.unregister(N),O[C.name]=C}R[T].push(C),C.prefix&&(C.tabTrigger=C.prefix),!C.content&&C.body&&(C.content=Array.isArray(C.body)?C.body.join(`
`):C.body),C.tabTrigger&&!C.trigger&&(!C.guard&&/^\w/.test(C.tabTrigger)&&(C.guard="\\b"),C.trigger=s.escapeRegExp(C.tabTrigger)),!(!C.trigger&&!C.guard&&!C.endTrigger&&!C.endGuard)&&(C.startRe=b(C.trigger,C.guard),C.triggerRe=new RegExp(C.trigger),C.endRe=b(C.endTrigger,C.endGuard),C.endTriggerRe=new RegExp(C.endTrigger))}Array.isArray(_)?_.forEach(l):Object.keys(_).forEach(function(C){l(_[C])}),this._signal("registerSnippets",{scope:T})},d.prototype.unregister=function(_,T){var R=this.snippetMap,$=this.snippetNameMap;function k(v){var b=$[v.scope||T];if(b&&b[v.name]){delete b[v.name];var l=R[v.scope||T],C=l&&l.indexOf(v);C>=0&&l.splice(C,1)}}_.content?k(_):Array.isArray(_)&&_.forEach(k)},d.prototype.parseSnippetFile=function(_){_=_.replace(/\r/g,"");for(var T=[],R={},$=/^#.*|^({[\s\S]*})\s*$|^(\S+) (.*)$|^((?:\n*\t.*)+)/gm,k;k=$.exec(_);){if(k[1])try{R=JSON.parse(k[1]),T.push(R)}catch{}if(k[4])R.content=k[4].replace(/^\t/gm,""),T.push(R),R={};else{var v=k[2],b=k[3];if(v=="regex"){var l=/\/((?:[^\/\\]|\\.)*)|$/g;R.guard=l.exec(b)[1],R.trigger=l.exec(b)[1],R.endTrigger=l.exec(b)[1],R.endGuard=l.exec(b)[1]}else v=="snippet"?(R.tabTrigger=b.match(/^\S*/)[0],R.name||(R.name=b)):v&&(R[v]=b)}}return T},d.prototype.getSnippetByName=function(_,T){var R=this.snippetNameMap,$;return this.getActiveScopes(T).some(function(k){var v=R[k];return v&&($=v[_]),!!$},this),$},d}();S.implement(a.prototype,A);var u=function(d,_,T){T===void 0&&(T={});var R=d.getCursorPosition(),$=d.session.getLine(R.row),k=d.session.getTabString(),v=$.match(/^\s*/)[0];R.column<v.length&&(v=v.slice(0,R.column)),_=_.replace(/\r/g,"");var b=this.tokenizeTmSnippet(_);b=this.resolveVariables(b,d),b=b.map(function(ue){return ue==`
`&&!T.excludeExtraIndent?ue+v:typeof ue=="string"?ue.replace(/\t/g,k):ue});var l=[];b.forEach(function(ue,ge){if(typeof ue=="object"){var me=ue.tabstopId,ve=l[me];if(ve||(ve=l[me]=[],ve.index=me,ve.value="",ve.parents={}),ve.indexOf(ue)===-1){ue.choices&&!ve.choices&&(ve.choices=ue.choices),ve.push(ue);var Ce=b.indexOf(ue,ge+1);if(Ce!==-1){var Me=b.slice(ge+1,Ce),Ie=Me.some(function(ze){return typeof ze=="object"});Ie&&!ve.value?ve.value=Me:Me.length&&(!ve.value||typeof ve.value!="string")&&(ve.value=Me.join(""))}}}}),l.forEach(function(ue){ue.length=0});var C={};function O(ue){for(var ge=[],me=0;me<ue.length;me++){var ve=ue[me];if(typeof ve=="object"){if(C[ve.tabstopId])continue;var Ce=ue.lastIndexOf(ve,me-1);ve=ge[Ce]||{tabstopId:ve.tabstopId}}ge[me]=ve}return ge}for(var N=0;N<b.length;N++){var G=b[N];if(typeof G=="object"){var W=G.tabstopId,K=l[W],V=b.indexOf(G,N+1);if(C[W]){C[W]===G&&(delete C[W],Object.keys(C).forEach(function(ue){K.parents[ue]=!0}));continue}C[W]=G;var Y=K.value;typeof Y!="string"?Y=O(Y):G.fmt&&(Y=this.tmStrFormat(Y,G,d)),b.splice.apply(b,[N+1,Math.max(0,V-N)].concat(Y,G)),K.indexOf(G)===-1&&K.push(G)}}var re=0,Q=0,ie="";return b.forEach(function(ue){if(typeof ue=="string"){var ge=ue.split(`
`);ge.length>1?(Q=ge[ge.length-1].length,re+=ge.length-1):Q+=ue.length,ie+=ue}else ue&&(ue.start?ue.end={row:re,column:Q}:ue.start={row:re,column:Q})}),{text:ie,tabstops:l,tokens:b}},p=function(){function d(_){if(this.index=0,this.ranges=[],this.tabstops=[],_.tabstopManager)return _.tabstopManager;_.tabstopManager=this,this.$onChange=this.onChange.bind(this),this.$onChangeSelection=s.delayedCall(this.onChangeSelection.bind(this)).schedule,this.$onChangeSession=this.onChangeSession.bind(this),this.$onAfterExec=this.onAfterExec.bind(this),this.attach(_)}return d.prototype.attach=function(_){this.$openTabstops=null,this.selectedTabstop=null,this.editor=_,this.session=_.session,this.editor.on("change",this.$onChange),this.editor.on("changeSelection",this.$onChangeSelection),this.editor.on("changeSession",this.$onChangeSession),this.editor.commands.on("afterExec",this.$onAfterExec),this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)},d.prototype.detach=function(){this.tabstops.forEach(this.removeTabstopMarkers,this),this.ranges.length=0,this.tabstops.length=0,this.selectedTabstop=null,this.editor.off("change",this.$onChange),this.editor.off("changeSelection",this.$onChangeSelection),this.editor.off("changeSession",this.$onChangeSession),this.editor.commands.off("afterExec",this.$onAfterExec),this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.tabstopManager=null,this.session=null,this.editor=null},d.prototype.onChange=function(_){for(var T=_.action[0]=="r",R=this.selectedTabstop||{},$=R.parents||{},k=this.tabstops.slice(),v=0;v<k.length;v++){var b=k[v],l=b==R||$[b.index];if(b.rangeList.$bias=l?0:1,_.action=="remove"&&b!==R){var C=b.parents&&b.parents[R.index],O=b.rangeList.pointIndex(_.start,C);O=O<0?-O-1:O+1;var N=b.rangeList.pointIndex(_.end,C);N=N<0?-N-1:N-1;for(var G=b.rangeList.ranges.slice(O,N),W=0;W<G.length;W++)this.removeRange(G[W])}b.rangeList.$onChange(_)}var K=this.session;!this.$inChange&&T&&K.getLength()==1&&!K.getValue()&&this.detach()},d.prototype.updateLinkedFields=function(){var _=this.selectedTabstop;if(!(!_||!_.hasLinkedRanges||!_.firstNonLinked)){this.$inChange=!0;for(var T=this.session,R=T.getTextRange(_.firstNonLinked),$=0;$<_.length;$++){var k=_[$];if(k.linked){var v=k.original,b=I.snippetManager.tmStrFormat(R,v,this.editor);T.replace(k,b)}}this.$inChange=!1}},d.prototype.onAfterExec=function(_){_.command&&!_.command.readOnly&&this.updateLinkedFields()},d.prototype.onChangeSelection=function(){if(this.editor){for(var _=this.editor.selection.lead,T=this.editor.selection.anchor,R=this.editor.selection.isEmpty(),$=0;$<this.ranges.length;$++)if(!this.ranges[$].linked){var k=this.ranges[$].contains(_.row,_.column),v=R||this.ranges[$].contains(T.row,T.column);if(k&&v)return}this.detach()}},d.prototype.onChangeSession=function(){this.detach()},d.prototype.tabNext=function(_){var T=this.tabstops.length,R=this.index+(_||1);R=Math.min(Math.max(R,1),T),R==T&&(R=0),this.selectTabstop(R),this.updateTabstopMarkers(),R===0&&this.detach()},d.prototype.selectTabstop=function(_){this.$openTabstops=null;var T=this.tabstops[this.index];if(T&&this.addTabstopMarkers(T),this.index=_,T=this.tabstops[this.index],!(!T||!T.length)){this.selectedTabstop=T;var R=T.firstNonLinked||T;if(T.choices&&(R.cursor=R.start),this.editor.inVirtualSelectionMode)this.editor.selection.fromOrientedRange(R);else{var $=this.editor.multiSelect;$.toSingleRange(R);for(var k=0;k<T.length;k++)T.hasLinkedRanges&&T[k].linked||$.addRange(T[k].clone(),!0)}this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler),this.selectedTabstop&&this.selectedTabstop.choices&&this.editor.execCommand("startAutocomplete",{matches:this.selectedTabstop.choices})}},d.prototype.addTabstops=function(_,T,R){var $=this.useLink||!this.editor.getOption("enableMultiselect");if(this.$openTabstops||(this.$openTabstops=[]),!_[0]){var k=h.fromPoints(R,R);w(k.start,T),w(k.end,T),_[0]=[k],_[0].index=0}var v=this.index,b=[v+1,0],l=this.ranges,C=this.snippetId=(this.snippetId||0)+1;_.forEach(function(O,N){var G=this.$openTabstops[N]||O;G.snippetId=C;for(var W=0;W<O.length;W++){var K=O[W],V=h.fromPoints(K.start,K.end||K.start);M(V.start,T),M(V.end,T),V.original=K,V.tabstop=G,l.push(V),G!=O?G.unshift(V):G[W]=V,K.fmtString||G.firstNonLinked&&$?(V.linked=!0,G.hasLinkedRanges=!0):G.firstNonLinked||(G.firstNonLinked=V)}G.firstNonLinked||(G.hasLinkedRanges=!1),G===O&&(b.push(G),this.$openTabstops[N]=G),this.addTabstopMarkers(G),G.rangeList=G.rangeList||new o,G.rangeList.$bias=0,G.rangeList.addList(G)},this),b.length>2&&(this.tabstops.length&&b.push(b.splice(2,1)[0]),this.tabstops.splice.apply(this.tabstops,b))},d.prototype.addTabstopMarkers=function(_){var T=this.session;_.forEach(function(R){R.markerId||(R.markerId=T.addMarker(R,"ace_snippet-marker","text"))})},d.prototype.removeTabstopMarkers=function(_){var T=this.session;_.forEach(function(R){T.removeMarker(R.markerId),R.markerId=null})},d.prototype.updateTabstopMarkers=function(){if(this.selectedTabstop){var _=this.selectedTabstop.snippetId;this.selectedTabstop.index===0&&_--,this.tabstops.forEach(function(T){T.snippetId===_?this.addTabstopMarkers(T):this.removeTabstopMarkers(T)},this)}},d.prototype.removeRange=function(_){var T=_.tabstop.indexOf(_);T!=-1&&_.tabstop.splice(T,1),T=this.ranges.indexOf(_),T!=-1&&this.ranges.splice(T,1),T=_.tabstop.rangeList.ranges.indexOf(_),T!=-1&&_.tabstop.splice(T,1),this.session.removeMarker(_.markerId),_.tabstop.length||(T=this.tabstops.indexOf(_.tabstop),T!=-1&&this.tabstops.splice(T,1),this.tabstops.length||this.detach())},d}();p.prototype.keyboardHandler=new n,p.prototype.keyboardHandler.bindKeys({Tab:function(d){I.snippetManager&&I.snippetManager.expandWithTab(d)||(d.tabstopManager.tabNext(1),d.renderer.scrollCursorIntoView())},"Shift-Tab":function(d){d.tabstopManager.tabNext(-1),d.renderer.scrollCursorIntoView()},Esc:function(d){d.tabstopManager.detach()}});var M=function(d,_){d.row==0&&(d.column+=_.column),d.row+=_.row},w=function(d,_){d.row==_.row&&(d.column-=_.column),d.row-=_.row};D.importCssString(`
.ace_snippet-marker {
    -moz-box-sizing: border-box;
    box-sizing: border-box;
    background: rgba(194, 193, 208, 0.09);
    border: 1px dotted rgba(211, 208, 235, 0.62);
    position: absolute;
}`,"snippets.css",!1),I.snippetManager=new a;var m=g("./editor").Editor;(function(){this.insertSnippet=function(d,_){return I.snippetManager.insertSnippet(this,d,_)},this.expandSnippet=function(d){return I.snippetManager.expandWithTab(this,d)}}).call(m.prototype)}),ace.define("ace/autocomplete/popup",["require","exports","module","ace/virtual_renderer","ace/editor","ace/range","ace/lib/event","ace/lib/lang","ace/lib/dom","ace/config","ace/lib/useragent"],function(g,I,z){var D=g("../virtual_renderer").VirtualRenderer,S=g("../editor").Editor,A=g("../range").Range,s=g("../lib/event"),h=g("../lib/lang"),o=g("../lib/dom"),n=g("../config").nls,i=g("./../lib/useragent"),t=function(M){return"suggest-aria-id:".concat(M)},e=i.isSafari?"menu":"listbox",r=i.isSafari?"menuitem":"option",a=i.isSafari?"aria-current":"aria-selected",u=function(M){var w=new D(M);w.$maxLines=4;var m=new S(w);return m.setHighlightActiveLine(!1),m.setShowPrintMargin(!1),m.renderer.setShowGutter(!1),m.renderer.setHighlightGutterLine(!1),m.$mouseHandler.$focusTimeout=0,m.$highlightTagPending=!0,m},p=function(){function M(w){var m=o.createElement("div"),d=u(m);w&&w.appendChild(m),m.style.display="none",d.renderer.content.style.cursor="default",d.renderer.setStyle("ace_autocomplete"),d.renderer.$textLayer.element.setAttribute("role",e),d.renderer.$textLayer.element.setAttribute("aria-roledescription",n("autocomplete.popup.aria-roledescription","Autocomplete suggestions")),d.renderer.$textLayer.element.setAttribute("aria-label",n("autocomplete.popup.aria-label","Autocomplete suggestions")),d.renderer.textarea.setAttribute("aria-hidden","true"),d.setOption("displayIndentGuides",!1),d.setOption("dragDelay",150);var _=function(){};d.focus=_,d.$isFocused=!0,d.renderer.$cursorLayer.restartTimer=_,d.renderer.$cursorLayer.element.style.opacity="0",d.renderer.$maxLines=8,d.renderer.$keepTextAreaAtCursor=!1,d.setHighlightActiveLine(!1),d.session.highlight(""),d.session.$searchHighlight.clazz="ace_highlight-marker",d.on("mousedown",function(l){var C=l.getDocumentPosition();d.selection.moveToPosition(C),$.start.row=$.end.row=C.row,l.stop()});var T,R=new A(-1,0,-1,1/0),$=new A(-1,0,-1,1/0);$.id=d.session.addMarker($,"ace_active-line","fullLine"),d.setSelectOnHover=function(l){l?R.id&&(d.session.removeMarker(R.id),R.id=null):R.id=d.session.addMarker(R,"ace_line-hover","fullLine")},d.setSelectOnHover(!1),d.on("mousemove",function(l){if(!T){T=l;return}if(!(T.x==l.x&&T.y==l.y)){T=l,T.scrollTop=d.renderer.scrollTop,d.isMouseOver=!0;var C=T.getDocumentPosition().row;R.start.row!=C&&(R.id||d.setRow(C),v(C))}}),d.renderer.on("beforeRender",function(){if(T&&R.start.row!=-1){T.$pos=null;var l=T.getDocumentPosition().row;R.id||d.setRow(l),v(l,!0)}}),d.renderer.on("afterRender",function(){var l=d.getRow(),C=d.renderer.$textLayer,O=C.element.childNodes[l-C.config.firstRow],N=document.activeElement;if(O!==d.selectedNode&&d.selectedNode&&(o.removeCssClass(d.selectedNode,"ace_selected"),N.removeAttribute("aria-activedescendant"),d.selectedNode.removeAttribute(a),d.selectedNode.removeAttribute("id")),d.selectedNode=O,O){o.addCssClass(O,"ace_selected");var G=t(l);O.id=G,C.element.setAttribute("aria-activedescendant",G),N.setAttribute("aria-activedescendant",G),O.setAttribute("role",r),O.setAttribute("aria-roledescription",n("autocomplete.popup.item.aria-roledescription","item")),O.setAttribute("aria-label",d.getData(l).caption||d.getData(l).value),O.setAttribute("aria-setsize",d.data.length),O.setAttribute("aria-posinset",l+1),O.setAttribute("aria-describedby","doc-tooltip"),O.setAttribute(a,"true")}});var k=function(){v(-1)},v=function(l,C){l!==R.start.row&&(R.start.row=R.end.row=l,C||d.session._emit("changeBackMarker"),d._emit("changeHoverMarker"))};d.getHoveredRow=function(){return R.start.row},s.addListener(d.container,"mouseout",function(){d.isMouseOver=!1,k()}),d.on("hide",k),d.on("changeSelection",k),d.session.doc.getLength=function(){return d.data.length},d.session.doc.getLine=function(l){var C=d.data[l];return typeof C=="string"?C:C&&C.value||""};var b=d.session.bgTokenizer;return b.$tokenizeRow=function(l){var C=d.data[l],O=[];if(!C)return O;typeof C=="string"&&(C={value:C});var N=C.caption||C.value||C.name;function G(ue,ge){ue&&O.push({type:(C.className||"")+(ge||""),value:ue})}for(var W=N.toLowerCase(),K=(d.filterText||"").toLowerCase(),V=0,Y=0,re=0;re<=K.length;re++)if(re!=Y&&(C.matchMask&1<<re||re==K.length)){var Q=K.slice(Y,re);Y=re;var ie=W.indexOf(Q,V);if(ie==-1)continue;G(N.slice(V,ie),""),V=ie+Q.length,G(N.slice(ie,V),"completion-highlight")}return G(N.slice(V,N.length),""),O.push({type:"completion-spacer",value:" "}),C.meta&&O.push({type:"completion-meta",value:C.meta}),C.message&&O.push({type:"completion-message",value:C.message}),O},b.$updateOnChange=_,b.start=_,d.session.$computeWidth=function(){return this.screenWidth=0},d.isOpen=!1,d.isTopdown=!1,d.autoSelect=!0,d.filterText="",d.isMouseOver=!1,d.data=[],d.setData=function(l,C){d.filterText=C||"",d.setValue(h.stringRepeat(`
`,l.length),-1),d.data=l||[],d.setRow(0)},d.getData=function(l){return d.data[l]},d.getRow=function(){return $.start.row},d.setRow=function(l){l=Math.max(this.autoSelect?0:-1,Math.min(this.data.length-1,l)),$.start.row!=l&&(d.selection.clearSelection(),$.start.row=$.end.row=l||0,d.session._emit("changeBackMarker"),d.moveCursorTo(l||0,0),d.isOpen&&d._signal("select"))},d.on("changeSelection",function(){d.isOpen&&d.setRow(d.selection.lead.row),d.renderer.scrollCursorIntoView()}),d.hide=function(){this.container.style.display="none",d.anchorPos=null,d.anchor=null,d.isOpen&&(d.isOpen=!1,this._signal("hide"))},d.tryShow=function(l,C,O,N){if(!N&&d.isOpen&&d.anchorPos&&d.anchor&&d.anchorPos.top===l.top&&d.anchorPos.left===l.left&&d.anchor===O)return!0;var G=this.container,W=window.innerHeight,K=window.innerWidth,V=this.renderer,Y=V.$maxLines*C*1.4,re={top:0,bottom:0},Q=W-l.top-3*this.$borderSize-C,ie=l.top-3*this.$borderSize;O||(ie<=Q||Q>=Y?O="bottom":O="top"),O==="top"?(re.bottom=l.top-this.$borderSize,re.top=re.bottom-Y):O==="bottom"&&(re.top=l.top+C+this.$borderSize,re.bottom=re.top+Y);var ue=re.top>=0&&re.bottom<=W;if(!N&&!ue)return!1;ue?V.$maxPixelHeight=null:O==="top"?V.$maxPixelHeight=ie:V.$maxPixelHeight=Q,O==="top"?(G.style.top="",G.style.bottom=W-re.bottom+"px",d.isTopdown=!1):(G.style.top=re.top+"px",G.style.bottom="",d.isTopdown=!0),G.style.display="";var ge=l.left;return ge+G.offsetWidth>K&&(ge=K-G.offsetWidth),G.style.left=ge+"px",G.style.right="",d.isOpen||(d.isOpen=!0,this._signal("show"),T=null),d.anchorPos=l,d.anchor=O,!0},d.show=function(l,C,O){this.tryShow(l,C,O?"bottom":void 0,!0)},d.goTo=function(l){var C=this.getRow(),O=this.session.getLength()-1;switch(l){case"up":C=C<=0?O:C-1;break;case"down":C=C>=O?-1:C+1;break;case"start":C=0;break;case"end":C=O;break}this.setRow(C)},d.getTextLeftOffset=function(){return this.$borderSize+this.renderer.$padding+this.$imageSize},d.$imageSize=0,d.$borderSize=1,d}return M}();o.importCssString(`
.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {
    background-color: #CAD6FA;
    z-index: 1;
}
.ace_dark.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {
    background-color: #3a674e;
}
.ace_editor.ace_autocomplete .ace_line-hover {
    border: 1px solid #abbffe;
    margin-top: -1px;
    background: rgba(233,233,253,0.4);
    position: absolute;
    z-index: 2;
}
.ace_dark.ace_editor.ace_autocomplete .ace_line-hover {
    border: 1px solid rgba(109, 150, 13, 0.8);
    background: rgba(58, 103, 78, 0.62);
}
.ace_completion-meta {
    opacity: 0.5;
    margin-left: 0.9em;
}
.ace_completion-message {
    margin-left: 0.9em;
    color: blue;
}
.ace_editor.ace_autocomplete .ace_completion-highlight{
    color: #2d69c7;
}
.ace_dark.ace_editor.ace_autocomplete .ace_completion-highlight{
    color: #93ca12;
}
.ace_editor.ace_autocomplete {
    width: 300px;
    z-index: 200000;
    border: 1px lightgray solid;
    position: fixed;
    box-shadow: 2px 3px 5px rgba(0,0,0,.2);
    line-height: 1.4;
    background: #fefefe;
    color: #111;
}
.ace_dark.ace_editor.ace_autocomplete {
    border: 1px #484747 solid;
    box-shadow: 2px 3px 5px rgba(0, 0, 0, 0.51);
    line-height: 1.4;
    background: #25282c;
    color: #c1c1c1;
}
.ace_autocomplete .ace_text-layer  {
    width: calc(100% - 8px);
}
.ace_autocomplete .ace_line {
    display: flex;
    align-items: center;
}
.ace_autocomplete .ace_line > * {
    min-width: 0;
    flex: 0 0 auto;
}
.ace_autocomplete .ace_line .ace_ {
    flex: 0 1 auto;
    overflow: hidden;
    text-overflow: ellipsis;
}
.ace_autocomplete .ace_completion-spacer {
    flex: 1;
}
.ace_autocomplete.ace_loading:after  {
    content: "";
    position: absolute;
    top: 0px;
    height: 2px;
    width: 8%;
    background: blue;
    z-index: 100;
    animation: ace_progress 3s infinite linear;
    animation-delay: 300ms;
    transform: translateX(-100%) scaleX(1);
}
@keyframes ace_progress {
    0% { transform: translateX(-100%) scaleX(1) }
    50% { transform: translateX(625%) scaleX(2) } 
    100% { transform: translateX(1500%) scaleX(3) } 
}
@media (prefers-reduced-motion) {
    .ace_autocomplete.ace_loading:after {
        transform: translateX(625%) scaleX(2);
        animation: none;
     }
}
`,"autocompletion.css",!1),I.AcePopup=p,I.$singleLineEditor=u,I.getAriaId=t}),ace.define("ace/autocomplete/inline_screenreader",["require","exports","module"],function(g,I,z){var D=function(){function S(A){this.editor=A,this.screenReaderDiv=document.createElement("div"),this.screenReaderDiv.classList.add("ace_screenreader-only"),this.editor.container.appendChild(this.screenReaderDiv)}return S.prototype.setScreenReaderContent=function(A){for(!this.popup&&this.editor.completer&&this.editor.completer.popup&&(this.popup=this.editor.completer.popup,this.popup.renderer.on("afterRender",(function(){var h=this.popup.getRow(),o=this.popup.renderer.$textLayer,n=o.element.childNodes[h-o.config.firstRow];if(n){for(var i="doc-tooltip ",t=0;t<this._lines.length;t++)i+="ace-inline-screenreader-line-".concat(t," ");n.setAttribute("aria-describedby",i)}}).bind(this)));this.screenReaderDiv.firstChild;)this.screenReaderDiv.removeChild(this.screenReaderDiv.firstChild);this._lines=A.split(/\r\n|\r|\n/);var s=this.createCodeBlock();this.screenReaderDiv.appendChild(s)},S.prototype.destroy=function(){this.screenReaderDiv.remove()},S.prototype.createCodeBlock=function(){var A=document.createElement("pre");A.setAttribute("id","ace-inline-screenreader");for(var s=0;s<this._lines.length;s++){var h=document.createElement("code");h.setAttribute("id","ace-inline-screenreader-line-".concat(s));var o=document.createTextNode(this._lines[s]);h.appendChild(o),A.appendChild(h)}return A},S}();I.AceInlineScreenReader=D}),ace.define("ace/autocomplete/inline",["require","exports","module","ace/snippets","ace/autocomplete/inline_screenreader"],function(g,I,z){var D=g("../snippets").snippetManager,S=g("./inline_screenreader").AceInlineScreenReader,A=function(){function s(){this.editor=null}return s.prototype.show=function(h,o,n){if(n=n||"",h&&this.editor&&this.editor!==h&&(this.hide(),this.editor=null,this.inlineScreenReader=null),!h||!o)return!1;this.inlineScreenReader||(this.inlineScreenReader=new S(h));var i=o.snippet?D.getDisplayTextForSnippet(h,o.snippet):o.value;return o.hideInlinePreview||!i||!i.startsWith(n)?!1:(this.editor=h,this.inlineScreenReader.setScreenReaderContent(i),i=i.slice(n.length),i===""?h.removeGhostText():h.setGhostText(i),!0)},s.prototype.isOpen=function(){return this.editor?!!this.editor.renderer.$ghostText:!1},s.prototype.hide=function(){return this.editor?(this.editor.removeGhostText(),!0):!1},s.prototype.destroy=function(){this.hide(),this.editor=null,this.inlineScreenReader&&(this.inlineScreenReader.destroy(),this.inlineScreenReader=null)},s}();I.AceInline=A}),ace.define("ace/autocomplete/util",["require","exports","module"],function(g,I,z){I.parForEach=function(S,A,s){var h=0,o=S.length;o===0&&s();for(var n=0;n<o;n++)A(S[n],function(i,t){h++,h===o&&s(i,t)})};var D=/[a-zA-Z_0-9\$\-\u00A2-\u2000\u2070-\uFFFF]/;I.retrievePrecedingIdentifier=function(S,A,s){s=s||D;for(var h=[],o=A-1;o>=0&&s.test(S[o]);o--)h.push(S[o]);return h.reverse().join("")},I.retrieveFollowingIdentifier=function(S,A,s){s=s||D;for(var h=[],o=A;o<S.length&&s.test(S[o]);o++)h.push(S[o]);return h},I.getCompletionPrefix=function(S){var A=S.getCursorPosition(),s=S.session.getLine(A.row),h;return S.completers.forEach((function(o){o.identifierRegexps&&o.identifierRegexps.forEach((function(n){!h&&n&&(h=this.retrievePrecedingIdentifier(s,A.column,n))}).bind(this))}).bind(this)),h||this.retrievePrecedingIdentifier(s,A.column)},I.triggerAutocomplete=function(S,s){var s=s??S.session.getPrecedingCharacter();return S.completers.some(function(h){if(h.triggerCharacters&&Array.isArray(h.triggerCharacters))return h.triggerCharacters.includes(s)})}}),ace.define("ace/autocomplete",["require","exports","module","ace/keyboard/hash_handler","ace/autocomplete/popup","ace/autocomplete/inline","ace/autocomplete/popup","ace/autocomplete/util","ace/lib/lang","ace/lib/dom","ace/snippets","ace/config","ace/lib/event","ace/lib/scroll"],function(g,I,z){var D=g("./keyboard/hash_handler").HashHandler,S=g("./autocomplete/popup").AcePopup,A=g("./autocomplete/inline").AceInline,s=g("./autocomplete/popup").getAriaId,h=g("./autocomplete/util"),o=g("./lib/lang"),n=g("./lib/dom"),i=g("./snippets").snippetManager,t=g("./config"),e=g("./lib/event"),r=g("./lib/scroll").preventParentScroll,a=function(w,m){m.completer&&m.completer.destroy()},u=function(){function w(){this.autoInsert=!1,this.autoSelect=!0,this.autoShown=!1,this.exactMatch=!1,this.inlineEnabled=!1,this.keyboardHandler=new D,this.keyboardHandler.bindKeys(this.commands),this.parentNode=null,this.setSelectOnHover=!1,this.hasSeen=new Set,this.showLoadingState=!1,this.stickySelectionDelay=500,this.blurListener=this.blurListener.bind(this),this.changeListener=this.changeListener.bind(this),this.mousedownListener=this.mousedownListener.bind(this),this.mousewheelListener=this.mousewheelListener.bind(this),this.onLayoutChange=this.onLayoutChange.bind(this),this.changeTimer=o.delayedCall((function(){this.updateCompletions(!0)}).bind(this)),this.tooltipTimer=o.delayedCall(this.updateDocTooltip.bind(this),50),this.popupTimer=o.delayedCall(this.$updatePopupPosition.bind(this),50),this.stickySelectionTimer=o.delayedCall((function(){this.stickySelection=!0}).bind(this),this.stickySelectionDelay),this.$firstOpenTimer=o.delayedCall((function(){var m=this.completionProvider&&this.completionProvider.initialPosition;this.autoShown||this.popup&&this.popup.isOpen||!m||this.editor.completers.length===0||(this.completions=new M(w.completionsForLoading),this.openPopup(this.editor,m.prefix,!1),this.popup.renderer.setStyle("ace_loading",!0))}).bind(this),this.stickySelectionDelay)}return Object.defineProperty(w,"completionsForLoading",{get:function(){return[{caption:t.nls("autocomplete.loading","Loading..."),value:""}]},enumerable:!1,configurable:!0}),w.prototype.$init=function(){return this.popup=new S(this.parentNode||document.body||document.documentElement),this.popup.on("click",(function(m){this.insertMatch(),m.stop()}).bind(this)),this.popup.focus=this.editor.focus.bind(this.editor),this.popup.on("show",this.$onPopupShow.bind(this)),this.popup.on("hide",this.$onHidePopup.bind(this)),this.popup.on("select",this.$onPopupChange.bind(this)),e.addListener(this.popup.container,"mouseout",this.mouseOutListener.bind(this)),this.popup.on("changeHoverMarker",this.tooltipTimer.bind(null,null)),this.popup.renderer.on("afterRender",this.$onPopupRender.bind(this)),this.popup},w.prototype.$initInline=function(){if(!(!this.inlineEnabled||this.inlineRenderer))return this.inlineRenderer=new A,this.inlineRenderer},w.prototype.getPopup=function(){return this.popup||this.$init()},w.prototype.$onHidePopup=function(){this.inlineRenderer&&this.inlineRenderer.hide(),this.hideDocTooltip(),this.stickySelectionTimer.cancel(),this.popupTimer.cancel(),this.stickySelection=!1},w.prototype.$seen=function(m){!this.hasSeen.has(m)&&m&&m.completer&&m.completer.onSeen&&typeof m.completer.onSeen=="function"&&(m.completer.onSeen(this.editor,m),this.hasSeen.add(m))},w.prototype.$onPopupChange=function(m){if(this.inlineRenderer&&this.inlineEnabled){var d=m?null:this.popup.getData(this.popup.getRow());if(this.$updateGhostText(d),this.popup.isMouseOver&&this.setSelectOnHover){this.tooltipTimer.call(null,null);return}this.popupTimer.schedule(),this.tooltipTimer.schedule()}else this.popupTimer.call(null,null),this.tooltipTimer.call(null,null)},w.prototype.$updateGhostText=function(m){var d=this.base.row,_=this.base.column,T=this.editor.getCursorPosition().column,R=this.editor.session.getLine(d).slice(_,T);this.inlineRenderer.show(this.editor,m,R)?this.$seen(m):this.inlineRenderer.hide()},w.prototype.$onPopupRender=function(){var m=this.inlineRenderer&&this.inlineEnabled;if(this.completions&&this.completions.filtered&&this.completions.filtered.length>0)for(var d=this.popup.getFirstVisibleRow();d<=this.popup.getLastVisibleRow();d++){var _=this.popup.getData(d);_&&(!m||_.hideInlinePreview)&&this.$seen(_)}},w.prototype.$onPopupShow=function(m){this.$onPopupChange(m),this.stickySelection=!1,this.stickySelectionDelay>=0&&this.stickySelectionTimer.schedule(this.stickySelectionDelay)},w.prototype.observeLayoutChanges=function(){if(!(this.$elements||!this.editor)){window.addEventListener("resize",this.onLayoutChange,{passive:!0}),window.addEventListener("wheel",this.mousewheelListener);for(var m=this.editor.container.parentNode,d=[];m;)d.push(m),m.addEventListener("scroll",this.onLayoutChange,{passive:!0}),m=m.parentNode;this.$elements=d}},w.prototype.unObserveLayoutChanges=function(){var m=this;window.removeEventListener("resize",this.onLayoutChange,{passive:!0}),window.removeEventListener("wheel",this.mousewheelListener),this.$elements&&this.$elements.forEach(function(d){d.removeEventListener("scroll",m.onLayoutChange,{passive:!0})}),this.$elements=null},w.prototype.onLayoutChange=function(){if(!this.popup.isOpen)return this.unObserveLayoutChanges();this.$updatePopupPosition(),this.updateDocTooltip()},w.prototype.$updatePopupPosition=function(){var m=this.editor,d=m.renderer,_=d.layerConfig.lineHeight,T=d.$cursorLayer.getPixelPosition(this.base,!0);T.left-=this.popup.getTextLeftOffset();var R=m.container.getBoundingClientRect();T.top+=R.top-d.layerConfig.offset,T.left+=R.left-m.renderer.scrollLeft,T.left+=d.gutterWidth;var $={top:T.top,left:T.left};d.$ghostText&&d.$ghostTextWidget&&this.base.row===d.$ghostText.position.row&&($.top+=d.$ghostTextWidget.el.offsetHeight);var k=m.container.getBoundingClientRect().bottom-_,v=k<$.top?{top:k,left:$.left}:$;this.popup.tryShow(v,_,"bottom")||this.popup.tryShow(T,_,"top")||this.popup.show(T,_)},w.prototype.openPopup=function(m,d,_){this.$firstOpenTimer.cancel(),this.popup||this.$init(),this.inlineEnabled&&!this.inlineRenderer&&this.$initInline(),this.popup.autoSelect=this.autoSelect,this.popup.setSelectOnHover(this.setSelectOnHover);var T=this.popup.getRow(),R=this.popup.data[T];this.popup.setData(this.completions.filtered,this.completions.filterText),this.editor.textInput.setAriaOptions&&this.editor.textInput.setAriaOptions({activeDescendant:s(this.popup.getRow()),inline:this.inlineEnabled}),m.keyBinding.addKeyboardHandler(this.keyboardHandler);var $;this.stickySelection&&($=this.popup.data.indexOf(R)),(!$||$===-1)&&($=0),this.popup.setRow(this.autoSelect?$:-1),$===T&&R!==this.completions.filtered[$]&&this.$onPopupChange();var k=this.inlineRenderer&&this.inlineEnabled;if($===T&&k){var v=this.popup.getData(this.popup.getRow());this.$updateGhostText(v)}_||(this.popup.setTheme(m.getTheme()),this.popup.setFontSize(m.getFontSize()),this.$updatePopupPosition(),this.tooltipNode&&this.updateDocTooltip()),this.changeTimer.cancel(),this.observeLayoutChanges()},w.prototype.detach=function(){this.editor&&(this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.off("changeSelection",this.changeListener),this.editor.off("blur",this.blurListener),this.editor.off("mousedown",this.mousedownListener),this.editor.off("mousewheel",this.mousewheelListener)),this.$firstOpenTimer.cancel(),this.changeTimer.cancel(),this.hideDocTooltip(),this.completionProvider&&this.completionProvider.detach(),this.popup&&this.popup.isOpen&&this.popup.hide(),this.popup&&this.popup.renderer&&this.popup.renderer.off("afterRender",this.$onPopupRender),this.base&&this.base.detach(),this.activated=!1,this.completionProvider=this.completions=this.base=null,this.unObserveLayoutChanges()},w.prototype.changeListener=function(m){var d=this.editor.selection.lead;(d.row!=this.base.row||d.column<this.base.column)&&this.detach(),this.activated?this.changeTimer.schedule():this.detach()},w.prototype.blurListener=function(m){var d=document.activeElement,_=this.editor.textInput.getElement(),T=m.relatedTarget&&this.tooltipNode&&this.tooltipNode.contains(m.relatedTarget),R=this.popup&&this.popup.container;d!=_&&d.parentNode!=R&&!T&&d!=this.tooltipNode&&m.relatedTarget!=_&&this.detach()},w.prototype.mousedownListener=function(m){this.detach()},w.prototype.mousewheelListener=function(m){this.popup&&!this.popup.isMouseOver&&this.detach()},w.prototype.mouseOutListener=function(m){this.popup.isOpen&&this.$updatePopupPosition()},w.prototype.goTo=function(m){this.popup.goTo(m)},w.prototype.insertMatch=function(m,d){if(m||(m=this.popup.getData(this.popup.getRow())),!m)return!1;if(m.value==="")return this.detach();var _=this.completions,T=this.getCompletionProvider().insertMatch(this.editor,m,_.filterText,d);return this.completions==_&&this.detach(),T},w.prototype.showPopup=function(m,d){this.editor&&this.detach(),this.activated=!0,this.editor=m,m.completer!=this&&(m.completer&&m.completer.detach(),m.completer=this),m.on("changeSelection",this.changeListener),m.on("blur",this.blurListener),m.on("mousedown",this.mousedownListener),m.on("mousewheel",this.mousewheelListener),this.updateCompletions(!1,d)},w.prototype.getCompletionProvider=function(m){return this.completionProvider||(this.completionProvider=new p(m)),this.completionProvider},w.prototype.gatherCompletions=function(m,d){return this.getCompletionProvider().gatherCompletions(m,d)},w.prototype.updateCompletions=function(m,d){if(m&&this.base&&this.completions){var T=this.editor.getCursorPosition(),R=this.editor.session.getTextRange({start:this.base,end:T});if(R==this.completions.filterText)return;if(this.completions.setFilter(R),!this.completions.filtered.length)return this.detach();if(this.completions.filtered.length==1&&this.completions.filtered[0].value==R&&!this.completions.filtered[0].snippet)return this.detach();this.openPopup(this.editor,R,m);return}if(d&&d.matches){var T=this.editor.getSelectionRange().start;return this.base=this.editor.session.doc.createAnchor(T.row,T.column),this.base.$insertRight=!0,this.completions=new M(d.matches),this.getCompletionProvider().completions=this.completions,this.openPopup(this.editor,"",m)}var _=this.editor.getSession(),T=this.editor.getCursorPosition(),R=h.getCompletionPrefix(this.editor);this.base=_.doc.createAnchor(T.row,T.column-R.length),this.base.$insertRight=!0;var $={exactMatch:this.exactMatch,ignoreCaption:this.ignoreCaption};this.getCompletionProvider({prefix:R,pos:T}).provideCompletions(this.editor,$,(function(k,v,b){var l=v.filtered,C=h.getCompletionPrefix(this.editor);if(this.$firstOpenTimer.cancel(),b){if(!l.length){var O=!this.autoShown&&this.emptyMessage;if(typeof O=="function"&&(O=this.emptyMessage(C)),O){var N=[{caption:O,value:""}];this.completions=new M(N),this.openPopup(this.editor,C,m),this.popup.renderer.setStyle("ace_loading",!1),this.popup.renderer.setStyle("ace_empty-message",!0);return}return this.detach()}if(l.length==1&&l[0].value==C&&!l[0].snippet)return this.detach();if(this.autoInsert&&!this.autoShown&&l.length==1)return this.insertMatch(l[0])}this.completions=!b&&this.showLoadingState?new M(w.completionsForLoading.concat(l),v.filterText):v,this.openPopup(this.editor,C,m),this.popup.renderer.setStyle("ace_empty-message",!1),this.popup.renderer.setStyle("ace_loading",!b)}).bind(this)),this.showLoadingState&&!this.autoShown&&!(this.popup&&this.popup.isOpen)&&this.$firstOpenTimer.delay(this.stickySelectionDelay/2)},w.prototype.cancelContextMenu=function(){this.editor.$mouseHandler.cancelContextMenu()},w.prototype.updateDocTooltip=function(){var m=this.popup,d=this.completions.filtered,_=d&&(d[m.getHoveredRow()]||d[m.getRow()]),T=null;if(!_||!this.editor||!this.popup.isOpen)return this.hideDocTooltip();for(var R=this.editor.completers.length,$=0;$<R;$++){var k=this.editor.completers[$];if(k.getDocTooltip&&_.completerId===k.id){T=k.getDocTooltip(_);break}}if(!T&&typeof _!="string"&&(T=_),typeof T=="string"&&(T={docText:T}),!T||!(T.docHTML||T.docText))return this.hideDocTooltip();this.showDocTooltip(T)},w.prototype.showDocTooltip=function(m){this.tooltipNode||(this.tooltipNode=n.createElement("div"),this.tooltipNode.style.margin="0",this.tooltipNode.style.pointerEvents="auto",this.tooltipNode.style.overscrollBehavior="contain",this.tooltipNode.tabIndex=-1,this.tooltipNode.onblur=this.blurListener.bind(this),this.tooltipNode.onclick=this.onTooltipClick.bind(this),this.tooltipNode.id="doc-tooltip",this.tooltipNode.setAttribute("role","tooltip"),this.tooltipNode.addEventListener("wheel",r));var d=this.editor.renderer.theme;this.tooltipNode.className="ace_tooltip ace_doc-tooltip "+(d.isDark?"ace_dark ":"")+(d.cssClass||"");var _=this.tooltipNode;m.docHTML?_.innerHTML=m.docHTML:m.docText&&(_.textContent=m.docText),_.parentNode||this.popup.container.appendChild(this.tooltipNode);var T=this.popup,R=T.container.getBoundingClientRect();_.style.top=T.container.style.top,_.style.bottom=T.container.style.bottom,_.style.display="block",window.innerWidth-R.right<320?R.left<320?T.isTopdown?(_.style.top=R.bottom+"px",_.style.left=R.left+"px",_.style.right="",_.style.bottom=""):(_.style.top=T.container.offsetTop-_.offsetHeight+"px",_.style.left=R.left+"px",_.style.right="",_.style.bottom=""):(_.style.right=window.innerWidth-R.left+"px",_.style.left=""):(_.style.left=R.right+1+"px",_.style.right="")},w.prototype.hideDocTooltip=function(){if(this.tooltipTimer.cancel(),!!this.tooltipNode){var m=this.tooltipNode;!this.editor.isFocused()&&document.activeElement==m&&this.editor.focus(),this.tooltipNode=null,m.parentNode&&m.parentNode.removeChild(m)}},w.prototype.onTooltipClick=function(m){for(var d=m.target;d&&d!=this.tooltipNode;){if(d.nodeName=="A"&&d.href){d.rel="noreferrer",d.target="_blank";break}d=d.parentNode}},w.prototype.destroy=function(){if(this.detach(),this.popup){this.popup.destroy();var m=this.popup.container;m&&m.parentNode&&m.parentNode.removeChild(m)}this.editor&&this.editor.completer==this&&(this.editor.off("destroy",a),this.editor.completer=null),this.inlineRenderer=this.popup=this.editor=null},w}();u.prototype.commands={Up:function(w){w.completer.goTo("up")},Down:function(w){w.completer.goTo("down")},"Ctrl-Up|Ctrl-Home":function(w){w.completer.goTo("start")},"Ctrl-Down|Ctrl-End":function(w){w.completer.goTo("end")},Esc:function(w){w.completer.detach()},Return:function(w){return w.completer.insertMatch()},"Shift-Return":function(w){w.completer.insertMatch(null,{deleteSuffix:!0})},Tab:function(w){var m=w.completer.insertMatch();if(!m&&!w.tabstopManager)w.completer.goTo("down");else return m},Backspace:function(w){w.execCommand("backspace");var m=h.getCompletionPrefix(w);!m&&w.completer&&w.completer.detach()},PageUp:function(w){w.completer.popup.gotoPageUp()},PageDown:function(w){w.completer.popup.gotoPageDown()}},u.for=function(w){return w.completer instanceof u||(w.completer&&(w.completer.destroy(),w.completer=null),t.get("sharedPopups")?(u.$sharedInstance||(u.$sharedInstance=new u),w.completer=u.$sharedInstance):(w.completer=new u,w.once("destroy",a))),w.completer},u.startCommand={name:"startAutocomplete",exec:function(w,m){var d=u.for(w);d.autoInsert=!1,d.autoSelect=!0,d.autoShown=!1,d.showPopup(w,m),d.cancelContextMenu()},bindKey:"Ctrl-Space|Ctrl-Shift-Space|Alt-Space"};var p=function(){function w(m){this.initialPosition=m,this.active=!0}return w.prototype.insertByIndex=function(m,d,_){return!this.completions||!this.completions.filtered?!1:this.insertMatch(m,this.completions.filtered[d],_)},w.prototype.insertMatch=function(m,d,_){if(!d)return!1;if(m.startOperation({command:{name:"insertMatch"}}),d.completer&&d.completer.insertMatch)d.completer.insertMatch(m,d);else{if(!this.completions)return!1;var T=this.completions.filterText.length,R=0;if(d.range&&d.range.start.row===d.range.end.row&&(T-=this.initialPosition.prefix.length,T+=this.initialPosition.pos.column-d.range.start.column,R+=d.range.end.column-this.initialPosition.pos.column),T||R){var $;m.selection.getAllRanges?$=m.selection.getAllRanges():$=[m.getSelectionRange()];for(var k=0,v;v=$[k];k++)v.start.column-=T,v.end.column+=R,m.session.remove(v)}d.snippet?i.insertSnippet(m,d.snippet):this.$insertString(m,d),d.completer&&d.completer.onInsert&&typeof d.completer.onInsert=="function"&&d.completer.onInsert(m,d),d.command&&d.command==="startAutocomplete"&&m.execCommand(d.command)}return m.endOperation(),!0},w.prototype.$insertString=function(m,d){var _=d.value||d;m.execCommand("insertstring",_)},w.prototype.gatherCompletions=function(m,d){var _=m.getSession(),T=m.getCursorPosition(),R=h.getCompletionPrefix(m),$=[];this.completers=m.completers;var k=m.completers.length;return m.completers.forEach(function(v,b){v.getCompletions(m,_,T,R,function(l,C){v.hideInlinePreview&&(C=C.map(function(O){return Object.assign(O,{hideInlinePreview:v.hideInlinePreview})})),!l&&C&&($=$.concat(C)),d(null,{prefix:h.getCompletionPrefix(m),matches:$,finished:--k===0})})}),!0},w.prototype.provideCompletions=function(m,d,_){var T=(function(v){var b=v.prefix,l=v.matches;this.completions=new M(l),d.exactMatch&&(this.completions.exactMatch=!0),d.ignoreCaption&&(this.completions.ignoreCaption=!0),this.completions.setFilter(b),(v.finished||this.completions.filtered.length)&&_(null,this.completions,v.finished)}).bind(this),R=!0,$=null;if(this.gatherCompletions(m,(function(v,b){if(this.active){v&&(_(v,[],!0),this.detach());var l=b.prefix;if(l.indexOf(b.prefix)===0){if(R){$=b;return}T(b)}}}).bind(this)),R=!1,$){var k=$;$=null,T(k)}},w.prototype.detach=function(){this.active=!1,this.completers&&this.completers.forEach(function(m){typeof m.cancel=="function"&&m.cancel()})},w}(),M=function(){function w(m,d){this.all=m,this.filtered=m,this.filterText=d||"",this.exactMatch=!1,this.ignoreCaption=!1}return w.prototype.setFilter=function(m){if(m.length>this.filterText&&m.lastIndexOf(this.filterText,0)===0)var d=this.filtered;else var d=this.all;this.filterText=m,d=this.filterCompletions(d,this.filterText),d=d.sort(function(T,R){return R.exactMatch-T.exactMatch||R.$score-T.$score||(T.caption||T.value).localeCompare(R.caption||R.value)});var _=null;d=d.filter(function(T){var R=T.snippet||T.caption||T.value;return R===_?!1:(_=R,!0)}),this.filtered=d},w.prototype.filterCompletions=function(m,d){var _=[],T=d.toUpperCase(),R=d.toLowerCase();e:for(var $=0,k;k=m[$];$++){var v=!this.ignoreCaption&&k.caption||k.value||k.snippet;if(v){var b=-1,l=0,C=0,O,N;if(this.exactMatch){if(d!==v.substr(0,d.length))continue e}else{var G=v.toLowerCase().indexOf(R);if(G>-1)C=G;else for(var W=0;W<d.length;W++){var K=v.indexOf(R[W],b+1),V=v.indexOf(T[W],b+1);if(O=K>=0&&(V<0||K<V)?K:V,O<0)continue e;N=O-b-1,N>0&&(b===-1&&(C+=10),C+=N,l=l|1<<W),b=O}}k.matchMask=l,k.exactMatch=C?0:1,k.$score=(k.score||0)-C,_.push(k)}}return _},w}();I.Autocomplete=u,I.CompletionProvider=p,I.FilteredList=M}),ace.define("ace/autocomplete/text_completer",["require","exports","module","ace/range"],function(g,I,z){var D=g("../range").Range,S=/[^a-zA-Z_0-9\$\-\u00C0-\u1FFF\u2C00-\uD7FF\w]+/;function A(h,o){var n=h.getTextRange(D.fromPoints({row:0,column:0},o));return n.split(S).length-1}function s(h,o){var n=A(h,o),i=h.getValue().split(S),t=Object.create(null),e=i[n];return i.forEach(function(r,a){if(!(!r||r===e)){var u=Math.abs(n-a),p=i.length-u;t[r]?t[r]=Math.max(p,t[r]):t[r]=p}}),t}I.getCompletions=function(h,o,n,i,t){var e=s(o,n),r=Object.keys(e);t(null,r.map(function(a){return{caption:a,value:a,score:e[a],meta:"local"}}))}}),ace.define("ace/ext/language_tools",["require","exports","module","ace/snippets","ace/autocomplete","ace/config","ace/lib/lang","ace/autocomplete/util","ace/autocomplete/text_completer","ace/editor","ace/config"],function(g,I,z){var D=g("../snippets").snippetManager,S=g("../autocomplete").Autocomplete,A=g("../config"),s=g("../lib/lang"),h=g("../autocomplete/util"),o=g("../autocomplete/text_completer"),n={getCompletions:function(T,R,$,k,v){if(R.$mode.completer)return R.$mode.completer.getCompletions(T,R,$,k,v);var b=T.session.getState($.row),l=R.$mode.getCompletions(b,R,$,k);l=l.map(function(C){return C.completerId=n.id,C}),v(null,l)},id:"keywordCompleter"},i=function(T){var R={};return T.replace(/\${(\d+)(:(.*?))?}/g,function($,k,v,b){return R[k]=b||""}).replace(/\$(\d+?)/g,function($,k){return R[k]})},t={getCompletions:function(T,R,$,k,v){var b=[],l=R.getTokenAt($.row,$.column);l&&l.type.match(/(tag-name|tag-open|tag-whitespace|attribute-name|attribute-value)\.xml$/)?b.push("html-tag"):b=D.getActiveScopes(T);var C=D.snippetMap,O=[];b.forEach(function(N){for(var G=C[N]||[],W=G.length;W--;){var K=G[W],V=K.name||K.tabTrigger;V&&O.push({caption:V,snippet:K.content,meta:K.tabTrigger&&!K.name?K.tabTrigger+" ":"snippet",completerId:t.id})}},this),v(null,O)},getDocTooltip:function(T){T.snippet&&!T.docHTML&&(T.docHTML=["<b>",s.escapeHTML(T.caption),"</b>","<hr></hr>",s.escapeHTML(i(T.snippet))].join(""))},id:"snippetCompleter"},e=[t,o,n];I.setCompleters=function(T){e.length=0,T&&e.push.apply(e,T)},I.addCompleter=function(T){e.push(T)},I.textCompleter=o,I.keyWordCompleter=n,I.snippetCompleter=t;var r={name:"expandSnippet",exec:function(T){return D.expandWithTab(T)},bindKey:"Tab"},a=function(T,R){u(R.session.$mode)},u=function(T){typeof T=="string"&&(T=A.$modes[T]),T&&(D.files||(D.files={}),p(T.$id,T.snippetFileId),T.modes&&T.modes.forEach(u))},p=function(T,R){!R||!T||D.files[T]||(D.files[T]={},A.loadModule(R,function($){$&&(D.files[T]=$,!$.snippets&&$.snippetText&&($.snippets=D.parseSnippetFile($.snippetText)),D.register($.snippets||[],$.scope),$.includeScopes&&(D.snippetMap[$.scope].includeScopes=$.includeScopes,$.includeScopes.forEach(function(k){u("ace/mode/"+k)})))}))},M=function(T){var R=T.editor,$=R.completer&&R.completer.activated;if(T.command.name==="backspace")$&&!h.getCompletionPrefix(R)&&R.completer.detach();else if(T.command.name==="insertstring"&&!$){w=T;var k=T.editor.$liveAutocompletionDelay;k?m.delay(k):d(T)}},w,m=s.delayedCall(function(){d(w)},0),d=function(T){var R=T.editor,$=h.getCompletionPrefix(R),k=T.args,v=h.triggerAutocomplete(R,k);if($&&$.length>=R.$liveAutocompletionThreshold||v){var b=S.for(R);b.autoShown=!0,b.showPopup(R)}},_=g("../editor").Editor;g("../config").defineOptions(_.prototype,"editor",{enableBasicAutocompletion:{set:function(T){T?(this.completers||(this.completers=Array.isArray(T)?T:e),this.commands.addCommand(S.startCommand)):this.commands.removeCommand(S.startCommand)},value:!1},enableLiveAutocompletion:{set:function(T){T?(this.completers||(this.completers=Array.isArray(T)?T:e),this.commands.on("afterExec",M)):this.commands.off("afterExec",M)},value:!1},liveAutocompletionDelay:{initialValue:0},liveAutocompletionThreshold:{initialValue:0},enableSnippets:{set:function(T){T?(this.commands.addCommand(r),this.on("changeMode",a),a(null,this)):(this.commands.removeCommand(r),this.off("changeMode",a))},value:!1}})}),function(){ace.require(["ace/ext/language_tools"],function(g){ee&&(ee.exports=g)})}()}(ir)),ir.exports}Hi();Zn.config.set("basePath","assets/ace");globalThis.ace=On;function xn(ee){return new Promise((X,g)=>{Zn.require([ee],I=>{I||g(Error(`Could not load ${ee}`)),X(I)})})}const Ke={rJOYP:{value:"$FF00",alias:"rP1",description:"Joypad face buttons",flags:{B_JOYP_GET_BUTTONS:{description:"0 = reading buttons [r/w]",value:"5"},B_JOYP_GET_CTRL_PAD:{description:"0 = reading Control Pad [r/w]",value:"4"},JOYP_GET:{description:"select which inputs to read from the lower nybble",value:"%00_11_0000"},JOYP_GET_BUTTONS:{description:"reading A/B/Select/Start buttons",value:"%00_01_0000"},JOYP_GET_CTRL_PAD:{description:"reading Control Pad directions",value:"%00_10_0000"},JOYP_GET_NONE:{description:"reading nothing",value:"%00_11_0000"},B_JOYP_START:{description:"0 = Start is pressed (if reading buttons) [ro]",value:"3"},B_JOYP_SELECT:{description:"0 = Select is pressed (if reading buttons) [ro]",value:"2"},B_JOYP_B:{description:"0 = B is pressed (if reading buttons) [ro]",value:"1"},B_JOYP_A:{description:"0 = A is pressed (if reading buttons) [ro]",value:"0"},B_JOYP_DOWN:{description:"0 = Down is pressed (if reading Control Pad) [ro]",value:"3"},B_JOYP_UP:{description:"0 = Up is pressed (if reading Control Pad) [ro]",value:"2"},B_JOYP_LEFT:{description:"0 = Left is pressed (if reading Control Pad) [ro]",value:"1"},B_JOYP_RIGHT:{description:"0 = Right is pressed (if reading Control Pad) [ro]",value:"0"},JOYP_INPUTS:{description:"bits equal to 0 indicate pressed (if reading inputs)",value:"%0000_1111"},JOYP_START:{description:"Start is pressed (if reading buttons)",value:"%00001000"},JOYP_SELECT:{description:"Select is pressed (if reading buttons)",value:"%00000100"},JOYP_B:{description:"B is pressed (if reading buttons)",value:"%00000010"},JOYP_A:{description:"A is pressed (if reading buttons)",value:"%00000001"},JOYP_DOWN:{description:"Down is pressed (if reading Control Pad)",value:"%00001000"},JOYP_UP:{description:"Up is pressed (if reading Control Pad)",value:"%00000100"},JOYP_LEFT:{description:"Left is pressed (if reading Control Pad)",value:"%00000010"},JOYP_RIGHT:{description:"Right is pressed (if reading Control Pad)",value:"%00000001"},B_JOYP_SGB_ONE:{description:"0 = sending 1 bit (for SGB command packet transfer)",value:"5"},B_JOYP_SGB_ZERO:{description:"0 = sending 0 bit (for SGB command packet transfer)",value:"4"},JOYP_SGB_START:{description:"start SGB packet transfer (if SGB)",value:"%00_00_0000"},JOYP_SGB_ONE:{description:"send 1 bit (if SGB)",value:"%00_01_0000"},JOYP_SGB_ZERO:{description:"send 0 bit (if SGB)",value:"%00_10_0000"},JOYP_SGB_FINISH:{description:"finish SGB packet transfer (if SGB)",value:"%00_11_0000"}}},rSB:{value:"$FF01",description:"Serial transfer data [r/w]"},rSC:{value:"$FF02",description:"Serial transfer control",flags:{B_SC_START:{description:"reading 1 = transfer in progress, writing 1 = start transfer [r/w]",value:"7"},B_SC_SPEED:{description:"(CGB only) 1 = use faster internal clock [r/w]",value:"1"},B_SC_SOURCE:{description:'0 = use external clock ("slave"), 1 = use internal clock ("master") [r/w]',value:"0"},SC_START:{description:"reading 1 = transfer in progress, writing 1 = start transfer [r/w]",value:"%10000000"},SC_SPEED:{description:"(CGB only) 1 = use faster internal clock [r/w]",value:"%00000010"},SC_SLOW:{description:"use slower internal clock",value:"%00000000"},SC_FAST:{description:"use faster internal clock",value:"%00000010"},SC_SOURCE:{description:'0 = use external clock ("slave"), 1 = use internal clock ("master") [r/w]',value:"%00000001"},SC_EXTERNAL:{description:'use external clock ("slave")',value:"%00000000"},SC_INTERNAL:{description:'use internal clock ("master")',value:"%00000001"}}},rDIV:{value:"$FF04",description:"Divider register [r/w]"},rTIMA:{value:"$FF05",description:"Timer counter [r/w]"},rTMA:{value:"$FF06",description:"Timer modulo [r/w]"},rTAC:{value:"$FF07",description:"Timer control",flags:{B_TAC_START:{description:"enable incrementing TIMA [r/w]",value:"2"},TAC_STOP:{description:"disable incrementing TIMA",value:"%00000000"},TAC_START:{description:"enable incrementing TIMA",value:"%00000100"},TAC_CLOCK:{description:"the frequency at which TIMA increments [r/w]",value:"%000000_11"},TAC_4KHZ:{description:"every 256 M-cycles = ~4 KHz on DMG",value:"%000000_00"},TAC_262KHZ:{description:"every 4 M-cycles = ~262 KHz on DMG",value:"%000000_01"},TAC_65KHZ:{description:"every 16 M-cycles = ~65 KHz on DMG",value:"%000000_10"},TAC_16KHZ:{description:"every 64 M-cycles = ~16 KHz on DMG",value:"%000000_11"}}},rIF:{value:"$FF0F",description:"Pending interrupts",flags:{B_IF_JOYPAD:{description:"1 = joypad interrupt is pending [r/w]",value:"4"},B_IF_SERIAL:{description:"1 = serial interrupt is pending [r/w]",value:"3"},B_IF_TIMER:{description:"1 = timer interrupt is pending [r/w]",value:"2"},B_IF_STAT:{description:"1 = STAT interrupt is pending [r/w]",value:"1"},B_IF_VBLANK:{description:"1 = VBlank interrupt is pending [r/w]",value:"0"},IF_JOYPAD:{description:"1 = joypad interrupt is pending [r/w]",value:"%00010000"},IF_SERIAL:{description:"1 = serial interrupt is pending [r/w]",value:"%00001000"},IF_TIMER:{description:"1 = timer interrupt is pending [r/w]",value:"%00000100"},IF_STAT:{description:"1 = STAT interrupt is pending [r/w]",value:"%00000010"},IF_VBLANK:{description:"1 = VBlank interrupt is pending [r/w]",value:"%00000001"}}},rAUD1SWEEP:{value:"$FF10",alias:"rNR10",description:"Audio channel 1 sweep",flags:{AUD1SWEEP_TIME:{description:"how long between sweep iterations (in 128 Hz ticks, ~7.8 ms apart) [r/w]",value:"%0_111_0000"},B_AUD1SWEEP_DIR:{description:"sweep direction [r/w]",value:"3"},AUD1SWEEP_DIR:{description:"sweep direction [r/w]",value:"%00001000"},AUD1SWEEP_UP:{description:"sweep up",value:"%00000000"},AUD1SWEEP_DOWN:{description:"sweep down",value:"%00001000"},AUD1SWEEP_SHIFT:{description:"how much the period increases/decreases per iteration [r/w]",value:"%00000_111"}}},rAUD1LEN:{value:"$FF11",alias:"rNR11",description:"Audio channel 1 length timer and duty cycle",flags:{AUD1LEN_DUTY:{description:"ratio of time spent high vs. time spent low [r/w]",value:"%11_000000"},AUD1LEN_DUTY_12_5:{description:"12.5%",value:"%00_000000"},AUD1LEN_DUTY_25:{description:"25%",value:"%01_000000"},AUD1LEN_DUTY_50:{description:"50%",value:"%10_000000"},AUD1LEN_DUTY_75:{description:"75%",value:"%11_000000"},AUD1LEN_TIMER:{description:"initial length timer (0-63) [wo]",value:"%00_111111"}}},rAUD1ENV:{value:"$FF12",alias:"rNR12",description:"Audio channel 1 volume and envelope",flags:{AUD1ENV_INIT_VOLUME:{description:"initial volume [r/w]",value:"%1111_0000"},B_AUD1ENV_DIR:{description:"direction of volume envelope [r/w]",value:"3"},AUD1ENV_DIR:{description:"direction of volume envelope [r/w]",value:"%00001000"},AUD1ENV_DOWN:{description:"volume envelope down",value:"%00000000"},AUD1ENV_UP:{description:"volume envelope up",value:"%00001000"},AUD1ENV_PACE:{description:"how long between envelope iterations (in 64 Hz ticks, ~15.6 ms apart) [r/w]",value:"%00000_111"}}},rAUD1LOW:{value:"$FF13",alias:"rNR13",description:"Audio channel 1 period (low 8 bits) [wo]"},rAUD1HIGH:{value:"$FF14",alias:"rNR14",description:"Audio channel 1 period (high 3 bits) and control",flags:{B_AUD1HIGH_RESTART:{description:"1 = restart the channel [wo]",value:"7"},B_AUD1HIGH_LEN_ENABLE:{description:"1 = reset the channel after the length timer expires [r/w]",value:"6"},AUD1HIGH_RESTART:{description:"restart the channel",value:"%10000000"},AUD1HIGH_LENGTH_OFF:{description:"do not reset the channel after the length timer expires",value:"%00000000"},AUD1HIGH_LENGTH_ON:{description:"reset the channel after the length timer expires",value:"%01000000"},AUD1HIGH_PERIOD_HIGH:{description:"upper 3 bits of the channel's period [r/w]",value:"%00000_111"}}},rAUD2LEN:{value:"$FF16",alias:"rNR21",description:"Audio channel 2 length timer and duty cycle",flags:{AUD2LEN_DUTY:{description:"ratio of time spent high vs. time spent low [r/w]",value:"%11_000000"},AUD2LEN_DUTY_12_5:{description:"12.5%",value:"%00_000000"},AUD2LEN_DUTY_25:{description:"25%",value:"%01_000000"},AUD2LEN_DUTY_50:{description:"50%",value:"%10_000000"},AUD2LEN_DUTY_75:{description:"75%",value:"%11_000000"},AUD2LEN_TIMER:{description:"initial length timer (0-63) [wo]",value:"%00_111111"}}},rAUD2ENV:{value:"$FF17",alias:"rNR22",description:"Audio channel 2 volume and envelope",flags:{AUD2ENV_INIT_VOLUME:{description:"initial volume [r/w]",value:"%1111_0000"},B_AUD2ENV_DIR:{description:"direction of volume envelope [r/w]",value:"3"},AUD2ENV_DIR:{description:"direction of volume envelope [r/w]",value:"%00001000"},AUD2ENV_DOWN:{description:"volume envelope down",value:"%00000000"},AUD2ENV_UP:{description:"volume envelope up",value:"%00001000"},AUD2ENV_PACE:{description:"how long between envelope iterations (in 64 Hz ticks, ~15.6 ms apart) [r/w]",value:"%00000_111"}}},rAUD2LOW:{value:"$FF18",alias:"rNR23",description:"Audio channel 2 period (low 8 bits) [wo]"},rAUD2HIGH:{value:"$FF19",alias:"rNR24",description:"Audio channel 2 period (high 3 bits) and control",flags:{B_AUD2HIGH_RESTART:{description:"1 = restart the channel [wo]",value:"7"},B_AUD2HIGH_LEN_ENABLE:{description:"1 = reset the channel after the length timer expires [r/w]",value:"6"},AUD2HIGH_RESTART:{description:"1 = restart the channel [wo]",value:"%10000000"},AUD2HIGH_LENGTH_OFF:{description:"do not reset the channel after the length timer expires",value:"%00000000"},AUD2HIGH_LENGTH_ON:{description:"reset the channel after the length timer expires",value:"%01000000"},AUD2HIGH_PERIOD_HIGH:{description:"upper 3 bits of the channel's period [r/w]",value:"%00000_111"}}},rAUD3ENA:{value:"$FF1A",alias:"rNR30",description:"Audio channel 3 enable",flags:{B_AUD3ENA_ENABLE:{description:"1 = channel is active [r/w]",value:"7"},AUD3ENA_OFF:{description:"channel is inactive",value:"%00000000"},AUD3ENA_ON:{description:"channel is active",value:"%10000000"}}},rAUD3LEN:{value:"$FF1B",alias:"rNR31",description:"Audio channel 3 length timer [wo]"},rAUD3LEVEL:{value:"$FF1C",alias:"rNR32",description:"Audio channel 3 volume",flags:{AUD3LEVEL_VOLUME:{description:"volume level [r/w]",value:"%0_11_00000"},AUD3LEVEL_MUTE:{description:"0% (muted)",value:"%0_00_00000"},AUD3LEVEL_100:{description:"100%",value:"%0_01_00000"},AUD3LEVEL_50:{description:"50%",value:"%0_10_00000"},AUD3LEVEL_25:{description:"25%",value:"%0_11_00000"}}},rAUD3LOW:{value:"$FF1D",alias:"rNR33",description:"Audio channel 3 period (low 8 bits) [wo]"},rAUD3HIGH:{value:"$FF1E",alias:"rNR34",description:"Audio channel 3 period (high 3 bits) and control",flags:{B_AUD3HIGH_RESTART:{description:"1 = restart the channel [wo]",value:"7"},B_AUD3HIGH_LEN_ENABLE:{description:"1 = reset the channel after the length timer expires [r/w]",value:"6"},AUD3HIGH_RESTART:{description:"1 = restart the channel [wo]",value:"%10000000"},AUD3HIGH_LENGTH_OFF:{description:"do not reset the channel after the length timer expires",value:"%00000000"},AUD3HIGH_LENGTH_ON:{description:"reset the channel after the length timer expires",value:"%01000000"},AUD3HIGH_PERIOD_HIGH:{description:"upper 3 bits of the channel's period [r/w]",value:"%00000_111"}}},rAUD4LEN:{value:"$FF20",alias:"rNR41",description:"Audio channel 4 length timer",flags:{AUD4LEN_TIMER:{description:"initial length timer (0-63) [wo]",value:"%00_111111"}}},rAUD4ENV:{value:"$FF21",alias:"rNR42",description:"Audio channel 4 volume and envelope",flags:{AUD4ENV_INIT_VOLUME:{description:"initial volume [r/w]",value:"%1111_0000"},B_AUD4ENV_DIR:{description:"direction of volume envelope [r/w]",value:"3"},AUD4ENV_DIR:{description:"direction of volume envelope [r/w]",value:"%00001000"},AUD4ENV_DOWN:{description:"volume envelope down",value:"%00000000"},AUD4ENV_UP:{description:"volume envelope up",value:"%00001000"},AUD4ENV_PACE:{description:"how long between envelope iterations (in 64 Hz ticks, ~15.6 ms apart) [r/w]",value:"%00000_111"}}},rAUD4POLY:{value:"$FF22",alias:"rNR43",description:"Audio channel 4 period and randomness",flags:{AUD4POLY_SHIFT:{description:"coarse control of the channel's period [r/w]",value:"%1111_0000"},B_AUD4POLY_WIDTH:{description:"controls the noise generator (LFSR)'s step width [r/w]",value:"3"},AUD4POLY_15STEP:{description:"15-bit step width",value:"%00000000"},AUD4POLY_7STEP:{description:"7-bit step width",value:"%00001000"},AUD4POLY_DIV:{description:"fine control of the channel's period [r/w]",value:"%00000_111"}}},rAUD4GO:{value:"$FF23",alias:"rNR44",description:"Audio channel 4 control",flags:{B_AUD4GO_RESTART:{description:"1 = restart the channel [wo]",value:"7"},B_AUD4GO_LEN_ENABLE:{description:"1 = reset the channel after the length timer expires [r/w]",value:"6"},AUD4GO_RESTART:{description:"1 = restart the channel [wo]",value:"%10000000"},AUD4GO_LENGTH_OFF:{description:"do not reset the channel after the length timer expires",value:"%00000000"},AUD4GO_LENGTH_ON:{description:"reset the channel after the length timer expires",value:"%01000000"}}},rAUDVOL:{value:"$FF24",alias:"rNR50",description:"Audio master volume and VIN mixer",flags:{B_AUDVOL_VIN_LEFT:{description:"1 = output VIN to left ear (SO2, speaker 2) [r/w]",value:"7"},AUDVOL_VIN_LEFT:{description:"1 = output VIN to left ear (SO2, speaker 2) [r/w]",value:"%10000000"},AUDVOL_LEFT:{description:"0 = barely audible, 7 = full volume [r/w]",value:"%0_111_0000"},B_AUDVOL_VIN_RIGHT:{description:"1 = output VIN to right ear (SO1, speaker 1) [r/w]",value:"3"},AUDVOL_VIN_RIGHT:{description:"1 = output VIN to right ear (SO1, speaker 1) [r/w]",value:"%00001000"},AUDVOL_RIGHT:{description:"0 = barely audible, 7 = full volume [r/w]",value:"%00000_111"}}},rAUDTERM:{value:"$FF25",alias:"rNR51",description:"Audio channel mixer",flags:{B_AUDTERM_4_LEFT:{description:"1 = output channel 4 to left ear [r/w]",value:"7"},B_AUDTERM_3_LEFT:{description:"1 = output channel 3 to left ear [r/w]",value:"6"},B_AUDTERM_2_LEFT:{description:"1 = output channel 2 to left ear [r/w]",value:"5"},B_AUDTERM_1_LEFT:{description:"1 = output channel 1 to left ear [r/w]",value:"4"},B_AUDTERM_4_RIGHT:{description:"1 = output channel 4 to right ear [r/w]",value:"3"},B_AUDTERM_3_RIGHT:{description:"1 = output channel 3 to right ear [r/w]",value:"2"},B_AUDTERM_2_RIGHT:{description:"1 = output channel 2 to right ear [r/w]",value:"1"},B_AUDTERM_1_RIGHT:{description:"1 = output channel 1 to right ear [r/w]",value:"0"},AUDTERM_4_LEFT:{description:"1 = output channel 4 to left ear [r/w]",value:"%10000000"},AUDTERM_3_LEFT:{description:"1 = output channel 3 to left ear [r/w]",value:"%01000000"},AUDTERM_2_LEFT:{description:"1 = output channel 2 to left ear [r/w]",value:"%00100000"},AUDTERM_1_LEFT:{description:"1 = output channel 1 to left ear [r/w]",value:"%00010000"},AUDTERM_4_RIGHT:{description:"1 = output channel 4 to right ear [r/w]",value:"%00001000"},AUDTERM_3_RIGHT:{description:"1 = output channel 3 to right ear [r/w]",value:"%00000100"},AUDTERM_2_RIGHT:{description:"1 = output channel 2 to right ear [r/w]",value:"%00000010"},AUDTERM_1_RIGHT:{description:"1 = output channel 1 to right ear [r/w]",value:"%00000001"}}},rAUDENA:{value:"$FF26",alias:"rNR52",description:"Audio master enable",flags:{B_AUDENA_ENABLE:{description:"0 = disable the APU (resets all audio registers to 0!) [r/w]",value:"7"},B_AUDENA_ENABLE_CH4:{description:"1 = channel 4 is running [ro]",value:"3"},B_AUDENA_ENABLE_CH3:{description:"1 = channel 3 is running [ro]",value:"2"},B_AUDENA_ENABLE_CH2:{description:"1 = channel 2 is running [ro]",value:"1"},B_AUDENA_ENABLE_CH1:{description:"1 = channel 1 is running [ro]",value:"0"},AUDENA_OFF:{description:"disable the APU (resets all audio registers to 0!)",value:"%00000000"},AUDENA_ON:{description:"enable the APU",value:"%10000000"},AUDENA_CH4_OFF:{description:"channel 4 is not running",value:"%00000000"},AUDENA_CH4_ON:{description:"channel 4 is running",value:"%00001000"},AUDENA_CH3_OFF:{description:"channel 3 is not running",value:"%00000000"},AUDENA_CH3_ON:{description:"channel 3 is running",value:"%00000100"},AUDENA_CH2_OFF:{description:"channel 2 is not running",value:"%00000000"},AUDENA_CH2_ON:{description:"channel 2 is running",value:"%00000010"},AUDENA_CH1_OFF:{description:"channel 1 is not running",value:"%00000000"},AUDENA_CH1_ON:{description:"channel 1 is running",value:"%00000001"}}},AUD1RAM:{description:"Audio channel 1 RAM address",value:"$FF10"},AUD2RAM:{description:"Audio channel 2 RAM address",value:"$FF15"},AUD3RAM:{description:"Audio channel 3 RAM address",value:"$FF1A"},AUD4RAM:{description:"Audio channel 4 RAM address",value:"$FF1F"},AUDRAM_SIZE:{description:"size of each audio channel RAM in bytes",value:"5"},_AUD3WAVERAM:{value:"$FF30",description:"Audio channel 3 wave pattern RAM [r/w]",flags:{rAUD3WAVE_0:{description:"wave pattern RAM byte 0",value:"$FF30"},rAUD3WAVE_1:{description:"wave pattern RAM byte 1",value:"$FF31"},rAUD3WAVE_2:{description:"wave pattern RAM byte 2",value:"$FF32"},rAUD3WAVE_3:{description:"wave pattern RAM byte 3",value:"$FF33"},rAUD3WAVE_4:{description:"wave pattern RAM byte 4",value:"$FF34"},rAUD3WAVE_5:{description:"wave pattern RAM byte 5",value:"$FF35"},rAUD3WAVE_6:{description:"wave pattern RAM byte 6",value:"$FF36"},rAUD3WAVE_7:{description:"wave pattern RAM byte 7",value:"$FF37"},rAUD3WAVE_8:{description:"wave pattern RAM byte 8",value:"$FF38"},rAUD3WAVE_9:{description:"wave pattern RAM byte 9",value:"$FF39"},rAUD3WAVE_A:{description:"wave pattern RAM byte 10",value:"$FF3A"},rAUD3WAVE_B:{description:"wave pattern RAM byte 11",value:"$FF3B"},rAUD3WAVE_C:{description:"wave pattern RAM byte 12",value:"$FF3C"},rAUD3WAVE_D:{description:"wave pattern RAM byte 13",value:"$FF3D"},rAUD3WAVE_E:{description:"wave pattern RAM byte 14",value:"$FF3E"},rAUD3WAVE_F:{description:"wave pattern RAM byte 15",value:"$FF3F"},AUD3WAVE_SIZE:{description:"wave pattern RAM size in bytes",value:"16"}}},rLCDC:{value:"$FF40",description:"PPU graphics control",flags:{B_LCDC_ENABLE:{description:"whether the PPU (and LCD) are turned on [r/w]",value:"7"},B_LCDC_WIN_MAP:{description:"which tilemap the Window reads from [r/w]",value:"6"},B_LCDC_WINDOW:{description:"whether the Window is enabled [r/w]",value:"5"},B_LCDC_BLOCKS:{description:'which "tile blocks" the BG and Window use [r/w]',value:"4"},B_LCDC_BG_MAP:{description:"which tilemap the BG reads from [r/w]",value:"3"},B_LCDC_OBJ_SIZE:{description:"how many pixels tall each OBJ is [r/w]",value:"2"},B_LCDC_OBJS:{description:"whether OBJs are enabled [r/w]",value:"1"},B_LCDC_BG:{description:"(DMG only) whether the BG is enabled [r/w]",value:"0"},B_LCDC_PRIO:{description:"(CGB only) whether OBJ priority bits are enabled [r/w]",value:"0"},LCDC_ENABLE:{description:"whether the PPU (and LCD) are turned on [r/w]",value:"%10000000"},LCDC_OFF:{description:"the PPU (and LCD) are turned off",value:"%00000000"},LCDC_ON:{description:"the PPU (and LCD) are turned on",value:"%10000000"},LCDC_WIN_MAP:{description:"which tilemap the Window reads from [r/w]",value:"%01000000"},LCDC_WIN_9800:{description:"the Window reads from TILEMAP0 ($9800)",value:"%00000000"},LCDC_WIN_9C00:{description:"the Window reads from TILEMAP1 ($9C00)",value:"%01000000"},LCDC_WINDOW:{description:"whether the Window is enabled [r/w]",value:"%00100000"},LCDC_WIN_OFF:{description:"the Window is disabled",value:"%00000000"},LCDC_WIN_ON:{description:"the Window is enabled",value:"%00100000"},LCDC_BLOCKS:{description:'which "tile blocks" the BG and Window use [r/w]',value:"%00010000"},LCDC_BLOCK21:{description:'the BG and Window use "tile blocks" 2 and 1',value:"%00000000"},LCDC_BLOCK01:{description:'the BG and Window use "tile blocks" 0 and 1',value:"%00010000"},LCDC_BG_MAP:{description:"which tilemap the BG reads from [r/w]",value:"%00001000"},LCDC_BG_9800:{description:"the BG reads from TILEMAP0 ($9800)",value:"%00000000"},LCDC_BG_9C00:{description:"the BG reads from TILEMAP1 ($9C00)",value:"%00001000"},LCDC_OBJ_SIZE:{description:"how many pixels tall each OBJ is [r/w]",value:"%00000100"},LCDC_OBJ_8:{description:"each OBJ is 8 pixels tall",value:"%00000000"},LCDC_OBJ_16:{description:"each OBJ is 16 pixels tall",value:"%00000100"},LCDC_OBJS:{description:"whether OBJs are enabled [r/w]",value:"%00000010"},LCDC_OBJ_OFF:{description:"OBJs are disabled",value:"%00000000"},LCDC_OBJ_ON:{description:"OBJs are enabled",value:"%00000010"},LCDC_BG:{description:"(DMG only) whether the BG is enabled [r/w]",value:"%00000001"},LCDC_BG_OFF:{description:"the BG is disabled",value:"%00000000"},LCDC_BG_ON:{description:"the BG is enabled",value:"%00000001"},LCDC_PRIO:{description:"(CGB only) whether OBJ priority bits are enabled [r/w]",value:"%00000001"},LCDC_PRIO_OFF:{description:"OBJ priority bits are disabled",value:"%00000000"},LCDC_PRIO_ON:{description:"OBJ priority bits are enabled",value:"%00000001"}}},rSTAT:{value:"$FF41",description:"Graphics status and interrupt control",flags:{B_STAT_LYC:{description:"1 = LY match triggers the STAT interrupt [r/w]",value:"6"},B_STAT_MODE_2:{description:"1 = OAM Scan triggers the PPU interrupt [r/w]",value:"5"},B_STAT_MODE_1:{description:"1 = VBlank triggers the PPU interrupt [r/w]",value:"4"},B_STAT_MODE_0:{description:"1 = HBlank triggers the PPU interrupt [r/w]",value:"3"},B_STAT_LYCF:{description:"1 = LY is currently equal to LYC [ro]",value:"2"},B_STAT_BUSY:{description:"1 = the PPU is currently accessing VRAM [ro]",value:"1"},STAT_LYC:{description:"1 = LY match triggers the STAT interrupt [r/w]",value:"%01000000"},STAT_MODE_2:{description:"1 = OAM Scan triggers the PPU interrupt [r/w]",value:"%00100000"},STAT_MODE_1:{description:"1 = VBlank triggers the PPU interrupt [r/w]",value:"%00010000"},STAT_MODE_0:{description:"1 = HBlank triggers the PPU interrupt [r/w]",value:"%00001000"},STAT_LYCF:{description:"1 = LY is currently equal to LYC [ro]",value:"%00000100"},STAT_BUSY:{description:"1 = the PPU is currently accessing VRAM [ro]",value:"%00000010"},STAT_MODE:{description:"PPU's current status [ro]",value:"%000000_11"},STAT_HBLANK:{description:"waiting after a line's rendering (HBlank)",value:"%000000_00"},STAT_VBLANK:{description:"waiting between frames (VBlank)",value:"%000000_01"},STAT_OAM:{description:"checking which OBJs will be rendered on this line (OAM scan)",value:"%000000_10"},STAT_LCD:{description:"pushing pixels to the LCD",value:"%000000_11"}}},rSCY:{value:"$FF42",description:"Background Y scroll offset (in pixels) [r/w]"},rSCX:{value:"$FF43",description:"Background X scroll offset (in pixels) [r/w]"},rLY:{value:"$FF44",description:"Y coordinate of the line currently processed by the PPU (0-153) [ro]",flags:{LY_VBLANK:{description:"144-153 is the VBlank period",value:"144"}}},rLYC:{value:"$FF45",description:"Value that LY is constantly compared to [r/w]"},rDMA:{value:"$FF46",description:"OAM DMA start address (high 8 bits) and start [wo]"},rBGP:{value:"$FF47",description:"(DMG only) Background color mapping [r/w]",flags:{BGP_SGB_TRANSFER:{description:"set BGP to this value before SGB VRAM transfer",value:"%11_10_01_00"}}},rOBP0:{value:"$FF48",description:"(DMG only) OBJ color mapping #0 [r/w]"},rOBP1:{value:"$FF49",description:"(DMG only) OBJ color mapping #1 [r/w]"},rWY:{value:"$FF4A",description:"Y coordinate of the Window's top-left pixel (0-143) [r/w]"},rWX:{value:"$FF4B",description:"X coordinate of the Window's top-left pixel, plus 7 (7-166) [r/w]",flags:{WX_OFS:{description:"subtract this to get the actual Window X coordinate",value:"7"}}},rSYS:{value:"$FF4C",alias:"rKEY0",description:"(CGB boot ROM only) CPU mode select",flags:{SYS_MODE:{description:"current system mode [r/w]",value:"%0000_11_00"},SYS_CGB:{description:"CGB mode",value:"%0000_00_00"},SYS_DMG:{description:"DMG compatibility mode",value:"%0000_01_00"},SYS_PGB1:{description:"LCD is driven externally, CPU is stopped",value:"%0000_10_00"},SYS_PGB2:{description:"LCD is driven externally, CPU is running",value:"%0000_11_00"}}},rSPD:{value:"$FF4D",alias:"rKEY1",description:"(CGB only) Double-speed mode control",flags:{B_SPD_DOUBLE:{description:"current clock speed [ro]",value:"7"},B_SPD_PREPARE:{description:"1 = next `stop` instruction will switch clock speeds [r/w]",value:"0"},SPD_SINGLE:{description:"single-speed clock",value:"%00000000"},SPD_DOUBLE:{description:"double-speed clock",value:"%10000000"},SPD_PREPARE:{description:"1 = next `stop` instruction will switch clock speeds [r/w]",value:"%00000001"}}},rVBK:{value:"$FF4F",description:"(CGB only) VRAM bank number (0 or 1)",flags:{VBK_BANK:{description:"mapped VRAM bank [r/w]",value:"%0000000_1"}}},rBANK:{value:"$FF50",description:"(boot ROM only) Boot ROM mapping control",flags:{B_BANK_ON:{description:"whether the boot ROM is mapped [wo]",value:"0"},BANK_ON:{description:"the boot ROM is mapped",value:"%00000000"},BANK_OFF:{description:"the boot ROM is not mapped",value:"%00000001"}}},rVDMA_SRC_HIGH:{value:"$FF51",alias:"rHDMA1",description:"(CGB only) VRAM DMA source address (high 8 bits) [wo]"},rVDMA_SRC_LOW:{value:"$FF52",alias:"rHDMA2",description:"(CGB only) VRAM DMA source address (low 8 bits) [wo]"},rVDMA_DEST_HIGH:{value:"$FF53",alias:"rHDMA3",description:"(CGB only) VRAM DMA destination address (high 8 bits) [wo]"},rVDMA_DEST_LOW:{value:"$FF54",alias:"rHDMA4",description:"(CGB only) VRAM DMA destination address (low 8 bits) [wo]"},rVDMA_LEN:{value:"$FF55",alias:"rHDMA5",description:"(CGB only) VRAM DMA length, mode, and start",flags:{B_VDMA_LEN_MODE:{description:"on write: VRAM DMA mode [wo]",value:"7"},VDMA_LEN_MODE:{description:"on write: VRAM DMA mode [wo]",value:"%10000000"},VDMA_LEN_MODE_GENERAL:{description:"GDMA (general-purpose)",value:"%00000000"},VDMA_LEN_MODE_HBLANK:{description:"HDMA (HBlank)",value:"%10000000"},B_VDMA_LEN_BUSY:{description:"on read: is a VRAM DMA active?",value:"7"},VDMA_LEN_BUSY:{description:"on read: is a VRAM DMA active?",value:"%10000000"},VDMA_LEN_NO:{description:"a VRAM DMA is not active",value:"%00000000"},VDMA_LEN_YES:{description:"a VRAM DMA is active",value:"%10000000"},VDMA_LEN_SIZE:{description:"how many 16-byte blocks (minus 1) to transfer [r/w]",value:"%0_1111111"}}},rRP:{value:"$FF56",description:"(CGB only) Infrared communications port",flags:{RP_READ:{description:"whether the IR read is enabled [r/w]",value:"%11_000000"},RP_DISABLE:{description:"the IR read is disabled",value:"%00_000000"},RP_ENABLE:{description:"the IR read is enabled",value:"%11_000000"},B_RP_DATA_IN:{description:"0 = IR light is being received [ro]",value:"1"},B_RP_LED_ON:{description:"1 = IR light is being sent [r/w]",value:"0"},RP_DATA_IN:{description:"0 = IR light is being received [ro]",value:"%00000010"},RP_LED_ON:{description:"1 = IR light is being sent [r/w]",value:"%00000001"},RP_WRITE_LOW:{description:"IR light is not being sent",value:"%00000000"},RP_WRITE_HIGH:{description:"IR light is being sent",value:"%00000001"}}},rBGPI:{value:"$FF68",alias:"rBCPS",description:"(CGB only) Background palette I/O index",flags:{B_BGPI_AUTOINC:{description:"whether the index field is incremented after each write to BCPD [r/w]",value:"7"},BGPI_AUTOINC:{description:"whether the index field is incremented after each write to BCPD [r/w]",value:"%10000000"},BGPI_INDEX:{description:"the index within Palette RAM accessed via BCPD [r/w]",value:"%00_111111"}}},rBGPD:{value:"$FF69",alias:"rBCPD",description:"(CGB only) Background palette I/O access [r/w]"},rOBPI:{value:"$FF6A",alias:"rOCPS",description:"(CGB only) OBJ palette I/O index",flags:{B_OBPI_AUTOINC:{description:"whether the index field is incremented after each write to OBPD [r/w]",value:"7"},OBPI_AUTOINC:{description:"whether the index field is incremented after each write to OBPD [r/w]",value:"%10000000"},OBPI_INDEX:{description:"the index within Palette RAM accessed via OBPD [r/w]",value:"%00_111111"}}},rOBPD:{value:"$FF6B",alias:"rOCPD",description:"(CGB only) OBJ palette I/O access [r/w]"},rOPRI:{value:"$FF6C",description:"(CGB boot ROM only) OBJ draw priority mode",flags:{B_OPRI_PRIORITY:{description:"which drawing priority is used for OBJs [r/w]",value:"0"},OPRI_PRIORITY:{description:"which drawing priority is used for OBJs [r/w]",value:"%00000001"},OPRI_OAM:{description:"CGB mode default: earliest OBJ in OAM wins",value:"%00000000"},OPRI_COORD:{description:"DMG mode default: leftmost OBJ wins",value:"%00000001"}}},rWBK:{value:"$FF70",alias:"rSVBK",description:"(CGB only) WRAM bank number",flags:{WBK_BANK:{description:"mapped WRAM bank (0-7) [r/w]",value:"%00000_111"}}},rPCM12:{value:"$FF76",description:"Audio channels 1 and 2 output",flags:{PCM12_CH2:{description:"audio channel 2 output [ro]",value:"%1111_0000"},PCM12_CH1:{description:"audio channel 1 output [ro]",value:"%0000_1111"}}},rPCM34:{value:"$FF77",description:"Audio channels 3 and 4 output",flags:{PCM34_CH4:{description:"audio channel 4 output [ro]",value:"%1111_0000"},PCM34_CH3:{description:"audio channel 3 output [ro]",value:"%0000_1111"}}},rIE:{value:"$FFFF",description:"Interrupt enable",flags:{B_IE_JOYPAD:{description:"1 = joypad interrupt is enabled [r/w]",value:"4"},B_IE_SERIAL:{description:"1 = serial interrupt is enabled [r/w]",value:"3"},B_IE_TIMER:{description:"1 = timer interrupt is enabled [r/w]",value:"2"},B_IE_STAT:{description:"1 = STAT interrupt is enabled [r/w]",value:"1"},B_IE_VBLANK:{description:"1 = VBlank interrupt is enabled [r/w]",value:"0"},IE_JOYPAD:{description:"1 = joypad interrupt is enabled [r/w]",value:"%00010000"},IE_SERIAL:{description:"1 = serial interrupt is enabled [r/w]",value:"%00001000"},IE_TIMER:{description:"1 = timer interrupt is enabled [r/w]",value:"%00000100"},IE_STAT:{description:"1 = STAT interrupt is enabled [r/w]",value:"%00000010"},IE_VBLANK:{description:"1 = VBlank interrupt is enabled [r/w]",value:"%00000001"}}},rRAMG:{value:"$0000",description:"Whether SRAM can be accessed [wo]",flags:{RAMG_SRAM_DISABLE:{description:"SRAM cannot be accessed (not for HuC1 or HuC-3)",value:"$00"},RAMG_SRAM_ENABLE:{description:"SRAM can be accessed (not for HuC1 or HuC-3)",value:"$0A"},RAMG_CART_RAM_RO:{description:"(HuC-3 only) select cartridge RAM [ro]",value:"$00"},RAMG_CART_RAM:{description:"(HuC-3 only) select cartridge RAM [r/w]",value:"$0A"},RAMG_RTC_IN:{description:"(HuC-3 only) select RTC command/argument [wo]",value:"$0B"},RAMG_RTC_IN_CMD:{description:"(HuC-3 only) RTC command",value:"%0_111_0000"},RAMG_RTC_IN_ARG:{description:"(HuC-3 only) RTC argument",value:"%0_000_1111"},RAMG_RTC_OUT:{description:"(HuC-3 only) select RTC command/response [ro]",value:"$0C"},RAMG_RTC_OUT_CMD:{description:"(HuC-3 only) RTC command",value:"%0_111_0000"},RAMG_RTC_OUT_RESULT:{description:"(HuC-3 only) RTC result",value:"%0_000_1111"},RAMG_RTC_SEMAPHORE:{description:"(HuC-3 only) select RTC semaphore [r/w]",value:"$0D"},RAMG_IR:{description:"(HuC1 and HuC-3 only) select IR [r/w]",value:"$0E"}}},rROMB:{value:"$2000",description:"ROM bank number (not for MBC5 or MBC6) [wo]"},rRAMB:{value:"$4000",description:"SRAM bank number (not for MBC2, MBC6, or MBC7) [wo]",flags:{RAMB_RTC_S:{description:"(MBC3 only) seconds counter (0-59)",value:"$08"},RAMB_RTC_M:{description:"(MBC3 only) minutes counter (0-59)",value:"$09"},RAMB_RTC_H:{description:"(MBC3 only) hours counter (0-23)",value:"$0A"},RAMB_RTC_DL:{description:"(MBC3 only) days counter, low byte (0-255)",value:"$0B"},RAMB_RTC_DH:{description:"(MBC3 only) days counter, high bit and other flags",value:"$0C"},B_RAMB_RTC_DH_CARRY:{description:"(MBC3 only) 1 = days counter overflowed [wo]",value:"7"},B_RAMB_RTC_DH_HALT:{description:"(MBC3 only) 0 = run timer, 1 = stop timer [wo]",value:"6"},B_RAMB_RTC_DH_HIGH:{description:"(MBC3 only) days counter, high bit (bit 8) [wo]",value:"0"},RAMB_RTC_DH_CARRY:{description:"(MBC3 only) 1 = days counter overflowed [wo]",value:"%10000000"},RAMB_RTC_DH_HALT:{description:"(MBC3 only) 0 = run timer, 1 = stop timer [wo]",value:"%01000000"},RAMB_RTC_DH_HIGH:{description:"(MBC3 only) days counter, high bit (bit 8) [wo]",value:"%00000001"},B_RAMB_RUMBLE:{description:"(MBC5 and MBC7 only) enable the rumble motor (if any)",value:"3"},RAMB_RUMBLE:{description:"(MBC5 and MBC7 only) enable the rumble motor (if any)",value:"%00001000"},RAMB_RUMBLE_OFF:{description:"(MBC5 and MBC7 only) disable the rumble motor (if any)",value:"%00000000"},RAMB_RUMBLE_ON:{description:"(MBC5 and MBC7 only) enable the rumble motor (if any)",value:"%00001000"}}},rBMODE:{value:"$6000",description:"(MBC1 and MMM01 only) Banking mode select [wo]",flags:{BMODE_SIMPLE:{description:"locks ROMB and RAMB to bank 0",value:"$00"},BMODE_ADVANCED:{description:"allows bank-switching with RAMB",value:"$01"}}},rROM2B:{value:"$2100",description:"(MBC2 only) ROM bank number [wo]"},rRTCLATCH:{value:"$6000",description:"(MBC3 only) RTC latch clock data [wo]",flags:{RTCLATCH_START:{description:"Write $00 then $01 to latch the current time into RTCREG",value:"$00"},RTCLATCH_FINISH:{description:"Write $00 then $01 to latch the current time into RTCREG",value:"$01"}}},rRTCREG:{value:"$A000",description:"(MBC3 only) RTC register [r/w]"},rROMB0:{value:"$2000",description:"(MBC5 only) ROM bank number low byte (bits 0-7) [wo]"},rROMB1:{value:"$3000",description:"(MBC5 only) ROM bank number high bit (bit 8) [wo]"},rRAMBA:{value:"$0400",description:"(MBC6 only) RAM bank A number [wo]"},rRAMBB:{value:"$0800",description:"(MBC6 only) RAM bank B number [wo]"},rFLASH:{value:"$0C00",description:"(MBC6 only) Whether the flash chip can be accessed [wo]"},rFMODE:{value:"$1000",description:"(MBC6 only) Write mode select for the flash chip"},rROMBA:{value:"$2000",description:"(MBC6 only) ROM/Flash bank A number [wo]"},rFLASHA:{value:"$2800",description:"(MBC6 only) ROM/Flash bank A select [wo]"},rROMBB:{value:"$3000",description:"(MBC6 only) ROM/Flash bank B number [wo]"},rFLASHB:{value:"$3800",description:"(MBC6 only) ROM/Flash bank B select [wo]"},rRAMREG:{value:"$4000",description:"(MBC7 only) Enable RAM register access [wo]",flags:{RAMREG_ENABLE:{description:"Enable RAM register access",value:"$40"}}},rACCLATCH0:{value:"$A000",description:"(MBC7 only) Latch accelerometer start [wo]",flags:{ACCLATCH0_START:{description:"Write $55 to ACCLATCH0 to erase the latched data",value:"$55"}}},rACCLATCH1:{value:"$A010",description:"(MBC7 only) Latch accelerometer finish [wo]",flags:{ACCLATCH1_FINISH:{description:"Write $AA to ACCLATCH1 to latch the accelerometer and update ACCEL*",value:"$AA"}}},rACCELX0:{value:"$A020",description:"(MBC7 only) Accelerometer X value low byte [ro]"},rACCELX1:{value:"$A030",description:"(MBC7 only) Accelerometer X value high byte [ro]"},rACCELY0:{value:"$A040",description:"(MBC7 only) Accelerometer Y value low byte [ro]"},rACCELY1:{value:"$A050",description:"(MBC7 only) Accelerometer Y value high byte [ro]"},rEEPROM:{value:"$A080",description:"(MBC7 only) EEPROM access [r/w]"},rIRREG:{value:"$A000",description:"(HuC1 only) IR register [r/w]",flags:{IR_LED_OFF:{description:"(HuC1 only) the IR transmitter does not see light",value:"$C0"},IR_LED_ON:{description:"(HuC1 only) the IR transmitter sees light",value:"$C1"}}},SCREEN_WIDTH_PX:{description:"width of screen in pixels",value:"160"},SCREEN_HEIGHT_PX:{description:"height of screen in pixels",value:"144"},SCREEN_WIDTH:{description:"width of screen in bytes",value:"20"},SCREEN_HEIGHT:{description:"height of screen in bytes",value:"18"},SCREEN_AREA:{description:"size of screen in bytes",value:"360"},TILEMAP_WIDTH_PX:{description:"width of tilemap in pixels",value:"256"},TILEMAP_HEIGHT_PX:{description:"height of tilemap in pixels",value:"256"},TILEMAP_WIDTH:{description:"width of tilemap in bytes",value:"32"},TILEMAP_HEIGHT:{description:"height of tilemap in bytes",value:"32"},TILEMAP_AREA:{description:"size of tilemap in bytes",value:"1024"},TILE_WIDTH:{description:"width of tile in pixels",value:"8"},TILE_HEIGHT:{description:"height of tile in pixels",value:"8"},TILE_SIZE:{description:"size of tile in bytes (2 bits/pixel)",value:"16"},COLOR_SIZE:{description:"size of color in bytes (little-endian BGR555)",value:"2"},PAL_COLORS:{description:"colors per palette",value:"4"},PAL_SIZE:{description:"size of palette in bytes",value:"8"},COLOR_CH_WIDTH:{description:"bits per RGB color channel",value:"5"},COLOR_CH_MAX:{description:"maximum value of RGB color channel",value:"31"},B_COLOR_RED:{description:"color bits 4-0",value:"0"},B_COLOR_GREEN:{description:"color bits 9-5",value:"5"},B_COLOR_BLUE:{description:"color bits 14-10",value:"10"},COLOR_RED:{description:"for the low color byte",value:"%000_11111"},COLOR_GREEN_LOW:{description:"for the low color byte",value:"%111_00000"},COLOR_GREEN_HIGH:{description:"for the high color byte",value:"%0_00000_11"},COLOR_BLUE:{description:"for the high color byte",value:"%0_11111_00"},SHADE_WHITE:{description:"(DMG only) grayscale shade index 0 (for BGP, OBP0, and OBP1)",value:"%00"},SHADE_LIGHT:{description:"(DMG only) grayscale shade index 1 (for BGP, OBP0, and OBP1)",value:"%01"},SHADE_DARK:{description:"(DMG only) grayscale shade index 2 (for BGP, OBP0, and OBP1)",value:"%10"},SHADE_BLACK:{description:"(DMG only) grayscale shade index 3 (for BGP, OBP0, and OBP1)",value:"%11"},TILEMAP0:{description:"$9800-$9BFF",value:"$9800"},TILEMAP1:{description:"$9C00-$9FFF",value:"$9C00"},B_BG_PRIO:{description:"(CGB only) whether the BG tile colors 1-3 are drawn above OBJs",value:"7"},B_BG_YFLIP:{description:"(CGB only) whether the whole BG tile is flipped vertically",value:"6"},B_BG_XFLIP:{description:"(CGB only) whether the whole BG tile is flipped horizontally",value:"5"},B_BG_BANK1:{description:"(CGB only) which VRAM bank the BG tile is taken from",value:"3"},BG_PALETTE:{description:"(CGB only) which palette the BG tile uses",value:"%00000_111"},BG_PRIO:{description:"(CGB only) whether the BG tile colors 1-3 are drawn above OBJs",value:"%10000000"},BG_YFLIP:{description:"(CGB only) whether the whole BG tile is flipped vertically",value:"%01000000"},BG_XFLIP:{description:"(CGB only) whether the whole BG tile is flipped horizontally",value:"%00100000"},BG_BANK0:{description:"(CGB only) the BG tile is taken from VRAM bank 0",value:"%00000000"},BG_BANK1:{description:"(CGB only) the BG tile is taken from VRAM bank 1",value:"%00001000"},OAMA_Y:{description:"OAM attribute field offset for OBJ Y coordinate",value:"0",flags:{OAM_Y_OFS:{description:"subtract 16 from what's written to OAM to get the real Y position",value:"16"}}},OAMA_X:{description:"OAM attribute field offset for OBJ X coordinate",value:"1",flags:{OAM_X_OFS:{description:"subtract 8 from what's written to OAM to get the real X position",value:"8"}}},OAMA_TILEID:{description:"OAM attribute field offset for OBJ tile ID",value:"2"},OAMA_FLAGS:{description:"OAM attribute field offset for OBJ attribute flags",value:"3",flags:{B_OAM_PRIO:{description:"whether the OBJ is drawn below BG colors 1-3",value:"7"},B_OAM_YFLIP:{description:"whether the whole OBJ is flipped vertically",value:"6"},B_OAM_XFLIP:{description:"whether the whole OBJ is flipped horizontally",value:"5"},B_OAM_PAL1:{description:"(DMG only) which of the two palettes the OBJ uses",value:"4"},B_OAM_BANK1:{description:"(CGB only) which VRAM bank the OBJ takes its tile(s) from",value:"3"},OAM_PALETTE:{description:"(CGB only) which palette the OBJ uses",value:"%00000_111"},OAM_PRIO:{description:"whether the OBJ is drawn below BG colors 1-3",value:"%10000000"},OAM_YFLIP:{description:"whether the whole OBJ is flipped vertically",value:"%01000000"},OAM_XFLIP:{description:"whether the whole OBJ is flipped horizontally",value:"%00100000"},OAM_PAL0:{description:"(DMG only) which of the two palettes the OBJ uses",value:"%00000000"},OAM_PAL1:{description:"(DMG only) which of the two palettes the OBJ uses",value:"%00010000"},OAM_BANK0:{description:"(CGB only) which VRAM bank the OBJ takes its tile(s) from",value:"%00000000"},OAM_BANK1:{description:"(CGB only) which VRAM bank the OBJ takes its tile(s) from",value:"%00001000"}}},OBJ_SIZE:{description:"size of OBJ in bytes",value:"4"},OAM_COUNT:{description:"how many OBJs there are room for in OAM",value:"40"},OAM_SIZE:{description:"size of OAM RAM in bytes",value:"160"},INT_HANDLER_VBLANK:{description:"VBlank interrupt handler address",value:"$0040"},INT_HANDLER_STAT:{description:"STAT interrupt handler address",value:"$0048"},INT_HANDLER_TIMER:{description:"timer interrupt handler address",value:"$0050"},INT_HANDLER_SERIAL:{description:"serial interrupt handler address",value:"$0058"},INT_HANDLER_JOYPAD:{description:"joypad interrupt handler address",value:"$0060"},BOOTUP_A_DMG:{description:"Register A = CPU type",value:"$01"},BOOTUP_A_CGB:{description:"Register A = CPU type",value:"$11"},BOOTUP_A_MGB:{description:"Register A = CPU type",value:"$FF"},BOOTUP_A_SGB:{description:"Register A = CPU type",value:"$01"},BOOTUP_A_SGB2:{description:"Register A = CPU type",value:"$FF"},B_BOOTUP_B_AGB:{description:"Register B = CPU qualifier (if A is BOOTUP_A_CGB)",value:"0"},BOOTUP_B_CGB:{description:"Register B = CPU qualifier (if A is BOOTUP_A_CGB)",value:"%00000000"},BOOTUP_B_AGB:{description:"Register B = CPU qualifier (if A is BOOTUP_A_CGB)",value:"%00000001"},BOOTUP_C_DMG:{description:"Register C = CPU qualifier",value:"$13"},BOOTUP_C_SGB:{description:"Register C = CPU qualifier",value:"$14"},BOOTUP_C_CGB:{description:"Register C = CPU qualifier (CGB or AGB)",value:"$00"},BOOTUP_D_MONO:{description:"Register D = color qualifier (DMG, MGB, SGB, or CGB or AGB in DMG mode)",value:"$00"},BOOTUP_D_COLOR:{description:"Register D = color qualifier (CGB or AGB)",value:"$FF"},BOOTUP_E_DMG0:{description:"Register E = CPU qualifier",value:"$C1"},BOOTUP_E_DMG:{description:"Register E = CPU qualifier",value:"$C8"},BOOTUP_E_SGB:{description:"Register E = CPU qualifier",value:"$00"},BOOTUP_E_CGB_DMGMODE:{description:"Register E = CPU qualifier (CGB or AGB in DMG mode)",value:"$08"},BOOTUP_E_CGB:{description:"Register E = CPU qualifier (CGB or AGB)",value:"$56"},B_PAD_DOWN:{description:"whether Down is pressed",value:"7"},B_PAD_UP:{description:"whether Up is pressed",value:"6"},B_PAD_LEFT:{description:"whether Left is pressed",value:"5"},B_PAD_RIGHT:{description:"whether Right is pressed",value:"4"},B_PAD_START:{description:"whether Start is pressed",value:"3"},B_PAD_SELECT:{description:"whether Select is pressed",value:"2"},B_PAD_B:{description:"whether B is pressed",value:"1"},B_PAD_A:{description:"whether A is pressed",value:"0"},PAD_CTRL_PAD:{description:"whether any Control Pad directions are pressed",value:"%1111_0000"},PAD_BUTTONS:{description:"whether any buttons are pressed",value:"%0000_1111"},PAD_DOWN:{description:"whether Down is pressed",value:"%10000000"},PAD_UP:{description:"whether Up is pressed",value:"%01000000"},PAD_LEFT:{description:"whether Left is pressed",value:"%00100000"},PAD_RIGHT:{description:"whether Right is pressed",value:"%00010000"},PAD_START:{description:"whether Start is pressed",value:"%00001000"},PAD_SELECT:{description:"whether Select is pressed",value:"%00000100"},PAD_B:{description:"whether B is pressed",value:"%00000010"},PAD_A:{description:"whether A is pressed",value:"%00000001"},B_PAD_SWAP_START:{description:"whether Start is pressed",value:"7"},B_PAD_SWAP_SELECT:{description:"whether Select is pressed",value:"6"},B_PAD_SWAP_B:{description:"whether B is pressed",value:"5"},B_PAD_SWAP_A:{description:"whether A is pressed",value:"4"},B_PAD_SWAP_DOWN:{description:"whether Down is pressed",value:"3"},B_PAD_SWAP_UP:{description:"whether Up is pressed",value:"2"},B_PAD_SWAP_LEFT:{description:"whether Left is pressed",value:"1"},B_PAD_SWAP_RIGHT:{description:"whether Right is pressed",value:"0"},PAD_SWAP_CTRL_PAD:{description:"whether any Control Pad directions are pressed",value:"%0000_1111"},PAD_SWAP_BUTTONS:{description:"whether any buttons are pressed",value:"%1111_0000"},PAD_SWAP_START:{description:"whether Start is pressed",value:"%10000000"},PAD_SWAP_SELECT:{description:"whether Select is pressed",value:"%01000000"},PAD_SWAP_B:{description:"whether B is pressed",value:"%00100000"},PAD_SWAP_A:{description:"whether A is pressed",value:"%00010000"},PAD_SWAP_DOWN:{description:"whether Down is pressed",value:"%00001000"},PAD_SWAP_UP:{description:"whether Up is pressed",value:"%00000100"},PAD_SWAP_LEFT:{description:"whether Left is pressed",value:"%00000010"},PAD_SWAP_RIGHT:{description:"whether Right is pressed",value:"%00000001"}};for(var mt in Ke){if(typeof Ke[mt].flags=="string"&&(Ke[mt].flags=Ke[Ke[mt].flags].flags),Ke[mt].flags)for(var Fr in Ke[mt].flags)Ke[Fr]=Ke[mt].flags[Fr];Ke[mt].alias&&(Ke[Ke[mt].alias]=Object.assign({},Ke[mt]),Ke[Ke[mt].alias].alias=mt)}const{TextHighlightRules:Wi}=await xn("ace/mode/text_highlight_rules"),zi="\\b(?:"+Object.keys(Ke).join("|")+")\\b";class Gi extends Wi{constructor(){super(),this.$rules={start:[{token:"keyword.control.assembly",regex:"\\b(?:ADC|ADD|AND|BIT|CALL|CCF|CP|CPL|DAA|DEC|DI|EI|HALT|INC|JP|JR|LD|LDD|LDH|LDI|LDIO|NOP|OR|POP|PUSH|RES|RET|RETI|RL|RLA|RLC|RLCA|RR|RRA|RRC|RRCA|RST|SBC|SCF|SET|SLA|SRA|SRL|STOP|SUB|SWAP|XOR)\\b",caseInsensitive:!0},{token:"keyword.control.sections",regex:"\\b(?:HRAM|OAM|ROM0|ROMX|SRAM|VRAM|WRAM0|WRAMX)\\b",caseInsensitive:!0},{token:"keyword.control.reserved",regex:"\\b(?:ACOS|ALIGN|ASIN|ASSERT|ATAN|ATAN2|BANK|BITWIDTH|BREAK|CEIL|CHARCMP|CHARLEN|CHARMAP|CHARSIZE|CHARSUB|CHARVAL|COS|DB|DEF|DIV|DL|DS|DW|ELIF|ELSE|ENDC|ENDL|ENDM|ENDR|ENDSECTION|ENDU|EQU|EQUS|EXPORT|FAIL|FATAL|FLOOR|FMOD|FOR|FRAGMENT|HIGH|IF|INCBIN|INCHARMAP|INCLUDE|ISCONST|LOAD|LOG|LOW|MACRO|MUL|NEWCHARMAP|NEXTU|OPT|POPC|POPO|POPS|POW|PRINT|PRINTLN|PURGE|PUSHC|PUSHO|PUSHS|RB|REDEF|REPT|REVCHAR|ROUND|RSRESET|RSSET|RW|SECTION|SETCHARMAP|SHIFT|SIN|SIZEOF|STARTOF|STATIC_ASSERT|STRCAT|STRCHAR|STRCMP|STRFIND|STRFMT|STRIN|STRLEN|STRLWR|STRRFIND|STRRIN|STRRPL|STRSLICE|STRSUB|STRUPR|TAN|TZCOUNT|UNION|WARN)\\b",caseInsensitive:!0},{token:"variable.constant",regex:zi,caseInsensitive:!0},{token:"variable.parameter.register.assembly",regex:"\\b(?:A|B|C|D|E|H|L|AF|BC|DE|HL|HLD|HLI|SP)\\b",caseInsensitive:!0},{token:"variable.parameter.condition.assembly",regex:"\\b(?:Z|NZ|NC)\\b",caseInsensitive:!0},{token:"constant.numeric.decimal.assembly",regex:"\\b[0-9]+\\b"},{token:"constant.numeric.binary.assembly",regex:"\\%[0-1]+\\b"},{token:"constant.numeric.binary.assembly",regex:"\\b0b[0-1]+\\b",caseInsensitive:!0},{token:"constant.numeric.quaternary.assembly",regex:"\\`[0-3]+\\b"},{token:"constant.numeric.octal.assembly",regex:"\\&[0-7]+\\b"},{token:"constant.numeric.octal.assembly",regex:"\\b0o[0-7]+\\b",caseInsensitive:!0},{token:"constant.numeric.hexadecimal.assembly",regex:"\\$[0-9A-F]+\\b",caseInsensitive:!0},{token:"constant.numeric.hexadecimal.assembly",regex:"\\b0x[0-9A-F]+\\b",caseInsensitive:!0},{token:"string.assembly",regex:/"([^\\"]|\\.)*"/},{token:"entity.name.function.assembly",regex:"^\\s*%%[\\w.]+?:$"},{token:"entity.name.function.assembly",regex:"^\\s*%\\$[\\w.]+?:$"},{token:"entity.name.function.assembly",regex:"^[\\w.]+?:"},{token:"comment.assembly",regex:";.*$"}]},this.normalizeRules()}static metaData={fileTypes:["asm"],name:"Game Boy SM83",scopeName:"source.assembly"}}const{FoldMode:qi}=await xn("ace/mode/folding/coffee");class Vi extends qi{constructor(){super()}getFoldWidgetRange(X,g,I){var z=this.indentationBlock(X,I);if(z)return z;var D=/\S/,S=X.getLine(I),A=S.search(D);if(!(A==-1||S[A]!="#")){for(var s=S.length,h=X.getLength(),o=I,n=I;++I<h;){S=X.getLine(I);var i=S.search(D);if(i!=-1){if(S[i]!="#")break;n=I}}if(n>o){var t=X.getLine(n).length;return new ace.Range(o,s,n,t)}}}getFoldWidget(X,g,I){var z=X.getLine(I),D=z.search(/\S/),S=X.getLine(I+1),A=X.getLine(I-1),s=A.search(/\S/),h=S.search(/\S/);if(D==-1)return X.foldWidgets[I-1]=s!=-1&&s<h?"start":"","";if(s==-1){if(D==h&&z[D]=="#"&&S[D]=="#")return X.foldWidgets[I-1]="",X.foldWidgets[I+1]="","start"}else if(s==D&&z[D]=="#"&&A[D]=="#"&&X.getLine(I-2).search(/\S/)==-1)return X.foldWidgets[I-1]="start",X.foldWidgets[I+1]="","";return s!=-1&&s<D?X.foldWidgets[I-1]="start":X.foldWidgets[I-1]="",D<h?"start":""}}const{Mode:ji}=await xn("ace/mode/text");class Yi extends ji{static lineCommentStart=[";"];static $id="ace/mode/sm83";constructor(){super(),this.HighlightRules=Gi,this.foldingRules=new Vi,this.$behaviour=this.$defaultBehaviour}}ace.define("ace/mode/sm83",["exports"],ee=>Object.assign(ee,{Mode:Yi}));const{Tooltip:Nr}=await xn("ace/tooltip"),Pr=await xn("ace/lib/event");class Ki extends Nr{token={};range=new On.Range;constructor(X){super(X.container),!X.tokenTooltip&&(X.tokenTooltip=this,this.editor=X,this.update=this.update.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseOut=this.onMouseOut.bind(this),Pr.addListener(X.renderer.scroller,"mousemove",this.onMouseMove),Pr.addListener(X.renderer.content,"mouseout",this.onMouseOut))}update(){this.$timer=null;var X=this.editor.renderer;this.lastT-(X.timeStamp||0)>1e3&&(X.rect=null,X.timeStamp=this.lastT,this.maxHeight=window.innerHeight,this.maxWidth=window.innerWidth);var g=X.rect||(X.rect=X.scroller.getBoundingClientRect()),I=(this.x+X.scrollLeft-g.left-X.$padding)/X.characterWidth,z=Math.floor((this.y+X.scrollTop-g.top)/X.lineHeight),D=Math.round(I),S={row:z,column:D},A=this.editor.session,s=A.screenToDocumentPosition(S.row,S.column),h=A.getTokenAt(s.row,s.column);if(!h&&!A.getLine(s.row)&&(h={type:"",value:"",state:A.bgTokenizer.getState(0)}),!h){this.hide();return}var o="";if(h.type=="variable.constant"&&h.value in Ke){var n=Ke[h.value];if(o=n.description,n.value&&(o+=`
Value: `+n.value),n.flags){o+=`
`;for(var i in n.flags)o+=`
`+i+": "+n.flags[i].description}}else{this.hide();return}this.tokenText!=o&&(this.setText(o),this.width=this.getWidth(),this.height=this.getHeight(),this.tokenText=o),this.show(null,this.x,this.y),this.token=h}onMouseMove(X){this.x=X.clientX,this.y=X.clientY,this.isOpen&&(this.lastT=X.timeStamp,this.setPosition(this.x,this.y)),this.$timer||(this.$timer=setTimeout(this.update,100))}onMouseOut(X){X&&X.currentTarget.contains(X.relatedTarget)||(this.hide(),this.$timer=clearTimeout(this.$timer))}setPosition(X,g){X+10+this.width>this.maxWidth&&(X=window.innerWidth-this.width-10),(g>window.innerHeight*.75||g+20+this.height>this.maxHeight)&&(g=g-this.height-30),Nr.prototype.setPosition.call(this,X+10,g+20)}destroy(){this.onMouseOut(),event.removeListener(this.editor.renderer.scroller,"mousemove",this.onMouseMove),event.removeListener(this.editor.renderer.content,"mouseout",this.onMouseOut),delete this.editor.tokenTooltip}}var Ji=[{name:"adc a, r8",description:"a = a + r8 + carry",optionalA:!0,cycles:1,bytes:1,flags:{z:"Set if result is 0",n:"0",h:"Set if overflow from bit 3",c:"Set if overflow from bit 7"}},{name:"adc a, [hl]",description:"a = a + [hl] + carry",optionalA:!0,cycles:2,bytes:1,flags:{z:"Set if result is 0",n:"0",h:"Set if overflow from bit 3",c:"Set if overflow from bit 7"}},{name:"adc a, n8",description:"a = a + n8 + carry",optionalA:!0,cycles:2,bytes:2,flags:{z:"Set if result is 0",n:"0",h:"Set if overflow from bit 3",c:"Set if overflow from bit 7"}},{name:"add a, r8",description:"a = a + r8",optionalA:!0,cycles:1,bytes:1,flags:{z:"Set if result is 0",n:"0",h:"Set if overflow from bit 3",c:"Set if overflow from bit 7"}},{name:"add a, [hl]",description:"a = a + [hl]",optionalA:!0,cycles:2,bytes:1,flags:{z:"Set if result is 0",n:"0",h:"Set if overflow from bit 3",c:"Set if overflow from bit 7"}},{name:"add a, n8",description:"a = a + n8",optionalA:!0,cycles:2,bytes:2,flags:{z:"Set if result is 0",n:"0",h:"Set if overflow from bit 3",c:"Set if overflow from bit 7"}},{name:"add hl, r16",description:"hl = hl + r16",cycles:2,bytes:1,flags:{n:"0",h:"Set if overflow from bit 11",c:"Set if overflow from bit 15"}},{name:"add hl, sp",description:"hl = hl + sp",cycles:2,bytes:1,flags:{n:"0",h:"Set if overflow from bit 11",c:"Set if overflow from bit 15"}},{name:"add sp, e8",description:"sp = sp + e8",cycles:4,bytes:2,flags:{z:"0",n:"0",h:"Set if overflow from bit 3",c:"Set if overflow from bit 7"}},{name:"and a, r8",description:"a = a & r8",optionalA:!0,cycles:1,bytes:1,flags:{z:"Set if result is 0",n:"0",h:"1",c:"0"}},{name:"and a, [hl]",description:"a = a & [hl]",optionalA:!0,cycles:2,bytes:1,flags:{z:"Set if result is 0",n:"0",h:"1",c:"0"}},{name:"and a, n8",description:"a = a & n8",optionalA:!0,cycles:2,bytes:2,flags:{z:"Set if result is 0",n:"0",h:"1",c:"0"}},{name:"bit u3, r8",description:"Sets Z if bit u3 in r8 is 0",cycles:2,bytes:2,flags:{z:"Set if selected bit is 0",n:"0",h:"1"}},{name:"bit u3, [hl]",description:"Sets Z if bit u3 in [hl] is 0",cycles:3,bytes:2,flags:{z:"Set if selected bit is 0",n:"0",h:"1"}},{name:"call n16",description:"Calls address n16",cycles:6,bytes:3,flags:{}},{name:"call cc, n16",description:"Calls address n16 if condition cc is met",cycles:"6/3",bytes:3,flags:{}},{name:"ccf",description:"Complements the carry flag",cycles:1,bytes:1,flags:{n:"0",h:"0",c:"Complemented"}},{name:"cp a, r8",description:"flags = a - r8",optionalA:!0,cycles:1,bytes:1,flags:{z:"Set if result is 0 (a == r8)",n:"1",h:"Set if no borrow from bit 4",c:"Set if no borrow (a < r8)"}},{name:"cp a, [hl]",description:"flags = a - [hl]",optionalA:!0,cycles:2,bytes:1,flags:{z:"Set if result is 0 (a == [hl])",n:"1",h:"Set if no borrow from bit 4",c:"Set if no borrow (a < [hl])"}},{name:"cp a, n8",description:"flags = a - n8",optionalA:!0,cycles:2,bytes:2,flags:{z:"Set if result is 0 (a == n8)",n:"1",h:"Set if no borrow from bit 4",c:"Set if no borrow (a < n8)"}},{name:"cpl",description:"a = ~a",cycles:1,bytes:1,flags:{n:"1",h:"1"}},{name:"daa",description:"Decimal adjusts a to correct BCD value after arithmetic",cycles:1,bytes:1,flags:{z:"Set if result is 0",h:"0",c:"Set or reset based on operation"}},{name:"dec r8",description:"r8 -= 1",cycles:1,bytes:1,flags:{z:"Set if result is 0",n:"1",h:"Set if no borrow from bit 4"}},{name:"dec [hl]",description:"[hl] -= 1",cycles:3,bytes:1,flags:{z:"Set if result is 0",n:"1",h:"Set if no borrow from bit 4"}},{name:"dec r16",description:"r16 -= 1",cycles:2,bytes:1,flags:{}},{name:"dec sp",description:"sp -= 1",cycles:2,bytes:1,flags:{}},{name:"di",description:"Disables interrupts",cycles:1,bytes:1,flags:{}},{name:"ei",description:"Enables interrupts",cycles:1,bytes:1,flags:{}},{name:"halt",description:"Puts the CPU into low power mode",cycles:"-",bytes:1,flags:{}},{name:"inc r8",description:"r8 += 1",cycles:1,bytes:1,flags:{z:"Set if result is 0",n:"0",h:"Set if overflow from bit 3"}},{name:"inc [hl]",description:"[hl] += 1",cycles:3,bytes:1,flags:{z:"Set if result is 0",n:"0",h:"Set if overflow from bit 3"}},{name:"inc r16",description:"r16 += 1",cycles:2,bytes:1,flags:{}},{name:"inc sp",description:"sp += 1",cycles:2,bytes:1,flags:{}},{name:"jp n16",description:"Jumps to address n16",cycles:4,bytes:3,flags:{}},{name:"jp cc, n16",description:"Jumps to address n16 if condition cc is met",cycles:"4/3",bytes:3,flags:{}},{name:"jp hl",description:"Jumps to address in hl",cycles:1,bytes:1,flags:{}},{name:"jr e8",description:"Relative jumps by adding e8 to pc",cycles:3,bytes:2,flags:{}},{name:"jr cc, e8",description:"Relative jumps by adding e8 to pc if condition cc is met",cycles:"3/2",bytes:2,flags:{}},{name:"ld r8, r8",description:"Copies the value from the right register into the left",cycles:1,bytes:1,flags:{}},{name:"ld r8, n8",description:"r8 = n8",cycles:2,bytes:2,flags:{}},{name:"ld r16, n16",description:"r16 = n16",cycles:3,bytes:3,flags:{}},{name:"ld [hl], r8",description:"[hl] = r8",cycles:2,bytes:1,flags:{}},{name:"ld [hl], n8",description:"[hl] = n8",cycles:3,bytes:2,flags:{}},{name:"ld r8, [hl]",description:"r8 = [hl]",cycles:2,bytes:1,flags:{}},{name:"ld [r16], a",description:"[r16] = a",cycles:2,bytes:1,flags:{}},{name:"ld [n16], a",description:"[n16] = a",cycles:4,bytes:3,flags:{}},{name:"ldh [$ff00+n8], a",description:"[$ff00+n8] = a",cycles:3,bytes:2,flags:{}},{name:"ld [$ff00+c], a",description:"[$ff00+c] = a",cycles:2,bytes:1,flags:{}},{name:"ld a, [r16]",description:"a = [r16]",cycles:2,bytes:1,flags:{}},{name:"ld a, [n16]",description:"a = [n16]",cycles:4,bytes:3,flags:{}},{name:"ldh a, [$ff00+n8]",description:"a = [$ff00+n8]",cycles:3,bytes:2,flags:{}},{name:"ld a, [$ff00+c]",description:"a = [$ff00+c]",cycles:2,bytes:1,flags:{}},{name:"ld [hl+], a",description:"[hl] = a, hl += 1",aliasHLI:!0,cycles:2,bytes:1,flags:{}},{name:"ld [hl-], a",description:"[hl] = a, hl -= 1",aliasHLD:!0,cycles:2,bytes:1,flags:{}},{name:"ld a, [hl+]",description:"a = [hl], hl += 1",aliasHLI:!0,cycles:2,bytes:1,flags:{}},{name:"ld a, [hl-]",description:"a = [hl], hl -= 1",aliasHLD:!0,cycles:2,bytes:1,flags:{}},{name:"ld sp, n16",description:"sp = n16",cycles:3,bytes:3,flags:{}},{name:"ld [n16], sp",description:"[n16, n16 + 1] = sp",cycles:5,bytes:3,flags:{}},{name:"ld hl, sp+e8",description:"hl = sp + e8",cycles:3,bytes:2,flags:{z:"0",n:"0",h:"Set if overflow from bit 3",c:"Set if overflow from bit 7"}},{name:"ld sp, hl",description:"sp = hl",cycles:2,bytes:1,flags:{}},{name:"nop",description:"No operation",cycles:1,bytes:1,flags:{}},{name:"or a, r8",description:"a = a | r8",optionalA:!0,cycles:1,bytes:1,flags:{z:"Set if result is 0",n:"0",h:"0",c:"0"}},{name:"or a, [hl]",description:"a = a | [hl]",optionalA:!0,cycles:2,bytes:1,flags:{z:"Set if result is 0",n:"0",h:"0",c:"0"}},{name:"or a, n8",description:"a = a | n8",optionalA:!0,cycles:2,bytes:2,flags:{z:"Set if result is 0",n:"0",h:"0",c:"0"}},{name:"pop af",description:"Pops the stack into af",cycles:3,bytes:1,flags:{}},{name:"pop r16",description:"Pops the stack into r16",cycles:3,bytes:1,flags:{}},{name:"push af",description:"Pushes af onto the stack",cycles:4,bytes:1,flags:{}},{name:"push r16",description:"Pushes r16 onto the stack",cycles:4,bytes:1,flags:{}},{name:"res u3, r8",description:"Sets the bit u3 in r8 to 0",cycles:2,bytes:2,flags:{}},{name:"res u3, [hl]",description:"Sets the bit u3 in [hl] to 0",cycles:4,bytes:2,flags:{}},{name:"ret",description:"Returns from the current subroutine",cycles:4,bytes:1,flags:{}},{name:"ret cc",description:"Returns from the current subroutine if condition cc is met",cycles:"5/2",bytes:1,flags:{}},{name:"reti",description:"Returns from the current subroutine and enables interrupts",cycles:4,bytes:1,flags:{}},{name:"rl r8",description:"Rotates r8 left, sets bit 0 to carry, sets carry to old bit 7",cycles:2,bytes:2,flags:{z:"Set if result is 0",n:"0",h:"0",c:"Set to old bit 7"}},{name:"rl [hl]",description:"Rotates [hl] left, sets bit 0 to carry, sets carry to old bit 7",cycles:4,bytes:2,flags:{z:"Set if result is 0",n:"0",h:"0",c:"Set to old bit 7"}},{name:"rla",description:"Rotates a left, sets bit 0 to carry, sets carry to old bit 7",cycles:1,bytes:1,flags:{z:"0",n:"0",h:"0",c:"Set to old bit 7"}},{name:"rlc r8",description:"Rotates r8 left, sets bit 0 and carry to old bit 7",cycles:2,bytes:2,flags:{z:"Set if result is 0",n:"0",h:"0",c:"Set to old bit 7"}},{name:"rlc [hl]",description:"Rotates [hl] left, sets bit 0 and carry to old bit 7",cycles:4,bytes:2,flags:{z:"Set if result is 0",n:"0",h:"0",c:"Set to old bit 7"}},{name:"rlca",description:"Rotates a left, sets bit 0 and carry to old bit 7",cycles:1,bytes:1,flags:{z:"0",n:"0",h:"0",c:"Set to old bit 7"}},{name:"rr r8",description:"Rotates r8 right, sets bit 7 to carry, sets carry to old bit 0",cycles:2,bytes:2,flags:{z:"Set if result is 0",n:"0",h:"0",c:"Set to old bit 0"}},{name:"rr [hl]",description:"Rotates [hl] right, sets bit 7 to carry, sets carry to old bit 0",cycles:4,bytes:2,flags:{z:"Set if result is 0",n:"0",h:"0",c:"Set to old bit 0"}},{name:"rra",description:"Rotates a right, sets bit 7 to carry, sets carry to old bit 0",cycles:1,bytes:1,flags:{z:"0",n:"0",h:"0",c:"Set to old bit 0"}},{name:"rrc r8",description:"Rotates r8 right, sets bit 7 and carry to old bit 0",cycles:2,bytes:2,flags:{z:"Set if result is 0",n:"0",h:"0",c:"Set to old bit 0"}},{name:"rrc [hl]",description:"Rotates [hl] right, sets bit 7 and carry to old bit 0",cycles:4,bytes:2,flags:{z:"Set if result is 0",n:"0",h:"0",c:"Set to old bit 0"}},{name:"rrca",description:"Rotates a right, sets bit 7 and carry to old bit 0",cycles:1,bytes:1,flags:{z:"0",n:"0",h:"0",c:"Set to old bit 0"}},{name:"rst vec",description:"Calls given reset vector",cycles:4,bytes:1,flags:{}},{name:"sbc a, r8",description:"a = a - r8 - c",optionalA:!0,cycles:1,bytes:1,flags:{z:"Set if result is 0",n:"1",h:"Set if no borrow from bit 4",c:"Set if no borrow"}},{name:"sbc a, [hl]",description:"a = a - [hl] - c",optionalA:!0,cycles:2,bytes:1,flags:{z:"Set if result is 0",n:"1",h:"Set if no borrow from bit 4",c:"Set if no borrow"}},{name:"sbc a, n8",description:"a = a - n8 - c",optionalA:!0,cycles:2,bytes:2,flags:{z:"Set if result is 0",n:"1",h:"Set if no borrow from bit 4",c:"Set if no borrow"}},{name:"scf",description:"Sets the carry flag to 1",cycles:1,bytes:1,flags:{n:"0",h:"0",c:"1"}},{name:"set u3, r8",description:"Sets the bit u3 in r8 to 1",cycles:2,bytes:2,flags:{}},{name:"set u3, [hl]",description:"Sets the bit u3 in [hl] to 1",cycles:4,bytes:2,flags:{}},{name:"sla r8",description:"Shifts r8 left, sets carry to old bit 7",cycles:2,bytes:2,flags:{z:"Set if result is 0",n:"0",h:"0",c:"Set to old bit 7"}},{name:"sla [hl]",description:"Shifts [hl] left, sets carry to old bit 7",cycles:4,bytes:2,flags:{z:"Set if result is 0",n:"0",h:"0",c:"Set to old bit 7"}},{name:"sra r8",description:"Shifts r8 right keeping bit 7 unchanged, sets carry to old bit 0",cycles:2,bytes:2,flags:{z:"Set if result is 0",n:"0",h:"0",c:"Set to old bit 0"}},{name:"sra [hl]",description:"Shifts [hl] right keeping bit 7 unchanged, sets carry to old bit 0",cycles:4,bytes:2,flags:{z:"Set if result is 0",n:"0",h:"0",c:"Set to old bit 0"}},{name:"srl r8",description:"Shifts r8 right, sets carry to old bit 0",cycles:2,bytes:2,flags:{z:"Set if result is 0",n:"0",h:"0",c:"Set to old bit 0"}},{name:"srl [hl]",description:"Shifts [hl] right, sets carry to old bit 0",cycles:4,bytes:2,flags:{z:"Set if result is 0",n:"0",h:"0",c:"Set to old bit 0"}},{name:"stop",description:"Puts the CPU into very low power mode",cycles:"-",bytes:"2",flags:{}},{name:"sub a, r8",description:"a = a - r8",optionalA:!0,cycles:1,bytes:1,flags:{z:"Set if result is 0 (a == r8)",n:"1",h:"Set if no borrow from bit 4",c:"Set if no borrow (a < r8)"}},{name:"sub a, [hl]",description:"a = a - [hl]",optionalA:!0,cycles:2,bytes:1,flags:{z:"Set if result is 0 (a == [hl])",n:"1",h:"Set if no borrow from bit 4",c:"Set if no borrow (a < [hl])"}},{name:"sub a, n8",description:"a = a - n8",optionalA:!0,cycles:2,bytes:2,flags:{z:"Set if result is 0 (a == n8)",n:"1",h:"Set if no borrow from bit 4",c:"Set if no borrow (a < n8)"}},{name:"swap r8",description:"Swaps the upper and lower 4 bits in r8",cycles:2,bytes:2,flags:{z:"Set if result is 0",n:"0",h:"0",c:"0"}},{name:"swap [hl]",description:"Swaps the upper and lower 4 bits in [hl]",cycles:4,bytes:2,flags:{z:"Set if result is 0",n:"0",h:"0",c:"0"}},{name:"xor a, r8",description:"a = a ^ r8",optionalA:!0,cycles:1,bytes:1,flags:{z:"Set if result is 0",n:"0",h:"0",c:"0"}},{name:"xor a, [hl]",description:"a = a ^ [hl]",optionalA:!0,cycles:2,bytes:1,flags:{z:"Set if result is 0",n:"0",h:"0",c:"0"}},{name:"xor a, n8",description:"a = a ^ n8",optionalA:!0,cycles:2,bytes:2,flags:{z:"Set if result is 0",n:"0",h:"0",c:"0"}}],jr=[];Ji.forEach(function(ee){var X="<table><tr><td colspan=2>"+ee.description;X+="<tr><td>cycles:<td>"+ee.cycles,X+="<tr><td>size:<td>"+ee.bytes,X+="<tr><td>Flag Z:<td>"+ee.flags.z,X+="<tr><td>Flag N:<td>"+ee.flags.n,X+="<tr><td>Flag H:<td>"+ee.flags.H,X+="<tr><td>Flag C:<td>"+ee.flags.C;var g={caption:ee.name,value:ee.name,meta:"",docHTML:X};g.completer={insertMatch:function(I,z){}},jr.push(g)});var Yr=[];for(var or in Ke){var St=Ke[or],Rn="";if(St.description&&(Rn=St.description.replace(`
`,"<br>")),St.value&&(Rn+="<br><b>Value:</b> "+St.value),St.flags)for(var Ur in St.flags)Rn+="<br><b>"+Ur+":</b> "+St.flags[Ur].description;St.alias&&(Rn+="<br><b>Alias:</b> "+St.alias);var Zi={caption:or,value:or,meta:"",docHTML:Rn};Yr.push(Zi)}var Xi={getCompletions:function(ee,X,g,I,z){var D=X.getLine(g.row),S=D.substr(0,g.column-1).trim();S.trim()==""||S.trim().endsWith(":")?z(null,jr.filter(function(A){return A.value.startsWith(I.toLowerCase())})):z(null,Yr.filter(function(A){return A.value.toLowerCase().startsWith(I.toLowerCase())}))}};On.config.set("basePath","assets/ace");var Je=[],st=null,Un=null,Hn=null,Pn=null,cn=[],sr={};const Qi=ee=>{if(!window.matchMedia)return;const X=window.matchMedia("(prefers-color-scheme: dark)");ee(X.matches),X.addEventListener("change",g=>ee(g.matches))};function Kr(ee,X){var g=On.edit(ee);new Ki(g),Qi(I=>{g.setTheme(I?"ace/theme/tomorrow_night_eighties":"ace/theme/tomorrow")}),g.session.setMode("ace/mode/sm83"),g.setOptions({tabSize:2,useSoftTabs:!0,navigateWithinSoftTabs:!0,enableLiveAutocompletion:!0,enableSnippets:!0}),g.completers=[Xi],g.session.on("change",function(I){g.curOp&&g.curOp.command.name&&(Ot(st,g.getValue()),X())}),g.on("guttermousedown",function(I){var z=I.domEvent.target;if(z.className.indexOf("ace_gutter-cell")!=-1){var D=I.getDocumentPosition().row;no(st,D+1),I.stop()}}),Je.push(g)}function Jr(ee){st!=null&&(sr[st]=Je[0].selection.getCursor()),st=ee,Je[0].setValue(ut()[ee]),Je[0].selection.clearSelection(),Je[0].session.getUndoManager().reset(),st in sr?Je[0].selection.moveCursorToPosition(sr[st]):Je[0].selection.moveCursorTo(0,0),Je[0].scrollToLine(Je[0].selection.getCursor().row,!0),Je[0].focus(),_r(),Xr()}function _r(){var ee=[];for(var[X,g,I,z]of ui())g==st&&ee.push({row:I-1,column:0,type:X,text:z});Je[0].session.setAnnotations(ee)}function Vn(ee,X,g){Un=ee,Hn=X,Xr(g)}function eo(ee,X){cn.push([ee,X]),Mr(),Zr()}function to(ee,X){cn=cn.filter(g=>g[0]!=ee||g[1]!=X),Mr(),Zr()}function no(ee,X){var g=cn.findIndex(I=>I[0]==ee&&I[1]==X);g>-1?to(ee,X):eo(ee,X)}function Zr(){Je[0].session.clearBreakpoints();for(var[ee,X,g]of cn)ee==st&&Je[0].session.setBreakpoint(X-1,g?"ace_breakpoint":"ace_invalid_breakpoint")}function Xr(ee){ee&&st!=null&&st!=Un&&Jr(Un),Pn!=null&&(Je[0].session.removeMarker(Pn),Pn=null),Un==st&&(Pn=Je[0].session.addMarker(new On.Range(Hn-1,0,Hn-1,1),"cpuLineMarker","fullLine"),ee&&Je[0].scrollToLine(Hn-1,!0,!1,function(){}))}function ro(){return st}function Qr(){return cn}function io(){Je[0].renderer.getContainerElement().style.display="none"}function oo(){Je[0].renderer.getContainerElement().style.display="",Je[0].resize(),Je[0].renderer.updateFull()}const so=Object.freeze(Object.defineProperty({__proto__:null,getBreakpoints:Qr,getCurrentFilename:ro,hide:io,register:Kr,setCpuLine:Vn,setCurrentFile:Jr,show:oo,updateErrors:_r},Symbol.toStringTag,{value:"Module"}));var Wn=[4290965700,4289247578,4285423646,4278197037],jn,Rt,on,Qe,Bt,hr,Yn=0;function ei(ee){on=document.getElementById(ee),Qe=document.getElementById("gfxEditorTilesCanvas"),Bt=document.getElementById("gfxEditorDrawCanvas"),hr=document.getElementById("gfxEditorPalette"),new ResizeObserver(function(){Qe.parentElement.style.maxWidth=on.clientWidth,Qe.parentElement.style.maxHeight=on.clientHeight-300,Qe.parentElement.style.display=""}).observe(on),Bt.onmousemove=function(X){var g=X.target.getBoundingClientRect(),I=~~((X.clientX-g.left)/g.width*X.target.width),z=~~((X.clientY-g.top)/g.height*X.target.height);X.preventDefault(),X.buttons!=0&&uo(I,z,Yn)},Bt.onmousedown=Bt.onmousemove,Bt.oncontextmenu=function(){return!1},hr.onmousedown=function(X){var g=X.target.getBoundingClientRect();~~((X.clientX-g.left)/g.width*X.target.width/16);var I=~~((X.clientY-g.top)/g.height*X.target.height/16);X.preventDefault(),Yn=I,Hr()},Hr(),Qe.onmousedown=function(X){var g=X.target.getBoundingClientRect(),I=~~((X.clientX-g.left)/g.width*X.target.width/8),z=~~((X.clientY-g.top)/g.height*X.target.height/8);X.preventDefault(),Xn(I+z*16)}}function ao(ee){jn=ee,Xn(0);var X=ut()[ee],g=~~(X.length/16),I=~~((g+15)/16);Qe.width=16*8,Qe.height=I*8,Qe.style.width=Qe.width*4;for(var z=Qe.getContext("2d"),D=z.getImageData(0,0,Qe.width,Qe.height),S=new Uint32Array(D.data.buffer),A=Qe.width,s=0;s<g;s++){var h=s%16,o=~~(s/16),n=h*8+o*8*A;yr(new Uint8Array(X.buffer,s*16,16),S,n,A)}z.putImageData(D,0,0)}function lo(){on.style.display="none"}function co(){on.style.display=""}function Xn(ee){var X=ut()[jn];ee>=X.length/16&&(ee=X.length/16-1),Rt=ee;var g=Bt.getContext("2d"),I=g.getImageData(0,0,Bt.width,Bt.height),z=new Uint32Array(I.data.buffer);yr(new Uint8Array(X.buffer,ee*16,16),z,0,8),g.putImageData(I,0,0)}function yr(ee,X,g,I){for(var z=0;z<8;z++)for(var D=ee[z*2],S=ee[z*2+1],A=0;A<8;A++){var s=0;D&128>>A&&(s|=1),S&128>>A&&(s|=2),X[g+A+z*I]=Wn[s]}}function uo(ee,X,g){var I=ut()[jn];g&1?I[Rt*16+X*2+0]|=128>>ee:I[Rt*16+X*2+0]&=~(128>>ee),g&2?I[Rt*16+X*2+1]|=128>>ee:I[Rt*16+X*2+1]&=~(128>>ee),Xn(Rt),Ot(jn,I);var z=Qe.getContext("2d"),D=z.getImageData(0,0,Qe.width,Qe.height),S=new Uint32Array(D.data.buffer),A=Qe.width,s=Rt%16,h=~~(Rt/16),o=s*8+h*8*A;yr(new Uint8Array(I.buffer,Rt*16,16),S,o,A),z.putImageData(D,0,0)}function Hr(){for(var ee=hr.getContext("2d"),X=0;X<4;X++)ee.fillStyle="rgb("+(Wn[X]&255)+", "+(Wn[X]>>8&255)+", "+(Wn[X]>>16&255)+")",ee.fillRect(0,X*16,16,16);ee.strokeStyle="#FFF",ee.beginPath(),ee.rect(2.5,Yn*16+2.5,11,11),ee.stroke(),ee.strokeStyle="#000",ee.beginPath(),ee.rect(1.5,Yn*16+1.5,13,13),ee.stroke()}const ho=Object.freeze(Object.defineProperty({__proto__:null,hide:lo,register:ei,setCurrentFile:ao,setTileIndex:Xn,show:co},Symbol.toStringTag,{value:"Module"}));var fo={hide:function(){document.getElementById("nullEditorDiv").style.display="none"},show:function(){document.getElementById("nullEditorDiv").style.display=""},setCurrentFile:function(){}},nn=fo,ti="";function Kn(){return ti}function zt(ee){ti=ee;var X=nn;return typeof ut()[ee]=="string"?nn=so:nn=ho,X!=nn&&(X.hide(),nn.show()),nn.setCurrentFile(ee)}function fr(ee){var X=ee.lastIndexOf(".");if(X<0)return"binary";var g=ee.substr(X+1).toLowerCase();return g=="inc"||g=="asm"||g=="z80"||g=="h"||g=="c"||g=="cpp"||g=="hpp"||g=="txt"?"text":"binary"}const wr=`;******************************************************************************
; Game Boy hardware constant definitions
; https://github.com/gbdev/hardware.inc
;******************************************************************************

; To the extent possible under law, the authors of this work have
; waived all copyright and related or neighboring rights to the work.
; See https://creativecommons.org/publicdomain/zero/1.0/ for details.
; SPDX-License-Identifier: CC0-1.0

; If this file was already included, don't do it again
if !def(HARDWARE_INC)

; Check for the minimum supported RGBDS version
if !def(__RGBDS_MAJOR__) || !def(__RGBDS_MINOR__) || !def(__RGBDS_PATCH__)
    fail "This version of 'hardware.inc' requires RGBDS version 0.5.0 or later"
endc
if __RGBDS_MAJOR__ == 0 && __RGBDS_MINOR__ < 5
    fail "This version of 'hardware.inc' requires RGBDS version 0.5.0 or later."
endc

; Define the include guard and the current hardware.inc version
; (do this after the RGBDS version check since the \`def\` syntax depends on it)
def HARDWARE_INC equ 1
def HARDWARE_INC_VERSION equs "5.3.0"

; Usage: rev_Check_hardware_inc <min_ver>
; Examples:
;     rev_Check_hardware_inc 1.2.3
;     rev_Check_hardware_inc 1.2   (equivalent to 1.2.0)
;     rev_Check_hardware_inc 1     (equivalent to 1.0.0)
MACRO rev_Check_hardware_inc
    if _NARG == 1 ; Actual invocation by the user
        def hw_inc_cur_ver\\@ equs strrpl("{HARDWARE_INC_VERSION}", ".", ",")
        def hw_inc_min_ver\\@ equs strrpl("\\1", ".", ",")
        rev_Check_hardware_inc {hw_inc_cur_ver\\@}, {hw_inc_min_ver\\@}, 0, 0
        purge hw_inc_cur_ver\\@, hw_inc_min_ver\\@
    else ; Recursive invocation
        if \\1 != \\4 || (\\2 < \\5 || (\\2 == \\5 && \\3 < \\6))
            fail "Version \\1.\\2.\\3 of 'hardware.inc' is incompatible with requested version \\4.\\5.\\6"
        endc
    endc
ENDM


;******************************************************************************
; Memory-mapped registers ($FFxx range)
;******************************************************************************

; -- JOYP / P1 ($FF00) --------------------------------------------------------
; Joypad face buttons
def rJOYP equ $FF00

def B_JOYP_GET_BUTTONS  equ 5 ; 0 = reading buttons     [r/w]
def B_JOYP_GET_CTRL_PAD equ 4 ; 0 = reading Control Pad [r/w]
    def JOYP_GET equ %00_11_0000 ; select which inputs to read from the lower nybble
        def JOYP_GET_BUTTONS  equ %00_01_0000 ; reading A/B/Select/Start buttons
        def JOYP_GET_CTRL_PAD equ %00_10_0000 ; reading Control Pad directions
        def JOYP_GET_NONE     equ %00_11_0000 ; reading nothing

def B_JOYP_START  equ 3 ; 0 = Start is pressed  (if reading buttons)     [ro]
def B_JOYP_SELECT equ 2 ; 0 = Select is pressed (if reading buttons)     [ro]
def B_JOYP_B      equ 1 ; 0 = B is pressed      (if reading buttons)     [ro]
def B_JOYP_A      equ 0 ; 0 = A is pressed      (if reading buttons)     [ro]
def B_JOYP_DOWN   equ 3 ; 0 = Down is pressed   (if reading Control Pad) [ro]
def B_JOYP_UP     equ 2 ; 0 = Up is pressed     (if reading Control Pad) [ro]
def B_JOYP_LEFT   equ 1 ; 0 = Left is pressed   (if reading Control Pad) [ro]
def B_JOYP_RIGHT  equ 0 ; 0 = Right is pressed  (if reading Control Pad) [ro]
    def JOYP_INPUTS equ %0000_1111 ; bits equal to 0 indicate pressed (when reading inputs)
    def JOYP_START  equ 1 << B_JOYP_START
    def JOYP_SELECT equ 1 << B_JOYP_SELECT
    def JOYP_B      equ 1 << B_JOYP_B
    def JOYP_A      equ 1 << B_JOYP_A
    def JOYP_DOWN   equ 1 << B_JOYP_DOWN
    def JOYP_UP     equ 1 << B_JOYP_UP
    def JOYP_LEFT   equ 1 << B_JOYP_LEFT
    def JOYP_RIGHT  equ 1 << B_JOYP_RIGHT

; SGB command packet transfer uses for JOYP bits
def B_JOYP_SGB_ONE  equ 5 ; 0 = sending 1 bit
def B_JOYP_SGB_ZERO equ 4 ; 0 = sending 0 bit
    def JOYP_SGB_START  equ %00_00_0000 ; start SGB packet transfer
    def JOYP_SGB_ONE    equ %00_01_0000 ; send 1 bit
    def JOYP_SGB_ZERO   equ %00_10_0000 ; send 0 bit
    def JOYP_SGB_FINISH equ %00_11_0000 ; finish SGB packet transfer

; Combined input byte, with Control Pad in high nybble (conventional order)
def B_PAD_DOWN   equ 7
def B_PAD_UP     equ 6
def B_PAD_LEFT   equ 5
def B_PAD_RIGHT  equ 4
def B_PAD_START  equ 3
def B_PAD_SELECT equ 2
def B_PAD_B      equ 1
def B_PAD_A      equ 0
    def PAD_CTRL_PAD equ %1111_0000
    def PAD_BUTTONS  equ %0000_1111
    def PAD_DOWN     equ 1 << B_PAD_DOWN
    def PAD_UP       equ 1 << B_PAD_UP
    def PAD_LEFT     equ 1 << B_PAD_LEFT
    def PAD_RIGHT    equ 1 << B_PAD_RIGHT
    def PAD_START    equ 1 << B_PAD_START
    def PAD_SELECT   equ 1 << B_PAD_SELECT
    def PAD_B        equ 1 << B_PAD_B
    def PAD_A        equ 1 << B_PAD_A

; Combined input byte, with Control Pad in low nybble (swapped order)
def B_PAD_SWAP_START  equ 7
def B_PAD_SWAP_SELECT equ 6
def B_PAD_SWAP_B      equ 5
def B_PAD_SWAP_A      equ 4
def B_PAD_SWAP_DOWN   equ 3
def B_PAD_SWAP_UP     equ 2
def B_PAD_SWAP_LEFT   equ 1
def B_PAD_SWAP_RIGHT  equ 0
    def PAD_SWAP_CTRL_PAD equ %0000_1111
    def PAD_SWAP_BUTTONS  equ %1111_0000
    def PAD_SWAP_START    equ 1 << B_PAD_SWAP_START
    def PAD_SWAP_SELECT   equ 1 << B_PAD_SWAP_SELECT
    def PAD_SWAP_B        equ 1 << B_PAD_SWAP_B
    def PAD_SWAP_A        equ 1 << B_PAD_SWAP_A
    def PAD_SWAP_DOWN     equ 1 << B_PAD_SWAP_DOWN
    def PAD_SWAP_UP       equ 1 << B_PAD_SWAP_UP
    def PAD_SWAP_LEFT     equ 1 << B_PAD_SWAP_LEFT
    def PAD_SWAP_RIGHT    equ 1 << B_PAD_SWAP_RIGHT

; -- SB ($FF01) ---------------------------------------------------------------
; Serial transfer data [r/w]
def rSB equ $FF01

; -- SC ($FF02) ---------------------------------------------------------------
; Serial transfer control
def rSC equ $FF02

def B_SC_START  equ 7 ; reading 1 = transfer in progress, writing 1 = start transfer        [r/w]
def B_SC_SPEED  equ 1 ; (CGB only) 1 = use faster internal clock                            [r/w]
def B_SC_SOURCE equ 0 ; 0 = use external clock ("slave"), 1 = use internal clock ("master") [r/w]
    def SC_START  equ 1 << B_SC_START
    def SC_SPEED  equ 1 << B_SC_SPEED
        def SC_SLOW equ 0 << B_SC_SPEED
        def SC_FAST equ 1 << B_SC_SPEED
    def SC_SOURCE equ 1 << B_SC_SOURCE
        def SC_EXTERNAL equ 0 << B_SC_SOURCE
        def SC_INTERNAL equ 1 << B_SC_SOURCE

; -- $FF03 is unused ----------------------------------------------------------

; -- DIV ($FF04) --------------------------------------------------------------
; Divider register [r/w]
def rDIV equ $FF04

; -- TIMA ($FF05) -------------------------------------------------------------
; Timer counter [r/w]
def rTIMA equ $FF05

; -- TMA ($FF06) --------------------------------------------------------------
; Timer modulo [r/w]
def rTMA equ $FF06

; -- TAC ($FF07) --------------------------------------------------------------
; Timer control
def rTAC equ $FF07

def B_TAC_START equ 2 ; enable incrementing TIMA [r/w]
    def TAC_STOP  equ 0 << B_TAC_START
    def TAC_START equ 1 << B_TAC_START

def TAC_CLOCK equ %000000_11 ; the frequency at which TIMA increments [r/w]
    def TAC_4KHZ   equ %000000_00 ; every 256 M-cycles = ~4 KHz on DMG
    def TAC_262KHZ equ %000000_01 ; every 4 M-cycles = ~262 KHz on DMG
    def TAC_65KHZ  equ %000000_10 ; every 16 M-cycles = ~65 KHz on DMG
    def TAC_16KHZ  equ %000000_11 ; every 64 M-cycles = ~16 KHz on DMG

; -- $FF08-$FF0E are unused ---------------------------------------------------

; -- IF ($FF0F) ---------------------------------------------------------------
; Pending interrupts
def rIF equ $FF0F

def B_IF_JOYPAD equ 4 ; 1 = joypad interrupt is pending [r/w]
def B_IF_SERIAL equ 3 ; 1 = serial interrupt is pending [r/w]
def B_IF_TIMER  equ 2 ; 1 = timer  interrupt is pending [r/w]
def B_IF_STAT   equ 1 ; 1 = STAT   interrupt is pending [r/w]
def B_IF_VBLANK equ 0 ; 1 = VBlank interrupt is pending [r/w]
    def IF_JOYPAD equ 1 << B_IF_JOYPAD
    def IF_SERIAL equ 1 << B_IF_SERIAL
    def IF_TIMER  equ 1 << B_IF_TIMER
    def IF_STAT   equ 1 << B_IF_STAT
    def IF_VBLANK equ 1 << B_IF_VBLANK

; -- AUD1SWEEP / NR10 ($FF10) -------------------------------------------------
; Audio channel 1 sweep
def rAUD1SWEEP equ $FF10

def AUD1SWEEP_TIME equ %0_111_0000 ; how long between sweep iterations
                                   ; (in 128 Hz ticks, ~7.8 ms apart) [r/w]

def B_AUD1SWEEP_DIR equ 3 ; sweep direction [r/w]
    def AUD1SWEEP_DIR equ 1 << B_AUD1SWEEP_DIR
        def AUD1SWEEP_UP   equ 0 << B_AUD1SWEEP_DIR
        def AUD1SWEEP_DOWN equ 1 << B_AUD1SWEEP_DIR

def AUD1SWEEP_SHIFT equ %00000_111 ; how much the period increases/decreases per iteration [r/w]

; -- AUD1LEN / NR11 ($FF11) ---------------------------------------------------
; Audio channel 1 length timer and duty cycle
def rAUD1LEN equ $FF11

def AUD1LEN_DUTY equ %11_000000 ; ratio of time spent high vs. time spent low [r/w]
    def AUD1LEN_DUTY_12_5 equ %00_000000 ; 12.5%
    def AUD1LEN_DUTY_25   equ %01_000000 ; 25%
    def AUD1LEN_DUTY_50   equ %10_000000 ; 50%
    def AUD1LEN_DUTY_75   equ %11_000000 ; 75%

def AUD1LEN_TIMER equ %00_111111 ; initial length timer (0-63) [wo]

; -- AUD1ENV / NR12 ($FF12) ---------------------------------------------------
; Audio channel 1 volume and envelope
def rAUD1ENV equ $FF12

def AUD1ENV_INIT_VOLUME equ %1111_0000 ; initial volume [r/w]

def B_AUD1ENV_DIR equ 3 ; direction of volume envelope [r/w]
    def AUD1ENV_DIR equ 1 << B_AUD1ENV_DIR
        def AUD1ENV_DOWN equ 0 << B_AUD1ENV_DIR
        def AUD1ENV_UP   equ 1 << B_AUD1ENV_DIR

def AUD1ENV_PACE equ %00000_111 ; how long between envelope iterations
                                ; (in 64 Hz ticks, ~15.6 ms apart) [r/w]

; -- AUD1LOW / NR13 ($FF13) ---------------------------------------------------
; Audio channel 1 period (low 8 bits) [wo]
def rAUD1LOW equ $FF13

; -- AUD1HIGH / NR14 ($FF14) --------------------------------------------------
; Audio channel 1 period (high 3 bits) and control
def rAUD1HIGH equ $FF14

def B_AUD1HIGH_RESTART    equ 7 ; 1 = restart the channel [wo]
def B_AUD1HIGH_LEN_ENABLE equ 6 ; 1 = reset the channel after the length timer expires [r/w]
    def AUD1HIGH_RESTART    equ 1 << B_AUD1HIGH_RESTART
    def AUD1HIGH_LENGTH_OFF equ 0 << B_AUD1HIGH_LEN_ENABLE
    def AUD1HIGH_LENGTH_ON  equ 1 << B_AUD1HIGH_LEN_ENABLE

def AUD1HIGH_PERIOD_HIGH equ %00000_111 ; upper 3 bits of the channel's period [r/w]

; -- $FF15 is unused ----------------------------------------------------------

; -- AUD2LEN / NR21 ($FF16) ---------------------------------------------------
; Audio channel 2 length timer and duty cycle
def rAUD2LEN equ $FF16

def AUD2LEN_DUTY equ %11_000000 ; ratio of time spent high vs. time spent low [r/w]
    def AUD2LEN_DUTY_12_5 equ %00_000000 ; 12.5%
    def AUD2LEN_DUTY_25   equ %01_000000 ; 25%
    def AUD2LEN_DUTY_50   equ %10_000000 ; 50%
    def AUD2LEN_DUTY_75   equ %11_000000 ; 75%

def AUD2LEN_TIMER equ %00_111111 ; initial length timer (0-63) [wo]

; -- AUD2ENV / NR22 ($FF17) ---------------------------------------------------
; Audio channel 2 volume and envelope
def rAUD2ENV equ $FF17

def AUD2ENV_INIT_VOLUME equ %1111_0000 ; initial volume [r/w]

def B_AUD2ENV_DIR equ 3 ; direction of volume envelope [r/w]
    def AUD2ENV_DIR equ 1 << B_AUD2ENV_DIR
        def AUD2ENV_DOWN equ 0 << B_AUD2ENV_DIR
        def AUD2ENV_UP   equ 1 << B_AUD2ENV_DIR

def AUD2ENV_PACE equ %00000_111 ; how long between envelope iterations
                                ; (in 64 Hz ticks, ~15.6 ms apart) [r/w]

; -- AUD2LOW / NR23 ($FF18) ---------------------------------------------------
; Audio channel 2 period (low 8 bits) [wo]
def rAUD2LOW equ $FF18

; -- AUD2HIGH / NR24 ($FF19) --------------------------------------------------
; Audio channel 2 period (high 3 bits) and control
def rAUD2HIGH equ $FF19

def B_AUD2HIGH_RESTART    equ 7 ; 1 = restart the channel [wo]
def B_AUD2HIGH_LEN_ENABLE equ 6 ; 1 = reset the channel after the length timer expires [r/w]
    def AUD2HIGH_RESTART    equ 1 << B_AUD2HIGH_RESTART
    def AUD2HIGH_LENGTH_OFF equ 0 << B_AUD2HIGH_LEN_ENABLE
    def AUD2HIGH_LENGTH_ON  equ 1 << B_AUD2HIGH_LEN_ENABLE

def AUD2HIGH_PERIOD_HIGH equ %00000_111 ; upper 3 bits of the channel's period [r/w]

; -- AUD3ENA / NR30 ($FF1A) ---------------------------------------------------
; Audio channel 3 enable
def rAUD3ENA equ $FF1A

def B_AUD3ENA_ENABLE equ 7 ; 1 = channel is active [r/w]
    def AUD3ENA_OFF equ 0 << B_AUD3ENA_ENABLE
    def AUD3ENA_ON  equ 1 << B_AUD3ENA_ENABLE

; -- AUD3LEN / NR31 ($FF1B) ---------------------------------------------------
; Audio channel 3 length timer [wo]
def rAUD3LEN equ $FF1B

; -- AUD3LEVEL / NR32 ($FF1C) -------------------------------------------------
; Audio channel 3 volume
def rAUD3LEVEL equ $FF1C

def AUD3LEVEL_VOLUME equ %0_11_00000 ; volume level [r/w]
    def AUD3LEVEL_MUTE equ %0_00_00000 ; 0% (muted)
    def AUD3LEVEL_100  equ %0_01_00000 ; 100%
    def AUD3LEVEL_50   equ %0_10_00000 ; 50%
    def AUD3LEVEL_25   equ %0_11_00000 ; 25%

; -- AUD3LOW / NR33 ($FF1D) ---------------------------------------------------
; Audio channel 3 period (low 8 bits) [wo]
def rAUD3LOW equ $FF1D

; -- AUD3HIGH / NR34 ($FF1E) --------------------------------------------------
; Audio channel 3 period (high 3 bits) and control
def rAUD3HIGH equ $FF1E

def B_AUD3HIGH_RESTART    equ 7 ; 1 = restart the channel [wo]
def B_AUD3HIGH_LEN_ENABLE equ 6 ; 1 = reset the channel after the length timer expires [r/w]
    def AUD3HIGH_RESTART    equ 1 << B_AUD3HIGH_RESTART
    def AUD3HIGH_LENGTH_OFF equ 0 << B_AUD3HIGH_LEN_ENABLE
    def AUD3HIGH_LENGTH_ON  equ 1 << B_AUD3HIGH_LEN_ENABLE

def AUD3HIGH_PERIOD_HIGH equ %00000_111 ; upper 3 bits of the channel's period [r/w]

; -- $FF1F is unused ----------------------------------------------------------

; -- AUD4LEN / NR41 ($FF20) ---------------------------------------------------
; Audio channel 4 length timer
def rAUD4LEN equ $FF20

def AUD4LEN_TIMER equ %00_111111 ; initial length timer (0-63) [wo]

; -- AUD4ENV / NR42 ($FF21) ---------------------------------------------------
; Audio channel 4 volume and envelope
def rAUD4ENV equ $FF21

def AUD4ENV_INIT_VOLUME equ %1111_0000 ; initial volume [r/w]

def B_AUD4ENV_DIR equ 3 ; direction of volume envelope [r/w]
    def AUD4ENV_DIR equ 1 << B_AUD4ENV_DIR
        def AUD4ENV_DOWN equ 0 << B_AUD4ENV_DIR
        def AUD4ENV_UP   equ 1 << B_AUD4ENV_DIR

def AUD4ENV_PACE equ %00000_111 ; how long between envelope iterations
                                ; (in 64 Hz ticks, ~15.6 ms apart) [r/w]

; -- AUD4POLY / NR43 ($FF22) --------------------------------------------------
; Audio channel 4 period and randomness
def rAUD4POLY equ $FF22

def AUD4POLY_SHIFT equ %1111_0000 ; coarse control of the channel's period [r/w]

def B_AUD4POLY_WIDTH equ 3 ; controls the noise generator (LFSR)'s step width [r/w]
    def AUD4POLY_15STEP equ 0 << B_AUD4POLY_WIDTH
    def AUD4POLY_7STEP  equ 1 << B_AUD4POLY_WIDTH

def AUD4POLY_DIV equ %00000_111 ; fine control of the channel's period [r/w]

; -- AUD4GO / NR44 ($FF23) ----------------------------------------------------
; Audio channel 4 control
def rAUD4GO equ $FF23

def B_AUD4GO_RESTART    equ 7 ; 1 = restart the channel [wo]
def B_AUD4GO_LEN_ENABLE equ 6 ; 1 = reset the channel after the length timer expires [r/w]
    def AUD4GO_RESTART    equ 1 << B_AUD4GO_RESTART
    def AUD4GO_LENGTH_OFF equ 0 << B_AUD4GO_LEN_ENABLE
    def AUD4GO_LENGTH_ON  equ 1 << B_AUD4GO_LEN_ENABLE

; -- AUDVOL / NR50 ($FF24) ----------------------------------------------------
; Audio master volume and VIN mixer
def rAUDVOL equ $FF24

def B_AUDVOL_VIN_LEFT  equ 7 ; 1 = output VIN to left ear (SO2, speaker 2) [r/w]
    def AUDVOL_VIN_LEFT equ 1 << B_AUDVOL_VIN_LEFT

def AUDVOL_LEFT equ %0_111_0000 ; 0 = barely audible, 7 = full volume [r/w]

def B_AUDVOL_VIN_RIGHT equ 3 ; 1 = output VIN to right ear (SO1, speaker 1) [r/w]
    def AUDVOL_VIN_RIGHT equ 1 << B_AUDVOL_VIN_RIGHT

def AUDVOL_RIGHT equ %00000_111 ; 0 = barely audible, 7 = full volume [r/w]

; -- AUDTERM / NR51 ($FF25) ---------------------------------------------------
; Audio channel mixer
def rAUDTERM equ $FF25

def B_AUDTERM_4_LEFT  equ 7 ; 1 = output channel 4 to left  ear [r/w]
def B_AUDTERM_3_LEFT  equ 6 ; 1 = output channel 3 to left  ear [r/w]
def B_AUDTERM_2_LEFT  equ 5 ; 1 = output channel 2 to left  ear [r/w]
def B_AUDTERM_1_LEFT  equ 4 ; 1 = output channel 1 to left  ear [r/w]
def B_AUDTERM_4_RIGHT equ 3 ; 1 = output channel 4 to right ear [r/w]
def B_AUDTERM_3_RIGHT equ 2 ; 1 = output channel 3 to right ear [r/w]
def B_AUDTERM_2_RIGHT equ 1 ; 1 = output channel 2 to right ear [r/w]
def B_AUDTERM_1_RIGHT equ 0 ; 1 = output channel 1 to right ear [r/w]
    def AUDTERM_4_LEFT  equ 1 << B_AUDTERM_4_LEFT
    def AUDTERM_3_LEFT  equ 1 << B_AUDTERM_3_LEFT
    def AUDTERM_2_LEFT  equ 1 << B_AUDTERM_2_LEFT
    def AUDTERM_1_LEFT  equ 1 << B_AUDTERM_1_LEFT
    def AUDTERM_4_RIGHT equ 1 << B_AUDTERM_4_RIGHT
    def AUDTERM_3_RIGHT equ 1 << B_AUDTERM_3_RIGHT
    def AUDTERM_2_RIGHT equ 1 << B_AUDTERM_2_RIGHT
    def AUDTERM_1_RIGHT equ 1 << B_AUDTERM_1_RIGHT

; -- AUDENA / NR52 ($FF26) ----------------------------------------------------
; Audio master enable
def rAUDENA equ $FF26

def B_AUDENA_ENABLE     equ 7 ; 0 = disable the APU (resets all audio registers to 0!) [r/w]
def B_AUDENA_ENABLE_CH4 equ 3 ; 1 = channel 4 is running [ro]
def B_AUDENA_ENABLE_CH3 equ 2 ; 1 = channel 3 is running [ro]
def B_AUDENA_ENABLE_CH2 equ 1 ; 1 = channel 2 is running [ro]
def B_AUDENA_ENABLE_CH1 equ 0 ; 1 = channel 1 is running [ro]
    def AUDENA_OFF     equ 0 << B_AUDENA_ENABLE
    def AUDENA_ON      equ 1 << B_AUDENA_ENABLE
    def AUDENA_CH4_OFF equ 0 << B_AUDENA_ENABLE_CH4
    def AUDENA_CH4_ON  equ 1 << B_AUDENA_ENABLE_CH4
    def AUDENA_CH3_OFF equ 0 << B_AUDENA_ENABLE_CH3
    def AUDENA_CH3_ON  equ 1 << B_AUDENA_ENABLE_CH3
    def AUDENA_CH2_OFF equ 0 << B_AUDENA_ENABLE_CH2
    def AUDENA_CH2_ON  equ 1 << B_AUDENA_ENABLE_CH2
    def AUDENA_CH1_OFF equ 0 << B_AUDENA_ENABLE_CH1
    def AUDENA_CH1_ON  equ 1 << B_AUDENA_ENABLE_CH1

; -- $FF27-$FF2F are unused ---------------------------------------------------

; -- AUD3WAVE ($FF30-$FF3F) ---------------------------------------------------
; Audio channel 3 wave pattern RAM [r/w]
def rAUD3WAVE_0 equ $FF30
def rAUD3WAVE_1 equ $FF31
def rAUD3WAVE_2 equ $FF32
def rAUD3WAVE_3 equ $FF33
def rAUD3WAVE_4 equ $FF34
def rAUD3WAVE_5 equ $FF35
def rAUD3WAVE_6 equ $FF36
def rAUD3WAVE_7 equ $FF37
def rAUD3WAVE_8 equ $FF38
def rAUD3WAVE_9 equ $FF39
def rAUD3WAVE_A equ $FF3A
def rAUD3WAVE_B equ $FF3B
def rAUD3WAVE_C equ $FF3C
def rAUD3WAVE_D equ $FF3D
def rAUD3WAVE_E equ $FF3E
def rAUD3WAVE_F equ $FF3F

; -- LCDC ($FF40) -------------------------------------------------------------
; PPU graphics control
def rLCDC equ $FF40

def B_LCDC_ENABLE   equ 7 ; whether the PPU (and LCD) are turned on          [r/w]
def B_LCDC_WIN_MAP  equ 6 ; which tilemap the Window reads from              [r/w]
def B_LCDC_WINDOW   equ 5 ; whether the Window is enabled                    [r/w]
def B_LCDC_BLOCKS   equ 4 ; which "tile blocks" the BG and Window use        [r/w]
def B_LCDC_BG_MAP   equ 3 ; which tilemap the BG reads from                  [r/w]
def B_LCDC_OBJ_SIZE equ 2 ; how many pixels tall each OBJ is                 [r/w]
def B_LCDC_OBJS     equ 1 ; whether OBJs are enabled                         [r/w]
def B_LCDC_BG       equ 0 ; (DMG only) whether the BG is enabled             [r/w]
def B_LCDC_PRIO     equ 0 ; (CGB only) whether OBJ priority bits are enabled [r/w]
    def LCDC_ENABLE   equ 1 << B_LCDC_ENABLE
        def LCDC_OFF equ 0 << B_LCDC_ENABLE
        def LCDC_ON  equ 1 << B_LCDC_ENABLE
    def LCDC_WIN_MAP  equ 1 << B_LCDC_WIN_MAP
        def LCDC_WIN_9800 equ 0 << B_LCDC_WIN_MAP
        def LCDC_WIN_9C00 equ 1 << B_LCDC_WIN_MAP
    def LCDC_WINDOW   equ 1 << B_LCDC_WINDOW
        def LCDC_WIN_OFF equ 0 << B_LCDC_WINDOW
        def LCDC_WIN_ON  equ 1 << B_LCDC_WINDOW
    def LCDC_BLOCKS   equ 1 << B_LCDC_BLOCKS
        def LCDC_BLOCK21 equ 0 << B_LCDC_BLOCKS
        def LCDC_BLOCK01 equ 1 << B_LCDC_BLOCKS
    def LCDC_BG_MAP   equ 1 << B_LCDC_BG_MAP
        def LCDC_BG_9800 equ 0 << B_LCDC_BG_MAP
        def LCDC_BG_9C00 equ 1 << B_LCDC_BG_MAP
    def LCDC_OBJ_SIZE equ 1 << B_LCDC_OBJ_SIZE
        def LCDC_OBJ_8  equ 0 << B_LCDC_OBJ_SIZE
        def LCDC_OBJ_16 equ 1 << B_LCDC_OBJ_SIZE
    def LCDC_OBJS     equ 1 << B_LCDC_OBJS
        def LCDC_OBJ_OFF equ 0 << B_LCDC_OBJS
        def LCDC_OBJ_ON  equ 1 << B_LCDC_OBJS
    def LCDC_BG       equ 1 << B_LCDC_BG
        def LCDC_BG_OFF equ 0 << B_LCDC_BG
        def LCDC_BG_ON  equ 1 << B_LCDC_BG
    def LCDC_PRIO     equ 1 << B_LCDC_PRIO
        def LCDC_PRIO_OFF equ 0 << B_LCDC_PRIO
        def LCDC_PRIO_ON  equ 1 << B_LCDC_PRIO

; -- STAT ($FF41) -------------------------------------------------------------
; Graphics status and interrupt control
def rSTAT equ $FF41

def B_STAT_LYC    equ 6 ; 1 = LY match triggers the STAT interrupt [r/w]
def B_STAT_MODE_2 equ 5 ; 1 = OAM Scan triggers the PPU interrupt  [r/w]
def B_STAT_MODE_1 equ 4 ; 1 = VBlank triggers the PPU interrupt    [r/w]
def B_STAT_MODE_0 equ 3 ; 1 = HBlank triggers the PPU interrupt    [r/w]
def B_STAT_LYCF   equ 2 ; 1 = LY is currently equal to LYC         [ro]
def B_STAT_BUSY   equ 1 ; 1 = the PPU is currently accessing VRAM  [ro]
    def STAT_LYC    equ 1 << B_STAT_LYC
    def STAT_MODE_2 equ 1 << B_STAT_MODE_2
    def STAT_MODE_1 equ 1 << B_STAT_MODE_1
    def STAT_MODE_0 equ 1 << B_STAT_MODE_0
    def STAT_LYCF   equ 1 << B_STAT_LYCF
    def STAT_BUSY   equ 1 << B_STAT_BUSY

def STAT_MODE equ %000000_11 ; PPU's current status [ro]
    def STAT_HBLANK equ %000000_00 ; waiting after a line's rendering (HBlank)
    def STAT_VBLANK equ %000000_01 ; waiting between frames (VBlank)
    def STAT_OAM    equ %000000_10 ; checking which OBJs will be rendered on this line (OAM scan)
    def STAT_LCD    equ %000000_11 ; pushing pixels to the LCD

; -- SCY ($FF42) --------------------------------------------------------------
; Background Y scroll offset (in pixels) [r/w]
def rSCY equ $FF42

; -- SCX ($FF43) --------------------------------------------------------------
; Background X scroll offset (in pixels) [r/w]
def rSCX equ $FF43

; -- LY ($FF44) ---------------------------------------------------------------
; Y coordinate of the line currently processed by the PPU (0-153) [ro]
def rLY equ $FF44

def LY_VBLANK equ 144 ; 144-153 is the VBlank period

; -- LYC ($FF45) --------------------------------------------------------------
; Value that LY is constantly compared to [r/w]
def rLYC equ $FF45

; -- DMA ($FF46) --------------------------------------------------------------
; OAM DMA start address (high 8 bits) and start [wo]
def rDMA equ $FF46

; -- BGP ($FF47) --------------------------------------------------------------
; (DMG only) Background color mapping [r/w]
def rBGP equ $FF47

def BGP_SGB_TRANSFER equ %11_10_01_00 ; set BGP to this value before SGB VRAM transfer

; -- OBP0 ($FF48) -------------------------------------------------------------
; (DMG only) OBJ color mapping #0 [r/w]
def rOBP0 equ $FF48

; -- OBP1 ($FF49) -------------------------------------------------------------
; (DMG only) OBJ color mapping #1 [r/w]
def rOBP1 equ $FF49

; -- WY ($FF4A) ---------------------------------------------------------------
; Y coordinate of the Window's top-left pixel (0-143) [r/w]
def rWY equ $FF4A

; -- WX ($FF4B) ---------------------------------------------------------------
; X coordinate of the Window's top-left pixel, plus 7 (7-166) [r/w]
def rWX equ $FF4B

def WX_OFS equ 7 ; subtract this to get the actual Window X coordinate

; -- SYS / KEY0 ($FF4C) -------------------------------------------------------
; (CGB boot ROM only) CPU mode select
def rSYS equ $FF4C

; This is known as the "CPU mode register" in Fig. 11 of this patent:
; https://patents.google.com/patent/US6322447B1/en?oq=US6322447bi
; "OBJ priority mode designating register" in the same patent
; Credit to @mattcurrie for this finding!

def SYS_MODE equ %0000_11_00 ; current system mode [r/w]
    def SYS_CGB  equ %0000_00_00 ; CGB mode
    def SYS_DMG  equ %0000_01_00 ; DMG compatibility mode
    def SYS_PGB1 equ %0000_10_00 ; LCD is driven externally, CPU is stopped
    def SYS_PGB2 equ %0000_11_00 ; LCD is driven externally, CPU is running

; -- SPD / KEY1 ($FF4D) -------------------------------------------------------
; (CGB only) Double-speed mode control
def rSPD equ $FF4D

def B_SPD_DOUBLE  equ 7 ; current clock speed                                  [ro]
def B_SPD_PREPARE equ 0 ; 1 = next \`stop\` instruction will switch clock speeds [r/w]
    def SPD_SINGLE  equ 0 << B_SPD_DOUBLE
    def SPD_DOUBLE  equ 1 << B_SPD_DOUBLE
    def SPD_PREPARE equ 1 << B_SPD_PREPARE

; -- $FF4E is unused ----------------------------------------------------------

; -- VBK ($FF4F) --------------------------------------------------------------
; (CGB only) VRAM bank number (0 or 1)
def rVBK equ $FF4F

def VBK_BANK equ %0000000_1 ; mapped VRAM bank [r/w]

; -- BANK ($FF50) -------------------------------------------------------------
; (boot ROM only) Boot ROM mapping control
def rBANK equ $FF50

def B_BANK_ON equ 0 ; whether the boot ROM is mapped [wo]
    def BANK_ON  equ 0 << B_BANK_ON
    def BANK_OFF equ 1 << B_BANK_ON

; -- VDMA_SRC_HIGH / HDMA1 ($FF51) --------------------------------------------
; (CGB only) VRAM DMA source address (high 8 bits) [wo]
def rVDMA_SRC_HIGH equ $FF51

; -- VDMA_SRC_LOW / HDMA2 ($FF52) ---------------------------------------------
; (CGB only) VRAM DMA source address (low 8 bits) [wo]
def rVDMA_SRC_LOW equ $FF52

; -- VDMA_DEST_HIGH / HDMA3 ($FF53) -------------------------------------------
; (CGB only) VRAM DMA destination address (high 8 bits) [wo]
def rVDMA_DEST_HIGH equ $FF53

; -- VDMA_DEST_LOW / HDMA4 ($FF54) --------------------------------------------
; (CGB only) VRAM DMA destination address (low 8 bits) [wo]
def rVDMA_DEST_LOW equ $FF54

; -- VDMA_LEN / HDMA5 ($FF55) -------------------------------------------------
; (CGB only) VRAM DMA length, mode, and start
def rVDMA_LEN equ $FF55

def B_VDMA_LEN_MODE equ 7 ; on write: VRAM DMA mode [wo]
    def VDMA_LEN_MODE equ 1 << B_VDMA_LEN_MODE
        def VDMA_LEN_MODE_GENERAL equ 0 << B_VDMA_LEN_MODE ; GDMA (general-purpose)
        def VDMA_LEN_MODE_HBLANK  equ 1 << B_VDMA_LEN_MODE ; HDMA (HBlank)

def B_VDMA_LEN_BUSY equ 7 ; on read: is a VRAM DMA active?
    def VDMA_LEN_BUSY equ 1 << B_VDMA_LEN_BUSY
        def VDMA_LEN_NO  equ 0 << B_VDMA_LEN_BUSY
        def VDMA_LEN_YES equ 1 << B_VDMA_LEN_BUSY

def VDMA_LEN_SIZE equ %0_1111111 ; how many 16-byte blocks (minus 1) to transfer [r/w]

; -- RP ($FF56) ---------------------------------------------------------------
; (CGB only) Infrared communications port
def rRP equ $FF56

def RP_READ equ %11_000000 ; whether the IR read is enabled [r/w]
    def RP_DISABLE equ %00_000000
    def RP_ENABLE  equ %11_000000

def B_RP_DATA_IN equ 1 ; 0 = IR light is being received [ro]
def B_RP_LED_ON  equ 0 ; 1 = IR light is being sent     [r/w]
    def RP_DATA_IN equ 1 << B_RP_DATA_IN
    def RP_LED_ON  equ 1 << B_RP_LED_ON
        def RP_WRITE_LOW  equ 0 << B_RP_LED_ON
        def RP_WRITE_HIGH equ 1 << B_RP_LED_ON

; -- $FF57-$FF67 are unused ---------------------------------------------------

; -- BGPI / BCPS ($FF68) ------------------------------------------------------
; (CGB only) Background palette I/O index
def rBGPI equ $FF68

def B_BGPI_AUTOINC equ 7 ; whether the index field is incremented after each write to BCPD [r/w]
    def BGPI_AUTOINC equ 1 << B_BGPI_AUTOINC

def BGPI_INDEX equ %00_111111 ; the index within Palette RAM accessed via BCPD [r/w]

; -- BGPD / BCPD ($FF69) ------------------------------------------------------
; (CGB only) Background palette I/O access [r/w]
def rBGPD equ $FF69

; -- OBPI / OCPS ($FF6A) ------------------------------------------------------
; (CGB only) OBJ palette I/O index
def rOBPI equ $FF6A

def B_OBPI_AUTOINC equ 7 ; whether the index field is incremented after each write to OBPD [r/w]
    def OBPI_AUTOINC equ 1 << B_OBPI_AUTOINC

def OBPI_INDEX equ %00_111111 ; the index within Palette RAM accessed via OBPD [r/w]

; -- OBPD / OCPD ($FF6B) ------------------------------------------------------
; (CGB only) OBJ palette I/O access [r/w]
def rOBPD equ $FF6B

; -- OPRI ($FF6C) -------------------------------------------------------------
; (CGB boot ROM only) OBJ draw priority mode
def rOPRI equ $FF6C

def B_OPRI_PRIORITY equ 0 ; which drawing priority is used for OBJs [r/w]
    def OPRI_PRIORITY equ 1 << B_OPRI_PRIORITY
        def OPRI_OAM   equ 0 << B_OPRI_PRIORITY ; CGB mode default: earliest OBJ in OAM wins
        def OPRI_COORD equ 1 << B_OPRI_PRIORITY ; DMG mode default: leftmost OBJ wins

; -- $FF6D-$FF6F are unused ---------------------------------------------------

; -- WBK / SVBK ($FF70) -------------------------------------------------------
; (CGB only) WRAM bank number
def rWBK equ $FF70

def WBK_BANK equ %00000_111 ; mapped WRAM bank (0-7) [r/w]

; -- $FF71-$FF75 are unused ---------------------------------------------------

; -- PCM12 ($FF76) ------------------------------------------------------------
; Audio channels 1 and 2 output
def rPCM12 equ $FF76

def PCM12_CH2 equ %1111_0000 ; audio channel 2 output [ro]
def PCM12_CH1 equ %0000_1111 ; audio channel 1 output [ro]

; -- PCM34 ($FF77) ------------------------------------------------------------
; Audio channels 3 and 4 output
def rPCM34 equ $FF77

def PCM34_CH4 equ %1111_0000 ; audio channel 4 output [ro]
def PCM34_CH3 equ %0000_1111 ; audio channel 3 output [ro]

; -- $FF78-$FF7F are unused ---------------------------------------------------

; -- IE ($FFFF) ---------------------------------------------------------------
; Interrupt enable
def rIE equ $FFFF

def B_IE_JOYPAD equ 4 ; 1 = joypad interrupt is enabled [r/w]
def B_IE_SERIAL equ 3 ; 1 = serial interrupt is enabled [r/w]
def B_IE_TIMER  equ 2 ; 1 = timer  interrupt is enabled [r/w]
def B_IE_STAT   equ 1 ; 1 = STAT   interrupt is enabled [r/w]
def B_IE_VBLANK equ 0 ; 1 = VBlank interrupt is enabled [r/w]
    def IE_JOYPAD equ 1 << B_IE_JOYPAD
    def IE_SERIAL equ 1 << B_IE_SERIAL
    def IE_TIMER  equ 1 << B_IE_TIMER
    def IE_STAT   equ 1 << B_IE_STAT
    def IE_VBLANK equ 1 << B_IE_VBLANK


;******************************************************************************
; Cartridge registers (MBC)
;******************************************************************************

; Note that these "registers" are each actually accessible at an entire address range;
; however, one address for each of these ranges is considered the "canonical" one, and
; these addresses are what's provided here.


; ** Common to most MBCs ******************************************************

; -- RAMG ($0000-$1FFF) -------------------------------------------------------
; Whether SRAM can be accessed [wo]
def rRAMG equ $0000

; Common values (not for HuC1 or HuC-3)
def RAMG_SRAM_DISABLE equ $00
def RAMG_SRAM_ENABLE  equ $0A ; some MBCs accept any value whose low nybble is $A

; (HuC-3 only) switch SRAM to map cartridge RAM, RTC, or IR
def RAMG_CART_RAM_RO   equ $00 ; select cartridge RAM [ro]
def RAMG_CART_RAM      equ $0A ; select cartridge RAM [r/w]
def RAMG_RTC_IN        equ $0B ; select RTC command/argument [wo]
    def RAMG_RTC_IN_CMD equ %0_111_0000 ; command
    def RAMG_RTC_IN_ARG equ %0_000_1111 ; argument
def RAMG_RTC_OUT       equ $0C ; select RTC command/response [ro]
    def RAMG_RTC_OUT_CMD    equ %0_111_0000 ; command
    def RAMG_RTC_OUT_RESULT equ %0_000_1111 ; result
def RAMG_RTC_SEMAPHORE equ $0D ; select RTC semaphore [r/w]
def RAMG_IR            equ $0E ; (HuC1 and HuC-3 only) select IR [r/w]

; -- ROMB ($2000-$3FFF) -------------------------------------------------------
; ROM bank number (not for MBC5 or MBC6) [wo]
def rROMB equ $2000

; -- RAMB ($4000-$5FFF) -------------------------------------------------------
; SRAM bank number (not for MBC2, MBC6, or MBC7) [wo]
def rRAMB equ $4000

; (MBC3 only) Special RAM bank numbers that actually map values into RTCREG
def RAMB_RTC_S  equ $08 ; seconds counter (0-59)
def RAMB_RTC_M  equ $09 ; minutes counter (0-59)
def RAMB_RTC_H  equ $0A ; hours counter (0-23)
def RAMB_RTC_DL equ $0B ; days counter, low byte (0-255)
def RAMB_RTC_DH equ $0C ; days counter, high bit and other flags
    def B_RAMB_RTC_DH_CARRY equ 7 ; 1 = days counter overflowed    [wo]
    def B_RAMB_RTC_DH_HALT  equ 6 ; 0 = run timer, 1 = stop timer  [wo]
    def B_RAMB_RTC_DH_HIGH  equ 0 ; days counter, high bit (bit 8) [wo]
        def RAMB_RTC_DH_CARRY equ 1 << B_RAMB_RTC_DH_CARRY
        def RAMB_RTC_DH_HALT  equ 1 << B_RAMB_RTC_DH_HALT
        def RAMB_RTC_DH_HIGH  equ 1 << B_RAMB_RTC_DH_HIGH

def B_RAMB_RUMBLE equ 3 ; (MBC5 and MBC7 only) enable the rumble motor (if any)
    def RAMB_RUMBLE equ 1 << B_RAMB_RUMBLE
        def RAMB_RUMBLE_OFF equ 0 << B_RAMB_RUMBLE
        def RAMB_RUMBLE_ON  equ 1 << B_RAMB_RUMBLE


; ** MBC1 and MMM01 only ******************************************************

; -- BMODE ($6000-$7FFF) ------------------------------------------------------
; Banking mode select [wo]
def rBMODE equ $6000

def BMODE_SIMPLE   equ $00 ; locks ROMB and RAMB to bank 0
def BMODE_ADVANCED equ $01 ; allows bank-switching with RAMB


; ** MBC2 only ****************************************************************

; -- ROM2B ($0000-$3FFF with bit 8 set) ---------------------------------------
; ROM bank number [wo]
def rROM2B equ $2100


; ** MBC3 only ****************************************************************

; -- RTCLATCH ($6000-$7FFF) ---------------------------------------------------
; RTC latch clock data [wo]
def rRTCLATCH equ $6000

; Write $00 then $01 to latch the current time into RTCREG
def RTCLATCH_START  equ $00
def RTCLATCH_FINISH equ $01

; -- RTCREG ($A000-$BFFF) -----------------------------------------------------
; RTC register [r/w]
def rRTCREG equ $A000


; ** MBC5 only ****************************************************************

; -- ROMB0 ($2000-$2FFF) ------------------------------------------------------
; ROM bank number low byte (bits 0-7) [wo]
def rROMB0 equ $2000

; -- ROMB1 ($3000-$3FFF) ------------------------------------------------------
; ROM bank number high bit (bit 8) [wo]
def rROMB1 equ $3000


; ** MBC6 only ****************************************************************

; -- RAMBA ($0400-$07FF) ------------------------------------------------------
; RAM bank A number [wo]
def rRAMBA equ $0400

; -- RAMBB ($0800-$0BFF) ------------------------------------------------------
; RAM bank B number [wo]
def rRAMBB equ $0800

; -- FLASH ($0C00-$0FFF) ------------------------------------------------------
; Whether the flash chip can be accessed [wo]
def rFLASH equ $0C00

; -- FMODE ($1000) ------------------------------------------------------------
; Write mode select for the flash chip
def rFMODE equ $1000

; -- ROMBA ($2000-$27FF) ------------------------------------------------------
; ROM/Flash bank A number [wo]
def rROMBA equ $2000

; -- FLASHA ($2800-$2FFF) -----------------------------------------------------
; ROM/Flash bank A select [wo]
def rFLASHA equ $2800

; -- ROMBB ($3000-$37FF) ------------------------------------------------------
; ROM/Flash bank B number [wo]
def rROMBB equ $3000

; -- FLASHB ($3800-$3FFF) -----------------------------------------------------
; ROM/Flash bank B select [wo]
def rFLASHB equ $3800


; ** MBC7 only ****************************************************************

; -- RAMREG ($4000-$5FFF) -----------------------------------------------------
; Enable RAM register access [wo]
def rRAMREG equ $4000

def RAMREG_ENABLE equ $40

; -- ACCLATCH0 ($Ax0x) --------------------------------------------------------
; Latch accelerometer start [wo]
def rACCLATCH0 equ $A000

; Write $55 to ACCLATCH0 to erase the latched data
def ACCLATCH0_START equ $55

; -- ACCLATCH1 ($Ax1x) --------------------------------------------------------
; Latch accelerometer finish [wo]
def rACCLATCH1 equ $A010

; Write $AA to ACCLATCH1 to latch the accelerometer and update ACCEL*
def ACCLATCH1_FINISH equ $AA

; -- ACCELX0 ($Ax2x) ----------------------------------------------------------
; Accelerometer X value low byte [ro]
def rACCELX0 equ $A020

; -- ACCELX1 ($Ax3x) ----------------------------------------------------------
; Accelerometer X value high byte [ro]
def rACCELX1 equ $A030

; -- ACCELY0 ($Ax4x) ----------------------------------------------------------
; Accelerometer Y value low byte [ro]
def rACCELY0 equ $A040

; -- ACCELY1 ($Ax5x) ----------------------------------------------------------
; Accelerometer Y value high byte [ro]
def rACCELY1 equ $A050

; -- EEPROM ($Ax8x) -----------------------------------------------------------
; EEPROM access [r/w]
def rEEPROM equ $A080


; ** HuC1 only ****************************************************************

; -- IRREG ($A000-$BFFF) ------------------------------------------------------
; IR register [r/w]
def rIRREG equ $A000

; whether the IR transmitter sees light
def IR_LED_OFF equ $C0
def IR_LED_ON  equ $C1


;******************************************************************************
; Screen-related constants
;******************************************************************************

def SCREEN_WIDTH_PX  equ 160 ; width of screen in pixels
def SCREEN_HEIGHT_PX equ 144 ; height of screen in pixels
def SCREEN_WIDTH     equ  20 ; width of screen in bytes
def SCREEN_HEIGHT    equ  18 ; height of screen in bytes
def SCREEN_AREA      equ SCREEN_WIDTH * SCREEN_HEIGHT ; size of screen in bytes

def TILEMAP_WIDTH_PX  equ 256 ; width of tilemap in pixels
def TILEMAP_HEIGHT_PX equ 256 ; height of tilemap in pixels
def TILEMAP_WIDTH     equ  32 ; width of tilemap in bytes
def TILEMAP_HEIGHT    equ  32 ; height of tilemap in bytes
def TILEMAP_AREA      equ TILEMAP_WIDTH * TILEMAP_HEIGHT ; size of tilemap in bytes

def TILE_WIDTH  equ  8 ; width of tile in pixels
def TILE_HEIGHT equ  8 ; height of tile in pixels
def TILE_SIZE   equ 16 ; size of tile in bytes (2 bits/pixel)

def COLOR_SIZE equ 2 ; size of color in bytes (little-endian BGR555)
def PAL_COLORS equ 4 ; colors per palette
def PAL_SIZE   equ COLOR_SIZE * PAL_COLORS ; size of palette in bytes

def COLOR_CH_WIDTH equ 5 ; bits per RGB color channel
def COLOR_CH_MAX   equ (1 << COLOR_CH_WIDTH) - 1
    def B_COLOR_RED   equ COLOR_CH_WIDTH * 0 ; bits 4-0
    def B_COLOR_GREEN equ COLOR_CH_WIDTH * 1 ; bits 9-5
    def B_COLOR_BLUE  equ COLOR_CH_WIDTH * 2 ; bits 14-10
        def COLOR_RED        equ %000_11111  ; for the low byte
        def COLOR_GREEN_LOW  equ %111_00000  ; for the low byte
        def COLOR_GREEN_HIGH equ %0_00000_11 ; for the high byte
        def COLOR_BLUE       equ %0_11111_00 ; for the high byte

; (DMG only) grayscale shade indexes for BGP, OBP0, and OBP1
def SHADE_WHITE equ %00
def SHADE_LIGHT equ %01
def SHADE_DARK  equ %10
def SHADE_BLACK equ %11

; Tilemaps the BG or Window can read from (controlled by LCDC)
def TILEMAP0 equ $9800 ; $9800-$9BFF
def TILEMAP1 equ $9C00 ; $9C00-$9FFF

; (CGB only) BG tile attribute fields
def B_BG_PRIO  equ 7 ; whether the BG tile colors 1-3 are drawn above OBJs
def B_BG_YFLIP equ 6 ; whether the whole BG tile is flipped vertically
def B_BG_XFLIP equ 5 ; whether the whole BG tile is flipped horizontally
def B_BG_BANK1 equ 3 ; which VRAM bank the BG tile is taken from
def BG_PALETTE equ %00000_111 ; which palette the BG tile uses
    def BG_PRIO  equ 1 << B_BG_PRIO
    def BG_YFLIP equ 1 << B_BG_YFLIP
    def BG_XFLIP equ 1 << B_BG_XFLIP
    def BG_BANK0 equ 0 << B_BG_BANK1
    def BG_BANK1 equ 1 << B_BG_BANK1


;******************************************************************************
; OBJ-related constants
;******************************************************************************

; OAM attribute field offsets
rsreset
def OAMA_Y      rb ; 0
    def OAM_Y_OFS equ 16 ; subtract 16 from what's written to OAM to get the real Y position
def OAMA_X      rb ; 1
    def OAM_X_OFS equ  8 ; subtract 8 from what's written to OAM to get the real X position
def OAMA_TILEID rb ; 2
def OAMA_FLAGS  rb ; 3
    def B_OAM_PRIO  equ 7 ; whether the OBJ is drawn below BG colors 1-3
    def B_OAM_YFLIP equ 6 ; whether the whole OBJ is flipped vertically
    def B_OAM_XFLIP equ 5 ; whether the whole OBJ is flipped horizontally
    def B_OAM_PAL1  equ 4 ; (DMG only) which of the two palettes the OBJ uses
    def B_OAM_BANK1 equ 3 ; (CGB only) which VRAM bank the OBJ takes its tile(s) from
    def OAM_PALETTE equ %00000_111 ; (CGB only) which palette the OBJ uses
        def OAM_PRIO  equ 1 << B_OAM_PRIO
        def OAM_YFLIP equ 1 << B_OAM_YFLIP
        def OAM_XFLIP equ 1 << B_OAM_XFLIP
        def OAM_PAL0  equ 0 << B_OAM_PAL1
        def OAM_PAL1  equ 1 << B_OAM_PAL1
        def OAM_BANK0 equ 0 << B_OAM_BANK1
        def OAM_BANK1 equ 1 << B_OAM_BANK1
def OBJ_SIZE    rb 0 ; size of OBJ in bytes = 4

def OAM_COUNT equ 40 ; how many OBJs there are room for in OAM
def OAM_SIZE  equ OBJ_SIZE * OAM_COUNT


;******************************************************************************
; Audio channel RAM addresses
;******************************************************************************

def AUD1RAM equ $FF10 ; $FF10-$FF14
def AUD2RAM equ $FF15 ; $FF15-$FF19
def AUD3RAM equ $FF1A ; $FF1A-$FF1E
def AUD4RAM equ $FF1F ; $FF1F-$FF23
def AUDRAM_SIZE equ 5 ; size of each audio channel RAM in bytes

def _AUD3WAVERAM equ $FF30 ; $FF30-$FF3F
def AUD3WAVE_SIZE equ 16 ; size of wave pattern RAM in bytes


;******************************************************************************
; Interrupt vector addresses
;******************************************************************************

def INT_HANDLER_VBLANK equ $0040 ; VBlank interrupt handler address
def INT_HANDLER_STAT   equ $0048 ; STAT   interrupt handler address
def INT_HANDLER_TIMER  equ $0050 ; timer  interrupt handler address
def INT_HANDLER_SERIAL equ $0058 ; serial interrupt handler address
def INT_HANDLER_JOYPAD equ $0060 ; joypad interrupt handler address


;******************************************************************************
; Boot-up register values
;******************************************************************************

; Register A = CPU type
def BOOTUP_A_DMG equ $01
def BOOTUP_A_CGB equ $11 ; CGB or AGB
def BOOTUP_A_MGB equ $FF
    def BOOTUP_A_SGB  equ BOOTUP_A_DMG
    def BOOTUP_A_SGB2 equ BOOTUP_A_MGB

; Register B = CPU qualifier (if A is BOOTUP_A_CGB)
def B_BOOTUP_B_AGB equ 0
    def BOOTUP_B_CGB equ 0 << B_BOOTUP_B_AGB
    def BOOTUP_B_AGB equ 1 << B_BOOTUP_B_AGB

; Register C = CPU qualifier
def BOOTUP_C_DMG equ $13
def BOOTUP_C_SGB equ $14
def BOOTUP_C_CGB equ $00 ; CGB or AGB

; Register D = color qualifier
def BOOTUP_D_MONO  equ $00 ; DMG, MGB, SGB, or CGB or AGB in DMG mode
def BOOTUP_D_COLOR equ $FF ; CGB or AGB

; Register E = CPU qualifier (distinguishes DMG variants)
def BOOTUP_E_DMG0        equ $C1
def BOOTUP_E_DMG         equ $C8
def BOOTUP_E_SGB         equ $00
def BOOTUP_E_CGB_DMGMODE equ $08 ; CGB or AGB in DMG mode
def BOOTUP_E_CGB         equ $56 ; CGB or AGB


;******************************************************************************
; Aliases
;******************************************************************************

; Prefer the standard names to these aliases, which may be official but are
; less directly meaningful or human-readable.

def rP1 equ rJOYP

def rNR10 equ rAUD1SWEEP
def rNR11 equ rAUD1LEN
def rNR12 equ rAUD1ENV
def rNR13 equ rAUD1LOW
def rNR14 equ rAUD1HIGH
def rNR21 equ rAUD2LEN
def rNR22 equ rAUD2ENV
def rNR23 equ rAUD2LOW
def rNR24 equ rAUD2HIGH
def rNR30 equ rAUD3ENA
def rNR31 equ rAUD3LEN
def rNR32 equ rAUD3LEVEL
def rNR33 equ rAUD3LOW
def rNR34 equ rAUD3HIGH
def rNR41 equ rAUD4LEN
def rNR42 equ rAUD4ENV
def rNR43 equ rAUD4POLY
def rNR44 equ rAUD4GO
def rNR50 equ rAUDVOL
def rNR51 equ rAUDTERM
def rNR52 equ rAUDENA

def rKEY0 equ rSYS
def rKEY1 equ rSPD

def rHDMA1 equ rVDMA_SRC_HIGH
def rHDMA2 equ rVDMA_SRC_LOW
def rHDMA3 equ rVDMA_DEST_HIGH
def rHDMA4 equ rVDMA_DEST_LOW
def rHDMA5 equ rVDMA_LEN

def rBCPS equ rBGPI
def rBCPD equ rBGPD

def rOCPS equ rOBPI
def rOCPD equ rOBPD

def rSVBK equ rWBK

endc ; HARDWARE_INC
`,ni=`;******************************************************************************
; Deprecated Game Boy hardware constant definitions for backwards compatibility
; https://github.com/gbdev/hardware_compat.inc
;******************************************************************************

; To the extent possible under law, the authors of this work have
; waived all copyright and related or neighboring rights to the work.
; See https://creativecommons.org/publicdomain/zero/1.0/ for details.
; SPDX-License-Identifier: CC0-1.0

; If this file was already included, don't do it again
if !def(HARDWARE_COMPAT_INC)

; Check for hardware.inc to have been previously included
if !def(HARDWARE_INC)
    fail "'hardware_compat.inc' requires 'hardware.inc'"
endc

; Define the include guard
; (do this after the hardware.inc check since the \`def\` syntax depends on it)
def HARDWARE_COMPAT_INC equ 1


;******************************************************************************
; Memory-mapped registers ($FFxx range)
;******************************************************************************

def JOYPB_GET_BTN  equ B_JOYP_GET_BUTTONS
def JOYPB_GET_DPAD equ B_JOYP_GET_CTRL_PAD
    def JOYPF_GET equ JOYP_GET
        def JOYP_GET_BTN  equ JOYP_GET_BUTTONS
        def JOYP_GET_DPAD equ JOYP_GET_CTRL_PAD
def JOYPB_START    equ B_JOYP_START
def JOYPB_SELECT   equ B_JOYP_SELECT
def JOYPB_B        equ B_JOYP_B
def JOYPB_A        equ B_JOYP_A
def JOYPB_DOWN     equ B_JOYP_DOWN
def JOYPB_UP       equ B_JOYP_UP
def JOYPB_LEFT     equ B_JOYP_LEFT
def JOYPB_RIGHT    equ B_JOYP_RIGHT
    def JOYPF_INPUTS equ JOYP_INPUTS
    def JOYPF_START  equ JOYP_START
    def JOYPF_SELECT equ JOYP_SELECT
    def JOYPF_B      equ JOYP_B
    def JOYPF_A      equ JOYP_A
    def JOYPF_DOWN   equ JOYP_DOWN
    def JOYPF_UP     equ JOYP_UP
    def JOYPF_LEFT   equ JOYP_LEFT
    def JOYPF_RIGHT  equ JOYP_RIGHT

def PADB_DOWN   equ B_PAD_DOWN
def PADB_UP     equ B_PAD_UP
def PADB_LEFT   equ B_PAD_LEFT
def PADB_RIGHT  equ B_PAD_RIGHT
def PADB_START  equ B_PAD_START
def PADB_SELECT equ B_PAD_SELECT
def PADB_B      equ B_PAD_B
def PADB_A      equ B_PAD_A
    def PADF_DOWN   equ PAD_DOWN
    def PADF_UP     equ PAD_UP
    def PADF_LEFT   equ PAD_LEFT
    def PADF_RIGHT  equ PAD_RIGHT
    def PADF_START  equ PAD_START
    def PADF_SELECT equ PAD_SELECT
    def PADF_B      equ PAD_B
    def PADF_A      equ PAD_A

def PADB_SWAP_START  equ B_PAD_SWAP_START
def PADB_SWAP_SELECT equ B_PAD_SWAP_SELECT
def PADB_SWAP_B      equ B_PAD_SWAP_B
def PADB_SWAP_A      equ B_PAD_SWAP_A
def PADB_SWAP_DOWN   equ B_PAD_SWAP_DOWN
def PADB_SWAP_UP     equ B_PAD_SWAP_UP
def PADB_SWAP_LEFT   equ B_PAD_SWAP_LEFT
def PADB_SWAP_RIGHT  equ B_PAD_SWAP_RIGHT
    def PADF_SWAP_START  equ PAD_SWAP_START
    def PADF_SWAP_SELECT equ PAD_SWAP_SELECT
    def PADF_SWAP_B      equ PAD_SWAP_B
    def PADF_SWAP_A      equ PAD_SWAP_A
    def PADF_SWAP_DOWN   equ PAD_SWAP_DOWN
    def PADF_SWAP_UP     equ PAD_SWAP_UP
    def PADF_SWAP_LEFT   equ PAD_SWAP_LEFT
    def PADF_SWAP_RIGHT  equ PAD_SWAP_RIGHT

def SCB_START  equ B_SC_START
def SCB_SPEED  equ B_SC_SPEED
def SCB_SOURCE equ B_SC_SOURCE
    def SCF_START  equ SC_START
    def SCF_SPEED  equ SC_SPEED
    def SCF_SOURCE equ SC_SOURCE

def TACB_START equ B_TAC_START
    def TACF_STOP  equ TAC_STOP
    def TACF_START equ TAC_START
def TACF_CLOCK equ TAC_CLOCK
    def TACF_4KHZ   equ TAC_4KHZ
    def TACF_262KHZ equ TAC_262KHZ
    def TACF_65KHZ  equ TAC_65KHZ
    def TACF_16KHZ  equ TAC_16KHZ

def IFB_JOYPAD equ B_IF_JOYPAD
def IFB_SERIAL equ B_IF_SERIAL
def IFB_TIMER  equ B_IF_TIMER
def IFB_STAT   equ B_IF_STAT
def IFB_VBLANK equ B_IF_VBLANK
    def IFF_JOYPAD equ IF_JOYPAD
    def IFF_SERIAL equ IF_SERIAL
    def IFF_TIMER  equ IF_TIMER
    def IFF_STAT   equ IF_STAT
    def IFF_VBLANK equ IF_VBLANK

def AUD1SWEEPF_TIME equ AUD1SWEEP_TIME
def AUD1SWEEPB_DIR  equ B_AUD1SWEEP_DIR
    def AUD1SWEEPF_DIR equ AUD1SWEEP_DIR

def AUD1LENF_DUTY  equ AUD1LEN_DUTY
def AUD1LENF_TIMER equ AUD1LEN_TIMER

def AUD1ENVF_INIT_VOL equ AUD1ENV_INIT_VOLUME
def AUD1ENVB_DIR      equ B_AUD1ENV_DIR
    def AUD1ENVF_DIR equ AUD1ENV_DIR
def AUD1ENVF_PACE     equ AUD1ENV_PACE

def AUD1HIGHB_RESTART     equ B_AUD1HIGH_RESTART
def AUD1HIGHB_LEN_ENABLE  equ B_AUD1HIGH_LEN_ENABLE
def AUD1HIGHF_PERIOD_HIGH equ AUD1HIGH_PERIOD_HIGH

def AUD2LENF_DUTY  equ AUD2LEN_DUTY
def AUD2LENF_TIMER equ AUD2LEN_TIMER

def AUD2ENVF_INIT_VOL equ AUD2ENV_INIT_VOLUME
def AUD2ENVB_DIR      equ B_AUD2ENV_DIR
    def AUD2ENVF_DIR equ AUD2ENV_DIR
def AUD2ENVF_PACE     equ AUD2ENV_PACE

def AUD2HIGHB_RESTART     equ B_AUD2HIGH_RESTART
def AUD2HIGHB_LEN_ENABLE  equ B_AUD2HIGH_LEN_ENABLE
def AUD2HIGHF_PERIOD_HIGH equ AUD2HIGH_PERIOD_HIGH

def AUD3ENAB_ENABLE equ B_AUD3ENA_ENABLE

def AUD3LEVELF_VOLUME equ AUD3LEVEL_VOLUME

def AUD3HIGHB_RESTART     equ B_AUD3HIGH_RESTART
def AUD3HIGHB_LEN_ENABLE  equ B_AUD3HIGH_LEN_ENABLE
def AUD3HIGHF_PERIOD_HIGH equ AUD3HIGH_PERIOD_HIGH

def AUD4LENF_TIMER equ AUD4LEN_TIMER

def AUD4ENVF_INIT_VOL equ AUD4ENV_INIT_VOLUME
def AUD4ENVB_DIR      equ B_AUD4ENV_DIR
    def AUD4ENVF_DIR equ AUD4ENV_DIR
def AUD4ENVF_PACE     equ AUD4ENV_PACE

def AUD4POLYF_SHIFT equ AUD4POLY_SHIFT
def AUD4POLYB_WIDTH equ B_AUD4POLY_WIDTH
def AUD4POLYF_DIV   equ AUD4POLY_DIV

def AUD4GOB_RESTART    equ B_AUD4GO_RESTART
def AUD4GOB_LEN_ENABLE equ B_AUD4GO_LEN_ENABLE

def AUDVOLB_VIN_LEFT  equ B_AUDVOL_VIN_LEFT
    def AUDVOLF_LEFT equ AUDVOL_LEFT
def AUDVOLB_VIN_RIGHT equ B_AUDVOL_VIN_RIGHT
    def AUDVOLF_RIGHT equ AUDVOL_RIGHT

def AUDTERMB_4_LEFT  equ B_AUDTERM_4_LEFT
def AUDTERMB_3_LEFT  equ B_AUDTERM_3_LEFT
def AUDTERMB_2_LEFT  equ B_AUDTERM_2_LEFT
def AUDTERMB_1_LEFT  equ B_AUDTERM_1_LEFT
def AUDTERMB_4_RIGHT equ B_AUDTERM_4_RIGHT
def AUDTERMB_3_RIGHT equ B_AUDTERM_3_RIGHT
def AUDTERMB_2_RIGHT equ B_AUDTERM_2_RIGHT
def AUDTERMB_1_RIGHT equ B_AUDTERM_1_RIGHT

def AUDENAB_ENABLE     equ B_AUDENA_ENABLE
def AUDENAB_ENABLE_CH4 equ B_AUDENA_ENABLE_CH4
def AUDENAB_ENABLE_CH3 equ B_AUDENA_ENABLE_CH3
def AUDENAB_ENABLE_CH2 equ B_AUDENA_ENABLE_CH2
def AUDENAB_ENABLE_CH1 equ B_AUDENA_ENABLE_CH1
    def AUDENAF_CH4_OFF equ AUDENA_CH4_OFF
    def AUDENAF_CH4_ON  equ AUDENA_CH4_ON
    def AUDENAF_CH3_OFF equ AUDENA_CH3_OFF
    def AUDENAF_CH3_ON  equ AUDENA_CH3_ON
    def AUDENAF_CH2_OFF equ AUDENA_CH2_OFF
    def AUDENAF_CH2_ON  equ AUDENA_CH2_ON
    def AUDENAF_CH1_OFF equ AUDENA_CH1_OFF
    def AUDENAF_CH1_ON  equ AUDENA_CH1_ON

def LCDCB_ON      equ B_LCDC_ENABLE
def LCDCB_WIN9C00 equ B_LCDC_WIN_MAP
def LCDCB_WINON   equ B_LCDC_WINDOW
def LCDCB_BLKS    equ B_LCDC_BLOCKS
def LCDCB_BG9C00  equ B_LCDC_BG_MAP
def LCDCB_OBJ16   equ B_LCDC_OBJ_SIZE
def LCDCB_OBJON   equ B_LCDC_OBJS
def LCDCB_BGON    equ B_LCDC_BG
def LCDCB_PRION   equ B_LCDC_PRIO
    def LCDCF_OFF     equ LCDC_OFF
    def LCDCF_ON      equ LCDC_ON
    def LCDCF_WIN9800 equ LCDC_WIN_9800
    def LCDCF_WIN9C00 equ LCDC_WIN_9C00
    def LCDCF_WINOFF  equ LCDC_WIN_OFF
    def LCDCF_WINON   equ LCDC_WIN_ON
    def LCDCF_BLKS    equ LCDC_BLOCKS
        def LCDCF_BLK21 equ LCDC_BLOCK21
        def LCDCF_BLK01 equ LCDC_BLOCK01
    def LCDCF_BG9800  equ LCDC_BG_9800
    def LCDCF_BG9C00  equ LCDC_BG_9C00
    def LCDCF_OBJ8    equ LCDC_OBJ_8
    def LCDCF_OBJ16   equ LCDC_OBJ_16
    def LCDCF_OBJOFF  equ LCDC_OBJ_OFF
    def LCDCF_OBJON   equ LCDC_OBJ_ON
    def LCDCF_BGOFF   equ LCDC_BG_OFF
    def LCDCF_BGON    equ LCDC_BG_ON
    def LCDCF_PRIOFF  equ LCDC_PRIO_OFF
    def LCDCF_PRION   equ LCDC_PRIO_ON

def STATB_LYC    equ B_STAT_LYC
def STATB_MODE10 equ B_STAT_MODE_2
def STATB_MODE01 equ B_STAT_MODE_1
def STATB_MODE00 equ B_STAT_MODE_0
def STATB_LYCF   equ B_STAT_LYCF
def STATB_BUSY   equ B_STAT_BUSY
    def STATF_LYC    equ STAT_LYC
    def STATF_MODE10 equ STAT_MODE_2
    def STATF_MODE01 equ STAT_MODE_1
    def STATF_MODE00 equ STAT_MODE_0
    def STATF_LYCF   equ STAT_LYCF
    def STATF_BUSY   equ STAT_BUSY
def STATF_MODE   equ STAT_MODE
    def STATF_HBL    equ STAT_HBLANK
    def STATF_VBL    equ STAT_VBLANK
    def STATF_OAM    equ STAT_OAM
    def STATF_LCD    equ STAT_LCD

def SYSF_MODE equ SYS_MODE
    def SYSF_CGB  equ SYS_CGB
    def SYSF_DMG  equ SYS_DMG
    def SYSF_PGB1 equ SYS_PGB1
    def SYSF_PGB2 equ SYS_PGB2

def SPDB_DBLSPEED equ B_SPD_DOUBLE
def SPDB_PREPARE  equ B_SPD_PREPARE
    def SPDF_DBLSPEED equ SPD_DOUBLE
    def SPDF_PREPARE  equ SPD_PREPARE

def BANKB_ON equ B_BANK_ON
    def BANKF_ON  equ BANK_ON
    def BANKF_OFF equ BANK_OFF

def VDMA_LENB_MODE equ B_VDMA_LEN_MODE
    def VDMA_LENF_MODE equ VDMA_LEN_MODE
        def VDMA_LENF_MODE_GP  equ VDMA_LEN_MODE_GENERAL
        def VDMA_LENF_MODE_HBL equ VDMA_LEN_MODE_HBLANK
def VDMA_LENB_BUSY equ B_VDMA_LEN_BUSY
    def VDMA_LENF_BUSY equ VDMA_LEN_BUSY
        def VDMA_LENF_NO  equ VDMA_LEN_NO
        def VDMA_LENF_YES equ VDMA_LEN_YES
def VDMA_LENB_SIZE equ VDMA_LEN_SIZE

def RPF_READ   equ RP_READ
    def RPF_DISREAD equ RP_DISABLE
    def RPF_ENREAD  equ RP_ENABLE
def RPB_DATAIN equ B_RP_DATA_IN
def RPB_LED_ON equ B_RP_LED_ON
    def RPF_DATAIN equ RP_DATA_IN
    def RPF_LED_ON equ RP_LED_ON
        def RPF_WRITE_LO equ RP_WRITE_LOW
        def RPF_WRITE_HI equ RP_WRITE_HIGH

def BGPIB_AUTOINC equ B_BGPI_AUTOINC
    def BGPIF_AUTOINC equ BGPI_AUTOINC
def BGPIF_INDEX   equ BGPI_INDEX

def OBPIB_AUTOINC equ B_OBPI_AUTOINC
    def OBPIF_AUTOINC equ OBPI_AUTOINC
def OBPIF_INDEX   equ OBPI_INDEX

def OPRIB_PRI equ B_OPRI_PRIORITY
    def OPRIF_PRI equ OPRI_PRIORITY

def WBKF_BANK equ WBK_BANK

def PCM12F_CH2 equ PCM12_CH2
def PCM12F_CH1 equ PCM12_CH1

def PCM34F_CH4 equ PCM34_CH4
def PCM34F_CH3 equ PCM34_CH3

def IEB_JOYPAD equ B_IE_JOYPAD
def IEB_SERIAL equ B_IE_SERIAL
def IEB_TIMER  equ B_IE_TIMER
def IEB_STAT   equ B_IE_STAT
def IEB_VBLANK equ B_IE_VBLANK
    def IEF_JOYPAD equ IE_JOYPAD
    def IEF_SERIAL equ IE_SERIAL
    def IEF_TIMER  equ IE_TIMER
    def IEF_STAT   equ IE_STAT
    def IEF_VBLANK equ IE_VBLANK


;******************************************************************************
; Cartridge registers (MBC)
;******************************************************************************

def CART_SRAM_DISABLE equ RAMG_SRAM_DISABLE
def CART_SRAM_ENABLE  equ RAMG_SRAM_ENABLE

def RTC_S  equ RAMB_RTC_S
def RTC_M  equ RAMB_RTC_M
def RTC_H  equ RAMB_RTC_H
def RTC_DL equ RAMB_RTC_DL
def RTC_DH equ RAMB_RTC_DH
    def RTC_DHB_CARRY equ B_RAMB_RTC_DH_CARRY
    def RTC_DHB_HALT  equ B_RAMB_RTC_DH_HALT
    def RTC_DHB_HIGH  equ B_RAMB_RTC_DH_HIGH
        def RTC_DHF_CARRY equ RAMB_RTC_DH_CARRY
        def RTC_DHF_HALT  equ RAMB_RTC_DH_HALT
        def RTC_DHF_HIGH  equ RAMB_RTC_DH_HIGH

def CARTB_RUMBLE_ON equ B_RAMB_RUMBLE
def CARTF_RUMBLE_ON equ RAMB_RUMBLE
def CART_RUMBLE_OFF equ RAMB_RUMBLE_OFF
def CART_RUMBLE_ON  equ RAMB_RUMBLE_ON


;******************************************************************************
; Screen-related constants
;******************************************************************************

def SCRN_X   equ SCREEN_WIDTH_PX
def SCRN_Y   equ SCREEN_HEIGHT_PX
def SCRN_X_B equ SCREEN_WIDTH
def SCRN_Y_B equ SCREEN_HEIGHT
def SCRN_B   equ SCREEN_AREA

def SCRN_VX   equ TILEMAP_WIDTH_PX
def SCRN_VY   equ TILEMAP_HEIGHT_PX
def SCRN_VX_B equ TILEMAP_WIDTH
def SCRN_VY_B equ TILEMAP_HEIGHT
def SCRN_V_B  equ TILEMAP_AREA

def TILE_X equ TILE_WIDTH
def TILE_Y equ TILE_HEIGHT
def TILE_B equ TILE_SIZE

def COLOR_B equ COLOR_SIZE
    def COLORF_GREEN_LOW  equ COLOR_GREEN_LOW
    def COLORF_RED        equ COLOR_RED
    def COLORF_BLUE       equ COLOR_BLUE
    def COLORF_GREEN_HIGH equ COLOR_GREEN_HIGH

def PAL_B equ PAL_SIZE

def _SCRN0 equ TILEMAP0
def _SCRN1 equ TILEMAP1


;******************************************************************************
; OBJ-related constants
;******************************************************************************

def OAMB_PRI     equ B_OAM_PRIO
def OAMB_YFLIP   equ B_OAM_YFLIP
def OAMB_XFLIP   equ B_OAM_XFLIP
def OAMB_PAL1    equ B_OAM_PAL1
def OAMB_BANK1   equ B_OAM_BANK1
def OAMF_PALMASK equ OAM_PALETTE
    def OAMF_PRI   equ OAM_PRIO
    def OAMF_YFLIP equ OAM_YFLIP
    def OAMF_XFLIP equ OAM_XFLIP
    def OAMF_PAL0  equ OAM_PAL0
    def OAMF_PAL1  equ OAM_PAL1
    def OAMF_BANK0 equ OAM_BANK0
    def OAMF_BANK1 equ OAM_BANK1
def OBJ_B        equ OBJ_SIZE

def OAM_B equ OAM_SIZE


;******************************************************************************
; Boot-up register values
;******************************************************************************

def BOOTUPB_B_AGB equ B_BOOTUP_B_AGB


;******************************************************************************
; Aliases
;******************************************************************************

def P1F_GET_BTN  equ JOYP_GET_BTN
def P1F_GET_DPAD equ JOYP_GET_DPAD
def P1F_GET_NONE equ JOYP_GET_NONE
def P1F_5        equ JOYP_GET_DPAD
def P1F_4        equ JOYP_GET_BTN
def P1F_3        equ JOYPF_DOWN
def P1F_2        equ JOYPF_UP
def P1F_1        equ JOYPF_LEFT
def P1F_0        equ JOYPF_RIGHT

def KEY0F_MODE equ SYSF_MODE
    def KEY0F_CGB  equ SYSF_CGB
    def KEY0F_DMG  equ SYSF_DMG
    def KEY0F_PGB1 equ SYSF_PGB1
    def KEY0F_PGB2 equ SYSF_PGB2

def KEY1F_DBLSPEED equ SPDF_DBLSPEED
def KEY1F_PREPARE  equ SPDF_PREPARE

def HDMA5B_MODE equ VDMA_LENB_MODE
    def HDMA5F_MODE_GP  equ VDMA_LENF_MODE_GP
    def HDMA5F_MODE_HBL equ VDMA_LENF_MODE_HBL
def HDMA5F_BUSY equ VDMA_LENF_BUSY

def BCPSB_AUTOINC equ BGPIB_AUTOINC
    def BCPSF_AUTOINC equ BGPIF_AUTOINC

def OCPSB_AUTOINC equ OBPIB_AUTOINC
    def OCPSF_AUTOINC equ OBPIF_AUTOINC

def rSMBK equ rWBK


;******************************************************************************
; Memory regions
;******************************************************************************

; Prefer RGBASM and RGBLINK features instead of these values.
; Note that the value of \`STARTOF(<section_type>)\` is determined at link time.

def _ROM     equ $0000 ; $0000-$3FFF / $0000-$7FFF (prefer \`STARTOF(ROM0)\`)
def _ROMBANK equ $4000 ; $4000-$7FFF               (prefer \`STARTOF(ROMX)\`)
def _VRAM    equ $8000 ; $8000-$9FFF               (prefer \`STARTOF(VRAM)\`)
def _SRAM    equ $A000 ; $A000-$BFFF               (prefer \`STARTOF(SRAM)\`)
def _RAM     equ $C000 ; $C000-$CFFF / $C000-$DFFF (prefer \`STARTOF(WRAM0)\`)
def _RAMBANK equ $D000 ; $D000-$DFFF               (prefer \`STARTOF(WRAMX)\`)
def _OAMRAM  equ $FE00 ; $FE00-$FE9F               (prefer \`STARTOF(OAM)\`)
def _IO      equ $FF00 ; $FF00-$FF7F, $FFFF        (prefer \`ldh [c]\` to \`ld [_IO+c]\`)
def _HRAM    equ $FF80 ; $FF80-$FFFE               (prefer \`STARTOF(HRAM)\`)


;******************************************************************************
; Cartridge header
;******************************************************************************

; Prefer RGBFIX instead of these values.
; Zero-filled space can be reserved for fixable header values like this:
;
;     SECTION "Cartridge header", ROM0[$0100]
;         nop :: jp $0150  ; Entry point ($0100-$0104)
;         ds $150 - @, $00 ; Header ($0104-$014FF) filled with $00s for RGBFIX to populate

; -- Nintendo logo ($0104-$0133) ----------------------------------------------
; Prefer \`rgbfix -f/--fix-spec l\` for the official logo, or \`rgbfix -L <logo_file>\` for a custom one
MACRO NINTENDO_LOGO
    db $CE,$ED,$66,$66,$CC,$0D,$00,$0B,$03,$73,$00,$83,$00,$0C,$00,$0D
    db $00,$08,$11,$1F,$88,$89,$00,$0E,$DC,$CC,$6E,$E6,$DD,$DD,$D9,$99
    db $BB,$BB,$67,$63,$6E,$0E,$EC,$CC,$DD,$DC,$99,$9F,$BB,$B9,$33,$3E
ENDM

; -- CGB compatibility code ($0143) -------------------------------------------
def CART_COMPATIBLE_DMG     equ $00 ; default value if header is zero-filled
def CART_COMPATIBLE_DMG_GBC equ $80 ; prefer \`rgbfix -c/--color-compatible\`
def CART_COMPATIBLE_GBC     equ $C0 ; prefer \`rgbfix -C/--color-only\`

; -- SGB flag ($0146) ---------------------------------------------------------
def CART_INDICATOR_GB  equ $00 ; default value if header is zero-filled
def CART_INDICATOR_SGB equ $03 ; prefer \`rgblink -s/--sgb-compatible\`

; -- Cartridge type ($0147) ---------------------------------------------------
; Prefer \`rgblink -m/--mbc_type <mbc_type>\`
def CART_ROM                     equ $00
def CART_ROM_MBC1                equ $01
def CART_ROM_MBC1_RAM            equ $02
def CART_ROM_MBC1_RAM_BAT        equ $03
def CART_ROM_MBC2                equ $05
def CART_ROM_MBC2_BAT            equ $06
def CART_ROM_RAM                 equ $08
def CART_ROM_RAM_BAT             equ $09
def CART_ROM_MMM01               equ $0B
def CART_ROM_MMM01_RAM           equ $0C
def CART_ROM_MMM01_RAM_BAT       equ $0D
def CART_ROM_MBC3_BAT_RTC        equ $0F
def CART_ROM_MBC3_RAM_BAT_RTC    equ $10
def CART_ROM_MBC3                equ $11
def CART_ROM_MBC3_RAM            equ $12
def CART_ROM_MBC3_RAM_BAT        equ $13
def CART_ROM_MBC5                equ $19
def CART_ROM_MBC5_RAM            equ $1A
def CART_ROM_MBC5_RAM_BAT        equ $1B
def CART_ROM_MBC5_RUMBLE         equ $1C
def CART_ROM_MBC5_RAM_RUMBLE     equ $1D
def CART_ROM_MBC5_RAM_BAT_RUMBLE equ $1E
def CART_ROM_MBC7_RAM_BAT_GYRO   equ $22
def CART_ROM_POCKET_CAMERA       equ $FC
def CART_ROM_BANDAI_TAMA5        equ $FD
def CART_ROM_HUDSON_HUC3         equ $FE
def CART_ROM_HUDSON_HUC1         equ $FF

; -- ROM size ($0148) ---------------------------------------------------------
; Prefer \`rgbfix -p/--pad_value <pad_value>\`, which pads to the smallest valid size
def CART_ROM_32KB   equ $00 ;   2 banks
def CART_ROM_64KB   equ $01 ;   4 banks
def CART_ROM_128KB  equ $02 ;   8 banks
def CART_ROM_256KB  equ $03 ;  16 banks
def CART_ROM_512KB  equ $04 ;  32 banks
def CART_ROM_1024KB equ $05 ;  64 banks
def CART_ROM_2048KB equ $06 ; 128 banks
def CART_ROM_4096KB equ $07 ; 256 banks
def CART_ROM_8192KB equ $08 ; 512 banks
def CART_ROM_1152KB equ $52 ;  72 banks
def CART_ROM_1280KB equ $53 ;  80 banks
def CART_ROM_1536KB equ $54 ;  96 banks

; -- SRAM size ($0149) --------------------------------------------------------
; Prefer \`rgbfix -r/--ram_size <ram_size>\`
def CART_SRAM_NONE  equ 0 ; none
def CART_SRAM_2KB   equ 1 ;  1 incomplete bank (homebrew only)
def CART_SRAM_8KB   equ 2 ;  1 bank
def CART_SRAM_32KB  equ 3 ;  4 banks
def CART_SRAM_128KB equ 4 ; 16 banks

; -- Destination code ($014A) -------------------------------------------------
def CART_DEST_JAPANESE     equ $00 ; default value if header is zero-filled
def CART_DEST_NON_JAPANESE equ $01 ; prefer \`rgbfix -j/--non-japanese\`


;******************************************************************************
; Deprecated constants
;******************************************************************************

def AUDLENF_DUTY equ AUD1LENF_DUTY
    def AUDLEN_DUTY_12_5 equ AUD1LEN_DUTY_12_5
    def AUDLEN_DUTY_25   equ AUD1LEN_DUTY_25
    def AUDLEN_DUTY_50   equ AUD1LEN_DUTY_50
    def AUDLEN_DUTY_75   equ AUD1LEN_DUTY_75

def AUDLENF_TIMER equ AUD1LENF_TIMER

def AUDENVF_INIT_VOL equ AUD1ENVF_INIT_VOL

def AUDENVB_DIR equ AUD1ENVB_DIR
    def AUDENVF_DIR equ AUD1ENVF_DIR
        def AUDENV_DOWN equ AUD1ENV_DOWN
        def AUDENV_UP   equ AUD1ENV_UP

def AUDENVF_PACE equ AUD1ENVF_PACE

def AUDHIGHB_RESTART    equ AUD1HIGHB_RESTART
def AUDHIGHB_LEN_ENABLE equ AUD1HIGHB_LEN_ENABLE
    def AUDHIGH_RESTART    equ AUD1HIGH_RESTART
    def AUDHIGH_LENGTH_OFF equ AUD1HIGH_LENGTH_OFF
    def AUDHIGH_LENGTH_ON  equ AUD1HIGH_LENGTH_ON

def AUDHIGHF_PERIOD_HIGH equ AUD1HIGHF_PERIOD_HIGH

def LCDCB_BG8000 equ LCDCB_BLKS
    def LCDCF_BG8800 equ LCDCF_BLK21
    def LCDCF_BG8000 equ LCDCF_BLK01

def IEB_HILO equ IEB_JOYPAD
    def IEF_HILO equ IEF_JOYPAD
def IEF_LCDC equ IEF_STAT

def sizeof_OAM_ATTRS equ OBJ_B

def _VRAM8000 equ _VRAM
def _VRAM8800 equ _VRAM + $800
def _VRAM9000 equ _VRAM + $1000

endc ; HARDWARE_COMPAT_INC
`,po='; Adapted from https://gbdev.io/gb-asm-tutorial/part1/hello_world.html\n\nINCLUDE "hardware.inc"\n\nSECTION "Header", ROM0[$100]\n\n  jp EntryPoint\n\n  ds $150 - @, 0 ; Make room for the header\n\nEntryPoint:\n  ; Shut down audio circuitry\n  xor a\n  ldh [rAUDENA], a\n\n  ; Do not turn the LCD off outside of VBlank\n.wait_vblank\n  ldh a, [rLY]\n  cp LY_VBLANK\n  jr c, .wait_vblank\n\n  ; Turn the LCD off\n  ld a, LCDC_OFF\n  ldh [rLCDC], a\n\n  ; Copy the tile data\n  ld de, Tiles\n  ld hl, STARTOF(VRAM) + $100 * TILE_SIZE\n  ld bc, Tiles.end - Tiles\n  call Copy\n\n  ; Copy the tilemap\n  ld de, Tilemap\n  ld hl, TILEMAP0\n  ld bc, Tilemap.end - Tilemap\n  call Copy\n\n  ; Turn the LCD on\n  ld a, LCDC_ON | LCDC_BG_ON\n  ldh [rLCDC], a\n\n  ; During the first (blank) frame, initialize display registers\n  ld a, %11_10_01_00\n  ldh [rBGP], a\n\n.done\n  jr .done\n\n; Subroutine to copy bc bytes from de to hl\nCopy:\n  ld a, [de]\n  ld [hli], a\n  inc de\n  dec bc\n  ld a, b\n  or a, c\n  jr nz, Copy\n  ret\n\nSECTION "Tile data", ROM0\n\nTiles:\n  dw `22222222, `22222222, `22222222, `22222222, `22222222, `22222222, `22222222, `22222222 ; $00\n  dw `22222222, `20000000, `20000000, `20000000, `20000000, `20000000, `20000000, `20000000 ; $01\n  dw `22222222, `02222220, `02222220, `02222220, `02222220, `02222220, `02222220, `02222220 ; $02\n  dw `22222222, `00000002, `00000002, `00000002, `00000002, `00000002, `00000002, `00000002 ; $03\n  dw `22222222, `00000000, `00000000, `00000000, `00000000, `00000000, `00000000, `00000000 ; $04\n  dw `22222222, `02222222, `02222222, `02222222, `02222222, `02222222, `02222222, `02222222 ; $05\n  dw `22222222, `22222211, `22222000, `22220000, `22200000, `22100000, `22000000, `21000000 ; $06\n  dw `22222222, `11222222, `00022222, `00002222, `00000222, `00000122, `00000022, `00000012 ; $07\n  dw `20000000, `20000000, `21111111, `20000000, `20000000, `21111111, `21111111, `20000000 ; $08\n  dw `02222220, `02323230, `13232321, `02323230, `03232320, `11111111, `11111111, `00000000 ; $09\n  dw `00000002, `00000002, `11111113, `00000002, `00000003, `11111112, `11111113, `00000002 ; $0a\n  dw `20000000, `30000000, `21111111, `30000000, `20000000, `31111111, `21111111, `30000000 ; $0b\n  dw `02222222, `02323232, `13232323, `02323232, `03232323, `11111111, `11111111, `00000000 ; $0c\n  dw `22222222, `32323232, `23232323, `32323232, `23232323, `11111232, `11111323, `00000232 ; $0d\n  dw `02222222, `02323232, `13232323, `02323232, `03232323, `12323232, `13232323, `02323232 ; $0e\n  dw `22222222, `32222222, `22222222, `32222222, `22222222, `32222222, `22222222, `32222222 ; $0f\n  dw `21000000, `20000000, `21111111, `20000000, `20000000, `21111111, `21111111, `20000000 ; $10\n  dw `00222200, `02222230, `12222321, `02223230, `02232320, `12323231, `12232321, `02323230 ; $11\n  dw `00000012, `00000002, `11111113, `00000002, `00000003, `11111112, `11111113, `00000002 ; $12\n  dw `22222222, `32222222, `23232222, `32323222, `23232222, `32323222, `23232322, `32323222 ; $13\n  dw `21111111, `21111111, `21111111, `21111111, `21111111, `21111111, `21111111, `21111111 ; $14\n  dw `11111111, `11111111, `11111111, `12323231, `13232321, `12323231, `13232321, `12323231 ; $15\n  dw `11111113, `11111112, `11111113, `11111112, `11111113, `11111112, `11111113, `11111112 ; $16\n  dw `21111111, `31111111, `21111111, `31111111, `21111111, `31111111, `21111111, `31111111 ; $17\n  dw `11111111, `11111111, `11111111, `12323232, `13232323, `12323232, `13232323, `12323232 ; $18\n  dw `11111222, `11111222, `11111222, `32222222, `22222222, `32323232, `23232323, `32323232 ; $19\n  dw `21111111, `21111111, `21111111, `21111111, `21111111, `31111111, `21111111, `31111111 ; $1a\n  dw `13232323, `12323232, `13232323, `12323232, `13232323, `12323232, `13232323, `12323232 ; $1b\n  dw `13232321, `12323231, `13232321, `12323231, `13232321, `12323231, `13232321, `11323211 ; $1c\n  dw `23232322, `32323232, `23232322, `32323232, `23232322, `32323232, `23232322, `32323232 ; $1d\n  dw `21111111, `21111111, `21111111, `21111111, `21111111, `21111111, `21111111, `22222222 ; $1e\n  dw `13232321, `12323231, `13232321, `12323231, `13232321, `12323231, `13232321, `22323232 ; $1f\n  dw `11111113, `11111112, `11111113, `11111112, `11111113, `11111112, `11111113, `32222222 ; $20\n  dw `21111111, `31111111, `21111111, `31111111, `21111111, `31111111, `21111111, `32323232 ; $21\n  dw `11111111, `11111111, `11111111, `11111111, `11111111, `11111111, `11111111, `22323232 ; $22\n  dw `11111113, `11111112, `11111113, `11111112, `11111112, `11111112, `11111112, `32222222 ; $23\n  dw `21111111, `31111111, `21111111, `21111111, `21111111, `21111111, `21111111, `22222222 ; $24\n  dw `11111112, `11111112, `11111112, `11111112, `11111112, `11111112, `11111112, `32222222 ; $25\n  dw `22111111, `22111111, `22111111, `22211111, `22211111, `22221111, `22222211, `22222222 ; $26\n  dw `11111123, `11111122, `11111123, `11111222, `11111223, `11112222, `11222223, `32222232 ; $27\n  dw `23232323, `02323230, `03232320, `02323230, `03232320, `02323230, `03232320, `02222220 ; $28\n  dw `22222223, `00000002, `00000003, `00000002, `00000003, `00000002, `00000003, `00000002 ; $29\n  dw `23232322, `32323110, `23230000, `32300000, `23100000, `32000000, `21000000, `21000000 ; $2a\n  dw `23232323, `00000000, `00000000, `00000000, `00000000, `00000000, `00000000, `00000000 ; $2b\n  dw `23232323, `01123232, `00002323, `00000232, `00000323, `00000032, `00000013, `00000012 ; $2c\n  dw `23232322, `30000000, `20000000, `30000000, `20000000, `30000000, `20000000, `20000000 ; $2d\n  dw `23232323, `00123232, `00001323, `00000132, `00000023, `00000012, `00000003, `00000002 ; $2e\n  dw `23232323, `02323232, `03232323, `02323232, `03232323, `02323232, `03232323, `02222222 ; $2f\n  dw `23232323, `32323232, `23232323, `32323232, `23232323, `32323232, `23232323, `22222222 ; $30\n  dw `22232323, `00000000, `00000000, `00000000, `00000000, `00000000, `00000000, `00000000 ; $31\n  dw `23232323, `01123232, `00001323, `00000132, `00000023, `00000012, `00000013, `00000002 ; $32\n  dw `23232322, `32323222, `23232322, `32323222, `23232222, `32322222, `23222222, `22222222 ; $33\n  dw `02222220, `02323230, `13232321, `02323230, `03232320, `12321231, `13211321, `02300230 ; $34\n  dw `02222200, `02323230, `13232321, `02323230, `03232300, `11111111, `11111111, `00000000 ; $35\n  dw `00000002, `00000002, `11111113, `00000012, `00000113, `11111132, `11111323, `00003232 ; $36\n  dw `02222200, `02323230, `13232321, `02323230, `03232320, `12323231, `13232321, `02323230 ; $37\n  dw `22222222, `32322222, `23232222, `32323222, `23232322, `32323222, `23232322, `32323232 ; $38\n  dw `13211121, `12111131, `13111121, `12111111, `11111111, `11111111, `11112111, `11123111 ; $39\n  dw `11111111, `11111111, `11111111, `12323211, `13232321, `12323231, `13232321, `12323231 ; $3a\n  dw `11111223, `11111122, `11111123, `11111112, `11111113, `11111112, `11111113, `11111112 ; $3b\n  dw `13232321, `12323231, `13232321, `12323231, `13232321, `12323231, `13232321, `12323211 ; $3c\n  dw `11132111, `11123211, `11232311, `11323211, `11232321, `12323231, `13232321, `22323232 ; $3d\n  dw `11111113, `11111112, `11111113, `11111112, `11111113, `11111112, `11111113, `32322232 ; $3e\n  dw `23111111, `32111111, `23111111, `32311111, `23211111, `32321111, `23232311, `32323232 ; $3f\n  dw `11111113, `11111122, `11111123, `11111122, `11111223, `11112222, `11222223, `32222232 ; $40\n  dw `23232323, `22323232, `23232323, `22323232, `23232323, `22323232, `23232323, `22222222 ; $41\n  dw `23222323, `32322232, `23222223, `32222232, `23222223, `32222222, `22222223, `22222222 ; $42\n  dw `23232322, `32323232, `23232322, `32323232, `23232322, `32323232, `23232322, `22222222 ; $43\n  dw `22232323, `22323232, `22232323, `22223232, `22232323, `22223232, `22222223, `22222222 ; $44\n  dw `22222223, `32222222, `22222223, `32222222, `22222223, `32222222, `22222223, `22222222 ; $45\n.end\n\nSECTION "Tilemap", ROM0\n\nTilemap:\n  db $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00,  0,0,0,0,0,0,0,0,0,0,0,0\n  db $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00,  0,0,0,0,0,0,0,0,0,0,0,0\n  db $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00,  0,0,0,0,0,0,0,0,0,0,0,0\n  db $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00,  0,0,0,0,0,0,0,0,0,0,0,0\n  db $00, $00, $01, $02, $03, $01, $04, $03, $01, $05, $00, $01, $05, $00, $06, $04, $07, $00, $00, $00,  0,0,0,0,0,0,0,0,0,0,0,0\n  db $00, $00, $08, $09, $0a, $0b, $0c, $0d, $0b, $0e, $0f, $08, $0e, $0f, $10, $11, $12, $13, $00, $00,  0,0,0,0,0,0,0,0,0,0,0,0\n  db $00, $00, $14, $15, $16, $17, $18, $19, $1a, $1b, $0f, $14, $1b, $0f, $14, $1c, $16, $1d, $00, $00,  0,0,0,0,0,0,0,0,0,0,0,0\n  db $00, $00, $1e, $1f, $20, $21, $22, $23, $24, $22, $25, $1e, $22, $25, $26, $22, $27, $1d, $00, $00,  0,0,0,0,0,0,0,0,0,0,0,0\n  db $00, $00, $01, $28, $29, $2a, $2b, $2c, $2d, $2b, $2e, $2d, $2f, $30, $2d, $31, $32, $33, $00, $00,  0,0,0,0,0,0,0,0,0,0,0,0\n  db $00, $00, $08, $34, $0a, $0b, $11, $0a, $0b, $35, $36, $0b, $0e, $0f, $08, $37, $0a, $38, $00, $00,  0,0,0,0,0,0,0,0,0,0,0,0\n  db $00, $00, $14, $39, $16, $17, $1c, $16, $17, $3a, $3b, $17, $1b, $0f, $14, $3c, $16, $1d, $00, $00,  0,0,0,0,0,0,0,0,0,0,0,0\n  db $00, $00, $1e, $3d, $3e, $3f, $22, $27, $21, $1f, $20, $21, $22, $25, $1e, $22, $40, $1d, $00, $00,  0,0,0,0,0,0,0,0,0,0,0,0\n  db $00, $00, $00, $41, $42, $43, $44, $30, $33, $41, $45, $43, $41, $30, $43, $41, $30, $33, $00, $00,  0,0,0,0,0,0,0,0,0,0,0,0\n  db $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00,  0,0,0,0,0,0,0,0,0,0,0,0\n  db $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00,  0,0,0,0,0,0,0,0,0,0,0,0\n  db $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00,  0,0,0,0,0,0,0,0,0,0,0,0\n  db $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00,  0,0,0,0,0,0,0,0,0,0,0,0\n  db $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00,  0,0,0,0,0,0,0,0,0,0,0,0\n.end\n',Mt={autoUrl:!1,autoLocalStorage:!1};let Ze;ri();function ri(){Ze={"hardware.inc":wr,"hardware_compat.inc":ni,"main.asm":po}}function In(){return{"hardware.inc":wr,"hardware_compat.inc":ni}}function go(){if(location.hash.length>1)location.hash.startsWith("#https://gist.github.com/")?(si(location.hash.slice(1)),location.hash=""):location.hash.startsWith("#http://")||location.hash.startsWith("#https://")?(wo(location.hash.slice(1)),location.hash=""):(mo(),Mt.autoUrl=!0);else if("rgbds_storage"in localStorage){Ze=In();for(var[ee,X]of Object.entries(JSON.parse(localStorage.rgbds_storage)))X instanceof Object&&(X=Uint8Array.from(Object.values(X))),Ze[ee]=X;Mt.autoLocalStorage=!0}}function ut(){return Ze}function Ot(ee,X){typeof ee<"u"&&(X instanceof ArrayBuffer&&(X=new Uint8Array(X)),X===null?delete Ze[ee]:Ze[ee]=X),Mt.autoUrl&&(document.location.hash=new URL(ii()).hash),Mt.autoLocalStorage&&(localStorage.rgbds_storage=JSON.stringify(Ze))}function mo(){var ee=Vr.decompressFromEncodedURIComponent(location.hash.slice(1));if(ee==null)return!1;if(ee.indexOf("\0")<0)return Ze["main.asm"]=ee,!0;ee=ee.split("\0"),Ze=In();for(var X=0;X<ee.length-1;X+=2)Ze[ee[X]]=ee[X+1];return!0}function ii(){var ee="";for(var[X,g]of Object.entries(Ze))X=="hardware.inc"&&g==wr||(ee+=X+"\0"+g+"\0");var I=new URL(document.location);return I.hash=Vr.compressToEncodedURIComponent(ee),I.hash.length>1024*2?"Sorry, code too large for direct URL generation":I.toString()}function oi(ee){var X=/https:\/\/gist\.github\.com\/\w+\/(\w+)/.exec(ee);return X?X[1]:null}function si(ee){var X=oi(ee);if(X!=null){var g=new XMLHttpRequest;g.open("GET","https://api.github.com/gists/"+X,!1),g.send(),JSON.parse(g.response);var I=JSON.parse(g.responseText);Ze=In();for(var[z,D]of Object.entries(I.files))Ze[z]=D.content;Ar()}}function vo(ee,X,g){var I={};for(var[z,D]of Object.entries(Ze))I[z]={content:D};if(g==""){var A=new XMLHttpRequest;return A.open("POST","https://api.github.com/gists",!1),A.setRequestHeader("Authorization","Basic "+btoa(ee+":"+X)),A.send(JSON.stringify({files:I})),A.status>=400?null:JSON.parse(A.response).html_url}var S=oi(g);if(S==null)return null;var A=new XMLHttpRequest;return A.open("PATCH","https://api.github.com/gists/"+S,!1),A.setRequestHeader("Authorization","Basic "+btoa(ee+":"+X)),A.send(JSON.stringify({files:I})),A.status>=400?null:g}function _o(){var ee=new qr;for(var[X,g]of Object.entries(Ze))ee.file(X,g);ee.generateAsync({type:"blob"}).then(function(I){var z=document.createElement("a"),D=window.URL.createObjectURL(I,{type:"application/octet-stream"});z.setAttribute("href",D),z.setAttribute("download","source.zip"),z.style.display="none",document.body.appendChild(z),z.click(),document.body.removeChild(z),window.URL.revokeObjectURL(D)})}function yo(ee){Ze=In(),qr.loadAsync(ee).then(function(X){var g=Object.values(X.files);function I(){if(!(g.length<1)){var z=g.pop(),D=fr(z.name)=="text"?"string":"uint8array";z.async(D).then(function(S){Ze[z.name]=S,I(),Ar()})}}I()})}function wo(ee){Ze=In();var X=new XMLHttpRequest;X.open("GET",ee,!1),X.send(),Ze["main.asm"]=X.response,Ar()}function Ar(){zt(Object.keys(Ze)[0]),xt(),Gn()}var Ao=async function(ee={}){var X,g=ee,I,z,D=new Promise((y,x)=>{I=y,z=x}),S=[],A="./this.program",s=(y,x)=>{throw x},h=import.meta.url,o="";function n(y){return g.locateFile?g.locateFile(y,o):o+y}var i,t;{try{o=new URL(".",h).href}catch{}i=async y=>{var x=await fetch(y,{credentials:"same-origin"});if(x.ok)return x.arrayBuffer();throw new Error(x.status+" : "+x.url)}}var e=console.log.bind(console),r=console.error.bind(console),a,u,p=!1,M,w,m,d,_,T,R;function $(){var y=u.buffer;w=new Int8Array(y),d=new Int16Array(y),m=new Uint8Array(y),_=new Int32Array(y),T=new Uint32Array(y),R=new BigInt64Array(y),new BigUint64Array(y)}function k(){if(g.preRun)for(typeof g.preRun=="function"&&(g.preRun=[g.preRun]);g.preRun.length;)Ie(g.preRun.shift());me(Me)}function v(){!g.noFSInit&&!f.initialized&&f.init(),c.w(),f.ignorePermissions=!1}function b(){if(g.postRun)for(typeof g.postRun=="function"&&(g.postRun=[g.postRun]);g.postRun.length;)Ce(g.postRun.shift());me(ve)}var l=0,C=null;function O(y){l++,g.monitorRunDependencies?.(l)}function N(y){if(l--,g.monitorRunDependencies?.(l),l==0&&C){var x=C;C=null,x()}}function G(y){g.onAbort?.(y),y="Aborted("+y+")",r(y),p=!0,y+=". Build with -sASSERTIONS for more info.";var x=new WebAssembly.RuntimeError(y);throw z(x),x}var W;function K(){return g.locateFile?n("rgbasm.wasm"):new URL(""+new URL("rgbasm-D5cYl5Lp.wasm",import.meta.url).href,import.meta.url).href}function V(y){if(y==W&&a)return new Uint8Array(a);throw"both async and sync fetching of the wasm failed"}async function Y(y){if(!a)try{var x=await i(y);return new Uint8Array(x)}catch{}return V(y)}async function re(y,x){try{var P=await Y(y),q=await WebAssembly.instantiate(P,x);return q}catch(J){r(`failed to asynchronously prepare wasm: ${J}`),G(J)}}async function Q(y,x,P){if(!y&&typeof WebAssembly.instantiateStreaming=="function")try{var q=fetch(x,{credentials:"same-origin"}),J=await WebAssembly.instantiateStreaming(q,P);return J}catch(ne){r(`wasm streaming compile failed: ${ne}`),r("falling back to ArrayBuffer instantiation")}return re(x,P)}function ie(){return{a:L}}async function ue(){function y(ne,ae){return c=ne.exports,u=c.v,$(),N(),c}O();function x(ne){return y(ne.instance)}var P=ie();if(g.instantiateWasm)return new Promise((ne,ae)=>{g.instantiateWasm(P,(de,Se)=>{ne(y(de))})});W??=K();try{var q=await Q(a,W,P),J=x(q);return J}catch(ne){return z(ne),Promise.reject(ne)}}class ge{name="ExitStatus";constructor(x){this.message=`Program terminated with exit(${x})`,this.status=x}}var me=y=>{for(;y.length>0;)y.shift()(g)},ve=[],Ce=y=>ve.push(y),Me=[],Ie=y=>Me.push(y),ze=!0,U=()=>{var y=_[+Be.varargs>>2];return Be.varargs+=4,y},pe=U,le={isAbs:y=>y.charAt(0)==="/",splitPath:y=>{var x=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return x.exec(y).slice(1)},normalizeArray:(y,x)=>{for(var P=0,q=y.length-1;q>=0;q--){var J=y[q];J==="."?y.splice(q,1):J===".."?(y.splice(q,1),P++):P&&(y.splice(q,1),P--)}if(x)for(;P;P--)y.unshift("..");return y},normalize:y=>{var x=le.isAbs(y),P=y.slice(-1)==="/";return y=le.normalizeArray(y.split("/").filter(q=>!!q),!x).join("/"),!y&&!x&&(y="."),y&&P&&(y+="/"),(x?"/":"")+y},dirname:y=>{var x=le.splitPath(y),P=x[0],q=x[1];return!P&&!q?".":(q&&(q=q.slice(0,-1)),P+q)},basename:y=>y&&y.match(/([^\/]+|\/)\/*$/)[1],join:(...y)=>le.normalize(y.join("/")),join2:(y,x)=>le.normalize(y+"/"+x)},oe=()=>y=>crypto.getRandomValues(y),te=y=>{(te=oe())(y)},ce={resolve:(...y)=>{for(var x="",P=!1,q=y.length-1;q>=-1&&!P;q--){var J=q>=0?y[q]:f.cwd();if(typeof J!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!J)return"";x=J+"/"+x,P=le.isAbs(J)}return x=le.normalizeArray(x.split("/").filter(ne=>!!ne),!P).join("/"),(P?"/":"")+x||"."},relative:(y,x)=>{y=ce.resolve(y).slice(1),x=ce.resolve(x).slice(1);function P(Le){for(var xe=0;xe<Le.length&&Le[xe]==="";xe++);for(var Ue=Le.length-1;Ue>=0&&Le[Ue]==="";Ue--);return xe>Ue?[]:Le.slice(xe,Ue-xe+1)}for(var q=P(y.split("/")),J=P(x.split("/")),ne=Math.min(q.length,J.length),ae=ne,de=0;de<ne;de++)if(q[de]!==J[de]){ae=de;break}for(var Se=[],de=ae;de<q.length;de++)Se.push("..");return Se=Se.concat(J.slice(ae)),Se.join("/")}},ye=typeof TextDecoder<"u"?new TextDecoder:void 0,_e=(y,x=0,P=NaN)=>{for(var q=x+P,J=x;y[J]&&!(J>=q);)++J;if(J-x>16&&y.buffer&&ye)return ye.decode(y.subarray(x,J));for(var ne="";x<J;){var ae=y[x++];if(!(ae&128)){ne+=String.fromCharCode(ae);continue}var de=y[x++]&63;if((ae&224)==192){ne+=String.fromCharCode((ae&31)<<6|de);continue}var Se=y[x++]&63;if((ae&240)==224?ae=(ae&15)<<12|de<<6|Se:ae=(ae&7)<<18|de<<12|Se<<6|y[x++]&63,ae<65536)ne+=String.fromCharCode(ae);else{var Le=ae-65536;ne+=String.fromCharCode(55296|Le>>10,56320|Le&1023)}}return ne},fe=[],be=y=>{for(var x=0,P=0;P<y.length;++P){var q=y.charCodeAt(P);q<=127?x++:q<=2047?x+=2:q>=55296&&q<=57343?(x+=4,++P):x+=3}return x},$e=(y,x,P,q)=>{if(!(q>0))return 0;for(var J=P,ne=P+q-1,ae=0;ae<y.length;++ae){var de=y.charCodeAt(ae);if(de>=55296&&de<=57343){var Se=y.charCodeAt(++ae);de=65536+((de&1023)<<10)|Se&1023}if(de<=127){if(P>=ne)break;x[P++]=de}else if(de<=2047){if(P+1>=ne)break;x[P++]=192|de>>6,x[P++]=128|de&63}else if(de<=65535){if(P+2>=ne)break;x[P++]=224|de>>12,x[P++]=128|de>>6&63,x[P++]=128|de&63}else{if(P+3>=ne)break;x[P++]=240|de>>18,x[P++]=128|de>>12&63,x[P++]=128|de>>6&63,x[P++]=128|de&63}}return x[P]=0,P-J},Re=(y,x,P)=>{var q=be(y)+1,J=new Array(q),ne=$e(y,J,0,J.length);return J.length=ne,J},he=()=>{if(!fe.length){var y=null;if(typeof window<"u"&&typeof window.prompt=="function"&&(y=window.prompt("Input: "),y!==null&&(y+=`
`)),!y)return null;fe=Re(y)}return fe.shift()},we={ttys:[],init(){},shutdown(){},register(y,x){we.ttys[y]={input:[],output:[],ops:x},f.registerDevice(y,we.stream_ops)},stream_ops:{open(y){var x=we.ttys[y.node.rdev];if(!x)throw new f.ErrnoError(43);y.tty=x,y.seekable=!1},close(y){y.tty.ops.fsync(y.tty)},fsync(y){y.tty.ops.fsync(y.tty)},read(y,x,P,q,J){if(!y.tty||!y.tty.ops.get_char)throw new f.ErrnoError(60);for(var ne=0,ae=0;ae<q;ae++){var de;try{de=y.tty.ops.get_char(y.tty)}catch{throw new f.ErrnoError(29)}if(de===void 0&&ne===0)throw new f.ErrnoError(6);if(de==null)break;ne++,x[P+ae]=de}return ne&&(y.node.atime=Date.now()),ne},write(y,x,P,q,J){if(!y.tty||!y.tty.ops.put_char)throw new f.ErrnoError(60);try{for(var ne=0;ne<q;ne++)y.tty.ops.put_char(y.tty,x[P+ne])}catch{throw new f.ErrnoError(29)}return q&&(y.node.mtime=y.node.ctime=Date.now()),ne}},default_tty_ops:{get_char(y){return he()},put_char(y,x){x===null||x===10?(e(_e(y.output)),y.output=[]):x!=0&&y.output.push(x)},fsync(y){y.output?.length>0&&(e(_e(y.output)),y.output=[])},ioctl_tcgets(y){return{c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},ioctl_tcsets(y,x,P){return 0},ioctl_tiocgwinsz(y){return[24,80]}},default_tty1_ops:{put_char(y,x){x===null||x===10?(r(_e(y.output)),y.output=[]):x!=0&&y.output.push(x)},fsync(y){y.output?.length>0&&(r(_e(y.output)),y.output=[])}}},Te=y=>{G()},se={ops_table:null,mount(y){return se.createNode(null,"/",16895,0)},createNode(y,x,P,q){if(f.isBlkdev(P)||f.isFIFO(P))throw new f.ErrnoError(63);se.ops_table||={dir:{node:{getattr:se.node_ops.getattr,setattr:se.node_ops.setattr,lookup:se.node_ops.lookup,mknod:se.node_ops.mknod,rename:se.node_ops.rename,unlink:se.node_ops.unlink,rmdir:se.node_ops.rmdir,readdir:se.node_ops.readdir,symlink:se.node_ops.symlink},stream:{llseek:se.stream_ops.llseek}},file:{node:{getattr:se.node_ops.getattr,setattr:se.node_ops.setattr},stream:{llseek:se.stream_ops.llseek,read:se.stream_ops.read,write:se.stream_ops.write,mmap:se.stream_ops.mmap,msync:se.stream_ops.msync}},link:{node:{getattr:se.node_ops.getattr,setattr:se.node_ops.setattr,readlink:se.node_ops.readlink},stream:{}},chrdev:{node:{getattr:se.node_ops.getattr,setattr:se.node_ops.setattr},stream:f.chrdev_stream_ops}};var J=f.createNode(y,x,P,q);return f.isDir(J.mode)?(J.node_ops=se.ops_table.dir.node,J.stream_ops=se.ops_table.dir.stream,J.contents={}):f.isFile(J.mode)?(J.node_ops=se.ops_table.file.node,J.stream_ops=se.ops_table.file.stream,J.usedBytes=0,J.contents=null):f.isLink(J.mode)?(J.node_ops=se.ops_table.link.node,J.stream_ops=se.ops_table.link.stream):f.isChrdev(J.mode)&&(J.node_ops=se.ops_table.chrdev.node,J.stream_ops=se.ops_table.chrdev.stream),J.atime=J.mtime=J.ctime=Date.now(),y&&(y.contents[x]=J,y.atime=y.mtime=y.ctime=J.atime),J},getFileDataAsTypedArray(y){return y.contents?y.contents.subarray?y.contents.subarray(0,y.usedBytes):new Uint8Array(y.contents):new Uint8Array(0)},expandFileStorage(y,x){var P=y.contents?y.contents.length:0;if(!(P>=x)){var q=1024*1024;x=Math.max(x,P*(P<q?2:1.125)>>>0),P!=0&&(x=Math.max(x,256));var J=y.contents;y.contents=new Uint8Array(x),y.usedBytes>0&&y.contents.set(J.subarray(0,y.usedBytes),0)}},resizeFileStorage(y,x){if(y.usedBytes!=x)if(x==0)y.contents=null,y.usedBytes=0;else{var P=y.contents;y.contents=new Uint8Array(x),P&&y.contents.set(P.subarray(0,Math.min(x,y.usedBytes))),y.usedBytes=x}},node_ops:{getattr(y){var x={};return x.dev=f.isChrdev(y.mode)?y.id:1,x.ino=y.id,x.mode=y.mode,x.nlink=1,x.uid=0,x.gid=0,x.rdev=y.rdev,f.isDir(y.mode)?x.size=4096:f.isFile(y.mode)?x.size=y.usedBytes:f.isLink(y.mode)?x.size=y.link.length:x.size=0,x.atime=new Date(y.atime),x.mtime=new Date(y.mtime),x.ctime=new Date(y.ctime),x.blksize=4096,x.blocks=Math.ceil(x.size/x.blksize),x},setattr(y,x){for(const P of["mode","atime","mtime","ctime"])x[P]!=null&&(y[P]=x[P]);x.size!==void 0&&se.resizeFileStorage(y,x.size)},lookup(y,x){throw se.doesNotExistError},mknod(y,x,P,q){return se.createNode(y,x,P,q)},rename(y,x,P){var q;try{q=f.lookupNode(x,P)}catch{}if(q){if(f.isDir(y.mode))for(var J in q.contents)throw new f.ErrnoError(55);f.hashRemoveNode(q)}delete y.parent.contents[y.name],x.contents[P]=y,y.name=P,x.ctime=x.mtime=y.parent.ctime=y.parent.mtime=Date.now()},unlink(y,x){delete y.contents[x],y.ctime=y.mtime=Date.now()},rmdir(y,x){var P=f.lookupNode(y,x);for(var q in P.contents)throw new f.ErrnoError(55);delete y.contents[x],y.ctime=y.mtime=Date.now()},readdir(y){return[".","..",...Object.keys(y.contents)]},symlink(y,x,P){var q=se.createNode(y,x,41471,0);return q.link=P,q},readlink(y){if(!f.isLink(y.mode))throw new f.ErrnoError(28);return y.link}},stream_ops:{read(y,x,P,q,J){var ne=y.node.contents;if(J>=y.node.usedBytes)return 0;var ae=Math.min(y.node.usedBytes-J,q);if(ae>8&&ne.subarray)x.set(ne.subarray(J,J+ae),P);else for(var de=0;de<ae;de++)x[P+de]=ne[J+de];return ae},write(y,x,P,q,J,ne){if(x.buffer===w.buffer&&(ne=!1),!q)return 0;var ae=y.node;if(ae.mtime=ae.ctime=Date.now(),x.subarray&&(!ae.contents||ae.contents.subarray)){if(ne)return ae.contents=x.subarray(P,P+q),ae.usedBytes=q,q;if(ae.usedBytes===0&&J===0)return ae.contents=x.slice(P,P+q),ae.usedBytes=q,q;if(J+q<=ae.usedBytes)return ae.contents.set(x.subarray(P,P+q),J),q}if(se.expandFileStorage(ae,J+q),ae.contents.subarray&&x.subarray)ae.contents.set(x.subarray(P,P+q),J);else for(var de=0;de<q;de++)ae.contents[J+de]=x[P+de];return ae.usedBytes=Math.max(ae.usedBytes,J+q),q},llseek(y,x,P){var q=x;if(P===1?q+=y.position:P===2&&f.isFile(y.node.mode)&&(q+=y.node.usedBytes),q<0)throw new f.ErrnoError(28);return q},mmap(y,x,P,q,J){if(!f.isFile(y.node.mode))throw new f.ErrnoError(43);var ne,ae,de=y.node.contents;if(!(J&2)&&de&&de.buffer===w.buffer)ae=!1,ne=de.byteOffset;else{if(ae=!0,ne=Te(),!ne)throw new f.ErrnoError(48);de&&((P>0||P+x<de.length)&&(de.subarray?de=de.subarray(P,P+x):de=Array.prototype.slice.call(de,P,P+x)),w.set(de,ne))}return{ptr:ne,allocated:ae}},msync(y,x,P,q,J){return se.stream_ops.write(y,x,0,q,P,!1),0}}},We=async y=>{var x=await i(y);return new Uint8Array(x)},Ge=(...y)=>f.createDataFile(...y),Ae=[],Ee=(y,x,P,q)=>{typeof Browser<"u"&&Browser.init();var J=!1;return Ae.forEach(ne=>{J||ne.canHandle(x)&&(ne.handle(y,x,P,q),J=!0)}),J},ke=(y,x,P,q,J,ne,ae,de,Se,Le)=>{var xe=x?ce.resolve(le.join2(y,x)):y;function Ue(Ne){function De(Pe){Le?.(),de||Ge(y,x,Pe,q,J,Se),ne?.(),N()}Ee(Ne,xe,De,()=>{ae?.(),N()})||De(Ne)}O(),typeof P=="string"?We(P).then(Ue,ae):Ue(P)},Oe=y=>{var x={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},P=x[y];if(typeof P>"u")throw new Error(`Unknown file open mode: ${y}`);return P},Fe=(y,x)=>{var P=0;return y&&(P|=365),x&&(P|=146),P},f={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,filesystems:null,syncFSRequests:0,readFiles:{},ErrnoError:class{name="ErrnoError";constructor(y){this.errno=y}},FSStream:class{shared={};get object(){return this.node}set object(y){this.node=y}get isRead(){return(this.flags&2097155)!==1}get isWrite(){return(this.flags&2097155)!==0}get isAppend(){return this.flags&1024}get flags(){return this.shared.flags}set flags(y){this.shared.flags=y}get position(){return this.shared.position}set position(y){this.shared.position=y}},FSNode:class{node_ops={};stream_ops={};readMode=365;writeMode=146;mounted=null;constructor(y,x,P,q){y||(y=this),this.parent=y,this.mount=y.mount,this.id=f.nextInode++,this.name=x,this.mode=P,this.rdev=q,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&this.readMode)===this.readMode}set read(y){y?this.mode|=this.readMode:this.mode&=~this.readMode}get write(){return(this.mode&this.writeMode)===this.writeMode}set write(y){y?this.mode|=this.writeMode:this.mode&=~this.writeMode}get isFolder(){return f.isDir(this.mode)}get isDevice(){return f.isChrdev(this.mode)}},lookupPath(y,x={}){if(!y)throw new f.ErrnoError(44);x.follow_mount??=!0,le.isAbs(y)||(y=f.cwd()+"/"+y);e:for(var P=0;P<40;P++){for(var q=y.split("/").filter(Le=>!!Le),J=f.root,ne="/",ae=0;ae<q.length;ae++){var de=ae===q.length-1;if(de&&x.parent)break;if(q[ae]!=="."){if(q[ae]===".."){if(ne=le.dirname(ne),f.isRoot(J)){y=ne+"/"+q.slice(ae+1).join("/");continue e}else J=J.parent;continue}ne=le.join2(ne,q[ae]);try{J=f.lookupNode(J,q[ae])}catch(Le){if(Le?.errno===44&&de&&x.noent_okay)return{path:ne};throw Le}if(f.isMountpoint(J)&&(!de||x.follow_mount)&&(J=J.mounted.root),f.isLink(J.mode)&&(!de||x.follow)){if(!J.node_ops.readlink)throw new f.ErrnoError(52);var Se=J.node_ops.readlink(J);le.isAbs(Se)||(Se=le.dirname(ne)+"/"+Se),y=Se+"/"+q.slice(ae+1).join("/");continue e}}}return{path:ne,node:J}}throw new f.ErrnoError(32)},getPath(y){for(var x;;){if(f.isRoot(y)){var P=y.mount.mountpoint;return x?P[P.length-1]!=="/"?`${P}/${x}`:P+x:P}x=x?`${y.name}/${x}`:y.name,y=y.parent}},hashName(y,x){for(var P=0,q=0;q<x.length;q++)P=(P<<5)-P+x.charCodeAt(q)|0;return(y+P>>>0)%f.nameTable.length},hashAddNode(y){var x=f.hashName(y.parent.id,y.name);y.name_next=f.nameTable[x],f.nameTable[x]=y},hashRemoveNode(y){var x=f.hashName(y.parent.id,y.name);if(f.nameTable[x]===y)f.nameTable[x]=y.name_next;else for(var P=f.nameTable[x];P;){if(P.name_next===y){P.name_next=y.name_next;break}P=P.name_next}},lookupNode(y,x){var P=f.mayLookup(y);if(P)throw new f.ErrnoError(P);for(var q=f.hashName(y.id,x),J=f.nameTable[q];J;J=J.name_next){var ne=J.name;if(J.parent.id===y.id&&ne===x)return J}return f.lookup(y,x)},createNode(y,x,P,q){var J=new f.FSNode(y,x,P,q);return f.hashAddNode(J),J},destroyNode(y){f.hashRemoveNode(y)},isRoot(y){return y===y.parent},isMountpoint(y){return!!y.mounted},isFile(y){return(y&61440)===32768},isDir(y){return(y&61440)===16384},isLink(y){return(y&61440)===40960},isChrdev(y){return(y&61440)===8192},isBlkdev(y){return(y&61440)===24576},isFIFO(y){return(y&61440)===4096},isSocket(y){return(y&49152)===49152},flagsToPermissionString(y){var x=["r","w","rw"][y&3];return y&512&&(x+="w"),x},nodePermissions(y,x){return f.ignorePermissions?0:x.includes("r")&&!(y.mode&292)||x.includes("w")&&!(y.mode&146)||x.includes("x")&&!(y.mode&73)?2:0},mayLookup(y){if(!f.isDir(y.mode))return 54;var x=f.nodePermissions(y,"x");return x||(y.node_ops.lookup?0:2)},mayCreate(y,x){if(!f.isDir(y.mode))return 54;try{var P=f.lookupNode(y,x);return 20}catch{}return f.nodePermissions(y,"wx")},mayDelete(y,x,P){var q;try{q=f.lookupNode(y,x)}catch(ne){return ne.errno}var J=f.nodePermissions(y,"wx");if(J)return J;if(P){if(!f.isDir(q.mode))return 54;if(f.isRoot(q)||f.getPath(q)===f.cwd())return 10}else if(f.isDir(q.mode))return 31;return 0},mayOpen(y,x){return y?f.isLink(y.mode)?32:f.isDir(y.mode)&&(f.flagsToPermissionString(x)!=="r"||x&576)?31:f.nodePermissions(y,f.flagsToPermissionString(x)):44},checkOpExists(y,x){if(!y)throw new f.ErrnoError(x);return y},MAX_OPEN_FDS:4096,nextfd(){for(var y=0;y<=f.MAX_OPEN_FDS;y++)if(!f.streams[y])return y;throw new f.ErrnoError(33)},getStreamChecked(y){var x=f.getStream(y);if(!x)throw new f.ErrnoError(8);return x},getStream:y=>f.streams[y],createStream(y,x=-1){return y=Object.assign(new f.FSStream,y),x==-1&&(x=f.nextfd()),y.fd=x,f.streams[x]=y,y},closeStream(y){f.streams[y]=null},dupStream(y,x=-1){var P=f.createStream(y,x);return P.stream_ops?.dup?.(P),P},doSetAttr(y,x,P){var q=y?.stream_ops.setattr,J=q?y:x;q??=x.node_ops.setattr,f.checkOpExists(q,63),q(J,P)},chrdev_stream_ops:{open(y){var x=f.getDevice(y.node.rdev);y.stream_ops=x.stream_ops,y.stream_ops.open?.(y)},llseek(){throw new f.ErrnoError(70)}},major:y=>y>>8,minor:y=>y&255,makedev:(y,x)=>y<<8|x,registerDevice(y,x){f.devices[y]={stream_ops:x}},getDevice:y=>f.devices[y],getMounts(y){for(var x=[],P=[y];P.length;){var q=P.pop();x.push(q),P.push(...q.mounts)}return x},syncfs(y,x){typeof y=="function"&&(x=y,y=!1),f.syncFSRequests++,f.syncFSRequests>1&&r(`warning: ${f.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var P=f.getMounts(f.root.mount),q=0;function J(ae){return f.syncFSRequests--,x(ae)}function ne(ae){if(ae)return ne.errored?void 0:(ne.errored=!0,J(ae));++q>=P.length&&J(null)}P.forEach(ae=>{if(!ae.type.syncfs)return ne(null);ae.type.syncfs(ae,y,ne)})},mount(y,x,P){var q=P==="/",J=!P,ne;if(q&&f.root)throw new f.ErrnoError(10);if(!q&&!J){var ae=f.lookupPath(P,{follow_mount:!1});if(P=ae.path,ne=ae.node,f.isMountpoint(ne))throw new f.ErrnoError(10);if(!f.isDir(ne.mode))throw new f.ErrnoError(54)}var de={type:y,opts:x,mountpoint:P,mounts:[]},Se=y.mount(de);return Se.mount=de,de.root=Se,q?f.root=Se:ne&&(ne.mounted=de,ne.mount&&ne.mount.mounts.push(de)),Se},unmount(y){var x=f.lookupPath(y,{follow_mount:!1});if(!f.isMountpoint(x.node))throw new f.ErrnoError(28);var P=x.node,q=P.mounted,J=f.getMounts(q);Object.keys(f.nameTable).forEach(ae=>{for(var de=f.nameTable[ae];de;){var Se=de.name_next;J.includes(de.mount)&&f.destroyNode(de),de=Se}}),P.mounted=null;var ne=P.mount.mounts.indexOf(q);P.mount.mounts.splice(ne,1)},lookup(y,x){return y.node_ops.lookup(y,x)},mknod(y,x,P){var q=f.lookupPath(y,{parent:!0}),J=q.node,ne=le.basename(y);if(!ne)throw new f.ErrnoError(28);if(ne==="."||ne==="..")throw new f.ErrnoError(20);var ae=f.mayCreate(J,ne);if(ae)throw new f.ErrnoError(ae);if(!J.node_ops.mknod)throw new f.ErrnoError(63);return J.node_ops.mknod(J,ne,x,P)},statfs(y){return f.statfsNode(f.lookupPath(y,{follow:!0}).node)},statfsStream(y){return f.statfsNode(y.node)},statfsNode(y){var x={bsize:4096,frsize:4096,blocks:1e6,bfree:5e5,bavail:5e5,files:f.nextInode,ffree:f.nextInode-1,fsid:42,flags:2,namelen:255};return y.node_ops.statfs&&Object.assign(x,y.node_ops.statfs(y.mount.opts.root)),x},create(y,x=438){return x&=4095,x|=32768,f.mknod(y,x,0)},mkdir(y,x=511){return x&=1023,x|=16384,f.mknod(y,x,0)},mkdirTree(y,x){var P=y.split("/"),q="";for(var J of P)if(J){(q||le.isAbs(y))&&(q+="/"),q+=J;try{f.mkdir(q,x)}catch(ne){if(ne.errno!=20)throw ne}}},mkdev(y,x,P){return typeof P>"u"&&(P=x,x=438),x|=8192,f.mknod(y,x,P)},symlink(y,x){if(!ce.resolve(y))throw new f.ErrnoError(44);var P=f.lookupPath(x,{parent:!0}),q=P.node;if(!q)throw new f.ErrnoError(44);var J=le.basename(x),ne=f.mayCreate(q,J);if(ne)throw new f.ErrnoError(ne);if(!q.node_ops.symlink)throw new f.ErrnoError(63);return q.node_ops.symlink(q,J,y)},rename(y,x){var P=le.dirname(y),q=le.dirname(x),J=le.basename(y),ne=le.basename(x),ae,de,Se;if(ae=f.lookupPath(y,{parent:!0}),de=ae.node,ae=f.lookupPath(x,{parent:!0}),Se=ae.node,!de||!Se)throw new f.ErrnoError(44);if(de.mount!==Se.mount)throw new f.ErrnoError(75);var Le=f.lookupNode(de,J),xe=ce.relative(y,q);if(xe.charAt(0)!==".")throw new f.ErrnoError(28);if(xe=ce.relative(x,P),xe.charAt(0)!==".")throw new f.ErrnoError(55);var Ue;try{Ue=f.lookupNode(Se,ne)}catch{}if(Le!==Ue){var Ne=f.isDir(Le.mode),De=f.mayDelete(de,J,Ne);if(De)throw new f.ErrnoError(De);if(De=Ue?f.mayDelete(Se,ne,Ne):f.mayCreate(Se,ne),De)throw new f.ErrnoError(De);if(!de.node_ops.rename)throw new f.ErrnoError(63);if(f.isMountpoint(Le)||Ue&&f.isMountpoint(Ue))throw new f.ErrnoError(10);if(Se!==de&&(De=f.nodePermissions(de,"w"),De))throw new f.ErrnoError(De);f.hashRemoveNode(Le);try{de.node_ops.rename(Le,Se,ne),Le.parent=Se}catch(Pe){throw Pe}finally{f.hashAddNode(Le)}}},rmdir(y){var x=f.lookupPath(y,{parent:!0}),P=x.node,q=le.basename(y),J=f.lookupNode(P,q),ne=f.mayDelete(P,q,!0);if(ne)throw new f.ErrnoError(ne);if(!P.node_ops.rmdir)throw new f.ErrnoError(63);if(f.isMountpoint(J))throw new f.ErrnoError(10);P.node_ops.rmdir(P,q),f.destroyNode(J)},readdir(y){var x=f.lookupPath(y,{follow:!0}),P=x.node,q=f.checkOpExists(P.node_ops.readdir,54);return q(P)},unlink(y){var x=f.lookupPath(y,{parent:!0}),P=x.node;if(!P)throw new f.ErrnoError(44);var q=le.basename(y),J=f.lookupNode(P,q),ne=f.mayDelete(P,q,!1);if(ne)throw new f.ErrnoError(ne);if(!P.node_ops.unlink)throw new f.ErrnoError(63);if(f.isMountpoint(J))throw new f.ErrnoError(10);P.node_ops.unlink(P,q),f.destroyNode(J)},readlink(y){var x=f.lookupPath(y),P=x.node;if(!P)throw new f.ErrnoError(44);if(!P.node_ops.readlink)throw new f.ErrnoError(28);return P.node_ops.readlink(P)},stat(y,x){var P=f.lookupPath(y,{follow:!x}),q=P.node,J=f.checkOpExists(q.node_ops.getattr,63);return J(q)},fstat(y){var x=f.getStreamChecked(y),P=x.node,q=x.stream_ops.getattr,J=q?x:P;return q??=P.node_ops.getattr,f.checkOpExists(q,63),q(J)},lstat(y){return f.stat(y,!0)},doChmod(y,x,P,q){f.doSetAttr(y,x,{mode:P&4095|x.mode&-4096,ctime:Date.now(),dontFollow:q})},chmod(y,x,P){var q;if(typeof y=="string"){var J=f.lookupPath(y,{follow:!P});q=J.node}else q=y;f.doChmod(null,q,x,P)},lchmod(y,x){f.chmod(y,x,!0)},fchmod(y,x){var P=f.getStreamChecked(y);f.doChmod(P,P.node,x,!1)},doChown(y,x,P){f.doSetAttr(y,x,{timestamp:Date.now(),dontFollow:P})},chown(y,x,P,q){var J;if(typeof y=="string"){var ne=f.lookupPath(y,{follow:!q});J=ne.node}else J=y;f.doChown(null,J,q)},lchown(y,x,P){f.chown(y,x,P,!0)},fchown(y,x,P){var q=f.getStreamChecked(y);f.doChown(q,q.node,!1)},doTruncate(y,x,P){if(f.isDir(x.mode))throw new f.ErrnoError(31);if(!f.isFile(x.mode))throw new f.ErrnoError(28);var q=f.nodePermissions(x,"w");if(q)throw new f.ErrnoError(q);f.doSetAttr(y,x,{size:P,timestamp:Date.now()})},truncate(y,x){if(x<0)throw new f.ErrnoError(28);var P;if(typeof y=="string"){var q=f.lookupPath(y,{follow:!0});P=q.node}else P=y;f.doTruncate(null,P,x)},ftruncate(y,x){var P=f.getStreamChecked(y);if(x<0||(P.flags&2097155)===0)throw new f.ErrnoError(28);f.doTruncate(P,P.node,x)},utime(y,x,P){var q=f.lookupPath(y,{follow:!0}),J=q.node,ne=f.checkOpExists(J.node_ops.setattr,63);ne(J,{atime:x,mtime:P})},open(y,x,P=438){if(y==="")throw new f.ErrnoError(44);x=typeof x=="string"?Oe(x):x,x&64?P=P&4095|32768:P=0;var q,J;if(typeof y=="object")q=y;else{J=y.endsWith("/");var ne=f.lookupPath(y,{follow:!(x&131072),noent_okay:!0});q=ne.node,y=ne.path}var ae=!1;if(x&64)if(q){if(x&128)throw new f.ErrnoError(20)}else{if(J)throw new f.ErrnoError(31);q=f.mknod(y,P|511,0),ae=!0}if(!q)throw new f.ErrnoError(44);if(f.isChrdev(q.mode)&&(x&=-513),x&65536&&!f.isDir(q.mode))throw new f.ErrnoError(54);if(!ae){var de=f.mayOpen(q,x);if(de)throw new f.ErrnoError(de)}x&512&&!ae&&f.truncate(q,0),x&=-131713;var Se=f.createStream({node:q,path:f.getPath(q),flags:x,seekable:!0,position:0,stream_ops:q.stream_ops,ungotten:[],error:!1});return Se.stream_ops.open&&Se.stream_ops.open(Se),ae&&f.chmod(q,P&511),g.logReadFiles&&!(x&1)&&(y in f.readFiles||(f.readFiles[y]=1)),Se},close(y){if(f.isClosed(y))throw new f.ErrnoError(8);y.getdents&&(y.getdents=null);try{y.stream_ops.close&&y.stream_ops.close(y)}catch(x){throw x}finally{f.closeStream(y.fd)}y.fd=null},isClosed(y){return y.fd===null},llseek(y,x,P){if(f.isClosed(y))throw new f.ErrnoError(8);if(!y.seekable||!y.stream_ops.llseek)throw new f.ErrnoError(70);if(P!=0&&P!=1&&P!=2)throw new f.ErrnoError(28);return y.position=y.stream_ops.llseek(y,x,P),y.ungotten=[],y.position},read(y,x,P,q,J){if(q<0||J<0)throw new f.ErrnoError(28);if(f.isClosed(y))throw new f.ErrnoError(8);if((y.flags&2097155)===1)throw new f.ErrnoError(8);if(f.isDir(y.node.mode))throw new f.ErrnoError(31);if(!y.stream_ops.read)throw new f.ErrnoError(28);var ne=typeof J<"u";if(!ne)J=y.position;else if(!y.seekable)throw new f.ErrnoError(70);var ae=y.stream_ops.read(y,x,P,q,J);return ne||(y.position+=ae),ae},write(y,x,P,q,J,ne){if(q<0||J<0)throw new f.ErrnoError(28);if(f.isClosed(y))throw new f.ErrnoError(8);if((y.flags&2097155)===0)throw new f.ErrnoError(8);if(f.isDir(y.node.mode))throw new f.ErrnoError(31);if(!y.stream_ops.write)throw new f.ErrnoError(28);y.seekable&&y.flags&1024&&f.llseek(y,0,2);var ae=typeof J<"u";if(!ae)J=y.position;else if(!y.seekable)throw new f.ErrnoError(70);var de=y.stream_ops.write(y,x,P,q,J,ne);return ae||(y.position+=de),de},mmap(y,x,P,q,J){if((q&2)!==0&&(J&2)===0&&(y.flags&2097155)!==2)throw new f.ErrnoError(2);if((y.flags&2097155)===1)throw new f.ErrnoError(2);if(!y.stream_ops.mmap)throw new f.ErrnoError(43);if(!x)throw new f.ErrnoError(28);return y.stream_ops.mmap(y,x,P,q,J)},msync(y,x,P,q,J){return y.stream_ops.msync?y.stream_ops.msync(y,x,P,q,J):0},ioctl(y,x,P){if(!y.stream_ops.ioctl)throw new f.ErrnoError(59);return y.stream_ops.ioctl(y,x,P)},readFile(y,x={}){if(x.flags=x.flags||0,x.encoding=x.encoding||"binary",x.encoding!=="utf8"&&x.encoding!=="binary")throw new Error(`Invalid encoding type "${x.encoding}"`);var P,q=f.open(y,x.flags),J=f.stat(y),ne=J.size,ae=new Uint8Array(ne);return f.read(q,ae,0,ne,0),x.encoding==="utf8"?P=_e(ae):x.encoding==="binary"&&(P=ae),f.close(q),P},writeFile(y,x,P={}){P.flags=P.flags||577;var q=f.open(y,P.flags,P.mode);if(typeof x=="string"){var J=new Uint8Array(be(x)+1),ne=$e(x,J,0,J.length);f.write(q,J,0,ne,void 0,P.canOwn)}else if(ArrayBuffer.isView(x))f.write(q,x,0,x.byteLength,void 0,P.canOwn);else throw new Error("Unsupported data type");f.close(q)},cwd:()=>f.currentPath,chdir(y){var x=f.lookupPath(y,{follow:!0});if(x.node===null)throw new f.ErrnoError(44);if(!f.isDir(x.node.mode))throw new f.ErrnoError(54);var P=f.nodePermissions(x.node,"x");if(P)throw new f.ErrnoError(P);f.currentPath=x.path},createDefaultDirectories(){f.mkdir("/tmp"),f.mkdir("/home"),f.mkdir("/home/web_user")},createDefaultDevices(){f.mkdir("/dev"),f.registerDevice(f.makedev(1,3),{read:()=>0,write:(q,J,ne,ae,de)=>ae,llseek:()=>0}),f.mkdev("/dev/null",f.makedev(1,3)),we.register(f.makedev(5,0),we.default_tty_ops),we.register(f.makedev(6,0),we.default_tty1_ops),f.mkdev("/dev/tty",f.makedev(5,0)),f.mkdev("/dev/tty1",f.makedev(6,0));var y=new Uint8Array(1024),x=0,P=()=>(x===0&&(te(y),x=y.byteLength),y[--x]);f.createDevice("/dev","random",P),f.createDevice("/dev","urandom",P),f.mkdir("/dev/shm"),f.mkdir("/dev/shm/tmp")},createSpecialDirectories(){f.mkdir("/proc");var y=f.mkdir("/proc/self");f.mkdir("/proc/self/fd"),f.mount({mount(){var x=f.createNode(y,"fd",16895,73);return x.stream_ops={llseek:se.stream_ops.llseek},x.node_ops={lookup(P,q){var J=+q,ne=f.getStreamChecked(J),ae={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>ne.path},id:J+1};return ae.parent=ae,ae},readdir(){return Array.from(f.streams.entries()).filter(([P,q])=>q).map(([P,q])=>P.toString())}},x}},{},"/proc/self/fd")},createStandardStreams(y,x,P){y?f.createDevice("/dev","stdin",y):f.symlink("/dev/tty","/dev/stdin"),x?f.createDevice("/dev","stdout",null,x):f.symlink("/dev/tty","/dev/stdout"),P?f.createDevice("/dev","stderr",null,P):f.symlink("/dev/tty1","/dev/stderr"),f.open("/dev/stdin",0),f.open("/dev/stdout",1),f.open("/dev/stderr",1)},staticInit(){f.nameTable=new Array(4096),f.mount(se,{},"/"),f.createDefaultDirectories(),f.createDefaultDevices(),f.createSpecialDirectories(),f.filesystems={MEMFS:se}},init(y,x,P){f.initialized=!0,y??=g.stdin,x??=g.stdout,P??=g.stderr,f.createStandardStreams(y,x,P)},quit(){f.initialized=!1;for(var y of f.streams)y&&f.close(y)},findObject(y,x){var P=f.analyzePath(y,x);return P.exists?P.object:null},analyzePath(y,x){try{var P=f.lookupPath(y,{follow:!x});y=P.path}catch{}var q={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var P=f.lookupPath(y,{parent:!0});q.parentExists=!0,q.parentPath=P.path,q.parentObject=P.node,q.name=le.basename(y),P=f.lookupPath(y,{follow:!x}),q.exists=!0,q.path=P.path,q.object=P.node,q.name=P.node.name,q.isRoot=P.path==="/"}catch(J){q.error=J.errno}return q},createPath(y,x,P,q){y=typeof y=="string"?y:f.getPath(y);for(var J=x.split("/").reverse();J.length;){var ne=J.pop();if(ne){var ae=le.join2(y,ne);try{f.mkdir(ae)}catch(de){if(de.errno!=20)throw de}y=ae}}return ae},createFile(y,x,P,q,J){var ne=le.join2(typeof y=="string"?y:f.getPath(y),x),ae=Fe(q,J);return f.create(ne,ae)},createDataFile(y,x,P,q,J,ne){var ae=x;y&&(y=typeof y=="string"?y:f.getPath(y),ae=x?le.join2(y,x):y);var de=Fe(q,J),Se=f.create(ae,de);if(P){if(typeof P=="string"){for(var Le=new Array(P.length),xe=0,Ue=P.length;xe<Ue;++xe)Le[xe]=P.charCodeAt(xe);P=Le}f.chmod(Se,de|146);var Ne=f.open(Se,577);f.write(Ne,P,0,P.length,0,ne),f.close(Ne),f.chmod(Se,de)}},createDevice(y,x,P,q){var J=le.join2(typeof y=="string"?y:f.getPath(y),x),ne=Fe(!!P,!!q);f.createDevice.major??=64;var ae=f.makedev(f.createDevice.major++,0);return f.registerDevice(ae,{open(de){de.seekable=!1},close(de){q?.buffer?.length&&q(10)},read(de,Se,Le,xe,Ue){for(var Ne=0,De=0;De<xe;De++){var Pe;try{Pe=P()}catch{throw new f.ErrnoError(29)}if(Pe===void 0&&Ne===0)throw new f.ErrnoError(6);if(Pe==null)break;Ne++,Se[Le+De]=Pe}return Ne&&(de.node.atime=Date.now()),Ne},write(de,Se,Le,xe,Ue){for(var Ne=0;Ne<xe;Ne++)try{q(Se[Le+Ne])}catch{throw new f.ErrnoError(29)}return xe&&(de.node.mtime=de.node.ctime=Date.now()),Ne}}),f.mkdev(J,ne,ae)},forceLoadFile(y){if(y.isDevice||y.isFolder||y.link||y.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");try{y.contents=t(y.url),y.usedBytes=y.contents.length}catch{throw new f.ErrnoError(29)}},createLazyFile(y,x,P,q,J){class ne{lengthKnown=!1;chunks=[];get(De){if(!(De>this.length-1||De<0)){var Pe=De%this.chunkSize,qe=De/this.chunkSize|0;return this.getter(qe)[Pe]}}setDataGetter(De){this.getter=De}cacheLength(){var De=new XMLHttpRequest;if(De.open("HEAD",P,!1),De.send(null),!(De.status>=200&&De.status<300||De.status===304))throw new Error("Couldn't load "+P+". Status: "+De.status);var Pe=Number(De.getResponseHeader("Content-length")),qe,je=(qe=De.getResponseHeader("Accept-Ranges"))&&qe==="bytes",it=(qe=De.getResponseHeader("Content-Encoding"))&&qe==="gzip",pt=1024*1024;je||(pt=Pe);var gt=(yt,tn)=>{if(yt>tn)throw new Error("invalid range ("+yt+", "+tn+") or no bytes requested!");if(tn>Pe-1)throw new Error("only "+Pe+" bytes available! programmer error!");var Xe=new XMLHttpRequest;if(Xe.open("GET",P,!1),Pe!==pt&&Xe.setRequestHeader("Range","bytes="+yt+"-"+tn),Xe.responseType="arraybuffer",Xe.overrideMimeType&&Xe.overrideMimeType("text/plain; charset=x-user-defined"),Xe.send(null),!(Xe.status>=200&&Xe.status<300||Xe.status===304))throw new Error("Couldn't load "+P+". Status: "+Xe.status);return Xe.response!==void 0?new Uint8Array(Xe.response||[]):Re(Xe.responseText||"")},Tn=this;Tn.setDataGetter(yt=>{var tn=yt*pt,Xe=(yt+1)*pt-1;if(Xe=Math.min(Xe,Pe-1),typeof Tn.chunks[yt]>"u"&&(Tn.chunks[yt]=gt(tn,Xe)),typeof Tn.chunks[yt]>"u")throw new Error("doXHR failed!");return Tn.chunks[yt]}),(it||!Pe)&&(pt=Pe=1,Pe=this.getter(0).length,pt=Pe,e("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=Pe,this._chunkSize=pt,this.lengthKnown=!0}get length(){return this.lengthKnown||this.cacheLength(),this._length}get chunkSize(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}if(typeof XMLHttpRequest<"u"){throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var ae,de}else var de={isDevice:!1,url:P};var Se=f.createFile(y,x,de,q,J);de.contents?Se.contents=de.contents:de.url&&(Se.contents=null,Se.url=de.url),Object.defineProperties(Se,{usedBytes:{get:function(){return this.contents.length}}});var Le={},xe=Object.keys(Se.stream_ops);xe.forEach(Ne=>{var De=Se.stream_ops[Ne];Le[Ne]=(...Pe)=>(f.forceLoadFile(Se),De(...Pe))});function Ue(Ne,De,Pe,qe,je){var it=Ne.node.contents;if(je>=it.length)return 0;var pt=Math.min(it.length-je,qe);if(it.slice)for(var gt=0;gt<pt;gt++)De[Pe+gt]=it[je+gt];else for(var gt=0;gt<pt;gt++)De[Pe+gt]=it.get(je+gt);return pt}return Le.read=(Ne,De,Pe,qe,je)=>(f.forceLoadFile(Se),Ue(Ne,De,Pe,qe,je)),Le.mmap=(Ne,De,Pe,qe,je)=>{f.forceLoadFile(Se);var it=Te();if(!it)throw new f.ErrnoError(48);return Ue(Ne,w,it,De,Pe),{ptr:it,allocated:!0}},Se.stream_ops=Le,Se}},Ye=(y,x)=>y?_e(m,y,x):"",Be={DEFAULT_POLLMASK:5,calculateAt(y,x,P){if(le.isAbs(x))return x;var q;if(y===-100)q=f.cwd();else{var J=Be.getStreamFromFD(y);q=J.path}if(x.length==0){if(!P)throw new f.ErrnoError(44);return q}return q+"/"+x},writeStat(y,x){_[y>>2]=x.dev,_[y+4>>2]=x.mode,T[y+8>>2]=x.nlink,_[y+12>>2]=x.uid,_[y+16>>2]=x.gid,_[y+20>>2]=x.rdev,R[y+24>>3]=BigInt(x.size),_[y+32>>2]=4096,_[y+36>>2]=x.blocks;var P=x.atime.getTime(),q=x.mtime.getTime(),J=x.ctime.getTime();return R[y+40>>3]=BigInt(Math.floor(P/1e3)),T[y+48>>2]=P%1e3*1e3*1e3,R[y+56>>3]=BigInt(Math.floor(q/1e3)),T[y+64>>2]=q%1e3*1e3*1e3,R[y+72>>3]=BigInt(Math.floor(J/1e3)),T[y+80>>2]=J%1e3*1e3*1e3,R[y+88>>3]=BigInt(x.ino),0},writeStatFs(y,x){_[y+4>>2]=x.bsize,_[y+40>>2]=x.bsize,_[y+8>>2]=x.blocks,_[y+12>>2]=x.bfree,_[y+16>>2]=x.bavail,_[y+20>>2]=x.files,_[y+24>>2]=x.ffree,_[y+28>>2]=x.fsid,_[y+44>>2]=x.flags,_[y+36>>2]=x.namelen},doMsync(y,x,P,q,J){if(!f.isFile(x.node.mode))throw new f.ErrnoError(43);if(q&2)return 0;var ne=m.slice(y,y+P);f.msync(x,ne,J,P,q)},getStreamFromFD(y){var x=f.getStreamChecked(y);return x},varargs:void 0,getStr(y){var x=Ye(y);return x}};function tt(y,x,P){Be.varargs=P;try{var q=Be.getStreamFromFD(y);switch(x){case 0:{var J=U();if(J<0)return-28;for(;f.streams[J];)J++;var ne;return ne=f.dupStream(q,J),ne.fd}case 1:case 2:return 0;case 3:return q.flags;case 4:{var J=U();return q.flags|=J,0}case 12:{var J=pe(),ae=0;return d[J+ae>>1]=2,0}case 13:case 14:return 0}return-28}catch(de){if(typeof f>"u"||de.name!=="ErrnoError")throw de;return-de.errno}}function dt(y,x,P){Be.varargs=P;try{var q=Be.getStreamFromFD(y);switch(x){case 21509:return q.tty?0:-59;case 21505:{if(!q.tty)return-59;if(q.tty.ops.ioctl_tcgets){var J=q.tty.ops.ioctl_tcgets(q),ne=pe();_[ne>>2]=J.c_iflag||0,_[ne+4>>2]=J.c_oflag||0,_[ne+8>>2]=J.c_cflag||0,_[ne+12>>2]=J.c_lflag||0;for(var ae=0;ae<32;ae++)w[ne+ae+17]=J.c_cc[ae]||0;return 0}return 0}case 21510:case 21511:case 21512:return q.tty?0:-59;case 21506:case 21507:case 21508:{if(!q.tty)return-59;if(q.tty.ops.ioctl_tcsets){for(var ne=pe(),de=_[ne>>2],Se=_[ne+4>>2],Le=_[ne+8>>2],xe=_[ne+12>>2],Ue=[],ae=0;ae<32;ae++)Ue.push(w[ne+ae+17]);return q.tty.ops.ioctl_tcsets(q.tty,x,{c_iflag:de,c_oflag:Se,c_cflag:Le,c_lflag:xe,c_cc:Ue})}return 0}case 21519:{if(!q.tty)return-59;var ne=pe();return _[ne>>2]=0,0}case 21520:return q.tty?-28:-59;case 21531:{var ne=pe();return f.ioctl(q,x,ne)}case 21523:{if(!q.tty)return-59;if(q.tty.ops.ioctl_tiocgwinsz){var Ne=q.tty.ops.ioctl_tiocgwinsz(q.tty),ne=pe();d[ne>>1]=Ne[0],d[ne+2>>1]=Ne[1]}return 0}case 21524:return q.tty?0:-59;case 21515:return q.tty?0:-59;default:return-28}}catch(De){if(typeof f>"u"||De.name!=="ErrnoError")throw De;return-De.errno}}function ht(y,x,P,q){Be.varargs=q;try{x=Be.getStr(x),x=Be.calculateAt(y,x);var J=q?U():0;return f.open(x,P,J).fd}catch(ne){if(typeof f>"u"||ne.name!=="ErrnoError")throw ne;return-ne.errno}}function vt(y,x){try{return y=Be.getStr(y),Be.writeStat(x,f.stat(y))}catch(P){if(typeof f>"u"||P.name!=="ErrnoError")throw P;return-P.errno}}var jt=()=>G(""),It=0,wt=()=>{ze=!1,It=0},ft=9007199254740992,Lt=-9007199254740992,At=y=>y<Lt||y>ft?NaN:Number(y);function Ft(y,x){y=At(y);var P=new Date(y*1e3);_[x>>2]=P.getUTCSeconds(),_[x+4>>2]=P.getUTCMinutes(),_[x+8>>2]=P.getUTCHours(),_[x+12>>2]=P.getUTCDate(),_[x+16>>2]=P.getUTCMonth(),_[x+20>>2]=P.getUTCFullYear()-1900,_[x+24>>2]=P.getUTCDay();var q=Date.UTC(P.getUTCFullYear(),0,1,0,0,0,0),J=(P.getTime()-q)/(1e3*60*60*24)|0;_[x+28>>2]=J}var Nt=y=>y%4===0&&(y%100!==0||y%400===0),Yt=[0,31,60,91,121,152,182,213,244,274,305,335],dn=[0,31,59,90,120,151,181,212,243,273,304,334],hn=y=>{var x=Nt(y.getFullYear()),P=x?Yt:dn,q=P[y.getMonth()]+y.getDate()-1;return q};function fn(y,x){y=At(y);var P=new Date(y*1e3);_[x>>2]=P.getSeconds(),_[x+4>>2]=P.getMinutes(),_[x+8>>2]=P.getHours(),_[x+12>>2]=P.getDate(),_[x+16>>2]=P.getMonth(),_[x+20>>2]=P.getFullYear()-1900,_[x+24>>2]=P.getDay();var q=hn(P)|0;_[x+28>>2]=q,_[x+36>>2]=-(P.getTimezoneOffset()*60);var J=new Date(P.getFullYear(),0,1),ne=new Date(P.getFullYear(),6,1).getTimezoneOffset(),ae=J.getTimezoneOffset(),de=(ne!=ae&&P.getTimezoneOffset()==Math.min(ae,ne))|0;_[x+32>>2]=de}var rt={},at=y=>{if(y instanceof ge||y=="unwind")return M;s(1,y)},Kt=()=>ze||It>0,Jt=y=>{M=y,Kt()||(g.onExit?.(y),p=!0),s(y,new ge(y))},Zt=(y,x)=>{M=y,Jt(y)},Xt=Zt,Pt=()=>{if(!Kt())try{Xt(M)}catch(y){at(y)}},Ut=y=>{if(!p)try{y(),Pt()}catch(x){at(x)}},bt=()=>performance.now(),Et=(y,x)=>{if(rt[y]&&(clearTimeout(rt[y].id),delete rt[y]),!x)return 0;var P=setTimeout(()=>{delete rt[y],Ut(()=>B(y,bt()))},x);return rt[y]={id:P,timeout_ms:x},0},_t=(y,x,P)=>$e(y,m,x,P),pn=(y,x,P,q)=>{var J=new Date().getFullYear(),ne=new Date(J,0,1),ae=new Date(J,6,1),de=ne.getTimezoneOffset(),Se=ae.getTimezoneOffset(),Le=Math.max(de,Se);T[y>>2]=Le*60,_[x>>2]=+(de!=Se);var xe=De=>{var Pe=De>=0?"-":"+",qe=Math.abs(De),je=String(Math.floor(qe/60)).padStart(2,"0"),it=String(qe%60).padStart(2,"0");return`UTC${Pe}${je}${it}`},Ue=xe(de),Ne=xe(Se);Se<de?(_t(Ue,P,17),_t(Ne,q,17)):(_t(Ue,q,17),_t(Ne,P,17))},gn=()=>Date.now(),mn=()=>2147483648,vn=(y,x)=>Math.ceil(y/x)*x,_n=y=>{var x=u.buffer,P=(y-x.byteLength+65535)/65536|0;try{return u.grow(P),$(),1}catch{}},yn=y=>{var x=m.length;y>>>=0;var P=mn();if(y>P)return!1;for(var q=1;q<=4;q*=2){var J=x*(1+.2/q);J=Math.min(J,y+100663296);var ne=Math.min(P,vn(Math.max(y,J),65536)),ae=_n(ne);if(ae)return!0}return!1},Ht={},wn=()=>A||"./this.program",Ct=()=>{if(!Ct.strings){var y=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",x={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:y,_:wn()};for(var P in Ht)Ht[P]===void 0?delete x[P]:x[P]=Ht[P];var q=[];for(var P in x)q.push(`${P}=${x[P]}`);Ct.strings=q}return Ct.strings},An=(y,x)=>{var P=0,q=0;for(var J of Ct()){var ne=x+P;T[y+q>>2]=ne,P+=_t(J,ne,1/0)+1,q+=4}return 0},Qt=(y,x)=>{var P=Ct();T[y>>2]=P.length;var q=0;for(var J of P)q+=be(J)+1;return T[x>>2]=q,0};function en(y){try{var x=Be.getStreamFromFD(y);return f.close(x),0}catch(P){if(typeof f>"u"||P.name!=="ErrnoError")throw P;return P.errno}}function bn(y,x){try{var P=0,q=0,J=0,ne=Be.getStreamFromFD(y),ae=ne.tty?2:f.isDir(ne.mode)?3:f.isLink(ne.mode)?7:4;return w[x]=ae,d[x+2>>1]=J,R[x+8>>3]=BigInt(P),R[x+16>>3]=BigInt(q),0}catch(de){if(typeof f>"u"||de.name!=="ErrnoError")throw de;return de.errno}}var lt=(y,x,P,q)=>{for(var J=0,ne=0;ne<P;ne++){var ae=T[x>>2],de=T[x+4>>2];x+=8;var Se=f.read(y,w,ae,de,q);if(Se<0)return-1;if(J+=Se,Se<de)break}return J};function ct(y,x,P,q){try{var J=Be.getStreamFromFD(y),ne=lt(J,x,P);return T[q>>2]=ne,0}catch(ae){if(typeof f>"u"||ae.name!=="ErrnoError")throw ae;return ae.errno}}function En(y,x,P,q){x=At(x);try{if(isNaN(x))return 61;var J=Be.getStreamFromFD(y);return f.llseek(J,x,P),R[q>>3]=BigInt(J.position),J.getdents&&x===0&&P===0&&(J.getdents=null),0}catch(ne){if(typeof f>"u"||ne.name!=="ErrnoError")throw ne;return ne.errno}}var Cn=(y,x,P,q)=>{for(var J=0,ne=0;ne<P;ne++){var ae=T[x>>2],de=T[x+4>>2];x+=8;var Se=f.write(y,w,ae,de,q);if(Se<0)return-1;if(J+=Se,Se<de)break}return J};function Sn(y,x,P,q){try{var J=Be.getStreamFromFD(y),ne=Cn(J,x,P);return T[q>>2]=ne,0}catch(ae){if(typeof f>"u"||ae.name!=="ErrnoError")throw ae;return ae.errno}}var kt=y=>F(y),Wt=y=>{var x=be(y)+1,P=kt(x);return _t(y,P,x),P};f.createPreloadedFile=ke,f.staticInit(),se.doesNotExistError=new f.ErrnoError(44),se.doesNotExistError.stack="<generic error, no stack>",g.noExitRuntime&&(ze=g.noExitRuntime),g.preloadPlugins&&(Ae=g.preloadPlugins),g.print&&(e=g.print),g.printErr&&(r=g.printErr),g.wasmBinary&&(a=g.wasmBinary),g.arguments&&(S=g.arguments),g.thisProgram&&(A=g.thisProgram),g.FS=f;var L={e:tt,b:dt,f:ht,n:vt,u:jt,k:wt,o:Ft,p:fn,l:Et,q:pn,i:gn,m:yn,t:An,g:Qt,a:Xt,c:en,s:bn,d:ct,r:En,h:Sn,j:Jt},c=await ue();c.w;var E=g._main=c.x,B=c.y,F=c.z;function H(y=[]){var x=E;y.unshift(A);var P=y.length,q=kt((P+1)*4),J=q;y.forEach(ae=>{T[J>>2]=Wt(ae),J+=4}),T[J>>2]=0;try{var ne=x(P,q);return Zt(ne,!0),ne}catch(ae){return at(ae)}}function j(y=S){if(l>0){C=j;return}if(k(),l>0){C=j;return}function x(){if(g.calledRun=!0,!p){v(),I(g),g.onRuntimeInitialized?.();var P=g.noInitialRun||!1;P||H(y),b()}}g.setStatus?(g.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>g.setStatus(""),1),x()},1)):x()}function Z(){if(g.preInit)for(typeof g.preInit=="function"&&(g.preInit=[g.preInit]);g.preInit.length>0;)g.preInit.shift()()}return Z(),j(),X=D,X},bo=async function(ee={}){var X,g=ee,I,z,D=new Promise((L,c)=>{I=L,z=c}),S=[],A="./this.program",s=(L,c)=>{throw c},h=import.meta.url,o="";function n(L){return g.locateFile?g.locateFile(L,o):o+L}var i,t;{try{o=new URL(".",h).href}catch{}i=async L=>{var c=await fetch(L,{credentials:"same-origin"});if(c.ok)return c.arrayBuffer();throw new Error(c.status+" : "+c.url)}}var e=console.log.bind(console),r=console.error.bind(console),a,u,p=!1,M,w,m,d,_,T,R;function $(){var L=u.buffer;w=new Int8Array(L),d=new Int16Array(L),m=new Uint8Array(L),_=new Int32Array(L),T=new Uint32Array(L),R=new BigInt64Array(L),new BigUint64Array(L)}function k(){if(g.preRun)for(typeof g.preRun=="function"&&(g.preRun=[g.preRun]);g.preRun.length;)Ie(g.preRun.shift());me(Me)}function v(){!g.noFSInit&&!f.initialized&&f.init(),lt.s(),f.ignorePermissions=!1}function b(){if(g.postRun)for(typeof g.postRun=="function"&&(g.postRun=[g.postRun]);g.postRun.length;)Ce(g.postRun.shift());me(ve)}var l=0,C=null;function O(L){l++,g.monitorRunDependencies?.(l)}function N(L){if(l--,g.monitorRunDependencies?.(l),l==0&&C){var c=C;C=null,c()}}function G(L){g.onAbort?.(L),L="Aborted("+L+")",r(L),p=!0,L+=". Build with -sASSERTIONS for more info.";var c=new WebAssembly.RuntimeError(L);throw z(c),c}var W;function K(){return g.locateFile?n("rgblink.wasm"):new URL(""+new URL("rgblink-Chmtu6Jc.wasm",import.meta.url).href,import.meta.url).href}function V(L){if(L==W&&a)return new Uint8Array(a);throw"both async and sync fetching of the wasm failed"}async function Y(L){if(!a)try{var c=await i(L);return new Uint8Array(c)}catch{}return V(L)}async function re(L,c){try{var E=await Y(L),B=await WebAssembly.instantiate(E,c);return B}catch(F){r(`failed to asynchronously prepare wasm: ${F}`),G(F)}}async function Q(L,c,E){if(!L&&typeof WebAssembly.instantiateStreaming=="function")try{var B=fetch(c,{credentials:"same-origin"}),F=await WebAssembly.instantiateStreaming(B,E);return F}catch(H){r(`wasm streaming compile failed: ${H}`),r("falling back to ArrayBuffer instantiation")}return re(c,E)}function ie(){return{a:bn}}async function ue(){function L(H,j){return lt=H.exports,u=lt.r,$(),N(),lt}O();function c(H){return L(H.instance)}var E=ie();if(g.instantiateWasm)return new Promise((H,j)=>{g.instantiateWasm(E,(Z,y)=>{H(L(Z))})});W??=K();try{var B=await Q(a,W,E),F=c(B);return F}catch(H){return z(H),Promise.reject(H)}}class ge{name="ExitStatus";constructor(c){this.message=`Program terminated with exit(${c})`,this.status=c}}var me=L=>{for(;L.length>0;)L.shift()(g)},ve=[],Ce=L=>ve.push(L),Me=[],Ie=L=>Me.push(L),ze=!0,U=()=>{var L=_[+Be.varargs>>2];return Be.varargs+=4,L},pe=U,le={isAbs:L=>L.charAt(0)==="/",splitPath:L=>{var c=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return c.exec(L).slice(1)},normalizeArray:(L,c)=>{for(var E=0,B=L.length-1;B>=0;B--){var F=L[B];F==="."?L.splice(B,1):F===".."?(L.splice(B,1),E++):E&&(L.splice(B,1),E--)}if(c)for(;E;E--)L.unshift("..");return L},normalize:L=>{var c=le.isAbs(L),E=L.slice(-1)==="/";return L=le.normalizeArray(L.split("/").filter(B=>!!B),!c).join("/"),!L&&!c&&(L="."),L&&E&&(L+="/"),(c?"/":"")+L},dirname:L=>{var c=le.splitPath(L),E=c[0],B=c[1];return!E&&!B?".":(B&&(B=B.slice(0,-1)),E+B)},basename:L=>L&&L.match(/([^\/]+|\/)\/*$/)[1],join:(...L)=>le.normalize(L.join("/")),join2:(L,c)=>le.normalize(L+"/"+c)},oe=()=>L=>crypto.getRandomValues(L),te=L=>{(te=oe())(L)},ce={resolve:(...L)=>{for(var c="",E=!1,B=L.length-1;B>=-1&&!E;B--){var F=B>=0?L[B]:f.cwd();if(typeof F!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!F)return"";c=F+"/"+c,E=le.isAbs(F)}return c=le.normalizeArray(c.split("/").filter(H=>!!H),!E).join("/"),(E?"/":"")+c||"."},relative:(L,c)=>{L=ce.resolve(L).slice(1),c=ce.resolve(c).slice(1);function E(x){for(var P=0;P<x.length&&x[P]==="";P++);for(var q=x.length-1;q>=0&&x[q]==="";q--);return P>q?[]:x.slice(P,q-P+1)}for(var B=E(L.split("/")),F=E(c.split("/")),H=Math.min(B.length,F.length),j=H,Z=0;Z<H;Z++)if(B[Z]!==F[Z]){j=Z;break}for(var y=[],Z=j;Z<B.length;Z++)y.push("..");return y=y.concat(F.slice(j)),y.join("/")}},ye=typeof TextDecoder<"u"?new TextDecoder:void 0,_e=(L,c=0,E=NaN)=>{for(var B=c+E,F=c;L[F]&&!(F>=B);)++F;if(F-c>16&&L.buffer&&ye)return ye.decode(L.subarray(c,F));for(var H="";c<F;){var j=L[c++];if(!(j&128)){H+=String.fromCharCode(j);continue}var Z=L[c++]&63;if((j&224)==192){H+=String.fromCharCode((j&31)<<6|Z);continue}var y=L[c++]&63;if((j&240)==224?j=(j&15)<<12|Z<<6|y:j=(j&7)<<18|Z<<12|y<<6|L[c++]&63,j<65536)H+=String.fromCharCode(j);else{var x=j-65536;H+=String.fromCharCode(55296|x>>10,56320|x&1023)}}return H},fe=[],be=L=>{for(var c=0,E=0;E<L.length;++E){var B=L.charCodeAt(E);B<=127?c++:B<=2047?c+=2:B>=55296&&B<=57343?(c+=4,++E):c+=3}return c},$e=(L,c,E,B)=>{if(!(B>0))return 0;for(var F=E,H=E+B-1,j=0;j<L.length;++j){var Z=L.charCodeAt(j);if(Z>=55296&&Z<=57343){var y=L.charCodeAt(++j);Z=65536+((Z&1023)<<10)|y&1023}if(Z<=127){if(E>=H)break;c[E++]=Z}else if(Z<=2047){if(E+1>=H)break;c[E++]=192|Z>>6,c[E++]=128|Z&63}else if(Z<=65535){if(E+2>=H)break;c[E++]=224|Z>>12,c[E++]=128|Z>>6&63,c[E++]=128|Z&63}else{if(E+3>=H)break;c[E++]=240|Z>>18,c[E++]=128|Z>>12&63,c[E++]=128|Z>>6&63,c[E++]=128|Z&63}}return c[E]=0,E-F},Re=(L,c,E)=>{var B=be(L)+1,F=new Array(B),H=$e(L,F,0,F.length);return F.length=H,F},he=()=>{if(!fe.length){var L=null;if(typeof window<"u"&&typeof window.prompt=="function"&&(L=window.prompt("Input: "),L!==null&&(L+=`
`)),!L)return null;fe=Re(L)}return fe.shift()},we={ttys:[],init(){},shutdown(){},register(L,c){we.ttys[L]={input:[],output:[],ops:c},f.registerDevice(L,we.stream_ops)},stream_ops:{open(L){var c=we.ttys[L.node.rdev];if(!c)throw new f.ErrnoError(43);L.tty=c,L.seekable=!1},close(L){L.tty.ops.fsync(L.tty)},fsync(L){L.tty.ops.fsync(L.tty)},read(L,c,E,B,F){if(!L.tty||!L.tty.ops.get_char)throw new f.ErrnoError(60);for(var H=0,j=0;j<B;j++){var Z;try{Z=L.tty.ops.get_char(L.tty)}catch{throw new f.ErrnoError(29)}if(Z===void 0&&H===0)throw new f.ErrnoError(6);if(Z==null)break;H++,c[E+j]=Z}return H&&(L.node.atime=Date.now()),H},write(L,c,E,B,F){if(!L.tty||!L.tty.ops.put_char)throw new f.ErrnoError(60);try{for(var H=0;H<B;H++)L.tty.ops.put_char(L.tty,c[E+H])}catch{throw new f.ErrnoError(29)}return B&&(L.node.mtime=L.node.ctime=Date.now()),H}},default_tty_ops:{get_char(L){return he()},put_char(L,c){c===null||c===10?(e(_e(L.output)),L.output=[]):c!=0&&L.output.push(c)},fsync(L){L.output?.length>0&&(e(_e(L.output)),L.output=[])},ioctl_tcgets(L){return{c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},ioctl_tcsets(L,c,E){return 0},ioctl_tiocgwinsz(L){return[24,80]}},default_tty1_ops:{put_char(L,c){c===null||c===10?(r(_e(L.output)),L.output=[]):c!=0&&L.output.push(c)},fsync(L){L.output?.length>0&&(r(_e(L.output)),L.output=[])}}},Te=L=>{G()},se={ops_table:null,mount(L){return se.createNode(null,"/",16895,0)},createNode(L,c,E,B){if(f.isBlkdev(E)||f.isFIFO(E))throw new f.ErrnoError(63);se.ops_table||={dir:{node:{getattr:se.node_ops.getattr,setattr:se.node_ops.setattr,lookup:se.node_ops.lookup,mknod:se.node_ops.mknod,rename:se.node_ops.rename,unlink:se.node_ops.unlink,rmdir:se.node_ops.rmdir,readdir:se.node_ops.readdir,symlink:se.node_ops.symlink},stream:{llseek:se.stream_ops.llseek}},file:{node:{getattr:se.node_ops.getattr,setattr:se.node_ops.setattr},stream:{llseek:se.stream_ops.llseek,read:se.stream_ops.read,write:se.stream_ops.write,mmap:se.stream_ops.mmap,msync:se.stream_ops.msync}},link:{node:{getattr:se.node_ops.getattr,setattr:se.node_ops.setattr,readlink:se.node_ops.readlink},stream:{}},chrdev:{node:{getattr:se.node_ops.getattr,setattr:se.node_ops.setattr},stream:f.chrdev_stream_ops}};var F=f.createNode(L,c,E,B);return f.isDir(F.mode)?(F.node_ops=se.ops_table.dir.node,F.stream_ops=se.ops_table.dir.stream,F.contents={}):f.isFile(F.mode)?(F.node_ops=se.ops_table.file.node,F.stream_ops=se.ops_table.file.stream,F.usedBytes=0,F.contents=null):f.isLink(F.mode)?(F.node_ops=se.ops_table.link.node,F.stream_ops=se.ops_table.link.stream):f.isChrdev(F.mode)&&(F.node_ops=se.ops_table.chrdev.node,F.stream_ops=se.ops_table.chrdev.stream),F.atime=F.mtime=F.ctime=Date.now(),L&&(L.contents[c]=F,L.atime=L.mtime=L.ctime=F.atime),F},getFileDataAsTypedArray(L){return L.contents?L.contents.subarray?L.contents.subarray(0,L.usedBytes):new Uint8Array(L.contents):new Uint8Array(0)},expandFileStorage(L,c){var E=L.contents?L.contents.length:0;if(!(E>=c)){var B=1024*1024;c=Math.max(c,E*(E<B?2:1.125)>>>0),E!=0&&(c=Math.max(c,256));var F=L.contents;L.contents=new Uint8Array(c),L.usedBytes>0&&L.contents.set(F.subarray(0,L.usedBytes),0)}},resizeFileStorage(L,c){if(L.usedBytes!=c)if(c==0)L.contents=null,L.usedBytes=0;else{var E=L.contents;L.contents=new Uint8Array(c),E&&L.contents.set(E.subarray(0,Math.min(c,L.usedBytes))),L.usedBytes=c}},node_ops:{getattr(L){var c={};return c.dev=f.isChrdev(L.mode)?L.id:1,c.ino=L.id,c.mode=L.mode,c.nlink=1,c.uid=0,c.gid=0,c.rdev=L.rdev,f.isDir(L.mode)?c.size=4096:f.isFile(L.mode)?c.size=L.usedBytes:f.isLink(L.mode)?c.size=L.link.length:c.size=0,c.atime=new Date(L.atime),c.mtime=new Date(L.mtime),c.ctime=new Date(L.ctime),c.blksize=4096,c.blocks=Math.ceil(c.size/c.blksize),c},setattr(L,c){for(const E of["mode","atime","mtime","ctime"])c[E]!=null&&(L[E]=c[E]);c.size!==void 0&&se.resizeFileStorage(L,c.size)},lookup(L,c){throw se.doesNotExistError},mknod(L,c,E,B){return se.createNode(L,c,E,B)},rename(L,c,E){var B;try{B=f.lookupNode(c,E)}catch{}if(B){if(f.isDir(L.mode))for(var F in B.contents)throw new f.ErrnoError(55);f.hashRemoveNode(B)}delete L.parent.contents[L.name],c.contents[E]=L,L.name=E,c.ctime=c.mtime=L.parent.ctime=L.parent.mtime=Date.now()},unlink(L,c){delete L.contents[c],L.ctime=L.mtime=Date.now()},rmdir(L,c){var E=f.lookupNode(L,c);for(var B in E.contents)throw new f.ErrnoError(55);delete L.contents[c],L.ctime=L.mtime=Date.now()},readdir(L){return[".","..",...Object.keys(L.contents)]},symlink(L,c,E){var B=se.createNode(L,c,41471,0);return B.link=E,B},readlink(L){if(!f.isLink(L.mode))throw new f.ErrnoError(28);return L.link}},stream_ops:{read(L,c,E,B,F){var H=L.node.contents;if(F>=L.node.usedBytes)return 0;var j=Math.min(L.node.usedBytes-F,B);if(j>8&&H.subarray)c.set(H.subarray(F,F+j),E);else for(var Z=0;Z<j;Z++)c[E+Z]=H[F+Z];return j},write(L,c,E,B,F,H){if(c.buffer===w.buffer&&(H=!1),!B)return 0;var j=L.node;if(j.mtime=j.ctime=Date.now(),c.subarray&&(!j.contents||j.contents.subarray)){if(H)return j.contents=c.subarray(E,E+B),j.usedBytes=B,B;if(j.usedBytes===0&&F===0)return j.contents=c.slice(E,E+B),j.usedBytes=B,B;if(F+B<=j.usedBytes)return j.contents.set(c.subarray(E,E+B),F),B}if(se.expandFileStorage(j,F+B),j.contents.subarray&&c.subarray)j.contents.set(c.subarray(E,E+B),F);else for(var Z=0;Z<B;Z++)j.contents[F+Z]=c[E+Z];return j.usedBytes=Math.max(j.usedBytes,F+B),B},llseek(L,c,E){var B=c;if(E===1?B+=L.position:E===2&&f.isFile(L.node.mode)&&(B+=L.node.usedBytes),B<0)throw new f.ErrnoError(28);return B},mmap(L,c,E,B,F){if(!f.isFile(L.node.mode))throw new f.ErrnoError(43);var H,j,Z=L.node.contents;if(!(F&2)&&Z&&Z.buffer===w.buffer)j=!1,H=Z.byteOffset;else{if(j=!0,H=Te(),!H)throw new f.ErrnoError(48);Z&&((E>0||E+c<Z.length)&&(Z.subarray?Z=Z.subarray(E,E+c):Z=Array.prototype.slice.call(Z,E,E+c)),w.set(Z,H))}return{ptr:H,allocated:j}},msync(L,c,E,B,F){return se.stream_ops.write(L,c,0,B,E,!1),0}}},We=async L=>{var c=await i(L);return new Uint8Array(c)},Ge=(...L)=>f.createDataFile(...L),Ae=[],Ee=(L,c,E,B)=>{typeof Browser<"u"&&Browser.init();var F=!1;return Ae.forEach(H=>{F||H.canHandle(c)&&(H.handle(L,c,E,B),F=!0)}),F},ke=(L,c,E,B,F,H,j,Z,y,x)=>{var P=c?ce.resolve(le.join2(L,c)):L;function q(J){function ne(ae){x?.(),Z||Ge(L,c,ae,B,F,y),H?.(),N()}Ee(J,P,ne,()=>{j?.(),N()})||ne(J)}O(),typeof E=="string"?We(E).then(q,j):q(E)},Oe=L=>{var c={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},E=c[L];if(typeof E>"u")throw new Error(`Unknown file open mode: ${L}`);return E},Fe=(L,c)=>{var E=0;return L&&(E|=365),c&&(E|=146),E},f={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,filesystems:null,syncFSRequests:0,readFiles:{},ErrnoError:class{name="ErrnoError";constructor(L){this.errno=L}},FSStream:class{shared={};get object(){return this.node}set object(L){this.node=L}get isRead(){return(this.flags&2097155)!==1}get isWrite(){return(this.flags&2097155)!==0}get isAppend(){return this.flags&1024}get flags(){return this.shared.flags}set flags(L){this.shared.flags=L}get position(){return this.shared.position}set position(L){this.shared.position=L}},FSNode:class{node_ops={};stream_ops={};readMode=365;writeMode=146;mounted=null;constructor(L,c,E,B){L||(L=this),this.parent=L,this.mount=L.mount,this.id=f.nextInode++,this.name=c,this.mode=E,this.rdev=B,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&this.readMode)===this.readMode}set read(L){L?this.mode|=this.readMode:this.mode&=~this.readMode}get write(){return(this.mode&this.writeMode)===this.writeMode}set write(L){L?this.mode|=this.writeMode:this.mode&=~this.writeMode}get isFolder(){return f.isDir(this.mode)}get isDevice(){return f.isChrdev(this.mode)}},lookupPath(L,c={}){if(!L)throw new f.ErrnoError(44);c.follow_mount??=!0,le.isAbs(L)||(L=f.cwd()+"/"+L);e:for(var E=0;E<40;E++){for(var B=L.split("/").filter(x=>!!x),F=f.root,H="/",j=0;j<B.length;j++){var Z=j===B.length-1;if(Z&&c.parent)break;if(B[j]!=="."){if(B[j]===".."){if(H=le.dirname(H),f.isRoot(F)){L=H+"/"+B.slice(j+1).join("/");continue e}else F=F.parent;continue}H=le.join2(H,B[j]);try{F=f.lookupNode(F,B[j])}catch(x){if(x?.errno===44&&Z&&c.noent_okay)return{path:H};throw x}if(f.isMountpoint(F)&&(!Z||c.follow_mount)&&(F=F.mounted.root),f.isLink(F.mode)&&(!Z||c.follow)){if(!F.node_ops.readlink)throw new f.ErrnoError(52);var y=F.node_ops.readlink(F);le.isAbs(y)||(y=le.dirname(H)+"/"+y),L=y+"/"+B.slice(j+1).join("/");continue e}}}return{path:H,node:F}}throw new f.ErrnoError(32)},getPath(L){for(var c;;){if(f.isRoot(L)){var E=L.mount.mountpoint;return c?E[E.length-1]!=="/"?`${E}/${c}`:E+c:E}c=c?`${L.name}/${c}`:L.name,L=L.parent}},hashName(L,c){for(var E=0,B=0;B<c.length;B++)E=(E<<5)-E+c.charCodeAt(B)|0;return(L+E>>>0)%f.nameTable.length},hashAddNode(L){var c=f.hashName(L.parent.id,L.name);L.name_next=f.nameTable[c],f.nameTable[c]=L},hashRemoveNode(L){var c=f.hashName(L.parent.id,L.name);if(f.nameTable[c]===L)f.nameTable[c]=L.name_next;else for(var E=f.nameTable[c];E;){if(E.name_next===L){E.name_next=L.name_next;break}E=E.name_next}},lookupNode(L,c){var E=f.mayLookup(L);if(E)throw new f.ErrnoError(E);for(var B=f.hashName(L.id,c),F=f.nameTable[B];F;F=F.name_next){var H=F.name;if(F.parent.id===L.id&&H===c)return F}return f.lookup(L,c)},createNode(L,c,E,B){var F=new f.FSNode(L,c,E,B);return f.hashAddNode(F),F},destroyNode(L){f.hashRemoveNode(L)},isRoot(L){return L===L.parent},isMountpoint(L){return!!L.mounted},isFile(L){return(L&61440)===32768},isDir(L){return(L&61440)===16384},isLink(L){return(L&61440)===40960},isChrdev(L){return(L&61440)===8192},isBlkdev(L){return(L&61440)===24576},isFIFO(L){return(L&61440)===4096},isSocket(L){return(L&49152)===49152},flagsToPermissionString(L){var c=["r","w","rw"][L&3];return L&512&&(c+="w"),c},nodePermissions(L,c){return f.ignorePermissions?0:c.includes("r")&&!(L.mode&292)||c.includes("w")&&!(L.mode&146)||c.includes("x")&&!(L.mode&73)?2:0},mayLookup(L){if(!f.isDir(L.mode))return 54;var c=f.nodePermissions(L,"x");return c||(L.node_ops.lookup?0:2)},mayCreate(L,c){if(!f.isDir(L.mode))return 54;try{var E=f.lookupNode(L,c);return 20}catch{}return f.nodePermissions(L,"wx")},mayDelete(L,c,E){var B;try{B=f.lookupNode(L,c)}catch(H){return H.errno}var F=f.nodePermissions(L,"wx");if(F)return F;if(E){if(!f.isDir(B.mode))return 54;if(f.isRoot(B)||f.getPath(B)===f.cwd())return 10}else if(f.isDir(B.mode))return 31;return 0},mayOpen(L,c){return L?f.isLink(L.mode)?32:f.isDir(L.mode)&&(f.flagsToPermissionString(c)!=="r"||c&576)?31:f.nodePermissions(L,f.flagsToPermissionString(c)):44},checkOpExists(L,c){if(!L)throw new f.ErrnoError(c);return L},MAX_OPEN_FDS:4096,nextfd(){for(var L=0;L<=f.MAX_OPEN_FDS;L++)if(!f.streams[L])return L;throw new f.ErrnoError(33)},getStreamChecked(L){var c=f.getStream(L);if(!c)throw new f.ErrnoError(8);return c},getStream:L=>f.streams[L],createStream(L,c=-1){return L=Object.assign(new f.FSStream,L),c==-1&&(c=f.nextfd()),L.fd=c,f.streams[c]=L,L},closeStream(L){f.streams[L]=null},dupStream(L,c=-1){var E=f.createStream(L,c);return E.stream_ops?.dup?.(E),E},doSetAttr(L,c,E){var B=L?.stream_ops.setattr,F=B?L:c;B??=c.node_ops.setattr,f.checkOpExists(B,63),B(F,E)},chrdev_stream_ops:{open(L){var c=f.getDevice(L.node.rdev);L.stream_ops=c.stream_ops,L.stream_ops.open?.(L)},llseek(){throw new f.ErrnoError(70)}},major:L=>L>>8,minor:L=>L&255,makedev:(L,c)=>L<<8|c,registerDevice(L,c){f.devices[L]={stream_ops:c}},getDevice:L=>f.devices[L],getMounts(L){for(var c=[],E=[L];E.length;){var B=E.pop();c.push(B),E.push(...B.mounts)}return c},syncfs(L,c){typeof L=="function"&&(c=L,L=!1),f.syncFSRequests++,f.syncFSRequests>1&&r(`warning: ${f.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var E=f.getMounts(f.root.mount),B=0;function F(j){return f.syncFSRequests--,c(j)}function H(j){if(j)return H.errored?void 0:(H.errored=!0,F(j));++B>=E.length&&F(null)}E.forEach(j=>{if(!j.type.syncfs)return H(null);j.type.syncfs(j,L,H)})},mount(L,c,E){var B=E==="/",F=!E,H;if(B&&f.root)throw new f.ErrnoError(10);if(!B&&!F){var j=f.lookupPath(E,{follow_mount:!1});if(E=j.path,H=j.node,f.isMountpoint(H))throw new f.ErrnoError(10);if(!f.isDir(H.mode))throw new f.ErrnoError(54)}var Z={type:L,opts:c,mountpoint:E,mounts:[]},y=L.mount(Z);return y.mount=Z,Z.root=y,B?f.root=y:H&&(H.mounted=Z,H.mount&&H.mount.mounts.push(Z)),y},unmount(L){var c=f.lookupPath(L,{follow_mount:!1});if(!f.isMountpoint(c.node))throw new f.ErrnoError(28);var E=c.node,B=E.mounted,F=f.getMounts(B);Object.keys(f.nameTable).forEach(j=>{for(var Z=f.nameTable[j];Z;){var y=Z.name_next;F.includes(Z.mount)&&f.destroyNode(Z),Z=y}}),E.mounted=null;var H=E.mount.mounts.indexOf(B);E.mount.mounts.splice(H,1)},lookup(L,c){return L.node_ops.lookup(L,c)},mknod(L,c,E){var B=f.lookupPath(L,{parent:!0}),F=B.node,H=le.basename(L);if(!H)throw new f.ErrnoError(28);if(H==="."||H==="..")throw new f.ErrnoError(20);var j=f.mayCreate(F,H);if(j)throw new f.ErrnoError(j);if(!F.node_ops.mknod)throw new f.ErrnoError(63);return F.node_ops.mknod(F,H,c,E)},statfs(L){return f.statfsNode(f.lookupPath(L,{follow:!0}).node)},statfsStream(L){return f.statfsNode(L.node)},statfsNode(L){var c={bsize:4096,frsize:4096,blocks:1e6,bfree:5e5,bavail:5e5,files:f.nextInode,ffree:f.nextInode-1,fsid:42,flags:2,namelen:255};return L.node_ops.statfs&&Object.assign(c,L.node_ops.statfs(L.mount.opts.root)),c},create(L,c=438){return c&=4095,c|=32768,f.mknod(L,c,0)},mkdir(L,c=511){return c&=1023,c|=16384,f.mknod(L,c,0)},mkdirTree(L,c){var E=L.split("/"),B="";for(var F of E)if(F){(B||le.isAbs(L))&&(B+="/"),B+=F;try{f.mkdir(B,c)}catch(H){if(H.errno!=20)throw H}}},mkdev(L,c,E){return typeof E>"u"&&(E=c,c=438),c|=8192,f.mknod(L,c,E)},symlink(L,c){if(!ce.resolve(L))throw new f.ErrnoError(44);var E=f.lookupPath(c,{parent:!0}),B=E.node;if(!B)throw new f.ErrnoError(44);var F=le.basename(c),H=f.mayCreate(B,F);if(H)throw new f.ErrnoError(H);if(!B.node_ops.symlink)throw new f.ErrnoError(63);return B.node_ops.symlink(B,F,L)},rename(L,c){var E=le.dirname(L),B=le.dirname(c),F=le.basename(L),H=le.basename(c),j,Z,y;if(j=f.lookupPath(L,{parent:!0}),Z=j.node,j=f.lookupPath(c,{parent:!0}),y=j.node,!Z||!y)throw new f.ErrnoError(44);if(Z.mount!==y.mount)throw new f.ErrnoError(75);var x=f.lookupNode(Z,F),P=ce.relative(L,B);if(P.charAt(0)!==".")throw new f.ErrnoError(28);if(P=ce.relative(c,E),P.charAt(0)!==".")throw new f.ErrnoError(55);var q;try{q=f.lookupNode(y,H)}catch{}if(x!==q){var J=f.isDir(x.mode),ne=f.mayDelete(Z,F,J);if(ne)throw new f.ErrnoError(ne);if(ne=q?f.mayDelete(y,H,J):f.mayCreate(y,H),ne)throw new f.ErrnoError(ne);if(!Z.node_ops.rename)throw new f.ErrnoError(63);if(f.isMountpoint(x)||q&&f.isMountpoint(q))throw new f.ErrnoError(10);if(y!==Z&&(ne=f.nodePermissions(Z,"w"),ne))throw new f.ErrnoError(ne);f.hashRemoveNode(x);try{Z.node_ops.rename(x,y,H),x.parent=y}catch(ae){throw ae}finally{f.hashAddNode(x)}}},rmdir(L){var c=f.lookupPath(L,{parent:!0}),E=c.node,B=le.basename(L),F=f.lookupNode(E,B),H=f.mayDelete(E,B,!0);if(H)throw new f.ErrnoError(H);if(!E.node_ops.rmdir)throw new f.ErrnoError(63);if(f.isMountpoint(F))throw new f.ErrnoError(10);E.node_ops.rmdir(E,B),f.destroyNode(F)},readdir(L){var c=f.lookupPath(L,{follow:!0}),E=c.node,B=f.checkOpExists(E.node_ops.readdir,54);return B(E)},unlink(L){var c=f.lookupPath(L,{parent:!0}),E=c.node;if(!E)throw new f.ErrnoError(44);var B=le.basename(L),F=f.lookupNode(E,B),H=f.mayDelete(E,B,!1);if(H)throw new f.ErrnoError(H);if(!E.node_ops.unlink)throw new f.ErrnoError(63);if(f.isMountpoint(F))throw new f.ErrnoError(10);E.node_ops.unlink(E,B),f.destroyNode(F)},readlink(L){var c=f.lookupPath(L),E=c.node;if(!E)throw new f.ErrnoError(44);if(!E.node_ops.readlink)throw new f.ErrnoError(28);return E.node_ops.readlink(E)},stat(L,c){var E=f.lookupPath(L,{follow:!c}),B=E.node,F=f.checkOpExists(B.node_ops.getattr,63);return F(B)},fstat(L){var c=f.getStreamChecked(L),E=c.node,B=c.stream_ops.getattr,F=B?c:E;return B??=E.node_ops.getattr,f.checkOpExists(B,63),B(F)},lstat(L){return f.stat(L,!0)},doChmod(L,c,E,B){f.doSetAttr(L,c,{mode:E&4095|c.mode&-4096,ctime:Date.now(),dontFollow:B})},chmod(L,c,E){var B;if(typeof L=="string"){var F=f.lookupPath(L,{follow:!E});B=F.node}else B=L;f.doChmod(null,B,c,E)},lchmod(L,c){f.chmod(L,c,!0)},fchmod(L,c){var E=f.getStreamChecked(L);f.doChmod(E,E.node,c,!1)},doChown(L,c,E){f.doSetAttr(L,c,{timestamp:Date.now(),dontFollow:E})},chown(L,c,E,B){var F;if(typeof L=="string"){var H=f.lookupPath(L,{follow:!B});F=H.node}else F=L;f.doChown(null,F,B)},lchown(L,c,E){f.chown(L,c,E,!0)},fchown(L,c,E){var B=f.getStreamChecked(L);f.doChown(B,B.node,!1)},doTruncate(L,c,E){if(f.isDir(c.mode))throw new f.ErrnoError(31);if(!f.isFile(c.mode))throw new f.ErrnoError(28);var B=f.nodePermissions(c,"w");if(B)throw new f.ErrnoError(B);f.doSetAttr(L,c,{size:E,timestamp:Date.now()})},truncate(L,c){if(c<0)throw new f.ErrnoError(28);var E;if(typeof L=="string"){var B=f.lookupPath(L,{follow:!0});E=B.node}else E=L;f.doTruncate(null,E,c)},ftruncate(L,c){var E=f.getStreamChecked(L);if(c<0||(E.flags&2097155)===0)throw new f.ErrnoError(28);f.doTruncate(E,E.node,c)},utime(L,c,E){var B=f.lookupPath(L,{follow:!0}),F=B.node,H=f.checkOpExists(F.node_ops.setattr,63);H(F,{atime:c,mtime:E})},open(L,c,E=438){if(L==="")throw new f.ErrnoError(44);c=typeof c=="string"?Oe(c):c,c&64?E=E&4095|32768:E=0;var B,F;if(typeof L=="object")B=L;else{F=L.endsWith("/");var H=f.lookupPath(L,{follow:!(c&131072),noent_okay:!0});B=H.node,L=H.path}var j=!1;if(c&64)if(B){if(c&128)throw new f.ErrnoError(20)}else{if(F)throw new f.ErrnoError(31);B=f.mknod(L,E|511,0),j=!0}if(!B)throw new f.ErrnoError(44);if(f.isChrdev(B.mode)&&(c&=-513),c&65536&&!f.isDir(B.mode))throw new f.ErrnoError(54);if(!j){var Z=f.mayOpen(B,c);if(Z)throw new f.ErrnoError(Z)}c&512&&!j&&f.truncate(B,0),c&=-131713;var y=f.createStream({node:B,path:f.getPath(B),flags:c,seekable:!0,position:0,stream_ops:B.stream_ops,ungotten:[],error:!1});return y.stream_ops.open&&y.stream_ops.open(y),j&&f.chmod(B,E&511),g.logReadFiles&&!(c&1)&&(L in f.readFiles||(f.readFiles[L]=1)),y},close(L){if(f.isClosed(L))throw new f.ErrnoError(8);L.getdents&&(L.getdents=null);try{L.stream_ops.close&&L.stream_ops.close(L)}catch(c){throw c}finally{f.closeStream(L.fd)}L.fd=null},isClosed(L){return L.fd===null},llseek(L,c,E){if(f.isClosed(L))throw new f.ErrnoError(8);if(!L.seekable||!L.stream_ops.llseek)throw new f.ErrnoError(70);if(E!=0&&E!=1&&E!=2)throw new f.ErrnoError(28);return L.position=L.stream_ops.llseek(L,c,E),L.ungotten=[],L.position},read(L,c,E,B,F){if(B<0||F<0)throw new f.ErrnoError(28);if(f.isClosed(L))throw new f.ErrnoError(8);if((L.flags&2097155)===1)throw new f.ErrnoError(8);if(f.isDir(L.node.mode))throw new f.ErrnoError(31);if(!L.stream_ops.read)throw new f.ErrnoError(28);var H=typeof F<"u";if(!H)F=L.position;else if(!L.seekable)throw new f.ErrnoError(70);var j=L.stream_ops.read(L,c,E,B,F);return H||(L.position+=j),j},write(L,c,E,B,F,H){if(B<0||F<0)throw new f.ErrnoError(28);if(f.isClosed(L))throw new f.ErrnoError(8);if((L.flags&2097155)===0)throw new f.ErrnoError(8);if(f.isDir(L.node.mode))throw new f.ErrnoError(31);if(!L.stream_ops.write)throw new f.ErrnoError(28);L.seekable&&L.flags&1024&&f.llseek(L,0,2);var j=typeof F<"u";if(!j)F=L.position;else if(!L.seekable)throw new f.ErrnoError(70);var Z=L.stream_ops.write(L,c,E,B,F,H);return j||(L.position+=Z),Z},mmap(L,c,E,B,F){if((B&2)!==0&&(F&2)===0&&(L.flags&2097155)!==2)throw new f.ErrnoError(2);if((L.flags&2097155)===1)throw new f.ErrnoError(2);if(!L.stream_ops.mmap)throw new f.ErrnoError(43);if(!c)throw new f.ErrnoError(28);return L.stream_ops.mmap(L,c,E,B,F)},msync(L,c,E,B,F){return L.stream_ops.msync?L.stream_ops.msync(L,c,E,B,F):0},ioctl(L,c,E){if(!L.stream_ops.ioctl)throw new f.ErrnoError(59);return L.stream_ops.ioctl(L,c,E)},readFile(L,c={}){if(c.flags=c.flags||0,c.encoding=c.encoding||"binary",c.encoding!=="utf8"&&c.encoding!=="binary")throw new Error(`Invalid encoding type "${c.encoding}"`);var E,B=f.open(L,c.flags),F=f.stat(L),H=F.size,j=new Uint8Array(H);return f.read(B,j,0,H,0),c.encoding==="utf8"?E=_e(j):c.encoding==="binary"&&(E=j),f.close(B),E},writeFile(L,c,E={}){E.flags=E.flags||577;var B=f.open(L,E.flags,E.mode);if(typeof c=="string"){var F=new Uint8Array(be(c)+1),H=$e(c,F,0,F.length);f.write(B,F,0,H,void 0,E.canOwn)}else if(ArrayBuffer.isView(c))f.write(B,c,0,c.byteLength,void 0,E.canOwn);else throw new Error("Unsupported data type");f.close(B)},cwd:()=>f.currentPath,chdir(L){var c=f.lookupPath(L,{follow:!0});if(c.node===null)throw new f.ErrnoError(44);if(!f.isDir(c.node.mode))throw new f.ErrnoError(54);var E=f.nodePermissions(c.node,"x");if(E)throw new f.ErrnoError(E);f.currentPath=c.path},createDefaultDirectories(){f.mkdir("/tmp"),f.mkdir("/home"),f.mkdir("/home/web_user")},createDefaultDevices(){f.mkdir("/dev"),f.registerDevice(f.makedev(1,3),{read:()=>0,write:(B,F,H,j,Z)=>j,llseek:()=>0}),f.mkdev("/dev/null",f.makedev(1,3)),we.register(f.makedev(5,0),we.default_tty_ops),we.register(f.makedev(6,0),we.default_tty1_ops),f.mkdev("/dev/tty",f.makedev(5,0)),f.mkdev("/dev/tty1",f.makedev(6,0));var L=new Uint8Array(1024),c=0,E=()=>(c===0&&(te(L),c=L.byteLength),L[--c]);f.createDevice("/dev","random",E),f.createDevice("/dev","urandom",E),f.mkdir("/dev/shm"),f.mkdir("/dev/shm/tmp")},createSpecialDirectories(){f.mkdir("/proc");var L=f.mkdir("/proc/self");f.mkdir("/proc/self/fd"),f.mount({mount(){var c=f.createNode(L,"fd",16895,73);return c.stream_ops={llseek:se.stream_ops.llseek},c.node_ops={lookup(E,B){var F=+B,H=f.getStreamChecked(F),j={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>H.path},id:F+1};return j.parent=j,j},readdir(){return Array.from(f.streams.entries()).filter(([E,B])=>B).map(([E,B])=>E.toString())}},c}},{},"/proc/self/fd")},createStandardStreams(L,c,E){L?f.createDevice("/dev","stdin",L):f.symlink("/dev/tty","/dev/stdin"),c?f.createDevice("/dev","stdout",null,c):f.symlink("/dev/tty","/dev/stdout"),E?f.createDevice("/dev","stderr",null,E):f.symlink("/dev/tty1","/dev/stderr"),f.open("/dev/stdin",0),f.open("/dev/stdout",1),f.open("/dev/stderr",1)},staticInit(){f.nameTable=new Array(4096),f.mount(se,{},"/"),f.createDefaultDirectories(),f.createDefaultDevices(),f.createSpecialDirectories(),f.filesystems={MEMFS:se}},init(L,c,E){f.initialized=!0,L??=g.stdin,c??=g.stdout,E??=g.stderr,f.createStandardStreams(L,c,E)},quit(){f.initialized=!1;for(var L of f.streams)L&&f.close(L)},findObject(L,c){var E=f.analyzePath(L,c);return E.exists?E.object:null},analyzePath(L,c){try{var E=f.lookupPath(L,{follow:!c});L=E.path}catch{}var B={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var E=f.lookupPath(L,{parent:!0});B.parentExists=!0,B.parentPath=E.path,B.parentObject=E.node,B.name=le.basename(L),E=f.lookupPath(L,{follow:!c}),B.exists=!0,B.path=E.path,B.object=E.node,B.name=E.node.name,B.isRoot=E.path==="/"}catch(F){B.error=F.errno}return B},createPath(L,c,E,B){L=typeof L=="string"?L:f.getPath(L);for(var F=c.split("/").reverse();F.length;){var H=F.pop();if(H){var j=le.join2(L,H);try{f.mkdir(j)}catch(Z){if(Z.errno!=20)throw Z}L=j}}return j},createFile(L,c,E,B,F){var H=le.join2(typeof L=="string"?L:f.getPath(L),c),j=Fe(B,F);return f.create(H,j)},createDataFile(L,c,E,B,F,H){var j=c;L&&(L=typeof L=="string"?L:f.getPath(L),j=c?le.join2(L,c):L);var Z=Fe(B,F),y=f.create(j,Z);if(E){if(typeof E=="string"){for(var x=new Array(E.length),P=0,q=E.length;P<q;++P)x[P]=E.charCodeAt(P);E=x}f.chmod(y,Z|146);var J=f.open(y,577);f.write(J,E,0,E.length,0,H),f.close(J),f.chmod(y,Z)}},createDevice(L,c,E,B){var F=le.join2(typeof L=="string"?L:f.getPath(L),c),H=Fe(!!E,!!B);f.createDevice.major??=64;var j=f.makedev(f.createDevice.major++,0);return f.registerDevice(j,{open(Z){Z.seekable=!1},close(Z){B?.buffer?.length&&B(10)},read(Z,y,x,P,q){for(var J=0,ne=0;ne<P;ne++){var ae;try{ae=E()}catch{throw new f.ErrnoError(29)}if(ae===void 0&&J===0)throw new f.ErrnoError(6);if(ae==null)break;J++,y[x+ne]=ae}return J&&(Z.node.atime=Date.now()),J},write(Z,y,x,P,q){for(var J=0;J<P;J++)try{B(y[x+J])}catch{throw new f.ErrnoError(29)}return P&&(Z.node.mtime=Z.node.ctime=Date.now()),J}}),f.mkdev(F,H,j)},forceLoadFile(L){if(L.isDevice||L.isFolder||L.link||L.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");try{L.contents=t(L.url),L.usedBytes=L.contents.length}catch{throw new f.ErrnoError(29)}},createLazyFile(L,c,E,B,F){class H{lengthKnown=!1;chunks=[];get(ne){if(!(ne>this.length-1||ne<0)){var ae=ne%this.chunkSize,de=ne/this.chunkSize|0;return this.getter(de)[ae]}}setDataGetter(ne){this.getter=ne}cacheLength(){var ne=new XMLHttpRequest;if(ne.open("HEAD",E,!1),ne.send(null),!(ne.status>=200&&ne.status<300||ne.status===304))throw new Error("Couldn't load "+E+". Status: "+ne.status);var ae=Number(ne.getResponseHeader("Content-length")),de,Se=(de=ne.getResponseHeader("Accept-Ranges"))&&de==="bytes",Le=(de=ne.getResponseHeader("Content-Encoding"))&&de==="gzip",xe=1024*1024;Se||(xe=ae);var Ue=(De,Pe)=>{if(De>Pe)throw new Error("invalid range ("+De+", "+Pe+") or no bytes requested!");if(Pe>ae-1)throw new Error("only "+ae+" bytes available! programmer error!");var qe=new XMLHttpRequest;if(qe.open("GET",E,!1),ae!==xe&&qe.setRequestHeader("Range","bytes="+De+"-"+Pe),qe.responseType="arraybuffer",qe.overrideMimeType&&qe.overrideMimeType("text/plain; charset=x-user-defined"),qe.send(null),!(qe.status>=200&&qe.status<300||qe.status===304))throw new Error("Couldn't load "+E+". Status: "+qe.status);return qe.response!==void 0?new Uint8Array(qe.response||[]):Re(qe.responseText||"")},Ne=this;Ne.setDataGetter(De=>{var Pe=De*xe,qe=(De+1)*xe-1;if(qe=Math.min(qe,ae-1),typeof Ne.chunks[De]>"u"&&(Ne.chunks[De]=Ue(Pe,qe)),typeof Ne.chunks[De]>"u")throw new Error("doXHR failed!");return Ne.chunks[De]}),(Le||!ae)&&(xe=ae=1,ae=this.getter(0).length,xe=ae,e("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=ae,this._chunkSize=xe,this.lengthKnown=!0}get length(){return this.lengthKnown||this.cacheLength(),this._length}get chunkSize(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}if(typeof XMLHttpRequest<"u"){throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var j,Z}else var Z={isDevice:!1,url:E};var y=f.createFile(L,c,Z,B,F);Z.contents?y.contents=Z.contents:Z.url&&(y.contents=null,y.url=Z.url),Object.defineProperties(y,{usedBytes:{get:function(){return this.contents.length}}});var x={},P=Object.keys(y.stream_ops);P.forEach(J=>{var ne=y.stream_ops[J];x[J]=(...ae)=>(f.forceLoadFile(y),ne(...ae))});function q(J,ne,ae,de,Se){var Le=J.node.contents;if(Se>=Le.length)return 0;var xe=Math.min(Le.length-Se,de);if(Le.slice)for(var Ue=0;Ue<xe;Ue++)ne[ae+Ue]=Le[Se+Ue];else for(var Ue=0;Ue<xe;Ue++)ne[ae+Ue]=Le.get(Se+Ue);return xe}return x.read=(J,ne,ae,de,Se)=>(f.forceLoadFile(y),q(J,ne,ae,de,Se)),x.mmap=(J,ne,ae,de,Se)=>{f.forceLoadFile(y);var Le=Te();if(!Le)throw new f.ErrnoError(48);return q(J,w,Le,ne,ae),{ptr:Le,allocated:!0}},y.stream_ops=x,y}},Ye=(L,c)=>L?_e(m,L,c):"",Be={DEFAULT_POLLMASK:5,calculateAt(L,c,E){if(le.isAbs(c))return c;var B;if(L===-100)B=f.cwd();else{var F=Be.getStreamFromFD(L);B=F.path}if(c.length==0){if(!E)throw new f.ErrnoError(44);return B}return B+"/"+c},writeStat(L,c){_[L>>2]=c.dev,_[L+4>>2]=c.mode,T[L+8>>2]=c.nlink,_[L+12>>2]=c.uid,_[L+16>>2]=c.gid,_[L+20>>2]=c.rdev,R[L+24>>3]=BigInt(c.size),_[L+32>>2]=4096,_[L+36>>2]=c.blocks;var E=c.atime.getTime(),B=c.mtime.getTime(),F=c.ctime.getTime();return R[L+40>>3]=BigInt(Math.floor(E/1e3)),T[L+48>>2]=E%1e3*1e3*1e3,R[L+56>>3]=BigInt(Math.floor(B/1e3)),T[L+64>>2]=B%1e3*1e3*1e3,R[L+72>>3]=BigInt(Math.floor(F/1e3)),T[L+80>>2]=F%1e3*1e3*1e3,R[L+88>>3]=BigInt(c.ino),0},writeStatFs(L,c){_[L+4>>2]=c.bsize,_[L+40>>2]=c.bsize,_[L+8>>2]=c.blocks,_[L+12>>2]=c.bfree,_[L+16>>2]=c.bavail,_[L+20>>2]=c.files,_[L+24>>2]=c.ffree,_[L+28>>2]=c.fsid,_[L+44>>2]=c.flags,_[L+36>>2]=c.namelen},doMsync(L,c,E,B,F){if(!f.isFile(c.node.mode))throw new f.ErrnoError(43);if(B&2)return 0;var H=m.slice(L,L+E);f.msync(c,H,F,E,B)},getStreamFromFD(L){var c=f.getStreamChecked(L);return c},varargs:void 0,getStr(L){var c=Ye(L);return c}};function tt(L,c,E){Be.varargs=E;try{var B=Be.getStreamFromFD(L);switch(c){case 0:{var F=U();if(F<0)return-28;for(;f.streams[F];)F++;var H;return H=f.dupStream(B,F),H.fd}case 1:case 2:return 0;case 3:return B.flags;case 4:{var F=U();return B.flags|=F,0}case 12:{var F=pe(),j=0;return d[F+j>>1]=2,0}case 13:case 14:return 0}return-28}catch(Z){if(typeof f>"u"||Z.name!=="ErrnoError")throw Z;return-Z.errno}}function dt(L,c,E){Be.varargs=E;try{var B=Be.getStreamFromFD(L);switch(c){case 21509:return B.tty?0:-59;case 21505:{if(!B.tty)return-59;if(B.tty.ops.ioctl_tcgets){var F=B.tty.ops.ioctl_tcgets(B),H=pe();_[H>>2]=F.c_iflag||0,_[H+4>>2]=F.c_oflag||0,_[H+8>>2]=F.c_cflag||0,_[H+12>>2]=F.c_lflag||0;for(var j=0;j<32;j++)w[H+j+17]=F.c_cc[j]||0;return 0}return 0}case 21510:case 21511:case 21512:return B.tty?0:-59;case 21506:case 21507:case 21508:{if(!B.tty)return-59;if(B.tty.ops.ioctl_tcsets){for(var H=pe(),Z=_[H>>2],y=_[H+4>>2],x=_[H+8>>2],P=_[H+12>>2],q=[],j=0;j<32;j++)q.push(w[H+j+17]);return B.tty.ops.ioctl_tcsets(B.tty,c,{c_iflag:Z,c_oflag:y,c_cflag:x,c_lflag:P,c_cc:q})}return 0}case 21519:{if(!B.tty)return-59;var H=pe();return _[H>>2]=0,0}case 21520:return B.tty?-28:-59;case 21531:{var H=pe();return f.ioctl(B,c,H)}case 21523:{if(!B.tty)return-59;if(B.tty.ops.ioctl_tiocgwinsz){var J=B.tty.ops.ioctl_tiocgwinsz(B.tty),H=pe();d[H>>1]=J[0],d[H+2>>1]=J[1]}return 0}case 21524:return B.tty?0:-59;case 21515:return B.tty?0:-59;default:return-28}}catch(ne){if(typeof f>"u"||ne.name!=="ErrnoError")throw ne;return-ne.errno}}function ht(L,c,E,B){Be.varargs=B;try{c=Be.getStr(c),c=Be.calculateAt(L,c);var F=B?U():0;return f.open(c,E,F).fd}catch(H){if(typeof f>"u"||H.name!=="ErrnoError")throw H;return-H.errno}}var vt=()=>G(""),jt=0,It=()=>{ze=!1,jt=0},wt={},ft=L=>{if(L instanceof ge||L=="unwind")return M;s(1,L)},Lt=()=>ze||jt>0,At=L=>{M=L,Lt()||(g.onExit?.(L),p=!0),s(L,new ge(L))},Ft=(L,c)=>{M=L,At(L)},Nt=Ft,Yt=()=>{if(!Lt())try{Nt(M)}catch(L){ft(L)}},dn=L=>{if(!p)try{L(),Yt()}catch(c){ft(c)}},hn=()=>performance.now(),fn=(L,c)=>{if(wt[L]&&(clearTimeout(wt[L].id),delete wt[L]),!c)return 0;var E=setTimeout(()=>{delete wt[L],dn(()=>En(L,hn()))},c);return wt[L]={id:E,timeout_ms:c},0},rt=(L,c,E)=>$e(L,m,c,E),at=(L,c,E,B)=>{var F=new Date().getFullYear(),H=new Date(F,0,1),j=new Date(F,6,1),Z=H.getTimezoneOffset(),y=j.getTimezoneOffset(),x=Math.max(Z,y);T[L>>2]=x*60,_[c>>2]=+(Z!=y);var P=ne=>{var ae=ne>=0?"-":"+",de=Math.abs(ne),Se=String(Math.floor(de/60)).padStart(2,"0"),Le=String(de%60).padStart(2,"0");return`UTC${ae}${Se}${Le}`},q=P(Z),J=P(y);y<Z?(rt(q,E,17),rt(J,B,17)):(rt(q,B,17),rt(J,E,17))},Kt=()=>2147483648,Jt=(L,c)=>Math.ceil(L/c)*c,Zt=L=>{var c=u.buffer,E=(L-c.byteLength+65535)/65536|0;try{return u.grow(E),$(),1}catch{}},Xt=L=>{var c=m.length;L>>>=0;var E=Kt();if(L>E)return!1;for(var B=1;B<=4;B*=2){var F=c*(1+.2/B);F=Math.min(F,L+100663296);var H=Math.min(E,Jt(Math.max(L,F),65536)),j=Zt(H);if(j)return!0}return!1},Pt={},Ut=()=>A||"./this.program",bt=()=>{if(!bt.strings){var L=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",c={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:L,_:Ut()};for(var E in Pt)Pt[E]===void 0?delete c[E]:c[E]=Pt[E];var B=[];for(var E in c)B.push(`${E}=${c[E]}`);bt.strings=B}return bt.strings},Et=(L,c)=>{var E=0,B=0;for(var F of bt()){var H=c+E;T[L+B>>2]=H,E+=rt(F,H,1/0)+1,B+=4}return 0},_t=(L,c)=>{var E=bt();T[L>>2]=E.length;var B=0;for(var F of E)B+=be(F)+1;return T[c>>2]=B,0};function pn(L){try{var c=Be.getStreamFromFD(L);return f.close(c),0}catch(E){if(typeof f>"u"||E.name!=="ErrnoError")throw E;return E.errno}}function gn(L,c){try{var E=0,B=0,F=0,H=Be.getStreamFromFD(L),j=H.tty?2:f.isDir(H.mode)?3:f.isLink(H.mode)?7:4;return w[c]=j,d[c+2>>1]=F,R[c+8>>3]=BigInt(E),R[c+16>>3]=BigInt(B),0}catch(Z){if(typeof f>"u"||Z.name!=="ErrnoError")throw Z;return Z.errno}}var mn=(L,c,E,B)=>{for(var F=0,H=0;H<E;H++){var j=T[c>>2],Z=T[c+4>>2];c+=8;var y=f.read(L,w,j,Z,B);if(y<0)return-1;if(F+=y,y<Z)break}return F};function vn(L,c,E,B){try{var F=Be.getStreamFromFD(L),H=mn(F,c,E);return T[B>>2]=H,0}catch(j){if(typeof f>"u"||j.name!=="ErrnoError")throw j;return j.errno}}var _n=9007199254740992,yn=-9007199254740992,Ht=L=>L<yn||L>_n?NaN:Number(L);function wn(L,c,E,B){c=Ht(c);try{if(isNaN(c))return 61;var F=Be.getStreamFromFD(L);return f.llseek(F,c,E),R[B>>3]=BigInt(F.position),F.getdents&&c===0&&E===0&&(F.getdents=null),0}catch(H){if(typeof f>"u"||H.name!=="ErrnoError")throw H;return H.errno}}var Ct=(L,c,E,B)=>{for(var F=0,H=0;H<E;H++){var j=T[c>>2],Z=T[c+4>>2];c+=8;var y=f.write(L,w,j,Z,B);if(y<0)return-1;if(F+=y,y<Z)break}return F};function An(L,c,E,B){try{var F=Be.getStreamFromFD(L),H=Ct(F,c,E);return T[B>>2]=H,0}catch(j){if(typeof f>"u"||j.name!=="ErrnoError")throw j;return j.errno}}var Qt=L=>Cn(L),en=L=>{var c=be(L)+1,E=Qt(c);return rt(L,E,c),E};f.createPreloadedFile=ke,f.staticInit(),se.doesNotExistError=new f.ErrnoError(44),se.doesNotExistError.stack="<generic error, no stack>",g.noExitRuntime&&(ze=g.noExitRuntime),g.preloadPlugins&&(Ae=g.preloadPlugins),g.print&&(e=g.print),g.printErr&&(r=g.printErr),g.wasmBinary&&(a=g.wasmBinary),g.arguments&&(S=g.arguments),g.thisProgram&&(A=g.thisProgram),g.FS=f;var bn={d:tt,a:dt,i:ht,q:vt,k:It,l:fn,m:at,n:Xt,e:Et,f:_t,b:Nt,c:pn,p:gn,h:vn,o:wn,g:An,j:At},lt=await ue();lt.s;var ct=g._main=lt.t,En=lt.u,Cn=lt.v;function Sn(L=[]){var c=ct;L.unshift(A);var E=L.length,B=Qt((E+1)*4),F=B;L.forEach(j=>{T[F>>2]=en(j),F+=4}),T[F>>2]=0;try{var H=c(E,B);return Ft(H,!0),H}catch(j){return ft(j)}}function kt(L=S){if(l>0){C=kt;return}if(k(),l>0){C=kt;return}function c(){if(g.calledRun=!0,!p){v(),I(g),g.onRuntimeInitialized?.();var E=g.noInitialRun||!1;E||Sn(L),b()}}g.setStatus?(g.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>g.setStatus(""),1),c()},1)):c()}function Wt(){if(g.preInit)for(typeof g.preInit=="function"&&(g.preInit=[g.preInit]);g.preInit.length>0;)g.preInit.shift()()}return Wt(),kt(),X=D,X},Eo=async function(ee={}){var X,g=ee,I,z,D=new Promise((c,E)=>{I=c,z=E}),S=[],A="./this.program",s=(c,E)=>{throw E},h=import.meta.url,o="";function n(c){return g.locateFile?g.locateFile(c,o):o+c}var i,t;{try{o=new URL(".",h).href}catch{}i=async c=>{var E=await fetch(c,{credentials:"same-origin"});if(E.ok)return E.arrayBuffer();throw new Error(E.status+" : "+E.url)}}var e=console.log.bind(console),r=console.error.bind(console),a,u,p=!1,M,w,m,d,_,T,R;function $(){var c=u.buffer;w=new Int8Array(c),d=new Int16Array(c),m=new Uint8Array(c),_=new Int32Array(c),T=new Uint32Array(c),R=new BigInt64Array(c),new BigUint64Array(c)}function k(){if(g.preRun)for(typeof g.preRun=="function"&&(g.preRun=[g.preRun]);g.preRun.length;)Ie(g.preRun.shift());me(Me)}function v(){!g.noFSInit&&!f.initialized&&f.init(),ct.t(),f.ignorePermissions=!1}function b(){if(g.postRun)for(typeof g.postRun=="function"&&(g.postRun=[g.postRun]);g.postRun.length;)Ce(g.postRun.shift());me(ve)}var l=0,C=null;function O(c){l++,g.monitorRunDependencies?.(l)}function N(c){if(l--,g.monitorRunDependencies?.(l),l==0&&C){var E=C;C=null,E()}}function G(c){g.onAbort?.(c),c="Aborted("+c+")",r(c),p=!0,c+=". Build with -sASSERTIONS for more info.";var E=new WebAssembly.RuntimeError(c);throw z(E),E}var W;function K(){return g.locateFile?n("rgbfix.wasm"):new URL(""+new URL("rgbfix-kZeoMBot.wasm",import.meta.url).href,import.meta.url).href}function V(c){if(c==W&&a)return new Uint8Array(a);throw"both async and sync fetching of the wasm failed"}async function Y(c){if(!a)try{var E=await i(c);return new Uint8Array(E)}catch{}return V(c)}async function re(c,E){try{var B=await Y(c),F=await WebAssembly.instantiate(B,E);return F}catch(H){r(`failed to asynchronously prepare wasm: ${H}`),G(H)}}async function Q(c,E,B){if(!c&&typeof WebAssembly.instantiateStreaming=="function")try{var F=fetch(E,{credentials:"same-origin"}),H=await WebAssembly.instantiateStreaming(F,B);return H}catch(j){r(`wasm streaming compile failed: ${j}`),r("falling back to ArrayBuffer instantiation")}return re(E,B)}function ie(){return{a:lt}}async function ue(){function c(j,Z){return ct=j.exports,u=ct.s,$(),N(),ct}O();function E(j){return c(j.instance)}var B=ie();if(g.instantiateWasm)return new Promise((j,Z)=>{g.instantiateWasm(B,(y,x)=>{j(c(y))})});W??=K();try{var F=await Q(a,W,B),H=E(F);return H}catch(j){return z(j),Promise.reject(j)}}class ge{name="ExitStatus";constructor(E){this.message=`Program terminated with exit(${E})`,this.status=E}}var me=c=>{for(;c.length>0;)c.shift()(g)},ve=[],Ce=c=>ve.push(c),Me=[],Ie=c=>Me.push(c),ze=!0,U=()=>{var c=_[+Be.varargs>>2];return Be.varargs+=4,c},pe=U,le={isAbs:c=>c.charAt(0)==="/",splitPath:c=>{var E=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return E.exec(c).slice(1)},normalizeArray:(c,E)=>{for(var B=0,F=c.length-1;F>=0;F--){var H=c[F];H==="."?c.splice(F,1):H===".."?(c.splice(F,1),B++):B&&(c.splice(F,1),B--)}if(E)for(;B;B--)c.unshift("..");return c},normalize:c=>{var E=le.isAbs(c),B=c.slice(-1)==="/";return c=le.normalizeArray(c.split("/").filter(F=>!!F),!E).join("/"),!c&&!E&&(c="."),c&&B&&(c+="/"),(E?"/":"")+c},dirname:c=>{var E=le.splitPath(c),B=E[0],F=E[1];return!B&&!F?".":(F&&(F=F.slice(0,-1)),B+F)},basename:c=>c&&c.match(/([^\/]+|\/)\/*$/)[1],join:(...c)=>le.normalize(c.join("/")),join2:(c,E)=>le.normalize(c+"/"+E)},oe=()=>c=>crypto.getRandomValues(c),te=c=>{(te=oe())(c)},ce={resolve:(...c)=>{for(var E="",B=!1,F=c.length-1;F>=-1&&!B;F--){var H=F>=0?c[F]:f.cwd();if(typeof H!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!H)return"";E=H+"/"+E,B=le.isAbs(H)}return E=le.normalizeArray(E.split("/").filter(j=>!!j),!B).join("/"),(B?"/":"")+E||"."},relative:(c,E)=>{c=ce.resolve(c).slice(1),E=ce.resolve(E).slice(1);function B(P){for(var q=0;q<P.length&&P[q]==="";q++);for(var J=P.length-1;J>=0&&P[J]==="";J--);return q>J?[]:P.slice(q,J-q+1)}for(var F=B(c.split("/")),H=B(E.split("/")),j=Math.min(F.length,H.length),Z=j,y=0;y<j;y++)if(F[y]!==H[y]){Z=y;break}for(var x=[],y=Z;y<F.length;y++)x.push("..");return x=x.concat(H.slice(Z)),x.join("/")}},ye=typeof TextDecoder<"u"?new TextDecoder:void 0,_e=(c,E=0,B=NaN)=>{for(var F=E+B,H=E;c[H]&&!(H>=F);)++H;if(H-E>16&&c.buffer&&ye)return ye.decode(c.subarray(E,H));for(var j="";E<H;){var Z=c[E++];if(!(Z&128)){j+=String.fromCharCode(Z);continue}var y=c[E++]&63;if((Z&224)==192){j+=String.fromCharCode((Z&31)<<6|y);continue}var x=c[E++]&63;if((Z&240)==224?Z=(Z&15)<<12|y<<6|x:Z=(Z&7)<<18|y<<12|x<<6|c[E++]&63,Z<65536)j+=String.fromCharCode(Z);else{var P=Z-65536;j+=String.fromCharCode(55296|P>>10,56320|P&1023)}}return j},fe=[],be=c=>{for(var E=0,B=0;B<c.length;++B){var F=c.charCodeAt(B);F<=127?E++:F<=2047?E+=2:F>=55296&&F<=57343?(E+=4,++B):E+=3}return E},$e=(c,E,B,F)=>{if(!(F>0))return 0;for(var H=B,j=B+F-1,Z=0;Z<c.length;++Z){var y=c.charCodeAt(Z);if(y>=55296&&y<=57343){var x=c.charCodeAt(++Z);y=65536+((y&1023)<<10)|x&1023}if(y<=127){if(B>=j)break;E[B++]=y}else if(y<=2047){if(B+1>=j)break;E[B++]=192|y>>6,E[B++]=128|y&63}else if(y<=65535){if(B+2>=j)break;E[B++]=224|y>>12,E[B++]=128|y>>6&63,E[B++]=128|y&63}else{if(B+3>=j)break;E[B++]=240|y>>18,E[B++]=128|y>>12&63,E[B++]=128|y>>6&63,E[B++]=128|y&63}}return E[B]=0,B-H},Re=(c,E,B)=>{var F=be(c)+1,H=new Array(F),j=$e(c,H,0,H.length);return H.length=j,H},he=()=>{if(!fe.length){var c=null;if(typeof window<"u"&&typeof window.prompt=="function"&&(c=window.prompt("Input: "),c!==null&&(c+=`
`)),!c)return null;fe=Re(c)}return fe.shift()},we={ttys:[],init(){},shutdown(){},register(c,E){we.ttys[c]={input:[],output:[],ops:E},f.registerDevice(c,we.stream_ops)},stream_ops:{open(c){var E=we.ttys[c.node.rdev];if(!E)throw new f.ErrnoError(43);c.tty=E,c.seekable=!1},close(c){c.tty.ops.fsync(c.tty)},fsync(c){c.tty.ops.fsync(c.tty)},read(c,E,B,F,H){if(!c.tty||!c.tty.ops.get_char)throw new f.ErrnoError(60);for(var j=0,Z=0;Z<F;Z++){var y;try{y=c.tty.ops.get_char(c.tty)}catch{throw new f.ErrnoError(29)}if(y===void 0&&j===0)throw new f.ErrnoError(6);if(y==null)break;j++,E[B+Z]=y}return j&&(c.node.atime=Date.now()),j},write(c,E,B,F,H){if(!c.tty||!c.tty.ops.put_char)throw new f.ErrnoError(60);try{for(var j=0;j<F;j++)c.tty.ops.put_char(c.tty,E[B+j])}catch{throw new f.ErrnoError(29)}return F&&(c.node.mtime=c.node.ctime=Date.now()),j}},default_tty_ops:{get_char(c){return he()},put_char(c,E){E===null||E===10?(e(_e(c.output)),c.output=[]):E!=0&&c.output.push(E)},fsync(c){c.output?.length>0&&(e(_e(c.output)),c.output=[])},ioctl_tcgets(c){return{c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},ioctl_tcsets(c,E,B){return 0},ioctl_tiocgwinsz(c){return[24,80]}},default_tty1_ops:{put_char(c,E){E===null||E===10?(r(_e(c.output)),c.output=[]):E!=0&&c.output.push(E)},fsync(c){c.output?.length>0&&(r(_e(c.output)),c.output=[])}}},Te=c=>{G()},se={ops_table:null,mount(c){return se.createNode(null,"/",16895,0)},createNode(c,E,B,F){if(f.isBlkdev(B)||f.isFIFO(B))throw new f.ErrnoError(63);se.ops_table||={dir:{node:{getattr:se.node_ops.getattr,setattr:se.node_ops.setattr,lookup:se.node_ops.lookup,mknod:se.node_ops.mknod,rename:se.node_ops.rename,unlink:se.node_ops.unlink,rmdir:se.node_ops.rmdir,readdir:se.node_ops.readdir,symlink:se.node_ops.symlink},stream:{llseek:se.stream_ops.llseek}},file:{node:{getattr:se.node_ops.getattr,setattr:se.node_ops.setattr},stream:{llseek:se.stream_ops.llseek,read:se.stream_ops.read,write:se.stream_ops.write,mmap:se.stream_ops.mmap,msync:se.stream_ops.msync}},link:{node:{getattr:se.node_ops.getattr,setattr:se.node_ops.setattr,readlink:se.node_ops.readlink},stream:{}},chrdev:{node:{getattr:se.node_ops.getattr,setattr:se.node_ops.setattr},stream:f.chrdev_stream_ops}};var H=f.createNode(c,E,B,F);return f.isDir(H.mode)?(H.node_ops=se.ops_table.dir.node,H.stream_ops=se.ops_table.dir.stream,H.contents={}):f.isFile(H.mode)?(H.node_ops=se.ops_table.file.node,H.stream_ops=se.ops_table.file.stream,H.usedBytes=0,H.contents=null):f.isLink(H.mode)?(H.node_ops=se.ops_table.link.node,H.stream_ops=se.ops_table.link.stream):f.isChrdev(H.mode)&&(H.node_ops=se.ops_table.chrdev.node,H.stream_ops=se.ops_table.chrdev.stream),H.atime=H.mtime=H.ctime=Date.now(),c&&(c.contents[E]=H,c.atime=c.mtime=c.ctime=H.atime),H},getFileDataAsTypedArray(c){return c.contents?c.contents.subarray?c.contents.subarray(0,c.usedBytes):new Uint8Array(c.contents):new Uint8Array(0)},expandFileStorage(c,E){var B=c.contents?c.contents.length:0;if(!(B>=E)){var F=1024*1024;E=Math.max(E,B*(B<F?2:1.125)>>>0),B!=0&&(E=Math.max(E,256));var H=c.contents;c.contents=new Uint8Array(E),c.usedBytes>0&&c.contents.set(H.subarray(0,c.usedBytes),0)}},resizeFileStorage(c,E){if(c.usedBytes!=E)if(E==0)c.contents=null,c.usedBytes=0;else{var B=c.contents;c.contents=new Uint8Array(E),B&&c.contents.set(B.subarray(0,Math.min(E,c.usedBytes))),c.usedBytes=E}},node_ops:{getattr(c){var E={};return E.dev=f.isChrdev(c.mode)?c.id:1,E.ino=c.id,E.mode=c.mode,E.nlink=1,E.uid=0,E.gid=0,E.rdev=c.rdev,f.isDir(c.mode)?E.size=4096:f.isFile(c.mode)?E.size=c.usedBytes:f.isLink(c.mode)?E.size=c.link.length:E.size=0,E.atime=new Date(c.atime),E.mtime=new Date(c.mtime),E.ctime=new Date(c.ctime),E.blksize=4096,E.blocks=Math.ceil(E.size/E.blksize),E},setattr(c,E){for(const B of["mode","atime","mtime","ctime"])E[B]!=null&&(c[B]=E[B]);E.size!==void 0&&se.resizeFileStorage(c,E.size)},lookup(c,E){throw se.doesNotExistError},mknod(c,E,B,F){return se.createNode(c,E,B,F)},rename(c,E,B){var F;try{F=f.lookupNode(E,B)}catch{}if(F){if(f.isDir(c.mode))for(var H in F.contents)throw new f.ErrnoError(55);f.hashRemoveNode(F)}delete c.parent.contents[c.name],E.contents[B]=c,c.name=B,E.ctime=E.mtime=c.parent.ctime=c.parent.mtime=Date.now()},unlink(c,E){delete c.contents[E],c.ctime=c.mtime=Date.now()},rmdir(c,E){var B=f.lookupNode(c,E);for(var F in B.contents)throw new f.ErrnoError(55);delete c.contents[E],c.ctime=c.mtime=Date.now()},readdir(c){return[".","..",...Object.keys(c.contents)]},symlink(c,E,B){var F=se.createNode(c,E,41471,0);return F.link=B,F},readlink(c){if(!f.isLink(c.mode))throw new f.ErrnoError(28);return c.link}},stream_ops:{read(c,E,B,F,H){var j=c.node.contents;if(H>=c.node.usedBytes)return 0;var Z=Math.min(c.node.usedBytes-H,F);if(Z>8&&j.subarray)E.set(j.subarray(H,H+Z),B);else for(var y=0;y<Z;y++)E[B+y]=j[H+y];return Z},write(c,E,B,F,H,j){if(E.buffer===w.buffer&&(j=!1),!F)return 0;var Z=c.node;if(Z.mtime=Z.ctime=Date.now(),E.subarray&&(!Z.contents||Z.contents.subarray)){if(j)return Z.contents=E.subarray(B,B+F),Z.usedBytes=F,F;if(Z.usedBytes===0&&H===0)return Z.contents=E.slice(B,B+F),Z.usedBytes=F,F;if(H+F<=Z.usedBytes)return Z.contents.set(E.subarray(B,B+F),H),F}if(se.expandFileStorage(Z,H+F),Z.contents.subarray&&E.subarray)Z.contents.set(E.subarray(B,B+F),H);else for(var y=0;y<F;y++)Z.contents[H+y]=E[B+y];return Z.usedBytes=Math.max(Z.usedBytes,H+F),F},llseek(c,E,B){var F=E;if(B===1?F+=c.position:B===2&&f.isFile(c.node.mode)&&(F+=c.node.usedBytes),F<0)throw new f.ErrnoError(28);return F},mmap(c,E,B,F,H){if(!f.isFile(c.node.mode))throw new f.ErrnoError(43);var j,Z,y=c.node.contents;if(!(H&2)&&y&&y.buffer===w.buffer)Z=!1,j=y.byteOffset;else{if(Z=!0,j=Te(),!j)throw new f.ErrnoError(48);y&&((B>0||B+E<y.length)&&(y.subarray?y=y.subarray(B,B+E):y=Array.prototype.slice.call(y,B,B+E)),w.set(y,j))}return{ptr:j,allocated:Z}},msync(c,E,B,F,H){return se.stream_ops.write(c,E,0,F,B,!1),0}}},We=async c=>{var E=await i(c);return new Uint8Array(E)},Ge=(...c)=>f.createDataFile(...c),Ae=[],Ee=(c,E,B,F)=>{typeof Browser<"u"&&Browser.init();var H=!1;return Ae.forEach(j=>{H||j.canHandle(E)&&(j.handle(c,E,B,F),H=!0)}),H},ke=(c,E,B,F,H,j,Z,y,x,P)=>{var q=E?ce.resolve(le.join2(c,E)):c;function J(ne){function ae(de){P?.(),y||Ge(c,E,de,F,H,x),j?.(),N()}Ee(ne,q,ae,()=>{Z?.(),N()})||ae(ne)}O(),typeof B=="string"?We(B).then(J,Z):J(B)},Oe=c=>{var E={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},B=E[c];if(typeof B>"u")throw new Error(`Unknown file open mode: ${c}`);return B},Fe=(c,E)=>{var B=0;return c&&(B|=365),E&&(B|=146),B},f={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,filesystems:null,syncFSRequests:0,readFiles:{},ErrnoError:class{name="ErrnoError";constructor(c){this.errno=c}},FSStream:class{shared={};get object(){return this.node}set object(c){this.node=c}get isRead(){return(this.flags&2097155)!==1}get isWrite(){return(this.flags&2097155)!==0}get isAppend(){return this.flags&1024}get flags(){return this.shared.flags}set flags(c){this.shared.flags=c}get position(){return this.shared.position}set position(c){this.shared.position=c}},FSNode:class{node_ops={};stream_ops={};readMode=365;writeMode=146;mounted=null;constructor(c,E,B,F){c||(c=this),this.parent=c,this.mount=c.mount,this.id=f.nextInode++,this.name=E,this.mode=B,this.rdev=F,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&this.readMode)===this.readMode}set read(c){c?this.mode|=this.readMode:this.mode&=~this.readMode}get write(){return(this.mode&this.writeMode)===this.writeMode}set write(c){c?this.mode|=this.writeMode:this.mode&=~this.writeMode}get isFolder(){return f.isDir(this.mode)}get isDevice(){return f.isChrdev(this.mode)}},lookupPath(c,E={}){if(!c)throw new f.ErrnoError(44);E.follow_mount??=!0,le.isAbs(c)||(c=f.cwd()+"/"+c);e:for(var B=0;B<40;B++){for(var F=c.split("/").filter(P=>!!P),H=f.root,j="/",Z=0;Z<F.length;Z++){var y=Z===F.length-1;if(y&&E.parent)break;if(F[Z]!=="."){if(F[Z]===".."){if(j=le.dirname(j),f.isRoot(H)){c=j+"/"+F.slice(Z+1).join("/");continue e}else H=H.parent;continue}j=le.join2(j,F[Z]);try{H=f.lookupNode(H,F[Z])}catch(P){if(P?.errno===44&&y&&E.noent_okay)return{path:j};throw P}if(f.isMountpoint(H)&&(!y||E.follow_mount)&&(H=H.mounted.root),f.isLink(H.mode)&&(!y||E.follow)){if(!H.node_ops.readlink)throw new f.ErrnoError(52);var x=H.node_ops.readlink(H);le.isAbs(x)||(x=le.dirname(j)+"/"+x),c=x+"/"+F.slice(Z+1).join("/");continue e}}}return{path:j,node:H}}throw new f.ErrnoError(32)},getPath(c){for(var E;;){if(f.isRoot(c)){var B=c.mount.mountpoint;return E?B[B.length-1]!=="/"?`${B}/${E}`:B+E:B}E=E?`${c.name}/${E}`:c.name,c=c.parent}},hashName(c,E){for(var B=0,F=0;F<E.length;F++)B=(B<<5)-B+E.charCodeAt(F)|0;return(c+B>>>0)%f.nameTable.length},hashAddNode(c){var E=f.hashName(c.parent.id,c.name);c.name_next=f.nameTable[E],f.nameTable[E]=c},hashRemoveNode(c){var E=f.hashName(c.parent.id,c.name);if(f.nameTable[E]===c)f.nameTable[E]=c.name_next;else for(var B=f.nameTable[E];B;){if(B.name_next===c){B.name_next=c.name_next;break}B=B.name_next}},lookupNode(c,E){var B=f.mayLookup(c);if(B)throw new f.ErrnoError(B);for(var F=f.hashName(c.id,E),H=f.nameTable[F];H;H=H.name_next){var j=H.name;if(H.parent.id===c.id&&j===E)return H}return f.lookup(c,E)},createNode(c,E,B,F){var H=new f.FSNode(c,E,B,F);return f.hashAddNode(H),H},destroyNode(c){f.hashRemoveNode(c)},isRoot(c){return c===c.parent},isMountpoint(c){return!!c.mounted},isFile(c){return(c&61440)===32768},isDir(c){return(c&61440)===16384},isLink(c){return(c&61440)===40960},isChrdev(c){return(c&61440)===8192},isBlkdev(c){return(c&61440)===24576},isFIFO(c){return(c&61440)===4096},isSocket(c){return(c&49152)===49152},flagsToPermissionString(c){var E=["r","w","rw"][c&3];return c&512&&(E+="w"),E},nodePermissions(c,E){return f.ignorePermissions?0:E.includes("r")&&!(c.mode&292)||E.includes("w")&&!(c.mode&146)||E.includes("x")&&!(c.mode&73)?2:0},mayLookup(c){if(!f.isDir(c.mode))return 54;var E=f.nodePermissions(c,"x");return E||(c.node_ops.lookup?0:2)},mayCreate(c,E){if(!f.isDir(c.mode))return 54;try{var B=f.lookupNode(c,E);return 20}catch{}return f.nodePermissions(c,"wx")},mayDelete(c,E,B){var F;try{F=f.lookupNode(c,E)}catch(j){return j.errno}var H=f.nodePermissions(c,"wx");if(H)return H;if(B){if(!f.isDir(F.mode))return 54;if(f.isRoot(F)||f.getPath(F)===f.cwd())return 10}else if(f.isDir(F.mode))return 31;return 0},mayOpen(c,E){return c?f.isLink(c.mode)?32:f.isDir(c.mode)&&(f.flagsToPermissionString(E)!=="r"||E&576)?31:f.nodePermissions(c,f.flagsToPermissionString(E)):44},checkOpExists(c,E){if(!c)throw new f.ErrnoError(E);return c},MAX_OPEN_FDS:4096,nextfd(){for(var c=0;c<=f.MAX_OPEN_FDS;c++)if(!f.streams[c])return c;throw new f.ErrnoError(33)},getStreamChecked(c){var E=f.getStream(c);if(!E)throw new f.ErrnoError(8);return E},getStream:c=>f.streams[c],createStream(c,E=-1){return c=Object.assign(new f.FSStream,c),E==-1&&(E=f.nextfd()),c.fd=E,f.streams[E]=c,c},closeStream(c){f.streams[c]=null},dupStream(c,E=-1){var B=f.createStream(c,E);return B.stream_ops?.dup?.(B),B},doSetAttr(c,E,B){var F=c?.stream_ops.setattr,H=F?c:E;F??=E.node_ops.setattr,f.checkOpExists(F,63),F(H,B)},chrdev_stream_ops:{open(c){var E=f.getDevice(c.node.rdev);c.stream_ops=E.stream_ops,c.stream_ops.open?.(c)},llseek(){throw new f.ErrnoError(70)}},major:c=>c>>8,minor:c=>c&255,makedev:(c,E)=>c<<8|E,registerDevice(c,E){f.devices[c]={stream_ops:E}},getDevice:c=>f.devices[c],getMounts(c){for(var E=[],B=[c];B.length;){var F=B.pop();E.push(F),B.push(...F.mounts)}return E},syncfs(c,E){typeof c=="function"&&(E=c,c=!1),f.syncFSRequests++,f.syncFSRequests>1&&r(`warning: ${f.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var B=f.getMounts(f.root.mount),F=0;function H(Z){return f.syncFSRequests--,E(Z)}function j(Z){if(Z)return j.errored?void 0:(j.errored=!0,H(Z));++F>=B.length&&H(null)}B.forEach(Z=>{if(!Z.type.syncfs)return j(null);Z.type.syncfs(Z,c,j)})},mount(c,E,B){var F=B==="/",H=!B,j;if(F&&f.root)throw new f.ErrnoError(10);if(!F&&!H){var Z=f.lookupPath(B,{follow_mount:!1});if(B=Z.path,j=Z.node,f.isMountpoint(j))throw new f.ErrnoError(10);if(!f.isDir(j.mode))throw new f.ErrnoError(54)}var y={type:c,opts:E,mountpoint:B,mounts:[]},x=c.mount(y);return x.mount=y,y.root=x,F?f.root=x:j&&(j.mounted=y,j.mount&&j.mount.mounts.push(y)),x},unmount(c){var E=f.lookupPath(c,{follow_mount:!1});if(!f.isMountpoint(E.node))throw new f.ErrnoError(28);var B=E.node,F=B.mounted,H=f.getMounts(F);Object.keys(f.nameTable).forEach(Z=>{for(var y=f.nameTable[Z];y;){var x=y.name_next;H.includes(y.mount)&&f.destroyNode(y),y=x}}),B.mounted=null;var j=B.mount.mounts.indexOf(F);B.mount.mounts.splice(j,1)},lookup(c,E){return c.node_ops.lookup(c,E)},mknod(c,E,B){var F=f.lookupPath(c,{parent:!0}),H=F.node,j=le.basename(c);if(!j)throw new f.ErrnoError(28);if(j==="."||j==="..")throw new f.ErrnoError(20);var Z=f.mayCreate(H,j);if(Z)throw new f.ErrnoError(Z);if(!H.node_ops.mknod)throw new f.ErrnoError(63);return H.node_ops.mknod(H,j,E,B)},statfs(c){return f.statfsNode(f.lookupPath(c,{follow:!0}).node)},statfsStream(c){return f.statfsNode(c.node)},statfsNode(c){var E={bsize:4096,frsize:4096,blocks:1e6,bfree:5e5,bavail:5e5,files:f.nextInode,ffree:f.nextInode-1,fsid:42,flags:2,namelen:255};return c.node_ops.statfs&&Object.assign(E,c.node_ops.statfs(c.mount.opts.root)),E},create(c,E=438){return E&=4095,E|=32768,f.mknod(c,E,0)},mkdir(c,E=511){return E&=1023,E|=16384,f.mknod(c,E,0)},mkdirTree(c,E){var B=c.split("/"),F="";for(var H of B)if(H){(F||le.isAbs(c))&&(F+="/"),F+=H;try{f.mkdir(F,E)}catch(j){if(j.errno!=20)throw j}}},mkdev(c,E,B){return typeof B>"u"&&(B=E,E=438),E|=8192,f.mknod(c,E,B)},symlink(c,E){if(!ce.resolve(c))throw new f.ErrnoError(44);var B=f.lookupPath(E,{parent:!0}),F=B.node;if(!F)throw new f.ErrnoError(44);var H=le.basename(E),j=f.mayCreate(F,H);if(j)throw new f.ErrnoError(j);if(!F.node_ops.symlink)throw new f.ErrnoError(63);return F.node_ops.symlink(F,H,c)},rename(c,E){var B=le.dirname(c),F=le.dirname(E),H=le.basename(c),j=le.basename(E),Z,y,x;if(Z=f.lookupPath(c,{parent:!0}),y=Z.node,Z=f.lookupPath(E,{parent:!0}),x=Z.node,!y||!x)throw new f.ErrnoError(44);if(y.mount!==x.mount)throw new f.ErrnoError(75);var P=f.lookupNode(y,H),q=ce.relative(c,F);if(q.charAt(0)!==".")throw new f.ErrnoError(28);if(q=ce.relative(E,B),q.charAt(0)!==".")throw new f.ErrnoError(55);var J;try{J=f.lookupNode(x,j)}catch{}if(P!==J){var ne=f.isDir(P.mode),ae=f.mayDelete(y,H,ne);if(ae)throw new f.ErrnoError(ae);if(ae=J?f.mayDelete(x,j,ne):f.mayCreate(x,j),ae)throw new f.ErrnoError(ae);if(!y.node_ops.rename)throw new f.ErrnoError(63);if(f.isMountpoint(P)||J&&f.isMountpoint(J))throw new f.ErrnoError(10);if(x!==y&&(ae=f.nodePermissions(y,"w"),ae))throw new f.ErrnoError(ae);f.hashRemoveNode(P);try{y.node_ops.rename(P,x,j),P.parent=x}catch(de){throw de}finally{f.hashAddNode(P)}}},rmdir(c){var E=f.lookupPath(c,{parent:!0}),B=E.node,F=le.basename(c),H=f.lookupNode(B,F),j=f.mayDelete(B,F,!0);if(j)throw new f.ErrnoError(j);if(!B.node_ops.rmdir)throw new f.ErrnoError(63);if(f.isMountpoint(H))throw new f.ErrnoError(10);B.node_ops.rmdir(B,F),f.destroyNode(H)},readdir(c){var E=f.lookupPath(c,{follow:!0}),B=E.node,F=f.checkOpExists(B.node_ops.readdir,54);return F(B)},unlink(c){var E=f.lookupPath(c,{parent:!0}),B=E.node;if(!B)throw new f.ErrnoError(44);var F=le.basename(c),H=f.lookupNode(B,F),j=f.mayDelete(B,F,!1);if(j)throw new f.ErrnoError(j);if(!B.node_ops.unlink)throw new f.ErrnoError(63);if(f.isMountpoint(H))throw new f.ErrnoError(10);B.node_ops.unlink(B,F),f.destroyNode(H)},readlink(c){var E=f.lookupPath(c),B=E.node;if(!B)throw new f.ErrnoError(44);if(!B.node_ops.readlink)throw new f.ErrnoError(28);return B.node_ops.readlink(B)},stat(c,E){var B=f.lookupPath(c,{follow:!E}),F=B.node,H=f.checkOpExists(F.node_ops.getattr,63);return H(F)},fstat(c){var E=f.getStreamChecked(c),B=E.node,F=E.stream_ops.getattr,H=F?E:B;return F??=B.node_ops.getattr,f.checkOpExists(F,63),F(H)},lstat(c){return f.stat(c,!0)},doChmod(c,E,B,F){f.doSetAttr(c,E,{mode:B&4095|E.mode&-4096,ctime:Date.now(),dontFollow:F})},chmod(c,E,B){var F;if(typeof c=="string"){var H=f.lookupPath(c,{follow:!B});F=H.node}else F=c;f.doChmod(null,F,E,B)},lchmod(c,E){f.chmod(c,E,!0)},fchmod(c,E){var B=f.getStreamChecked(c);f.doChmod(B,B.node,E,!1)},doChown(c,E,B){f.doSetAttr(c,E,{timestamp:Date.now(),dontFollow:B})},chown(c,E,B,F){var H;if(typeof c=="string"){var j=f.lookupPath(c,{follow:!F});H=j.node}else H=c;f.doChown(null,H,F)},lchown(c,E,B){f.chown(c,E,B,!0)},fchown(c,E,B){var F=f.getStreamChecked(c);f.doChown(F,F.node,!1)},doTruncate(c,E,B){if(f.isDir(E.mode))throw new f.ErrnoError(31);if(!f.isFile(E.mode))throw new f.ErrnoError(28);var F=f.nodePermissions(E,"w");if(F)throw new f.ErrnoError(F);f.doSetAttr(c,E,{size:B,timestamp:Date.now()})},truncate(c,E){if(E<0)throw new f.ErrnoError(28);var B;if(typeof c=="string"){var F=f.lookupPath(c,{follow:!0});B=F.node}else B=c;f.doTruncate(null,B,E)},ftruncate(c,E){var B=f.getStreamChecked(c);if(E<0||(B.flags&2097155)===0)throw new f.ErrnoError(28);f.doTruncate(B,B.node,E)},utime(c,E,B){var F=f.lookupPath(c,{follow:!0}),H=F.node,j=f.checkOpExists(H.node_ops.setattr,63);j(H,{atime:E,mtime:B})},open(c,E,B=438){if(c==="")throw new f.ErrnoError(44);E=typeof E=="string"?Oe(E):E,E&64?B=B&4095|32768:B=0;var F,H;if(typeof c=="object")F=c;else{H=c.endsWith("/");var j=f.lookupPath(c,{follow:!(E&131072),noent_okay:!0});F=j.node,c=j.path}var Z=!1;if(E&64)if(F){if(E&128)throw new f.ErrnoError(20)}else{if(H)throw new f.ErrnoError(31);F=f.mknod(c,B|511,0),Z=!0}if(!F)throw new f.ErrnoError(44);if(f.isChrdev(F.mode)&&(E&=-513),E&65536&&!f.isDir(F.mode))throw new f.ErrnoError(54);if(!Z){var y=f.mayOpen(F,E);if(y)throw new f.ErrnoError(y)}E&512&&!Z&&f.truncate(F,0),E&=-131713;var x=f.createStream({node:F,path:f.getPath(F),flags:E,seekable:!0,position:0,stream_ops:F.stream_ops,ungotten:[],error:!1});return x.stream_ops.open&&x.stream_ops.open(x),Z&&f.chmod(F,B&511),g.logReadFiles&&!(E&1)&&(c in f.readFiles||(f.readFiles[c]=1)),x},close(c){if(f.isClosed(c))throw new f.ErrnoError(8);c.getdents&&(c.getdents=null);try{c.stream_ops.close&&c.stream_ops.close(c)}catch(E){throw E}finally{f.closeStream(c.fd)}c.fd=null},isClosed(c){return c.fd===null},llseek(c,E,B){if(f.isClosed(c))throw new f.ErrnoError(8);if(!c.seekable||!c.stream_ops.llseek)throw new f.ErrnoError(70);if(B!=0&&B!=1&&B!=2)throw new f.ErrnoError(28);return c.position=c.stream_ops.llseek(c,E,B),c.ungotten=[],c.position},read(c,E,B,F,H){if(F<0||H<0)throw new f.ErrnoError(28);if(f.isClosed(c))throw new f.ErrnoError(8);if((c.flags&2097155)===1)throw new f.ErrnoError(8);if(f.isDir(c.node.mode))throw new f.ErrnoError(31);if(!c.stream_ops.read)throw new f.ErrnoError(28);var j=typeof H<"u";if(!j)H=c.position;else if(!c.seekable)throw new f.ErrnoError(70);var Z=c.stream_ops.read(c,E,B,F,H);return j||(c.position+=Z),Z},write(c,E,B,F,H,j){if(F<0||H<0)throw new f.ErrnoError(28);if(f.isClosed(c))throw new f.ErrnoError(8);if((c.flags&2097155)===0)throw new f.ErrnoError(8);if(f.isDir(c.node.mode))throw new f.ErrnoError(31);if(!c.stream_ops.write)throw new f.ErrnoError(28);c.seekable&&c.flags&1024&&f.llseek(c,0,2);var Z=typeof H<"u";if(!Z)H=c.position;else if(!c.seekable)throw new f.ErrnoError(70);var y=c.stream_ops.write(c,E,B,F,H,j);return Z||(c.position+=y),y},mmap(c,E,B,F,H){if((F&2)!==0&&(H&2)===0&&(c.flags&2097155)!==2)throw new f.ErrnoError(2);if((c.flags&2097155)===1)throw new f.ErrnoError(2);if(!c.stream_ops.mmap)throw new f.ErrnoError(43);if(!E)throw new f.ErrnoError(28);return c.stream_ops.mmap(c,E,B,F,H)},msync(c,E,B,F,H){return c.stream_ops.msync?c.stream_ops.msync(c,E,B,F,H):0},ioctl(c,E,B){if(!c.stream_ops.ioctl)throw new f.ErrnoError(59);return c.stream_ops.ioctl(c,E,B)},readFile(c,E={}){if(E.flags=E.flags||0,E.encoding=E.encoding||"binary",E.encoding!=="utf8"&&E.encoding!=="binary")throw new Error(`Invalid encoding type "${E.encoding}"`);var B,F=f.open(c,E.flags),H=f.stat(c),j=H.size,Z=new Uint8Array(j);return f.read(F,Z,0,j,0),E.encoding==="utf8"?B=_e(Z):E.encoding==="binary"&&(B=Z),f.close(F),B},writeFile(c,E,B={}){B.flags=B.flags||577;var F=f.open(c,B.flags,B.mode);if(typeof E=="string"){var H=new Uint8Array(be(E)+1),j=$e(E,H,0,H.length);f.write(F,H,0,j,void 0,B.canOwn)}else if(ArrayBuffer.isView(E))f.write(F,E,0,E.byteLength,void 0,B.canOwn);else throw new Error("Unsupported data type");f.close(F)},cwd:()=>f.currentPath,chdir(c){var E=f.lookupPath(c,{follow:!0});if(E.node===null)throw new f.ErrnoError(44);if(!f.isDir(E.node.mode))throw new f.ErrnoError(54);var B=f.nodePermissions(E.node,"x");if(B)throw new f.ErrnoError(B);f.currentPath=E.path},createDefaultDirectories(){f.mkdir("/tmp"),f.mkdir("/home"),f.mkdir("/home/web_user")},createDefaultDevices(){f.mkdir("/dev"),f.registerDevice(f.makedev(1,3),{read:()=>0,write:(F,H,j,Z,y)=>Z,llseek:()=>0}),f.mkdev("/dev/null",f.makedev(1,3)),we.register(f.makedev(5,0),we.default_tty_ops),we.register(f.makedev(6,0),we.default_tty1_ops),f.mkdev("/dev/tty",f.makedev(5,0)),f.mkdev("/dev/tty1",f.makedev(6,0));var c=new Uint8Array(1024),E=0,B=()=>(E===0&&(te(c),E=c.byteLength),c[--E]);f.createDevice("/dev","random",B),f.createDevice("/dev","urandom",B),f.mkdir("/dev/shm"),f.mkdir("/dev/shm/tmp")},createSpecialDirectories(){f.mkdir("/proc");var c=f.mkdir("/proc/self");f.mkdir("/proc/self/fd"),f.mount({mount(){var E=f.createNode(c,"fd",16895,73);return E.stream_ops={llseek:se.stream_ops.llseek},E.node_ops={lookup(B,F){var H=+F,j=f.getStreamChecked(H),Z={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>j.path},id:H+1};return Z.parent=Z,Z},readdir(){return Array.from(f.streams.entries()).filter(([B,F])=>F).map(([B,F])=>B.toString())}},E}},{},"/proc/self/fd")},createStandardStreams(c,E,B){c?f.createDevice("/dev","stdin",c):f.symlink("/dev/tty","/dev/stdin"),E?f.createDevice("/dev","stdout",null,E):f.symlink("/dev/tty","/dev/stdout"),B?f.createDevice("/dev","stderr",null,B):f.symlink("/dev/tty1","/dev/stderr"),f.open("/dev/stdin",0),f.open("/dev/stdout",1),f.open("/dev/stderr",1)},staticInit(){f.nameTable=new Array(4096),f.mount(se,{},"/"),f.createDefaultDirectories(),f.createDefaultDevices(),f.createSpecialDirectories(),f.filesystems={MEMFS:se}},init(c,E,B){f.initialized=!0,c??=g.stdin,E??=g.stdout,B??=g.stderr,f.createStandardStreams(c,E,B)},quit(){f.initialized=!1;for(var c of f.streams)c&&f.close(c)},findObject(c,E){var B=f.analyzePath(c,E);return B.exists?B.object:null},analyzePath(c,E){try{var B=f.lookupPath(c,{follow:!E});c=B.path}catch{}var F={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var B=f.lookupPath(c,{parent:!0});F.parentExists=!0,F.parentPath=B.path,F.parentObject=B.node,F.name=le.basename(c),B=f.lookupPath(c,{follow:!E}),F.exists=!0,F.path=B.path,F.object=B.node,F.name=B.node.name,F.isRoot=B.path==="/"}catch(H){F.error=H.errno}return F},createPath(c,E,B,F){c=typeof c=="string"?c:f.getPath(c);for(var H=E.split("/").reverse();H.length;){var j=H.pop();if(j){var Z=le.join2(c,j);try{f.mkdir(Z)}catch(y){if(y.errno!=20)throw y}c=Z}}return Z},createFile(c,E,B,F,H){var j=le.join2(typeof c=="string"?c:f.getPath(c),E),Z=Fe(F,H);return f.create(j,Z)},createDataFile(c,E,B,F,H,j){var Z=E;c&&(c=typeof c=="string"?c:f.getPath(c),Z=E?le.join2(c,E):c);var y=Fe(F,H),x=f.create(Z,y);if(B){if(typeof B=="string"){for(var P=new Array(B.length),q=0,J=B.length;q<J;++q)P[q]=B.charCodeAt(q);B=P}f.chmod(x,y|146);var ne=f.open(x,577);f.write(ne,B,0,B.length,0,j),f.close(ne),f.chmod(x,y)}},createDevice(c,E,B,F){var H=le.join2(typeof c=="string"?c:f.getPath(c),E),j=Fe(!!B,!!F);f.createDevice.major??=64;var Z=f.makedev(f.createDevice.major++,0);return f.registerDevice(Z,{open(y){y.seekable=!1},close(y){F?.buffer?.length&&F(10)},read(y,x,P,q,J){for(var ne=0,ae=0;ae<q;ae++){var de;try{de=B()}catch{throw new f.ErrnoError(29)}if(de===void 0&&ne===0)throw new f.ErrnoError(6);if(de==null)break;ne++,x[P+ae]=de}return ne&&(y.node.atime=Date.now()),ne},write(y,x,P,q,J){for(var ne=0;ne<q;ne++)try{F(x[P+ne])}catch{throw new f.ErrnoError(29)}return q&&(y.node.mtime=y.node.ctime=Date.now()),ne}}),f.mkdev(H,j,Z)},forceLoadFile(c){if(c.isDevice||c.isFolder||c.link||c.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");try{c.contents=t(c.url),c.usedBytes=c.contents.length}catch{throw new f.ErrnoError(29)}},createLazyFile(c,E,B,F,H){class j{lengthKnown=!1;chunks=[];get(ae){if(!(ae>this.length-1||ae<0)){var de=ae%this.chunkSize,Se=ae/this.chunkSize|0;return this.getter(Se)[de]}}setDataGetter(ae){this.getter=ae}cacheLength(){var ae=new XMLHttpRequest;if(ae.open("HEAD",B,!1),ae.send(null),!(ae.status>=200&&ae.status<300||ae.status===304))throw new Error("Couldn't load "+B+". Status: "+ae.status);var de=Number(ae.getResponseHeader("Content-length")),Se,Le=(Se=ae.getResponseHeader("Accept-Ranges"))&&Se==="bytes",xe=(Se=ae.getResponseHeader("Content-Encoding"))&&Se==="gzip",Ue=1024*1024;Le||(Ue=de);var Ne=(Pe,qe)=>{if(Pe>qe)throw new Error("invalid range ("+Pe+", "+qe+") or no bytes requested!");if(qe>de-1)throw new Error("only "+de+" bytes available! programmer error!");var je=new XMLHttpRequest;if(je.open("GET",B,!1),de!==Ue&&je.setRequestHeader("Range","bytes="+Pe+"-"+qe),je.responseType="arraybuffer",je.overrideMimeType&&je.overrideMimeType("text/plain; charset=x-user-defined"),je.send(null),!(je.status>=200&&je.status<300||je.status===304))throw new Error("Couldn't load "+B+". Status: "+je.status);return je.response!==void 0?new Uint8Array(je.response||[]):Re(je.responseText||"")},De=this;De.setDataGetter(Pe=>{var qe=Pe*Ue,je=(Pe+1)*Ue-1;if(je=Math.min(je,de-1),typeof De.chunks[Pe]>"u"&&(De.chunks[Pe]=Ne(qe,je)),typeof De.chunks[Pe]>"u")throw new Error("doXHR failed!");return De.chunks[Pe]}),(xe||!de)&&(Ue=de=1,de=this.getter(0).length,Ue=de,e("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=de,this._chunkSize=Ue,this.lengthKnown=!0}get length(){return this.lengthKnown||this.cacheLength(),this._length}get chunkSize(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}if(typeof XMLHttpRequest<"u"){throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var Z,y}else var y={isDevice:!1,url:B};var x=f.createFile(c,E,y,F,H);y.contents?x.contents=y.contents:y.url&&(x.contents=null,x.url=y.url),Object.defineProperties(x,{usedBytes:{get:function(){return this.contents.length}}});var P={},q=Object.keys(x.stream_ops);q.forEach(ne=>{var ae=x.stream_ops[ne];P[ne]=(...de)=>(f.forceLoadFile(x),ae(...de))});function J(ne,ae,de,Se,Le){var xe=ne.node.contents;if(Le>=xe.length)return 0;var Ue=Math.min(xe.length-Le,Se);if(xe.slice)for(var Ne=0;Ne<Ue;Ne++)ae[de+Ne]=xe[Le+Ne];else for(var Ne=0;Ne<Ue;Ne++)ae[de+Ne]=xe.get(Le+Ne);return Ue}return P.read=(ne,ae,de,Se,Le)=>(f.forceLoadFile(x),J(ne,ae,de,Se,Le)),P.mmap=(ne,ae,de,Se,Le)=>{f.forceLoadFile(x);var xe=Te();if(!xe)throw new f.ErrnoError(48);return J(ne,w,xe,ae,de),{ptr:xe,allocated:!0}},x.stream_ops=P,x}},Ye=(c,E)=>c?_e(m,c,E):"",Be={DEFAULT_POLLMASK:5,calculateAt(c,E,B){if(le.isAbs(E))return E;var F;if(c===-100)F=f.cwd();else{var H=Be.getStreamFromFD(c);F=H.path}if(E.length==0){if(!B)throw new f.ErrnoError(44);return F}return F+"/"+E},writeStat(c,E){_[c>>2]=E.dev,_[c+4>>2]=E.mode,T[c+8>>2]=E.nlink,_[c+12>>2]=E.uid,_[c+16>>2]=E.gid,_[c+20>>2]=E.rdev,R[c+24>>3]=BigInt(E.size),_[c+32>>2]=4096,_[c+36>>2]=E.blocks;var B=E.atime.getTime(),F=E.mtime.getTime(),H=E.ctime.getTime();return R[c+40>>3]=BigInt(Math.floor(B/1e3)),T[c+48>>2]=B%1e3*1e3*1e3,R[c+56>>3]=BigInt(Math.floor(F/1e3)),T[c+64>>2]=F%1e3*1e3*1e3,R[c+72>>3]=BigInt(Math.floor(H/1e3)),T[c+80>>2]=H%1e3*1e3*1e3,R[c+88>>3]=BigInt(E.ino),0},writeStatFs(c,E){_[c+4>>2]=E.bsize,_[c+40>>2]=E.bsize,_[c+8>>2]=E.blocks,_[c+12>>2]=E.bfree,_[c+16>>2]=E.bavail,_[c+20>>2]=E.files,_[c+24>>2]=E.ffree,_[c+28>>2]=E.fsid,_[c+44>>2]=E.flags,_[c+36>>2]=E.namelen},doMsync(c,E,B,F,H){if(!f.isFile(E.node.mode))throw new f.ErrnoError(43);if(F&2)return 0;var j=m.slice(c,c+B);f.msync(E,j,H,B,F)},getStreamFromFD(c){var E=f.getStreamChecked(c);return E},varargs:void 0,getStr(c){var E=Ye(c);return E}};function tt(c,E,B){Be.varargs=B;try{var F=Be.getStreamFromFD(c);switch(E){case 0:{var H=U();if(H<0)return-28;for(;f.streams[H];)H++;var j;return j=f.dupStream(F,H),j.fd}case 1:case 2:return 0;case 3:return F.flags;case 4:{var H=U();return F.flags|=H,0}case 12:{var H=pe(),Z=0;return d[H+Z>>1]=2,0}case 13:case 14:return 0}return-28}catch(y){if(typeof f>"u"||y.name!=="ErrnoError")throw y;return-y.errno}}function dt(c,E){try{return Be.writeStat(E,f.fstat(c))}catch(B){if(typeof f>"u"||B.name!=="ErrnoError")throw B;return-B.errno}}function ht(c,E,B){Be.varargs=B;try{var F=Be.getStreamFromFD(c);switch(E){case 21509:return F.tty?0:-59;case 21505:{if(!F.tty)return-59;if(F.tty.ops.ioctl_tcgets){var H=F.tty.ops.ioctl_tcgets(F),j=pe();_[j>>2]=H.c_iflag||0,_[j+4>>2]=H.c_oflag||0,_[j+8>>2]=H.c_cflag||0,_[j+12>>2]=H.c_lflag||0;for(var Z=0;Z<32;Z++)w[j+Z+17]=H.c_cc[Z]||0;return 0}return 0}case 21510:case 21511:case 21512:return F.tty?0:-59;case 21506:case 21507:case 21508:{if(!F.tty)return-59;if(F.tty.ops.ioctl_tcsets){for(var j=pe(),y=_[j>>2],x=_[j+4>>2],P=_[j+8>>2],q=_[j+12>>2],J=[],Z=0;Z<32;Z++)J.push(w[j+Z+17]);return F.tty.ops.ioctl_tcsets(F.tty,E,{c_iflag:y,c_oflag:x,c_cflag:P,c_lflag:q,c_cc:J})}return 0}case 21519:{if(!F.tty)return-59;var j=pe();return _[j>>2]=0,0}case 21520:return F.tty?-28:-59;case 21531:{var j=pe();return f.ioctl(F,E,j)}case 21523:{if(!F.tty)return-59;if(F.tty.ops.ioctl_tiocgwinsz){var ne=F.tty.ops.ioctl_tiocgwinsz(F.tty),j=pe();d[j>>1]=ne[0],d[j+2>>1]=ne[1]}return 0}case 21524:return F.tty?0:-59;case 21515:return F.tty?0:-59;default:return-28}}catch(ae){if(typeof f>"u"||ae.name!=="ErrnoError")throw ae;return-ae.errno}}function vt(c,E,B,F){Be.varargs=F;try{E=Be.getStr(E),E=Be.calculateAt(c,E);var H=F?U():0;return f.open(E,B,H).fd}catch(j){if(typeof f>"u"||j.name!=="ErrnoError")throw j;return-j.errno}}var jt=()=>G(""),It=0,wt=()=>{ze=!1,It=0},ft={},Lt=c=>{if(c instanceof ge||c=="unwind")return M;s(1,c)},At=()=>ze||It>0,Ft=c=>{M=c,At()||(g.onExit?.(c),p=!0),s(c,new ge(c))},Nt=(c,E)=>{M=c,Ft(c)},Yt=Nt,dn=()=>{if(!At())try{Yt(M)}catch(c){Lt(c)}},hn=c=>{if(!p)try{c(),dn()}catch(E){Lt(E)}},fn=()=>performance.now(),rt=(c,E)=>{if(ft[c]&&(clearTimeout(ft[c].id),delete ft[c]),!E)return 0;var B=setTimeout(()=>{delete ft[c],hn(()=>Cn(c,fn()))},E);return ft[c]={id:B,timeout_ms:E},0},at=(c,E,B)=>$e(c,m,E,B),Kt=(c,E,B,F)=>{var H=new Date().getFullYear(),j=new Date(H,0,1),Z=new Date(H,6,1),y=j.getTimezoneOffset(),x=Z.getTimezoneOffset(),P=Math.max(y,x);T[c>>2]=P*60,_[E>>2]=+(y!=x);var q=ae=>{var de=ae>=0?"-":"+",Se=Math.abs(ae),Le=String(Math.floor(Se/60)).padStart(2,"0"),xe=String(Se%60).padStart(2,"0");return`UTC${de}${Le}${xe}`},J=q(y),ne=q(x);x<y?(at(J,B,17),at(ne,F,17)):(at(J,F,17),at(ne,B,17))},Jt=()=>2147483648,Zt=(c,E)=>Math.ceil(c/E)*E,Xt=c=>{var E=u.buffer,B=(c-E.byteLength+65535)/65536|0;try{return u.grow(B),$(),1}catch{}},Pt=c=>{var E=m.length;c>>>=0;var B=Jt();if(c>B)return!1;for(var F=1;F<=4;F*=2){var H=E*(1+.2/F);H=Math.min(H,c+100663296);var j=Math.min(B,Zt(Math.max(c,H),65536)),Z=Xt(j);if(Z)return!0}return!1},Ut={},bt=()=>A||"./this.program",Et=()=>{if(!Et.strings){var c=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",E={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:c,_:bt()};for(var B in Ut)Ut[B]===void 0?delete E[B]:E[B]=Ut[B];var F=[];for(var B in E)F.push(`${B}=${E[B]}`);Et.strings=F}return Et.strings},_t=(c,E)=>{var B=0,F=0;for(var H of Et()){var j=E+B;T[c+F>>2]=j,B+=at(H,j,1/0)+1,F+=4}return 0},pn=(c,E)=>{var B=Et();T[c>>2]=B.length;var F=0;for(var H of B)F+=be(H)+1;return T[E>>2]=F,0};function gn(c){try{var E=Be.getStreamFromFD(c);return f.close(E),0}catch(B){if(typeof f>"u"||B.name!=="ErrnoError")throw B;return B.errno}}function mn(c,E){try{var B=0,F=0,H=0,j=Be.getStreamFromFD(c),Z=j.tty?2:f.isDir(j.mode)?3:f.isLink(j.mode)?7:4;return w[E]=Z,d[E+2>>1]=H,R[E+8>>3]=BigInt(B),R[E+16>>3]=BigInt(F),0}catch(y){if(typeof f>"u"||y.name!=="ErrnoError")throw y;return y.errno}}var vn=(c,E,B,F)=>{for(var H=0,j=0;j<B;j++){var Z=T[E>>2],y=T[E+4>>2];E+=8;var x=f.read(c,w,Z,y,F);if(x<0)return-1;if(H+=x,x<y)break}return H};function _n(c,E,B,F){try{var H=Be.getStreamFromFD(c),j=vn(H,E,B);return T[F>>2]=j,0}catch(Z){if(typeof f>"u"||Z.name!=="ErrnoError")throw Z;return Z.errno}}var yn=9007199254740992,Ht=-9007199254740992,wn=c=>c<Ht||c>yn?NaN:Number(c);function Ct(c,E,B,F){E=wn(E);try{if(isNaN(E))return 61;var H=Be.getStreamFromFD(c);return f.llseek(H,E,B),R[F>>3]=BigInt(H.position),H.getdents&&E===0&&B===0&&(H.getdents=null),0}catch(j){if(typeof f>"u"||j.name!=="ErrnoError")throw j;return j.errno}}var An=(c,E,B,F)=>{for(var H=0,j=0;j<B;j++){var Z=T[E>>2],y=T[E+4>>2];E+=8;var x=f.write(c,w,Z,y,F);if(x<0)return-1;if(H+=x,x<y)break}return H};function Qt(c,E,B,F){try{var H=Be.getStreamFromFD(c),j=An(H,E,B);return T[F>>2]=j,0}catch(Z){if(typeof f>"u"||Z.name!=="ErrnoError")throw Z;return Z.errno}}var en=c=>Sn(c),bn=c=>{var E=be(c)+1,B=en(E);return at(c,B,E),B};f.createPreloadedFile=ke,f.staticInit(),se.doesNotExistError=new f.ErrnoError(44),se.doesNotExistError.stack="<generic error, no stack>",g.noExitRuntime&&(ze=g.noExitRuntime),g.preloadPlugins&&(Ae=g.preloadPlugins),g.print&&(e=g.print),g.printErr&&(r=g.printErr),g.wasmBinary&&(a=g.wasmBinary),g.arguments&&(S=g.arguments),g.thisProgram&&(A=g.thisProgram),g.FS=f;var lt={f:tt,i:dt,b:ht,g:vt,r:jt,k:wt,l:rt,m:Kt,n:Pt,q:_t,h:pn,a:Yt,c:gn,p:mn,e:_n,o:Ct,d:Qt,j:Ft},ct=await ue();ct.t;var En=g._main=ct.u,Cn=ct.v,Sn=ct.w;function kt(c=[]){var E=En;c.unshift(A);var B=c.length,F=en((B+1)*4),H=F;c.forEach(Z=>{T[H>>2]=bn(Z),H+=4}),T[H>>2]=0;try{var j=E(B,F);return Nt(j,!0),j}catch(Z){return Lt(Z)}}function Wt(c=S){if(l>0){C=Wt;return}if(k(),l>0){C=Wt;return}function E(){if(g.calledRun=!0,!p){v(),I(g),g.onRuntimeInitialized?.();var B=g.noInitialRun||!1;B||kt(c),b()}}g.setStatus?(g.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>g.setStatus(""),1),E()},1)):E()}function L(){if(g.preInit)for(typeof g.preInit=="function"&&(g.preInit=[g.preInit]);g.preInit.length>0;)g.preInit.shift()()}return L(),Wt(),X=D,X},Jn=!1,qt=!1,ar,br,kn,Er=[],Mn=[],Dn=[],ai=[],li=[],ci=[],Co=/([\w\.]+)[\w\.\:~]*\(([0-9]+)\)/gi;function Cr(ee,X){if(kn&&kn(ee,X),X=="stderr"&&(ee.startsWith("error: ")||ee.startsWith("ERROR: ")||ee.startsWith("warning: "))){var g="error";ee.startsWith("warning: ")&&(g="warning");var I=ee.matchAll(Co);for(var z of I){var D=parseInt(z[2]);Er.push([g,z[1],D,ee])}}}function un(ee){Cr(ee,"info")}function Sr(ee){Cr(ee,"stdout")}function Tr(ee){Cr(ee,"stderr")}function So(ee){kn=ee}function To(ee){br=ee,Jn?qt=!0:(Jn=!0,Rr())}function ui(){return Er}function Ro(){return Mn}function Wr(){return Dn}function lr(ee){ai=ee}function cr(ee){ci=ee}function ur(ee){li=ee}function Rr(){typeof ar<"u"&&clearTimeout(ar),ar=setTimeout($o,500)}function $o(){kn&&kn(null,null),Er=[],Mn=[],Dn=[];var ee=[];for(const X of Object.keys(ut()))X.endsWith(".asm")&&ee.push(X);di(ee,{})}function di(ee,X){var g=ee.pop(),I=[g,"-o","output.o","-Wall"].concat(ai);un("Running: rgbasm "+I.join(" ")),Ao({arguments:I,preRun:function(z){var D=z.FS;for(const[S,A]of Object.entries(ut()))D.writeFile(S,A)},print:Sr,printErr:Tr}).then(function(z){if(qt){an();return}var D=z.FS;try{var S=D.readFile("output.o")}catch{an();return}X[g]=S,ee.length>0?di(ee,X):Mo(X)})}function Mo(ee){var X=["-o","output.gb","--map","output.map"].concat(ci);for(var g in ee)X.push(g+".o");un("Running: rgblink "+X.join(" ")),bo({arguments:X,preRun:function(I){var z=I.FS;for(var D in ee)z.writeFile(D+".o",ee[D])},print:Sr,printErr:Tr}).then(function(I){if(qt){an();return}var z=I.FS;try{var D=z.readFile("output.gb")}catch{an();return}try{var S=z.readFile("output.map",{encoding:"utf8"})}catch{an();return}Do(D,S)})}function Do(ee,X){var g=["-v","output.gb","-p","0xff"].concat(li);un("Running: rgbfix "+g.join(" ")),Eo({arguments:g,preRun:function(I){var z=I.FS;z.writeFile("output.gb",ee)},print:Sr,printErr:Tr}).then(function(I){var z=I.FS;try{var D=z.readFile("output.gb")}catch{an();return}Lo(D,X)})}function an(){un("Build failed"),qt?(qt=!1,Rr()):(Jn=!1,br())}function Lo(ee,X){if(qt)qt=!1,Rr();else{Jn=!1;var g=256,I={},z=/^\s*\$([0-9a-f]+) = ([\w\.]+)/,D=/^\s*(\w+) bank #(\d+)/,S=/^\s*SECTION: \$([0-9a-f]+)-\$([0-9a-f]+)/,A=/^\s*SLACK: \$([0-9a-f]+) bytes/,s="",h=0;for(var o of X.split(`
`)){var n;if(n=z.exec(o)){var i=parseInt(n[1],16),t=n[2];if(t.startsWith("__SEC_")){t=t.substr(6);var e=t.substr(t.indexOf("_")+1);e=e.substr(e.indexOf("_")+1);var r=parseInt(t.split("_")[1],16);i=i&16383|h<<14,I[i]=[e,r]}else t=="emustart"||t=="emuStart"||t=="emu_start"?g=i:i<32768?(i=i&16383|h<<14,Mn[i]=t):Dn[i]=t}else if(n=S.exec(o)){var a=parseInt(n[1],16),u=parseInt(n[2],16)+1;a<32768?(a=a&16383|h<<14,u=u&16383|h<<14,Mn[a]=null,Mn[u]=null):(Dn[a]=null,Dn[u]=null)}else if(n=D.exec(o))s=n[1],h=parseInt(n[2]);else if(n=A.exec(o)){var p=parseInt(n[1],16),M=16384;s.startsWith("WRAM")?M=4096:s.startsWith("HRAM")&&(M=127),un("Space left: "+s+"["+h+"]: "+p+"  ("+(p/M*100).toFixed(1)+"%)")}}un("Build done"),br(ee,g,I)}}var ko=async function(ee={}){var X,g=ee,I,z,D=new Promise((Ae,Ee)=>{I=Ae,z=Ee}),S=(Ae,Ee)=>{throw Ee},A=import.meta.url,s="";function h(Ae){return g.locateFile?g.locateFile(Ae,s):s+Ae}var o;{try{s=new URL(".",A).href}catch{}o=async Ae=>{var Ee=await fetch(Ae,{credentials:"same-origin"});if(Ee.ok)return Ee.arrayBuffer();throw new Error(Ee.status+" : "+Ee.url)}}var n=console.log.bind(console),i=console.error.bind(console),t,e,r=!1,a,u,p,M,w;function m(){var Ae=e.buffer;g.HEAP8=new Int8Array(Ae),a=new Uint8Array(Ae),u=new Int32Array(Ae),p=new Uint32Array(Ae),w=new Float64Array(Ae),M=new BigInt64Array(Ae),new BigUint64Array(Ae)}function d(){if(g.preRun)for(typeof g.preRun=="function"&&(g.preRun=[g.preRun]);g.preRun.length;)ge(g.preRun.shift());re(ue)}function _(){se.h()}function T(){if(g.postRun)for(typeof g.postRun=="function"&&(g.postRun=[g.postRun]);g.postRun.length;)ie(g.postRun.shift());re(Q)}var R=0,$=null;function k(Ae){R++,g.monitorRunDependencies?.(R)}function v(Ae){if(R--,g.monitorRunDependencies?.(R),R==0&&$){var Ee=$;$=null,Ee()}}function b(Ae){g.onAbort?.(Ae),Ae="Aborted("+Ae+")",i(Ae),r=!0,Ae+=". Build with -sASSERTIONS for more info.";var Ee=new WebAssembly.RuntimeError(Ae);throw z(Ee),Ee}var l;function C(){return g.locateFile?h("binjgb.wasm"):new URL(""+new URL("binjgb-mTIQAJBc.wasm",import.meta.url).href,import.meta.url).href}function O(Ae){if(Ae==l&&t)return new Uint8Array(t);throw"both async and sync fetching of the wasm failed"}async function N(Ae){if(!t)try{var Ee=await o(Ae);return new Uint8Array(Ee)}catch{}return O(Ae)}async function G(Ae,Ee){try{var ke=await N(Ae),Oe=await WebAssembly.instantiate(ke,Ee);return Oe}catch(Fe){i(`failed to asynchronously prepare wasm: ${Fe}`),b(Fe)}}async function W(Ae,Ee,ke){if(!Ae&&typeof WebAssembly.instantiateStreaming=="function")try{var Oe=fetch(Ee,{credentials:"same-origin"}),Fe=await WebAssembly.instantiateStreaming(Oe,ke);return Fe}catch(f){i(`wasm streaming compile failed: ${f}`),i("falling back to ArrayBuffer instantiation")}return G(Ee,ke)}function K(){return{a:Te}}async function V(){function Ae(f,Ye){return se=f.exports,e=se.g,m(),v(),se}k();function Ee(f){return Ae(f.instance)}var ke=K();if(g.instantiateWasm)return new Promise((f,Ye)=>{g.instantiateWasm(ke,(Be,tt)=>{f(Ae(Be))})});l??=C();try{var Oe=await W(t,l,ke),Fe=Ee(Oe);return Fe}catch(f){return z(f),Promise.reject(f)}}class Y{name="ExitStatus";constructor(Ee){this.message=`Program terminated with exit(${Ee})`,this.status=Ee}}var re=Ae=>{for(;Ae.length>0;)Ae.shift()(g)},Q=[],ie=Ae=>Q.push(Ae),ue=[],ge=Ae=>ue.push(Ae),me=!0,ve=[],Ce=(Ae,Ee)=>{ve.length=0;for(var ke;ke=a[Ae++];){var Oe=ke!=105;Oe&=ke!=112,Ee+=Oe&&Ee%8?4:0,ve.push(ke==112?p[Ee>>2]:ke==106?M[Ee>>3]:ke==105?u[Ee>>2]:w[Ee>>3]),Ee+=Oe?8:4}return ve},Me=(Ae,Ee,ke)=>{var Oe=Ce(Ee,ke);return we[Ae](...Oe)},Ie=(Ae,Ee,ke)=>Me(Ae,Ee,ke),ze=Ae=>{b("OOM")},U=Ae=>{a.length,ze()},pe=0,le=()=>me||pe>0,oe=Ae=>{le()||(g.onExit?.(Ae),r=!0),S(Ae,new Y(Ae))},te=(Ae,Ee)=>{oe(Ae)},ce=te,ye=Ae=>52;function _e(Ae,Ee,ke,Oe){return 70}var fe=[null,[],[]],be=typeof TextDecoder<"u"?new TextDecoder:void 0,$e=(Ae,Ee=0,ke=NaN)=>{for(var Oe=Ee+ke,Fe=Ee;Ae[Fe]&&!(Fe>=Oe);)++Fe;if(Fe-Ee>16&&Ae.buffer&&be)return be.decode(Ae.subarray(Ee,Fe));for(var f="";Ee<Fe;){var Ye=Ae[Ee++];if(!(Ye&128)){f+=String.fromCharCode(Ye);continue}var Be=Ae[Ee++]&63;if((Ye&224)==192){f+=String.fromCharCode((Ye&31)<<6|Be);continue}var tt=Ae[Ee++]&63;if((Ye&240)==224?Ye=(Ye&15)<<12|Be<<6|tt:Ye=(Ye&7)<<18|Be<<12|tt<<6|Ae[Ee++]&63,Ye<65536)f+=String.fromCharCode(Ye);else{var dt=Ye-65536;f+=String.fromCharCode(55296|dt>>10,56320|dt&1023)}}return f},Re=(Ae,Ee)=>{var ke=fe[Ae];Ee===0||Ee===10?((Ae===1?n:i)($e(ke)),ke.length=0):ke.push(Ee)},he=(Ae,Ee,ke,Oe)=>{for(var Fe=0,f=0;f<ke;f++){var Ye=p[Ee>>2],Be=p[Ee+4>>2];Ee+=8;for(var tt=0;tt<Be;tt++)Re(Ae,a[Ye+tt]);Fe+=Be}return p[Oe>>2]=Fe,0};g.noExitRuntime&&(me=g.noExitRuntime),g.print&&(n=g.print),g.printErr&&(i=g.printErr),g.wasmBinary&&(t=g.wasmBinary),g.arguments&&g.arguments,g.thisProgram&&g.thisProgram;var we={13560:Ae=>{emulator.serialCallback(Ae)}},Te={f:Ie,c:U,b:ce,e:ye,d:_e,a:he},se=await V();se.h,g._malloc=se.i,g._file_data_delete=se.j,g._free=se.k,g._emulator_set_builtin_palette=se.l,g._emulator_was_ext_ram_updated=se.m,g._emulator_read_ext_ram=se.n,g._emulator_write_ext_ram=se.o,g._emulator_delete=se.p,g._emulator_get_PC=se.q,g._emulator_get_A=se.r,g._emulator_get_BC=se.s,g._emulator_get_DE=se.t,g._emulator_get_HL=se.u,g._emulator_get_F=se.v,g._emulator_get_SP=se.w,g._emulator_set_PC=se.x,g._emulator_get_wram_ptr=se.y,g._emulator_get_hram_ptr=se.z,g._emulator_read_mem=se.A,g._emulator_write_mem=se.B,g._emulator_set_breakpoint=se.C,g._emulator_clear_breakpoints=se.D,g._emulator_render_vram=se.E,g._emulator_render_background=se.F,g._set_audio_channel_mute=se.G,g._joypad_new=se.H,g._joypad_delete=se.I,g._rewind_append=se.J,g._rewind_delete=se.K,g._emulator_new_simple=se.L,g._emulator_get_ticks_f64=se.M,g._emulator_run_until_f64=se.N,g._rewind_get_newest_ticks_f64=se.O,g._rewind_get_oldest_ticks_f64=se.P,g._emulator_set_default_joypad_callback=se.Q,g._emulator_set_bw_palette_simple=se.R,g._rewind_new_simple=se.S,g._rewind_begin=se.T,g._emulator_set_rewind_joypad_callback=se.U,g._rewind_to_ticks_wrapper=se.V,g._rewind_end=se.W,g._set_joyp_up=se.X,g._set_joyp_down=se.Y,g._set_joyp_left=se.Z,g._set_joyp_right=se._,g._set_joyp_B=se.$,g._set_joyp_A=se.aa,g._set_joyp_start=se.ba,g._set_joyp_select=se.ca,g._get_frame_buffer_ptr=se.da,g._get_frame_buffer_size=se.ea,g._get_sgb_frame_buffer_ptr=se.fa,g._get_sgb_frame_buffer_size=se.ga,g._get_audio_buffer_ptr=se.ha,g._get_audio_buffer_capacity=se.ia,g._ext_ram_file_data_new=se.ja,g._get_file_data_ptr=se.ka,g._get_file_data_size=se.la,g._set_log_apu_writes=se.ma,g._get_apu_log_data_size=se.na,g._get_apu_log_data_ptr=se.oa,g._reset_apu_log=se.pa;function We(){if(R>0){$=We;return}if(d(),R>0){$=We;return}function Ae(){g.calledRun=!0,!r&&(_(),I(g),g.onRuntimeInitialized?.(),T())}g.setStatus?(g.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>g.setStatus(""),1),Ae()},1)):Ae()}function Ge(){if(g.preInit)for(typeof g.preInit=="function"&&(g.preInit=[g.preInit]);g.preInit.length>0;)g.preInit.shift()()}return Ge(),We(),X=D,X};const He=await ko();var Ve,dr=0,Bn,pr,ot,sn,gr=null,zn=2048;function hi(ee,X){nt()&&$r(),typeof ot>"u"&&(ot=new AudioContext);var g=(X.length-1|16383)+1;g<32768&&(g=32768);var I=He._malloc(g);dr=g;const z=He.HEAP8.subarray(I,I+dr);z.fill(0),z.set(X),Ve=He._emulator_new_simple(I,dr,ot.sampleRate,zn),He._emulator_set_bw_palette_simple(Ve,0,4290965700,4289247578,4285423646,4278197037),He._emulator_set_bw_palette_simple(Ve,1,4290965700,4289247578,4285423646,4278197037),He._emulator_set_bw_palette_simple(Ve,2,4290965700,4289247578,4285423646,4278197037),He._emulator_set_default_joypad_callback(Ve,0),ee&&(Bn=ee.getContext("2d"),pr=Bn.createImageData(ee.width,ee.height)),ot.resume(),sn=ot.currentTime}function $r(){nt()&&(He._emulator_delete(Ve),Ve=void 0)}function nt(){return typeof Ve<"u"}function fi(ee){if(nt()){var X=He._emulator_get_ticks_f64(Ve);for(ee=="single"?X+=1:ee=="frame"&&(X+=70224);;){var g=He._emulator_run_until_f64(Ve,X);if(g&2&&xo(),g&8||g&16)return!0;if(g!=2&&ee!="run")return!1;if(ee=="run"&&g&4)if(sn<ot.currentTime+.1)X+=70224;else return!1}}}function pi(){if(nt()){var ee=new Uint8Array(He.HEAP8.buffer,He._get_frame_buffer_ptr(Ve),He._get_frame_buffer_size(Ve));pr.data.set(ee),Bn.putImageData(pr,0,0)}}function gi(ee){if(nt()){var X=ee.getContext("2d"),g=Bn.createImageData(256,256),I=He._malloc(4*256*256);He._emulator_render_vram(Ve,I);var z=new Uint8Array(He.HEAP8.buffer,I,4*256*256);g.data.set(z),X.putImageData(g,0,0),He._free(I)}}function mr(ee,X){if(nt()){var g=ee.getContext("2d"),I=Bn.createImageData(256,256),z=He._malloc(4*256*256);He._emulator_render_background(Ve,z,X);var D=new Uint8Array(He.HEAP8.buffer,z,4*256*256);I.data.set(D),g.putImageData(I,0,0),He._free(z)}}function mi(){if(nt()){var ee=He._emulator_get_wram_ptr(Ve);return new Uint8Array(He.HEAP8.buffer,ee,32768)}}function vi(){if(nt()){var ee=He._emulator_get_hram_ptr(Ve);return new Uint8Array(He.HEAP8.buffer,ee,127)}}function _i(){return He._emulator_get_PC(Ve)}function yi(ee){He._emulator_set_PC(Ve,ee)}function wi(){return He._emulator_get_SP(Ve)}function Ai(){return He._emulator_get_A(Ve)}function bi(){return He._emulator_get_BC(Ve)}function Ei(){return He._emulator_get_DE(Ve)}function Ci(){return He._emulator_get_HL(Ve)}function Si(){var ee=He._emulator_get_F(Ve),X="";return ee&128&&(X+="Z "),ee&16&&(X+="C "),ee&32&&(X+="H "),ee&64&&(X+="N "),X}function Ti(ee){return nt()?He._emulator_read_mem(Ve,ee):255}function Bo(ee,X){if(nt())return He._emulator_write_mem(Ve,ee,X)}function Ri(ee){nt()&&He._emulator_set_breakpoint(Ve,ee)}function $i(){nt()&&He._emulator_clear_breakpoints(Ve)}function $t(ee,X){nt()&&(ee=="right"&&He._set_joyp_right(Ve,X),ee=="left"&&He._set_joyp_left(Ve,X),ee=="up"&&He._set_joyp_up(Ve,X),ee=="down"&&He._set_joyp_down(Ve,X),ee=="a"&&He._set_joyp_A(Ve,X),ee=="b"&&He._set_joyp_B(Ve,X),ee=="select"&&He._set_joyp_select(Ve,X),ee=="start"&&He._set_joyp_start(Ve,X))}function Mi(ee){gr=ee}function Oo(ee){gr&&gr(ee)}function xo(){sn<ot.currentTime&&(sn=ot.currentTime);var ee=new Uint8Array(He.HEAP8.buffer,He._get_audio_buffer_ptr(Ve),He._get_audio_buffer_capacity(Ve));const X=.5,g=ot.createBuffer(2,zn,ot.sampleRate),I=g.getChannelData(0),z=g.getChannelData(1);for(let A=0;A<zn;A++)I[A]=ee[2*A]*X/255,z[A]=ee[2*A+1]*X/255;const D=ot.createBufferSource();D.buffer=g,D.connect(ot.destination),D.start(sn);const S=zn/ot.sampleRate;sn+=S}const Io=Object.freeze(Object.defineProperty({__proto__:null,clearBreakpoints:$i,destroy:$r,getA:Ai,getBC:bi,getDE:Ei,getFlags:Si,getHL:Ci,getHRam:vi,getPC:_i,getSP:wi,getWRam:mi,init:hi,isAvailable:nt,readMem:Ti,renderBackground:mr,renderScreen:pi,renderVRam:gi,serialCallback:Oo,setBreakpoint:Ri,setKeyPad:$t,setPC:yi,setSerialCallback:Mi,step:fi,writeMem:Bo},Symbol.toStringTag,{value:"Module"}));globalThis.emulator=Io;var Di,Vt,ln={},Dt={},et="";function Fo(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches}function No(ee){var X=document.createElement("div");return X.innerText=ee,X.innerHTML}So(function(ee,X){var g=document.getElementById("output");if(ee==null&&X==null){g.innerHTML="";return}g.innerHTML+='<span class="'+X+'">'+No(ee)+`</span>
`,g.scrollTop=g.scrollHeight});const Ln=[],zr=256;Mi(function(ee){var X=("00"+ee.toString(16)).slice(-2);document.getElementById("serial_log").innerText="$"+X,Ln.unshift(X),Ln.length>zr&&(Ln.length=zr)});function Gn(){To(function(ee,X,g){if(_r(),xt(),Po(),!(typeof ee>"u")){Vt=ee,Di=X,ln=g;for(var I in ln){var[z,D]=ln[I];typeof Dt[z]>"u"&&(Dt[z]={}),typeof Dt[z][D]>"u"&&(Dt[z][D]=[]),Dt[z][D].push(I)}Gt()}})}function Po(){$r(),ln={},Dt={},Vt=void 0,Vn(null,null)}function Li(ee){typeof Vt>"u"||(hi(document.getElementById("emulator_screen_canvas"),Vt),yi(Di),Dr(ee),Mr())}function $n(ee){if(!nt())return Li(ee=="single"||ee=="frame"),!1;var X=fi(ee);return Dr(ee=="single"||ee=="frame"),X}function Mr(){$i();var ee=Qr();for(var X of ee){var[g,I,z]=X;if(X[2]=!1,!(typeof Dt[g]>"u"||typeof Dt[g][I]>"u")){X[2]=!0;for(var D of Dt[g][I])Ri(D)}}}function Gr(ee,X){ee=="ArrowRight"&&$t("right",X),ee=="ArrowLeft"&&$t("left",X),ee=="ArrowUp"&&$t("up",X),ee=="ArrowDown"&&$t("down",X),ee=="KeyS"&&$t("a",X),ee=="KeyA"&&$t("b",X),ee=="ShiftRight"&&$t("select",X),ee=="Enter"&&$t("start",X),ee=="Escape"&&(document.getElementById("cpu_run_check").checked=!1,document.getElementById("cpu_run_check").onclick())}function rn(ee,X){return"$"+("0000"+ee.toString(16)).slice(-X)}function Dr(ee){pi();var X=_i();document.getElementById("cpu_pc").innerHTML=rn(X,4),document.getElementById("cpu_sp").innerHTML=rn(wi(),4),document.getElementById("cpu_a").innerHTML=rn(Ai(),2),document.getElementById("cpu_bc").innerHTML=rn(bi(),4),document.getElementById("cpu_de").innerHTML=rn(Ei(),4),document.getElementById("cpu_hl").innerHTML=rn(Ci(),4),document.getElementById("cpu_flags").innerHTML=Si();var g=ln[X];typeof g>"u"&&(g=ln[X-1]),typeof g<"u"?Vn(g[0],g[1],ee):Vn(null,null),qn(),Gt()}function qn(){var ee=document.getElementById("emulator_vram_canvas");ee.style.display==""&&(et=="vram"&&gi(ee),et=="bg0"&&mr(ee,0),et=="bg1"&&mr(ee,1))}function Gt(){var ee=document.getElementById("emulator_display_text");if(ee.style.display==""){var X=Vt,g=16384,I=0,z=Ro();if(et=="wram"&&(X=mi(),g=4096,I=49152,z=Wr()),et=="hram"&&(X=vi(),g=4096,I=65408,z=Wr()),et=="io"){var s="",D=[{name:"P1",value:65280},{name:"SB",value:65281},{name:"SC",value:65282},{name:"DIV",value:65284},{name:"TIMA",value:65285},{name:"TMA",value:65286},{name:"TAC",value:65287},{name:"IF",value:65295},{name:"LCDC",value:65344},{name:"STAT",value:65345},{name:"SCY",value:65346},{name:"SCX",value:65347},{name:"LY",value:65348},{name:"LYC",value:65349},{name:"DMA",value:65350},{name:"BGP",value:65351},{name:"OBP0",value:65352},{name:"OBP1",value:65353},{name:"WY",value:65354},{name:"WX",value:65355},{name:"KEY1",value:65357},{name:"VBK",value:65359},{name:"RP",value:65366},{name:"BCPS",value:65384},{name:"BCPD",value:65385},{name:"OCPS",value:65386},{name:"OCPD",value:65387},{name:"SVBK",value:65392},{name:"IE",value:65535}];for(var S of D)s+="<span style='float: left; width: 50px'>"+S.name+":</span>"+("00"+Ti(S.value).toString(16)).slice(-2)+"<br/>";ee.innerHTML=s;return}if(et=="serial"){for(var s="",A=0;A<Ln.length;A+=16)s+=Ln.slice(A,A+16).join(" ")+`
`;ee.textContent=s;return}if(!(typeof X>"u")){for(var s="<div class='emulator_display_header'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp; 1&nbsp; 2&nbsp; 3&nbsp; 4&nbsp; 5&nbsp; 6&nbsp; 7&nbsp; 8&nbsp; 9&nbsp; a&nbsp; b&nbsp; c&nbsp; d&nbsp; e&nbsp; f</div>",h=null,o=!1,n=0,A=0;A<X.length;A+=16){var i=Array.prototype.map.call(X.slice(A,A+16),p=>("00"+p.toString(16)).slice(-2)),t=~~(A/g),e=A&g-1;t>0&&(e+=g),s+=("00"+t.toString(16)).slice(-2)+":"+("0000"+(e+I).toString(16)).slice(-4);for(var r=0;r<i.length;r++){s+=" ";var a=z[A+r+I];a?(h=a,o&&(s+="</span>"),o=!1,n=(n+71)%360):a===null&&(h=null,o&&(s+="</span>"),o=!1),h&&!o&&(s+="<span title='"+h+"' style='background-color: hsl("+n+(Fo()?", 30%, 30%)'>":", 50%, 50%)'>"),o=!0),s+=i[r]}o&&(s+="</span>"),o=!1,s+="<br/>"}ee.innerHTML=s}}}function xt(){var ee=document.getElementById("filelist");ee.textContent="";for(const S of Object.keys(ut()).sort()){var X=document.createElement("li");X.textContent=S,ee.appendChild(X),S==Kn()&&X.classList.add("active");for(var[g,I,z,D]of ui())if(I==S&&(X.classList.add(g),g=="error")){X.classList.remove("warning");break}}}function Uo(ee){Object.keys(ut()).length<2||(Ot(ee,null),Kn()==ee&&zt(Object.keys(ut()).sort()[0]),xt())}function Tt(ee){["emulator_screen_canvas","emulator_vram_canvas","emulator_display_text"].forEach(g=>{document.getElementById(g).style.display=ee==g?"":"none"})}function Ho(ee){Kr("textEditorDiv",Gn),ei("gfxEditorDiv");var X=new URLSearchParams(window.location.search);const g=(X.get("asm")??"").trim();g!=""&&(document.getElementById("compiler_settings_asm").value=g,lr(g.split(" ")));const I=(X.get("link")??"").trim();I!=""&&(document.getElementById("compiler_settings_link").value=I,cr(I.split(" ")));const z=(X.get("fix")??"").trim();z!=""&&(document.getElementById("compiler_settings_fix").value=z,ur(z.split(" "))),go(),zt(Object.keys(ut()).pop()),xt(),document.getElementById("filelist").onclick=function(S){S.target.childNodes[0].wholeText&&(zt(S.target.childNodes[0].wholeText),xt(),Dr())},document.getElementById("newfile").onclick=function(){document.getElementById("newfiledialog").style.display="block"},document.getElementById("newfiledialog").onclick=function(S){S.target==document.getElementById("newfiledialog")&&(document.getElementById("newfiledialog").style.display="none")},document.getElementById("newfiledialogclose").onclick=function(){document.getElementById("newfiledialog").style.display="none"},document.getElementById("newfile_empty_create").onclick=function(){var S=document.getElementById("newfile_name").value;S&&(S.indexOf(".")<0&&(S+=".asm"),!(S in ut())&&(fr(S)==="text"?Ot(S,""):Ot(S,new Uint8Array(16)),zt(S),xt(),document.getElementById("newfiledialog").style.display="none"))},document.getElementById("newfile_upload").onchange=function(S){if(S.target.files.length>0){var A=S.target.files[0].name,s=fr(A)=="text"?S.target.files[0].text():S.target.files[0].arrayBuffer();s.then(function(h){Ot(A,h),zt(A),xt()}),S.target.value="",document.getElementById("newfiledialog").style.display="none"}},document.getElementById("delfile").onclick=function(){confirm("Are you sure you want to delete: "+Kn()+"?")&&Uo(Kn())},document.getElementById("newproject").onclick=function(){confirm("Are you sure to clear the current project?")&&(ri(),zt("main.asm"),xt())},Gn(),document.getElementById("cpu_single_step").onclick=function(){$n("single")},document.getElementById("cpu_frame_step").onclick=function(){$n("frame")},document.getElementById("cpu_reset").onclick=function(){Li(!0)},document.getElementById("cpu_run_check").onclick=function(){if(document.getElementById("cpu_run_check").checked){let S=function(){document.hidden||$n("run")&&(document.getElementById("cpu_run_check").checked=!1),document.getElementById("cpu_run_check").checked&&requestAnimationFrame(S)};requestAnimationFrame(S)}};var D=document.getElementById("emulator_screen_canvas");D.tabIndex=-1,D.onkeydown=function(S){Gr(S.code,!0),S.preventDefault()},D.onkeyup=function(S){Gr(S.code,!1),S.preventDefault()},document.onkeydown=function(S){S.code=="F8"&&($n("single"),S.preventDefault()),S.code=="F9"&&($n("frame"),S.preventDefault())},document.getElementById("emulator_display_screen").onclick=function(){Tt("emulator_screen_canvas"),et="display"},document.getElementById("emulator_display_vram").onclick=function(){Tt("emulator_vram_canvas"),et="vram",qn()},document.getElementById("emulator_display_bg0").onclick=function(){Tt("emulator_vram_canvas"),et="bg0",qn()},document.getElementById("emulator_display_bg1").onclick=function(){Tt("emulator_vram_canvas"),et="bg1",qn()},document.getElementById("emulator_display_rom").onclick=function(){Tt("emulator_display_text"),et="rom",Gt()},document.getElementById("emulator_display_wram").onclick=function(){Tt("emulator_display_text"),et="wram",Gt()},document.getElementById("emulator_display_hram").onclick=function(){Tt("emulator_display_text"),et="hram",Gt()},document.getElementById("emulator_display_io").onclick=function(){Tt("emulator_display_text"),et="io",Gt()},document.getElementById("emulator_display_serial").onclick=function(){Tt("emulator_display_text"),et="serial",Gt()},document.getElementById("download_rom").onclick=function(){if(!(typeof Vt>"u")){var S=document.createElement("a"),A=window.URL.createObjectURL(new Blob([Vt.buffer],{type:"application/octet-stream"}));S.setAttribute("href",A),S.setAttribute("download","rom.gb"),S.style.display="none",document.body.appendChild(S),S.click(),document.body.removeChild(S),window.URL.revokeObjectURL(A)}},document.getElementById("importmenu").onclick=function(){document.getElementById("importdialog").style.display="block"},document.getElementById("importdialog").onclick=function(S){S.target==document.getElementById("importdialog")&&(document.getElementById("importdialog").style.display="none")},document.getElementById("importdialogclose").onclick=function(){document.getElementById("importdialog").style.display="none"},document.getElementById("import_gist").onclick=function(){si(document.getElementById("import_gist_url").value),document.getElementById("importdialog").style.display="none"},document.getElementById("import_zipfile").onchange=function(S){S.target.files.length>0&&(yo(S.target.files[0]),S.target.value="",document.getElementById("importdialog").style.display="none")},document.getElementById("exportmenu").onclick=function(){document.getElementById("exportdialog").style.display="block",document.getElementById("export_hash_url").value=ii()},document.getElementById("exportdialog").onclick=function(S){S.target==document.getElementById("exportdialog")&&(document.getElementById("exportdialog").style.display="none")},document.getElementById("exportdialogclose").onclick=function(){document.getElementById("exportdialog").style.display="none"},document.getElementById("export_gist").onclick=function(){var S=document.getElementById("export_gist_url").value,A=document.getElementById("export_gist_username").value,s=document.getElementById("export_gist_token").value;if(S=vo(A,s,S),S==null)document.getElementById("export_gist_import_url").value="Gist create/update failed. Incorrect token?";else{document.getElementById("export_gist_url").value=S;var h=new URL(document.location);h.hash=S,document.getElementById("export_gist_import_url").value=h.toString()}},document.getElementById("export_zip").onclick=function(){_o()},document.getElementById("infomenu").onclick=function(){document.getElementById("infodialog").style.display="block"},document.getElementById("infodialog").onclick=function(S){S.target==document.getElementById("infodialog")&&(document.getElementById("infodialog").style.display="none")},document.getElementById("infodialogclose").onclick=function(){document.getElementById("infodialog").style.display="none"},document.getElementById("auto_url_update").checked=Mt.autoUrl,document.getElementById("auto_url_update").onclick=function(){Mt.autoUrl=document.getElementById("auto_url_update").checked,Mt.autoUrl?Ot():document.location.hash=""},document.getElementById("auto_local_storage_update").checked=Mt.autoLocalStorage,document.getElementById("auto_local_storage_update").onclick=function(){Mt.autoLocalStorage=document.getElementById("auto_local_storage_update").checked,Ot()},document.getElementById("settingsmenu").onclick=function(){document.getElementById("settingsdialog").style.display="block"},document.getElementById("settingsdialog").onclick=function(S){S.target==document.getElementById("settingsdialog")&&(document.getElementById("settingsdialog").style.display="none")},document.getElementById("settingsdialogclose").onclick=function(){document.getElementById("settingsdialog").style.display="none"},document.getElementById("compiler_settings_set").onclick=function(){X=new URLSearchParams(window.location.search);var S=document.getElementById("compiler_settings_asm").value.trim();S!=""?(X.set("asm",S),lr(S.split(" "))):(lr([]),X.delete("asm"));var A=document.getElementById("compiler_settings_link").value.trim();A!=""?(X.set("link",A),cr(A.split(" "))):(cr([]),X.delete("link"));var s=document.getElementById("compiler_settings_fix").value.trim();s!=""?(X.set("fix",s),ur(s.split(" "))):(X.delete("fix"),ur([]));var h=new URL(window.location);h.search=X.toString(),window.history.replaceState({},"",h),document.getElementById("settingsdialog").style.display="none",Gn()},X.has("autorun")&&(document.getElementById("cpu_run_check").checked=!0,document.getElementById("cpu_run_check").onclick())}Ho();
