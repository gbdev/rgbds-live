function ti(q,X){for(var a=0;a<X.length;a++){const D=X[a];if(typeof D!="string"&&!Array.isArray(D)){for(const z in D)if(z!=="default"&&!(z in q)){const k=Object.getOwnPropertyDescriptor(D,z);k&&Object.defineProperty(q,z,k.get?k:{enumerable:!0,get:()=>D[z]})}}}return Object.freeze(Object.defineProperty(q,Symbol.toStringTag,{value:"Module"}))}(function(){const X=document.createElement("link").relList;if(X&&X.supports&&X.supports("modulepreload"))return;for(const z of document.querySelectorAll('link[rel="modulepreload"]'))D(z);new MutationObserver(z=>{for(const k of z)if(k.type==="childList")for(const A of k.addedNodes)A.tagName==="LINK"&&A.rel==="modulepreload"&&D(A)}).observe(document,{childList:!0,subtree:!0});function a(z){const k={};return z.integrity&&(k.integrity=z.integrity),z.referrerPolicy&&(k.referrerPolicy=z.referrerPolicy),z.crossOrigin==="use-credentials"?k.credentials="include":z.crossOrigin==="anonymous"?k.credentials="omit":k.credentials="same-origin",k}function D(z){if(z.ep)return;z.ep=!0;const k=a(z);fetch(z.href,k)}})();var Gr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fn(q){return q&&q.__esModule&&Object.prototype.hasOwnProperty.call(q,"default")?q.default:q}function Vr(q){throw new Error('Could not dynamically require "'+q+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var xn={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(q,X){(function(a){q.exports=a()})(function(){return function a(D,z,k){function A(l,t){if(!z[l]){if(!D[l]){var e=typeof Vr=="function"&&Vr;if(!t&&e)return e(l,!0);if(h)return h(l,!0);var r=new Error("Cannot find module '"+l+"'");throw r.code="MODULE_NOT_FOUND",r}var n=z[l]={exports:{}};D[l][0].call(n.exports,function(i){var o=D[l][1][i];return A(o||i)},n,n.exports,a,D,z,k)}return z[l].exports}for(var h=typeof Vr=="function"&&Vr,s=0;s<k.length;s++)A(k[s]);return A}({1:[function(a,D,z){var k=a("./utils"),A=a("./support"),h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";z.encode=function(s){for(var l,t,e,r,n,i,o,d=[],v=0,_=s.length,C=_,$=k.getTypeOf(s)!=="string";v<s.length;)C=_-v,e=$?(l=s[v++],t=v<_?s[v++]:0,v<_?s[v++]:0):(l=s.charCodeAt(v++),t=v<_?s.charCodeAt(v++):0,v<_?s.charCodeAt(v++):0),r=l>>2,n=(3&l)<<4|t>>4,i=1<C?(15&t)<<2|e>>6:64,o=2<C?63&e:64,d.push(h.charAt(r)+h.charAt(n)+h.charAt(i)+h.charAt(o));return d.join("")},z.decode=function(s){var l,t,e,r,n,i,o=0,d=0,v="data:";if(s.substr(0,v.length)===v)throw new Error("Invalid base64 input, it looks like a data url.");var _,C=3*(s=s.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(s.charAt(s.length-1)===h.charAt(64)&&C--,s.charAt(s.length-2)===h.charAt(64)&&C--,C%1!=0)throw new Error("Invalid base64 input, bad content length.");for(_=A.uint8array?new Uint8Array(0|C):new Array(0|C);o<s.length;)l=h.indexOf(s.charAt(o++))<<2|(r=h.indexOf(s.charAt(o++)))>>4,t=(15&r)<<4|(n=h.indexOf(s.charAt(o++)))>>2,e=(3&n)<<6|(i=h.indexOf(s.charAt(o++))),_[d++]=l,n!==64&&(_[d++]=t),i!==64&&(_[d++]=e);return _}},{"./support":30,"./utils":32}],2:[function(a,D,z){var k=a("./external"),A=a("./stream/DataWorker"),h=a("./stream/Crc32Probe"),s=a("./stream/DataLengthProbe");function l(t,e,r,n,i){this.compressedSize=t,this.uncompressedSize=e,this.crc32=r,this.compression=n,this.compressedContent=i}l.prototype={getContentWorker:function(){var t=new A(k.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new s("data_length")),e=this;return t.on("end",function(){if(this.streamInfo.data_length!==e.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),t},getCompressedWorker:function(){return new A(k.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},l.createWorkerFrom=function(t,e,r){return t.pipe(new h).pipe(new s("uncompressedSize")).pipe(e.compressWorker(r)).pipe(new s("compressedSize")).withStreamInfo("compression",e)},D.exports=l},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(a,D,z){var k=a("./stream/GenericWorker");z.STORE={magic:"\0\0",compressWorker:function(){return new k("STORE compression")},uncompressWorker:function(){return new k("STORE decompression")}},z.DEFLATE=a("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(a,D,z){var k=a("./utils"),A=function(){for(var h,s=[],l=0;l<256;l++){h=l;for(var t=0;t<8;t++)h=1&h?3988292384^h>>>1:h>>>1;s[l]=h}return s}();D.exports=function(h,s){return h!==void 0&&h.length?k.getTypeOf(h)!=="string"?function(l,t,e,r){var n=A,i=r+e;l^=-1;for(var o=r;o<i;o++)l=l>>>8^n[255&(l^t[o])];return-1^l}(0|s,h,h.length,0):function(l,t,e,r){var n=A,i=r+e;l^=-1;for(var o=r;o<i;o++)l=l>>>8^n[255&(l^t.charCodeAt(o))];return-1^l}(0|s,h,h.length,0):0}},{"./utils":32}],5:[function(a,D,z){z.base64=!1,z.binary=!1,z.dir=!1,z.createFolders=!0,z.date=null,z.compression=null,z.compressionOptions=null,z.comment=null,z.unixPermissions=null,z.dosPermissions=null},{}],6:[function(a,D,z){var k=null;k=typeof Promise<"u"?Promise:a("lie"),D.exports={Promise:k}},{lie:37}],7:[function(a,D,z){var k=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",A=a("pako"),h=a("./utils"),s=a("./stream/GenericWorker"),l=k?"uint8array":"array";function t(e,r){s.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=r,this.meta={}}z.magic="\b\0",h.inherits(t,s),t.prototype.processChunk=function(e){this.meta=e.meta,this._pako===null&&this._createPako(),this._pako.push(h.transformTo(l,e.data),!1)},t.prototype.flush=function(){s.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},t.prototype.cleanUp=function(){s.prototype.cleanUp.call(this),this._pako=null},t.prototype._createPako=function(){this._pako=new A[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(r){e.push({data:r,meta:e.meta})}},z.compressWorker=function(e){return new t("Deflate",e)},z.uncompressWorker=function(){return new t("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(a,D,z){function k(n,i){var o,d="";for(o=0;o<i;o++)d+=String.fromCharCode(255&n),n>>>=8;return d}function A(n,i,o,d,v,_){var C,$,c=n.file,g=n.compression,E=_!==l.utf8encode,m=h.transformTo("string",_(c.name)),p=h.transformTo("string",l.utf8encode(c.name)),f=c.comment,F=h.transformTo("string",_(f)),R=h.transformTo("string",l.utf8encode(f)),I=p.length!==c.name.length,S=R.length!==f.length,P="",G="",Z="",ae=c.dir,re=c.date,ce={crc32:0,compressedSize:0,uncompressedSize:0};i&&!o||(ce.crc32=n.crc32,ce.compressedSize=n.compressedSize,ce.uncompressedSize=n.uncompressedSize);var j=0;i&&(j|=8),E||!I&&!S||(j|=2048);var ee=0,ie=0;ae&&(ee|=16),v==="UNIX"?(ie=798,ee|=function(he,ye){var Te=he;return he||(Te=ye?16893:33204),(65535&Te)<<16}(c.unixPermissions,ae)):(ie=20,ee|=function(he){return 63&(he||0)}(c.dosPermissions)),C=re.getUTCHours(),C<<=6,C|=re.getUTCMinutes(),C<<=5,C|=re.getUTCSeconds()/2,$=re.getUTCFullYear()-1980,$<<=4,$|=re.getUTCMonth()+1,$<<=5,$|=re.getUTCDate(),I&&(G=k(1,1)+k(t(m),4)+p,P+="up"+k(G.length,2)+G),S&&(Z=k(1,1)+k(t(F),4)+R,P+="uc"+k(Z.length,2)+Z);var fe="";return fe+=`
\0`,fe+=k(j,2),fe+=g.magic,fe+=k(C,2),fe+=k($,2),fe+=k(ce.crc32,4),fe+=k(ce.compressedSize,4),fe+=k(ce.uncompressedSize,4),fe+=k(m.length,2),fe+=k(P.length,2),{fileRecord:e.LOCAL_FILE_HEADER+fe+m+P,dirRecord:e.CENTRAL_FILE_HEADER+k(ie,2)+fe+k(F.length,2)+"\0\0\0\0"+k(ee,4)+k(d,4)+m+P+F}}var h=a("../utils"),s=a("../stream/GenericWorker"),l=a("../utf8"),t=a("../crc32"),e=a("../signature");function r(n,i,o,d){s.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=i,this.zipPlatform=o,this.encodeFileName=d,this.streamFiles=n,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}h.inherits(r,s),r.prototype.push=function(n){var i=n.meta.percent||0,o=this.entriesCount,d=this._sources.length;this.accumulate?this.contentBuffer.push(n):(this.bytesWritten+=n.data.length,s.prototype.push.call(this,{data:n.data,meta:{currentFile:this.currentFile,percent:o?(i+100*(o-d-1))/o:100}}))},r.prototype.openedSource=function(n){this.currentSourceOffset=this.bytesWritten,this.currentFile=n.file.name;var i=this.streamFiles&&!n.file.dir;if(i){var o=A(n,i,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:o.fileRecord,meta:{percent:0}})}else this.accumulate=!0},r.prototype.closedSource=function(n){this.accumulate=!1;var i=this.streamFiles&&!n.file.dir,o=A(n,i,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(o.dirRecord),i)this.push({data:function(d){return e.DATA_DESCRIPTOR+k(d.crc32,4)+k(d.compressedSize,4)+k(d.uncompressedSize,4)}(n),meta:{percent:100}});else for(this.push({data:o.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},r.prototype.flush=function(){for(var n=this.bytesWritten,i=0;i<this.dirRecords.length;i++)this.push({data:this.dirRecords[i],meta:{percent:100}});var o=this.bytesWritten-n,d=function(v,_,C,$,c){var g=h.transformTo("string",c($));return e.CENTRAL_DIRECTORY_END+"\0\0\0\0"+k(v,2)+k(v,2)+k(_,4)+k(C,4)+k(g.length,2)+g}(this.dirRecords.length,o,n,this.zipComment,this.encodeFileName);this.push({data:d,meta:{percent:100}})},r.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},r.prototype.registerPrevious=function(n){this._sources.push(n);var i=this;return n.on("data",function(o){i.processChunk(o)}),n.on("end",function(){i.closedSource(i.previous.streamInfo),i._sources.length?i.prepareNextSource():i.end()}),n.on("error",function(o){i.error(o)}),this},r.prototype.resume=function(){return!!s.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},r.prototype.error=function(n){var i=this._sources;if(!s.prototype.error.call(this,n))return!1;for(var o=0;o<i.length;o++)try{i[o].error(n)}catch{}return!0},r.prototype.lock=function(){s.prototype.lock.call(this);for(var n=this._sources,i=0;i<n.length;i++)n[i].lock()},D.exports=r},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(a,D,z){var k=a("../compressions"),A=a("./ZipFileWorker");z.generateWorker=function(h,s,l){var t=new A(s.streamFiles,l,s.platform,s.encodeFileName),e=0;try{h.forEach(function(r,n){e++;var i=function(_,C){var $=_||C,c=k[$];if(!c)throw new Error($+" is not a valid compression method !");return c}(n.options.compression,s.compression),o=n.options.compressionOptions||s.compressionOptions||{},d=n.dir,v=n.date;n._compressWorker(i,o).withStreamInfo("file",{name:r,dir:d,date:v,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(t)}),t.entriesCount=e}catch(r){t.error(r)}return t}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(a,D,z){function k(){if(!(this instanceof k))return new k;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var A=new k;for(var h in this)typeof this[h]!="function"&&(A[h]=this[h]);return A}}(k.prototype=a("./object")).loadAsync=a("./load"),k.support=a("./support"),k.defaults=a("./defaults"),k.version="3.10.1",k.loadAsync=function(A,h){return new k().loadAsync(A,h)},k.external=a("./external"),D.exports=k},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(a,D,z){var k=a("./utils"),A=a("./external"),h=a("./utf8"),s=a("./zipEntries"),l=a("./stream/Crc32Probe"),t=a("./nodejsUtils");function e(r){return new A.Promise(function(n,i){var o=r.decompressed.getContentWorker().pipe(new l);o.on("error",function(d){i(d)}).on("end",function(){o.streamInfo.crc32!==r.decompressed.crc32?i(new Error("Corrupted zip : CRC32 mismatch")):n()}).resume()})}D.exports=function(r,n){var i=this;return n=k.extend(n||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:h.utf8decode}),t.isNode&&t.isStream(r)?A.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):k.prepareContent("the loaded zip file",r,!0,n.optimizedBinaryString,n.base64).then(function(o){var d=new s(n);return d.load(o),d}).then(function(o){var d=[A.Promise.resolve(o)],v=o.files;if(n.checkCRC32)for(var _=0;_<v.length;_++)d.push(e(v[_]));return A.Promise.all(d)}).then(function(o){for(var d=o.shift(),v=d.files,_=0;_<v.length;_++){var C=v[_],$=C.fileNameStr,c=k.resolve(C.fileNameStr);i.file(c,C.decompressed,{binary:!0,optimizedBinaryString:!0,date:C.date,dir:C.dir,comment:C.fileCommentStr.length?C.fileCommentStr:null,unixPermissions:C.unixPermissions,dosPermissions:C.dosPermissions,createFolders:n.createFolders}),C.dir||(i.file(c).unsafeOriginalName=$)}return d.zipComment.length&&(i.comment=d.zipComment),i})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(a,D,z){var k=a("../utils"),A=a("../stream/GenericWorker");function h(s,l){A.call(this,"Nodejs stream input adapter for "+s),this._upstreamEnded=!1,this._bindStream(l)}k.inherits(h,A),h.prototype._bindStream=function(s){var l=this;(this._stream=s).pause(),s.on("data",function(t){l.push({data:t,meta:{percent:0}})}).on("error",function(t){l.isPaused?this.generatedError=t:l.error(t)}).on("end",function(){l.isPaused?l._upstreamEnded=!0:l.end()})},h.prototype.pause=function(){return!!A.prototype.pause.call(this)&&(this._stream.pause(),!0)},h.prototype.resume=function(){return!!A.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},D.exports=h},{"../stream/GenericWorker":28,"../utils":32}],13:[function(a,D,z){var k=a("readable-stream").Readable;function A(h,s,l){k.call(this,s),this._helper=h;var t=this;h.on("data",function(e,r){t.push(e)||t._helper.pause(),l&&l(r)}).on("error",function(e){t.emit("error",e)}).on("end",function(){t.push(null)})}a("../utils").inherits(A,k),A.prototype._read=function(){this._helper.resume()},D.exports=A},{"../utils":32,"readable-stream":16}],14:[function(a,D,z){D.exports={isNode:typeof Buffer<"u",newBufferFrom:function(k,A){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(k,A);if(typeof k=="number")throw new Error('The "data" argument must not be a number');return new Buffer(k,A)},allocBuffer:function(k){if(Buffer.alloc)return Buffer.alloc(k);var A=new Buffer(k);return A.fill(0),A},isBuffer:function(k){return Buffer.isBuffer(k)},isStream:function(k){return k&&typeof k.on=="function"&&typeof k.pause=="function"&&typeof k.resume=="function"}}},{}],15:[function(a,D,z){function k(c,g,E){var m,p=h.getTypeOf(g),f=h.extend(E||{},t);f.date=f.date||new Date,f.compression!==null&&(f.compression=f.compression.toUpperCase()),typeof f.unixPermissions=="string"&&(f.unixPermissions=parseInt(f.unixPermissions,8)),f.unixPermissions&&16384&f.unixPermissions&&(f.dir=!0),f.dosPermissions&&16&f.dosPermissions&&(f.dir=!0),f.dir&&(c=v(c)),f.createFolders&&(m=d(c))&&_.call(this,m,!0);var F=p==="string"&&f.binary===!1&&f.base64===!1;E&&E.binary!==void 0||(f.binary=!F),(g instanceof e&&g.uncompressedSize===0||f.dir||!g||g.length===0)&&(f.base64=!1,f.binary=!0,g="",f.compression="STORE",p="string");var R=null;R=g instanceof e||g instanceof s?g:i.isNode&&i.isStream(g)?new o(c,g):h.prepareContent(c,g,f.binary,f.optimizedBinaryString,f.base64);var I=new r(c,R,f);this.files[c]=I}var A=a("./utf8"),h=a("./utils"),s=a("./stream/GenericWorker"),l=a("./stream/StreamHelper"),t=a("./defaults"),e=a("./compressedObject"),r=a("./zipObject"),n=a("./generate"),i=a("./nodejsUtils"),o=a("./nodejs/NodejsStreamInputAdapter"),d=function(c){c.slice(-1)==="/"&&(c=c.substring(0,c.length-1));var g=c.lastIndexOf("/");return 0<g?c.substring(0,g):""},v=function(c){return c.slice(-1)!=="/"&&(c+="/"),c},_=function(c,g){return g=g!==void 0?g:t.createFolders,c=v(c),this.files[c]||k.call(this,c,null,{dir:!0,createFolders:g}),this.files[c]};function C(c){return Object.prototype.toString.call(c)==="[object RegExp]"}var $={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(c){var g,E,m;for(g in this.files)m=this.files[g],(E=g.slice(this.root.length,g.length))&&g.slice(0,this.root.length)===this.root&&c(E,m)},filter:function(c){var g=[];return this.forEach(function(E,m){c(E,m)&&g.push(m)}),g},file:function(c,g,E){if(arguments.length!==1)return c=this.root+c,k.call(this,c,g,E),this;if(C(c)){var m=c;return this.filter(function(f,F){return!F.dir&&m.test(f)})}var p=this.files[this.root+c];return p&&!p.dir?p:null},folder:function(c){if(!c)return this;if(C(c))return this.filter(function(p,f){return f.dir&&c.test(p)});var g=this.root+c,E=_.call(this,g),m=this.clone();return m.root=E.name,m},remove:function(c){c=this.root+c;var g=this.files[c];if(g||(c.slice(-1)!=="/"&&(c+="/"),g=this.files[c]),g&&!g.dir)delete this.files[c];else for(var E=this.filter(function(p,f){return f.name.slice(0,c.length)===c}),m=0;m<E.length;m++)delete this.files[E[m].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(c){var g,E={};try{if((E=h.extend(c||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:A.utf8encode})).type=E.type.toLowerCase(),E.compression=E.compression.toUpperCase(),E.type==="binarystring"&&(E.type="string"),!E.type)throw new Error("No output type specified.");h.checkSupport(E.type),E.platform!=="darwin"&&E.platform!=="freebsd"&&E.platform!=="linux"&&E.platform!=="sunos"||(E.platform="UNIX"),E.platform==="win32"&&(E.platform="DOS");var m=E.comment||this.comment||"";g=n.generateWorker(this,E,m)}catch(p){(g=new s("error")).error(p)}return new l(g,E.type||"string",E.mimeType)},generateAsync:function(c,g){return this.generateInternalStream(c).accumulate(g)},generateNodeStream:function(c,g){return(c=c||{}).type||(c.type="nodebuffer"),this.generateInternalStream(c).toNodejsStream(g)}};D.exports=$},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(a,D,z){D.exports=a("stream")},{stream:void 0}],17:[function(a,D,z){var k=a("./DataReader");function A(h){k.call(this,h);for(var s=0;s<this.data.length;s++)h[s]=255&h[s]}a("../utils").inherits(A,k),A.prototype.byteAt=function(h){return this.data[this.zero+h]},A.prototype.lastIndexOfSignature=function(h){for(var s=h.charCodeAt(0),l=h.charCodeAt(1),t=h.charCodeAt(2),e=h.charCodeAt(3),r=this.length-4;0<=r;--r)if(this.data[r]===s&&this.data[r+1]===l&&this.data[r+2]===t&&this.data[r+3]===e)return r-this.zero;return-1},A.prototype.readAndCheckSignature=function(h){var s=h.charCodeAt(0),l=h.charCodeAt(1),t=h.charCodeAt(2),e=h.charCodeAt(3),r=this.readData(4);return s===r[0]&&l===r[1]&&t===r[2]&&e===r[3]},A.prototype.readData=function(h){if(this.checkOffset(h),h===0)return[];var s=this.data.slice(this.zero+this.index,this.zero+this.index+h);return this.index+=h,s},D.exports=A},{"../utils":32,"./DataReader":18}],18:[function(a,D,z){var k=a("../utils");function A(h){this.data=h,this.length=h.length,this.index=0,this.zero=0}A.prototype={checkOffset:function(h){this.checkIndex(this.index+h)},checkIndex:function(h){if(this.length<this.zero+h||h<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+h+"). Corrupted zip ?")},setIndex:function(h){this.checkIndex(h),this.index=h},skip:function(h){this.setIndex(this.index+h)},byteAt:function(){},readInt:function(h){var s,l=0;for(this.checkOffset(h),s=this.index+h-1;s>=this.index;s--)l=(l<<8)+this.byteAt(s);return this.index+=h,l},readString:function(h){return k.transformTo("string",this.readData(h))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var h=this.readInt(4);return new Date(Date.UTC(1980+(h>>25&127),(h>>21&15)-1,h>>16&31,h>>11&31,h>>5&63,(31&h)<<1))}},D.exports=A},{"../utils":32}],19:[function(a,D,z){var k=a("./Uint8ArrayReader");function A(h){k.call(this,h)}a("../utils").inherits(A,k),A.prototype.readData=function(h){this.checkOffset(h);var s=this.data.slice(this.zero+this.index,this.zero+this.index+h);return this.index+=h,s},D.exports=A},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(a,D,z){var k=a("./DataReader");function A(h){k.call(this,h)}a("../utils").inherits(A,k),A.prototype.byteAt=function(h){return this.data.charCodeAt(this.zero+h)},A.prototype.lastIndexOfSignature=function(h){return this.data.lastIndexOf(h)-this.zero},A.prototype.readAndCheckSignature=function(h){return h===this.readData(4)},A.prototype.readData=function(h){this.checkOffset(h);var s=this.data.slice(this.zero+this.index,this.zero+this.index+h);return this.index+=h,s},D.exports=A},{"../utils":32,"./DataReader":18}],21:[function(a,D,z){var k=a("./ArrayReader");function A(h){k.call(this,h)}a("../utils").inherits(A,k),A.prototype.readData=function(h){if(this.checkOffset(h),h===0)return new Uint8Array(0);var s=this.data.subarray(this.zero+this.index,this.zero+this.index+h);return this.index+=h,s},D.exports=A},{"../utils":32,"./ArrayReader":17}],22:[function(a,D,z){var k=a("../utils"),A=a("../support"),h=a("./ArrayReader"),s=a("./StringReader"),l=a("./NodeBufferReader"),t=a("./Uint8ArrayReader");D.exports=function(e){var r=k.getTypeOf(e);return k.checkSupport(r),r!=="string"||A.uint8array?r==="nodebuffer"?new l(e):A.uint8array?new t(k.transformTo("uint8array",e)):new h(k.transformTo("array",e)):new s(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(a,D,z){z.LOCAL_FILE_HEADER="PK",z.CENTRAL_FILE_HEADER="PK",z.CENTRAL_DIRECTORY_END="PK",z.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",z.ZIP64_CENTRAL_DIRECTORY_END="PK",z.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(a,D,z){var k=a("./GenericWorker"),A=a("../utils");function h(s){k.call(this,"ConvertWorker to "+s),this.destType=s}A.inherits(h,k),h.prototype.processChunk=function(s){this.push({data:A.transformTo(this.destType,s.data),meta:s.meta})},D.exports=h},{"../utils":32,"./GenericWorker":28}],25:[function(a,D,z){var k=a("./GenericWorker"),A=a("../crc32");function h(){k.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}a("../utils").inherits(h,k),h.prototype.processChunk=function(s){this.streamInfo.crc32=A(s.data,this.streamInfo.crc32||0),this.push(s)},D.exports=h},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(a,D,z){var k=a("../utils"),A=a("./GenericWorker");function h(s){A.call(this,"DataLengthProbe for "+s),this.propName=s,this.withStreamInfo(s,0)}k.inherits(h,A),h.prototype.processChunk=function(s){if(s){var l=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=l+s.data.length}A.prototype.processChunk.call(this,s)},D.exports=h},{"../utils":32,"./GenericWorker":28}],27:[function(a,D,z){var k=a("../utils"),A=a("./GenericWorker");function h(s){A.call(this,"DataWorker");var l=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,s.then(function(t){l.dataIsReady=!0,l.data=t,l.max=t&&t.length||0,l.type=k.getTypeOf(t),l.isPaused||l._tickAndRepeat()},function(t){l.error(t)})}k.inherits(h,A),h.prototype.cleanUp=function(){A.prototype.cleanUp.call(this),this.data=null},h.prototype.resume=function(){return!!A.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,k.delay(this._tickAndRepeat,[],this)),!0)},h.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(k.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},h.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var s=null,l=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":s=this.data.substring(this.index,l);break;case"uint8array":s=this.data.subarray(this.index,l);break;case"array":case"nodebuffer":s=this.data.slice(this.index,l)}return this.index=l,this.push({data:s,meta:{percent:this.max?this.index/this.max*100:0}})},D.exports=h},{"../utils":32,"./GenericWorker":28}],28:[function(a,D,z){function k(A){this.name=A||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}k.prototype={push:function(A){this.emit("data",A)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(A){this.emit("error",A)}return!0},error:function(A){return!this.isFinished&&(this.isPaused?this.generatedError=A:(this.isFinished=!0,this.emit("error",A),this.previous&&this.previous.error(A),this.cleanUp()),!0)},on:function(A,h){return this._listeners[A].push(h),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(A,h){if(this._listeners[A])for(var s=0;s<this._listeners[A].length;s++)this._listeners[A][s].call(this,h)},pipe:function(A){return A.registerPrevious(this)},registerPrevious:function(A){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=A.streamInfo,this.mergeStreamInfo(),this.previous=A;var h=this;return A.on("data",function(s){h.processChunk(s)}),A.on("end",function(){h.end()}),A.on("error",function(s){h.error(s)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var A=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),A=!0),this.previous&&this.previous.resume(),!A},flush:function(){},processChunk:function(A){this.push(A)},withStreamInfo:function(A,h){return this.extraStreamInfo[A]=h,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var A in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,A)&&(this.streamInfo[A]=this.extraStreamInfo[A])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var A="Worker "+this.name;return this.previous?this.previous+" -> "+A:A}},D.exports=k},{}],29:[function(a,D,z){var k=a("../utils"),A=a("./ConvertWorker"),h=a("./GenericWorker"),s=a("../base64"),l=a("../support"),t=a("../external"),e=null;if(l.nodestream)try{e=a("../nodejs/NodejsStreamOutputAdapter")}catch{}function r(i,o){return new t.Promise(function(d,v){var _=[],C=i._internalType,$=i._outputType,c=i._mimeType;i.on("data",function(g,E){_.push(g),o&&o(E)}).on("error",function(g){_=[],v(g)}).on("end",function(){try{var g=function(E,m,p){switch(E){case"blob":return k.newBlob(k.transformTo("arraybuffer",m),p);case"base64":return s.encode(m);default:return k.transformTo(E,m)}}($,function(E,m){var p,f=0,F=null,R=0;for(p=0;p<m.length;p++)R+=m[p].length;switch(E){case"string":return m.join("");case"array":return Array.prototype.concat.apply([],m);case"uint8array":for(F=new Uint8Array(R),p=0;p<m.length;p++)F.set(m[p],f),f+=m[p].length;return F;case"nodebuffer":return Buffer.concat(m);default:throw new Error("concat : unsupported type '"+E+"'")}}(C,_),c);d(g)}catch(E){v(E)}_=[]}).resume()})}function n(i,o,d){var v=o;switch(o){case"blob":case"arraybuffer":v="uint8array";break;case"base64":v="string"}try{this._internalType=v,this._outputType=o,this._mimeType=d,k.checkSupport(v),this._worker=i.pipe(new A(v)),i.lock()}catch(_){this._worker=new h("error"),this._worker.error(_)}}n.prototype={accumulate:function(i){return r(this,i)},on:function(i,o){var d=this;return i==="data"?this._worker.on(i,function(v){o.call(d,v.data,v.meta)}):this._worker.on(i,function(){k.delay(o,arguments,d)}),this},resume:function(){return k.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(i){if(k.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new e(this,{objectMode:this._outputType!=="nodebuffer"},i)}},D.exports=n},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(a,D,z){if(z.base64=!0,z.array=!0,z.string=!0,z.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",z.nodebuffer=typeof Buffer<"u",z.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")z.blob=!1;else{var k=new ArrayBuffer(0);try{z.blob=new Blob([k],{type:"application/zip"}).size===0}catch{try{var A=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);A.append(k),z.blob=A.getBlob("application/zip").size===0}catch{z.blob=!1}}}try{z.nodestream=!!a("readable-stream").Readable}catch{z.nodestream=!1}},{"readable-stream":16}],31:[function(a,D,z){for(var k=a("./utils"),A=a("./support"),h=a("./nodejsUtils"),s=a("./stream/GenericWorker"),l=new Array(256),t=0;t<256;t++)l[t]=252<=t?6:248<=t?5:240<=t?4:224<=t?3:192<=t?2:1;l[254]=l[254]=1;function e(){s.call(this,"utf-8 decode"),this.leftOver=null}function r(){s.call(this,"utf-8 encode")}z.utf8encode=function(n){return A.nodebuffer?h.newBufferFrom(n,"utf-8"):function(i){var o,d,v,_,C,$=i.length,c=0;for(_=0;_<$;_++)(64512&(d=i.charCodeAt(_)))==55296&&_+1<$&&(64512&(v=i.charCodeAt(_+1)))==56320&&(d=65536+(d-55296<<10)+(v-56320),_++),c+=d<128?1:d<2048?2:d<65536?3:4;for(o=A.uint8array?new Uint8Array(c):new Array(c),_=C=0;C<c;_++)(64512&(d=i.charCodeAt(_)))==55296&&_+1<$&&(64512&(v=i.charCodeAt(_+1)))==56320&&(d=65536+(d-55296<<10)+(v-56320),_++),d<128?o[C++]=d:(d<2048?o[C++]=192|d>>>6:(d<65536?o[C++]=224|d>>>12:(o[C++]=240|d>>>18,o[C++]=128|d>>>12&63),o[C++]=128|d>>>6&63),o[C++]=128|63&d);return o}(n)},z.utf8decode=function(n){return A.nodebuffer?k.transformTo("nodebuffer",n).toString("utf-8"):function(i){var o,d,v,_,C=i.length,$=new Array(2*C);for(o=d=0;o<C;)if((v=i[o++])<128)$[d++]=v;else if(4<(_=l[v]))$[d++]=65533,o+=_-1;else{for(v&=_===2?31:_===3?15:7;1<_&&o<C;)v=v<<6|63&i[o++],_--;1<_?$[d++]=65533:v<65536?$[d++]=v:(v-=65536,$[d++]=55296|v>>10&1023,$[d++]=56320|1023&v)}return $.length!==d&&($.subarray?$=$.subarray(0,d):$.length=d),k.applyFromCharCode($)}(n=k.transformTo(A.uint8array?"uint8array":"array",n))},k.inherits(e,s),e.prototype.processChunk=function(n){var i=k.transformTo(A.uint8array?"uint8array":"array",n.data);if(this.leftOver&&this.leftOver.length){if(A.uint8array){var o=i;(i=new Uint8Array(o.length+this.leftOver.length)).set(this.leftOver,0),i.set(o,this.leftOver.length)}else i=this.leftOver.concat(i);this.leftOver=null}var d=function(_,C){var $;for((C=C||_.length)>_.length&&(C=_.length),$=C-1;0<=$&&(192&_[$])==128;)$--;return $<0||$===0?C:$+l[_[$]]>C?$:C}(i),v=i;d!==i.length&&(A.uint8array?(v=i.subarray(0,d),this.leftOver=i.subarray(d,i.length)):(v=i.slice(0,d),this.leftOver=i.slice(d,i.length))),this.push({data:z.utf8decode(v),meta:n.meta})},e.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:z.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},z.Utf8DecodeWorker=e,k.inherits(r,s),r.prototype.processChunk=function(n){this.push({data:z.utf8encode(n.data),meta:n.meta})},z.Utf8EncodeWorker=r},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(a,D,z){var k=a("./support"),A=a("./base64"),h=a("./nodejsUtils"),s=a("./external");function l(o){return o}function t(o,d){for(var v=0;v<o.length;++v)d[v]=255&o.charCodeAt(v);return d}a("setimmediate"),z.newBlob=function(o,d){z.checkSupport("blob");try{return new Blob([o],{type:d})}catch{try{var v=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return v.append(o),v.getBlob(d)}catch{throw new Error("Bug : can't construct the Blob.")}}};var e={stringifyByChunk:function(o,d,v){var _=[],C=0,$=o.length;if($<=v)return String.fromCharCode.apply(null,o);for(;C<$;)d==="array"||d==="nodebuffer"?_.push(String.fromCharCode.apply(null,o.slice(C,Math.min(C+v,$)))):_.push(String.fromCharCode.apply(null,o.subarray(C,Math.min(C+v,$)))),C+=v;return _.join("")},stringifyByChar:function(o){for(var d="",v=0;v<o.length;v++)d+=String.fromCharCode(o[v]);return d},applyCanBeUsed:{uint8array:function(){try{return k.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return k.nodebuffer&&String.fromCharCode.apply(null,h.allocBuffer(1)).length===1}catch{return!1}}()}};function r(o){var d=65536,v=z.getTypeOf(o),_=!0;if(v==="uint8array"?_=e.applyCanBeUsed.uint8array:v==="nodebuffer"&&(_=e.applyCanBeUsed.nodebuffer),_)for(;1<d;)try{return e.stringifyByChunk(o,v,d)}catch{d=Math.floor(d/2)}return e.stringifyByChar(o)}function n(o,d){for(var v=0;v<o.length;v++)d[v]=o[v];return d}z.applyFromCharCode=r;var i={};i.string={string:l,array:function(o){return t(o,new Array(o.length))},arraybuffer:function(o){return i.string.uint8array(o).buffer},uint8array:function(o){return t(o,new Uint8Array(o.length))},nodebuffer:function(o){return t(o,h.allocBuffer(o.length))}},i.array={string:r,array:l,arraybuffer:function(o){return new Uint8Array(o).buffer},uint8array:function(o){return new Uint8Array(o)},nodebuffer:function(o){return h.newBufferFrom(o)}},i.arraybuffer={string:function(o){return r(new Uint8Array(o))},array:function(o){return n(new Uint8Array(o),new Array(o.byteLength))},arraybuffer:l,uint8array:function(o){return new Uint8Array(o)},nodebuffer:function(o){return h.newBufferFrom(new Uint8Array(o))}},i.uint8array={string:r,array:function(o){return n(o,new Array(o.length))},arraybuffer:function(o){return o.buffer},uint8array:l,nodebuffer:function(o){return h.newBufferFrom(o)}},i.nodebuffer={string:r,array:function(o){return n(o,new Array(o.length))},arraybuffer:function(o){return i.nodebuffer.uint8array(o).buffer},uint8array:function(o){return n(o,new Uint8Array(o.length))},nodebuffer:l},z.transformTo=function(o,d){if(d=d||"",!o)return d;z.checkSupport(o);var v=z.getTypeOf(d);return i[v][o](d)},z.resolve=function(o){for(var d=o.split("/"),v=[],_=0;_<d.length;_++){var C=d[_];C==="."||C===""&&_!==0&&_!==d.length-1||(C===".."?v.pop():v.push(C))}return v.join("/")},z.getTypeOf=function(o){return typeof o=="string"?"string":Object.prototype.toString.call(o)==="[object Array]"?"array":k.nodebuffer&&h.isBuffer(o)?"nodebuffer":k.uint8array&&o instanceof Uint8Array?"uint8array":k.arraybuffer&&o instanceof ArrayBuffer?"arraybuffer":void 0},z.checkSupport=function(o){if(!k[o.toLowerCase()])throw new Error(o+" is not supported by this platform")},z.MAX_VALUE_16BITS=65535,z.MAX_VALUE_32BITS=-1,z.pretty=function(o){var d,v,_="";for(v=0;v<(o||"").length;v++)_+="\\x"+((d=o.charCodeAt(v))<16?"0":"")+d.toString(16).toUpperCase();return _},z.delay=function(o,d,v){setImmediate(function(){o.apply(v||null,d||[])})},z.inherits=function(o,d){function v(){}v.prototype=d.prototype,o.prototype=new v},z.extend=function(){var o,d,v={};for(o=0;o<arguments.length;o++)for(d in arguments[o])Object.prototype.hasOwnProperty.call(arguments[o],d)&&v[d]===void 0&&(v[d]=arguments[o][d]);return v},z.prepareContent=function(o,d,v,_,C){return s.Promise.resolve(d).then(function($){return k.blob&&($ instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call($))!==-1)&&typeof FileReader<"u"?new s.Promise(function(c,g){var E=new FileReader;E.onload=function(m){c(m.target.result)},E.onerror=function(m){g(m.target.error)},E.readAsArrayBuffer($)}):$}).then(function($){var c=z.getTypeOf($);return c?(c==="arraybuffer"?$=z.transformTo("uint8array",$):c==="string"&&(C?$=A.decode($):v&&_!==!0&&($=function(g){return t(g,k.uint8array?new Uint8Array(g.length):new Array(g.length))}($))),$):s.Promise.reject(new Error("Can't read the data of '"+o+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(a,D,z){var k=a("./reader/readerFor"),A=a("./utils"),h=a("./signature"),s=a("./zipEntry"),l=a("./support");function t(e){this.files=[],this.loadOptions=e}t.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var r=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+A.pretty(r)+", expected "+A.pretty(e)+")")}},isSignature:function(e,r){var n=this.reader.index;this.reader.setIndex(e);var i=this.reader.readString(4)===r;return this.reader.setIndex(n),i},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),r=l.uint8array?"uint8array":"array",n=A.transformTo(r,e);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,r,n,i=this.zip64EndOfCentralSize-44;0<i;)e=this.reader.readInt(2),r=this.reader.readInt(4),n=this.reader.readData(r),this.zip64ExtensibleData[e]={id:e,length:r,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,r;for(e=0;e<this.files.length;e++)r=this.files[e],this.reader.setIndex(r.localHeaderOffset),this.checkSignature(h.LOCAL_FILE_HEADER),r.readLocalPart(this.reader),r.handleUTF8(),r.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(h.CENTRAL_FILE_HEADER);)(e=new s({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(h.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,h.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var r=e;if(this.checkSignature(h.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===A.MAX_VALUE_16BITS||this.diskWithCentralDirStart===A.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===A.MAX_VALUE_16BITS||this.centralDirRecords===A.MAX_VALUE_16BITS||this.centralDirSize===A.MAX_VALUE_32BITS||this.centralDirOffset===A.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(h.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(h.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,h.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(h.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(h.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var i=r-n;if(0<i)this.isSignature(r,h.CENTRAL_FILE_HEADER)||(this.reader.zero=i);else if(i<0)throw new Error("Corrupted zip: missing "+Math.abs(i)+" bytes.")},prepareReader:function(e){this.reader=k(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},D.exports=t},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(a,D,z){var k=a("./reader/readerFor"),A=a("./utils"),h=a("./compressedObject"),s=a("./crc32"),l=a("./utf8"),t=a("./compressions"),e=a("./support");function r(n,i){this.options=n,this.loadOptions=i}r.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(n){var i,o;if(n.skip(22),this.fileNameLength=n.readInt(2),o=n.readInt(2),this.fileName=n.readData(this.fileNameLength),n.skip(o),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((i=function(d){for(var v in t)if(Object.prototype.hasOwnProperty.call(t,v)&&t[v].magic===d)return t[v];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+A.pretty(this.compressionMethod)+" unknown (inner file : "+A.transformTo("string",this.fileName)+")");this.decompressed=new h(this.compressedSize,this.uncompressedSize,this.crc32,i,n.readData(this.compressedSize))},readCentralPart:function(n){this.versionMadeBy=n.readInt(2),n.skip(2),this.bitFlag=n.readInt(2),this.compressionMethod=n.readString(2),this.date=n.readDate(),this.crc32=n.readInt(4),this.compressedSize=n.readInt(4),this.uncompressedSize=n.readInt(4);var i=n.readInt(2);if(this.extraFieldsLength=n.readInt(2),this.fileCommentLength=n.readInt(2),this.diskNumberStart=n.readInt(2),this.internalFileAttributes=n.readInt(2),this.externalFileAttributes=n.readInt(4),this.localHeaderOffset=n.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");n.skip(i),this.readExtraFields(n),this.parseZIP64ExtraField(n),this.fileComment=n.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var n=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),n==0&&(this.dosPermissions=63&this.externalFileAttributes),n==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var n=k(this.extraFields[1].value);this.uncompressedSize===A.MAX_VALUE_32BITS&&(this.uncompressedSize=n.readInt(8)),this.compressedSize===A.MAX_VALUE_32BITS&&(this.compressedSize=n.readInt(8)),this.localHeaderOffset===A.MAX_VALUE_32BITS&&(this.localHeaderOffset=n.readInt(8)),this.diskNumberStart===A.MAX_VALUE_32BITS&&(this.diskNumberStart=n.readInt(4))}},readExtraFields:function(n){var i,o,d,v=n.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});n.index+4<v;)i=n.readInt(2),o=n.readInt(2),d=n.readData(o),this.extraFields[i]={id:i,length:o,value:d};n.setIndex(v)},handleUTF8:function(){var n=e.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=l.utf8decode(this.fileName),this.fileCommentStr=l.utf8decode(this.fileComment);else{var i=this.findExtraFieldUnicodePath();if(i!==null)this.fileNameStr=i;else{var o=A.transformTo(n,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(o)}var d=this.findExtraFieldUnicodeComment();if(d!==null)this.fileCommentStr=d;else{var v=A.transformTo(n,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(v)}}},findExtraFieldUnicodePath:function(){var n=this.extraFields[28789];if(n){var i=k(n.value);return i.readInt(1)!==1||s(this.fileName)!==i.readInt(4)?null:l.utf8decode(i.readData(n.length-5))}return null},findExtraFieldUnicodeComment:function(){var n=this.extraFields[25461];if(n){var i=k(n.value);return i.readInt(1)!==1||s(this.fileComment)!==i.readInt(4)?null:l.utf8decode(i.readData(n.length-5))}return null}},D.exports=r},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(a,D,z){function k(i,o,d){this.name=i,this.dir=d.dir,this.date=d.date,this.comment=d.comment,this.unixPermissions=d.unixPermissions,this.dosPermissions=d.dosPermissions,this._data=o,this._dataBinary=d.binary,this.options={compression:d.compression,compressionOptions:d.compressionOptions}}var A=a("./stream/StreamHelper"),h=a("./stream/DataWorker"),s=a("./utf8"),l=a("./compressedObject"),t=a("./stream/GenericWorker");k.prototype={internalStream:function(i){var o=null,d="string";try{if(!i)throw new Error("No output type specified.");var v=(d=i.toLowerCase())==="string"||d==="text";d!=="binarystring"&&d!=="text"||(d="string"),o=this._decompressWorker();var _=!this._dataBinary;_&&!v&&(o=o.pipe(new s.Utf8EncodeWorker)),!_&&v&&(o=o.pipe(new s.Utf8DecodeWorker))}catch(C){(o=new t("error")).error(C)}return new A(o,d,"")},async:function(i,o){return this.internalStream(i).accumulate(o)},nodeStream:function(i,o){return this.internalStream(i||"nodebuffer").toNodejsStream(o)},_compressWorker:function(i,o){if(this._data instanceof l&&this._data.compression.magic===i.magic)return this._data.getCompressedWorker();var d=this._decompressWorker();return this._dataBinary||(d=d.pipe(new s.Utf8EncodeWorker)),l.createWorkerFrom(d,i,o)},_decompressWorker:function(){return this._data instanceof l?this._data.getContentWorker():this._data instanceof t?this._data:new h(this._data)}};for(var e=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],r=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},n=0;n<e.length;n++)k.prototype[e[n]]=r;D.exports=k},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(a,D,z){(function(k){var A,h,s=k.MutationObserver||k.WebKitMutationObserver;if(s){var l=0,t=new s(i),e=k.document.createTextNode("");t.observe(e,{characterData:!0}),A=function(){e.data=l=++l%2}}else if(k.setImmediate||k.MessageChannel===void 0)A="document"in k&&"onreadystatechange"in k.document.createElement("script")?function(){var o=k.document.createElement("script");o.onreadystatechange=function(){i(),o.onreadystatechange=null,o.parentNode.removeChild(o),o=null},k.document.documentElement.appendChild(o)}:function(){setTimeout(i,0)};else{var r=new k.MessageChannel;r.port1.onmessage=i,A=function(){r.port2.postMessage(0)}}var n=[];function i(){var o,d;h=!0;for(var v=n.length;v;){for(d=n,n=[],o=-1;++o<v;)d[o]();v=n.length}h=!1}D.exports=function(o){n.push(o)!==1||h||A()}}).call(this,typeof Gr<"u"?Gr:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(a,D,z){var k=a("immediate");function A(){}var h={},s=["REJECTED"],l=["FULFILLED"],t=["PENDING"];function e(v){if(typeof v!="function")throw new TypeError("resolver must be a function");this.state=t,this.queue=[],this.outcome=void 0,v!==A&&o(this,v)}function r(v,_,C){this.promise=v,typeof _=="function"&&(this.onFulfilled=_,this.callFulfilled=this.otherCallFulfilled),typeof C=="function"&&(this.onRejected=C,this.callRejected=this.otherCallRejected)}function n(v,_,C){k(function(){var $;try{$=_(C)}catch(c){return h.reject(v,c)}$===v?h.reject(v,new TypeError("Cannot resolve promise with itself")):h.resolve(v,$)})}function i(v){var _=v&&v.then;if(v&&(typeof v=="object"||typeof v=="function")&&typeof _=="function")return function(){_.apply(v,arguments)}}function o(v,_){var C=!1;function $(E){C||(C=!0,h.reject(v,E))}function c(E){C||(C=!0,h.resolve(v,E))}var g=d(function(){_(c,$)});g.status==="error"&&$(g.value)}function d(v,_){var C={};try{C.value=v(_),C.status="success"}catch($){C.status="error",C.value=$}return C}(D.exports=e).prototype.finally=function(v){if(typeof v!="function")return this;var _=this.constructor;return this.then(function(C){return _.resolve(v()).then(function(){return C})},function(C){return _.resolve(v()).then(function(){throw C})})},e.prototype.catch=function(v){return this.then(null,v)},e.prototype.then=function(v,_){if(typeof v!="function"&&this.state===l||typeof _!="function"&&this.state===s)return this;var C=new this.constructor(A);return this.state!==t?n(C,this.state===l?v:_,this.outcome):this.queue.push(new r(C,v,_)),C},r.prototype.callFulfilled=function(v){h.resolve(this.promise,v)},r.prototype.otherCallFulfilled=function(v){n(this.promise,this.onFulfilled,v)},r.prototype.callRejected=function(v){h.reject(this.promise,v)},r.prototype.otherCallRejected=function(v){n(this.promise,this.onRejected,v)},h.resolve=function(v,_){var C=d(i,_);if(C.status==="error")return h.reject(v,C.value);var $=C.value;if($)o(v,$);else{v.state=l,v.outcome=_;for(var c=-1,g=v.queue.length;++c<g;)v.queue[c].callFulfilled(_)}return v},h.reject=function(v,_){v.state=s,v.outcome=_;for(var C=-1,$=v.queue.length;++C<$;)v.queue[C].callRejected(_);return v},e.resolve=function(v){return v instanceof this?v:h.resolve(new this(A),v)},e.reject=function(v){var _=new this(A);return h.reject(_,v)},e.all=function(v){var _=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=v.length,$=!1;if(!C)return this.resolve([]);for(var c=new Array(C),g=0,E=-1,m=new this(A);++E<C;)p(v[E],E);return m;function p(f,F){_.resolve(f).then(function(R){c[F]=R,++g!==C||$||($=!0,h.resolve(m,c))},function(R){$||($=!0,h.reject(m,R))})}},e.race=function(v){var _=this;if(Object.prototype.toString.call(v)!=="[object Array]")return this.reject(new TypeError("must be an array"));var C=v.length,$=!1;if(!C)return this.resolve([]);for(var c=-1,g=new this(A);++c<C;)E=v[c],_.resolve(E).then(function(m){$||($=!0,h.resolve(g,m))},function(m){$||($=!0,h.reject(g,m))});var E;return g}},{immediate:36}],38:[function(a,D,z){var k={};(0,a("./lib/utils/common").assign)(k,a("./lib/deflate"),a("./lib/inflate"),a("./lib/zlib/constants")),D.exports=k},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(a,D,z){var k=a("./zlib/deflate"),A=a("./utils/common"),h=a("./utils/strings"),s=a("./zlib/messages"),l=a("./zlib/zstream"),t=Object.prototype.toString,e=0,r=-1,n=0,i=8;function o(v){if(!(this instanceof o))return new o(v);this.options=A.assign({level:r,method:i,chunkSize:16384,windowBits:15,memLevel:8,strategy:n,to:""},v||{});var _=this.options;_.raw&&0<_.windowBits?_.windowBits=-_.windowBits:_.gzip&&0<_.windowBits&&_.windowBits<16&&(_.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var C=k.deflateInit2(this.strm,_.level,_.method,_.windowBits,_.memLevel,_.strategy);if(C!==e)throw new Error(s[C]);if(_.header&&k.deflateSetHeader(this.strm,_.header),_.dictionary){var $;if($=typeof _.dictionary=="string"?h.string2buf(_.dictionary):t.call(_.dictionary)==="[object ArrayBuffer]"?new Uint8Array(_.dictionary):_.dictionary,(C=k.deflateSetDictionary(this.strm,$))!==e)throw new Error(s[C]);this._dict_set=!0}}function d(v,_){var C=new o(_);if(C.push(v,!0),C.err)throw C.msg||s[C.err];return C.result}o.prototype.push=function(v,_){var C,$,c=this.strm,g=this.options.chunkSize;if(this.ended)return!1;$=_===~~_?_:_===!0?4:0,typeof v=="string"?c.input=h.string2buf(v):t.call(v)==="[object ArrayBuffer]"?c.input=new Uint8Array(v):c.input=v,c.next_in=0,c.avail_in=c.input.length;do{if(c.avail_out===0&&(c.output=new A.Buf8(g),c.next_out=0,c.avail_out=g),(C=k.deflate(c,$))!==1&&C!==e)return this.onEnd(C),!(this.ended=!0);c.avail_out!==0&&(c.avail_in!==0||$!==4&&$!==2)||(this.options.to==="string"?this.onData(h.buf2binstring(A.shrinkBuf(c.output,c.next_out))):this.onData(A.shrinkBuf(c.output,c.next_out)))}while((0<c.avail_in||c.avail_out===0)&&C!==1);return $===4?(C=k.deflateEnd(this.strm),this.onEnd(C),this.ended=!0,C===e):$!==2||(this.onEnd(e),!(c.avail_out=0))},o.prototype.onData=function(v){this.chunks.push(v)},o.prototype.onEnd=function(v){v===e&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=A.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg},z.Deflate=o,z.deflate=d,z.deflateRaw=function(v,_){return(_=_||{}).raw=!0,d(v,_)},z.gzip=function(v,_){return(_=_||{}).gzip=!0,d(v,_)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(a,D,z){var k=a("./zlib/inflate"),A=a("./utils/common"),h=a("./utils/strings"),s=a("./zlib/constants"),l=a("./zlib/messages"),t=a("./zlib/zstream"),e=a("./zlib/gzheader"),r=Object.prototype.toString;function n(o){if(!(this instanceof n))return new n(o);this.options=A.assign({chunkSize:16384,windowBits:0,to:""},o||{});var d=this.options;d.raw&&0<=d.windowBits&&d.windowBits<16&&(d.windowBits=-d.windowBits,d.windowBits===0&&(d.windowBits=-15)),!(0<=d.windowBits&&d.windowBits<16)||o&&o.windowBits||(d.windowBits+=32),15<d.windowBits&&d.windowBits<48&&!(15&d.windowBits)&&(d.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new t,this.strm.avail_out=0;var v=k.inflateInit2(this.strm,d.windowBits);if(v!==s.Z_OK)throw new Error(l[v]);this.header=new e,k.inflateGetHeader(this.strm,this.header)}function i(o,d){var v=new n(d);if(v.push(o,!0),v.err)throw v.msg||l[v.err];return v.result}n.prototype.push=function(o,d){var v,_,C,$,c,g,E=this.strm,m=this.options.chunkSize,p=this.options.dictionary,f=!1;if(this.ended)return!1;_=d===~~d?d:d===!0?s.Z_FINISH:s.Z_NO_FLUSH,typeof o=="string"?E.input=h.binstring2buf(o):r.call(o)==="[object ArrayBuffer]"?E.input=new Uint8Array(o):E.input=o,E.next_in=0,E.avail_in=E.input.length;do{if(E.avail_out===0&&(E.output=new A.Buf8(m),E.next_out=0,E.avail_out=m),(v=k.inflate(E,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&p&&(g=typeof p=="string"?h.string2buf(p):r.call(p)==="[object ArrayBuffer]"?new Uint8Array(p):p,v=k.inflateSetDictionary(this.strm,g)),v===s.Z_BUF_ERROR&&f===!0&&(v=s.Z_OK,f=!1),v!==s.Z_STREAM_END&&v!==s.Z_OK)return this.onEnd(v),!(this.ended=!0);E.next_out&&(E.avail_out!==0&&v!==s.Z_STREAM_END&&(E.avail_in!==0||_!==s.Z_FINISH&&_!==s.Z_SYNC_FLUSH)||(this.options.to==="string"?(C=h.utf8border(E.output,E.next_out),$=E.next_out-C,c=h.buf2string(E.output,C),E.next_out=$,E.avail_out=m-$,$&&A.arraySet(E.output,E.output,C,$,0),this.onData(c)):this.onData(A.shrinkBuf(E.output,E.next_out)))),E.avail_in===0&&E.avail_out===0&&(f=!0)}while((0<E.avail_in||E.avail_out===0)&&v!==s.Z_STREAM_END);return v===s.Z_STREAM_END&&(_=s.Z_FINISH),_===s.Z_FINISH?(v=k.inflateEnd(this.strm),this.onEnd(v),this.ended=!0,v===s.Z_OK):_!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),!(E.avail_out=0))},n.prototype.onData=function(o){this.chunks.push(o)},n.prototype.onEnd=function(o){o===s.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=A.flattenChunks(this.chunks)),this.chunks=[],this.err=o,this.msg=this.strm.msg},z.Inflate=n,z.inflate=i,z.inflateRaw=function(o,d){return(d=d||{}).raw=!0,i(o,d)},z.ungzip=i},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(a,D,z){var k=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";z.assign=function(s){for(var l=Array.prototype.slice.call(arguments,1);l.length;){var t=l.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(var e in t)t.hasOwnProperty(e)&&(s[e]=t[e])}}return s},z.shrinkBuf=function(s,l){return s.length===l?s:s.subarray?s.subarray(0,l):(s.length=l,s)};var A={arraySet:function(s,l,t,e,r){if(l.subarray&&s.subarray)s.set(l.subarray(t,t+e),r);else for(var n=0;n<e;n++)s[r+n]=l[t+n]},flattenChunks:function(s){var l,t,e,r,n,i;for(l=e=0,t=s.length;l<t;l++)e+=s[l].length;for(i=new Uint8Array(e),l=r=0,t=s.length;l<t;l++)n=s[l],i.set(n,r),r+=n.length;return i}},h={arraySet:function(s,l,t,e,r){for(var n=0;n<e;n++)s[r+n]=l[t+n]},flattenChunks:function(s){return[].concat.apply([],s)}};z.setTyped=function(s){s?(z.Buf8=Uint8Array,z.Buf16=Uint16Array,z.Buf32=Int32Array,z.assign(z,A)):(z.Buf8=Array,z.Buf16=Array,z.Buf32=Array,z.assign(z,h))},z.setTyped(k)},{}],42:[function(a,D,z){var k=a("./common"),A=!0,h=!0;try{String.fromCharCode.apply(null,[0])}catch{A=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{h=!1}for(var s=new k.Buf8(256),l=0;l<256;l++)s[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function t(e,r){if(r<65537&&(e.subarray&&h||!e.subarray&&A))return String.fromCharCode.apply(null,k.shrinkBuf(e,r));for(var n="",i=0;i<r;i++)n+=String.fromCharCode(e[i]);return n}s[254]=s[254]=1,z.string2buf=function(e){var r,n,i,o,d,v=e.length,_=0;for(o=0;o<v;o++)(64512&(n=e.charCodeAt(o)))==55296&&o+1<v&&(64512&(i=e.charCodeAt(o+1)))==56320&&(n=65536+(n-55296<<10)+(i-56320),o++),_+=n<128?1:n<2048?2:n<65536?3:4;for(r=new k.Buf8(_),o=d=0;d<_;o++)(64512&(n=e.charCodeAt(o)))==55296&&o+1<v&&(64512&(i=e.charCodeAt(o+1)))==56320&&(n=65536+(n-55296<<10)+(i-56320),o++),n<128?r[d++]=n:(n<2048?r[d++]=192|n>>>6:(n<65536?r[d++]=224|n>>>12:(r[d++]=240|n>>>18,r[d++]=128|n>>>12&63),r[d++]=128|n>>>6&63),r[d++]=128|63&n);return r},z.buf2binstring=function(e){return t(e,e.length)},z.binstring2buf=function(e){for(var r=new k.Buf8(e.length),n=0,i=r.length;n<i;n++)r[n]=e.charCodeAt(n);return r},z.buf2string=function(e,r){var n,i,o,d,v=r||e.length,_=new Array(2*v);for(n=i=0;n<v;)if((o=e[n++])<128)_[i++]=o;else if(4<(d=s[o]))_[i++]=65533,n+=d-1;else{for(o&=d===2?31:d===3?15:7;1<d&&n<v;)o=o<<6|63&e[n++],d--;1<d?_[i++]=65533:o<65536?_[i++]=o:(o-=65536,_[i++]=55296|o>>10&1023,_[i++]=56320|1023&o)}return t(_,i)},z.utf8border=function(e,r){var n;for((r=r||e.length)>e.length&&(r=e.length),n=r-1;0<=n&&(192&e[n])==128;)n--;return n<0||n===0?r:n+s[e[n]]>r?n:r}},{"./common":41}],43:[function(a,D,z){D.exports=function(k,A,h,s){for(var l=65535&k|0,t=k>>>16&65535|0,e=0;h!==0;){for(h-=e=2e3<h?2e3:h;t=t+(l=l+A[s++]|0)|0,--e;);l%=65521,t%=65521}return l|t<<16|0}},{}],44:[function(a,D,z){D.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(a,D,z){var k=function(){for(var A,h=[],s=0;s<256;s++){A=s;for(var l=0;l<8;l++)A=1&A?3988292384^A>>>1:A>>>1;h[s]=A}return h}();D.exports=function(A,h,s,l){var t=k,e=l+s;A^=-1;for(var r=l;r<e;r++)A=A>>>8^t[255&(A^h[r])];return-1^A}},{}],46:[function(a,D,z){var k,A=a("../utils/common"),h=a("./trees"),s=a("./adler32"),l=a("./crc32"),t=a("./messages"),e=0,r=4,n=0,i=-2,o=-1,d=4,v=2,_=8,C=9,$=286,c=30,g=19,E=2*$+1,m=15,p=3,f=258,F=f+p+1,R=42,I=113,S=1,P=2,G=3,Z=4;function ae(B,_e){return B.msg=t[_e],_e}function re(B){return(B<<1)-(4<B?9:0)}function ce(B){for(var _e=B.length;0<=--_e;)B[_e]=0}function j(B){var _e=B.state,me=_e.pending;me>B.avail_out&&(me=B.avail_out),me!==0&&(A.arraySet(B.output,_e.pending_buf,_e.pending_out,me,B.next_out),B.next_out+=me,_e.pending_out+=me,B.total_out+=me,B.avail_out-=me,_e.pending-=me,_e.pending===0&&(_e.pending_out=0))}function ee(B,_e){h._tr_flush_block(B,0<=B.block_start?B.block_start:-1,B.strstart-B.block_start,_e),B.block_start=B.strstart,j(B.strm)}function ie(B,_e){B.pending_buf[B.pending++]=_e}function fe(B,_e){B.pending_buf[B.pending++]=_e>>>8&255,B.pending_buf[B.pending++]=255&_e}function he(B,_e){var me,te,Q=B.max_chain_length,Y=B.strstart,pe=B.prev_length,le=B.nice_match,se=B.strstart>B.w_size-F?B.strstart-(B.w_size-F):0,ve=B.window,Se=B.w_mask,$e=B.prev,Ae=B.strstart+f,Ge=ve[Y+pe-1],be=ve[Y+pe];B.prev_length>=B.good_match&&(Q>>=2),le>B.lookahead&&(le=B.lookahead);do if(ve[(me=_e)+pe]===be&&ve[me+pe-1]===Ge&&ve[me]===ve[Y]&&ve[++me]===ve[Y+1]){Y+=2,me++;do;while(ve[++Y]===ve[++me]&&ve[++Y]===ve[++me]&&ve[++Y]===ve[++me]&&ve[++Y]===ve[++me]&&ve[++Y]===ve[++me]&&ve[++Y]===ve[++me]&&ve[++Y]===ve[++me]&&ve[++Y]===ve[++me]&&Y<Ae);if(te=f-(Ae-Y),Y=Ae-f,pe<te){if(B.match_start=_e,le<=(pe=te))break;Ge=ve[Y+pe-1],be=ve[Y+pe]}}while((_e=$e[_e&Se])>se&&--Q!=0);return pe<=B.lookahead?pe:B.lookahead}function ye(B){var _e,me,te,Q,Y,pe,le,se,ve,Se,$e=B.w_size;do{if(Q=B.window_size-B.lookahead-B.strstart,B.strstart>=$e+($e-F)){for(A.arraySet(B.window,B.window,$e,$e,0),B.match_start-=$e,B.strstart-=$e,B.block_start-=$e,_e=me=B.hash_size;te=B.head[--_e],B.head[_e]=$e<=te?te-$e:0,--me;);for(_e=me=$e;te=B.prev[--_e],B.prev[_e]=$e<=te?te-$e:0,--me;);Q+=$e}if(B.strm.avail_in===0)break;if(pe=B.strm,le=B.window,se=B.strstart+B.lookahead,ve=Q,Se=void 0,Se=pe.avail_in,ve<Se&&(Se=ve),me=Se===0?0:(pe.avail_in-=Se,A.arraySet(le,pe.input,pe.next_in,Se,se),pe.state.wrap===1?pe.adler=s(pe.adler,le,Se,se):pe.state.wrap===2&&(pe.adler=l(pe.adler,le,Se,se)),pe.next_in+=Se,pe.total_in+=Se,Se),B.lookahead+=me,B.lookahead+B.insert>=p)for(Y=B.strstart-B.insert,B.ins_h=B.window[Y],B.ins_h=(B.ins_h<<B.hash_shift^B.window[Y+1])&B.hash_mask;B.insert&&(B.ins_h=(B.ins_h<<B.hash_shift^B.window[Y+p-1])&B.hash_mask,B.prev[Y&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=Y,Y++,B.insert--,!(B.lookahead+B.insert<p)););}while(B.lookahead<F&&B.strm.avail_in!==0)}function Te(B,_e){for(var me,te;;){if(B.lookahead<F){if(ye(B),B.lookahead<F&&_e===e)return S;if(B.lookahead===0)break}if(me=0,B.lookahead>=p&&(B.ins_h=(B.ins_h<<B.hash_shift^B.window[B.strstart+p-1])&B.hash_mask,me=B.prev[B.strstart&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=B.strstart),me!==0&&B.strstart-me<=B.w_size-F&&(B.match_length=he(B,me)),B.match_length>=p)if(te=h._tr_tally(B,B.strstart-B.match_start,B.match_length-p),B.lookahead-=B.match_length,B.match_length<=B.max_lazy_match&&B.lookahead>=p){for(B.match_length--;B.strstart++,B.ins_h=(B.ins_h<<B.hash_shift^B.window[B.strstart+p-1])&B.hash_mask,me=B.prev[B.strstart&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=B.strstart,--B.match_length!=0;);B.strstart++}else B.strstart+=B.match_length,B.match_length=0,B.ins_h=B.window[B.strstart],B.ins_h=(B.ins_h<<B.hash_shift^B.window[B.strstart+1])&B.hash_mask;else te=h._tr_tally(B,0,B.window[B.strstart]),B.lookahead--,B.strstart++;if(te&&(ee(B,!1),B.strm.avail_out===0))return S}return B.insert=B.strstart<p-1?B.strstart:p-1,_e===r?(ee(B,!0),B.strm.avail_out===0?G:Z):B.last_lit&&(ee(B,!1),B.strm.avail_out===0)?S:P}function ke(B,_e){for(var me,te,Q;;){if(B.lookahead<F){if(ye(B),B.lookahead<F&&_e===e)return S;if(B.lookahead===0)break}if(me=0,B.lookahead>=p&&(B.ins_h=(B.ins_h<<B.hash_shift^B.window[B.strstart+p-1])&B.hash_mask,me=B.prev[B.strstart&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=B.strstart),B.prev_length=B.match_length,B.prev_match=B.match_start,B.match_length=p-1,me!==0&&B.prev_length<B.max_lazy_match&&B.strstart-me<=B.w_size-F&&(B.match_length=he(B,me),B.match_length<=5&&(B.strategy===1||B.match_length===p&&4096<B.strstart-B.match_start)&&(B.match_length=p-1)),B.prev_length>=p&&B.match_length<=B.prev_length){for(Q=B.strstart+B.lookahead-p,te=h._tr_tally(B,B.strstart-1-B.prev_match,B.prev_length-p),B.lookahead-=B.prev_length-1,B.prev_length-=2;++B.strstart<=Q&&(B.ins_h=(B.ins_h<<B.hash_shift^B.window[B.strstart+p-1])&B.hash_mask,me=B.prev[B.strstart&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=B.strstart),--B.prev_length!=0;);if(B.match_available=0,B.match_length=p-1,B.strstart++,te&&(ee(B,!1),B.strm.avail_out===0))return S}else if(B.match_available){if((te=h._tr_tally(B,0,B.window[B.strstart-1]))&&ee(B,!1),B.strstart++,B.lookahead--,B.strm.avail_out===0)return S}else B.match_available=1,B.strstart++,B.lookahead--}return B.match_available&&(te=h._tr_tally(B,0,B.window[B.strstart-1]),B.match_available=0),B.insert=B.strstart<p-1?B.strstart:p-1,_e===r?(ee(B,!0),B.strm.avail_out===0?G:Z):B.last_lit&&(ee(B,!1),B.strm.avail_out===0)?S:P}function Fe(B,_e,me,te,Q){this.good_length=B,this.max_lazy=_e,this.nice_length=me,this.max_chain=te,this.func=Q}function De(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=_,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new A.Buf16(2*E),this.dyn_dtree=new A.Buf16(2*(2*c+1)),this.bl_tree=new A.Buf16(2*(2*g+1)),ce(this.dyn_ltree),ce(this.dyn_dtree),ce(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new A.Buf16(m+1),this.heap=new A.Buf16(2*$+1),ce(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new A.Buf16(2*$+1),ce(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Pe(B){var _e;return B&&B.state?(B.total_in=B.total_out=0,B.data_type=v,(_e=B.state).pending=0,_e.pending_out=0,_e.wrap<0&&(_e.wrap=-_e.wrap),_e.status=_e.wrap?R:I,B.adler=_e.wrap===2?0:1,_e.last_flush=e,h._tr_init(_e),n):ae(B,i)}function Ye(B){var _e=Pe(B);return _e===n&&function(me){me.window_size=2*me.w_size,ce(me.head),me.max_lazy_match=k[me.level].max_lazy,me.good_match=k[me.level].good_length,me.nice_match=k[me.level].nice_length,me.max_chain_length=k[me.level].max_chain,me.strstart=0,me.block_start=0,me.lookahead=0,me.insert=0,me.match_length=me.prev_length=p-1,me.match_available=0,me.ins_h=0}(B.state),_e}function qe(B,_e,me,te,Q,Y){if(!B)return i;var pe=1;if(_e===o&&(_e=6),te<0?(pe=0,te=-te):15<te&&(pe=2,te-=16),Q<1||C<Q||me!==_||te<8||15<te||_e<0||9<_e||Y<0||d<Y)return ae(B,i);te===8&&(te=9);var le=new De;return(B.state=le).strm=B,le.wrap=pe,le.gzhead=null,le.w_bits=te,le.w_size=1<<le.w_bits,le.w_mask=le.w_size-1,le.hash_bits=Q+7,le.hash_size=1<<le.hash_bits,le.hash_mask=le.hash_size-1,le.hash_shift=~~((le.hash_bits+p-1)/p),le.window=new A.Buf8(2*le.w_size),le.head=new A.Buf16(le.hash_size),le.prev=new A.Buf16(le.w_size),le.lit_bufsize=1<<Q+6,le.pending_buf_size=4*le.lit_bufsize,le.pending_buf=new A.Buf8(le.pending_buf_size),le.d_buf=1*le.lit_bufsize,le.l_buf=3*le.lit_bufsize,le.level=_e,le.strategy=Y,le.method=me,Ye(B)}k=[new Fe(0,0,0,0,function(B,_e){var me=65535;for(me>B.pending_buf_size-5&&(me=B.pending_buf_size-5);;){if(B.lookahead<=1){if(ye(B),B.lookahead===0&&_e===e)return S;if(B.lookahead===0)break}B.strstart+=B.lookahead,B.lookahead=0;var te=B.block_start+me;if((B.strstart===0||B.strstart>=te)&&(B.lookahead=B.strstart-te,B.strstart=te,ee(B,!1),B.strm.avail_out===0)||B.strstart-B.block_start>=B.w_size-F&&(ee(B,!1),B.strm.avail_out===0))return S}return B.insert=0,_e===r?(ee(B,!0),B.strm.avail_out===0?G:Z):(B.strstart>B.block_start&&(ee(B,!1),B.strm.avail_out),S)}),new Fe(4,4,8,4,Te),new Fe(4,5,16,8,Te),new Fe(4,6,32,32,Te),new Fe(4,4,16,16,ke),new Fe(8,16,32,32,ke),new Fe(8,16,128,128,ke),new Fe(8,32,128,256,ke),new Fe(32,128,258,1024,ke),new Fe(32,258,258,4096,ke)],z.deflateInit=function(B,_e){return qe(B,_e,_,15,8,0)},z.deflateInit2=qe,z.deflateReset=Ye,z.deflateResetKeep=Pe,z.deflateSetHeader=function(B,_e){return B&&B.state?B.state.wrap!==2?i:(B.state.gzhead=_e,n):i},z.deflate=function(B,_e){var me,te,Q,Y;if(!B||!B.state||5<_e||_e<0)return B?ae(B,i):i;if(te=B.state,!B.output||!B.input&&B.avail_in!==0||te.status===666&&_e!==r)return ae(B,B.avail_out===0?-5:i);if(te.strm=B,me=te.last_flush,te.last_flush=_e,te.status===R)if(te.wrap===2)B.adler=0,ie(te,31),ie(te,139),ie(te,8),te.gzhead?(ie(te,(te.gzhead.text?1:0)+(te.gzhead.hcrc?2:0)+(te.gzhead.extra?4:0)+(te.gzhead.name?8:0)+(te.gzhead.comment?16:0)),ie(te,255&te.gzhead.time),ie(te,te.gzhead.time>>8&255),ie(te,te.gzhead.time>>16&255),ie(te,te.gzhead.time>>24&255),ie(te,te.level===9?2:2<=te.strategy||te.level<2?4:0),ie(te,255&te.gzhead.os),te.gzhead.extra&&te.gzhead.extra.length&&(ie(te,255&te.gzhead.extra.length),ie(te,te.gzhead.extra.length>>8&255)),te.gzhead.hcrc&&(B.adler=l(B.adler,te.pending_buf,te.pending,0)),te.gzindex=0,te.status=69):(ie(te,0),ie(te,0),ie(te,0),ie(te,0),ie(te,0),ie(te,te.level===9?2:2<=te.strategy||te.level<2?4:0),ie(te,3),te.status=I);else{var pe=_+(te.w_bits-8<<4)<<8;pe|=(2<=te.strategy||te.level<2?0:te.level<6?1:te.level===6?2:3)<<6,te.strstart!==0&&(pe|=32),pe+=31-pe%31,te.status=I,fe(te,pe),te.strstart!==0&&(fe(te,B.adler>>>16),fe(te,65535&B.adler)),B.adler=1}if(te.status===69)if(te.gzhead.extra){for(Q=te.pending;te.gzindex<(65535&te.gzhead.extra.length)&&(te.pending!==te.pending_buf_size||(te.gzhead.hcrc&&te.pending>Q&&(B.adler=l(B.adler,te.pending_buf,te.pending-Q,Q)),j(B),Q=te.pending,te.pending!==te.pending_buf_size));)ie(te,255&te.gzhead.extra[te.gzindex]),te.gzindex++;te.gzhead.hcrc&&te.pending>Q&&(B.adler=l(B.adler,te.pending_buf,te.pending-Q,Q)),te.gzindex===te.gzhead.extra.length&&(te.gzindex=0,te.status=73)}else te.status=73;if(te.status===73)if(te.gzhead.name){Q=te.pending;do{if(te.pending===te.pending_buf_size&&(te.gzhead.hcrc&&te.pending>Q&&(B.adler=l(B.adler,te.pending_buf,te.pending-Q,Q)),j(B),Q=te.pending,te.pending===te.pending_buf_size)){Y=1;break}Y=te.gzindex<te.gzhead.name.length?255&te.gzhead.name.charCodeAt(te.gzindex++):0,ie(te,Y)}while(Y!==0);te.gzhead.hcrc&&te.pending>Q&&(B.adler=l(B.adler,te.pending_buf,te.pending-Q,Q)),Y===0&&(te.gzindex=0,te.status=91)}else te.status=91;if(te.status===91)if(te.gzhead.comment){Q=te.pending;do{if(te.pending===te.pending_buf_size&&(te.gzhead.hcrc&&te.pending>Q&&(B.adler=l(B.adler,te.pending_buf,te.pending-Q,Q)),j(B),Q=te.pending,te.pending===te.pending_buf_size)){Y=1;break}Y=te.gzindex<te.gzhead.comment.length?255&te.gzhead.comment.charCodeAt(te.gzindex++):0,ie(te,Y)}while(Y!==0);te.gzhead.hcrc&&te.pending>Q&&(B.adler=l(B.adler,te.pending_buf,te.pending-Q,Q)),Y===0&&(te.status=103)}else te.status=103;if(te.status===103&&(te.gzhead.hcrc?(te.pending+2>te.pending_buf_size&&j(B),te.pending+2<=te.pending_buf_size&&(ie(te,255&B.adler),ie(te,B.adler>>8&255),B.adler=0,te.status=I)):te.status=I),te.pending!==0){if(j(B),B.avail_out===0)return te.last_flush=-1,n}else if(B.avail_in===0&&re(_e)<=re(me)&&_e!==r)return ae(B,-5);if(te.status===666&&B.avail_in!==0)return ae(B,-5);if(B.avail_in!==0||te.lookahead!==0||_e!==e&&te.status!==666){var le=te.strategy===2?function(se,ve){for(var Se;;){if(se.lookahead===0&&(ye(se),se.lookahead===0)){if(ve===e)return S;break}if(se.match_length=0,Se=h._tr_tally(se,0,se.window[se.strstart]),se.lookahead--,se.strstart++,Se&&(ee(se,!1),se.strm.avail_out===0))return S}return se.insert=0,ve===r?(ee(se,!0),se.strm.avail_out===0?G:Z):se.last_lit&&(ee(se,!1),se.strm.avail_out===0)?S:P}(te,_e):te.strategy===3?function(se,ve){for(var Se,$e,Ae,Ge,be=se.window;;){if(se.lookahead<=f){if(ye(se),se.lookahead<=f&&ve===e)return S;if(se.lookahead===0)break}if(se.match_length=0,se.lookahead>=p&&0<se.strstart&&($e=be[Ae=se.strstart-1])===be[++Ae]&&$e===be[++Ae]&&$e===be[++Ae]){Ge=se.strstart+f;do;while($e===be[++Ae]&&$e===be[++Ae]&&$e===be[++Ae]&&$e===be[++Ae]&&$e===be[++Ae]&&$e===be[++Ae]&&$e===be[++Ae]&&$e===be[++Ae]&&Ae<Ge);se.match_length=f-(Ge-Ae),se.match_length>se.lookahead&&(se.match_length=se.lookahead)}if(se.match_length>=p?(Se=h._tr_tally(se,1,se.match_length-p),se.lookahead-=se.match_length,se.strstart+=se.match_length,se.match_length=0):(Se=h._tr_tally(se,0,se.window[se.strstart]),se.lookahead--,se.strstart++),Se&&(ee(se,!1),se.strm.avail_out===0))return S}return se.insert=0,ve===r?(ee(se,!0),se.strm.avail_out===0?G:Z):se.last_lit&&(ee(se,!1),se.strm.avail_out===0)?S:P}(te,_e):k[te.level].func(te,_e);if(le!==G&&le!==Z||(te.status=666),le===S||le===G)return B.avail_out===0&&(te.last_flush=-1),n;if(le===P&&(_e===1?h._tr_align(te):_e!==5&&(h._tr_stored_block(te,0,0,!1),_e===3&&(ce(te.head),te.lookahead===0&&(te.strstart=0,te.block_start=0,te.insert=0))),j(B),B.avail_out===0))return te.last_flush=-1,n}return _e!==r?n:te.wrap<=0?1:(te.wrap===2?(ie(te,255&B.adler),ie(te,B.adler>>8&255),ie(te,B.adler>>16&255),ie(te,B.adler>>24&255),ie(te,255&B.total_in),ie(te,B.total_in>>8&255),ie(te,B.total_in>>16&255),ie(te,B.total_in>>24&255)):(fe(te,B.adler>>>16),fe(te,65535&B.adler)),j(B),0<te.wrap&&(te.wrap=-te.wrap),te.pending!==0?n:1)},z.deflateEnd=function(B){var _e;return B&&B.state?(_e=B.state.status)!==R&&_e!==69&&_e!==73&&_e!==91&&_e!==103&&_e!==I&&_e!==666?ae(B,i):(B.state=null,_e===I?ae(B,-3):n):i},z.deflateSetDictionary=function(B,_e){var me,te,Q,Y,pe,le,se,ve,Se=_e.length;if(!B||!B.state||(Y=(me=B.state).wrap)===2||Y===1&&me.status!==R||me.lookahead)return i;for(Y===1&&(B.adler=s(B.adler,_e,Se,0)),me.wrap=0,Se>=me.w_size&&(Y===0&&(ce(me.head),me.strstart=0,me.block_start=0,me.insert=0),ve=new A.Buf8(me.w_size),A.arraySet(ve,_e,Se-me.w_size,me.w_size,0),_e=ve,Se=me.w_size),pe=B.avail_in,le=B.next_in,se=B.input,B.avail_in=Se,B.next_in=0,B.input=_e,ye(me);me.lookahead>=p;){for(te=me.strstart,Q=me.lookahead-(p-1);me.ins_h=(me.ins_h<<me.hash_shift^me.window[te+p-1])&me.hash_mask,me.prev[te&me.w_mask]=me.head[me.ins_h],me.head[me.ins_h]=te,te++,--Q;);me.strstart=te,me.lookahead=p-1,ye(me)}return me.strstart+=me.lookahead,me.block_start=me.strstart,me.insert=me.lookahead,me.lookahead=0,me.match_length=me.prev_length=p-1,me.match_available=0,B.next_in=le,B.input=se,B.avail_in=pe,me.wrap=Y,n},z.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(a,D,z){D.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(a,D,z){D.exports=function(k,A){var h,s,l,t,e,r,n,i,o,d,v,_,C,$,c,g,E,m,p,f,F,R,I,S,P;h=k.state,s=k.next_in,S=k.input,l=s+(k.avail_in-5),t=k.next_out,P=k.output,e=t-(A-k.avail_out),r=t+(k.avail_out-257),n=h.dmax,i=h.wsize,o=h.whave,d=h.wnext,v=h.window,_=h.hold,C=h.bits,$=h.lencode,c=h.distcode,g=(1<<h.lenbits)-1,E=(1<<h.distbits)-1;e:do{C<15&&(_+=S[s++]<<C,C+=8,_+=S[s++]<<C,C+=8),m=$[_&g];t:for(;;){if(_>>>=p=m>>>24,C-=p,(p=m>>>16&255)===0)P[t++]=65535&m;else{if(!(16&p)){if(!(64&p)){m=$[(65535&m)+(_&(1<<p)-1)];continue t}if(32&p){h.mode=12;break e}k.msg="invalid literal/length code",h.mode=30;break e}f=65535&m,(p&=15)&&(C<p&&(_+=S[s++]<<C,C+=8),f+=_&(1<<p)-1,_>>>=p,C-=p),C<15&&(_+=S[s++]<<C,C+=8,_+=S[s++]<<C,C+=8),m=c[_&E];r:for(;;){if(_>>>=p=m>>>24,C-=p,!(16&(p=m>>>16&255))){if(!(64&p)){m=c[(65535&m)+(_&(1<<p)-1)];continue r}k.msg="invalid distance code",h.mode=30;break e}if(F=65535&m,C<(p&=15)&&(_+=S[s++]<<C,(C+=8)<p&&(_+=S[s++]<<C,C+=8)),n<(F+=_&(1<<p)-1)){k.msg="invalid distance too far back",h.mode=30;break e}if(_>>>=p,C-=p,(p=t-e)<F){if(o<(p=F-p)&&h.sane){k.msg="invalid distance too far back",h.mode=30;break e}if(I=v,(R=0)===d){if(R+=i-p,p<f){for(f-=p;P[t++]=v[R++],--p;);R=t-F,I=P}}else if(d<p){if(R+=i+d-p,(p-=d)<f){for(f-=p;P[t++]=v[R++],--p;);if(R=0,d<f){for(f-=p=d;P[t++]=v[R++],--p;);R=t-F,I=P}}}else if(R+=d-p,p<f){for(f-=p;P[t++]=v[R++],--p;);R=t-F,I=P}for(;2<f;)P[t++]=I[R++],P[t++]=I[R++],P[t++]=I[R++],f-=3;f&&(P[t++]=I[R++],1<f&&(P[t++]=I[R++]))}else{for(R=t-F;P[t++]=P[R++],P[t++]=P[R++],P[t++]=P[R++],2<(f-=3););f&&(P[t++]=P[R++],1<f&&(P[t++]=P[R++]))}break}}break}}while(s<l&&t<r);s-=f=C>>3,_&=(1<<(C-=f<<3))-1,k.next_in=s,k.next_out=t,k.avail_in=s<l?l-s+5:5-(s-l),k.avail_out=t<r?r-t+257:257-(t-r),h.hold=_,h.bits=C}},{}],49:[function(a,D,z){var k=a("../utils/common"),A=a("./adler32"),h=a("./crc32"),s=a("./inffast"),l=a("./inftrees"),t=1,e=2,r=0,n=-2,i=1,o=852,d=592;function v(R){return(R>>>24&255)+(R>>>8&65280)+((65280&R)<<8)+((255&R)<<24)}function _(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new k.Buf16(320),this.work=new k.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function C(R){var I;return R&&R.state?(I=R.state,R.total_in=R.total_out=I.total=0,R.msg="",I.wrap&&(R.adler=1&I.wrap),I.mode=i,I.last=0,I.havedict=0,I.dmax=32768,I.head=null,I.hold=0,I.bits=0,I.lencode=I.lendyn=new k.Buf32(o),I.distcode=I.distdyn=new k.Buf32(d),I.sane=1,I.back=-1,r):n}function $(R){var I;return R&&R.state?((I=R.state).wsize=0,I.whave=0,I.wnext=0,C(R)):n}function c(R,I){var S,P;return R&&R.state?(P=R.state,I<0?(S=0,I=-I):(S=1+(I>>4),I<48&&(I&=15)),I&&(I<8||15<I)?n:(P.window!==null&&P.wbits!==I&&(P.window=null),P.wrap=S,P.wbits=I,$(R))):n}function g(R,I){var S,P;return R?(P=new _,(R.state=P).window=null,(S=c(R,I))!==r&&(R.state=null),S):n}var E,m,p=!0;function f(R){if(p){var I;for(E=new k.Buf32(512),m=new k.Buf32(32),I=0;I<144;)R.lens[I++]=8;for(;I<256;)R.lens[I++]=9;for(;I<280;)R.lens[I++]=7;for(;I<288;)R.lens[I++]=8;for(l(t,R.lens,0,288,E,0,R.work,{bits:9}),I=0;I<32;)R.lens[I++]=5;l(e,R.lens,0,32,m,0,R.work,{bits:5}),p=!1}R.lencode=E,R.lenbits=9,R.distcode=m,R.distbits=5}function F(R,I,S,P){var G,Z=R.state;return Z.window===null&&(Z.wsize=1<<Z.wbits,Z.wnext=0,Z.whave=0,Z.window=new k.Buf8(Z.wsize)),P>=Z.wsize?(k.arraySet(Z.window,I,S-Z.wsize,Z.wsize,0),Z.wnext=0,Z.whave=Z.wsize):(P<(G=Z.wsize-Z.wnext)&&(G=P),k.arraySet(Z.window,I,S-P,G,Z.wnext),(P-=G)?(k.arraySet(Z.window,I,S-P,P,0),Z.wnext=P,Z.whave=Z.wsize):(Z.wnext+=G,Z.wnext===Z.wsize&&(Z.wnext=0),Z.whave<Z.wsize&&(Z.whave+=G))),0}z.inflateReset=$,z.inflateReset2=c,z.inflateResetKeep=C,z.inflateInit=function(R){return g(R,15)},z.inflateInit2=g,z.inflate=function(R,I){var S,P,G,Z,ae,re,ce,j,ee,ie,fe,he,ye,Te,ke,Fe,De,Pe,Ye,qe,B,_e,me,te,Q=0,Y=new k.Buf8(4),pe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!R||!R.state||!R.output||!R.input&&R.avail_in!==0)return n;(S=R.state).mode===12&&(S.mode=13),ae=R.next_out,G=R.output,ce=R.avail_out,Z=R.next_in,P=R.input,re=R.avail_in,j=S.hold,ee=S.bits,ie=re,fe=ce,_e=r;e:for(;;)switch(S.mode){case i:if(S.wrap===0){S.mode=13;break}for(;ee<16;){if(re===0)break e;re--,j+=P[Z++]<<ee,ee+=8}if(2&S.wrap&&j===35615){Y[S.check=0]=255&j,Y[1]=j>>>8&255,S.check=h(S.check,Y,2,0),ee=j=0,S.mode=2;break}if(S.flags=0,S.head&&(S.head.done=!1),!(1&S.wrap)||(((255&j)<<8)+(j>>8))%31){R.msg="incorrect header check",S.mode=30;break}if((15&j)!=8){R.msg="unknown compression method",S.mode=30;break}if(ee-=4,B=8+(15&(j>>>=4)),S.wbits===0)S.wbits=B;else if(B>S.wbits){R.msg="invalid window size",S.mode=30;break}S.dmax=1<<B,R.adler=S.check=1,S.mode=512&j?10:12,ee=j=0;break;case 2:for(;ee<16;){if(re===0)break e;re--,j+=P[Z++]<<ee,ee+=8}if(S.flags=j,(255&S.flags)!=8){R.msg="unknown compression method",S.mode=30;break}if(57344&S.flags){R.msg="unknown header flags set",S.mode=30;break}S.head&&(S.head.text=j>>8&1),512&S.flags&&(Y[0]=255&j,Y[1]=j>>>8&255,S.check=h(S.check,Y,2,0)),ee=j=0,S.mode=3;case 3:for(;ee<32;){if(re===0)break e;re--,j+=P[Z++]<<ee,ee+=8}S.head&&(S.head.time=j),512&S.flags&&(Y[0]=255&j,Y[1]=j>>>8&255,Y[2]=j>>>16&255,Y[3]=j>>>24&255,S.check=h(S.check,Y,4,0)),ee=j=0,S.mode=4;case 4:for(;ee<16;){if(re===0)break e;re--,j+=P[Z++]<<ee,ee+=8}S.head&&(S.head.xflags=255&j,S.head.os=j>>8),512&S.flags&&(Y[0]=255&j,Y[1]=j>>>8&255,S.check=h(S.check,Y,2,0)),ee=j=0,S.mode=5;case 5:if(1024&S.flags){for(;ee<16;){if(re===0)break e;re--,j+=P[Z++]<<ee,ee+=8}S.length=j,S.head&&(S.head.extra_len=j),512&S.flags&&(Y[0]=255&j,Y[1]=j>>>8&255,S.check=h(S.check,Y,2,0)),ee=j=0}else S.head&&(S.head.extra=null);S.mode=6;case 6:if(1024&S.flags&&(re<(he=S.length)&&(he=re),he&&(S.head&&(B=S.head.extra_len-S.length,S.head.extra||(S.head.extra=new Array(S.head.extra_len)),k.arraySet(S.head.extra,P,Z,he,B)),512&S.flags&&(S.check=h(S.check,P,he,Z)),re-=he,Z+=he,S.length-=he),S.length))break e;S.length=0,S.mode=7;case 7:if(2048&S.flags){if(re===0)break e;for(he=0;B=P[Z+he++],S.head&&B&&S.length<65536&&(S.head.name+=String.fromCharCode(B)),B&&he<re;);if(512&S.flags&&(S.check=h(S.check,P,he,Z)),re-=he,Z+=he,B)break e}else S.head&&(S.head.name=null);S.length=0,S.mode=8;case 8:if(4096&S.flags){if(re===0)break e;for(he=0;B=P[Z+he++],S.head&&B&&S.length<65536&&(S.head.comment+=String.fromCharCode(B)),B&&he<re;);if(512&S.flags&&(S.check=h(S.check,P,he,Z)),re-=he,Z+=he,B)break e}else S.head&&(S.head.comment=null);S.mode=9;case 9:if(512&S.flags){for(;ee<16;){if(re===0)break e;re--,j+=P[Z++]<<ee,ee+=8}if(j!==(65535&S.check)){R.msg="header crc mismatch",S.mode=30;break}ee=j=0}S.head&&(S.head.hcrc=S.flags>>9&1,S.head.done=!0),R.adler=S.check=0,S.mode=12;break;case 10:for(;ee<32;){if(re===0)break e;re--,j+=P[Z++]<<ee,ee+=8}R.adler=S.check=v(j),ee=j=0,S.mode=11;case 11:if(S.havedict===0)return R.next_out=ae,R.avail_out=ce,R.next_in=Z,R.avail_in=re,S.hold=j,S.bits=ee,2;R.adler=S.check=1,S.mode=12;case 12:if(I===5||I===6)break e;case 13:if(S.last){j>>>=7&ee,ee-=7&ee,S.mode=27;break}for(;ee<3;){if(re===0)break e;re--,j+=P[Z++]<<ee,ee+=8}switch(S.last=1&j,ee-=1,3&(j>>>=1)){case 0:S.mode=14;break;case 1:if(f(S),S.mode=20,I!==6)break;j>>>=2,ee-=2;break e;case 2:S.mode=17;break;case 3:R.msg="invalid block type",S.mode=30}j>>>=2,ee-=2;break;case 14:for(j>>>=7&ee,ee-=7&ee;ee<32;){if(re===0)break e;re--,j+=P[Z++]<<ee,ee+=8}if((65535&j)!=(j>>>16^65535)){R.msg="invalid stored block lengths",S.mode=30;break}if(S.length=65535&j,ee=j=0,S.mode=15,I===6)break e;case 15:S.mode=16;case 16:if(he=S.length){if(re<he&&(he=re),ce<he&&(he=ce),he===0)break e;k.arraySet(G,P,Z,he,ae),re-=he,Z+=he,ce-=he,ae+=he,S.length-=he;break}S.mode=12;break;case 17:for(;ee<14;){if(re===0)break e;re--,j+=P[Z++]<<ee,ee+=8}if(S.nlen=257+(31&j),j>>>=5,ee-=5,S.ndist=1+(31&j),j>>>=5,ee-=5,S.ncode=4+(15&j),j>>>=4,ee-=4,286<S.nlen||30<S.ndist){R.msg="too many length or distance symbols",S.mode=30;break}S.have=0,S.mode=18;case 18:for(;S.have<S.ncode;){for(;ee<3;){if(re===0)break e;re--,j+=P[Z++]<<ee,ee+=8}S.lens[pe[S.have++]]=7&j,j>>>=3,ee-=3}for(;S.have<19;)S.lens[pe[S.have++]]=0;if(S.lencode=S.lendyn,S.lenbits=7,me={bits:S.lenbits},_e=l(0,S.lens,0,19,S.lencode,0,S.work,me),S.lenbits=me.bits,_e){R.msg="invalid code lengths set",S.mode=30;break}S.have=0,S.mode=19;case 19:for(;S.have<S.nlen+S.ndist;){for(;Fe=(Q=S.lencode[j&(1<<S.lenbits)-1])>>>16&255,De=65535&Q,!((ke=Q>>>24)<=ee);){if(re===0)break e;re--,j+=P[Z++]<<ee,ee+=8}if(De<16)j>>>=ke,ee-=ke,S.lens[S.have++]=De;else{if(De===16){for(te=ke+2;ee<te;){if(re===0)break e;re--,j+=P[Z++]<<ee,ee+=8}if(j>>>=ke,ee-=ke,S.have===0){R.msg="invalid bit length repeat",S.mode=30;break}B=S.lens[S.have-1],he=3+(3&j),j>>>=2,ee-=2}else if(De===17){for(te=ke+3;ee<te;){if(re===0)break e;re--,j+=P[Z++]<<ee,ee+=8}ee-=ke,B=0,he=3+(7&(j>>>=ke)),j>>>=3,ee-=3}else{for(te=ke+7;ee<te;){if(re===0)break e;re--,j+=P[Z++]<<ee,ee+=8}ee-=ke,B=0,he=11+(127&(j>>>=ke)),j>>>=7,ee-=7}if(S.have+he>S.nlen+S.ndist){R.msg="invalid bit length repeat",S.mode=30;break}for(;he--;)S.lens[S.have++]=B}}if(S.mode===30)break;if(S.lens[256]===0){R.msg="invalid code -- missing end-of-block",S.mode=30;break}if(S.lenbits=9,me={bits:S.lenbits},_e=l(t,S.lens,0,S.nlen,S.lencode,0,S.work,me),S.lenbits=me.bits,_e){R.msg="invalid literal/lengths set",S.mode=30;break}if(S.distbits=6,S.distcode=S.distdyn,me={bits:S.distbits},_e=l(e,S.lens,S.nlen,S.ndist,S.distcode,0,S.work,me),S.distbits=me.bits,_e){R.msg="invalid distances set",S.mode=30;break}if(S.mode=20,I===6)break e;case 20:S.mode=21;case 21:if(6<=re&&258<=ce){R.next_out=ae,R.avail_out=ce,R.next_in=Z,R.avail_in=re,S.hold=j,S.bits=ee,s(R,fe),ae=R.next_out,G=R.output,ce=R.avail_out,Z=R.next_in,P=R.input,re=R.avail_in,j=S.hold,ee=S.bits,S.mode===12&&(S.back=-1);break}for(S.back=0;Fe=(Q=S.lencode[j&(1<<S.lenbits)-1])>>>16&255,De=65535&Q,!((ke=Q>>>24)<=ee);){if(re===0)break e;re--,j+=P[Z++]<<ee,ee+=8}if(Fe&&!(240&Fe)){for(Pe=ke,Ye=Fe,qe=De;Fe=(Q=S.lencode[qe+((j&(1<<Pe+Ye)-1)>>Pe)])>>>16&255,De=65535&Q,!(Pe+(ke=Q>>>24)<=ee);){if(re===0)break e;re--,j+=P[Z++]<<ee,ee+=8}j>>>=Pe,ee-=Pe,S.back+=Pe}if(j>>>=ke,ee-=ke,S.back+=ke,S.length=De,Fe===0){S.mode=26;break}if(32&Fe){S.back=-1,S.mode=12;break}if(64&Fe){R.msg="invalid literal/length code",S.mode=30;break}S.extra=15&Fe,S.mode=22;case 22:if(S.extra){for(te=S.extra;ee<te;){if(re===0)break e;re--,j+=P[Z++]<<ee,ee+=8}S.length+=j&(1<<S.extra)-1,j>>>=S.extra,ee-=S.extra,S.back+=S.extra}S.was=S.length,S.mode=23;case 23:for(;Fe=(Q=S.distcode[j&(1<<S.distbits)-1])>>>16&255,De=65535&Q,!((ke=Q>>>24)<=ee);){if(re===0)break e;re--,j+=P[Z++]<<ee,ee+=8}if(!(240&Fe)){for(Pe=ke,Ye=Fe,qe=De;Fe=(Q=S.distcode[qe+((j&(1<<Pe+Ye)-1)>>Pe)])>>>16&255,De=65535&Q,!(Pe+(ke=Q>>>24)<=ee);){if(re===0)break e;re--,j+=P[Z++]<<ee,ee+=8}j>>>=Pe,ee-=Pe,S.back+=Pe}if(j>>>=ke,ee-=ke,S.back+=ke,64&Fe){R.msg="invalid distance code",S.mode=30;break}S.offset=De,S.extra=15&Fe,S.mode=24;case 24:if(S.extra){for(te=S.extra;ee<te;){if(re===0)break e;re--,j+=P[Z++]<<ee,ee+=8}S.offset+=j&(1<<S.extra)-1,j>>>=S.extra,ee-=S.extra,S.back+=S.extra}if(S.offset>S.dmax){R.msg="invalid distance too far back",S.mode=30;break}S.mode=25;case 25:if(ce===0)break e;if(he=fe-ce,S.offset>he){if((he=S.offset-he)>S.whave&&S.sane){R.msg="invalid distance too far back",S.mode=30;break}ye=he>S.wnext?(he-=S.wnext,S.wsize-he):S.wnext-he,he>S.length&&(he=S.length),Te=S.window}else Te=G,ye=ae-S.offset,he=S.length;for(ce<he&&(he=ce),ce-=he,S.length-=he;G[ae++]=Te[ye++],--he;);S.length===0&&(S.mode=21);break;case 26:if(ce===0)break e;G[ae++]=S.length,ce--,S.mode=21;break;case 27:if(S.wrap){for(;ee<32;){if(re===0)break e;re--,j|=P[Z++]<<ee,ee+=8}if(fe-=ce,R.total_out+=fe,S.total+=fe,fe&&(R.adler=S.check=S.flags?h(S.check,G,fe,ae-fe):A(S.check,G,fe,ae-fe)),fe=ce,(S.flags?j:v(j))!==S.check){R.msg="incorrect data check",S.mode=30;break}ee=j=0}S.mode=28;case 28:if(S.wrap&&S.flags){for(;ee<32;){if(re===0)break e;re--,j+=P[Z++]<<ee,ee+=8}if(j!==(4294967295&S.total)){R.msg="incorrect length check",S.mode=30;break}ee=j=0}S.mode=29;case 29:_e=1;break e;case 30:_e=-3;break e;case 31:return-4;case 32:default:return n}return R.next_out=ae,R.avail_out=ce,R.next_in=Z,R.avail_in=re,S.hold=j,S.bits=ee,(S.wsize||fe!==R.avail_out&&S.mode<30&&(S.mode<27||I!==4))&&F(R,R.output,R.next_out,fe-R.avail_out)?(S.mode=31,-4):(ie-=R.avail_in,fe-=R.avail_out,R.total_in+=ie,R.total_out+=fe,S.total+=fe,S.wrap&&fe&&(R.adler=S.check=S.flags?h(S.check,G,fe,R.next_out-fe):A(S.check,G,fe,R.next_out-fe)),R.data_type=S.bits+(S.last?64:0)+(S.mode===12?128:0)+(S.mode===20||S.mode===15?256:0),(ie==0&&fe===0||I===4)&&_e===r&&(_e=-5),_e)},z.inflateEnd=function(R){if(!R||!R.state)return n;var I=R.state;return I.window&&(I.window=null),R.state=null,r},z.inflateGetHeader=function(R,I){var S;return R&&R.state&&2&(S=R.state).wrap?((S.head=I).done=!1,r):n},z.inflateSetDictionary=function(R,I){var S,P=I.length;return R&&R.state?(S=R.state).wrap!==0&&S.mode!==11?n:S.mode===11&&A(1,I,P,0)!==S.check?-3:F(R,I,P,P)?(S.mode=31,-4):(S.havedict=1,r):n},z.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(a,D,z){var k=a("../utils/common"),A=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],h=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],l=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];D.exports=function(t,e,r,n,i,o,d,v){var _,C,$,c,g,E,m,p,f,F=v.bits,R=0,I=0,S=0,P=0,G=0,Z=0,ae=0,re=0,ce=0,j=0,ee=null,ie=0,fe=new k.Buf16(16),he=new k.Buf16(16),ye=null,Te=0;for(R=0;R<=15;R++)fe[R]=0;for(I=0;I<n;I++)fe[e[r+I]]++;for(G=F,P=15;1<=P&&fe[P]===0;P--);if(P<G&&(G=P),P===0)return i[o++]=20971520,i[o++]=20971520,v.bits=1,0;for(S=1;S<P&&fe[S]===0;S++);for(G<S&&(G=S),R=re=1;R<=15;R++)if(re<<=1,(re-=fe[R])<0)return-1;if(0<re&&(t===0||P!==1))return-1;for(he[1]=0,R=1;R<15;R++)he[R+1]=he[R]+fe[R];for(I=0;I<n;I++)e[r+I]!==0&&(d[he[e[r+I]]++]=I);if(E=t===0?(ee=ye=d,19):t===1?(ee=A,ie-=257,ye=h,Te-=257,256):(ee=s,ye=l,-1),R=S,g=o,ae=I=j=0,$=-1,c=(ce=1<<(Z=G))-1,t===1&&852<ce||t===2&&592<ce)return 1;for(;;){for(m=R-ae,f=d[I]<E?(p=0,d[I]):d[I]>E?(p=ye[Te+d[I]],ee[ie+d[I]]):(p=96,0),_=1<<R-ae,S=C=1<<Z;i[g+(j>>ae)+(C-=_)]=m<<24|p<<16|f|0,C!==0;);for(_=1<<R-1;j&_;)_>>=1;if(_!==0?(j&=_-1,j+=_):j=0,I++,--fe[R]==0){if(R===P)break;R=e[r+d[I]]}if(G<R&&(j&c)!==$){for(ae===0&&(ae=G),g+=S,re=1<<(Z=R-ae);Z+ae<P&&!((re-=fe[Z+ae])<=0);)Z++,re<<=1;if(ce+=1<<Z,t===1&&852<ce||t===2&&592<ce)return 1;i[$=j&c]=G<<24|Z<<16|g-o|0}}return j!==0&&(i[g+j]=R-ae<<24|64<<16|0),v.bits=G,0}},{"../utils/common":41}],51:[function(a,D,z){D.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(a,D,z){var k=a("../utils/common"),A=0,h=1;function s(Q){for(var Y=Q.length;0<=--Y;)Q[Y]=0}var l=0,t=29,e=256,r=e+1+t,n=30,i=19,o=2*r+1,d=15,v=16,_=7,C=256,$=16,c=17,g=18,E=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],m=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],p=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],f=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],F=new Array(2*(r+2));s(F);var R=new Array(2*n);s(R);var I=new Array(512);s(I);var S=new Array(256);s(S);var P=new Array(t);s(P);var G,Z,ae,re=new Array(n);function ce(Q,Y,pe,le,se){this.static_tree=Q,this.extra_bits=Y,this.extra_base=pe,this.elems=le,this.max_length=se,this.has_stree=Q&&Q.length}function j(Q,Y){this.dyn_tree=Q,this.max_code=0,this.stat_desc=Y}function ee(Q){return Q<256?I[Q]:I[256+(Q>>>7)]}function ie(Q,Y){Q.pending_buf[Q.pending++]=255&Y,Q.pending_buf[Q.pending++]=Y>>>8&255}function fe(Q,Y,pe){Q.bi_valid>v-pe?(Q.bi_buf|=Y<<Q.bi_valid&65535,ie(Q,Q.bi_buf),Q.bi_buf=Y>>v-Q.bi_valid,Q.bi_valid+=pe-v):(Q.bi_buf|=Y<<Q.bi_valid&65535,Q.bi_valid+=pe)}function he(Q,Y,pe){fe(Q,pe[2*Y],pe[2*Y+1])}function ye(Q,Y){for(var pe=0;pe|=1&Q,Q>>>=1,pe<<=1,0<--Y;);return pe>>>1}function Te(Q,Y,pe){var le,se,ve=new Array(d+1),Se=0;for(le=1;le<=d;le++)ve[le]=Se=Se+pe[le-1]<<1;for(se=0;se<=Y;se++){var $e=Q[2*se+1];$e!==0&&(Q[2*se]=ye(ve[$e]++,$e))}}function ke(Q){var Y;for(Y=0;Y<r;Y++)Q.dyn_ltree[2*Y]=0;for(Y=0;Y<n;Y++)Q.dyn_dtree[2*Y]=0;for(Y=0;Y<i;Y++)Q.bl_tree[2*Y]=0;Q.dyn_ltree[2*C]=1,Q.opt_len=Q.static_len=0,Q.last_lit=Q.matches=0}function Fe(Q){8<Q.bi_valid?ie(Q,Q.bi_buf):0<Q.bi_valid&&(Q.pending_buf[Q.pending++]=Q.bi_buf),Q.bi_buf=0,Q.bi_valid=0}function De(Q,Y,pe,le){var se=2*Y,ve=2*pe;return Q[se]<Q[ve]||Q[se]===Q[ve]&&le[Y]<=le[pe]}function Pe(Q,Y,pe){for(var le=Q.heap[pe],se=pe<<1;se<=Q.heap_len&&(se<Q.heap_len&&De(Y,Q.heap[se+1],Q.heap[se],Q.depth)&&se++,!De(Y,le,Q.heap[se],Q.depth));)Q.heap[pe]=Q.heap[se],pe=se,se<<=1;Q.heap[pe]=le}function Ye(Q,Y,pe){var le,se,ve,Se,$e=0;if(Q.last_lit!==0)for(;le=Q.pending_buf[Q.d_buf+2*$e]<<8|Q.pending_buf[Q.d_buf+2*$e+1],se=Q.pending_buf[Q.l_buf+$e],$e++,le===0?he(Q,se,Y):(he(Q,(ve=S[se])+e+1,Y),(Se=E[ve])!==0&&fe(Q,se-=P[ve],Se),he(Q,ve=ee(--le),pe),(Se=m[ve])!==0&&fe(Q,le-=re[ve],Se)),$e<Q.last_lit;);he(Q,C,Y)}function qe(Q,Y){var pe,le,se,ve=Y.dyn_tree,Se=Y.stat_desc.static_tree,$e=Y.stat_desc.has_stree,Ae=Y.stat_desc.elems,Ge=-1;for(Q.heap_len=0,Q.heap_max=o,pe=0;pe<Ae;pe++)ve[2*pe]!==0?(Q.heap[++Q.heap_len]=Ge=pe,Q.depth[pe]=0):ve[2*pe+1]=0;for(;Q.heap_len<2;)ve[2*(se=Q.heap[++Q.heap_len]=Ge<2?++Ge:0)]=1,Q.depth[se]=0,Q.opt_len--,$e&&(Q.static_len-=Se[2*se+1]);for(Y.max_code=Ge,pe=Q.heap_len>>1;1<=pe;pe--)Pe(Q,ve,pe);for(se=Ae;pe=Q.heap[1],Q.heap[1]=Q.heap[Q.heap_len--],Pe(Q,ve,1),le=Q.heap[1],Q.heap[--Q.heap_max]=pe,Q.heap[--Q.heap_max]=le,ve[2*se]=ve[2*pe]+ve[2*le],Q.depth[se]=(Q.depth[pe]>=Q.depth[le]?Q.depth[pe]:Q.depth[le])+1,ve[2*pe+1]=ve[2*le+1]=se,Q.heap[1]=se++,Pe(Q,ve,1),2<=Q.heap_len;);Q.heap[--Q.heap_max]=Q.heap[1],function(be,Qe){var Ce,Xe,ft,ne,Ee,We,et=Qe.dyn_tree,Le=Qe.max_code,vt=Qe.stat_desc.static_tree,Ie=Qe.stat_desc.has_stree,At=Qe.stat_desc.extra_bits,He=Qe.stat_desc.extra_base,Rt=Qe.stat_desc.max_length,xt=0;for(ne=0;ne<=d;ne++)be.bl_count[ne]=0;for(et[2*be.heap[be.heap_max]+1]=0,Ce=be.heap_max+1;Ce<o;Ce++)Rt<(ne=et[2*et[2*(Xe=be.heap[Ce])+1]+1]+1)&&(ne=Rt,xt++),et[2*Xe+1]=ne,Le<Xe||(be.bl_count[ne]++,Ee=0,He<=Xe&&(Ee=At[Xe-He]),We=et[2*Xe],be.opt_len+=We*(ne+Ee),Ie&&(be.static_len+=We*(vt[2*Xe+1]+Ee)));if(xt!==0){do{for(ne=Rt-1;be.bl_count[ne]===0;)ne--;be.bl_count[ne]--,be.bl_count[ne+1]+=2,be.bl_count[Rt]--,xt-=2}while(0<xt);for(ne=Rt;ne!==0;ne--)for(Xe=be.bl_count[ne];Xe!==0;)Le<(ft=be.heap[--Ce])||(et[2*ft+1]!==ne&&(be.opt_len+=(ne-et[2*ft+1])*et[2*ft],et[2*ft+1]=ne),Xe--)}}(Q,Y),Te(ve,Ge,Q.bl_count)}function B(Q,Y,pe){var le,se,ve=-1,Se=Y[1],$e=0,Ae=7,Ge=4;for(Se===0&&(Ae=138,Ge=3),Y[2*(pe+1)+1]=65535,le=0;le<=pe;le++)se=Se,Se=Y[2*(le+1)+1],++$e<Ae&&se===Se||($e<Ge?Q.bl_tree[2*se]+=$e:se!==0?(se!==ve&&Q.bl_tree[2*se]++,Q.bl_tree[2*$]++):$e<=10?Q.bl_tree[2*c]++:Q.bl_tree[2*g]++,ve=se,Ge=($e=0)===Se?(Ae=138,3):se===Se?(Ae=6,3):(Ae=7,4))}function _e(Q,Y,pe){var le,se,ve=-1,Se=Y[1],$e=0,Ae=7,Ge=4;for(Se===0&&(Ae=138,Ge=3),le=0;le<=pe;le++)if(se=Se,Se=Y[2*(le+1)+1],!(++$e<Ae&&se===Se)){if($e<Ge)for(;he(Q,se,Q.bl_tree),--$e!=0;);else se!==0?(se!==ve&&(he(Q,se,Q.bl_tree),$e--),he(Q,$,Q.bl_tree),fe(Q,$e-3,2)):$e<=10?(he(Q,c,Q.bl_tree),fe(Q,$e-3,3)):(he(Q,g,Q.bl_tree),fe(Q,$e-11,7));ve=se,Ge=($e=0)===Se?(Ae=138,3):se===Se?(Ae=6,3):(Ae=7,4)}}s(re);var me=!1;function te(Q,Y,pe,le){fe(Q,(l<<1)+(le?1:0),3),function(se,ve,Se,$e){Fe(se),$e&&(ie(se,Se),ie(se,~Se)),k.arraySet(se.pending_buf,se.window,ve,Se,se.pending),se.pending+=Se}(Q,Y,pe,!0)}z._tr_init=function(Q){me||(function(){var Y,pe,le,se,ve,Se=new Array(d+1);for(se=le=0;se<t-1;se++)for(P[se]=le,Y=0;Y<1<<E[se];Y++)S[le++]=se;for(S[le-1]=se,se=ve=0;se<16;se++)for(re[se]=ve,Y=0;Y<1<<m[se];Y++)I[ve++]=se;for(ve>>=7;se<n;se++)for(re[se]=ve<<7,Y=0;Y<1<<m[se]-7;Y++)I[256+ve++]=se;for(pe=0;pe<=d;pe++)Se[pe]=0;for(Y=0;Y<=143;)F[2*Y+1]=8,Y++,Se[8]++;for(;Y<=255;)F[2*Y+1]=9,Y++,Se[9]++;for(;Y<=279;)F[2*Y+1]=7,Y++,Se[7]++;for(;Y<=287;)F[2*Y+1]=8,Y++,Se[8]++;for(Te(F,r+1,Se),Y=0;Y<n;Y++)R[2*Y+1]=5,R[2*Y]=ye(Y,5);G=new ce(F,E,e+1,r,d),Z=new ce(R,m,0,n,d),ae=new ce(new Array(0),p,0,i,_)}(),me=!0),Q.l_desc=new j(Q.dyn_ltree,G),Q.d_desc=new j(Q.dyn_dtree,Z),Q.bl_desc=new j(Q.bl_tree,ae),Q.bi_buf=0,Q.bi_valid=0,ke(Q)},z._tr_stored_block=te,z._tr_flush_block=function(Q,Y,pe,le){var se,ve,Se=0;0<Q.level?(Q.strm.data_type===2&&(Q.strm.data_type=function($e){var Ae,Ge=4093624447;for(Ae=0;Ae<=31;Ae++,Ge>>>=1)if(1&Ge&&$e.dyn_ltree[2*Ae]!==0)return A;if($e.dyn_ltree[18]!==0||$e.dyn_ltree[20]!==0||$e.dyn_ltree[26]!==0)return h;for(Ae=32;Ae<e;Ae++)if($e.dyn_ltree[2*Ae]!==0)return h;return A}(Q)),qe(Q,Q.l_desc),qe(Q,Q.d_desc),Se=function($e){var Ae;for(B($e,$e.dyn_ltree,$e.l_desc.max_code),B($e,$e.dyn_dtree,$e.d_desc.max_code),qe($e,$e.bl_desc),Ae=i-1;3<=Ae&&$e.bl_tree[2*f[Ae]+1]===0;Ae--);return $e.opt_len+=3*(Ae+1)+5+5+4,Ae}(Q),se=Q.opt_len+3+7>>>3,(ve=Q.static_len+3+7>>>3)<=se&&(se=ve)):se=ve=pe+5,pe+4<=se&&Y!==-1?te(Q,Y,pe,le):Q.strategy===4||ve===se?(fe(Q,2+(le?1:0),3),Ye(Q,F,R)):(fe(Q,4+(le?1:0),3),function($e,Ae,Ge,be){var Qe;for(fe($e,Ae-257,5),fe($e,Ge-1,5),fe($e,be-4,4),Qe=0;Qe<be;Qe++)fe($e,$e.bl_tree[2*f[Qe]+1],3);_e($e,$e.dyn_ltree,Ae-1),_e($e,$e.dyn_dtree,Ge-1)}(Q,Q.l_desc.max_code+1,Q.d_desc.max_code+1,Se+1),Ye(Q,Q.dyn_ltree,Q.dyn_dtree)),ke(Q),le&&Fe(Q)},z._tr_tally=function(Q,Y,pe){return Q.pending_buf[Q.d_buf+2*Q.last_lit]=Y>>>8&255,Q.pending_buf[Q.d_buf+2*Q.last_lit+1]=255&Y,Q.pending_buf[Q.l_buf+Q.last_lit]=255&pe,Q.last_lit++,Y===0?Q.dyn_ltree[2*pe]++:(Q.matches++,Y--,Q.dyn_ltree[2*(S[pe]+e+1)]++,Q.dyn_dtree[2*ee(Y)]++),Q.last_lit===Q.lit_bufsize-1},z._tr_align=function(Q){fe(Q,2,3),he(Q,C,F),function(Y){Y.bi_valid===16?(ie(Y,Y.bi_buf),Y.bi_buf=0,Y.bi_valid=0):8<=Y.bi_valid&&(Y.pending_buf[Y.pending++]=255&Y.bi_buf,Y.bi_buf>>=8,Y.bi_valid-=8)}(Q)}},{"../utils/common":41}],53:[function(a,D,z){D.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(a,D,z){(function(k){(function(A,h){if(!A.setImmediate){var s,l,t,e,r=1,n={},i=!1,o=A.document,d=Object.getPrototypeOf&&Object.getPrototypeOf(A);d=d&&d.setTimeout?d:A,s={}.toString.call(A.process)==="[object process]"?function($){process.nextTick(function(){_($)})}:function(){if(A.postMessage&&!A.importScripts){var $=!0,c=A.onmessage;return A.onmessage=function(){$=!1},A.postMessage("","*"),A.onmessage=c,$}}()?(e="setImmediate$"+Math.random()+"$",A.addEventListener?A.addEventListener("message",C,!1):A.attachEvent("onmessage",C),function($){A.postMessage(e+$,"*")}):A.MessageChannel?((t=new MessageChannel).port1.onmessage=function($){_($.data)},function($){t.port2.postMessage($)}):o&&"onreadystatechange"in o.createElement("script")?(l=o.documentElement,function($){var c=o.createElement("script");c.onreadystatechange=function(){_($),c.onreadystatechange=null,l.removeChild(c),c=null},l.appendChild(c)}):function($){setTimeout(_,0,$)},d.setImmediate=function($){typeof $!="function"&&($=new Function(""+$));for(var c=new Array(arguments.length-1),g=0;g<c.length;g++)c[g]=arguments[g+1];var E={callback:$,args:c};return n[r]=E,s(r),r++},d.clearImmediate=v}function v($){delete n[$]}function _($){if(i)setTimeout(_,0,$);else{var c=n[$];if(c){i=!0;try{(function(g){var E=g.callback,m=g.args;switch(m.length){case 0:E();break;case 1:E(m[0]);break;case 2:E(m[0],m[1]);break;case 3:E(m[0],m[1],m[2]);break;default:E.apply(h,m)}})(c)}finally{v($),i=!1}}}}function C($){$.source===A&&typeof $.data=="string"&&$.data.indexOf(e)===0&&_(+$.data.slice(e.length))}})(typeof self>"u"?k===void 0?this:k:self)}).call(this,typeof Gr<"u"?Gr:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(xn);var ri=xn.exports;const Ln=fn(ri);var dn={exports:{}};dn.exports;(function(q){var X=function(){var a=String.fromCharCode,D="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",z="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",k={};function A(s,l){if(!k[s]){k[s]={};for(var t=0;t<s.length;t++)k[s][s.charAt(t)]=t}return k[s][l]}var h={compressToBase64:function(s){if(s==null)return"";var l=h._compress(s,6,function(t){return D.charAt(t)});switch(l.length%4){default:case 0:return l;case 1:return l+"===";case 2:return l+"==";case 3:return l+"="}},decompressFromBase64:function(s){return s==null?"":s==""?null:h._decompress(s.length,32,function(l){return A(D,s.charAt(l))})},compressToUTF16:function(s){return s==null?"":h._compress(s,15,function(l){return a(l+32)})+" "},decompressFromUTF16:function(s){return s==null?"":s==""?null:h._decompress(s.length,16384,function(l){return s.charCodeAt(l)-32})},compressToUint8Array:function(s){for(var l=h.compress(s),t=new Uint8Array(l.length*2),e=0,r=l.length;e<r;e++){var n=l.charCodeAt(e);t[e*2]=n>>>8,t[e*2+1]=n%256}return t},decompressFromUint8Array:function(s){if(s==null)return h.decompress(s);for(var l=new Array(s.length/2),t=0,e=l.length;t<e;t++)l[t]=s[t*2]*256+s[t*2+1];var r=[];return l.forEach(function(n){r.push(a(n))}),h.decompress(r.join(""))},compressToEncodedURIComponent:function(s){return s==null?"":h._compress(s,6,function(l){return z.charAt(l)})},decompressFromEncodedURIComponent:function(s){return s==null?"":s==""?null:(s=s.replace(/ /g,"+"),h._decompress(s.length,32,function(l){return A(z,s.charAt(l))}))},compress:function(s){return h._compress(s,16,function(l){return a(l)})},_compress:function(s,l,t){if(s==null)return"";var e,r,n={},i={},o="",d="",v="",_=2,C=3,$=2,c=[],g=0,E=0,m;for(m=0;m<s.length;m+=1)if(o=s.charAt(m),Object.prototype.hasOwnProperty.call(n,o)||(n[o]=C++,i[o]=!0),d=v+o,Object.prototype.hasOwnProperty.call(n,d))v=d;else{if(Object.prototype.hasOwnProperty.call(i,v)){if(v.charCodeAt(0)<256){for(e=0;e<$;e++)g=g<<1,E==l-1?(E=0,c.push(t(g)),g=0):E++;for(r=v.charCodeAt(0),e=0;e<8;e++)g=g<<1|r&1,E==l-1?(E=0,c.push(t(g)),g=0):E++,r=r>>1}else{for(r=1,e=0;e<$;e++)g=g<<1|r,E==l-1?(E=0,c.push(t(g)),g=0):E++,r=0;for(r=v.charCodeAt(0),e=0;e<16;e++)g=g<<1|r&1,E==l-1?(E=0,c.push(t(g)),g=0):E++,r=r>>1}_--,_==0&&(_=Math.pow(2,$),$++),delete i[v]}else for(r=n[v],e=0;e<$;e++)g=g<<1|r&1,E==l-1?(E=0,c.push(t(g)),g=0):E++,r=r>>1;_--,_==0&&(_=Math.pow(2,$),$++),n[d]=C++,v=String(o)}if(v!==""){if(Object.prototype.hasOwnProperty.call(i,v)){if(v.charCodeAt(0)<256){for(e=0;e<$;e++)g=g<<1,E==l-1?(E=0,c.push(t(g)),g=0):E++;for(r=v.charCodeAt(0),e=0;e<8;e++)g=g<<1|r&1,E==l-1?(E=0,c.push(t(g)),g=0):E++,r=r>>1}else{for(r=1,e=0;e<$;e++)g=g<<1|r,E==l-1?(E=0,c.push(t(g)),g=0):E++,r=0;for(r=v.charCodeAt(0),e=0;e<16;e++)g=g<<1|r&1,E==l-1?(E=0,c.push(t(g)),g=0):E++,r=r>>1}_--,_==0&&(_=Math.pow(2,$),$++),delete i[v]}else for(r=n[v],e=0;e<$;e++)g=g<<1|r&1,E==l-1?(E=0,c.push(t(g)),g=0):E++,r=r>>1;_--,_==0&&(_=Math.pow(2,$),$++)}for(r=2,e=0;e<$;e++)g=g<<1|r&1,E==l-1?(E=0,c.push(t(g)),g=0):E++,r=r>>1;for(;;)if(g=g<<1,E==l-1){c.push(t(g));break}else E++;return c.join("")},decompress:function(s){return s==null?"":s==""?null:h._decompress(s.length,32768,function(l){return s.charCodeAt(l)})},_decompress:function(s,l,t){var e=[],r=4,n=4,i=3,o="",d=[],v,_,C,$,c,g,E,m={val:t(0),position:l,index:1};for(v=0;v<3;v+=1)e[v]=v;for(C=0,c=Math.pow(2,2),g=1;g!=c;)$=m.val&m.position,m.position>>=1,m.position==0&&(m.position=l,m.val=t(m.index++)),C|=($>0?1:0)*g,g<<=1;switch(C){case 0:for(C=0,c=Math.pow(2,8),g=1;g!=c;)$=m.val&m.position,m.position>>=1,m.position==0&&(m.position=l,m.val=t(m.index++)),C|=($>0?1:0)*g,g<<=1;E=a(C);break;case 1:for(C=0,c=Math.pow(2,16),g=1;g!=c;)$=m.val&m.position,m.position>>=1,m.position==0&&(m.position=l,m.val=t(m.index++)),C|=($>0?1:0)*g,g<<=1;E=a(C);break;case 2:return""}for(e[3]=E,_=E,d.push(E);;){if(m.index>s)return"";for(C=0,c=Math.pow(2,i),g=1;g!=c;)$=m.val&m.position,m.position>>=1,m.position==0&&(m.position=l,m.val=t(m.index++)),C|=($>0?1:0)*g,g<<=1;switch(E=C){case 0:for(C=0,c=Math.pow(2,8),g=1;g!=c;)$=m.val&m.position,m.position>>=1,m.position==0&&(m.position=l,m.val=t(m.index++)),C|=($>0?1:0)*g,g<<=1;e[n++]=a(C),E=n-1,r--;break;case 1:for(C=0,c=Math.pow(2,16),g=1;g!=c;)$=m.val&m.position,m.position>>=1,m.position==0&&(m.position=l,m.val=t(m.index++)),C|=($>0?1:0)*g,g<<=1;e[n++]=a(C),E=n-1,r--;break;case 2:return d.join("")}if(r==0&&(r=Math.pow(2,i),i++),e[E])o=e[E];else if(E===n)o=_+_.charAt(0);else return null;d.push(o),e[n++]=_+o.charAt(0),r--,_=o,r==0&&(r=Math.pow(2,i),i++)}}};return h}();q!=null?q.exports=X:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return X})})(dn);var ni=dn.exports;const Bn=fn(ni),ar=`;*\r
;* Gameboy Hardware definitions\r
;*\r
;* Based on Jones' hardware.inc\r
;* And based on Carsten Sorensen's ideas.\r
;*\r
;* Rev 1.1 - 15-Jul-97 : Added define check\r
;* Rev 1.2 - 18-Jul-97 : Added revision check macro\r
;* Rev 1.3 - 19-Jul-97 : Modified for RGBASM V1.05\r
;* Rev 1.4 - 27-Jul-97 : Modified for new subroutine prefixes\r
;* Rev 1.5 - 15-Aug-97 : Added _HRAM, PAD, CART defines\r
;*                     :  and Nintendo Logo\r
;* Rev 1.6 - 30-Nov-97 : Added rDIV, rTIMA, rTMA, & rTAC\r
;* Rev 1.7 - 31-Jan-98 : Added _SCRN0, _SCRN1\r
;* Rev 1.8 - 15-Feb-98 : Added rSB, rSC\r
;* Rev 1.9 - 16-Feb-98 : Converted I/O registers to $FFXX format\r
;* Rev 2.0 -           : Added GBC registers\r
;* Rev 2.1 -           : Added MBC5 & cart RAM enable/disable defines\r
;* Rev 2.2 -           : Fixed NR42,NR43, & NR44 equates\r
;* Rev 2.3 -           : Fixed incorrect _HRAM equate\r
;* Rev 2.4 - 27-Apr-13 : Added some cart defines (AntonioND)\r
;* Rev 2.5 - 03-May-15 : Fixed format (AntonioND)\r
;* Rev 2.6 - 09-Apr-16 : Added GBC OAM and cart defines (AntonioND)\r
;* Rev 2.7 - 19-Jan-19 : Added rPCMXX (ISSOtm)\r
;* Rev 2.8 - 03-Feb-19 : Added audio registers flags (Álvaro Cuesta)\r
;* Rev 2.9 - 28-Feb-20 : Added utility rP1 constants\r
;* Rev 3.0 - 27-Aug-20 : Register ordering, byte-based sizes, OAM additions, general cleanup (Blitter Object)\r
;* Rev 4.0 - 03-May-21 : Updated to use RGBDS 0.5.0 syntax, changed IEF_LCDC to IEF_STAT (Eievui)\r
;* Rev 4.1 - 16-Aug-21 : Added more flags, bit number defines, and offset constants for OAM and window positions (rondnelson99)\r
;* Rev 4.2 - 04-Sep-21 : Added CH3- and CH4-specific audio registers flags (ISSOtm)\r
;* Rev 4.3 - 07-Nov-21 : Deprecate VRAM address constants (Eievui)\r
;* Rev 4.4 - 11-Jan-22 : Deprecate VRAM CART_SRAM_2KB constant (avivace)\r
;* Rev 4.5 - 03-Mar-22 : Added bit number definitions for OCPS, BCPS and LCDC (sukus)\r
;* Rev 4.6 - 15-Jun-22 : Added MBC3 registers and special values\r
;* Rev 4.7.0 - 27-Jun-22 : Added alternate names for some constants\r
;* Rev 4.7.1 - 05-Jul-22 : Added RPB_LED_ON constant\r
;* Rev 4.8.0 - 25-Oct-22 : Changed background addressing constants (zlago)\r
;* Rev 4.8.1 - 29-Apr-23 : Added rOPRI (rbong)\r
;* Rev 4.9.0 - 24-Jun-23 : Added definitions for interrupt vectors (sukus)\r
\r
\r
; NOTE: REVISION NUMBER CHANGES MUST BE REFLECTED\r
; IN \`rev_Check_hardware_inc\` BELOW!\r
\r
IF __RGBDS_MAJOR__ == 0 && __RGBDS_MINOR__ < 5\r
    FAIL "This version of 'hardware.inc' requires RGBDS version 0.5.0 or later."\r
ENDC\r
\r
; If all of these are already defined, don't do it again.\r
\r
    IF !DEF(HARDWARE_INC)\r
DEF HARDWARE_INC EQU 1\r
\r
; Usage: rev_Check_hardware_inc <min_ver>\r
; Examples: rev_Check_hardware_inc 4.1.2\r
;           rev_Check_hardware_inc 4.1 (equivalent to 4.1.0)\r
;           rev_Check_hardware_inc 4 (equivalent to 4.0.0)\r
MACRO rev_Check_hardware_inc\r
    DEF CUR_VER equs "4,9,0"    ; ** UPDATE THIS LINE WHEN CHANGING THE REVISION NUMBER **\r
\r
    DEF MIN_VER equs STRRPL("\\1", ".", ",")\r
    DEF INTERNAL_CHK equs """MACRO ___internal\r
    IF \\\\1 != \\\\4 || \\\\2 < \\\\5 || (\\\\2 == \\\\5 && \\\\3 < \\\\6)\r
    	FAIL "Version \\\\1.\\\\2.\\\\3 of 'hardware.inc' is incompatible with requested version \\\\4.\\\\5.\\\\6"\r
    ENDC\r
\\nENDM"""\r
    INTERNAL_CHK\r
    ___internal {CUR_VER}, {MIN_VER},0,0\r
    PURGE CUR_VER, MIN_VER, INTERNAL_CHK, ___internal\r
ENDM\r
\r
\r
;***************************************************************************\r
;*\r
;* General memory region constants\r
;*\r
;***************************************************************************\r
\r
DEF _VRAM        EQU $8000 ; $8000->$9FFF\r
DEF _SCRN0       EQU $9800 ; $9800->$9BFF\r
DEF _SCRN1       EQU $9C00 ; $9C00->$9FFF\r
DEF _SRAM        EQU $A000 ; $A000->$BFFF\r
DEF _RAM         EQU $C000 ; $C000->$CFFF / $C000->$DFFF\r
DEF _RAMBANK     EQU $D000 ; $D000->$DFFF\r
DEF _OAMRAM      EQU $FE00 ; $FE00->$FE9F\r
DEF _IO          EQU $FF00 ; $FF00->$FF7F,$FFFF\r
DEF _AUD3WAVERAM EQU $FF30 ; $FF30->$FF3F\r
DEF _HRAM        EQU $FF80 ; $FF80->$FFFE\r
\r
\r
;***************************************************************************\r
;*\r
;* MBC registers\r
;*\r
;***************************************************************************\r
\r
; *** Common ***\r
\r
; --\r
; -- RAMG ($0000-$1FFF)\r
; -- Controls whether access to SRAM (and the MBC3 RTC registers) is allowed (W)\r
; --\r
DEF rRAMG EQU $0000\r
\r
DEF CART_SRAM_ENABLE  EQU $0A\r
DEF CART_SRAM_DISABLE EQU $00\r
\r
\r
; --\r
; -- ROMB0 ($2000-$3FFF)\r
; -- Selects which ROM bank is mapped to the ROMX space ($4000-$7FFF) (W)\r
; --\r
; -- The range of accepted values, as well as the behavior of writing $00,\r
; -- varies depending on the MBC.\r
; --\r
DEF rROMB0 EQU $2000\r
\r
; --\r
; -- RAMB ($4000-$5FFF)\r
; -- Selects which SRAM bank is mapped to the SRAM space ($A000-$BFFF) (W)\r
; --\r
; -- The range of accepted values varies depending on the cartridge configuration.\r
; --\r
DEF rRAMB EQU $4000\r
\r
\r
; *** MBC3-specific registers ***\r
\r
; Write one of these to rRAMG to map the corresponding RTC register to all SRAM space\r
DEF RTC_S  EQU $08 ; Seconds  (0-59)\r
DEF RTC_M  EQU $09 ; Minutes  (0-59)\r
DEF RTC_H  EQU $0A ; Hours    (0-23)\r
DEF RTC_DL EQU $0B ; Lower 8 bits of Day Counter ($00-$FF)\r
DEF RTC_DH EQU $0C ; Bit 7 - Day Counter Carry Bit (1=Counter Overflow)\r
                   ; Bit 6 - Halt (0=Active, 1=Stop Timer)\r
                   ; Bit 0 - Most significant bit of Day Counter (Bit 8)\r
\r
\r
; --\r
; -- RTCLATCH ($6000-$7FFF)\r
; -- Write $00 then $01 to latch the current time into the RTC registers (W)\r
; --\r
DEF rRTCLATCH EQU $6000\r
\r
\r
; *** MBC5-specific register ***\r
\r
; --\r
; -- ROMB1 ($3000-$3FFF)\r
; -- A 9th bit that "extends" ROMB0 if more than 256 banks are present (W)\r
; --\r
; -- Also note that rROMB0 thus only spans $2000-$2FFF.\r
; --\r
DEF rROMB1 EQU $3000\r
\r
\r
; Bit 3 of RAMB enables the rumble motor (if any)\r
DEF CART_RUMBLE_ON EQU 1 << 3\r
\r
\r
;***************************************************************************\r
;*\r
;* Memory-mapped registers\r
;*\r
;***************************************************************************\r
\r
; --\r
; -- P1 ($FF00)\r
; -- Register for reading joy pad info. (R/W)\r
; --\r
DEF rP1 EQU $FF00\r
\r
DEF P1F_5 EQU %00100000 ; P15 out port, set to 0 to get buttons\r
DEF P1F_4 EQU %00010000 ; P14 out port, set to 0 to get dpad\r
DEF P1F_3 EQU %00001000 ; P13 in port\r
DEF P1F_2 EQU %00000100 ; P12 in port\r
DEF P1F_1 EQU %00000010 ; P11 in port\r
DEF P1F_0 EQU %00000001 ; P10 in port\r
\r
DEF P1F_GET_DPAD EQU P1F_5\r
DEF P1F_GET_BTN  EQU P1F_4\r
DEF P1F_GET_NONE EQU P1F_4 | P1F_5\r
\r
\r
; --\r
; -- SB ($FF01)\r
; -- Serial Transfer Data (R/W)\r
; --\r
DEF rSB EQU $FF01\r
\r
\r
; --\r
; -- SC ($FF02)\r
; -- Serial I/O Control (R/W)\r
; --\r
DEF rSC EQU $FF02\r
\r
DEF SCF_START  EQU %10000000 ; Transfer Start Flag (1=Transfer in progress, or requested)\r
DEF SCF_SPEED  EQU %00000010 ; Clock Speed (0=Normal, 1=Fast) ** CGB Mode Only **\r
DEF SCF_SOURCE EQU %00000001 ; Shift Clock (0=External Clock, 1=Internal Clock)\r
\r
DEF SCB_START  EQU 7\r
DEF SCB_SPEED  EQU 1\r
DEF SCB_SOURCE EQU 0\r
\r
; --\r
; -- DIV ($FF04)\r
; -- Divider register (R/W)\r
; --\r
DEF rDIV EQU $FF04\r
\r
\r
; --\r
; -- TIMA ($FF05)\r
; -- Timer counter (R/W)\r
; --\r
DEF rTIMA EQU $FF05\r
\r
\r
; --\r
; -- TMA ($FF06)\r
; -- Timer modulo (R/W)\r
; --\r
DEF rTMA EQU $FF06\r
\r
\r
; --\r
; -- TAC ($FF07)\r
; -- Timer control (R/W)\r
; --\r
DEF rTAC EQU $FF07\r
\r
DEF TACF_START  EQU %00000100\r
DEF TACF_STOP   EQU %00000000\r
DEF TACF_4KHZ   EQU %00000000\r
DEF TACF_16KHZ  EQU %00000011\r
DEF TACF_65KHZ  EQU %00000010\r
DEF TACF_262KHZ EQU %00000001\r
\r
DEF TACB_START  EQU 2\r
\r
\r
; --\r
; -- IF ($FF0F)\r
; -- Interrupt Flag (R/W)\r
; --\r
DEF rIF EQU $FF0F\r
\r
\r
; --\r
; -- AUD1SWEEP/NR10 ($FF10)\r
; -- Sweep register (R/W)\r
; --\r
; -- Bit 6-4 - Sweep Time\r
; -- Bit 3   - Sweep Increase/Decrease\r
; --           0: Addition    (frequency increases???)\r
; --           1: Subtraction (frequency increases???)\r
; -- Bit 2-0 - Number of sweep shift (# 0-7)\r
; -- Sweep Time: (n*7.8ms)\r
; --\r
DEF rNR10 EQU $FF10\r
DEF rAUD1SWEEP EQU rNR10\r
\r
DEF AUD1SWEEP_UP   EQU %00000000\r
DEF AUD1SWEEP_DOWN EQU %00001000\r
\r
\r
; --\r
; -- AUD1LEN/NR11 ($FF11)\r
; -- Sound length/Wave pattern duty (R/W)\r
; --\r
; -- Bit 7-6 - Wave Pattern Duty (00:12.5% 01:25% 10:50% 11:75%)\r
; -- Bit 5-0 - Sound length data (# 0-63)\r
; --\r
DEF rNR11 EQU $FF11\r
DEF rAUD1LEN EQU rNR11\r
\r
\r
; --\r
; -- AUD1ENV/NR12 ($FF12)\r
; -- Envelope (R/W)\r
; --\r
; -- Bit 7-4 - Initial value of envelope\r
; -- Bit 3   - Envelope UP/DOWN\r
; --           0: Decrease\r
; --           1: Range of increase\r
; -- Bit 2-0 - Number of envelope sweep (# 0-7)\r
; --\r
DEF rNR12 EQU $FF12\r
DEF rAUD1ENV EQU rNR12\r
\r
\r
; --\r
; -- AUD1LOW/NR13 ($FF13)\r
; -- Frequency low byte (W)\r
; --\r
DEF rNR13 EQU $FF13\r
DEF rAUD1LOW EQU rNR13\r
\r
\r
; --\r
; -- AUD1HIGH/NR14 ($FF14)\r
; -- Frequency high byte (W)\r
; --\r
; -- Bit 7   - Initial (when set, sound restarts)\r
; -- Bit 6   - Counter/consecutive selection\r
; -- Bit 2-0 - Frequency's higher 3 bits\r
; --\r
DEF rNR14 EQU $FF14\r
DEF rAUD1HIGH EQU rNR14\r
\r
\r
; --\r
; -- AUD2LEN/NR21 ($FF16)\r
; -- Sound Length; Wave Pattern Duty (R/W)\r
; --\r
; -- see AUD1LEN for info\r
; --\r
DEF rNR21 EQU $FF16\r
DEF rAUD2LEN EQU rNR21\r
\r
\r
; --\r
; -- AUD2ENV/NR22 ($FF17)\r
; -- Envelope (R/W)\r
; --\r
; -- see AUD1ENV for info\r
; --\r
DEF rNR22 EQU $FF17\r
DEF rAUD2ENV EQU rNR22\r
\r
\r
; --\r
; -- AUD2LOW/NR23 ($FF18)\r
; -- Frequency low byte (W)\r
; --\r
DEF rNR23 EQU $FF18\r
DEF rAUD2LOW EQU rNR23\r
\r
\r
; --\r
; -- AUD2HIGH/NR24 ($FF19)\r
; -- Frequency high byte (W)\r
; --\r
; -- see AUD1HIGH for info\r
; --\r
DEF rNR24 EQU $FF19\r
DEF rAUD2HIGH EQU rNR24\r
\r
\r
; --\r
; -- AUD3ENA/NR30 ($FF1A)\r
; -- Sound on/off (R/W)\r
; --\r
; -- Bit 7   - Sound ON/OFF (1=ON,0=OFF)\r
; --\r
DEF rNR30 EQU $FF1A\r
DEF rAUD3ENA EQU rNR30\r
\r
DEF AUD3ENA_OFF EQU %00000000\r
DEF AUD3ENA_ON  EQU %10000000\r
\r
\r
; --\r
; -- AUD3LEN/NR31 ($FF1B)\r
; -- Sound length (R/W)\r
; --\r
; -- Bit 7-0 - Sound length\r
; --\r
DEF rNR31 EQU $FF1B\r
DEF rAUD3LEN EQU rNR31\r
\r
\r
; --\r
; -- AUD3LEVEL/NR32 ($FF1C)\r
; -- Select output level\r
; --\r
; -- Bit 6-5 - Select output level\r
; --           00: 0/1 (mute)\r
; --           01: 1/1\r
; --           10: 1/2\r
; --           11: 1/4\r
; --\r
DEF rNR32 EQU $FF1C\r
DEF rAUD3LEVEL EQU rNR32\r
\r
DEF AUD3LEVEL_MUTE EQU %00000000\r
DEF AUD3LEVEL_100  EQU %00100000\r
DEF AUD3LEVEL_50   EQU %01000000\r
DEF AUD3LEVEL_25   EQU %01100000\r
\r
\r
; --\r
; -- AUD3LOW/NR33 ($FF1D)\r
; -- Frequency low byte (W)\r
; --\r
; -- see AUD1LOW for info\r
; --\r
DEF rNR33 EQU $FF1D\r
DEF rAUD3LOW EQU rNR33\r
\r
\r
; --\r
; -- AUD3HIGH/NR34 ($FF1E)\r
; -- Frequency high byte (W)\r
; --\r
; -- see AUD1HIGH for info\r
; --\r
DEF rNR34 EQU $FF1E\r
DEF rAUD3HIGH EQU rNR34\r
\r
\r
; --\r
; -- AUD4LEN/NR41 ($FF20)\r
; -- Sound length (R/W)\r
; --\r
; -- Bit 5-0 - Sound length data (# 0-63)\r
; --\r
DEF rNR41 EQU $FF20\r
DEF rAUD4LEN EQU rNR41\r
\r
\r
; --\r
; -- AUD4ENV/NR42 ($FF21)\r
; -- Envelope (R/W)\r
; --\r
; -- see AUD1ENV for info\r
; --\r
DEF rNR42 EQU $FF21\r
DEF rAUD4ENV EQU rNR42\r
\r
\r
; --\r
; -- AUD4POLY/NR43 ($FF22)\r
; -- Polynomial counter (R/W)\r
; --\r
; -- Bit 7-4 - Selection of the shift clock frequency of the (scf)\r
; --           polynomial counter (0000-1101)\r
; --           freq=drf*1/2^scf (not sure)\r
; -- Bit 3 -   Selection of the polynomial counter's step\r
; --           0: 15 steps\r
; --           1: 7 steps\r
; -- Bit 2-0 - Selection of the dividing ratio of frequencies (drf)\r
; --           000: f/4   001: f/8   010: f/16  011: f/24\r
; --           100: f/32  101: f/40  110: f/48  111: f/56  (f=4.194304 Mhz)\r
; --\r
DEF rNR43 EQU $FF22\r
DEF rAUD4POLY EQU rNR43\r
\r
DEF AUD4POLY_15STEP EQU %00000000\r
DEF AUD4POLY_7STEP  EQU %00001000\r
\r
\r
; --\r
; -- AUD4GO/NR44 ($FF23)\r
; --\r
; -- Bit 7 -   Initial (when set, sound restarts)\r
; -- Bit 6 -   Counter/consecutive selection\r
; --\r
DEF rNR44 EQU $FF23\r
DEF rAUD4GO EQU rNR44\r
\r
\r
; --\r
; -- AUDVOL/NR50 ($FF24)\r
; -- Channel control / ON-OFF / Volume (R/W)\r
; --\r
; -- Bit 7   - Vin->SO2 ON/OFF (left)\r
; -- Bit 6-4 - SO2 output level (left speaker) (# 0-7)\r
; -- Bit 3   - Vin->SO1 ON/OFF (right)\r
; -- Bit 2-0 - SO1 output level (right speaker) (# 0-7)\r
; --\r
DEF rNR50 EQU $FF24\r
DEF rAUDVOL EQU rNR50\r
\r
DEF AUDVOL_VIN_LEFT  EQU %10000000 ; SO2\r
DEF AUDVOL_VIN_RIGHT EQU %00001000 ; SO1\r
\r
\r
; --\r
; -- AUDTERM/NR51 ($FF25)\r
; -- Selection of Sound output terminal (R/W)\r
; --\r
; -- Bit 7   - Output channel 4 to SO2 terminal (left)\r
; -- Bit 6   - Output channel 3 to SO2 terminal (left)\r
; -- Bit 5   - Output channel 2 to SO2 terminal (left)\r
; -- Bit 4   - Output channel 1 to SO2 terminal (left)\r
; -- Bit 3   - Output channel 4 to SO1 terminal (right)\r
; -- Bit 2   - Output channel 3 to SO1 terminal (right)\r
; -- Bit 1   - Output channel 2 to SO1 terminal (right)\r
; -- Bit 0   - Output channel 1 to SO1 terminal (right)\r
; --\r
DEF rNR51 EQU $FF25\r
DEF rAUDTERM EQU rNR51\r
\r
; SO2\r
DEF AUDTERM_4_LEFT  EQU %10000000\r
DEF AUDTERM_3_LEFT  EQU %01000000\r
DEF AUDTERM_2_LEFT  EQU %00100000\r
DEF AUDTERM_1_LEFT  EQU %00010000\r
; SO1\r
DEF AUDTERM_4_RIGHT EQU %00001000\r
DEF AUDTERM_3_RIGHT EQU %00000100\r
DEF AUDTERM_2_RIGHT EQU %00000010\r
DEF AUDTERM_1_RIGHT EQU %00000001\r
\r
\r
; --\r
; -- AUDENA/NR52 ($FF26)\r
; -- Sound on/off (R/W)\r
; --\r
; -- Bit 7   - All sound on/off (sets all audio regs to 0!)\r
; -- Bit 3   - Sound 4 ON flag (read only)\r
; -- Bit 2   - Sound 3 ON flag (read only)\r
; -- Bit 1   - Sound 2 ON flag (read only)\r
; -- Bit 0   - Sound 1 ON flag (read only)\r
; --\r
DEF rNR52 EQU $FF26\r
DEF rAUDENA EQU rNR52\r
\r
DEF AUDENA_ON    EQU %10000000\r
DEF AUDENA_OFF   EQU %00000000  ; sets all audio regs to 0!\r
\r
\r
; --\r
; -- LCDC ($FF40)\r
; -- LCD Control (R/W)\r
; --\r
DEF rLCDC EQU $FF40\r
\r
DEF LCDCF_OFF     EQU %00000000 ; LCD Control Operation\r
DEF LCDCF_ON      EQU %10000000 ; LCD Control Operation\r
DEF LCDCF_WIN9800 EQU %00000000 ; Window Tile Map Display Select\r
DEF LCDCF_WIN9C00 EQU %01000000 ; Window Tile Map Display Select\r
DEF LCDCF_WINOFF  EQU %00000000 ; Window Display\r
DEF LCDCF_WINON   EQU %00100000 ; Window Display\r
DEF LCDCF_BLK21   EQU %00000000 ; BG & Window Tile Data Select\r
DEF LCDCF_BLK01   EQU %00010000 ; BG & Window Tile Data Select\r
DEF LCDCF_BG9800  EQU %00000000 ; BG Tile Map Display Select\r
DEF LCDCF_BG9C00  EQU %00001000 ; BG Tile Map Display Select\r
DEF LCDCF_OBJ8    EQU %00000000 ; OBJ Construction\r
DEF LCDCF_OBJ16   EQU %00000100 ; OBJ Construction\r
DEF LCDCF_OBJOFF  EQU %00000000 ; OBJ Display\r
DEF LCDCF_OBJON   EQU %00000010 ; OBJ Display\r
DEF LCDCF_BGOFF   EQU %00000000 ; BG Display\r
DEF LCDCF_BGON    EQU %00000001 ; BG Display\r
\r
DEF LCDCB_ON      EQU 7 ; LCD Control Operation\r
DEF LCDCB_WIN9C00 EQU 6 ; Window Tile Map Display Select\r
DEF LCDCB_WINON   EQU 5 ; Window Display\r
DEF LCDCB_BLKS    EQU 4 ; BG & Window Tile Data Select\r
DEF LCDCB_BG9C00  EQU 3 ; BG Tile Map Display Select\r
DEF LCDCB_OBJ16   EQU 2 ; OBJ Construction\r
DEF LCDCB_OBJON   EQU 1 ; OBJ Display\r
DEF LCDCB_BGON    EQU 0 ; BG Display\r
; "Window Character Data Select" follows BG\r
\r
\r
; --\r
; -- STAT ($FF41)\r
; -- LCDC Status   (R/W)\r
; --\r
DEF rSTAT EQU $FF41\r
\r
DEF STATF_LYC     EQU  %01000000 ; LYC=LY Coincidence (Selectable)\r
DEF STATF_MODE10  EQU  %00100000 ; Mode 10\r
DEF STATF_MODE01  EQU  %00010000 ; Mode 01 (V-Blank)\r
DEF STATF_MODE00  EQU  %00001000 ; Mode 00 (H-Blank)\r
DEF STATF_LYCF    EQU  %00000100 ; Coincidence Flag\r
DEF STATF_HBL     EQU  %00000000 ; H-Blank\r
DEF STATF_VBL     EQU  %00000001 ; V-Blank\r
DEF STATF_OAM     EQU  %00000010 ; OAM-RAM is used by system\r
DEF STATF_LCD     EQU  %00000011 ; Both OAM and VRAM used by system\r
DEF STATF_BUSY    EQU  %00000010 ; When set, VRAM access is unsafe\r
\r
DEF STATB_LYC     EQU  6\r
DEF STATB_MODE10  EQU  5\r
DEF STATB_MODE01  EQU  4\r
DEF STATB_MODE00  EQU  3\r
DEF STATB_LYCF    EQU  2\r
DEF STATB_BUSY    EQU  1\r
\r
; --\r
; -- SCY ($FF42)\r
; -- Scroll Y (R/W)\r
; --\r
DEF rSCY EQU $FF42\r
\r
\r
; --\r
; -- SCX ($FF43)\r
; -- Scroll X (R/W)\r
; --\r
DEF rSCX EQU $FF43\r
\r
\r
; --\r
; -- LY ($FF44)\r
; -- LCDC Y-Coordinate (R)\r
; --\r
; -- Values range from 0->153. 144->153 is the VBlank period.\r
; --\r
DEF rLY EQU $FF44\r
\r
\r
; --\r
; -- LYC ($FF45)\r
; -- LY Compare (R/W)\r
; --\r
; -- When LY==LYC, STATF_LYCF will be set in STAT\r
; --\r
DEF rLYC EQU $FF45\r
\r
\r
; --\r
; -- DMA ($FF46)\r
; -- DMA Transfer and Start Address (W)\r
; --\r
DEF rDMA EQU $FF46\r
\r
\r
; --\r
; -- BGP ($FF47)\r
; -- BG Palette Data (W)\r
; --\r
; -- Bit 7-6 - Intensity for %11\r
; -- Bit 5-4 - Intensity for %10\r
; -- Bit 3-2 - Intensity for %01\r
; -- Bit 1-0 - Intensity for %00\r
; --\r
DEF rBGP EQU $FF47\r
\r
\r
; --\r
; -- OBP0 ($FF48)\r
; -- Object Palette 0 Data (W)\r
; --\r
; -- See BGP for info\r
; --\r
DEF rOBP0 EQU $FF48\r
\r
\r
; --\r
; -- OBP1 ($FF49)\r
; -- Object Palette 1 Data (W)\r
; --\r
; -- See BGP for info\r
; --\r
DEF rOBP1 EQU $FF49\r
\r
\r
; --\r
; -- WY ($FF4A)\r
; -- Window Y Position (R/W)\r
; --\r
; -- 0 <= WY <= 143\r
; -- When WY = 0, the window is displayed from the top edge of the LCD screen.\r
; --\r
DEF rWY EQU $FF4A\r
\r
\r
; --\r
; -- WX ($FF4B)\r
; -- Window X Position (R/W)\r
; --\r
; -- 7 <= WX <= 166\r
; -- When WX = 7, the window is displayed from the left edge of the LCD screen.\r
; -- Values of 0-6 and 166 are unreliable due to hardware bugs.\r
; --\r
DEF rWX EQU $FF4B\r
\r
DEF WX_OFS EQU 7 ; add this to a screen position to get a WX position\r
\r
\r
; --\r
; -- SPEED ($FF4D)\r
; -- Select CPU Speed (R/W)\r
; --\r
DEF rKEY1 EQU $FF4D\r
DEF rSPD  EQU rKEY1\r
\r
DEF KEY1F_DBLSPEED EQU %10000000 ; 0=Normal Speed, 1=Double Speed (R)\r
DEF KEY1F_PREPARE  EQU %00000001 ; 0=No, 1=Prepare (R/W)\r
\r
\r
; --\r
; -- VBK ($FF4F)\r
; -- Select Video RAM Bank (R/W)\r
; --\r
; -- Bit 0 - Bank Specification (0: Specify Bank 0; 1: Specify Bank 1)\r
; --\r
DEF rVBK EQU $FF4F\r
\r
\r
; --\r
; -- HDMA1 ($FF51)\r
; -- High byte for Horizontal Blanking/General Purpose DMA source address (W)\r
; -- CGB Mode Only\r
; --\r
DEF rHDMA1 EQU $FF51\r
\r
\r
; --\r
; -- HDMA2 ($FF52)\r
; -- Low byte for Horizontal Blanking/General Purpose DMA source address (W)\r
; -- CGB Mode Only\r
; --\r
DEF rHDMA2 EQU $FF52\r
\r
\r
; --\r
; -- HDMA3 ($FF53)\r
; -- High byte for Horizontal Blanking/General Purpose DMA destination address (W)\r
; -- CGB Mode Only\r
; --\r
DEF rHDMA3 EQU $FF53\r
\r
\r
; --\r
; -- HDMA4 ($FF54)\r
; -- Low byte for Horizontal Blanking/General Purpose DMA destination address (W)\r
; -- CGB Mode Only\r
; --\r
DEF rHDMA4 EQU $FF54\r
\r
\r
; --\r
; -- HDMA5 ($FF55)\r
; -- Transfer length (in tiles minus 1)/mode/start for Horizontal Blanking, General Purpose DMA (R/W)\r
; -- CGB Mode Only\r
; --\r
DEF rHDMA5 EQU $FF55\r
\r
DEF HDMA5F_MODE_GP  EQU %00000000 ; General Purpose DMA (W)\r
DEF HDMA5F_MODE_HBL EQU %10000000 ; HBlank DMA (W)\r
DEF HDMA5B_MODE EQU 7 ; DMA mode select (W)\r
\r
; -- Once DMA has started, use HDMA5F_BUSY to check when the transfer is complete\r
DEF HDMA5F_BUSY EQU %10000000 ; 0=Busy (DMA still in progress), 1=Transfer complete (R)\r
\r
\r
; --\r
; -- RP ($FF56)\r
; -- Infrared Communications Port (R/W)\r
; -- CGB Mode Only\r
; --\r
DEF rRP EQU $FF56\r
\r
DEF RPF_ENREAD   EQU %11000000\r
DEF RPF_DATAIN   EQU %00000010 ; 0=Receiving IR Signal, 1=Normal\r
DEF RPF_WRITE_HI EQU %00000001\r
DEF RPF_WRITE_LO EQU %00000000\r
\r
DEF RPB_LED_ON   EQU 0\r
DEF RPB_DATAIN   EQU 1\r
\r
\r
; --\r
; -- BCPS/BGPI ($FF68)\r
; -- Background Color Palette Specification (aka Background Palette Index) (R/W)\r
; --\r
DEF rBCPS EQU $FF68\r
DEF rBGPI EQU rBCPS\r
\r
DEF BCPSF_AUTOINC EQU %10000000 ; Auto Increment (0=Disabled, 1=Increment after Writing)\r
DEF BCPSB_AUTOINC EQU 7\r
DEF BGPIF_AUTOINC EQU BCPSF_AUTOINC\r
DEF BGPIB_AUTOINC EQU BCPSB_AUTOINC\r
\r
\r
; --\r
; -- BCPD/BGPD ($FF69)\r
; -- Background Color Palette Data (aka Background Palette Data) (R/W)\r
; --\r
DEF rBCPD EQU $FF69\r
DEF rBGPD EQU rBCPD\r
\r
\r
; --\r
; -- OCPS/OBPI ($FF6A)\r
; -- Object Color Palette Specification (aka Object Background Palette Index) (R/W)\r
; --\r
DEF rOCPS EQU $FF6A\r
DEF rOBPI EQU rOCPS\r
\r
DEF OCPSF_AUTOINC EQU %10000000 ; Auto Increment (0=Disabled, 1=Increment after Writing)\r
DEF OCPSB_AUTOINC EQU 7\r
DEF OBPIF_AUTOINC EQU OCPSF_AUTOINC\r
DEF OBPIB_AUTOINC EQU OCPSB_AUTOINC\r
\r
\r
; --\r
; -- OCPD/OBPD ($FF6B)\r
; -- Object Color Palette Data (aka Object Background Palette Data) (R/W)\r
; --\r
DEF rOCPD EQU $FF6B\r
DEF rOBPD EQU rOCPD\r
\r
\r
; --\r
; -- OPRI ($FF6C)\r
; -- Object Priority Mode (R/W)\r
; -- CGB Only\r
\r
; --\r
; -- Priority can be changed only from the boot ROM\r
; --\r
DEF rOPRI EQU $FF6C\r
\r
DEF OPRI_OAM   EQU 0 ; Prioritize objects by location in OAM (CGB Mode default)\r
DEF OPRI_COORD EQU 1 ; Prioritize objects by x-coordinate (Non-CGB Mode default)\r
\r
\r
\r
; --\r
; -- SMBK/SVBK ($FF70)\r
; -- Select Main RAM Bank (R/W)\r
; --\r
; -- Bit 2-0 - Bank Specification (0,1: Specify Bank 1; 2-7: Specify Banks 2-7)\r
; --\r
DEF rSVBK EQU $FF70\r
DEF rSMBK EQU rSVBK\r
\r
\r
; --\r
; -- PCM12 ($FF76)\r
; -- Sound channel 1&2 PCM amplitude (R)\r
; --\r
; -- Bit 7-4 - Copy of sound channel 2's PCM amplitude\r
; -- Bit 3-0 - Copy of sound channel 1's PCM amplitude\r
; --\r
DEF rPCM12 EQU $FF76\r
\r
\r
; --\r
; -- PCM34 ($FF77)\r
; -- Sound channel 3&4 PCM amplitude (R)\r
; --\r
; -- Bit 7-4 - Copy of sound channel 4's PCM amplitude\r
; -- Bit 3-0 - Copy of sound channel 3's PCM amplitude\r
; --\r
DEF rPCM34 EQU $FF77\r
\r
\r
; --\r
; -- IE ($FFFF)\r
; -- Interrupt Enable (R/W)\r
; --\r
DEF rIE EQU $FFFF\r
\r
DEF IEF_HILO   EQU %00010000 ; Transition from High to Low of Pin number P10-P13\r
DEF IEF_SERIAL EQU %00001000 ; Serial I/O transfer end\r
DEF IEF_TIMER  EQU %00000100 ; Timer Overflow\r
DEF IEF_STAT   EQU %00000010 ; STAT\r
DEF IEF_VBLANK EQU %00000001 ; V-Blank\r
\r
DEF IEB_HILO   EQU 4\r
DEF IEB_SERIAL EQU 3\r
DEF IEB_TIMER  EQU 2\r
DEF IEB_STAT   EQU 1\r
DEF IEB_VBLANK EQU 0\r
\r
\r
;***************************************************************************\r
;*\r
;* Flags common to multiple sound channels\r
;*\r
;***************************************************************************\r
\r
; --\r
; -- Square wave duty cycle\r
; --\r
; -- Can be used with AUD1LEN and AUD2LEN\r
; -- See AUD1LEN for more info\r
; --\r
DEF AUDLEN_DUTY_12_5    EQU %00000000 ; 12.5%\r
DEF AUDLEN_DUTY_25      EQU %01000000 ; 25%\r
DEF AUDLEN_DUTY_50      EQU %10000000 ; 50%\r
DEF AUDLEN_DUTY_75      EQU %11000000 ; 75%\r
\r
\r
; --\r
; -- Audio envelope flags\r
; --\r
; -- Can be used with AUD1ENV, AUD2ENV, AUD4ENV\r
; -- See AUD1ENV for more info\r
; --\r
DEF AUDENV_UP           EQU %00001000\r
DEF AUDENV_DOWN         EQU %00000000\r
\r
\r
; --\r
; -- Audio trigger flags\r
; --\r
; -- Can be used with AUD1HIGH, AUD2HIGH, AUD3HIGH\r
; -- See AUD1HIGH for more info\r
; --\r
DEF AUDHIGH_RESTART     EQU %10000000\r
DEF AUDHIGH_LENGTH_ON   EQU %01000000\r
DEF AUDHIGH_LENGTH_OFF  EQU %00000000\r
\r
\r
;***************************************************************************\r
;*\r
;* CPU values on bootup (a=type, b=qualifier)\r
;*\r
;***************************************************************************\r
\r
DEF BOOTUP_A_DMG    EQU $01 ; Dot Matrix Game\r
DEF BOOTUP_A_CGB    EQU $11 ; Color GameBoy\r
DEF BOOTUP_A_MGB    EQU $FF ; Mini GameBoy (Pocket GameBoy)\r
\r
; if a=BOOTUP_A_CGB, bit 0 in b can be checked to determine if real CGB or\r
; other system running in GBC mode\r
DEF BOOTUP_B_CGB    EQU %00000000\r
DEF BOOTUP_B_AGB    EQU %00000001   ; GBA, GBA SP, Game Boy Player, or New GBA SP\r
\r
\r
;***************************************************************************\r
;*\r
;* Interrupt vector addresses\r
;*\r
;***************************************************************************\r
\r
DEF INT_HANDLER_VBLANK EQU $0040\r
DEF INT_HANDLER_STAT   EQU $0048\r
DEF INT_HANDLER_TIMER  EQU $0050\r
DEF INT_HANDLER_SERIAL EQU $0058\r
DEF INT_HANDLER_JOYPAD EQU $0060\r
\r
\r
;***************************************************************************\r
;*\r
;* Header\r
;*\r
;***************************************************************************\r
\r
;*\r
;* Nintendo scrolling logo\r
;* (Code won't work on a real GameBoy)\r
;* (if next lines are altered.)\r
MACRO NINTENDO_LOGO\r
    DB  $CE,$ED,$66,$66,$CC,$0D,$00,$0B,$03,$73,$00,$83,$00,$0C,$00,$0D\r
    DB  $00,$08,$11,$1F,$88,$89,$00,$0E,$DC,$CC,$6E,$E6,$DD,$DD,$D9,$99\r
    DB  $BB,$BB,$67,$63,$6E,$0E,$EC,$CC,$DD,$DC,$99,$9F,$BB,$B9,$33,$3E\r
ENDM\r
\r
; $0143 Color GameBoy compatibility code\r
DEF CART_COMPATIBLE_DMG     EQU $00\r
DEF CART_COMPATIBLE_DMG_GBC EQU $80\r
DEF CART_COMPATIBLE_GBC     EQU $C0\r
\r
; $0146 GameBoy/Super GameBoy indicator\r
DEF CART_INDICATOR_GB       EQU $00\r
DEF CART_INDICATOR_SGB      EQU $03\r
\r
; $0147 Cartridge type\r
DEF CART_ROM                     EQU $00\r
DEF CART_ROM_MBC1                EQU $01\r
DEF CART_ROM_MBC1_RAM            EQU $02\r
DEF CART_ROM_MBC1_RAM_BAT        EQU $03\r
DEF CART_ROM_MBC2                EQU $05\r
DEF CART_ROM_MBC2_BAT            EQU $06\r
DEF CART_ROM_RAM                 EQU $08\r
DEF CART_ROM_RAM_BAT             EQU $09\r
DEF CART_ROM_MMM01               EQU $0B\r
DEF CART_ROM_MMM01_RAM           EQU $0C\r
DEF CART_ROM_MMM01_RAM_BAT       EQU $0D\r
DEF CART_ROM_MBC3_BAT_RTC        EQU $0F\r
DEF CART_ROM_MBC3_RAM_BAT_RTC    EQU $10\r
DEF CART_ROM_MBC3                EQU $11\r
DEF CART_ROM_MBC3_RAM            EQU $12\r
DEF CART_ROM_MBC3_RAM_BAT        EQU $13\r
DEF CART_ROM_MBC5                EQU $19\r
DEF CART_ROM_MBC5_BAT            EQU $1A\r
DEF CART_ROM_MBC5_RAM_BAT        EQU $1B\r
DEF CART_ROM_MBC5_RUMBLE         EQU $1C\r
DEF CART_ROM_MBC5_RAM_RUMBLE     EQU $1D\r
DEF CART_ROM_MBC5_RAM_BAT_RUMBLE EQU $1E\r
DEF CART_ROM_MBC7_RAM_BAT_GYRO   EQU $22\r
DEF CART_ROM_POCKET_CAMERA       EQU $FC\r
DEF CART_ROM_BANDAI_TAMA5        EQU $FD\r
DEF CART_ROM_HUDSON_HUC3         EQU $FE\r
DEF CART_ROM_HUDSON_HUC1         EQU $FF\r
\r
; $0148 ROM size\r
; these are kilobytes\r
DEF CART_ROM_32KB   EQU $00 ; 2 banks\r
DEF CART_ROM_64KB   EQU $01 ; 4 banks\r
DEF CART_ROM_128KB  EQU $02 ; 8 banks\r
DEF CART_ROM_256KB  EQU $03 ; 16 banks\r
DEF CART_ROM_512KB  EQU $04 ; 32 banks\r
DEF CART_ROM_1024KB EQU $05 ; 64 banks\r
DEF CART_ROM_2048KB EQU $06 ; 128 banks\r
DEF CART_ROM_4096KB EQU $07 ; 256 banks\r
DEF CART_ROM_8192KB EQU $08 ; 512 banks\r
DEF CART_ROM_1152KB EQU $52 ; 72 banks\r
DEF CART_ROM_1280KB EQU $53 ; 80 banks\r
DEF CART_ROM_1536KB EQU $54 ; 96 banks\r
\r
; $0149 SRAM size\r
; these are kilobytes\r
DEF CART_SRAM_NONE  EQU 0\r
DEF CART_SRAM_8KB   EQU 2 ; 1 bank\r
DEF CART_SRAM_32KB  EQU 3 ; 4 banks\r
DEF CART_SRAM_128KB EQU 4 ; 16 banks\r
\r
; $014A Destination code\r
DEF CART_DEST_JAPANESE     EQU $00\r
DEF CART_DEST_NON_JAPANESE EQU $01\r
\r
\r
;***************************************************************************\r
;*\r
;* Keypad related\r
;*\r
;***************************************************************************\r
\r
DEF PADF_DOWN   EQU $80\r
DEF PADF_UP     EQU $40\r
DEF PADF_LEFT   EQU $20\r
DEF PADF_RIGHT  EQU $10\r
DEF PADF_START  EQU $08\r
DEF PADF_SELECT EQU $04\r
DEF PADF_B      EQU $02\r
DEF PADF_A      EQU $01\r
\r
DEF PADB_DOWN   EQU $7\r
DEF PADB_UP     EQU $6\r
DEF PADB_LEFT   EQU $5\r
DEF PADB_RIGHT  EQU $4\r
DEF PADB_START  EQU $3\r
DEF PADB_SELECT EQU $2\r
DEF PADB_B      EQU $1\r
DEF PADB_A      EQU $0\r
\r
\r
;***************************************************************************\r
;*\r
;* Screen related\r
;*\r
;***************************************************************************\r
\r
DEF SCRN_X    EQU 160 ; Width of screen in pixels\r
DEF SCRN_Y    EQU 144 ; Height of screen in pixels. Also corresponds to the value in LY at the beginning of VBlank.\r
DEF SCRN_X_B  EQU 20  ; Width of screen in bytes\r
DEF SCRN_Y_B  EQU 18  ; Height of screen in bytes\r
\r
DEF SCRN_VX   EQU 256 ; Virtual width of screen in pixels\r
DEF SCRN_VY   EQU 256 ; Virtual height of screen in pixels\r
DEF SCRN_VX_B EQU 32  ; Virtual width of screen in bytes\r
DEF SCRN_VY_B EQU 32  ; Virtual height of screen in bytes\r
\r
\r
;***************************************************************************\r
;*\r
;* OAM related\r
;*\r
;***************************************************************************\r
\r
; OAM attributes\r
; each entry in OAM RAM is 4 bytes (sizeof_OAM_ATTRS)\r
RSRESET\r
DEF OAMA_Y              RB  1   ; y pos plus 16\r
DEF OAMA_X              RB  1   ; x pos plus 8\r
DEF OAMA_TILEID         RB  1   ; tile id\r
DEF OAMA_FLAGS          RB  1   ; flags (see below)\r
DEF sizeof_OAM_ATTRS    RB  0\r
\r
DEF OAM_Y_OFS EQU 16 ; add this to a screen-relative Y position to get an OAM Y position\r
DEF OAM_X_OFS EQU 8  ; add this to a screen-relative X position to get an OAM X position\r
\r
DEF OAM_COUNT           EQU 40  ; number of OAM entries in OAM RAM\r
\r
; flags\r
DEF OAMF_PRI        EQU %10000000 ; Priority\r
DEF OAMF_YFLIP      EQU %01000000 ; Y flip\r
DEF OAMF_XFLIP      EQU %00100000 ; X flip\r
DEF OAMF_PAL0       EQU %00000000 ; Palette number; 0,1 (DMG)\r
DEF OAMF_PAL1       EQU %00010000 ; Palette number; 0,1 (DMG)\r
DEF OAMF_BANK0      EQU %00000000 ; Bank number; 0,1 (GBC)\r
DEF OAMF_BANK1      EQU %00001000 ; Bank number; 0,1 (GBC)\r
\r
DEF OAMF_PALMASK    EQU %00000111 ; Palette (GBC)\r
\r
DEF OAMB_PRI        EQU 7 ; Priority\r
DEF OAMB_YFLIP      EQU 6 ; Y flip\r
DEF OAMB_XFLIP      EQU 5 ; X flip\r
DEF OAMB_PAL1       EQU 4 ; Palette number; 0,1 (DMG)\r
DEF OAMB_BANK1      EQU 3 ; Bank number; 0,1 (GBC)\r
\r
\r
; Deprecated constants. Please avoid using.\r
\r
DEF IEF_LCDC   EQU %00000010 ; LCDC (see STAT)\r
DEF _VRAM8000  EQU _VRAM\r
DEF _VRAM8800  EQU _VRAM+$800\r
DEF _VRAM9000  EQU _VRAM+$1000\r
DEF CART_SRAM_2KB   EQU 1 ; 1 incomplete bank\r
DEF LCDCF_BG8800  EQU %00000000 ; BG & Window Tile Data Select\r
DEF LCDCF_BG8000  EQU %00010000 ; BG & Window Tile Data Select\r
DEF LCDCB_BG8000  EQU 4 ; BG & Window Tile Data Select\r
\r
\r
    ENDC ;HARDWARE_INC\r
`,ii=`; From https://gbdev.io/gb-asm-tutorial/part1/hello_world.html

INCLUDE "hardware.inc"

SECTION "Header", ROM0[$100]

  jp EntryPoint

  ds $150 - @, 0 ; Make room for the header

EntryPoint:
  ; Shut down audio circuitry
  ld a, 0
  ld [rNR52], a

  ; Do not turn the LCD off outside of VBlank
WaitVBlank:
  ld a, [rLY]
  cp 144
  jp c, WaitVBlank

  ; Turn the LCD off
  ld a, 0
  ld [rLCDC], a

  ; Copy the tile data
  ld de, Tiles
  ld hl, $9000
  ld bc, TilesEnd - Tiles
CopyTiles:
  ld a, [de]
  ld [hli], a
  inc de
  dec bc
  ld a, b
  or a, c
  jp nz, CopyTiles

  ; Copy the tilemap
  ld de, Tilemap
  ld hl, $9800
  ld bc, TilemapEnd - Tilemap
CopyTilemap:
  ld a, [de]
  ld [hli], a
  inc de
  dec bc
  ld a, b
  or a, c
  jp nz, CopyTilemap

  ; Turn the LCD on
  ld a, LCDCF_ON | LCDCF_BGON
  ld [rLCDC], a

  ; During the first (blank) frame, initialize display registers
  ld a, %11100100
  ld [rBGP], a

Done:
  jp Done


SECTION "Tile data", ROM0

Tiles:
  db $00,$ff, $00,$ff, $00,$ff, $00,$ff, $00,$ff, $00,$ff, $00,$ff, $00,$ff
  db $00,$ff, $00,$80, $00,$80, $00,$80, $00,$80, $00,$80, $00,$80, $00,$80
  db $00,$ff, $00,$7e, $00,$7e, $00,$7e, $00,$7e, $00,$7e, $00,$7e, $00,$7e
  db $00,$ff, $00,$01, $00,$01, $00,$01, $00,$01, $00,$01, $00,$01, $00,$01
  db $00,$ff, $00,$00, $00,$00, $00,$00, $00,$00, $00,$00, $00,$00, $00,$00
  db $00,$ff, $00,$7f, $00,$7f, $00,$7f, $00,$7f, $00,$7f, $00,$7f, $00,$7f
  db $00,$ff, $03,$fc, $00,$f8, $00,$f0, $00,$e0, $20,$c0, $00,$c0, $40,$80
  db $00,$ff, $c0,$3f, $00,$1f, $00,$0f, $00,$07, $04,$03, $00,$03, $02,$01
  db $00,$80, $00,$80, $7f,$80, $00,$80, $00,$80, $7f,$80, $7f,$80, $00,$80
  db $00,$7e, $2a,$7e, $d5,$7e, $2a,$7e, $54,$7e, $ff,$00, $ff,$00, $00,$00
  db $00,$01, $00,$01, $ff,$01, $00,$01, $01,$01, $fe,$01, $ff,$01, $00,$01
  db $00,$80, $80,$80, $7f,$80, $80,$80, $00,$80, $ff,$80, $7f,$80, $80,$80
  db $00,$7f, $2a,$7f, $d5,$7f, $2a,$7f, $55,$7f, $ff,$00, $ff,$00, $00,$00
  db $00,$ff, $aa,$ff, $55,$ff, $aa,$ff, $55,$ff, $fa,$07, $fd,$07, $02,$07
  db $00,$7f, $2a,$7f, $d5,$7f, $2a,$7f, $55,$7f, $aa,$7f, $d5,$7f, $2a,$7f
  db $00,$ff, $80,$ff, $00,$ff, $80,$ff, $00,$ff, $80,$ff, $00,$ff, $80,$ff
  db $40,$80, $00,$80, $7f,$80, $00,$80, $00,$80, $7f,$80, $7f,$80, $00,$80
  db $00,$3c, $02,$7e, $85,$7e, $0a,$7e, $14,$7e, $ab,$7e, $95,$7e, $2a,$7e
  db $02,$01, $00,$01, $ff,$01, $00,$01, $01,$01, $fe,$01, $ff,$01, $00,$01
  db $00,$ff, $80,$ff, $50,$ff, $a8,$ff, $50,$ff, $a8,$ff, $54,$ff, $a8,$ff
  db $7f,$80, $7f,$80, $7f,$80, $7f,$80, $7f,$80, $7f,$80, $7f,$80, $7f,$80
  db $ff,$00, $ff,$00, $ff,$00, $ab,$7e, $d5,$7e, $ab,$7e, $d5,$7e, $ab,$7e
  db $ff,$01, $fe,$01, $ff,$01, $fe,$01, $ff,$01, $fe,$01, $ff,$01, $fe,$01
  db $7f,$80, $ff,$80, $7f,$80, $ff,$80, $7f,$80, $ff,$80, $7f,$80, $ff,$80
  db $ff,$00, $ff,$00, $ff,$00, $aa,$7f, $d5,$7f, $aa,$7f, $d5,$7f, $aa,$7f
  db $f8,$07, $f8,$07, $f8,$07, $80,$ff, $00,$ff, $aa,$ff, $55,$ff, $aa,$ff
  db $7f,$80, $7f,$80, $7f,$80, $7f,$80, $7f,$80, $ff,$80, $7f,$80, $ff,$80
  db $d5,$7f, $aa,$7f, $d5,$7f, $aa,$7f, $d5,$7f, $aa,$7f, $d5,$7f, $aa,$7f
  db $d5,$7e, $ab,$7e, $d5,$7e, $ab,$7e, $d5,$7e, $ab,$7e, $d5,$7e, $eb,$3c
  db $54,$ff, $aa,$ff, $54,$ff, $aa,$ff, $54,$ff, $aa,$ff, $54,$ff, $aa,$ff
  db $7f,$80, $7f,$80, $7f,$80, $7f,$80, $7f,$80, $7f,$80, $7f,$80, $00,$ff
  db $d5,$7e, $ab,$7e, $d5,$7e, $ab,$7e, $d5,$7e, $ab,$7e, $d5,$7e, $2a,$ff
  db $ff,$01, $fe,$01, $ff,$01, $fe,$01, $ff,$01, $fe,$01, $ff,$01, $80,$ff
  db $7f,$80, $ff,$80, $7f,$80, $ff,$80, $7f,$80, $ff,$80, $7f,$80, $aa,$ff
  db $ff,$00, $ff,$00, $ff,$00, $ff,$00, $ff,$00, $ff,$00, $ff,$00, $2a,$ff
  db $ff,$01, $fe,$01, $ff,$01, $fe,$01, $fe,$01, $fe,$01, $fe,$01, $80,$ff
  db $7f,$80, $ff,$80, $7f,$80, $7f,$80, $7f,$80, $7f,$80, $7f,$80, $00,$ff
  db $fe,$01, $fe,$01, $fe,$01, $fe,$01, $fe,$01, $fe,$01, $fe,$01, $80,$ff
  db $3f,$c0, $3f,$c0, $3f,$c0, $1f,$e0, $1f,$e0, $0f,$f0, $03,$fc, $00,$ff
  db $fd,$03, $fc,$03, $fd,$03, $f8,$07, $f9,$07, $f0,$0f, $c1,$3f, $82,$ff
  db $55,$ff, $2a,$7e, $54,$7e, $2a,$7e, $54,$7e, $2a,$7e, $54,$7e, $00,$7e
  db $01,$ff, $00,$01, $01,$01, $00,$01, $01,$01, $00,$01, $01,$01, $00,$01
  db $54,$ff, $ae,$f8, $50,$f0, $a0,$e0, $60,$c0, $80,$c0, $40,$80, $40,$80
  db $55,$ff, $00,$00, $00,$00, $00,$00, $00,$00, $00,$00, $00,$00, $00,$00
  db $55,$ff, $6a,$1f, $05,$0f, $02,$07, $05,$07, $02,$03, $03,$01, $02,$01
  db $54,$ff, $80,$80, $00,$80, $80,$80, $00,$80, $80,$80, $00,$80, $00,$80
  db $55,$ff, $2a,$1f, $0d,$07, $06,$03, $01,$03, $02,$01, $01,$01, $00,$01
  db $55,$ff, $2a,$7f, $55,$7f, $2a,$7f, $55,$7f, $2a,$7f, $55,$7f, $00,$7f
  db $55,$ff, $aa,$ff, $55,$ff, $aa,$ff, $55,$ff, $aa,$ff, $55,$ff, $00,$ff
  db $15,$ff, $00,$00, $00,$00, $00,$00, $00,$00, $00,$00, $00,$00, $00,$00
  db $55,$ff, $6a,$1f, $0d,$07, $06,$03, $01,$03, $02,$01, $03,$01, $00,$01
  db $54,$ff, $a8,$ff, $54,$ff, $a8,$ff, $50,$ff, $a0,$ff, $40,$ff, $00,$ff
  db $00,$7e, $2a,$7e, $d5,$7e, $2a,$7e, $54,$7e, $ab,$76, $dd,$66, $22,$66
  db $00,$7c, $2a,$7e, $d5,$7e, $2a,$7e, $54,$7c, $ff,$00, $ff,$00, $00,$00
  db $00,$01, $00,$01, $ff,$01, $02,$01, $07,$01, $fe,$03, $fd,$07, $0a,$0f
  db $00,$7c, $2a,$7e, $d5,$7e, $2a,$7e, $54,$7e, $ab,$7e, $d5,$7e, $2a,$7e
  db $00,$ff, $a0,$ff, $50,$ff, $a8,$ff, $54,$ff, $a8,$ff, $54,$ff, $aa,$ff
  db $dd,$62, $bf,$42, $fd,$42, $bf,$40, $ff,$00, $ff,$00, $f7,$08, $ef,$18
  db $ff,$00, $ff,$00, $ff,$00, $ab,$7c, $d5,$7e, $ab,$7e, $d5,$7e, $ab,$7e
  db $f9,$07, $fc,$03, $fd,$03, $fe,$01, $ff,$01, $fe,$01, $ff,$01, $fe,$01
  db $d5,$7e, $ab,$7e, $d5,$7e, $ab,$7e, $d5,$7e, $ab,$7e, $d5,$7e, $ab,$7c
  db $f7,$18, $eb,$1c, $d7,$3c, $eb,$3c, $d5,$3e, $ab,$7e, $d5,$7e, $2a,$ff
  db $ff,$01, $fe,$01, $ff,$01, $fe,$01, $ff,$01, $fe,$01, $ff,$01, $a2,$ff
  db $7f,$c0, $bf,$c0, $7f,$c0, $bf,$e0, $5f,$e0, $af,$f0, $57,$fc, $aa,$ff
  db $ff,$01, $fc,$03, $fd,$03, $fc,$03, $f9,$07, $f0,$0f, $c1,$3f, $82,$ff
  db $55,$ff, $2a,$ff, $55,$ff, $2a,$ff, $55,$ff, $2a,$ff, $55,$ff, $00,$ff
  db $45,$ff, $a2,$ff, $41,$ff, $82,$ff, $41,$ff, $80,$ff, $01,$ff, $00,$ff
  db $54,$ff, $aa,$ff, $54,$ff, $aa,$ff, $54,$ff, $aa,$ff, $54,$ff, $00,$ff
  db $15,$ff, $2a,$ff, $15,$ff, $0a,$ff, $15,$ff, $0a,$ff, $01,$ff, $00,$ff
  db $01,$ff, $80,$ff, $01,$ff, $80,$ff, $01,$ff, $80,$ff, $01,$ff, $00,$ff
TilesEnd:

SECTION "Tilemap", ROM0

Tilemap:
  db $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00,  0,0,0,0,0,0,0,0,0,0,0,0
  db $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00,  0,0,0,0,0,0,0,0,0,0,0,0
  db $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00,  0,0,0,0,0,0,0,0,0,0,0,0
  db $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00,  0,0,0,0,0,0,0,0,0,0,0,0
  db $00, $00, $01, $02, $03, $01, $04, $03, $01, $05, $00, $01, $05, $00, $06, $04, $07, $00, $00, $00,  0,0,0,0,0,0,0,0,0,0,0,0
  db $00, $00, $08, $09, $0a, $0b, $0c, $0d, $0b, $0e, $0f, $08, $0e, $0f, $10, $11, $12, $13, $00, $00,  0,0,0,0,0,0,0,0,0,0,0,0
  db $00, $00, $14, $15, $16, $17, $18, $19, $1a, $1b, $0f, $14, $1b, $0f, $14, $1c, $16, $1d, $00, $00,  0,0,0,0,0,0,0,0,0,0,0,0
  db $00, $00, $1e, $1f, $20, $21, $22, $23, $24, $22, $25, $1e, $22, $25, $26, $22, $27, $1d, $00, $00,  0,0,0,0,0,0,0,0,0,0,0,0
  db $00, $00, $01, $28, $29, $2a, $2b, $2c, $2d, $2b, $2e, $2d, $2f, $30, $2d, $31, $32, $33, $00, $00,  0,0,0,0,0,0,0,0,0,0,0,0
  db $00, $00, $08, $34, $0a, $0b, $11, $0a, $0b, $35, $36, $0b, $0e, $0f, $08, $37, $0a, $38, $00, $00,  0,0,0,0,0,0,0,0,0,0,0,0
  db $00, $00, $14, $39, $16, $17, $1c, $16, $17, $3a, $3b, $17, $1b, $0f, $14, $3c, $16, $1d, $00, $00,  0,0,0,0,0,0,0,0,0,0,0,0
  db $00, $00, $1e, $3d, $3e, $3f, $22, $27, $21, $1f, $20, $21, $22, $25, $1e, $22, $40, $1d, $00, $00,  0,0,0,0,0,0,0,0,0,0,0,0
  db $00, $00, $00, $41, $42, $43, $44, $30, $33, $41, $45, $43, $41, $30, $43, $41, $30, $33, $00, $00,  0,0,0,0,0,0,0,0,0,0,0,0
  db $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00,  0,0,0,0,0,0,0,0,0,0,0,0
  db $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00,  0,0,0,0,0,0,0,0,0,0,0,0
  db $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00,  0,0,0,0,0,0,0,0,0,0,0,0
  db $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00,  0,0,0,0,0,0,0,0,0,0,0,0
  db $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00, $00,  0,0,0,0,0,0,0,0,0,0,0,0
TilemapEnd:
`,Yt={autoUrl:!1,autoLocalStorage:!1};let $t;On();function On(){$t={"hardware.inc":ar,"main.asm":ii}}function si(){if(location.hash.length>1)location.hash.startsWith("#https://gist.github.com/")?(Un(location.hash.slice(1)),location.hash=""):location.hash.startsWith("#http://")||location.hash.startsWith("#https://")?(ui(location.hash.slice(1)),location.hash=""):(oi(),Yt.autoUrl=!0);else if("rgbds_storage"in localStorage){$t={"hardware.inc":ar};for(var[q,X]of Object.entries(JSON.parse(localStorage.rgbds_storage)))X instanceof Object&&(X=Uint8Array.from(Object.values(X))),$t[q]=X;Yt.autoLocalStorage=!0}}function Jt(){return $t}function nr(q,X){typeof q<"u"&&(X instanceof ArrayBuffer&&(X=new Uint8Array(X)),X===null?delete $t[q]:$t[q]=X),Yt.autoUrl&&(document.location.hash=new URL(In()).hash),Yt.autoLocalStorage&&(localStorage.rgbds_storage=JSON.stringify($t))}function oi(){var q=Bn.decompressFromEncodedURIComponent(location.hash.slice(1));if(q==null)return!1;if(q.indexOf("\0")<0)return $t["main.asm"]=q,!0;q=q.split("\0"),$t={"hardware.inc":ar};for(var X=0;X<q.length-1;X+=2)$t[q[X]]=q[X+1];return!0}function In(){var q="";for(var[X,a]of Object.entries($t))X=="hardware.inc"&&a==ar||(q+=X+"\0"+a+"\0");var D=new URL(document.location);return D.hash=Bn.compressToEncodedURIComponent(q),D.hash.length>1024*2?"Sorry, code too large for direct URL generation":D.toString()}function Pn(q){var X=/https:\/\/gist\.github\.com\/\w+\/(\w+)/.exec(q);return X?X[1]:null}function Un(q){var X=Pn(q);if(X!=null){var a=new XMLHttpRequest;a.open("GET","https://api.github.com/gists/"+X,!1),a.send(),JSON.parse(a.response);var D=JSON.parse(a.responseText);$t={"hardware.inc":ar};for(var[z,k]of Object.entries(D.files))$t[z]=k.content;gn()}}function ai(q,X,a){var D={};for(var[z,k]of Object.entries($t))D[z]={content:k};if(a==""){var h=new XMLHttpRequest;return h.open("POST","https://api.github.com/gists",!1),h.setRequestHeader("Authorization","Basic "+btoa(q+":"+X)),h.send(JSON.stringify({files:D})),h.status>=400?null:JSON.parse(h.response).html_url}var A=Pn(a);if(A==null)return null;var h=new XMLHttpRequest;return h.open("PATCH","https://api.github.com/gists/"+A,!1),h.setRequestHeader("Authorization","Basic "+btoa(q+":"+X)),h.send(JSON.stringify({files:D})),h.status>=400?null:a}function li(){var q=new Ln;for(var[X,a]of Object.entries($t))q.file(X,a);q.generateAsync({type:"blob"}).then(function(D){var z=document.createElement("a"),k=window.URL.createObjectURL(D,{type:"application/octet-stream"});z.setAttribute("href",k),z.setAttribute("download","source.zip"),z.style.display="none",document.body.appendChild(z),z.click(),document.body.removeChild(z),window.URL.revokeObjectURL(k)})}function ci(q){$t={"hardware.inc":ar},Ln.loadAsync(q).then(function(X){var a=Object.values(X.files);function D(){if(!(a.length<1)){var z=a.pop(),k=editors.getFileType(z.name)=="text"?"string":"uint8array";z.async(k).then(function(A){$t[z.name]=A,D(),gn()})}}D()})}function ui(q){$t={"hardware.inc":ar};var X=new XMLHttpRequest;X.open("GET",q,!1),X.send(),$t["main.asm"]=X.response,gn()}function gn(){editors.setCurrentFile(Object.keys($t)[0]),updateFileList()}var hi=(()=>{var q=import.meta.url;return function(X={}){var a=X,D,z;a.ready=new Promise((y,T)=>{D=y,z=T});var k=Object.assign({},a),A=[],h="./this.program",s=(y,T)=>{throw T},l=!0,t="";function e(y){return a.locateFile?a.locateFile(y,t):t+y}var r,n;typeof document<"u"&&document.currentScript&&(t=document.currentScript.src),q&&(t=q),t.indexOf("blob:")!==0?t=t.substr(0,t.replace(/[?#].*/,"").lastIndexOf("/")+1):t="",r=y=>{var T=new XMLHttpRequest;return T.open("GET",y,!1),T.send(null),T.responseText},n=(y,T,O)=>{var V=new XMLHttpRequest;V.open("GET",y,!0),V.responseType="arraybuffer",V.onload=()=>{if(V.status==200||V.status==0&&V.response){T(V.response);return}O()},V.onerror=O,V.send(null)};var i=a.print||console.log.bind(console),o=a.printErr||console.error.bind(console);Object.assign(a,k),k=null,a.arguments&&(A=a.arguments),a.thisProgram&&(h=a.thisProgram),a.quit&&(s=a.quit);var d;a.wasmBinary&&(d=a.wasmBinary);var v=a.noExitRuntime||!0;typeof WebAssembly!="object"&&De("no native wasm support detected");var _,C=!1,$;function c(y,T){y||De(T)}var g,E,m,p,f;function F(){var y=_.buffer;a.HEAP8=g=new Int8Array(y),a.HEAP16=m=new Int16Array(y),a.HEAPU8=E=new Uint8Array(y),a.HEAPU16=new Uint16Array(y),a.HEAP32=p=new Int32Array(y),a.HEAPU32=f=new Uint32Array(y),a.HEAPF32=new Float32Array(y),a.HEAPF64=new Float64Array(y)}var R=[],I=[],S=[],P=[],G=0;function Z(){return v||G>0}function ae(){if(a.preRun)for(typeof a.preRun=="function"&&(a.preRun=[a.preRun]);a.preRun.length;)ee(a.preRun.shift());se(R)}function re(){!a.noFSInit&&!U.init.initialized&&U.init(),U.ignorePermissions=!1,se(I)}function ce(){se(S)}function j(){if(a.postRun)for(typeof a.postRun=="function"&&(a.postRun=[a.postRun]);a.postRun.length;)fe(a.postRun.shift());se(P)}function ee(y){R.unshift(y)}function ie(y){I.unshift(y)}function fe(y){P.unshift(y)}var he=0,ye=null;function Te(y){return y}function ke(y){he++,a.monitorRunDependencies&&a.monitorRunDependencies(he)}function Fe(y){if(he--,a.monitorRunDependencies&&a.monitorRunDependencies(he),he==0&&ye){var T=ye;ye=null,T()}}function De(y){a.onAbort&&a.onAbort(y),y="Aborted("+y+")",o(y),C=!0,$=1,y+=". Build with -sASSERTIONS for more info.";var T=new WebAssembly.RuntimeError(y);throw z(T),T}var Pe="data:application/octet-stream;base64,";function Ye(y){return y.startsWith(Pe)}var qe;a.locateFile?(qe="rgbasm.wasm",Ye(qe)||(qe=e(qe))):qe=new URL("/rgbds-live/assets/rgbasm-442999d8.wasm",self.location).href;function B(y){if(y==qe&&d)return new Uint8Array(d);throw"both async and sync fetching of the wasm failed"}function _e(y){return!d&&l&&typeof fetch=="function"?fetch(y,{credentials:"same-origin"}).then(T=>{if(!T.ok)throw"failed to load wasm binary file at '"+y+"'";return T.arrayBuffer()}).catch(()=>B(y)):Promise.resolve().then(()=>B(y))}function me(y,T,O){return _e(y).then(V=>WebAssembly.instantiate(V,T)).then(V=>V).then(O,V=>{o(`failed to asynchronously prepare wasm: ${V}`),De(V)})}function te(y,T,O,V){return!y&&typeof WebAssembly.instantiateStreaming=="function"&&!Ye(T)&&typeof fetch=="function"?fetch(T,{credentials:"same-origin"}).then(J=>{var ue=WebAssembly.instantiateStreaming(J,O);return ue.then(V,function(de){return o(`wasm streaming compile failed: ${de}`),o("falling back to ArrayBuffer instantiation"),me(T,O,V)})}):me(T,O,V)}function Q(){var y={a:gt};function T(V,J){var ue=V.exports;return ut=ue,_=ut.v,F(),ut.z,ie(ut.w),Fe(),ue}ke();function O(V){T(V.instance)}if(a.instantiateWasm)try{return a.instantiateWasm(y,T)}catch(V){o(`Module.instantiateWasm callback failed with error: ${V}`),z(V)}return te(d,qe,y,O).catch(z),{}}var Y,pe;function le(y){this.name="ExitStatus",this.message=`Program terminated with exit(${y})`,this.status=y}var se=y=>{for(;y.length>0;)y.shift()(a)},ve=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Se=(y,T,O)=>{for(var V=T+O,J=T;y[J]&&!(J>=V);)++J;if(J-T>16&&y.buffer&&ve)return ve.decode(y.subarray(T,J));for(var ue="";T<J;){var de=y[T++];if(!(de&128)){ue+=String.fromCharCode(de);continue}var we=y[T++]&63;if((de&224)==192){ue+=String.fromCharCode((de&31)<<6|we);continue}var xe=y[T++]&63;if((de&240)==224?de=(de&15)<<12|we<<6|xe:de=(de&7)<<18|we<<12|xe<<6|y[T++]&63,de<65536)ue+=String.fromCharCode(de);else{var Je=de-65536;ue+=String.fromCharCode(55296|Je>>10,56320|Je&1023)}}return ue},$e=(y,T)=>y?Se(E,y,T):"",Ae=(y,T,O,V)=>{De(`Assertion failed: ${$e(y)}, at: `+[T?$e(T):"unknown filename",O,V?$e(V):"unknown function"])},Ge=y=>(p[Ct()>>2]=y,y),be={isAbs:y=>y.charAt(0)==="/",splitPath:y=>{var T=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return T.exec(y).slice(1)},normalizeArray:(y,T)=>{for(var O=0,V=y.length-1;V>=0;V--){var J=y[V];J==="."?y.splice(V,1):J===".."?(y.splice(V,1),O++):O&&(y.splice(V,1),O--)}if(T)for(;O;O--)y.unshift("..");return y},normalize:y=>{var T=be.isAbs(y),O=y.substr(-1)==="/";return y=be.normalizeArray(y.split("/").filter(V=>!!V),!T).join("/"),!y&&!T&&(y="."),y&&O&&(y+="/"),(T?"/":"")+y},dirname:y=>{var T=be.splitPath(y),O=T[0],V=T[1];return!O&&!V?".":(V&&(V=V.substr(0,V.length-1)),O+V)},basename:y=>{if(y==="/")return"/";y=be.normalize(y),y=y.replace(/\/$/,"");var T=y.lastIndexOf("/");return T===-1?y:y.substr(T+1)},join:function(){var y=Array.prototype.slice.call(arguments);return be.normalize(y.join("/"))},join2:(y,T)=>be.normalize(y+"/"+T)},Qe=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return y=>crypto.getRandomValues(y);De("initRandomDevice")},Ce=y=>(Ce=Qe())(y),Xe={resolve:function(){for(var y="",T=!1,O=arguments.length-1;O>=-1&&!T;O--){var V=O>=0?arguments[O]:U.cwd();if(typeof V!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!V)return"";y=V+"/"+y,T=be.isAbs(V)}return y=be.normalizeArray(y.split("/").filter(J=>!!J),!T).join("/"),(T?"/":"")+y||"."},relative:(y,T)=>{y=Xe.resolve(y).substr(1),T=Xe.resolve(T).substr(1);function O(Je){for(var nt=0;nt<Je.length&&Je[nt]==="";nt++);for(var ot=Je.length-1;ot>=0&&Je[ot]==="";ot--);return nt>ot?[]:Je.slice(nt,ot-nt+1)}for(var V=O(y.split("/")),J=O(T.split("/")),ue=Math.min(V.length,J.length),de=ue,we=0;we<ue;we++)if(V[we]!==J[we]){de=we;break}for(var xe=[],we=de;we<V.length;we++)xe.push("..");return xe=xe.concat(J.slice(de)),xe.join("/")}},ft=[],ne=y=>{for(var T=0,O=0;O<y.length;++O){var V=y.charCodeAt(O);V<=127?T++:V<=2047?T+=2:V>=55296&&V<=57343?(T+=4,++O):T+=3}return T},Ee=(y,T,O,V)=>{if(!(V>0))return 0;for(var J=O,ue=O+V-1,de=0;de<y.length;++de){var we=y.charCodeAt(de);if(we>=55296&&we<=57343){var xe=y.charCodeAt(++de);we=65536+((we&1023)<<10)|xe&1023}if(we<=127){if(O>=ue)break;T[O++]=we}else if(we<=2047){if(O+1>=ue)break;T[O++]=192|we>>6,T[O++]=128|we&63}else if(we<=65535){if(O+2>=ue)break;T[O++]=224|we>>12,T[O++]=128|we>>6&63,T[O++]=128|we&63}else{if(O+3>=ue)break;T[O++]=240|we>>18,T[O++]=128|we>>12&63,T[O++]=128|we>>6&63,T[O++]=128|we&63}}return T[O]=0,O-J};function We(y,T,O){var V=O>0?O:ne(y)+1,J=new Array(V),ue=Ee(y,J,0,J.length);return T&&(J.length=ue),J}var et=()=>{if(!ft.length){var y=null;if(typeof window<"u"&&typeof window.prompt=="function"?(y=window.prompt("Input: "),y!==null&&(y+=`
`)):typeof readline=="function"&&(y=readline(),y!==null&&(y+=`
`)),!y)return null;ft=We(y,!0)}return ft.shift()},Le={ttys:[],init(){},shutdown(){},register(y,T){Le.ttys[y]={input:[],output:[],ops:T},U.registerDevice(y,Le.stream_ops)},stream_ops:{open(y){var T=Le.ttys[y.node.rdev];if(!T)throw new U.ErrnoError(43);y.tty=T,y.seekable=!1},close(y){y.tty.ops.fsync(y.tty)},fsync(y){y.tty.ops.fsync(y.tty)},read(y,T,O,V,J){if(!y.tty||!y.tty.ops.get_char)throw new U.ErrnoError(60);for(var ue=0,de=0;de<V;de++){var we;try{we=y.tty.ops.get_char(y.tty)}catch{throw new U.ErrnoError(29)}if(we===void 0&&ue===0)throw new U.ErrnoError(6);if(we==null)break;ue++,T[O+de]=we}return ue&&(y.node.timestamp=Date.now()),ue},write(y,T,O,V,J){if(!y.tty||!y.tty.ops.put_char)throw new U.ErrnoError(60);try{for(var ue=0;ue<V;ue++)y.tty.ops.put_char(y.tty,T[O+ue])}catch{throw new U.ErrnoError(29)}return V&&(y.node.timestamp=Date.now()),ue}},default_tty_ops:{get_char(y){return et()},put_char(y,T){T===null||T===10?(i(Se(y.output,0)),y.output=[]):T!=0&&y.output.push(T)},fsync(y){y.output&&y.output.length>0&&(i(Se(y.output,0)),y.output=[])},ioctl_tcgets(y){return{c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},ioctl_tcsets(y,T,O){return 0},ioctl_tiocgwinsz(y){return[24,80]}},default_tty1_ops:{put_char(y,T){T===null||T===10?(o(Se(y.output,0)),y.output=[]):T!=0&&y.output.push(T)},fsync(y){y.output&&y.output.length>0&&(o(Se(y.output,0)),y.output=[])}}},vt=(y,T)=>(E.fill(0,y,y+T),y),Ie=(y,T)=>Math.ceil(y/T)*T,At=y=>{y=Ie(y,65536);var T=Kt(65536,y);return T?vt(T,y):0},He={ops_table:null,mount(y){return He.createNode(null,"/",16895,0)},createNode(y,T,O,V){if(U.isBlkdev(O)||U.isFIFO(O))throw new U.ErrnoError(63);He.ops_table||(He.ops_table={dir:{node:{getattr:He.node_ops.getattr,setattr:He.node_ops.setattr,lookup:He.node_ops.lookup,mknod:He.node_ops.mknod,rename:He.node_ops.rename,unlink:He.node_ops.unlink,rmdir:He.node_ops.rmdir,readdir:He.node_ops.readdir,symlink:He.node_ops.symlink},stream:{llseek:He.stream_ops.llseek}},file:{node:{getattr:He.node_ops.getattr,setattr:He.node_ops.setattr},stream:{llseek:He.stream_ops.llseek,read:He.stream_ops.read,write:He.stream_ops.write,allocate:He.stream_ops.allocate,mmap:He.stream_ops.mmap,msync:He.stream_ops.msync}},link:{node:{getattr:He.node_ops.getattr,setattr:He.node_ops.setattr,readlink:He.node_ops.readlink},stream:{}},chrdev:{node:{getattr:He.node_ops.getattr,setattr:He.node_ops.setattr},stream:U.chrdev_stream_ops}});var J=U.createNode(y,T,O,V);return U.isDir(J.mode)?(J.node_ops=He.ops_table.dir.node,J.stream_ops=He.ops_table.dir.stream,J.contents={}):U.isFile(J.mode)?(J.node_ops=He.ops_table.file.node,J.stream_ops=He.ops_table.file.stream,J.usedBytes=0,J.contents=null):U.isLink(J.mode)?(J.node_ops=He.ops_table.link.node,J.stream_ops=He.ops_table.link.stream):U.isChrdev(J.mode)&&(J.node_ops=He.ops_table.chrdev.node,J.stream_ops=He.ops_table.chrdev.stream),J.timestamp=Date.now(),y&&(y.contents[T]=J,y.timestamp=J.timestamp),J},getFileDataAsTypedArray(y){return y.contents?y.contents.subarray?y.contents.subarray(0,y.usedBytes):new Uint8Array(y.contents):new Uint8Array(0)},expandFileStorage(y,T){var O=y.contents?y.contents.length:0;if(!(O>=T)){var V=1024*1024;T=Math.max(T,O*(O<V?2:1.125)>>>0),O!=0&&(T=Math.max(T,256));var J=y.contents;y.contents=new Uint8Array(T),y.usedBytes>0&&y.contents.set(J.subarray(0,y.usedBytes),0)}},resizeFileStorage(y,T){if(y.usedBytes!=T)if(T==0)y.contents=null,y.usedBytes=0;else{var O=y.contents;y.contents=new Uint8Array(T),O&&y.contents.set(O.subarray(0,Math.min(T,y.usedBytes))),y.usedBytes=T}},node_ops:{getattr(y){var T={};return T.dev=U.isChrdev(y.mode)?y.id:1,T.ino=y.id,T.mode=y.mode,T.nlink=1,T.uid=0,T.gid=0,T.rdev=y.rdev,U.isDir(y.mode)?T.size=4096:U.isFile(y.mode)?T.size=y.usedBytes:U.isLink(y.mode)?T.size=y.link.length:T.size=0,T.atime=new Date(y.timestamp),T.mtime=new Date(y.timestamp),T.ctime=new Date(y.timestamp),T.blksize=4096,T.blocks=Math.ceil(T.size/T.blksize),T},setattr(y,T){T.mode!==void 0&&(y.mode=T.mode),T.timestamp!==void 0&&(y.timestamp=T.timestamp),T.size!==void 0&&He.resizeFileStorage(y,T.size)},lookup(y,T){throw U.genericErrors[44]},mknod(y,T,O,V){return He.createNode(y,T,O,V)},rename(y,T,O){if(U.isDir(y.mode)){var V;try{V=U.lookupNode(T,O)}catch{}if(V)for(var J in V.contents)throw new U.ErrnoError(55)}delete y.parent.contents[y.name],y.parent.timestamp=Date.now(),y.name=O,T.contents[O]=y,T.timestamp=y.parent.timestamp,y.parent=T},unlink(y,T){delete y.contents[T],y.timestamp=Date.now()},rmdir(y,T){var O=U.lookupNode(y,T);for(var V in O.contents)throw new U.ErrnoError(55);delete y.contents[T],y.timestamp=Date.now()},readdir(y){var T=[".",".."];for(var O in y.contents)y.contents.hasOwnProperty(O)&&T.push(O);return T},symlink(y,T,O){var V=He.createNode(y,T,41471,0);return V.link=O,V},readlink(y){if(!U.isLink(y.mode))throw new U.ErrnoError(28);return y.link}},stream_ops:{read(y,T,O,V,J){var ue=y.node.contents;if(J>=y.node.usedBytes)return 0;var de=Math.min(y.node.usedBytes-J,V);if(de>8&&ue.subarray)T.set(ue.subarray(J,J+de),O);else for(var we=0;we<de;we++)T[O+we]=ue[J+we];return de},write(y,T,O,V,J,ue){if(!V)return 0;var de=y.node;if(de.timestamp=Date.now(),T.subarray&&(!de.contents||de.contents.subarray)){if(ue)return de.contents=T.subarray(O,O+V),de.usedBytes=V,V;if(de.usedBytes===0&&J===0)return de.contents=T.slice(O,O+V),de.usedBytes=V,V;if(J+V<=de.usedBytes)return de.contents.set(T.subarray(O,O+V),J),V}if(He.expandFileStorage(de,J+V),de.contents.subarray&&T.subarray)de.contents.set(T.subarray(O,O+V),J);else for(var we=0;we<V;we++)de.contents[J+we]=T[O+we];return de.usedBytes=Math.max(de.usedBytes,J+V),V},llseek(y,T,O){var V=T;if(O===1?V+=y.position:O===2&&U.isFile(y.node.mode)&&(V+=y.node.usedBytes),V<0)throw new U.ErrnoError(28);return V},allocate(y,T,O){He.expandFileStorage(y.node,T+O),y.node.usedBytes=Math.max(y.node.usedBytes,T+O)},mmap(y,T,O,V,J){if(!U.isFile(y.node.mode))throw new U.ErrnoError(43);var ue,de,we=y.node.contents;if(!(J&2)&&we.buffer===g.buffer)de=!1,ue=we.byteOffset;else{if((O>0||O+T<we.length)&&(we.subarray?we=we.subarray(O,O+T):we=Array.prototype.slice.call(we,O,O+T)),de=!0,ue=At(T),!ue)throw new U.ErrnoError(48);g.set(we,ue)}return{ptr:ue,allocated:de}},msync(y,T,O,V,J){return He.stream_ops.write(y,T,0,V,O,!1),0}}},Rt=(y,T,O,V)=>{var J=V?"":`al ${y}`;n(y,ue=>{c(ue,`Loading data file "${y}" failed (no arrayBuffer).`),T(new Uint8Array(ue)),J&&Fe()},ue=>{if(O)O();else throw`Loading data file "${y}" failed.`}),J&&ke()},xt=a.preloadPlugins||[],N=(y,T,O,V)=>{typeof Browser<"u"&&Browser.init();var J=!1;return xt.forEach(ue=>{J||ue.canHandle(T)&&(ue.handle(y,T,O,V),J=!0)}),J},dt=(y,T,O,V,J,ue,de,we,xe,Je)=>{var nt=T?Xe.resolve(be.join2(y,T)):y;function ot(Ke){function je(it){Je&&Je(),we||U.createDataFile(y,T,it,V,J,xe),ue&&ue(),Fe()}N(Ke,nt,je,()=>{de&&de(),Fe()})||je(Ke)}ke(),typeof O=="string"?Rt(O,Ke=>ot(Ke),de):ot(O)},W=y=>{var T={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},O=T[y];if(typeof O>"u")throw new Error(`Unknown file open mode: ${y}`);return O},lt=(y,T)=>{var O=0;return y&&(O|=365),T&&(O|=146),O},U={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath(y,T={}){if(y=Xe.resolve(y),!y)return{path:"",node:null};var O={follow_mount:!0,recurse_count:0};if(T=Object.assign(O,T),T.recurse_count>8)throw new U.ErrnoError(32);for(var V=y.split("/").filter(ot=>!!ot),J=U.root,ue="/",de=0;de<V.length;de++){var we=de===V.length-1;if(we&&T.parent)break;if(J=U.lookupNode(J,V[de]),ue=be.join2(ue,V[de]),U.isMountpoint(J)&&(!we||we&&T.follow_mount)&&(J=J.mounted.root),!we||T.follow)for(var xe=0;U.isLink(J.mode);){var Je=U.readlink(ue);ue=Xe.resolve(be.dirname(ue),Je);var nt=U.lookupPath(ue,{recurse_count:T.recurse_count+1});if(J=nt.node,xe++>40)throw new U.ErrnoError(32)}}return{path:ue,node:J}},getPath(y){for(var T;;){if(U.isRoot(y)){var O=y.mount.mountpoint;return T?O[O.length-1]!=="/"?`${O}/${T}`:O+T:O}T=T?`${y.name}/${T}`:y.name,y=y.parent}},hashName(y,T){for(var O=0,V=0;V<T.length;V++)O=(O<<5)-O+T.charCodeAt(V)|0;return(y+O>>>0)%U.nameTable.length},hashAddNode(y){var T=U.hashName(y.parent.id,y.name);y.name_next=U.nameTable[T],U.nameTable[T]=y},hashRemoveNode(y){var T=U.hashName(y.parent.id,y.name);if(U.nameTable[T]===y)U.nameTable[T]=y.name_next;else for(var O=U.nameTable[T];O;){if(O.name_next===y){O.name_next=y.name_next;break}O=O.name_next}},lookupNode(y,T){var O=U.mayLookup(y);if(O)throw new U.ErrnoError(O,y);for(var V=U.hashName(y.id,T),J=U.nameTable[V];J;J=J.name_next){var ue=J.name;if(J.parent.id===y.id&&ue===T)return J}return U.lookup(y,T)},createNode(y,T,O,V){var J=new U.FSNode(y,T,O,V);return U.hashAddNode(J),J},destroyNode(y){U.hashRemoveNode(y)},isRoot(y){return y===y.parent},isMountpoint(y){return!!y.mounted},isFile(y){return(y&61440)===32768},isDir(y){return(y&61440)===16384},isLink(y){return(y&61440)===40960},isChrdev(y){return(y&61440)===8192},isBlkdev(y){return(y&61440)===24576},isFIFO(y){return(y&61440)===4096},isSocket(y){return(y&49152)===49152},flagsToPermissionString(y){var T=["r","w","rw"][y&3];return y&512&&(T+="w"),T},nodePermissions(y,T){return U.ignorePermissions?0:T.includes("r")&&!(y.mode&292)||T.includes("w")&&!(y.mode&146)||T.includes("x")&&!(y.mode&73)?2:0},mayLookup(y){var T=U.nodePermissions(y,"x");return T||(y.node_ops.lookup?0:2)},mayCreate(y,T){try{var O=U.lookupNode(y,T);return 20}catch{}return U.nodePermissions(y,"wx")},mayDelete(y,T,O){var V;try{V=U.lookupNode(y,T)}catch(ue){return ue.errno}var J=U.nodePermissions(y,"wx");if(J)return J;if(O){if(!U.isDir(V.mode))return 54;if(U.isRoot(V)||U.getPath(V)===U.cwd())return 10}else if(U.isDir(V.mode))return 31;return 0},mayOpen(y,T){return y?U.isLink(y.mode)?32:U.isDir(y.mode)&&(U.flagsToPermissionString(T)!=="r"||T&512)?31:U.nodePermissions(y,U.flagsToPermissionString(T)):44},MAX_OPEN_FDS:4096,nextfd(){for(var y=0;y<=U.MAX_OPEN_FDS;y++)if(!U.streams[y])return y;throw new U.ErrnoError(33)},getStreamChecked(y){var T=U.getStream(y);if(!T)throw new U.ErrnoError(8);return T},getStream:y=>U.streams[y],createStream(y,T=-1){return U.FSStream||(U.FSStream=function(){this.shared={}},U.FSStream.prototype={},Object.defineProperties(U.FSStream.prototype,{object:{get(){return this.node},set(O){this.node=O}},isRead:{get(){return(this.flags&2097155)!==1}},isWrite:{get(){return(this.flags&2097155)!==0}},isAppend:{get(){return this.flags&1024}},flags:{get(){return this.shared.flags},set(O){this.shared.flags=O}},position:{get(){return this.shared.position},set(O){this.shared.position=O}}})),y=Object.assign(new U.FSStream,y),T==-1&&(T=U.nextfd()),y.fd=T,U.streams[T]=y,y},closeStream(y){U.streams[y]=null},chrdev_stream_ops:{open(y){var T=U.getDevice(y.node.rdev);y.stream_ops=T.stream_ops,y.stream_ops.open&&y.stream_ops.open(y)},llseek(){throw new U.ErrnoError(70)}},major:y=>y>>8,minor:y=>y&255,makedev:(y,T)=>y<<8|T,registerDevice(y,T){U.devices[y]={stream_ops:T}},getDevice:y=>U.devices[y],getMounts(y){for(var T=[],O=[y];O.length;){var V=O.pop();T.push(V),O.push.apply(O,V.mounts)}return T},syncfs(y,T){typeof y=="function"&&(T=y,y=!1),U.syncFSRequests++,U.syncFSRequests>1&&o(`warning: ${U.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var O=U.getMounts(U.root.mount),V=0;function J(de){return U.syncFSRequests--,T(de)}function ue(de){if(de)return ue.errored?void 0:(ue.errored=!0,J(de));++V>=O.length&&J(null)}O.forEach(de=>{if(!de.type.syncfs)return ue(null);de.type.syncfs(de,y,ue)})},mount(y,T,O){var V=O==="/",J=!O,ue;if(V&&U.root)throw new U.ErrnoError(10);if(!V&&!J){var de=U.lookupPath(O,{follow_mount:!1});if(O=de.path,ue=de.node,U.isMountpoint(ue))throw new U.ErrnoError(10);if(!U.isDir(ue.mode))throw new U.ErrnoError(54)}var we={type:y,opts:T,mountpoint:O,mounts:[]},xe=y.mount(we);return xe.mount=we,we.root=xe,V?U.root=xe:ue&&(ue.mounted=we,ue.mount&&ue.mount.mounts.push(we)),xe},unmount(y){var T=U.lookupPath(y,{follow_mount:!1});if(!U.isMountpoint(T.node))throw new U.ErrnoError(28);var O=T.node,V=O.mounted,J=U.getMounts(V);Object.keys(U.nameTable).forEach(de=>{for(var we=U.nameTable[de];we;){var xe=we.name_next;J.includes(we.mount)&&U.destroyNode(we),we=xe}}),O.mounted=null;var ue=O.mount.mounts.indexOf(V);O.mount.mounts.splice(ue,1)},lookup(y,T){return y.node_ops.lookup(y,T)},mknod(y,T,O){var V=U.lookupPath(y,{parent:!0}),J=V.node,ue=be.basename(y);if(!ue||ue==="."||ue==="..")throw new U.ErrnoError(28);var de=U.mayCreate(J,ue);if(de)throw new U.ErrnoError(de);if(!J.node_ops.mknod)throw new U.ErrnoError(63);return J.node_ops.mknod(J,ue,T,O)},create(y,T){return T=T!==void 0?T:438,T&=4095,T|=32768,U.mknod(y,T,0)},mkdir(y,T){return T=T!==void 0?T:511,T&=1023,T|=16384,U.mknod(y,T,0)},mkdirTree(y,T){for(var O=y.split("/"),V="",J=0;J<O.length;++J)if(O[J]){V+="/"+O[J];try{U.mkdir(V,T)}catch(ue){if(ue.errno!=20)throw ue}}},mkdev(y,T,O){return typeof O>"u"&&(O=T,T=438),T|=8192,U.mknod(y,T,O)},symlink(y,T){if(!Xe.resolve(y))throw new U.ErrnoError(44);var O=U.lookupPath(T,{parent:!0}),V=O.node;if(!V)throw new U.ErrnoError(44);var J=be.basename(T),ue=U.mayCreate(V,J);if(ue)throw new U.ErrnoError(ue);if(!V.node_ops.symlink)throw new U.ErrnoError(63);return V.node_ops.symlink(V,J,y)},rename(y,T){var O=be.dirname(y),V=be.dirname(T),J=be.basename(y),ue=be.basename(T),de,we,xe;if(de=U.lookupPath(y,{parent:!0}),we=de.node,de=U.lookupPath(T,{parent:!0}),xe=de.node,!we||!xe)throw new U.ErrnoError(44);if(we.mount!==xe.mount)throw new U.ErrnoError(75);var Je=U.lookupNode(we,J),nt=Xe.relative(y,V);if(nt.charAt(0)!==".")throw new U.ErrnoError(28);if(nt=Xe.relative(T,O),nt.charAt(0)!==".")throw new U.ErrnoError(55);var ot;try{ot=U.lookupNode(xe,ue)}catch{}if(Je!==ot){var Ke=U.isDir(Je.mode),je=U.mayDelete(we,J,Ke);if(je)throw new U.ErrnoError(je);if(je=ot?U.mayDelete(xe,ue,Ke):U.mayCreate(xe,ue),je)throw new U.ErrnoError(je);if(!we.node_ops.rename)throw new U.ErrnoError(63);if(U.isMountpoint(Je)||ot&&U.isMountpoint(ot))throw new U.ErrnoError(10);if(xe!==we&&(je=U.nodePermissions(we,"w"),je))throw new U.ErrnoError(je);U.hashRemoveNode(Je);try{we.node_ops.rename(Je,xe,ue)}catch(it){throw it}finally{U.hashAddNode(Je)}}},rmdir(y){var T=U.lookupPath(y,{parent:!0}),O=T.node,V=be.basename(y),J=U.lookupNode(O,V),ue=U.mayDelete(O,V,!0);if(ue)throw new U.ErrnoError(ue);if(!O.node_ops.rmdir)throw new U.ErrnoError(63);if(U.isMountpoint(J))throw new U.ErrnoError(10);O.node_ops.rmdir(O,V),U.destroyNode(J)},readdir(y){var T=U.lookupPath(y,{follow:!0}),O=T.node;if(!O.node_ops.readdir)throw new U.ErrnoError(54);return O.node_ops.readdir(O)},unlink(y){var T=U.lookupPath(y,{parent:!0}),O=T.node;if(!O)throw new U.ErrnoError(44);var V=be.basename(y),J=U.lookupNode(O,V),ue=U.mayDelete(O,V,!1);if(ue)throw new U.ErrnoError(ue);if(!O.node_ops.unlink)throw new U.ErrnoError(63);if(U.isMountpoint(J))throw new U.ErrnoError(10);O.node_ops.unlink(O,V),U.destroyNode(J)},readlink(y){var T=U.lookupPath(y),O=T.node;if(!O)throw new U.ErrnoError(44);if(!O.node_ops.readlink)throw new U.ErrnoError(28);return Xe.resolve(U.getPath(O.parent),O.node_ops.readlink(O))},stat(y,T){var O=U.lookupPath(y,{follow:!T}),V=O.node;if(!V)throw new U.ErrnoError(44);if(!V.node_ops.getattr)throw new U.ErrnoError(63);return V.node_ops.getattr(V)},lstat(y){return U.stat(y,!0)},chmod(y,T,O){var V;if(typeof y=="string"){var J=U.lookupPath(y,{follow:!O});V=J.node}else V=y;if(!V.node_ops.setattr)throw new U.ErrnoError(63);V.node_ops.setattr(V,{mode:T&4095|V.mode&-4096,timestamp:Date.now()})},lchmod(y,T){U.chmod(y,T,!0)},fchmod(y,T){var O=U.getStreamChecked(y);U.chmod(O.node,T)},chown(y,T,O,V){var J;if(typeof y=="string"){var ue=U.lookupPath(y,{follow:!V});J=ue.node}else J=y;if(!J.node_ops.setattr)throw new U.ErrnoError(63);J.node_ops.setattr(J,{timestamp:Date.now()})},lchown(y,T,O){U.chown(y,T,O,!0)},fchown(y,T,O){var V=U.getStreamChecked(y);U.chown(V.node,T,O)},truncate(y,T){if(T<0)throw new U.ErrnoError(28);var O;if(typeof y=="string"){var V=U.lookupPath(y,{follow:!0});O=V.node}else O=y;if(!O.node_ops.setattr)throw new U.ErrnoError(63);if(U.isDir(O.mode))throw new U.ErrnoError(31);if(!U.isFile(O.mode))throw new U.ErrnoError(28);var J=U.nodePermissions(O,"w");if(J)throw new U.ErrnoError(J);O.node_ops.setattr(O,{size:T,timestamp:Date.now()})},ftruncate(y,T){var O=U.getStreamChecked(y);if(!(O.flags&2097155))throw new U.ErrnoError(28);U.truncate(O.node,T)},utime(y,T,O){var V=U.lookupPath(y,{follow:!0}),J=V.node;J.node_ops.setattr(J,{timestamp:Math.max(T,O)})},open(y,T,O){if(y==="")throw new U.ErrnoError(44);T=typeof T=="string"?W(T):T,O=typeof O>"u"?438:O,T&64?O=O&4095|32768:O=0;var V;if(typeof y=="object")V=y;else{y=be.normalize(y);try{var J=U.lookupPath(y,{follow:!(T&131072)});V=J.node}catch{}}var ue=!1;if(T&64)if(V){if(T&128)throw new U.ErrnoError(20)}else V=U.mknod(y,O,0),ue=!0;if(!V)throw new U.ErrnoError(44);if(U.isChrdev(V.mode)&&(T&=-513),T&65536&&!U.isDir(V.mode))throw new U.ErrnoError(54);if(!ue){var de=U.mayOpen(V,T);if(de)throw new U.ErrnoError(de)}T&512&&!ue&&U.truncate(V,0),T&=-131713;var we=U.createStream({node:V,path:U.getPath(V),flags:T,seekable:!0,position:0,stream_ops:V.stream_ops,ungotten:[],error:!1});return we.stream_ops.open&&we.stream_ops.open(we),a.logReadFiles&&!(T&1)&&(U.readFiles||(U.readFiles={}),y in U.readFiles||(U.readFiles[y]=1)),we},close(y){if(U.isClosed(y))throw new U.ErrnoError(8);y.getdents&&(y.getdents=null);try{y.stream_ops.close&&y.stream_ops.close(y)}catch(T){throw T}finally{U.closeStream(y.fd)}y.fd=null},isClosed(y){return y.fd===null},llseek(y,T,O){if(U.isClosed(y))throw new U.ErrnoError(8);if(!y.seekable||!y.stream_ops.llseek)throw new U.ErrnoError(70);if(O!=0&&O!=1&&O!=2)throw new U.ErrnoError(28);return y.position=y.stream_ops.llseek(y,T,O),y.ungotten=[],y.position},read(y,T,O,V,J){if(V<0||J<0)throw new U.ErrnoError(28);if(U.isClosed(y))throw new U.ErrnoError(8);if((y.flags&2097155)===1)throw new U.ErrnoError(8);if(U.isDir(y.node.mode))throw new U.ErrnoError(31);if(!y.stream_ops.read)throw new U.ErrnoError(28);var ue=typeof J<"u";if(!ue)J=y.position;else if(!y.seekable)throw new U.ErrnoError(70);var de=y.stream_ops.read(y,T,O,V,J);return ue||(y.position+=de),de},write(y,T,O,V,J,ue){if(V<0||J<0)throw new U.ErrnoError(28);if(U.isClosed(y))throw new U.ErrnoError(8);if(!(y.flags&2097155))throw new U.ErrnoError(8);if(U.isDir(y.node.mode))throw new U.ErrnoError(31);if(!y.stream_ops.write)throw new U.ErrnoError(28);y.seekable&&y.flags&1024&&U.llseek(y,0,2);var de=typeof J<"u";if(!de)J=y.position;else if(!y.seekable)throw new U.ErrnoError(70);var we=y.stream_ops.write(y,T,O,V,J,ue);return de||(y.position+=we),we},allocate(y,T,O){if(U.isClosed(y))throw new U.ErrnoError(8);if(T<0||O<=0)throw new U.ErrnoError(28);if(!(y.flags&2097155))throw new U.ErrnoError(8);if(!U.isFile(y.node.mode)&&!U.isDir(y.node.mode))throw new U.ErrnoError(43);if(!y.stream_ops.allocate)throw new U.ErrnoError(138);y.stream_ops.allocate(y,T,O)},mmap(y,T,O,V,J){if(V&2&&!(J&2)&&(y.flags&2097155)!==2)throw new U.ErrnoError(2);if((y.flags&2097155)===1)throw new U.ErrnoError(2);if(!y.stream_ops.mmap)throw new U.ErrnoError(43);return y.stream_ops.mmap(y,T,O,V,J)},msync(y,T,O,V,J){return y.stream_ops.msync?y.stream_ops.msync(y,T,O,V,J):0},munmap:y=>0,ioctl(y,T,O){if(!y.stream_ops.ioctl)throw new U.ErrnoError(59);return y.stream_ops.ioctl(y,T,O)},readFile(y,T={}){if(T.flags=T.flags||0,T.encoding=T.encoding||"binary",T.encoding!=="utf8"&&T.encoding!=="binary")throw new Error(`Invalid encoding type "${T.encoding}"`);var O,V=U.open(y,T.flags),J=U.stat(y),ue=J.size,de=new Uint8Array(ue);return U.read(V,de,0,ue,0),T.encoding==="utf8"?O=Se(de,0):T.encoding==="binary"&&(O=de),U.close(V),O},writeFile(y,T,O={}){O.flags=O.flags||577;var V=U.open(y,O.flags,O.mode);if(typeof T=="string"){var J=new Uint8Array(ne(T)+1),ue=Ee(T,J,0,J.length);U.write(V,J,0,ue,void 0,O.canOwn)}else if(ArrayBuffer.isView(T))U.write(V,T,0,T.byteLength,void 0,O.canOwn);else throw new Error("Unsupported data type");U.close(V)},cwd:()=>U.currentPath,chdir(y){var T=U.lookupPath(y,{follow:!0});if(T.node===null)throw new U.ErrnoError(44);if(!U.isDir(T.node.mode))throw new U.ErrnoError(54);var O=U.nodePermissions(T.node,"x");if(O)throw new U.ErrnoError(O);U.currentPath=T.path},createDefaultDirectories(){U.mkdir("/tmp"),U.mkdir("/home"),U.mkdir("/home/web_user")},createDefaultDevices(){U.mkdir("/dev"),U.registerDevice(U.makedev(1,3),{read:()=>0,write:(V,J,ue,de,we)=>de}),U.mkdev("/dev/null",U.makedev(1,3)),Le.register(U.makedev(5,0),Le.default_tty_ops),Le.register(U.makedev(6,0),Le.default_tty1_ops),U.mkdev("/dev/tty",U.makedev(5,0)),U.mkdev("/dev/tty1",U.makedev(6,0));var y=new Uint8Array(1024),T=0,O=()=>(T===0&&(T=Ce(y).byteLength),y[--T]);U.createDevice("/dev","random",O),U.createDevice("/dev","urandom",O),U.mkdir("/dev/shm"),U.mkdir("/dev/shm/tmp")},createSpecialDirectories(){U.mkdir("/proc");var y=U.mkdir("/proc/self");U.mkdir("/proc/self/fd"),U.mount({mount(){var T=U.createNode(y,"fd",16895,73);return T.node_ops={lookup(O,V){var J=+V,ue=U.getStreamChecked(J),de={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>ue.path}};return de.parent=de,de}},T}},{},"/proc/self/fd")},createStandardStreams(){a.stdin?U.createDevice("/dev","stdin",a.stdin):U.symlink("/dev/tty","/dev/stdin"),a.stdout?U.createDevice("/dev","stdout",null,a.stdout):U.symlink("/dev/tty","/dev/stdout"),a.stderr?U.createDevice("/dev","stderr",null,a.stderr):U.symlink("/dev/tty1","/dev/stderr"),U.open("/dev/stdin",0),U.open("/dev/stdout",1),U.open("/dev/stderr",1)},ensureErrnoError(){U.ErrnoError||(U.ErrnoError=function(T,O){this.name="ErrnoError",this.node=O,this.setErrno=function(V){this.errno=V},this.setErrno(T),this.message="FS error"},U.ErrnoError.prototype=new Error,U.ErrnoError.prototype.constructor=U.ErrnoError,[44].forEach(y=>{U.genericErrors[y]=new U.ErrnoError(y),U.genericErrors[y].stack="<generic error, no stack>"}))},staticInit(){U.ensureErrnoError(),U.nameTable=new Array(4096),U.mount(He,{},"/"),U.createDefaultDirectories(),U.createDefaultDevices(),U.createSpecialDirectories(),U.filesystems={MEMFS:He}},init(y,T,O){U.init.initialized=!0,U.ensureErrnoError(),a.stdin=y||a.stdin,a.stdout=T||a.stdout,a.stderr=O||a.stderr,U.createStandardStreams()},quit(){U.init.initialized=!1;for(var y=0;y<U.streams.length;y++){var T=U.streams[y];T&&U.close(T)}},findObject(y,T){var O=U.analyzePath(y,T);return O.exists?O.object:null},analyzePath(y,T){try{var O=U.lookupPath(y,{follow:!T});y=O.path}catch{}var V={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var O=U.lookupPath(y,{parent:!0});V.parentExists=!0,V.parentPath=O.path,V.parentObject=O.node,V.name=be.basename(y),O=U.lookupPath(y,{follow:!T}),V.exists=!0,V.path=O.path,V.object=O.node,V.name=O.node.name,V.isRoot=O.path==="/"}catch(J){V.error=J.errno}return V},createPath(y,T,O,V){y=typeof y=="string"?y:U.getPath(y);for(var J=T.split("/").reverse();J.length;){var ue=J.pop();if(ue){var de=be.join2(y,ue);try{U.mkdir(de)}catch{}y=de}}return de},createFile(y,T,O,V,J){var ue=be.join2(typeof y=="string"?y:U.getPath(y),T),de=lt(V,J);return U.create(ue,de)},createDataFile(y,T,O,V,J,ue){var de=T;y&&(y=typeof y=="string"?y:U.getPath(y),de=T?be.join2(y,T):y);var we=lt(V,J),xe=U.create(de,we);if(O){if(typeof O=="string"){for(var Je=new Array(O.length),nt=0,ot=O.length;nt<ot;++nt)Je[nt]=O.charCodeAt(nt);O=Je}U.chmod(xe,we|146);var Ke=U.open(xe,577);U.write(Ke,O,0,O.length,0,ue),U.close(Ke),U.chmod(xe,we)}return xe},createDevice(y,T,O,V){var J=be.join2(typeof y=="string"?y:U.getPath(y),T),ue=lt(!!O,!!V);U.createDevice.major||(U.createDevice.major=64);var de=U.makedev(U.createDevice.major++,0);return U.registerDevice(de,{open(we){we.seekable=!1},close(we){V&&V.buffer&&V.buffer.length&&V(10)},read(we,xe,Je,nt,ot){for(var Ke=0,je=0;je<nt;je++){var it;try{it=O()}catch{throw new U.ErrnoError(29)}if(it===void 0&&Ke===0)throw new U.ErrnoError(6);if(it==null)break;Ke++,xe[Je+je]=it}return Ke&&(we.node.timestamp=Date.now()),Ke},write(we,xe,Je,nt,ot){for(var Ke=0;Ke<nt;Ke++)try{V(xe[Je+Ke])}catch{throw new U.ErrnoError(29)}return nt&&(we.node.timestamp=Date.now()),Ke}}),U.mkdev(J,ue,de)},forceLoadFile(y){if(y.isDevice||y.isFolder||y.link||y.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(r)try{y.contents=We(r(y.url),!0),y.usedBytes=y.contents.length}catch{throw new U.ErrnoError(29)}else throw new Error("Cannot load without read() or XMLHttpRequest.")},createLazyFile(y,T,O,V,J){function ue(){this.lengthKnown=!1,this.chunks=[]}if(ue.prototype.get=function(je){if(!(je>this.length-1||je<0)){var it=je%this.chunkSize,Et=je/this.chunkSize|0;return this.getter(Et)[it]}},ue.prototype.setDataGetter=function(je){this.getter=je},ue.prototype.cacheLength=function(){var je=new XMLHttpRequest;if(je.open("HEAD",O,!1),je.send(null),!(je.status>=200&&je.status<300||je.status===304))throw new Error("Couldn't load "+O+". Status: "+je.status);var it=Number(je.getResponseHeader("Content-length")),Et,It=(Et=je.getResponseHeader("Accept-Ranges"))&&Et==="bytes",kt=(Et=je.getResponseHeader("Content-Encoding"))&&Et==="gzip",Re=1024*1024;It||(Re=it);var Ve=(pt,Nt)=>{if(pt>Nt)throw new Error("invalid range ("+pt+", "+Nt+") or no bytes requested!");if(Nt>it-1)throw new Error("only "+it+" bytes available! programmer error!");var bt=new XMLHttpRequest;if(bt.open("GET",O,!1),it!==Re&&bt.setRequestHeader("Range","bytes="+pt+"-"+Nt),bt.responseType="arraybuffer",bt.overrideMimeType&&bt.overrideMimeType("text/plain; charset=x-user-defined"),bt.send(null),!(bt.status>=200&&bt.status<300||bt.status===304))throw new Error("Couldn't load "+O+". Status: "+bt.status);return bt.response!==void 0?new Uint8Array(bt.response||[]):We(bt.responseText||"",!0)},St=this;St.setDataGetter(pt=>{var Nt=pt*Re,bt=(pt+1)*Re-1;if(bt=Math.min(bt,it-1),typeof St.chunks[pt]>"u"&&(St.chunks[pt]=Ve(Nt,bt)),typeof St.chunks[pt]>"u")throw new Error("doXHR failed!");return St.chunks[pt]}),(kt||!it)&&(Re=it=1,it=this.getter(0).length,Re=it,i("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=it,this._chunkSize=Re,this.lengthKnown=!0},typeof XMLHttpRequest<"u"){throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var de,we}else var we={isDevice:!1,url:O};var xe=U.createFile(y,T,we,V,J);we.contents?xe.contents=we.contents:we.url&&(xe.contents=null,xe.url=we.url),Object.defineProperties(xe,{usedBytes:{get:function(){return this.contents.length}}});var Je={},nt=Object.keys(xe.stream_ops);nt.forEach(Ke=>{var je=xe.stream_ops[Ke];Je[Ke]=function(){return U.forceLoadFile(xe),je.apply(null,arguments)}});function ot(Ke,je,it,Et,It){var kt=Ke.node.contents;if(It>=kt.length)return 0;var Re=Math.min(kt.length-It,Et);if(kt.slice)for(var Ve=0;Ve<Re;Ve++)je[it+Ve]=kt[It+Ve];else for(var Ve=0;Ve<Re;Ve++)je[it+Ve]=kt.get(It+Ve);return Re}return Je.read=(Ke,je,it,Et,It)=>(U.forceLoadFile(xe),ot(Ke,je,it,Et,It)),Je.mmap=(Ke,je,it,Et,It)=>{U.forceLoadFile(xe);var kt=At(je);if(!kt)throw new U.ErrnoError(48);return ot(Ke,g,kt,je,it),{ptr:kt,allocated:!0}},xe.stream_ops=Je,xe}},st={DEFAULT_POLLMASK:5,calculateAt(y,T,O){if(be.isAbs(T))return T;var V;if(y===-100)V=U.cwd();else{var J=st.getStreamFromFD(y);V=J.path}if(T.length==0){if(!O)throw new U.ErrnoError(44);return V}return be.join2(V,T)},doStat(y,T,O){try{var V=y(T)}catch(we){if(we&&we.node&&be.normalize(T)!==be.normalize(U.getPath(we.node)))return-54;throw we}p[O>>2]=V.dev,p[O+4>>2]=V.mode,f[O+8>>2]=V.nlink,p[O+12>>2]=V.uid,p[O+16>>2]=V.gid,p[O+20>>2]=V.rdev,pe=[V.size>>>0,(Y=V.size,+Math.abs(Y)>=1?Y>0?+Math.floor(Y/4294967296)>>>0:~~+Math.ceil((Y-+(~~Y>>>0))/4294967296)>>>0:0)],p[O+24>>2]=pe[0],p[O+28>>2]=pe[1],p[O+32>>2]=4096,p[O+36>>2]=V.blocks;var J=V.atime.getTime(),ue=V.mtime.getTime(),de=V.ctime.getTime();return pe=[Math.floor(J/1e3)>>>0,(Y=Math.floor(J/1e3),+Math.abs(Y)>=1?Y>0?+Math.floor(Y/4294967296)>>>0:~~+Math.ceil((Y-+(~~Y>>>0))/4294967296)>>>0:0)],p[O+40>>2]=pe[0],p[O+44>>2]=pe[1],f[O+48>>2]=J%1e3*1e3,pe=[Math.floor(ue/1e3)>>>0,(Y=Math.floor(ue/1e3),+Math.abs(Y)>=1?Y>0?+Math.floor(Y/4294967296)>>>0:~~+Math.ceil((Y-+(~~Y>>>0))/4294967296)>>>0:0)],p[O+56>>2]=pe[0],p[O+60>>2]=pe[1],f[O+64>>2]=ue%1e3*1e3,pe=[Math.floor(de/1e3)>>>0,(Y=Math.floor(de/1e3),+Math.abs(Y)>=1?Y>0?+Math.floor(Y/4294967296)>>>0:~~+Math.ceil((Y-+(~~Y>>>0))/4294967296)>>>0:0)],p[O+72>>2]=pe[0],p[O+76>>2]=pe[1],f[O+80>>2]=de%1e3*1e3,pe=[V.ino>>>0,(Y=V.ino,+Math.abs(Y)>=1?Y>0?+Math.floor(Y/4294967296)>>>0:~~+Math.ceil((Y-+(~~Y>>>0))/4294967296)>>>0:0)],p[O+88>>2]=pe[0],p[O+92>>2]=pe[1],0},doMsync(y,T,O,V,J){if(!U.isFile(T.node.mode))throw new U.ErrnoError(43);if(V&2)return 0;var ue=E.slice(y,y+O);U.msync(T,ue,J,O,V)},varargs:void 0,get(){var y=p[st.varargs>>2];return st.varargs+=4,y},getp(){return st.get()},getStr(y){var T=$e(y);return T},getStreamFromFD(y){var T=U.getStreamChecked(y);return T}};function br(y,T,O){st.varargs=O;try{var V=st.getStreamFromFD(y);switch(T){case 0:{var J=st.get();if(J<0)return-28;for(;U.streams[J];)J++;var ue;return ue=U.createStream(V,J),ue.fd}case 1:case 2:return 0;case 3:return V.flags;case 4:{var J=st.get();return V.flags|=J,0}case 5:{var J=st.getp(),de=0;return m[J+de>>1]=2,0}case 6:case 7:return 0;case 16:case 8:return-28;case 9:return Ge(28),-1;default:return-28}}catch(we){if(typeof U>"u"||we.name!=="ErrnoError")throw we;return-we.errno}}function Er(y,T,O){st.varargs=O;try{var V=st.getStreamFromFD(y);switch(T){case 21509:return V.tty?0:-59;case 21505:{if(!V.tty)return-59;if(V.tty.ops.ioctl_tcgets){var J=V.tty.ops.ioctl_tcgets(V),ue=st.getp();p[ue>>2]=J.c_iflag||0,p[ue+4>>2]=J.c_oflag||0,p[ue+8>>2]=J.c_cflag||0,p[ue+12>>2]=J.c_lflag||0;for(var de=0;de<32;de++)g[ue+de+17>>0]=J.c_cc[de]||0;return 0}return 0}case 21510:case 21511:case 21512:return V.tty?0:-59;case 21506:case 21507:case 21508:{if(!V.tty)return-59;if(V.tty.ops.ioctl_tcsets){for(var ue=st.getp(),we=p[ue>>2],xe=p[ue+4>>2],Je=p[ue+8>>2],nt=p[ue+12>>2],ot=[],de=0;de<32;de++)ot.push(g[ue+de+17>>0]);return V.tty.ops.ioctl_tcsets(V.tty,T,{c_iflag:we,c_oflag:xe,c_cflag:Je,c_lflag:nt,c_cc:ot})}return 0}case 21519:{if(!V.tty)return-59;var ue=st.getp();return p[ue>>2]=0,0}case 21520:return V.tty?-28:-59;case 21531:{var ue=st.getp();return U.ioctl(V,T,ue)}case 21523:{if(!V.tty)return-59;if(V.tty.ops.ioctl_tiocgwinsz){var Ke=V.tty.ops.ioctl_tiocgwinsz(V.tty),ue=st.getp();m[ue>>1]=Ke[0],m[ue+2>>1]=Ke[1]}return 0}case 21524:return V.tty?0:-59;case 21515:return V.tty?0:-59;default:return-28}}catch(je){if(typeof U>"u"||je.name!=="ErrnoError")throw je;return-je.errno}}function Sr(y,T,O,V){st.varargs=V;try{T=st.getStr(T),T=st.calculateAt(y,T);var J=V?st.get():0;return U.open(T,O,J).fd}catch(ue){if(typeof U>"u"||ue.name!=="ErrnoError")throw ue;return-ue.errno}}function Ar(y,T){try{return y=st.getStr(y),st.doStat(U.stat,y,T)}catch(O){if(typeof U>"u"||O.name!=="ErrnoError")throw O;return-O.errno}}var zt=(y,T)=>T+2097152>>>0<4194305-!!y?(y>>>0)+T*4294967296:NaN;function lr(y,T,O){var V=zt(y,T),J=new Date(V*1e3);p[O>>2]=J.getUTCSeconds(),p[O+4>>2]=J.getUTCMinutes(),p[O+8>>2]=J.getUTCHours(),p[O+12>>2]=J.getUTCDate(),p[O+16>>2]=J.getUTCMonth(),p[O+20>>2]=J.getUTCFullYear()-1900,p[O+24>>2]=J.getUTCDay();var ue=Date.UTC(J.getUTCFullYear(),0,1,0,0,0,0),de=(J.getTime()-ue)/(1e3*60*60*24)|0;p[O+28>>2]=de}var Ht=y=>y%4===0&&(y%100!==0||y%400===0),Cr=[0,31,60,91,121,152,182,213,244,274,305,335],kr=[0,31,59,90,120,151,181,212,243,273,304,334],Rr=y=>{var T=Ht(y.getFullYear()),O=T?Cr:kr,V=O[y.getMonth()]+y.getDate()-1;return V};function Fr(y,T,O){var V=zt(y,T),J=new Date(V*1e3);p[O>>2]=J.getSeconds(),p[O+4>>2]=J.getMinutes(),p[O+8>>2]=J.getHours(),p[O+12>>2]=J.getDate(),p[O+16>>2]=J.getMonth(),p[O+20>>2]=J.getFullYear()-1900,p[O+24>>2]=J.getDay();var ue=Rr(J)|0;p[O+28>>2]=ue,p[O+36>>2]=-(J.getTimezoneOffset()*60);var de=new Date(J.getFullYear(),0,1),we=new Date(J.getFullYear(),6,1).getTimezoneOffset(),xe=de.getTimezoneOffset(),Je=(we!=xe&&J.getTimezoneOffset()==Math.min(xe,we))|0;p[O+32>>2]=Je}function Mr(y,T,O,V,J,ue,de,we){var xe=zt(J,ue);try{if(isNaN(xe))return 61;var Je=st.getStreamFromFD(V),nt=U.mmap(Je,y,xe,T,O),ot=nt.ptr;return p[de>>2]=nt.allocated,f[we>>2]=ot,0}catch(Ke){if(typeof U>"u"||Ke.name!=="ErrnoError")throw Ke;return-Ke.errno}}function Dr(y,T,O,V,J,ue,de){var we=zt(ue,de);try{if(isNaN(we))return 61;var xe=st.getStreamFromFD(J);O&2&&st.doMsync(y,xe,T,V,we),U.munmap(xe)}catch(Je){if(typeof U>"u"||Je.name!=="ErrnoError")throw Je;return-Je.errno}}var cr=(y,T,O)=>Ee(y,E,T,O),ur=y=>{var T=ne(y)+1,O=mt(T);return O&&cr(y,O,T),O},Tr=(y,T,O)=>{var V=new Date().getFullYear(),J=new Date(V,0,1),ue=new Date(V,6,1),de=J.getTimezoneOffset(),we=ue.getTimezoneOffset(),xe=Math.max(de,we);f[y>>2]=xe*60,p[T>>2]=+(de!=we);function Je(it){var Et=it.toTimeString().match(/\(([A-Za-z ]+)\)$/);return Et?Et[1]:"GMT"}var nt=Je(J),ot=Je(ue),Ke=ur(nt),je=ur(ot);we<de?(f[O>>2]=Ke,f[O+4>>2]=je):(f[O>>2]=je,f[O+4>>2]=Ke)},hr=()=>Date.now(),Gt=(y,T,O)=>E.copyWithin(y,T,T+O),Ut=y=>{De("OOM")},qt=y=>{E.length,Ut()},Lt={},Bt=()=>h||"./this.program",Ot=()=>{if(!Ot.strings){var y=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",T={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:y,_:Bt()};for(var O in Lt)Lt[O]===void 0?delete T[O]:T[O]=Lt[O];var V=[];for(var O in T)V.push(`${O}=${T[O]}`);Ot.strings=V}return Ot.strings},Vt=(y,T)=>{for(var O=0;O<y.length;++O)g[T++>>0]=y.charCodeAt(O);g[T>>0]=0},rr=(y,T)=>{var O=0;return Ot().forEach((V,J)=>{var ue=T+O;f[y+J*4>>2]=ue,Vt(V,ue),O+=V.length+1}),0},Qt=(y,T)=>{var O=Ot();f[y>>2]=O.length;var V=0;return O.forEach(J=>V+=J.length+1),f[T>>2]=V,0},fr=y=>{$=y,Z()||(a.onExit&&a.onExit(y),C=!0),s(y,new le(y))},b=(y,T)=>{$=y,fr(y)},x=b;function u(y){try{var T=st.getStreamFromFD(y);return U.close(T),0}catch(O){if(typeof U>"u"||O.name!=="ErrnoError")throw O;return O.errno}}var w=(y,T,O,V)=>{for(var J=0,ue=0;ue<O;ue++){var de=f[T>>2],we=f[T+4>>2];T+=8;var xe=U.read(y,g,de,we,V);if(xe<0)return-1;if(J+=xe,xe<we)break;typeof V<"u"&&(V+=xe)}return J};function M(y,T,O,V){try{var J=st.getStreamFromFD(y),ue=w(J,T,O);return f[V>>2]=ue,0}catch(de){if(typeof U>"u"||de.name!=="ErrnoError")throw de;return de.errno}}function L(y,T,O,V,J){var ue=zt(T,O);try{if(isNaN(ue))return 61;var de=st.getStreamFromFD(y);return U.llseek(de,ue,V),pe=[de.position>>>0,(Y=de.position,+Math.abs(Y)>=1?Y>0?+Math.floor(Y/4294967296)>>>0:~~+Math.ceil((Y-+(~~Y>>>0))/4294967296)>>>0:0)],p[J>>2]=pe[0],p[J+4>>2]=pe[1],de.getdents&&ue===0&&V===0&&(de.getdents=null),0}catch(we){if(typeof U>"u"||we.name!=="ErrnoError")throw we;return we.errno}}var H=(y,T,O,V)=>{for(var J=0,ue=0;ue<O;ue++){var de=f[T>>2],we=f[T+4>>2];T+=8;var xe=U.write(y,g,de,we,V);if(xe<0)return-1;J+=xe,typeof V<"u"&&(V+=xe)}return J};function K(y,T,O,V){try{var J=st.getStreamFromFD(y),ue=H(J,T,O);return f[V>>2]=ue,0}catch(de){if(typeof U>"u"||de.name!=="ErrnoError")throw de;return de.errno}}var oe=(y,T)=>{for(var O=0,V=0;V<=T;O+=y[V++]);return O},ge=[31,29,31,30,31,30,31,31,30,31,30,31],Me=[31,28,31,30,31,30,31,31,30,31,30,31],ze=(y,T)=>{for(var O=new Date(y.getTime());T>0;){var V=Ht(O.getFullYear()),J=O.getMonth(),ue=(V?ge:Me)[J];if(T>ue-O.getDate())T-=ue-O.getDate()+1,O.setDate(1),J<11?O.setMonth(J+1):(O.setMonth(0),O.setFullYear(O.getFullYear()+1));else return O.setDate(O.getDate()+T),O}return O},Ue=(y,T)=>{g.set(y,T)},Be=(y,T,O,V)=>{var J=f[V+40>>2],ue={tm_sec:p[V>>2],tm_min:p[V+4>>2],tm_hour:p[V+8>>2],tm_mday:p[V+12>>2],tm_mon:p[V+16>>2],tm_year:p[V+20>>2],tm_wday:p[V+24>>2],tm_yday:p[V+28>>2],tm_isdst:p[V+32>>2],tm_gmtoff:p[V+36>>2],tm_zone:J?$e(J):""},de=$e(O),we={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var xe in we)de=de.replace(new RegExp(xe,"g"),we[xe]);var Je=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],nt=["January","February","March","April","May","June","July","August","September","October","November","December"];function ot(Re,Ve,St){for(var pt=typeof Re=="number"?Re.toString():Re||"";pt.length<Ve;)pt=St[0]+pt;return pt}function Ke(Re,Ve){return ot(Re,Ve,"0")}function je(Re,Ve){function St(Nt){return Nt<0?-1:Nt>0?1:0}var pt;return(pt=St(Re.getFullYear()-Ve.getFullYear()))===0&&(pt=St(Re.getMonth()-Ve.getMonth()))===0&&(pt=St(Re.getDate()-Ve.getDate())),pt}function it(Re){switch(Re.getDay()){case 0:return new Date(Re.getFullYear()-1,11,29);case 1:return Re;case 2:return new Date(Re.getFullYear(),0,3);case 3:return new Date(Re.getFullYear(),0,2);case 4:return new Date(Re.getFullYear(),0,1);case 5:return new Date(Re.getFullYear()-1,11,31);case 6:return new Date(Re.getFullYear()-1,11,30)}}function Et(Re){var Ve=ze(new Date(Re.tm_year+1900,0,1),Re.tm_yday),St=new Date(Ve.getFullYear(),0,4),pt=new Date(Ve.getFullYear()+1,0,4),Nt=it(St),bt=it(pt);return je(Nt,Ve)<=0?je(bt,Ve)<=0?Ve.getFullYear()+1:Ve.getFullYear():Ve.getFullYear()-1}var It={"%a":Re=>Je[Re.tm_wday].substring(0,3),"%A":Re=>Je[Re.tm_wday],"%b":Re=>nt[Re.tm_mon].substring(0,3),"%B":Re=>nt[Re.tm_mon],"%C":Re=>{var Ve=Re.tm_year+1900;return Ke(Ve/100|0,2)},"%d":Re=>Ke(Re.tm_mday,2),"%e":Re=>ot(Re.tm_mday,2," "),"%g":Re=>Et(Re).toString().substring(2),"%G":Re=>Et(Re),"%H":Re=>Ke(Re.tm_hour,2),"%I":Re=>{var Ve=Re.tm_hour;return Ve==0?Ve=12:Ve>12&&(Ve-=12),Ke(Ve,2)},"%j":Re=>Ke(Re.tm_mday+oe(Ht(Re.tm_year+1900)?ge:Me,Re.tm_mon-1),3),"%m":Re=>Ke(Re.tm_mon+1,2),"%M":Re=>Ke(Re.tm_min,2),"%n":()=>`
`,"%p":Re=>Re.tm_hour>=0&&Re.tm_hour<12?"AM":"PM","%S":Re=>Ke(Re.tm_sec,2),"%t":()=>"	","%u":Re=>Re.tm_wday||7,"%U":Re=>{var Ve=Re.tm_yday+7-Re.tm_wday;return Ke(Math.floor(Ve/7),2)},"%V":Re=>{var Ve=Math.floor((Re.tm_yday+7-(Re.tm_wday+6)%7)/7);if((Re.tm_wday+371-Re.tm_yday-2)%7<=2&&Ve++,Ve){if(Ve==53){var pt=(Re.tm_wday+371-Re.tm_yday)%7;pt!=4&&(pt!=3||!Ht(Re.tm_year))&&(Ve=1)}}else{Ve=52;var St=(Re.tm_wday+7-Re.tm_yday-1)%7;(St==4||St==5&&Ht(Re.tm_year%400-1))&&Ve++}return Ke(Ve,2)},"%w":Re=>Re.tm_wday,"%W":Re=>{var Ve=Re.tm_yday+7-(Re.tm_wday+6)%7;return Ke(Math.floor(Ve/7),2)},"%y":Re=>(Re.tm_year+1900).toString().substring(2),"%Y":Re=>Re.tm_year+1900,"%z":Re=>{var Ve=Re.tm_gmtoff,St=Ve>=0;return Ve=Math.abs(Ve)/60,Ve=Ve/60*100+Ve%60,(St?"+":"-")+("0000"+Ve).slice(-4)},"%Z":Re=>Re.tm_zone,"%%":()=>"%"};de=de.replace(/%%/g,"\0\0");for(var xe in It)de.includes(xe)&&(de=de.replace(new RegExp(xe,"g"),It[xe](ue)));de=de.replace(/\0\0/g,"%");var kt=We(de,!1);return kt.length>T?0:(Ue(kt,y),kt.length-1)},Oe=y=>{if(y instanceof le||y=="unwind")return $;s(1,y)},Ne=y=>{var T=ne(y)+1,O=wt(T);return cr(y,O,T),O},tt=function(y,T,O,V){y||(y=this),this.parent=y,this.mount=y.mount,this.mounted=null,this.id=U.nextInode++,this.name=T,this.mode=O,this.node_ops={},this.stream_ops={},this.rdev=V},ct=365,ht=146;Object.defineProperties(tt.prototype,{read:{get:function(){return(this.mode&ct)===ct},set:function(y){y?this.mode|=ct:this.mode&=~ct}},write:{get:function(){return(this.mode&ht)===ht},set:function(y){y?this.mode|=ht:this.mode&=~ht}},isFolder:{get:function(){return U.isDir(this.mode)}},isDevice:{get:function(){return U.isChrdev(this.mode)}}}),U.FSNode=tt,U.createPreloadedFile=dt,U.staticInit();var gt={a:Ae,g:br,k:Er,h:Sr,s:Ar,n:lr,o:Fr,l:Mr,m:Dr,r:Tr,i:hr,j:Gt,q:qt,t:rr,u:Qt,b:x,d:u,f:M,p:L,e:K,c:Be},ut=Q(),mt=y=>(mt=ut.x)(y),Ct=()=>(Ct=ut.y)(),at=a._main=(y,T)=>(at=a._main=ut.A)(y,T),Kt=(y,T)=>(Kt=ut.B)(y,T),wt=y=>(wt=ut.C)(y);a.FS=U;var Hr;ye=function y(){Hr||yn(),Hr||(ye=y)};function ei(y=[]){var T=at;y.unshift(h);var O=y.length,V=wt((O+1)*4),J=V;y.forEach(de=>{f[J>>2]=Ne(de),J+=4}),f[J>>2]=0;try{var ue=T(O,V);return b(ue,!0),ue}catch(de){return Oe(de)}}function yn(y=A){if(he>0||(ae(),he>0))return;function T(){Hr||(Hr=!0,a.calledRun=!0,!C&&(re(),ce(),D(a),a.onRuntimeInitialized&&a.onRuntimeInitialized(),$n&&ei(y),j()))}a.setStatus?(a.setStatus("Running..."),setTimeout(function(){setTimeout(function(){a.setStatus("")},1),T()},1)):T()}if(a.preInit)for(typeof a.preInit=="function"&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.pop()();var $n=!0;return a.noInitialRun&&($n=!1),yn(),X.ready}})(),fi=(()=>{var q=import.meta.url;return function(X={}){var a=X,D,z;a.ready=new Promise((u,w)=>{D=u,z=w});var k=Object.assign({},a),A=[],h="./this.program",s=(u,w)=>{throw w},l=!0,t="";function e(u){return a.locateFile?a.locateFile(u,t):t+u}var r,n;typeof document<"u"&&document.currentScript&&(t=document.currentScript.src),q&&(t=q),t.indexOf("blob:")!==0?t=t.substr(0,t.replace(/[?#].*/,"").lastIndexOf("/")+1):t="",r=u=>{var w=new XMLHttpRequest;return w.open("GET",u,!1),w.send(null),w.responseText},n=(u,w,M)=>{var L=new XMLHttpRequest;L.open("GET",u,!0),L.responseType="arraybuffer",L.onload=()=>{if(L.status==200||L.status==0&&L.response){w(L.response);return}M()},L.onerror=M,L.send(null)};var i=a.print||console.log.bind(console),o=a.printErr||console.error.bind(console);Object.assign(a,k),k=null,a.arguments&&(A=a.arguments),a.thisProgram&&(h=a.thisProgram),a.quit&&(s=a.quit);var d;a.wasmBinary&&(d=a.wasmBinary);var v=a.noExitRuntime||!0;typeof WebAssembly!="object"&&De("no native wasm support detected");var _,C=!1,$;function c(u,w){u||De(w)}var g,E,m,p,f;function F(){var u=_.buffer;a.HEAP8=g=new Int8Array(u),a.HEAP16=m=new Int16Array(u),a.HEAPU8=E=new Uint8Array(u),a.HEAPU16=new Uint16Array(u),a.HEAP32=p=new Int32Array(u),a.HEAPU32=f=new Uint32Array(u),a.HEAPF32=new Float32Array(u),a.HEAPF64=new Float64Array(u)}var R=[],I=[],S=[],P=[],G=0;function Z(){return v||G>0}function ae(){if(a.preRun)for(typeof a.preRun=="function"&&(a.preRun=[a.preRun]);a.preRun.length;)ee(a.preRun.shift());se(R)}function re(){!a.noFSInit&&!W.init.initialized&&W.init(),W.ignorePermissions=!1,se(I)}function ce(){se(S)}function j(){if(a.postRun)for(typeof a.postRun=="function"&&(a.postRun=[a.postRun]);a.postRun.length;)fe(a.postRun.shift());se(P)}function ee(u){R.unshift(u)}function ie(u){I.unshift(u)}function fe(u){P.unshift(u)}var he=0,ye=null;function Te(u){return u}function ke(u){he++,a.monitorRunDependencies&&a.monitorRunDependencies(he)}function Fe(u){if(he--,a.monitorRunDependencies&&a.monitorRunDependencies(he),he==0&&ye){var w=ye;ye=null,w()}}function De(u){a.onAbort&&a.onAbort(u),u="Aborted("+u+")",o(u),C=!0,$=1,u+=". Build with -sASSERTIONS for more info.";var w=new WebAssembly.RuntimeError(u);throw z(w),w}var Pe="data:application/octet-stream;base64,";function Ye(u){return u.startsWith(Pe)}var qe;a.locateFile?(qe="rgblink.wasm",Ye(qe)||(qe=e(qe))):qe=new URL("/rgbds-live/assets/rgblink-72e120c5.wasm",self.location).href;function B(u){if(u==qe&&d)return new Uint8Array(d);throw"both async and sync fetching of the wasm failed"}function _e(u){return!d&&l&&typeof fetch=="function"?fetch(u,{credentials:"same-origin"}).then(w=>{if(!w.ok)throw"failed to load wasm binary file at '"+u+"'";return w.arrayBuffer()}).catch(()=>B(u)):Promise.resolve().then(()=>B(u))}function me(u,w,M){return _e(u).then(L=>WebAssembly.instantiate(L,w)).then(L=>L).then(M,L=>{o(`failed to asynchronously prepare wasm: ${L}`),De(L)})}function te(u,w,M,L){return!u&&typeof WebAssembly.instantiateStreaming=="function"&&!Ye(w)&&typeof fetch=="function"?fetch(w,{credentials:"same-origin"}).then(H=>{var K=WebAssembly.instantiateStreaming(H,M);return K.then(L,function(oe){return o(`wasm streaming compile failed: ${oe}`),o("falling back to ArrayBuffer instantiation"),me(w,M,L)})}):me(w,M,L)}function Q(){var u={a:Lt};function w(L,H){var K=L.exports;return Bt=K,_=Bt.l,F(),Bt.n,ie(Bt.m),Fe(),K}ke();function M(L){w(L.instance)}if(a.instantiateWasm)try{return a.instantiateWasm(u,w)}catch(L){o(`Module.instantiateWasm callback failed with error: ${L}`),z(L)}return te(d,qe,u,M).catch(z),{}}var Y,pe;function le(u){this.name="ExitStatus",this.message=`Program terminated with exit(${u})`,this.status=u}var se=u=>{for(;u.length>0;)u.shift()(a)},ve=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Se=(u,w,M)=>{for(var L=w+M,H=w;u[H]&&!(H>=L);)++H;if(H-w>16&&u.buffer&&ve)return ve.decode(u.subarray(w,H));for(var K="";w<H;){var oe=u[w++];if(!(oe&128)){K+=String.fromCharCode(oe);continue}var ge=u[w++]&63;if((oe&224)==192){K+=String.fromCharCode((oe&31)<<6|ge);continue}var Me=u[w++]&63;if((oe&240)==224?oe=(oe&15)<<12|ge<<6|Me:oe=(oe&7)<<18|ge<<12|Me<<6|u[w++]&63,oe<65536)K+=String.fromCharCode(oe);else{var ze=oe-65536;K+=String.fromCharCode(55296|ze>>10,56320|ze&1023)}}return K},$e=(u,w)=>u?Se(E,u,w):"",Ae=(u,w,M,L)=>{De(`Assertion failed: ${$e(u)}, at: `+[w?$e(w):"unknown filename",M,L?$e(L):"unknown function"])},Ge=u=>(p[Vt()>>2]=u,u),be={isAbs:u=>u.charAt(0)==="/",splitPath:u=>{var w=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return w.exec(u).slice(1)},normalizeArray:(u,w)=>{for(var M=0,L=u.length-1;L>=0;L--){var H=u[L];H==="."?u.splice(L,1):H===".."?(u.splice(L,1),M++):M&&(u.splice(L,1),M--)}if(w)for(;M;M--)u.unshift("..");return u},normalize:u=>{var w=be.isAbs(u),M=u.substr(-1)==="/";return u=be.normalizeArray(u.split("/").filter(L=>!!L),!w).join("/"),!u&&!w&&(u="."),u&&M&&(u+="/"),(w?"/":"")+u},dirname:u=>{var w=be.splitPath(u),M=w[0],L=w[1];return!M&&!L?".":(L&&(L=L.substr(0,L.length-1)),M+L)},basename:u=>{if(u==="/")return"/";u=be.normalize(u),u=u.replace(/\/$/,"");var w=u.lastIndexOf("/");return w===-1?u:u.substr(w+1)},join:function(){var u=Array.prototype.slice.call(arguments);return be.normalize(u.join("/"))},join2:(u,w)=>be.normalize(u+"/"+w)},Qe=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return u=>crypto.getRandomValues(u);De("initRandomDevice")},Ce=u=>(Ce=Qe())(u),Xe={resolve:function(){for(var u="",w=!1,M=arguments.length-1;M>=-1&&!w;M--){var L=M>=0?arguments[M]:W.cwd();if(typeof L!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!L)return"";u=L+"/"+u,w=be.isAbs(L)}return u=be.normalizeArray(u.split("/").filter(H=>!!H),!w).join("/"),(w?"/":"")+u||"."},relative:(u,w)=>{u=Xe.resolve(u).substr(1),w=Xe.resolve(w).substr(1);function M(ze){for(var Ue=0;Ue<ze.length&&ze[Ue]==="";Ue++);for(var Be=ze.length-1;Be>=0&&ze[Be]==="";Be--);return Ue>Be?[]:ze.slice(Ue,Be-Ue+1)}for(var L=M(u.split("/")),H=M(w.split("/")),K=Math.min(L.length,H.length),oe=K,ge=0;ge<K;ge++)if(L[ge]!==H[ge]){oe=ge;break}for(var Me=[],ge=oe;ge<L.length;ge++)Me.push("..");return Me=Me.concat(H.slice(oe)),Me.join("/")}},ft=[],ne=u=>{for(var w=0,M=0;M<u.length;++M){var L=u.charCodeAt(M);L<=127?w++:L<=2047?w+=2:L>=55296&&L<=57343?(w+=4,++M):w+=3}return w},Ee=(u,w,M,L)=>{if(!(L>0))return 0;for(var H=M,K=M+L-1,oe=0;oe<u.length;++oe){var ge=u.charCodeAt(oe);if(ge>=55296&&ge<=57343){var Me=u.charCodeAt(++oe);ge=65536+((ge&1023)<<10)|Me&1023}if(ge<=127){if(M>=K)break;w[M++]=ge}else if(ge<=2047){if(M+1>=K)break;w[M++]=192|ge>>6,w[M++]=128|ge&63}else if(ge<=65535){if(M+2>=K)break;w[M++]=224|ge>>12,w[M++]=128|ge>>6&63,w[M++]=128|ge&63}else{if(M+3>=K)break;w[M++]=240|ge>>18,w[M++]=128|ge>>12&63,w[M++]=128|ge>>6&63,w[M++]=128|ge&63}}return w[M]=0,M-H};function We(u,w,M){var L=M>0?M:ne(u)+1,H=new Array(L),K=Ee(u,H,0,H.length);return w&&(H.length=K),H}var et=()=>{if(!ft.length){var u=null;if(typeof window<"u"&&typeof window.prompt=="function"?(u=window.prompt("Input: "),u!==null&&(u+=`
`)):typeof readline=="function"&&(u=readline(),u!==null&&(u+=`
`)),!u)return null;ft=We(u,!0)}return ft.shift()},Le={ttys:[],init(){},shutdown(){},register(u,w){Le.ttys[u]={input:[],output:[],ops:w},W.registerDevice(u,Le.stream_ops)},stream_ops:{open(u){var w=Le.ttys[u.node.rdev];if(!w)throw new W.ErrnoError(43);u.tty=w,u.seekable=!1},close(u){u.tty.ops.fsync(u.tty)},fsync(u){u.tty.ops.fsync(u.tty)},read(u,w,M,L,H){if(!u.tty||!u.tty.ops.get_char)throw new W.ErrnoError(60);for(var K=0,oe=0;oe<L;oe++){var ge;try{ge=u.tty.ops.get_char(u.tty)}catch{throw new W.ErrnoError(29)}if(ge===void 0&&K===0)throw new W.ErrnoError(6);if(ge==null)break;K++,w[M+oe]=ge}return K&&(u.node.timestamp=Date.now()),K},write(u,w,M,L,H){if(!u.tty||!u.tty.ops.put_char)throw new W.ErrnoError(60);try{for(var K=0;K<L;K++)u.tty.ops.put_char(u.tty,w[M+K])}catch{throw new W.ErrnoError(29)}return L&&(u.node.timestamp=Date.now()),K}},default_tty_ops:{get_char(u){return et()},put_char(u,w){w===null||w===10?(i(Se(u.output,0)),u.output=[]):w!=0&&u.output.push(w)},fsync(u){u.output&&u.output.length>0&&(i(Se(u.output,0)),u.output=[])},ioctl_tcgets(u){return{c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},ioctl_tcsets(u,w,M){return 0},ioctl_tiocgwinsz(u){return[24,80]}},default_tty1_ops:{put_char(u,w){w===null||w===10?(o(Se(u.output,0)),u.output=[]):w!=0&&u.output.push(w)},fsync(u){u.output&&u.output.length>0&&(o(Se(u.output,0)),u.output=[])}}},vt=u=>{De()},Ie={ops_table:null,mount(u){return Ie.createNode(null,"/",16895,0)},createNode(u,w,M,L){if(W.isBlkdev(M)||W.isFIFO(M))throw new W.ErrnoError(63);Ie.ops_table||(Ie.ops_table={dir:{node:{getattr:Ie.node_ops.getattr,setattr:Ie.node_ops.setattr,lookup:Ie.node_ops.lookup,mknod:Ie.node_ops.mknod,rename:Ie.node_ops.rename,unlink:Ie.node_ops.unlink,rmdir:Ie.node_ops.rmdir,readdir:Ie.node_ops.readdir,symlink:Ie.node_ops.symlink},stream:{llseek:Ie.stream_ops.llseek}},file:{node:{getattr:Ie.node_ops.getattr,setattr:Ie.node_ops.setattr},stream:{llseek:Ie.stream_ops.llseek,read:Ie.stream_ops.read,write:Ie.stream_ops.write,allocate:Ie.stream_ops.allocate,mmap:Ie.stream_ops.mmap,msync:Ie.stream_ops.msync}},link:{node:{getattr:Ie.node_ops.getattr,setattr:Ie.node_ops.setattr,readlink:Ie.node_ops.readlink},stream:{}},chrdev:{node:{getattr:Ie.node_ops.getattr,setattr:Ie.node_ops.setattr},stream:W.chrdev_stream_ops}});var H=W.createNode(u,w,M,L);return W.isDir(H.mode)?(H.node_ops=Ie.ops_table.dir.node,H.stream_ops=Ie.ops_table.dir.stream,H.contents={}):W.isFile(H.mode)?(H.node_ops=Ie.ops_table.file.node,H.stream_ops=Ie.ops_table.file.stream,H.usedBytes=0,H.contents=null):W.isLink(H.mode)?(H.node_ops=Ie.ops_table.link.node,H.stream_ops=Ie.ops_table.link.stream):W.isChrdev(H.mode)&&(H.node_ops=Ie.ops_table.chrdev.node,H.stream_ops=Ie.ops_table.chrdev.stream),H.timestamp=Date.now(),u&&(u.contents[w]=H,u.timestamp=H.timestamp),H},getFileDataAsTypedArray(u){return u.contents?u.contents.subarray?u.contents.subarray(0,u.usedBytes):new Uint8Array(u.contents):new Uint8Array(0)},expandFileStorage(u,w){var M=u.contents?u.contents.length:0;if(!(M>=w)){var L=1024*1024;w=Math.max(w,M*(M<L?2:1.125)>>>0),M!=0&&(w=Math.max(w,256));var H=u.contents;u.contents=new Uint8Array(w),u.usedBytes>0&&u.contents.set(H.subarray(0,u.usedBytes),0)}},resizeFileStorage(u,w){if(u.usedBytes!=w)if(w==0)u.contents=null,u.usedBytes=0;else{var M=u.contents;u.contents=new Uint8Array(w),M&&u.contents.set(M.subarray(0,Math.min(w,u.usedBytes))),u.usedBytes=w}},node_ops:{getattr(u){var w={};return w.dev=W.isChrdev(u.mode)?u.id:1,w.ino=u.id,w.mode=u.mode,w.nlink=1,w.uid=0,w.gid=0,w.rdev=u.rdev,W.isDir(u.mode)?w.size=4096:W.isFile(u.mode)?w.size=u.usedBytes:W.isLink(u.mode)?w.size=u.link.length:w.size=0,w.atime=new Date(u.timestamp),w.mtime=new Date(u.timestamp),w.ctime=new Date(u.timestamp),w.blksize=4096,w.blocks=Math.ceil(w.size/w.blksize),w},setattr(u,w){w.mode!==void 0&&(u.mode=w.mode),w.timestamp!==void 0&&(u.timestamp=w.timestamp),w.size!==void 0&&Ie.resizeFileStorage(u,w.size)},lookup(u,w){throw W.genericErrors[44]},mknod(u,w,M,L){return Ie.createNode(u,w,M,L)},rename(u,w,M){if(W.isDir(u.mode)){var L;try{L=W.lookupNode(w,M)}catch{}if(L)for(var H in L.contents)throw new W.ErrnoError(55)}delete u.parent.contents[u.name],u.parent.timestamp=Date.now(),u.name=M,w.contents[M]=u,w.timestamp=u.parent.timestamp,u.parent=w},unlink(u,w){delete u.contents[w],u.timestamp=Date.now()},rmdir(u,w){var M=W.lookupNode(u,w);for(var L in M.contents)throw new W.ErrnoError(55);delete u.contents[w],u.timestamp=Date.now()},readdir(u){var w=[".",".."];for(var M in u.contents)u.contents.hasOwnProperty(M)&&w.push(M);return w},symlink(u,w,M){var L=Ie.createNode(u,w,41471,0);return L.link=M,L},readlink(u){if(!W.isLink(u.mode))throw new W.ErrnoError(28);return u.link}},stream_ops:{read(u,w,M,L,H){var K=u.node.contents;if(H>=u.node.usedBytes)return 0;var oe=Math.min(u.node.usedBytes-H,L);if(oe>8&&K.subarray)w.set(K.subarray(H,H+oe),M);else for(var ge=0;ge<oe;ge++)w[M+ge]=K[H+ge];return oe},write(u,w,M,L,H,K){if(!L)return 0;var oe=u.node;if(oe.timestamp=Date.now(),w.subarray&&(!oe.contents||oe.contents.subarray)){if(K)return oe.contents=w.subarray(M,M+L),oe.usedBytes=L,L;if(oe.usedBytes===0&&H===0)return oe.contents=w.slice(M,M+L),oe.usedBytes=L,L;if(H+L<=oe.usedBytes)return oe.contents.set(w.subarray(M,M+L),H),L}if(Ie.expandFileStorage(oe,H+L),oe.contents.subarray&&w.subarray)oe.contents.set(w.subarray(M,M+L),H);else for(var ge=0;ge<L;ge++)oe.contents[H+ge]=w[M+ge];return oe.usedBytes=Math.max(oe.usedBytes,H+L),L},llseek(u,w,M){var L=w;if(M===1?L+=u.position:M===2&&W.isFile(u.node.mode)&&(L+=u.node.usedBytes),L<0)throw new W.ErrnoError(28);return L},allocate(u,w,M){Ie.expandFileStorage(u.node,w+M),u.node.usedBytes=Math.max(u.node.usedBytes,w+M)},mmap(u,w,M,L,H){if(!W.isFile(u.node.mode))throw new W.ErrnoError(43);var K,oe,ge=u.node.contents;if(!(H&2)&&ge.buffer===g.buffer)oe=!1,K=ge.byteOffset;else{if((M>0||M+w<ge.length)&&(ge.subarray?ge=ge.subarray(M,M+w):ge=Array.prototype.slice.call(ge,M,M+w)),oe=!0,K=vt(),!K)throw new W.ErrnoError(48);g.set(ge,K)}return{ptr:K,allocated:oe}},msync(u,w,M,L,H){return Ie.stream_ops.write(u,w,0,L,M,!1),0}}},At=(u,w,M,L)=>{var H=L?"":`al ${u}`;n(u,K=>{c(K,`Loading data file "${u}" failed (no arrayBuffer).`),w(new Uint8Array(K)),H&&Fe()},K=>{if(M)M();else throw`Loading data file "${u}" failed.`}),H&&ke()},He=a.preloadPlugins||[],Rt=(u,w,M,L)=>{typeof Browser<"u"&&Browser.init();var H=!1;return He.forEach(K=>{H||K.canHandle(w)&&(K.handle(u,w,M,L),H=!0)}),H},xt=(u,w,M,L,H,K,oe,ge,Me,ze)=>{var Ue=w?Xe.resolve(be.join2(u,w)):u;function Be(Oe){function Ne(tt){ze&&ze(),ge||W.createDataFile(u,w,tt,L,H,Me),K&&K(),Fe()}Rt(Oe,Ue,Ne,()=>{oe&&oe(),Fe()})||Ne(Oe)}ke(),typeof M=="string"?At(M,Oe=>Be(Oe),oe):Be(M)},N=u=>{var w={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},M=w[u];if(typeof M>"u")throw new Error(`Unknown file open mode: ${u}`);return M},dt=(u,w)=>{var M=0;return u&&(M|=365),w&&(M|=146),M},W={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath(u,w={}){if(u=Xe.resolve(u),!u)return{path:"",node:null};var M={follow_mount:!0,recurse_count:0};if(w=Object.assign(M,w),w.recurse_count>8)throw new W.ErrnoError(32);for(var L=u.split("/").filter(Be=>!!Be),H=W.root,K="/",oe=0;oe<L.length;oe++){var ge=oe===L.length-1;if(ge&&w.parent)break;if(H=W.lookupNode(H,L[oe]),K=be.join2(K,L[oe]),W.isMountpoint(H)&&(!ge||ge&&w.follow_mount)&&(H=H.mounted.root),!ge||w.follow)for(var Me=0;W.isLink(H.mode);){var ze=W.readlink(K);K=Xe.resolve(be.dirname(K),ze);var Ue=W.lookupPath(K,{recurse_count:w.recurse_count+1});if(H=Ue.node,Me++>40)throw new W.ErrnoError(32)}}return{path:K,node:H}},getPath(u){for(var w;;){if(W.isRoot(u)){var M=u.mount.mountpoint;return w?M[M.length-1]!=="/"?`${M}/${w}`:M+w:M}w=w?`${u.name}/${w}`:u.name,u=u.parent}},hashName(u,w){for(var M=0,L=0;L<w.length;L++)M=(M<<5)-M+w.charCodeAt(L)|0;return(u+M>>>0)%W.nameTable.length},hashAddNode(u){var w=W.hashName(u.parent.id,u.name);u.name_next=W.nameTable[w],W.nameTable[w]=u},hashRemoveNode(u){var w=W.hashName(u.parent.id,u.name);if(W.nameTable[w]===u)W.nameTable[w]=u.name_next;else for(var M=W.nameTable[w];M;){if(M.name_next===u){M.name_next=u.name_next;break}M=M.name_next}},lookupNode(u,w){var M=W.mayLookup(u);if(M)throw new W.ErrnoError(M,u);for(var L=W.hashName(u.id,w),H=W.nameTable[L];H;H=H.name_next){var K=H.name;if(H.parent.id===u.id&&K===w)return H}return W.lookup(u,w)},createNode(u,w,M,L){var H=new W.FSNode(u,w,M,L);return W.hashAddNode(H),H},destroyNode(u){W.hashRemoveNode(u)},isRoot(u){return u===u.parent},isMountpoint(u){return!!u.mounted},isFile(u){return(u&61440)===32768},isDir(u){return(u&61440)===16384},isLink(u){return(u&61440)===40960},isChrdev(u){return(u&61440)===8192},isBlkdev(u){return(u&61440)===24576},isFIFO(u){return(u&61440)===4096},isSocket(u){return(u&49152)===49152},flagsToPermissionString(u){var w=["r","w","rw"][u&3];return u&512&&(w+="w"),w},nodePermissions(u,w){return W.ignorePermissions?0:w.includes("r")&&!(u.mode&292)||w.includes("w")&&!(u.mode&146)||w.includes("x")&&!(u.mode&73)?2:0},mayLookup(u){var w=W.nodePermissions(u,"x");return w||(u.node_ops.lookup?0:2)},mayCreate(u,w){try{var M=W.lookupNode(u,w);return 20}catch{}return W.nodePermissions(u,"wx")},mayDelete(u,w,M){var L;try{L=W.lookupNode(u,w)}catch(K){return K.errno}var H=W.nodePermissions(u,"wx");if(H)return H;if(M){if(!W.isDir(L.mode))return 54;if(W.isRoot(L)||W.getPath(L)===W.cwd())return 10}else if(W.isDir(L.mode))return 31;return 0},mayOpen(u,w){return u?W.isLink(u.mode)?32:W.isDir(u.mode)&&(W.flagsToPermissionString(w)!=="r"||w&512)?31:W.nodePermissions(u,W.flagsToPermissionString(w)):44},MAX_OPEN_FDS:4096,nextfd(){for(var u=0;u<=W.MAX_OPEN_FDS;u++)if(!W.streams[u])return u;throw new W.ErrnoError(33)},getStreamChecked(u){var w=W.getStream(u);if(!w)throw new W.ErrnoError(8);return w},getStream:u=>W.streams[u],createStream(u,w=-1){return W.FSStream||(W.FSStream=function(){this.shared={}},W.FSStream.prototype={},Object.defineProperties(W.FSStream.prototype,{object:{get(){return this.node},set(M){this.node=M}},isRead:{get(){return(this.flags&2097155)!==1}},isWrite:{get(){return(this.flags&2097155)!==0}},isAppend:{get(){return this.flags&1024}},flags:{get(){return this.shared.flags},set(M){this.shared.flags=M}},position:{get(){return this.shared.position},set(M){this.shared.position=M}}})),u=Object.assign(new W.FSStream,u),w==-1&&(w=W.nextfd()),u.fd=w,W.streams[w]=u,u},closeStream(u){W.streams[u]=null},chrdev_stream_ops:{open(u){var w=W.getDevice(u.node.rdev);u.stream_ops=w.stream_ops,u.stream_ops.open&&u.stream_ops.open(u)},llseek(){throw new W.ErrnoError(70)}},major:u=>u>>8,minor:u=>u&255,makedev:(u,w)=>u<<8|w,registerDevice(u,w){W.devices[u]={stream_ops:w}},getDevice:u=>W.devices[u],getMounts(u){for(var w=[],M=[u];M.length;){var L=M.pop();w.push(L),M.push.apply(M,L.mounts)}return w},syncfs(u,w){typeof u=="function"&&(w=u,u=!1),W.syncFSRequests++,W.syncFSRequests>1&&o(`warning: ${W.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var M=W.getMounts(W.root.mount),L=0;function H(oe){return W.syncFSRequests--,w(oe)}function K(oe){if(oe)return K.errored?void 0:(K.errored=!0,H(oe));++L>=M.length&&H(null)}M.forEach(oe=>{if(!oe.type.syncfs)return K(null);oe.type.syncfs(oe,u,K)})},mount(u,w,M){var L=M==="/",H=!M,K;if(L&&W.root)throw new W.ErrnoError(10);if(!L&&!H){var oe=W.lookupPath(M,{follow_mount:!1});if(M=oe.path,K=oe.node,W.isMountpoint(K))throw new W.ErrnoError(10);if(!W.isDir(K.mode))throw new W.ErrnoError(54)}var ge={type:u,opts:w,mountpoint:M,mounts:[]},Me=u.mount(ge);return Me.mount=ge,ge.root=Me,L?W.root=Me:K&&(K.mounted=ge,K.mount&&K.mount.mounts.push(ge)),Me},unmount(u){var w=W.lookupPath(u,{follow_mount:!1});if(!W.isMountpoint(w.node))throw new W.ErrnoError(28);var M=w.node,L=M.mounted,H=W.getMounts(L);Object.keys(W.nameTable).forEach(oe=>{for(var ge=W.nameTable[oe];ge;){var Me=ge.name_next;H.includes(ge.mount)&&W.destroyNode(ge),ge=Me}}),M.mounted=null;var K=M.mount.mounts.indexOf(L);M.mount.mounts.splice(K,1)},lookup(u,w){return u.node_ops.lookup(u,w)},mknod(u,w,M){var L=W.lookupPath(u,{parent:!0}),H=L.node,K=be.basename(u);if(!K||K==="."||K==="..")throw new W.ErrnoError(28);var oe=W.mayCreate(H,K);if(oe)throw new W.ErrnoError(oe);if(!H.node_ops.mknod)throw new W.ErrnoError(63);return H.node_ops.mknod(H,K,w,M)},create(u,w){return w=w!==void 0?w:438,w&=4095,w|=32768,W.mknod(u,w,0)},mkdir(u,w){return w=w!==void 0?w:511,w&=1023,w|=16384,W.mknod(u,w,0)},mkdirTree(u,w){for(var M=u.split("/"),L="",H=0;H<M.length;++H)if(M[H]){L+="/"+M[H];try{W.mkdir(L,w)}catch(K){if(K.errno!=20)throw K}}},mkdev(u,w,M){return typeof M>"u"&&(M=w,w=438),w|=8192,W.mknod(u,w,M)},symlink(u,w){if(!Xe.resolve(u))throw new W.ErrnoError(44);var M=W.lookupPath(w,{parent:!0}),L=M.node;if(!L)throw new W.ErrnoError(44);var H=be.basename(w),K=W.mayCreate(L,H);if(K)throw new W.ErrnoError(K);if(!L.node_ops.symlink)throw new W.ErrnoError(63);return L.node_ops.symlink(L,H,u)},rename(u,w){var M=be.dirname(u),L=be.dirname(w),H=be.basename(u),K=be.basename(w),oe,ge,Me;if(oe=W.lookupPath(u,{parent:!0}),ge=oe.node,oe=W.lookupPath(w,{parent:!0}),Me=oe.node,!ge||!Me)throw new W.ErrnoError(44);if(ge.mount!==Me.mount)throw new W.ErrnoError(75);var ze=W.lookupNode(ge,H),Ue=Xe.relative(u,L);if(Ue.charAt(0)!==".")throw new W.ErrnoError(28);if(Ue=Xe.relative(w,M),Ue.charAt(0)!==".")throw new W.ErrnoError(55);var Be;try{Be=W.lookupNode(Me,K)}catch{}if(ze!==Be){var Oe=W.isDir(ze.mode),Ne=W.mayDelete(ge,H,Oe);if(Ne)throw new W.ErrnoError(Ne);if(Ne=Be?W.mayDelete(Me,K,Oe):W.mayCreate(Me,K),Ne)throw new W.ErrnoError(Ne);if(!ge.node_ops.rename)throw new W.ErrnoError(63);if(W.isMountpoint(ze)||Be&&W.isMountpoint(Be))throw new W.ErrnoError(10);if(Me!==ge&&(Ne=W.nodePermissions(ge,"w"),Ne))throw new W.ErrnoError(Ne);W.hashRemoveNode(ze);try{ge.node_ops.rename(ze,Me,K)}catch(tt){throw tt}finally{W.hashAddNode(ze)}}},rmdir(u){var w=W.lookupPath(u,{parent:!0}),M=w.node,L=be.basename(u),H=W.lookupNode(M,L),K=W.mayDelete(M,L,!0);if(K)throw new W.ErrnoError(K);if(!M.node_ops.rmdir)throw new W.ErrnoError(63);if(W.isMountpoint(H))throw new W.ErrnoError(10);M.node_ops.rmdir(M,L),W.destroyNode(H)},readdir(u){var w=W.lookupPath(u,{follow:!0}),M=w.node;if(!M.node_ops.readdir)throw new W.ErrnoError(54);return M.node_ops.readdir(M)},unlink(u){var w=W.lookupPath(u,{parent:!0}),M=w.node;if(!M)throw new W.ErrnoError(44);var L=be.basename(u),H=W.lookupNode(M,L),K=W.mayDelete(M,L,!1);if(K)throw new W.ErrnoError(K);if(!M.node_ops.unlink)throw new W.ErrnoError(63);if(W.isMountpoint(H))throw new W.ErrnoError(10);M.node_ops.unlink(M,L),W.destroyNode(H)},readlink(u){var w=W.lookupPath(u),M=w.node;if(!M)throw new W.ErrnoError(44);if(!M.node_ops.readlink)throw new W.ErrnoError(28);return Xe.resolve(W.getPath(M.parent),M.node_ops.readlink(M))},stat(u,w){var M=W.lookupPath(u,{follow:!w}),L=M.node;if(!L)throw new W.ErrnoError(44);if(!L.node_ops.getattr)throw new W.ErrnoError(63);return L.node_ops.getattr(L)},lstat(u){return W.stat(u,!0)},chmod(u,w,M){var L;if(typeof u=="string"){var H=W.lookupPath(u,{follow:!M});L=H.node}else L=u;if(!L.node_ops.setattr)throw new W.ErrnoError(63);L.node_ops.setattr(L,{mode:w&4095|L.mode&-4096,timestamp:Date.now()})},lchmod(u,w){W.chmod(u,w,!0)},fchmod(u,w){var M=W.getStreamChecked(u);W.chmod(M.node,w)},chown(u,w,M,L){var H;if(typeof u=="string"){var K=W.lookupPath(u,{follow:!L});H=K.node}else H=u;if(!H.node_ops.setattr)throw new W.ErrnoError(63);H.node_ops.setattr(H,{timestamp:Date.now()})},lchown(u,w,M){W.chown(u,w,M,!0)},fchown(u,w,M){var L=W.getStreamChecked(u);W.chown(L.node,w,M)},truncate(u,w){if(w<0)throw new W.ErrnoError(28);var M;if(typeof u=="string"){var L=W.lookupPath(u,{follow:!0});M=L.node}else M=u;if(!M.node_ops.setattr)throw new W.ErrnoError(63);if(W.isDir(M.mode))throw new W.ErrnoError(31);if(!W.isFile(M.mode))throw new W.ErrnoError(28);var H=W.nodePermissions(M,"w");if(H)throw new W.ErrnoError(H);M.node_ops.setattr(M,{size:w,timestamp:Date.now()})},ftruncate(u,w){var M=W.getStreamChecked(u);if(!(M.flags&2097155))throw new W.ErrnoError(28);W.truncate(M.node,w)},utime(u,w,M){var L=W.lookupPath(u,{follow:!0}),H=L.node;H.node_ops.setattr(H,{timestamp:Math.max(w,M)})},open(u,w,M){if(u==="")throw new W.ErrnoError(44);w=typeof w=="string"?N(w):w,M=typeof M>"u"?438:M,w&64?M=M&4095|32768:M=0;var L;if(typeof u=="object")L=u;else{u=be.normalize(u);try{var H=W.lookupPath(u,{follow:!(w&131072)});L=H.node}catch{}}var K=!1;if(w&64)if(L){if(w&128)throw new W.ErrnoError(20)}else L=W.mknod(u,M,0),K=!0;if(!L)throw new W.ErrnoError(44);if(W.isChrdev(L.mode)&&(w&=-513),w&65536&&!W.isDir(L.mode))throw new W.ErrnoError(54);if(!K){var oe=W.mayOpen(L,w);if(oe)throw new W.ErrnoError(oe)}w&512&&!K&&W.truncate(L,0),w&=-131713;var ge=W.createStream({node:L,path:W.getPath(L),flags:w,seekable:!0,position:0,stream_ops:L.stream_ops,ungotten:[],error:!1});return ge.stream_ops.open&&ge.stream_ops.open(ge),a.logReadFiles&&!(w&1)&&(W.readFiles||(W.readFiles={}),u in W.readFiles||(W.readFiles[u]=1)),ge},close(u){if(W.isClosed(u))throw new W.ErrnoError(8);u.getdents&&(u.getdents=null);try{u.stream_ops.close&&u.stream_ops.close(u)}catch(w){throw w}finally{W.closeStream(u.fd)}u.fd=null},isClosed(u){return u.fd===null},llseek(u,w,M){if(W.isClosed(u))throw new W.ErrnoError(8);if(!u.seekable||!u.stream_ops.llseek)throw new W.ErrnoError(70);if(M!=0&&M!=1&&M!=2)throw new W.ErrnoError(28);return u.position=u.stream_ops.llseek(u,w,M),u.ungotten=[],u.position},read(u,w,M,L,H){if(L<0||H<0)throw new W.ErrnoError(28);if(W.isClosed(u))throw new W.ErrnoError(8);if((u.flags&2097155)===1)throw new W.ErrnoError(8);if(W.isDir(u.node.mode))throw new W.ErrnoError(31);if(!u.stream_ops.read)throw new W.ErrnoError(28);var K=typeof H<"u";if(!K)H=u.position;else if(!u.seekable)throw new W.ErrnoError(70);var oe=u.stream_ops.read(u,w,M,L,H);return K||(u.position+=oe),oe},write(u,w,M,L,H,K){if(L<0||H<0)throw new W.ErrnoError(28);if(W.isClosed(u))throw new W.ErrnoError(8);if(!(u.flags&2097155))throw new W.ErrnoError(8);if(W.isDir(u.node.mode))throw new W.ErrnoError(31);if(!u.stream_ops.write)throw new W.ErrnoError(28);u.seekable&&u.flags&1024&&W.llseek(u,0,2);var oe=typeof H<"u";if(!oe)H=u.position;else if(!u.seekable)throw new W.ErrnoError(70);var ge=u.stream_ops.write(u,w,M,L,H,K);return oe||(u.position+=ge),ge},allocate(u,w,M){if(W.isClosed(u))throw new W.ErrnoError(8);if(w<0||M<=0)throw new W.ErrnoError(28);if(!(u.flags&2097155))throw new W.ErrnoError(8);if(!W.isFile(u.node.mode)&&!W.isDir(u.node.mode))throw new W.ErrnoError(43);if(!u.stream_ops.allocate)throw new W.ErrnoError(138);u.stream_ops.allocate(u,w,M)},mmap(u,w,M,L,H){if(L&2&&!(H&2)&&(u.flags&2097155)!==2)throw new W.ErrnoError(2);if((u.flags&2097155)===1)throw new W.ErrnoError(2);if(!u.stream_ops.mmap)throw new W.ErrnoError(43);return u.stream_ops.mmap(u,w,M,L,H)},msync(u,w,M,L,H){return u.stream_ops.msync?u.stream_ops.msync(u,w,M,L,H):0},munmap:u=>0,ioctl(u,w,M){if(!u.stream_ops.ioctl)throw new W.ErrnoError(59);return u.stream_ops.ioctl(u,w,M)},readFile(u,w={}){if(w.flags=w.flags||0,w.encoding=w.encoding||"binary",w.encoding!=="utf8"&&w.encoding!=="binary")throw new Error(`Invalid encoding type "${w.encoding}"`);var M,L=W.open(u,w.flags),H=W.stat(u),K=H.size,oe=new Uint8Array(K);return W.read(L,oe,0,K,0),w.encoding==="utf8"?M=Se(oe,0):w.encoding==="binary"&&(M=oe),W.close(L),M},writeFile(u,w,M={}){M.flags=M.flags||577;var L=W.open(u,M.flags,M.mode);if(typeof w=="string"){var H=new Uint8Array(ne(w)+1),K=Ee(w,H,0,H.length);W.write(L,H,0,K,void 0,M.canOwn)}else if(ArrayBuffer.isView(w))W.write(L,w,0,w.byteLength,void 0,M.canOwn);else throw new Error("Unsupported data type");W.close(L)},cwd:()=>W.currentPath,chdir(u){var w=W.lookupPath(u,{follow:!0});if(w.node===null)throw new W.ErrnoError(44);if(!W.isDir(w.node.mode))throw new W.ErrnoError(54);var M=W.nodePermissions(w.node,"x");if(M)throw new W.ErrnoError(M);W.currentPath=w.path},createDefaultDirectories(){W.mkdir("/tmp"),W.mkdir("/home"),W.mkdir("/home/web_user")},createDefaultDevices(){W.mkdir("/dev"),W.registerDevice(W.makedev(1,3),{read:()=>0,write:(L,H,K,oe,ge)=>oe}),W.mkdev("/dev/null",W.makedev(1,3)),Le.register(W.makedev(5,0),Le.default_tty_ops),Le.register(W.makedev(6,0),Le.default_tty1_ops),W.mkdev("/dev/tty",W.makedev(5,0)),W.mkdev("/dev/tty1",W.makedev(6,0));var u=new Uint8Array(1024),w=0,M=()=>(w===0&&(w=Ce(u).byteLength),u[--w]);W.createDevice("/dev","random",M),W.createDevice("/dev","urandom",M),W.mkdir("/dev/shm"),W.mkdir("/dev/shm/tmp")},createSpecialDirectories(){W.mkdir("/proc");var u=W.mkdir("/proc/self");W.mkdir("/proc/self/fd"),W.mount({mount(){var w=W.createNode(u,"fd",16895,73);return w.node_ops={lookup(M,L){var H=+L,K=W.getStreamChecked(H),oe={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>K.path}};return oe.parent=oe,oe}},w}},{},"/proc/self/fd")},createStandardStreams(){a.stdin?W.createDevice("/dev","stdin",a.stdin):W.symlink("/dev/tty","/dev/stdin"),a.stdout?W.createDevice("/dev","stdout",null,a.stdout):W.symlink("/dev/tty","/dev/stdout"),a.stderr?W.createDevice("/dev","stderr",null,a.stderr):W.symlink("/dev/tty1","/dev/stderr"),W.open("/dev/stdin",0),W.open("/dev/stdout",1),W.open("/dev/stderr",1)},ensureErrnoError(){W.ErrnoError||(W.ErrnoError=function(w,M){this.name="ErrnoError",this.node=M,this.setErrno=function(L){this.errno=L},this.setErrno(w),this.message="FS error"},W.ErrnoError.prototype=new Error,W.ErrnoError.prototype.constructor=W.ErrnoError,[44].forEach(u=>{W.genericErrors[u]=new W.ErrnoError(u),W.genericErrors[u].stack="<generic error, no stack>"}))},staticInit(){W.ensureErrnoError(),W.nameTable=new Array(4096),W.mount(Ie,{},"/"),W.createDefaultDirectories(),W.createDefaultDevices(),W.createSpecialDirectories(),W.filesystems={MEMFS:Ie}},init(u,w,M){W.init.initialized=!0,W.ensureErrnoError(),a.stdin=u||a.stdin,a.stdout=w||a.stdout,a.stderr=M||a.stderr,W.createStandardStreams()},quit(){W.init.initialized=!1;for(var u=0;u<W.streams.length;u++){var w=W.streams[u];w&&W.close(w)}},findObject(u,w){var M=W.analyzePath(u,w);return M.exists?M.object:null},analyzePath(u,w){try{var M=W.lookupPath(u,{follow:!w});u=M.path}catch{}var L={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var M=W.lookupPath(u,{parent:!0});L.parentExists=!0,L.parentPath=M.path,L.parentObject=M.node,L.name=be.basename(u),M=W.lookupPath(u,{follow:!w}),L.exists=!0,L.path=M.path,L.object=M.node,L.name=M.node.name,L.isRoot=M.path==="/"}catch(H){L.error=H.errno}return L},createPath(u,w,M,L){u=typeof u=="string"?u:W.getPath(u);for(var H=w.split("/").reverse();H.length;){var K=H.pop();if(K){var oe=be.join2(u,K);try{W.mkdir(oe)}catch{}u=oe}}return oe},createFile(u,w,M,L,H){var K=be.join2(typeof u=="string"?u:W.getPath(u),w),oe=dt(L,H);return W.create(K,oe)},createDataFile(u,w,M,L,H,K){var oe=w;u&&(u=typeof u=="string"?u:W.getPath(u),oe=w?be.join2(u,w):u);var ge=dt(L,H),Me=W.create(oe,ge);if(M){if(typeof M=="string"){for(var ze=new Array(M.length),Ue=0,Be=M.length;Ue<Be;++Ue)ze[Ue]=M.charCodeAt(Ue);M=ze}W.chmod(Me,ge|146);var Oe=W.open(Me,577);W.write(Oe,M,0,M.length,0,K),W.close(Oe),W.chmod(Me,ge)}return Me},createDevice(u,w,M,L){var H=be.join2(typeof u=="string"?u:W.getPath(u),w),K=dt(!!M,!!L);W.createDevice.major||(W.createDevice.major=64);var oe=W.makedev(W.createDevice.major++,0);return W.registerDevice(oe,{open(ge){ge.seekable=!1},close(ge){L&&L.buffer&&L.buffer.length&&L(10)},read(ge,Me,ze,Ue,Be){for(var Oe=0,Ne=0;Ne<Ue;Ne++){var tt;try{tt=M()}catch{throw new W.ErrnoError(29)}if(tt===void 0&&Oe===0)throw new W.ErrnoError(6);if(tt==null)break;Oe++,Me[ze+Ne]=tt}return Oe&&(ge.node.timestamp=Date.now()),Oe},write(ge,Me,ze,Ue,Be){for(var Oe=0;Oe<Ue;Oe++)try{L(Me[ze+Oe])}catch{throw new W.ErrnoError(29)}return Ue&&(ge.node.timestamp=Date.now()),Oe}}),W.mkdev(H,K,oe)},forceLoadFile(u){if(u.isDevice||u.isFolder||u.link||u.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(r)try{u.contents=We(r(u.url),!0),u.usedBytes=u.contents.length}catch{throw new W.ErrnoError(29)}else throw new Error("Cannot load without read() or XMLHttpRequest.")},createLazyFile(u,w,M,L,H){function K(){this.lengthKnown=!1,this.chunks=[]}if(K.prototype.get=function(Ne){if(!(Ne>this.length-1||Ne<0)){var tt=Ne%this.chunkSize,ct=Ne/this.chunkSize|0;return this.getter(ct)[tt]}},K.prototype.setDataGetter=function(Ne){this.getter=Ne},K.prototype.cacheLength=function(){var Ne=new XMLHttpRequest;if(Ne.open("HEAD",M,!1),Ne.send(null),!(Ne.status>=200&&Ne.status<300||Ne.status===304))throw new Error("Couldn't load "+M+". Status: "+Ne.status);var tt=Number(Ne.getResponseHeader("Content-length")),ct,ht=(ct=Ne.getResponseHeader("Accept-Ranges"))&&ct==="bytes",gt=(ct=Ne.getResponseHeader("Content-Encoding"))&&ct==="gzip",ut=1024*1024;ht||(ut=tt);var mt=(at,Kt)=>{if(at>Kt)throw new Error("invalid range ("+at+", "+Kt+") or no bytes requested!");if(Kt>tt-1)throw new Error("only "+tt+" bytes available! programmer error!");var wt=new XMLHttpRequest;if(wt.open("GET",M,!1),tt!==ut&&wt.setRequestHeader("Range","bytes="+at+"-"+Kt),wt.responseType="arraybuffer",wt.overrideMimeType&&wt.overrideMimeType("text/plain; charset=x-user-defined"),wt.send(null),!(wt.status>=200&&wt.status<300||wt.status===304))throw new Error("Couldn't load "+M+". Status: "+wt.status);return wt.response!==void 0?new Uint8Array(wt.response||[]):We(wt.responseText||"",!0)},Ct=this;Ct.setDataGetter(at=>{var Kt=at*ut,wt=(at+1)*ut-1;if(wt=Math.min(wt,tt-1),typeof Ct.chunks[at]>"u"&&(Ct.chunks[at]=mt(Kt,wt)),typeof Ct.chunks[at]>"u")throw new Error("doXHR failed!");return Ct.chunks[at]}),(gt||!tt)&&(ut=tt=1,tt=this.getter(0).length,ut=tt,i("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=tt,this._chunkSize=ut,this.lengthKnown=!0},typeof XMLHttpRequest<"u"){throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var oe,ge}else var ge={isDevice:!1,url:M};var Me=W.createFile(u,w,ge,L,H);ge.contents?Me.contents=ge.contents:ge.url&&(Me.contents=null,Me.url=ge.url),Object.defineProperties(Me,{usedBytes:{get:function(){return this.contents.length}}});var ze={},Ue=Object.keys(Me.stream_ops);Ue.forEach(Oe=>{var Ne=Me.stream_ops[Oe];ze[Oe]=function(){return W.forceLoadFile(Me),Ne.apply(null,arguments)}});function Be(Oe,Ne,tt,ct,ht){var gt=Oe.node.contents;if(ht>=gt.length)return 0;var ut=Math.min(gt.length-ht,ct);if(gt.slice)for(var mt=0;mt<ut;mt++)Ne[tt+mt]=gt[ht+mt];else for(var mt=0;mt<ut;mt++)Ne[tt+mt]=gt.get(ht+mt);return ut}return ze.read=(Oe,Ne,tt,ct,ht)=>(W.forceLoadFile(Me),Be(Oe,Ne,tt,ct,ht)),ze.mmap=(Oe,Ne,tt,ct,ht)=>{W.forceLoadFile(Me);var gt=vt();if(!gt)throw new W.ErrnoError(48);return Be(Oe,g,gt,Ne,tt),{ptr:gt,allocated:!0}},Me.stream_ops=ze,Me}},lt={DEFAULT_POLLMASK:5,calculateAt(u,w,M){if(be.isAbs(w))return w;var L;if(u===-100)L=W.cwd();else{var H=lt.getStreamFromFD(u);L=H.path}if(w.length==0){if(!M)throw new W.ErrnoError(44);return L}return be.join2(L,w)},doStat(u,w,M){try{var L=u(w)}catch(ge){if(ge&&ge.node&&be.normalize(w)!==be.normalize(W.getPath(ge.node)))return-54;throw ge}p[M>>2]=L.dev,p[M+4>>2]=L.mode,f[M+8>>2]=L.nlink,p[M+12>>2]=L.uid,p[M+16>>2]=L.gid,p[M+20>>2]=L.rdev,pe=[L.size>>>0,(Y=L.size,+Math.abs(Y)>=1?Y>0?+Math.floor(Y/4294967296)>>>0:~~+Math.ceil((Y-+(~~Y>>>0))/4294967296)>>>0:0)],p[M+24>>2]=pe[0],p[M+28>>2]=pe[1],p[M+32>>2]=4096,p[M+36>>2]=L.blocks;var H=L.atime.getTime(),K=L.mtime.getTime(),oe=L.ctime.getTime();return pe=[Math.floor(H/1e3)>>>0,(Y=Math.floor(H/1e3),+Math.abs(Y)>=1?Y>0?+Math.floor(Y/4294967296)>>>0:~~+Math.ceil((Y-+(~~Y>>>0))/4294967296)>>>0:0)],p[M+40>>2]=pe[0],p[M+44>>2]=pe[1],f[M+48>>2]=H%1e3*1e3,pe=[Math.floor(K/1e3)>>>0,(Y=Math.floor(K/1e3),+Math.abs(Y)>=1?Y>0?+Math.floor(Y/4294967296)>>>0:~~+Math.ceil((Y-+(~~Y>>>0))/4294967296)>>>0:0)],p[M+56>>2]=pe[0],p[M+60>>2]=pe[1],f[M+64>>2]=K%1e3*1e3,pe=[Math.floor(oe/1e3)>>>0,(Y=Math.floor(oe/1e3),+Math.abs(Y)>=1?Y>0?+Math.floor(Y/4294967296)>>>0:~~+Math.ceil((Y-+(~~Y>>>0))/4294967296)>>>0:0)],p[M+72>>2]=pe[0],p[M+76>>2]=pe[1],f[M+80>>2]=oe%1e3*1e3,pe=[L.ino>>>0,(Y=L.ino,+Math.abs(Y)>=1?Y>0?+Math.floor(Y/4294967296)>>>0:~~+Math.ceil((Y-+(~~Y>>>0))/4294967296)>>>0:0)],p[M+88>>2]=pe[0],p[M+92>>2]=pe[1],0},doMsync(u,w,M,L,H){if(!W.isFile(w.node.mode))throw new W.ErrnoError(43);if(L&2)return 0;var K=E.slice(u,u+M);W.msync(w,K,H,M,L)},varargs:void 0,get(){var u=p[lt.varargs>>2];return lt.varargs+=4,u},getp(){return lt.get()},getStr(u){var w=$e(u);return w},getStreamFromFD(u){var w=W.getStreamChecked(u);return w}};function U(u,w,M){lt.varargs=M;try{var L=lt.getStreamFromFD(u);switch(w){case 0:{var H=lt.get();if(H<0)return-28;for(;W.streams[H];)H++;var K;return K=W.createStream(L,H),K.fd}case 1:case 2:return 0;case 3:return L.flags;case 4:{var H=lt.get();return L.flags|=H,0}case 5:{var H=lt.getp(),oe=0;return m[H+oe>>1]=2,0}case 6:case 7:return 0;case 16:case 8:return-28;case 9:return Ge(28),-1;default:return-28}}catch(ge){if(typeof W>"u"||ge.name!=="ErrnoError")throw ge;return-ge.errno}}function st(u,w,M){lt.varargs=M;try{var L=lt.getStreamFromFD(u);switch(w){case 21509:return L.tty?0:-59;case 21505:{if(!L.tty)return-59;if(L.tty.ops.ioctl_tcgets){var H=L.tty.ops.ioctl_tcgets(L),K=lt.getp();p[K>>2]=H.c_iflag||0,p[K+4>>2]=H.c_oflag||0,p[K+8>>2]=H.c_cflag||0,p[K+12>>2]=H.c_lflag||0;for(var oe=0;oe<32;oe++)g[K+oe+17>>0]=H.c_cc[oe]||0;return 0}return 0}case 21510:case 21511:case 21512:return L.tty?0:-59;case 21506:case 21507:case 21508:{if(!L.tty)return-59;if(L.tty.ops.ioctl_tcsets){for(var K=lt.getp(),ge=p[K>>2],Me=p[K+4>>2],ze=p[K+8>>2],Ue=p[K+12>>2],Be=[],oe=0;oe<32;oe++)Be.push(g[K+oe+17>>0]);return L.tty.ops.ioctl_tcsets(L.tty,w,{c_iflag:ge,c_oflag:Me,c_cflag:ze,c_lflag:Ue,c_cc:Be})}return 0}case 21519:{if(!L.tty)return-59;var K=lt.getp();return p[K>>2]=0,0}case 21520:return L.tty?-28:-59;case 21531:{var K=lt.getp();return W.ioctl(L,w,K)}case 21523:{if(!L.tty)return-59;if(L.tty.ops.ioctl_tiocgwinsz){var Oe=L.tty.ops.ioctl_tiocgwinsz(L.tty),K=lt.getp();m[K>>1]=Oe[0],m[K+2>>1]=Oe[1]}return 0}case 21524:return L.tty?0:-59;case 21515:return L.tty?0:-59;default:return-28}}catch(Ne){if(typeof W>"u"||Ne.name!=="ErrnoError")throw Ne;return-Ne.errno}}function br(u,w,M,L){lt.varargs=L;try{w=lt.getStr(w),w=lt.calculateAt(u,w);var H=L?lt.get():0;return W.open(w,M,H).fd}catch(K){if(typeof W>"u"||K.name!=="ErrnoError")throw K;return-K.errno}}var Er=(u,w,M)=>E.copyWithin(u,w,w+M),Sr=u=>{De("OOM")},Ar=u=>{E.length,Sr()},zt=u=>{$=u,Z()||(a.onExit&&a.onExit(u),C=!0),s(u,new le(u))},lr=(u,w)=>{$=u,zt(u)},Ht=lr;function Cr(u){try{var w=lt.getStreamFromFD(u);return W.close(w),0}catch(M){if(typeof W>"u"||M.name!=="ErrnoError")throw M;return M.errno}}var kr=(u,w,M,L)=>{for(var H=0,K=0;K<M;K++){var oe=f[w>>2],ge=f[w+4>>2];w+=8;var Me=W.read(u,g,oe,ge,L);if(Me<0)return-1;if(H+=Me,Me<ge)break;typeof L<"u"&&(L+=Me)}return H};function Rr(u,w,M,L){try{var H=lt.getStreamFromFD(u),K=kr(H,w,M);return f[L>>2]=K,0}catch(oe){if(typeof W>"u"||oe.name!=="ErrnoError")throw oe;return oe.errno}}var Fr=(u,w)=>w+2097152>>>0<4194305-!!u?(u>>>0)+w*4294967296:NaN;function Mr(u,w,M,L,H){var K=Fr(w,M);try{if(isNaN(K))return 61;var oe=lt.getStreamFromFD(u);return W.llseek(oe,K,L),pe=[oe.position>>>0,(Y=oe.position,+Math.abs(Y)>=1?Y>0?+Math.floor(Y/4294967296)>>>0:~~+Math.ceil((Y-+(~~Y>>>0))/4294967296)>>>0:0)],p[H>>2]=pe[0],p[H+4>>2]=pe[1],oe.getdents&&K===0&&L===0&&(oe.getdents=null),0}catch(ge){if(typeof W>"u"||ge.name!=="ErrnoError")throw ge;return ge.errno}}var Dr=(u,w,M,L)=>{for(var H=0,K=0;K<M;K++){var oe=f[w>>2],ge=f[w+4>>2];w+=8;var Me=W.write(u,g,oe,ge,L);if(Me<0)return-1;H+=Me,typeof L<"u"&&(L+=Me)}return H};function cr(u,w,M,L){try{var H=lt.getStreamFromFD(u),K=Dr(H,w,M);return f[L>>2]=K,0}catch(oe){if(typeof W>"u"||oe.name!=="ErrnoError")throw oe;return oe.errno}}var ur=u=>{if(u instanceof le||u=="unwind")return $;s(1,u)},Tr=(u,w,M)=>Ee(u,E,w,M),hr=u=>{var w=ne(u)+1,M=rr(w);return Tr(u,M,w),M},Gt=function(u,w,M,L){u||(u=this),this.parent=u,this.mount=u.mount,this.mounted=null,this.id=W.nextInode++,this.name=w,this.mode=M,this.node_ops={},this.stream_ops={},this.rdev=L},Ut=365,qt=146;Object.defineProperties(Gt.prototype,{read:{get:function(){return(this.mode&Ut)===Ut},set:function(u){u?this.mode|=Ut:this.mode&=~Ut}},write:{get:function(){return(this.mode&qt)===qt},set:function(u){u?this.mode|=qt:this.mode&=~qt}},isFolder:{get:function(){return W.isDir(this.mode)}},isDevice:{get:function(){return W.isChrdev(this.mode)}}}),W.FSNode=Gt,W.createPreloadedFile=xt,W.staticInit();var Lt={a:Ae,e:U,j:st,g:br,h:Er,f:Ar,b:Ht,d:Cr,i:Rr,k:Mr,c:cr},Bt=Q(),Ot=a._main=(u,w)=>(Ot=a._main=Bt.o)(u,w),Vt=()=>(Vt=Bt.p)(),rr=u=>(rr=Bt.q)(u);a.FS=W;var Qt;ye=function u(){Qt||b(),Qt||(ye=u)};function fr(u=[]){var w=Ot;u.unshift(h);var M=u.length,L=rr((M+1)*4),H=L;u.forEach(oe=>{f[H>>2]=hr(oe),H+=4}),f[H>>2]=0;try{var K=w(M,L);return lr(K,!0),K}catch(oe){return ur(oe)}}function b(u=A){if(he>0||(ae(),he>0))return;function w(){Qt||(Qt=!0,a.calledRun=!0,!C&&(re(),ce(),D(a),a.onRuntimeInitialized&&a.onRuntimeInitialized(),x&&fr(u),j()))}a.setStatus?(a.setStatus("Running..."),setTimeout(function(){setTimeout(function(){a.setStatus("")},1),w()},1)):w()}if(a.preInit)for(typeof a.preInit=="function"&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.pop()();var x=!0;return a.noInitialRun&&(x=!1),b(),X.ready}})(),di=(()=>{var q=import.meta.url;return function(X={}){var a=X,D,z;a.ready=new Promise((b,x)=>{D=b,z=x});var k=Object.assign({},a),A=[],h="./this.program",s=(b,x)=>{throw x},l=!0,t="";function e(b){return a.locateFile?a.locateFile(b,t):t+b}var r,n;typeof document<"u"&&document.currentScript&&(t=document.currentScript.src),q&&(t=q),t.indexOf("blob:")!==0?t=t.substr(0,t.replace(/[?#].*/,"").lastIndexOf("/")+1):t="",r=b=>{var x=new XMLHttpRequest;return x.open("GET",b,!1),x.send(null),x.responseText},n=(b,x,u)=>{var w=new XMLHttpRequest;w.open("GET",b,!0),w.responseType="arraybuffer",w.onload=()=>{if(w.status==200||w.status==0&&w.response){x(w.response);return}u()},w.onerror=u,w.send(null)};var i=a.print||console.log.bind(console),o=a.printErr||console.error.bind(console);Object.assign(a,k),k=null,a.arguments&&(A=a.arguments),a.thisProgram&&(h=a.thisProgram),a.quit&&(s=a.quit);var d;a.wasmBinary&&(d=a.wasmBinary);var v=a.noExitRuntime||!0;typeof WebAssembly!="object"&&Fe("no native wasm support detected");var _,C=!1,$;function c(b,x){b||Fe(x)}var g,E,m,p;function f(){var b=_.buffer;a.HEAP8=g=new Int8Array(b),a.HEAP16=new Int16Array(b),a.HEAPU8=E=new Uint8Array(b),a.HEAPU16=new Uint16Array(b),a.HEAP32=m=new Int32Array(b),a.HEAPU32=p=new Uint32Array(b),a.HEAPF32=new Float32Array(b),a.HEAPF64=new Float64Array(b)}var F=[],R=[],I=[],S=[],P=0;function G(){return v||P>0}function Z(){if(a.preRun)for(typeof a.preRun=="function"&&(a.preRun=[a.preRun]);a.preRun.length;)j(a.preRun.shift());le(F)}function ae(){!a.noFSInit&&!N.init.initialized&&N.init(),N.ignorePermissions=!1,le(R)}function re(){le(I)}function ce(){if(a.postRun)for(typeof a.postRun=="function"&&(a.postRun=[a.postRun]);a.postRun.length;)ie(a.postRun.shift());le(S)}function j(b){F.unshift(b)}function ee(b){R.unshift(b)}function ie(b){S.unshift(b)}var fe=0,he=null;function ye(b){return b}function Te(b){fe++,a.monitorRunDependencies&&a.monitorRunDependencies(fe)}function ke(b){if(fe--,a.monitorRunDependencies&&a.monitorRunDependencies(fe),fe==0&&he){var x=he;he=null,x()}}function Fe(b){a.onAbort&&a.onAbort(b),b="Aborted("+b+")",o(b),C=!0,$=1,b+=". Build with -sASSERTIONS for more info.";var x=new WebAssembly.RuntimeError(b);throw z(x),x}var De="data:application/octet-stream;base64,";function Pe(b){return b.startsWith(De)}var Ye;a.locateFile?(Ye="rgbfix.wasm",Pe(Ye)||(Ye=e(Ye))):Ye=new URL("/rgbds-live/assets/rgbfix-e7c7aa35.wasm",self.location).href;function qe(b){if(b==Ye&&d)return new Uint8Array(d);throw"both async and sync fetching of the wasm failed"}function B(b){return!d&&l&&typeof fetch=="function"?fetch(b,{credentials:"same-origin"}).then(x=>{if(!x.ok)throw"failed to load wasm binary file at '"+b+"'";return x.arrayBuffer()}).catch(()=>qe(b)):Promise.resolve().then(()=>qe(b))}function _e(b,x,u){return B(b).then(w=>WebAssembly.instantiate(w,x)).then(w=>w).then(u,w=>{o(`failed to asynchronously prepare wasm: ${w}`),Fe(w)})}function me(b,x,u,w){return!b&&typeof WebAssembly.instantiateStreaming=="function"&&!Pe(x)&&typeof fetch=="function"?fetch(x,{credentials:"same-origin"}).then(M=>{var L=WebAssembly.instantiateStreaming(M,u);return L.then(w,function(H){return o(`wasm streaming compile failed: ${H}`),o("falling back to ArrayBuffer instantiation"),_e(x,u,w)})}):_e(x,u,w)}function te(){var b={a:qt};function x(w,M){var L=w.exports;return Lt=L,_=Lt.m,f(),Lt.p,ee(Lt.n),ke(),L}Te();function u(w){x(w.instance)}if(a.instantiateWasm)try{return a.instantiateWasm(b,x)}catch(w){o(`Module.instantiateWasm callback failed with error: ${w}`),z(w)}return me(d,Ye,b,u).catch(z),{}}var Q,Y;function pe(b){this.name="ExitStatus",this.message=`Program terminated with exit(${b})`,this.status=b}var le=b=>{for(;b.length>0;)b.shift()(a)},se=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,ve=(b,x,u)=>{for(var w=x+u,M=x;b[M]&&!(M>=w);)++M;if(M-x>16&&b.buffer&&se)return se.decode(b.subarray(x,M));for(var L="";x<M;){var H=b[x++];if(!(H&128)){L+=String.fromCharCode(H);continue}var K=b[x++]&63;if((H&224)==192){L+=String.fromCharCode((H&31)<<6|K);continue}var oe=b[x++]&63;if((H&240)==224?H=(H&15)<<12|K<<6|oe:H=(H&7)<<18|K<<12|oe<<6|b[x++]&63,H<65536)L+=String.fromCharCode(H);else{var ge=H-65536;L+=String.fromCharCode(55296|ge>>10,56320|ge&1023)}}return L},Se=(b,x)=>b?ve(E,b,x):"",$e=(b,x,u,w)=>{Fe(`Assertion failed: ${Se(b)}, at: `+[x?Se(x):"unknown filename",u,w?Se(w):"unknown function"])},Ae={isAbs:b=>b.charAt(0)==="/",splitPath:b=>{var x=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return x.exec(b).slice(1)},normalizeArray:(b,x)=>{for(var u=0,w=b.length-1;w>=0;w--){var M=b[w];M==="."?b.splice(w,1):M===".."?(b.splice(w,1),u++):u&&(b.splice(w,1),u--)}if(x)for(;u;u--)b.unshift("..");return b},normalize:b=>{var x=Ae.isAbs(b),u=b.substr(-1)==="/";return b=Ae.normalizeArray(b.split("/").filter(w=>!!w),!x).join("/"),!b&&!x&&(b="."),b&&u&&(b+="/"),(x?"/":"")+b},dirname:b=>{var x=Ae.splitPath(b),u=x[0],w=x[1];return!u&&!w?".":(w&&(w=w.substr(0,w.length-1)),u+w)},basename:b=>{if(b==="/")return"/";b=Ae.normalize(b),b=b.replace(/\/$/,"");var x=b.lastIndexOf("/");return x===-1?b:b.substr(x+1)},join:function(){var b=Array.prototype.slice.call(arguments);return Ae.normalize(b.join("/"))},join2:(b,x)=>Ae.normalize(b+"/"+x)},Ge=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return b=>crypto.getRandomValues(b);Fe("initRandomDevice")},be=b=>(be=Ge())(b),Qe={resolve:function(){for(var b="",x=!1,u=arguments.length-1;u>=-1&&!x;u--){var w=u>=0?arguments[u]:N.cwd();if(typeof w!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!w)return"";b=w+"/"+b,x=Ae.isAbs(w)}return b=Ae.normalizeArray(b.split("/").filter(M=>!!M),!x).join("/"),(x?"/":"")+b||"."},relative:(b,x)=>{b=Qe.resolve(b).substr(1),x=Qe.resolve(x).substr(1);function u(ge){for(var Me=0;Me<ge.length&&ge[Me]==="";Me++);for(var ze=ge.length-1;ze>=0&&ge[ze]==="";ze--);return Me>ze?[]:ge.slice(Me,ze-Me+1)}for(var w=u(b.split("/")),M=u(x.split("/")),L=Math.min(w.length,M.length),H=L,K=0;K<L;K++)if(w[K]!==M[K]){H=K;break}for(var oe=[],K=H;K<w.length;K++)oe.push("..");return oe=oe.concat(M.slice(H)),oe.join("/")}},Ce=[],Xe=b=>{for(var x=0,u=0;u<b.length;++u){var w=b.charCodeAt(u);w<=127?x++:w<=2047?x+=2:w>=55296&&w<=57343?(x+=4,++u):x+=3}return x},ft=(b,x,u,w)=>{if(!(w>0))return 0;for(var M=u,L=u+w-1,H=0;H<b.length;++H){var K=b.charCodeAt(H);if(K>=55296&&K<=57343){var oe=b.charCodeAt(++H);K=65536+((K&1023)<<10)|oe&1023}if(K<=127){if(u>=L)break;x[u++]=K}else if(K<=2047){if(u+1>=L)break;x[u++]=192|K>>6,x[u++]=128|K&63}else if(K<=65535){if(u+2>=L)break;x[u++]=224|K>>12,x[u++]=128|K>>6&63,x[u++]=128|K&63}else{if(u+3>=L)break;x[u++]=240|K>>18,x[u++]=128|K>>12&63,x[u++]=128|K>>6&63,x[u++]=128|K&63}}return x[u]=0,u-M};function ne(b,x,u){var w=u>0?u:Xe(b)+1,M=new Array(w),L=ft(b,M,0,M.length);return x&&(M.length=L),M}var Ee=()=>{if(!Ce.length){var b=null;if(typeof window<"u"&&typeof window.prompt=="function"?(b=window.prompt("Input: "),b!==null&&(b+=`
`)):typeof readline=="function"&&(b=readline(),b!==null&&(b+=`
`)),!b)return null;Ce=ne(b,!0)}return Ce.shift()},We={ttys:[],init(){},shutdown(){},register(b,x){We.ttys[b]={input:[],output:[],ops:x},N.registerDevice(b,We.stream_ops)},stream_ops:{open(b){var x=We.ttys[b.node.rdev];if(!x)throw new N.ErrnoError(43);b.tty=x,b.seekable=!1},close(b){b.tty.ops.fsync(b.tty)},fsync(b){b.tty.ops.fsync(b.tty)},read(b,x,u,w,M){if(!b.tty||!b.tty.ops.get_char)throw new N.ErrnoError(60);for(var L=0,H=0;H<w;H++){var K;try{K=b.tty.ops.get_char(b.tty)}catch{throw new N.ErrnoError(29)}if(K===void 0&&L===0)throw new N.ErrnoError(6);if(K==null)break;L++,x[u+H]=K}return L&&(b.node.timestamp=Date.now()),L},write(b,x,u,w,M){if(!b.tty||!b.tty.ops.put_char)throw new N.ErrnoError(60);try{for(var L=0;L<w;L++)b.tty.ops.put_char(b.tty,x[u+L])}catch{throw new N.ErrnoError(29)}return w&&(b.node.timestamp=Date.now()),L}},default_tty_ops:{get_char(b){return Ee()},put_char(b,x){x===null||x===10?(i(ve(b.output,0)),b.output=[]):x!=0&&b.output.push(x)},fsync(b){b.output&&b.output.length>0&&(i(ve(b.output,0)),b.output=[])},ioctl_tcgets(b){return{c_iflag:25856,c_oflag:5,c_cflag:191,c_lflag:35387,c_cc:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},ioctl_tcsets(b,x,u){return 0},ioctl_tiocgwinsz(b){return[24,80]}},default_tty1_ops:{put_char(b,x){x===null||x===10?(o(ve(b.output,0)),b.output=[]):x!=0&&b.output.push(x)},fsync(b){b.output&&b.output.length>0&&(o(ve(b.output,0)),b.output=[])}}},et=b=>{Fe()},Le={ops_table:null,mount(b){return Le.createNode(null,"/",16895,0)},createNode(b,x,u,w){if(N.isBlkdev(u)||N.isFIFO(u))throw new N.ErrnoError(63);Le.ops_table||(Le.ops_table={dir:{node:{getattr:Le.node_ops.getattr,setattr:Le.node_ops.setattr,lookup:Le.node_ops.lookup,mknod:Le.node_ops.mknod,rename:Le.node_ops.rename,unlink:Le.node_ops.unlink,rmdir:Le.node_ops.rmdir,readdir:Le.node_ops.readdir,symlink:Le.node_ops.symlink},stream:{llseek:Le.stream_ops.llseek}},file:{node:{getattr:Le.node_ops.getattr,setattr:Le.node_ops.setattr},stream:{llseek:Le.stream_ops.llseek,read:Le.stream_ops.read,write:Le.stream_ops.write,allocate:Le.stream_ops.allocate,mmap:Le.stream_ops.mmap,msync:Le.stream_ops.msync}},link:{node:{getattr:Le.node_ops.getattr,setattr:Le.node_ops.setattr,readlink:Le.node_ops.readlink},stream:{}},chrdev:{node:{getattr:Le.node_ops.getattr,setattr:Le.node_ops.setattr},stream:N.chrdev_stream_ops}});var M=N.createNode(b,x,u,w);return N.isDir(M.mode)?(M.node_ops=Le.ops_table.dir.node,M.stream_ops=Le.ops_table.dir.stream,M.contents={}):N.isFile(M.mode)?(M.node_ops=Le.ops_table.file.node,M.stream_ops=Le.ops_table.file.stream,M.usedBytes=0,M.contents=null):N.isLink(M.mode)?(M.node_ops=Le.ops_table.link.node,M.stream_ops=Le.ops_table.link.stream):N.isChrdev(M.mode)&&(M.node_ops=Le.ops_table.chrdev.node,M.stream_ops=Le.ops_table.chrdev.stream),M.timestamp=Date.now(),b&&(b.contents[x]=M,b.timestamp=M.timestamp),M},getFileDataAsTypedArray(b){return b.contents?b.contents.subarray?b.contents.subarray(0,b.usedBytes):new Uint8Array(b.contents):new Uint8Array(0)},expandFileStorage(b,x){var u=b.contents?b.contents.length:0;if(!(u>=x)){var w=1024*1024;x=Math.max(x,u*(u<w?2:1.125)>>>0),u!=0&&(x=Math.max(x,256));var M=b.contents;b.contents=new Uint8Array(x),b.usedBytes>0&&b.contents.set(M.subarray(0,b.usedBytes),0)}},resizeFileStorage(b,x){if(b.usedBytes!=x)if(x==0)b.contents=null,b.usedBytes=0;else{var u=b.contents;b.contents=new Uint8Array(x),u&&b.contents.set(u.subarray(0,Math.min(x,b.usedBytes))),b.usedBytes=x}},node_ops:{getattr(b){var x={};return x.dev=N.isChrdev(b.mode)?b.id:1,x.ino=b.id,x.mode=b.mode,x.nlink=1,x.uid=0,x.gid=0,x.rdev=b.rdev,N.isDir(b.mode)?x.size=4096:N.isFile(b.mode)?x.size=b.usedBytes:N.isLink(b.mode)?x.size=b.link.length:x.size=0,x.atime=new Date(b.timestamp),x.mtime=new Date(b.timestamp),x.ctime=new Date(b.timestamp),x.blksize=4096,x.blocks=Math.ceil(x.size/x.blksize),x},setattr(b,x){x.mode!==void 0&&(b.mode=x.mode),x.timestamp!==void 0&&(b.timestamp=x.timestamp),x.size!==void 0&&Le.resizeFileStorage(b,x.size)},lookup(b,x){throw N.genericErrors[44]},mknod(b,x,u,w){return Le.createNode(b,x,u,w)},rename(b,x,u){if(N.isDir(b.mode)){var w;try{w=N.lookupNode(x,u)}catch{}if(w)for(var M in w.contents)throw new N.ErrnoError(55)}delete b.parent.contents[b.name],b.parent.timestamp=Date.now(),b.name=u,x.contents[u]=b,x.timestamp=b.parent.timestamp,b.parent=x},unlink(b,x){delete b.contents[x],b.timestamp=Date.now()},rmdir(b,x){var u=N.lookupNode(b,x);for(var w in u.contents)throw new N.ErrnoError(55);delete b.contents[x],b.timestamp=Date.now()},readdir(b){var x=[".",".."];for(var u in b.contents)b.contents.hasOwnProperty(u)&&x.push(u);return x},symlink(b,x,u){var w=Le.createNode(b,x,41471,0);return w.link=u,w},readlink(b){if(!N.isLink(b.mode))throw new N.ErrnoError(28);return b.link}},stream_ops:{read(b,x,u,w,M){var L=b.node.contents;if(M>=b.node.usedBytes)return 0;var H=Math.min(b.node.usedBytes-M,w);if(H>8&&L.subarray)x.set(L.subarray(M,M+H),u);else for(var K=0;K<H;K++)x[u+K]=L[M+K];return H},write(b,x,u,w,M,L){if(!w)return 0;var H=b.node;if(H.timestamp=Date.now(),x.subarray&&(!H.contents||H.contents.subarray)){if(L)return H.contents=x.subarray(u,u+w),H.usedBytes=w,w;if(H.usedBytes===0&&M===0)return H.contents=x.slice(u,u+w),H.usedBytes=w,w;if(M+w<=H.usedBytes)return H.contents.set(x.subarray(u,u+w),M),w}if(Le.expandFileStorage(H,M+w),H.contents.subarray&&x.subarray)H.contents.set(x.subarray(u,u+w),M);else for(var K=0;K<w;K++)H.contents[M+K]=x[u+K];return H.usedBytes=Math.max(H.usedBytes,M+w),w},llseek(b,x,u){var w=x;if(u===1?w+=b.position:u===2&&N.isFile(b.node.mode)&&(w+=b.node.usedBytes),w<0)throw new N.ErrnoError(28);return w},allocate(b,x,u){Le.expandFileStorage(b.node,x+u),b.node.usedBytes=Math.max(b.node.usedBytes,x+u)},mmap(b,x,u,w,M){if(!N.isFile(b.node.mode))throw new N.ErrnoError(43);var L,H,K=b.node.contents;if(!(M&2)&&K.buffer===g.buffer)H=!1,L=K.byteOffset;else{if((u>0||u+x<K.length)&&(K.subarray?K=K.subarray(u,u+x):K=Array.prototype.slice.call(K,u,u+x)),H=!0,L=et(),!L)throw new N.ErrnoError(48);g.set(K,L)}return{ptr:L,allocated:H}},msync(b,x,u,w,M){return Le.stream_ops.write(b,x,0,w,u,!1),0}}},vt=(b,x,u,w)=>{var M=w?"":`al ${b}`;n(b,L=>{c(L,`Loading data file "${b}" failed (no arrayBuffer).`),x(new Uint8Array(L)),M&&ke()},L=>{if(u)u();else throw`Loading data file "${b}" failed.`}),M&&Te()},Ie=a.preloadPlugins||[],At=(b,x,u,w)=>{typeof Browser<"u"&&Browser.init();var M=!1;return Ie.forEach(L=>{M||L.canHandle(x)&&(L.handle(b,x,u,w),M=!0)}),M},He=(b,x,u,w,M,L,H,K,oe,ge)=>{var Me=x?Qe.resolve(Ae.join2(b,x)):b;function ze(Ue){function Be(Oe){ge&&ge(),K||N.createDataFile(b,x,Oe,w,M,oe),L&&L(),ke()}At(Ue,Me,Be,()=>{H&&H(),ke()})||Be(Ue)}Te(),typeof u=="string"?vt(u,Ue=>ze(Ue),H):ze(u)},Rt=b=>{var x={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},u=x[b];if(typeof u>"u")throw new Error(`Unknown file open mode: ${b}`);return u},xt=(b,x)=>{var u=0;return b&&(u|=365),x&&(u|=146),u},N={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath(b,x={}){if(b=Qe.resolve(b),!b)return{path:"",node:null};var u={follow_mount:!0,recurse_count:0};if(x=Object.assign(u,x),x.recurse_count>8)throw new N.ErrnoError(32);for(var w=b.split("/").filter(ze=>!!ze),M=N.root,L="/",H=0;H<w.length;H++){var K=H===w.length-1;if(K&&x.parent)break;if(M=N.lookupNode(M,w[H]),L=Ae.join2(L,w[H]),N.isMountpoint(M)&&(!K||K&&x.follow_mount)&&(M=M.mounted.root),!K||x.follow)for(var oe=0;N.isLink(M.mode);){var ge=N.readlink(L);L=Qe.resolve(Ae.dirname(L),ge);var Me=N.lookupPath(L,{recurse_count:x.recurse_count+1});if(M=Me.node,oe++>40)throw new N.ErrnoError(32)}}return{path:L,node:M}},getPath(b){for(var x;;){if(N.isRoot(b)){var u=b.mount.mountpoint;return x?u[u.length-1]!=="/"?`${u}/${x}`:u+x:u}x=x?`${b.name}/${x}`:b.name,b=b.parent}},hashName(b,x){for(var u=0,w=0;w<x.length;w++)u=(u<<5)-u+x.charCodeAt(w)|0;return(b+u>>>0)%N.nameTable.length},hashAddNode(b){var x=N.hashName(b.parent.id,b.name);b.name_next=N.nameTable[x],N.nameTable[x]=b},hashRemoveNode(b){var x=N.hashName(b.parent.id,b.name);if(N.nameTable[x]===b)N.nameTable[x]=b.name_next;else for(var u=N.nameTable[x];u;){if(u.name_next===b){u.name_next=b.name_next;break}u=u.name_next}},lookupNode(b,x){var u=N.mayLookup(b);if(u)throw new N.ErrnoError(u,b);for(var w=N.hashName(b.id,x),M=N.nameTable[w];M;M=M.name_next){var L=M.name;if(M.parent.id===b.id&&L===x)return M}return N.lookup(b,x)},createNode(b,x,u,w){var M=new N.FSNode(b,x,u,w);return N.hashAddNode(M),M},destroyNode(b){N.hashRemoveNode(b)},isRoot(b){return b===b.parent},isMountpoint(b){return!!b.mounted},isFile(b){return(b&61440)===32768},isDir(b){return(b&61440)===16384},isLink(b){return(b&61440)===40960},isChrdev(b){return(b&61440)===8192},isBlkdev(b){return(b&61440)===24576},isFIFO(b){return(b&61440)===4096},isSocket(b){return(b&49152)===49152},flagsToPermissionString(b){var x=["r","w","rw"][b&3];return b&512&&(x+="w"),x},nodePermissions(b,x){return N.ignorePermissions?0:x.includes("r")&&!(b.mode&292)||x.includes("w")&&!(b.mode&146)||x.includes("x")&&!(b.mode&73)?2:0},mayLookup(b){var x=N.nodePermissions(b,"x");return x||(b.node_ops.lookup?0:2)},mayCreate(b,x){try{var u=N.lookupNode(b,x);return 20}catch{}return N.nodePermissions(b,"wx")},mayDelete(b,x,u){var w;try{w=N.lookupNode(b,x)}catch(L){return L.errno}var M=N.nodePermissions(b,"wx");if(M)return M;if(u){if(!N.isDir(w.mode))return 54;if(N.isRoot(w)||N.getPath(w)===N.cwd())return 10}else if(N.isDir(w.mode))return 31;return 0},mayOpen(b,x){return b?N.isLink(b.mode)?32:N.isDir(b.mode)&&(N.flagsToPermissionString(x)!=="r"||x&512)?31:N.nodePermissions(b,N.flagsToPermissionString(x)):44},MAX_OPEN_FDS:4096,nextfd(){for(var b=0;b<=N.MAX_OPEN_FDS;b++)if(!N.streams[b])return b;throw new N.ErrnoError(33)},getStreamChecked(b){var x=N.getStream(b);if(!x)throw new N.ErrnoError(8);return x},getStream:b=>N.streams[b],createStream(b,x=-1){return N.FSStream||(N.FSStream=function(){this.shared={}},N.FSStream.prototype={},Object.defineProperties(N.FSStream.prototype,{object:{get(){return this.node},set(u){this.node=u}},isRead:{get(){return(this.flags&2097155)!==1}},isWrite:{get(){return(this.flags&2097155)!==0}},isAppend:{get(){return this.flags&1024}},flags:{get(){return this.shared.flags},set(u){this.shared.flags=u}},position:{get(){return this.shared.position},set(u){this.shared.position=u}}})),b=Object.assign(new N.FSStream,b),x==-1&&(x=N.nextfd()),b.fd=x,N.streams[x]=b,b},closeStream(b){N.streams[b]=null},chrdev_stream_ops:{open(b){var x=N.getDevice(b.node.rdev);b.stream_ops=x.stream_ops,b.stream_ops.open&&b.stream_ops.open(b)},llseek(){throw new N.ErrnoError(70)}},major:b=>b>>8,minor:b=>b&255,makedev:(b,x)=>b<<8|x,registerDevice(b,x){N.devices[b]={stream_ops:x}},getDevice:b=>N.devices[b],getMounts(b){for(var x=[],u=[b];u.length;){var w=u.pop();x.push(w),u.push.apply(u,w.mounts)}return x},syncfs(b,x){typeof b=="function"&&(x=b,b=!1),N.syncFSRequests++,N.syncFSRequests>1&&o(`warning: ${N.syncFSRequests} FS.syncfs operations in flight at once, probably just doing extra work`);var u=N.getMounts(N.root.mount),w=0;function M(H){return N.syncFSRequests--,x(H)}function L(H){if(H)return L.errored?void 0:(L.errored=!0,M(H));++w>=u.length&&M(null)}u.forEach(H=>{if(!H.type.syncfs)return L(null);H.type.syncfs(H,b,L)})},mount(b,x,u){var w=u==="/",M=!u,L;if(w&&N.root)throw new N.ErrnoError(10);if(!w&&!M){var H=N.lookupPath(u,{follow_mount:!1});if(u=H.path,L=H.node,N.isMountpoint(L))throw new N.ErrnoError(10);if(!N.isDir(L.mode))throw new N.ErrnoError(54)}var K={type:b,opts:x,mountpoint:u,mounts:[]},oe=b.mount(K);return oe.mount=K,K.root=oe,w?N.root=oe:L&&(L.mounted=K,L.mount&&L.mount.mounts.push(K)),oe},unmount(b){var x=N.lookupPath(b,{follow_mount:!1});if(!N.isMountpoint(x.node))throw new N.ErrnoError(28);var u=x.node,w=u.mounted,M=N.getMounts(w);Object.keys(N.nameTable).forEach(H=>{for(var K=N.nameTable[H];K;){var oe=K.name_next;M.includes(K.mount)&&N.destroyNode(K),K=oe}}),u.mounted=null;var L=u.mount.mounts.indexOf(w);u.mount.mounts.splice(L,1)},lookup(b,x){return b.node_ops.lookup(b,x)},mknod(b,x,u){var w=N.lookupPath(b,{parent:!0}),M=w.node,L=Ae.basename(b);if(!L||L==="."||L==="..")throw new N.ErrnoError(28);var H=N.mayCreate(M,L);if(H)throw new N.ErrnoError(H);if(!M.node_ops.mknod)throw new N.ErrnoError(63);return M.node_ops.mknod(M,L,x,u)},create(b,x){return x=x!==void 0?x:438,x&=4095,x|=32768,N.mknod(b,x,0)},mkdir(b,x){return x=x!==void 0?x:511,x&=1023,x|=16384,N.mknod(b,x,0)},mkdirTree(b,x){for(var u=b.split("/"),w="",M=0;M<u.length;++M)if(u[M]){w+="/"+u[M];try{N.mkdir(w,x)}catch(L){if(L.errno!=20)throw L}}},mkdev(b,x,u){return typeof u>"u"&&(u=x,x=438),x|=8192,N.mknod(b,x,u)},symlink(b,x){if(!Qe.resolve(b))throw new N.ErrnoError(44);var u=N.lookupPath(x,{parent:!0}),w=u.node;if(!w)throw new N.ErrnoError(44);var M=Ae.basename(x),L=N.mayCreate(w,M);if(L)throw new N.ErrnoError(L);if(!w.node_ops.symlink)throw new N.ErrnoError(63);return w.node_ops.symlink(w,M,b)},rename(b,x){var u=Ae.dirname(b),w=Ae.dirname(x),M=Ae.basename(b),L=Ae.basename(x),H,K,oe;if(H=N.lookupPath(b,{parent:!0}),K=H.node,H=N.lookupPath(x,{parent:!0}),oe=H.node,!K||!oe)throw new N.ErrnoError(44);if(K.mount!==oe.mount)throw new N.ErrnoError(75);var ge=N.lookupNode(K,M),Me=Qe.relative(b,w);if(Me.charAt(0)!==".")throw new N.ErrnoError(28);if(Me=Qe.relative(x,u),Me.charAt(0)!==".")throw new N.ErrnoError(55);var ze;try{ze=N.lookupNode(oe,L)}catch{}if(ge!==ze){var Ue=N.isDir(ge.mode),Be=N.mayDelete(K,M,Ue);if(Be)throw new N.ErrnoError(Be);if(Be=ze?N.mayDelete(oe,L,Ue):N.mayCreate(oe,L),Be)throw new N.ErrnoError(Be);if(!K.node_ops.rename)throw new N.ErrnoError(63);if(N.isMountpoint(ge)||ze&&N.isMountpoint(ze))throw new N.ErrnoError(10);if(oe!==K&&(Be=N.nodePermissions(K,"w"),Be))throw new N.ErrnoError(Be);N.hashRemoveNode(ge);try{K.node_ops.rename(ge,oe,L)}catch(Oe){throw Oe}finally{N.hashAddNode(ge)}}},rmdir(b){var x=N.lookupPath(b,{parent:!0}),u=x.node,w=Ae.basename(b),M=N.lookupNode(u,w),L=N.mayDelete(u,w,!0);if(L)throw new N.ErrnoError(L);if(!u.node_ops.rmdir)throw new N.ErrnoError(63);if(N.isMountpoint(M))throw new N.ErrnoError(10);u.node_ops.rmdir(u,w),N.destroyNode(M)},readdir(b){var x=N.lookupPath(b,{follow:!0}),u=x.node;if(!u.node_ops.readdir)throw new N.ErrnoError(54);return u.node_ops.readdir(u)},unlink(b){var x=N.lookupPath(b,{parent:!0}),u=x.node;if(!u)throw new N.ErrnoError(44);var w=Ae.basename(b),M=N.lookupNode(u,w),L=N.mayDelete(u,w,!1);if(L)throw new N.ErrnoError(L);if(!u.node_ops.unlink)throw new N.ErrnoError(63);if(N.isMountpoint(M))throw new N.ErrnoError(10);u.node_ops.unlink(u,w),N.destroyNode(M)},readlink(b){var x=N.lookupPath(b),u=x.node;if(!u)throw new N.ErrnoError(44);if(!u.node_ops.readlink)throw new N.ErrnoError(28);return Qe.resolve(N.getPath(u.parent),u.node_ops.readlink(u))},stat(b,x){var u=N.lookupPath(b,{follow:!x}),w=u.node;if(!w)throw new N.ErrnoError(44);if(!w.node_ops.getattr)throw new N.ErrnoError(63);return w.node_ops.getattr(w)},lstat(b){return N.stat(b,!0)},chmod(b,x,u){var w;if(typeof b=="string"){var M=N.lookupPath(b,{follow:!u});w=M.node}else w=b;if(!w.node_ops.setattr)throw new N.ErrnoError(63);w.node_ops.setattr(w,{mode:x&4095|w.mode&-4096,timestamp:Date.now()})},lchmod(b,x){N.chmod(b,x,!0)},fchmod(b,x){var u=N.getStreamChecked(b);N.chmod(u.node,x)},chown(b,x,u,w){var M;if(typeof b=="string"){var L=N.lookupPath(b,{follow:!w});M=L.node}else M=b;if(!M.node_ops.setattr)throw new N.ErrnoError(63);M.node_ops.setattr(M,{timestamp:Date.now()})},lchown(b,x,u){N.chown(b,x,u,!0)},fchown(b,x,u){var w=N.getStreamChecked(b);N.chown(w.node,x,u)},truncate(b,x){if(x<0)throw new N.ErrnoError(28);var u;if(typeof b=="string"){var w=N.lookupPath(b,{follow:!0});u=w.node}else u=b;if(!u.node_ops.setattr)throw new N.ErrnoError(63);if(N.isDir(u.mode))throw new N.ErrnoError(31);if(!N.isFile(u.mode))throw new N.ErrnoError(28);var M=N.nodePermissions(u,"w");if(M)throw new N.ErrnoError(M);u.node_ops.setattr(u,{size:x,timestamp:Date.now()})},ftruncate(b,x){var u=N.getStreamChecked(b);if(!(u.flags&2097155))throw new N.ErrnoError(28);N.truncate(u.node,x)},utime(b,x,u){var w=N.lookupPath(b,{follow:!0}),M=w.node;M.node_ops.setattr(M,{timestamp:Math.max(x,u)})},open(b,x,u){if(b==="")throw new N.ErrnoError(44);x=typeof x=="string"?Rt(x):x,u=typeof u>"u"?438:u,x&64?u=u&4095|32768:u=0;var w;if(typeof b=="object")w=b;else{b=Ae.normalize(b);try{var M=N.lookupPath(b,{follow:!(x&131072)});w=M.node}catch{}}var L=!1;if(x&64)if(w){if(x&128)throw new N.ErrnoError(20)}else w=N.mknod(b,u,0),L=!0;if(!w)throw new N.ErrnoError(44);if(N.isChrdev(w.mode)&&(x&=-513),x&65536&&!N.isDir(w.mode))throw new N.ErrnoError(54);if(!L){var H=N.mayOpen(w,x);if(H)throw new N.ErrnoError(H)}x&512&&!L&&N.truncate(w,0),x&=-131713;var K=N.createStream({node:w,path:N.getPath(w),flags:x,seekable:!0,position:0,stream_ops:w.stream_ops,ungotten:[],error:!1});return K.stream_ops.open&&K.stream_ops.open(K),a.logReadFiles&&!(x&1)&&(N.readFiles||(N.readFiles={}),b in N.readFiles||(N.readFiles[b]=1)),K},close(b){if(N.isClosed(b))throw new N.ErrnoError(8);b.getdents&&(b.getdents=null);try{b.stream_ops.close&&b.stream_ops.close(b)}catch(x){throw x}finally{N.closeStream(b.fd)}b.fd=null},isClosed(b){return b.fd===null},llseek(b,x,u){if(N.isClosed(b))throw new N.ErrnoError(8);if(!b.seekable||!b.stream_ops.llseek)throw new N.ErrnoError(70);if(u!=0&&u!=1&&u!=2)throw new N.ErrnoError(28);return b.position=b.stream_ops.llseek(b,x,u),b.ungotten=[],b.position},read(b,x,u,w,M){if(w<0||M<0)throw new N.ErrnoError(28);if(N.isClosed(b))throw new N.ErrnoError(8);if((b.flags&2097155)===1)throw new N.ErrnoError(8);if(N.isDir(b.node.mode))throw new N.ErrnoError(31);if(!b.stream_ops.read)throw new N.ErrnoError(28);var L=typeof M<"u";if(!L)M=b.position;else if(!b.seekable)throw new N.ErrnoError(70);var H=b.stream_ops.read(b,x,u,w,M);return L||(b.position+=H),H},write(b,x,u,w,M,L){if(w<0||M<0)throw new N.ErrnoError(28);if(N.isClosed(b))throw new N.ErrnoError(8);if(!(b.flags&2097155))throw new N.ErrnoError(8);if(N.isDir(b.node.mode))throw new N.ErrnoError(31);if(!b.stream_ops.write)throw new N.ErrnoError(28);b.seekable&&b.flags&1024&&N.llseek(b,0,2);var H=typeof M<"u";if(!H)M=b.position;else if(!b.seekable)throw new N.ErrnoError(70);var K=b.stream_ops.write(b,x,u,w,M,L);return H||(b.position+=K),K},allocate(b,x,u){if(N.isClosed(b))throw new N.ErrnoError(8);if(x<0||u<=0)throw new N.ErrnoError(28);if(!(b.flags&2097155))throw new N.ErrnoError(8);if(!N.isFile(b.node.mode)&&!N.isDir(b.node.mode))throw new N.ErrnoError(43);if(!b.stream_ops.allocate)throw new N.ErrnoError(138);b.stream_ops.allocate(b,x,u)},mmap(b,x,u,w,M){if(w&2&&!(M&2)&&(b.flags&2097155)!==2)throw new N.ErrnoError(2);if((b.flags&2097155)===1)throw new N.ErrnoError(2);if(!b.stream_ops.mmap)throw new N.ErrnoError(43);return b.stream_ops.mmap(b,x,u,w,M)},msync(b,x,u,w,M){return b.stream_ops.msync?b.stream_ops.msync(b,x,u,w,M):0},munmap:b=>0,ioctl(b,x,u){if(!b.stream_ops.ioctl)throw new N.ErrnoError(59);return b.stream_ops.ioctl(b,x,u)},readFile(b,x={}){if(x.flags=x.flags||0,x.encoding=x.encoding||"binary",x.encoding!=="utf8"&&x.encoding!=="binary")throw new Error(`Invalid encoding type "${x.encoding}"`);var u,w=N.open(b,x.flags),M=N.stat(b),L=M.size,H=new Uint8Array(L);return N.read(w,H,0,L,0),x.encoding==="utf8"?u=ve(H,0):x.encoding==="binary"&&(u=H),N.close(w),u},writeFile(b,x,u={}){u.flags=u.flags||577;var w=N.open(b,u.flags,u.mode);if(typeof x=="string"){var M=new Uint8Array(Xe(x)+1),L=ft(x,M,0,M.length);N.write(w,M,0,L,void 0,u.canOwn)}else if(ArrayBuffer.isView(x))N.write(w,x,0,x.byteLength,void 0,u.canOwn);else throw new Error("Unsupported data type");N.close(w)},cwd:()=>N.currentPath,chdir(b){var x=N.lookupPath(b,{follow:!0});if(x.node===null)throw new N.ErrnoError(44);if(!N.isDir(x.node.mode))throw new N.ErrnoError(54);var u=N.nodePermissions(x.node,"x");if(u)throw new N.ErrnoError(u);N.currentPath=x.path},createDefaultDirectories(){N.mkdir("/tmp"),N.mkdir("/home"),N.mkdir("/home/web_user")},createDefaultDevices(){N.mkdir("/dev"),N.registerDevice(N.makedev(1,3),{read:()=>0,write:(w,M,L,H,K)=>H}),N.mkdev("/dev/null",N.makedev(1,3)),We.register(N.makedev(5,0),We.default_tty_ops),We.register(N.makedev(6,0),We.default_tty1_ops),N.mkdev("/dev/tty",N.makedev(5,0)),N.mkdev("/dev/tty1",N.makedev(6,0));var b=new Uint8Array(1024),x=0,u=()=>(x===0&&(x=be(b).byteLength),b[--x]);N.createDevice("/dev","random",u),N.createDevice("/dev","urandom",u),N.mkdir("/dev/shm"),N.mkdir("/dev/shm/tmp")},createSpecialDirectories(){N.mkdir("/proc");var b=N.mkdir("/proc/self");N.mkdir("/proc/self/fd"),N.mount({mount(){var x=N.createNode(b,"fd",16895,73);return x.node_ops={lookup(u,w){var M=+w,L=N.getStreamChecked(M),H={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>L.path}};return H.parent=H,H}},x}},{},"/proc/self/fd")},createStandardStreams(){a.stdin?N.createDevice("/dev","stdin",a.stdin):N.symlink("/dev/tty","/dev/stdin"),a.stdout?N.createDevice("/dev","stdout",null,a.stdout):N.symlink("/dev/tty","/dev/stdout"),a.stderr?N.createDevice("/dev","stderr",null,a.stderr):N.symlink("/dev/tty1","/dev/stderr"),N.open("/dev/stdin",0),N.open("/dev/stdout",1),N.open("/dev/stderr",1)},ensureErrnoError(){N.ErrnoError||(N.ErrnoError=function(x,u){this.name="ErrnoError",this.node=u,this.setErrno=function(w){this.errno=w},this.setErrno(x),this.message="FS error"},N.ErrnoError.prototype=new Error,N.ErrnoError.prototype.constructor=N.ErrnoError,[44].forEach(b=>{N.genericErrors[b]=new N.ErrnoError(b),N.genericErrors[b].stack="<generic error, no stack>"}))},staticInit(){N.ensureErrnoError(),N.nameTable=new Array(4096),N.mount(Le,{},"/"),N.createDefaultDirectories(),N.createDefaultDevices(),N.createSpecialDirectories(),N.filesystems={MEMFS:Le}},init(b,x,u){N.init.initialized=!0,N.ensureErrnoError(),a.stdin=b||a.stdin,a.stdout=x||a.stdout,a.stderr=u||a.stderr,N.createStandardStreams()},quit(){N.init.initialized=!1;for(var b=0;b<N.streams.length;b++){var x=N.streams[b];x&&N.close(x)}},findObject(b,x){var u=N.analyzePath(b,x);return u.exists?u.object:null},analyzePath(b,x){try{var u=N.lookupPath(b,{follow:!x});b=u.path}catch{}var w={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var u=N.lookupPath(b,{parent:!0});w.parentExists=!0,w.parentPath=u.path,w.parentObject=u.node,w.name=Ae.basename(b),u=N.lookupPath(b,{follow:!x}),w.exists=!0,w.path=u.path,w.object=u.node,w.name=u.node.name,w.isRoot=u.path==="/"}catch(M){w.error=M.errno}return w},createPath(b,x,u,w){b=typeof b=="string"?b:N.getPath(b);for(var M=x.split("/").reverse();M.length;){var L=M.pop();if(L){var H=Ae.join2(b,L);try{N.mkdir(H)}catch{}b=H}}return H},createFile(b,x,u,w,M){var L=Ae.join2(typeof b=="string"?b:N.getPath(b),x),H=xt(w,M);return N.create(L,H)},createDataFile(b,x,u,w,M,L){var H=x;b&&(b=typeof b=="string"?b:N.getPath(b),H=x?Ae.join2(b,x):b);var K=xt(w,M),oe=N.create(H,K);if(u){if(typeof u=="string"){for(var ge=new Array(u.length),Me=0,ze=u.length;Me<ze;++Me)ge[Me]=u.charCodeAt(Me);u=ge}N.chmod(oe,K|146);var Ue=N.open(oe,577);N.write(Ue,u,0,u.length,0,L),N.close(Ue),N.chmod(oe,K)}return oe},createDevice(b,x,u,w){var M=Ae.join2(typeof b=="string"?b:N.getPath(b),x),L=xt(!!u,!!w);N.createDevice.major||(N.createDevice.major=64);var H=N.makedev(N.createDevice.major++,0);return N.registerDevice(H,{open(K){K.seekable=!1},close(K){w&&w.buffer&&w.buffer.length&&w(10)},read(K,oe,ge,Me,ze){for(var Ue=0,Be=0;Be<Me;Be++){var Oe;try{Oe=u()}catch{throw new N.ErrnoError(29)}if(Oe===void 0&&Ue===0)throw new N.ErrnoError(6);if(Oe==null)break;Ue++,oe[ge+Be]=Oe}return Ue&&(K.node.timestamp=Date.now()),Ue},write(K,oe,ge,Me,ze){for(var Ue=0;Ue<Me;Ue++)try{w(oe[ge+Ue])}catch{throw new N.ErrnoError(29)}return Me&&(K.node.timestamp=Date.now()),Ue}}),N.mkdev(M,L,H)},forceLoadFile(b){if(b.isDevice||b.isFolder||b.link||b.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(r)try{b.contents=ne(r(b.url),!0),b.usedBytes=b.contents.length}catch{throw new N.ErrnoError(29)}else throw new Error("Cannot load without read() or XMLHttpRequest.")},createLazyFile(b,x,u,w,M){function L(){this.lengthKnown=!1,this.chunks=[]}if(L.prototype.get=function(Be){if(!(Be>this.length-1||Be<0)){var Oe=Be%this.chunkSize,Ne=Be/this.chunkSize|0;return this.getter(Ne)[Oe]}},L.prototype.setDataGetter=function(Be){this.getter=Be},L.prototype.cacheLength=function(){var Be=new XMLHttpRequest;if(Be.open("HEAD",u,!1),Be.send(null),!(Be.status>=200&&Be.status<300||Be.status===304))throw new Error("Couldn't load "+u+". Status: "+Be.status);var Oe=Number(Be.getResponseHeader("Content-length")),Ne,tt=(Ne=Be.getResponseHeader("Accept-Ranges"))&&Ne==="bytes",ct=(Ne=Be.getResponseHeader("Content-Encoding"))&&Ne==="gzip",ht=1024*1024;tt||(ht=Oe);var gt=(mt,Ct)=>{if(mt>Ct)throw new Error("invalid range ("+mt+", "+Ct+") or no bytes requested!");if(Ct>Oe-1)throw new Error("only "+Oe+" bytes available! programmer error!");var at=new XMLHttpRequest;if(at.open("GET",u,!1),Oe!==ht&&at.setRequestHeader("Range","bytes="+mt+"-"+Ct),at.responseType="arraybuffer",at.overrideMimeType&&at.overrideMimeType("text/plain; charset=x-user-defined"),at.send(null),!(at.status>=200&&at.status<300||at.status===304))throw new Error("Couldn't load "+u+". Status: "+at.status);return at.response!==void 0?new Uint8Array(at.response||[]):ne(at.responseText||"",!0)},ut=this;ut.setDataGetter(mt=>{var Ct=mt*ht,at=(mt+1)*ht-1;if(at=Math.min(at,Oe-1),typeof ut.chunks[mt]>"u"&&(ut.chunks[mt]=gt(Ct,at)),typeof ut.chunks[mt]>"u")throw new Error("doXHR failed!");return ut.chunks[mt]}),(ct||!Oe)&&(ht=Oe=1,Oe=this.getter(0).length,ht=Oe,i("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=Oe,this._chunkSize=ht,this.lengthKnown=!0},typeof XMLHttpRequest<"u"){throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var H,K}else var K={isDevice:!1,url:u};var oe=N.createFile(b,x,K,w,M);K.contents?oe.contents=K.contents:K.url&&(oe.contents=null,oe.url=K.url),Object.defineProperties(oe,{usedBytes:{get:function(){return this.contents.length}}});var ge={},Me=Object.keys(oe.stream_ops);Me.forEach(Ue=>{var Be=oe.stream_ops[Ue];ge[Ue]=function(){return N.forceLoadFile(oe),Be.apply(null,arguments)}});function ze(Ue,Be,Oe,Ne,tt){var ct=Ue.node.contents;if(tt>=ct.length)return 0;var ht=Math.min(ct.length-tt,Ne);if(ct.slice)for(var gt=0;gt<ht;gt++)Be[Oe+gt]=ct[tt+gt];else for(var gt=0;gt<ht;gt++)Be[Oe+gt]=ct.get(tt+gt);return ht}return ge.read=(Ue,Be,Oe,Ne,tt)=>(N.forceLoadFile(oe),ze(Ue,Be,Oe,Ne,tt)),ge.mmap=(Ue,Be,Oe,Ne,tt)=>{N.forceLoadFile(oe);var ct=et();if(!ct)throw new N.ErrnoError(48);return ze(Ue,g,ct,Be,Oe),{ptr:ct,allocated:!0}},oe.stream_ops=ge,oe}},dt={DEFAULT_POLLMASK:5,calculateAt(b,x,u){if(Ae.isAbs(x))return x;var w;if(b===-100)w=N.cwd();else{var M=dt.getStreamFromFD(b);w=M.path}if(x.length==0){if(!u)throw new N.ErrnoError(44);return w}return Ae.join2(w,x)},doStat(b,x,u){try{var w=b(x)}catch(K){if(K&&K.node&&Ae.normalize(x)!==Ae.normalize(N.getPath(K.node)))return-54;throw K}m[u>>2]=w.dev,m[u+4>>2]=w.mode,p[u+8>>2]=w.nlink,m[u+12>>2]=w.uid,m[u+16>>2]=w.gid,m[u+20>>2]=w.rdev,Y=[w.size>>>0,(Q=w.size,+Math.abs(Q)>=1?Q>0?+Math.floor(Q/4294967296)>>>0:~~+Math.ceil((Q-+(~~Q>>>0))/4294967296)>>>0:0)],m[u+24>>2]=Y[0],m[u+28>>2]=Y[1],m[u+32>>2]=4096,m[u+36>>2]=w.blocks;var M=w.atime.getTime(),L=w.mtime.getTime(),H=w.ctime.getTime();return Y=[Math.floor(M/1e3)>>>0,(Q=Math.floor(M/1e3),+Math.abs(Q)>=1?Q>0?+Math.floor(Q/4294967296)>>>0:~~+Math.ceil((Q-+(~~Q>>>0))/4294967296)>>>0:0)],m[u+40>>2]=Y[0],m[u+44>>2]=Y[1],p[u+48>>2]=M%1e3*1e3,Y=[Math.floor(L/1e3)>>>0,(Q=Math.floor(L/1e3),+Math.abs(Q)>=1?Q>0?+Math.floor(Q/4294967296)>>>0:~~+Math.ceil((Q-+(~~Q>>>0))/4294967296)>>>0:0)],m[u+56>>2]=Y[0],m[u+60>>2]=Y[1],p[u+64>>2]=L%1e3*1e3,Y=[Math.floor(H/1e3)>>>0,(Q=Math.floor(H/1e3),+Math.abs(Q)>=1?Q>0?+Math.floor(Q/4294967296)>>>0:~~+Math.ceil((Q-+(~~Q>>>0))/4294967296)>>>0:0)],m[u+72>>2]=Y[0],m[u+76>>2]=Y[1],p[u+80>>2]=H%1e3*1e3,Y=[w.ino>>>0,(Q=w.ino,+Math.abs(Q)>=1?Q>0?+Math.floor(Q/4294967296)>>>0:~~+Math.ceil((Q-+(~~Q>>>0))/4294967296)>>>0:0)],m[u+88>>2]=Y[0],m[u+92>>2]=Y[1],0},doMsync(b,x,u,w,M){if(!N.isFile(x.node.mode))throw new N.ErrnoError(43);if(w&2)return 0;var L=E.slice(b,b+u);N.msync(x,L,M,u,w)},varargs:void 0,get(){var b=m[dt.varargs>>2];return dt.varargs+=4,b},getp(){return dt.get()},getStr(b){var x=Se(b);return x},getStreamFromFD(b){var x=N.getStreamChecked(b);return x}};function W(b,x){try{var u=dt.getStreamFromFD(b);return dt.doStat(N.stat,u.path,x)}catch(w){if(typeof N>"u"||w.name!=="ErrnoError")throw w;return-w.errno}}function lt(b,x,u,w){try{x=dt.getStr(x);var M=w&256,L=w&4096;return w=w&-6401,x=dt.calculateAt(b,x,L),dt.doStat(M?N.lstat:N.stat,x,u)}catch(H){if(typeof N>"u"||H.name!=="ErrnoError")throw H;return-H.errno}}function U(b,x,u,w){dt.varargs=w;try{x=dt.getStr(x),x=dt.calculateAt(b,x);var M=w?dt.get():0;return N.open(x,u,M).fd}catch(L){if(typeof N>"u"||L.name!=="ErrnoError")throw L;return-L.errno}}function st(b,x){try{return b=dt.getStr(b),dt.doStat(N.stat,b,x)}catch(u){if(typeof N>"u"||u.name!=="ErrnoError")throw u;return-u.errno}}var br=(b,x,u)=>E.copyWithin(b,x,x+u),Er=b=>{Fe("OOM")},Sr=b=>{E.length,Er()},Ar=b=>{$=b,G()||(a.onExit&&a.onExit(b),C=!0),s(b,new pe(b))},zt=(b,x)=>{$=b,Ar(b)},lr=zt;function Ht(b){try{var x=dt.getStreamFromFD(b);return N.close(x),0}catch(u){if(typeof N>"u"||u.name!=="ErrnoError")throw u;return u.errno}}var Cr=(b,x,u,w)=>{for(var M=0,L=0;L<u;L++){var H=p[x>>2],K=p[x+4>>2];x+=8;var oe=N.read(b,g,H,K,w);if(oe<0)return-1;if(M+=oe,oe<K)break;typeof w<"u"&&(w+=oe)}return M};function kr(b,x,u,w){try{var M=dt.getStreamFromFD(b),L=Cr(M,x,u);return p[w>>2]=L,0}catch(H){if(typeof N>"u"||H.name!=="ErrnoError")throw H;return H.errno}}var Rr=(b,x)=>x+2097152>>>0<4194305-!!b?(b>>>0)+x*4294967296:NaN;function Fr(b,x,u,w,M){var L=Rr(x,u);try{if(isNaN(L))return 61;var H=dt.getStreamFromFD(b);return N.llseek(H,L,w),Y=[H.position>>>0,(Q=H.position,+Math.abs(Q)>=1?Q>0?+Math.floor(Q/4294967296)>>>0:~~+Math.ceil((Q-+(~~Q>>>0))/4294967296)>>>0:0)],m[M>>2]=Y[0],m[M+4>>2]=Y[1],H.getdents&&L===0&&w===0&&(H.getdents=null),0}catch(K){if(typeof N>"u"||K.name!=="ErrnoError")throw K;return K.errno}}var Mr=(b,x,u,w)=>{for(var M=0,L=0;L<u;L++){var H=p[x>>2],K=p[x+4>>2];x+=8;var oe=N.write(b,g,H,K,w);if(oe<0)return-1;M+=oe,typeof w<"u"&&(w+=oe)}return M};function Dr(b,x,u,w){try{var M=dt.getStreamFromFD(b),L=Mr(M,x,u);return p[w>>2]=L,0}catch(H){if(typeof N>"u"||H.name!=="ErrnoError")throw H;return H.errno}}var cr=b=>{if(b instanceof pe||b=="unwind")return $;s(1,b)},ur=(b,x,u)=>ft(b,E,x,u),Tr=b=>{var x=Xe(b)+1,u=Ot(x);return ur(b,u,x),u},hr=function(b,x,u,w){b||(b=this),this.parent=b,this.mount=b.mount,this.mounted=null,this.id=N.nextInode++,this.name=x,this.mode=u,this.node_ops={},this.stream_ops={},this.rdev=w},Gt=365,Ut=146;Object.defineProperties(hr.prototype,{read:{get:function(){return(this.mode&Gt)===Gt},set:function(b){b?this.mode|=Gt:this.mode&=~Gt}},write:{get:function(){return(this.mode&Ut)===Ut},set:function(b){b?this.mode|=Ut:this.mode&=~Ut}},isFolder:{get:function(){return N.isDir(this.mode)}},isDevice:{get:function(){return N.isChrdev(this.mode)}}}),N.FSNode=hr,N.createPreloadedFile=He,N.staticInit();var qt={a:$e,i:W,g:lt,f:U,h:st,j:br,l:Sr,c:lr,d:Ht,e:kr,k:Fr,b:Dr},Lt=te(),Bt=a._main=(b,x)=>(Bt=a._main=Lt.o)(b,x),Ot=b=>(Ot=Lt.q)(b);a.FS=N;var Vt;he=function b(){Vt||Qt(),Vt||(he=b)};function rr(b=[]){var x=Bt;b.unshift(h);var u=b.length,w=Ot((u+1)*4),M=w;b.forEach(H=>{p[M>>2]=Tr(H),M+=4}),p[M>>2]=0;try{var L=x(u,w);return zt(L,!0),L}catch(H){return cr(H)}}function Qt(b=A){if(fe>0||(Z(),fe>0))return;function x(){Vt||(Vt=!0,a.calledRun=!0,!C&&(ae(),re(),D(a),a.onRuntimeInitialized&&a.onRuntimeInitialized(),fr&&rr(b),ce()))}a.setStatus?(a.setStatus("Running..."),setTimeout(function(){setTimeout(function(){a.setStatus("")},1),x()},1)):x()}if(a.preInit)for(typeof a.preInit=="function"&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.pop()();var fr=!0;return a.noInitialRun&&(fr=!1),Qt(),X.ready}})(),en=!1,sr=!1,an,mn,Pr,pn=[],Or=[],Ir=[],gi=[],mi=/([\w\.]+)[\w\.\:~]*\(([0-9]+)\)/gi,tn="";function Pt(q){/^[^:\s]+:/.test(q)?(Nr(),tn=q.trim()):tn+=" "+q.trim()}function Nr(){pi(tn),tn=""}function pi(q){if(Pr&&Pr(q),q.startsWith("error: ")||q.startsWith("ERROR: ")||q.startsWith("warning: ")){var X="error";q.startsWith("warning: ")&&(X="warning");var a=q.matchAll(mi);for(var D of a){var z=parseInt(D[2]);pn.push([X,D[1],z,q])}}}function vi(q){Pr=q}function wi(q){mn=q,en?sr=!0:(en=!0,vn())}function Nn(){return pn}function _i(){return Or}function bn(){return Ir}function vn(){typeof an<"u"&&clearTimeout(an),an=setTimeout(yi,500)}function yi(){Pr&&Pr(null),pn=[],Or=[],Ir=[];var q=[];for(const X of Object.keys(Jt()))X.endsWith(".asm")&&q.push(X);Wn(q,{})}function Wn(q,X){var a=q.pop();Pt("Running: rgbasm "+a+" -o "+a+".o -Wall"),hi({arguments:[a,"-o","output.o","-Wall","-l"],preRun:function(D){var z=D.FS;for(const[k,A]of Object.entries(Jt()))z.writeFile(k,A)},print:Pt,printErr:Pt}).then(function(D){if(Nr(),sr){_r();return}var z=D.FS;try{var k=z.readFile("output.o")}catch{_r();return}X[a]=k,q.length>0?Wn(q,X):$i(X)})}function $i(q){var X=["-o","output.gb","--map","output.map"].concat(gi);for(var a in q)X.push(a+".o");Pt("Running: rgblink "+X.join(" ")),fi({arguments:X,preRun:function(D){var z=D.FS;for(var k in q)z.writeFile(k+".o",q[k])},print:Pt,printErr:Pt}).then(function(D){if(Nr(),sr){_r();return}var z=D.FS;try{var k=z.readFile("output.gb")}catch{_r();return}try{var A=z.readFile("output.map",{encoding:"utf8"})}catch{_r();return}bi(k,A)})}function bi(q,X){Pt("Running: rgbfix -v output.gb -p 0xff"),di({arguments:["-v","output.gb","-p","0xff"],preRun:function(a){var D=a.FS;D.writeFile("output.gb",q)},print:Pt,printErr:Pt}).then(function(a){Nr();var D=a.FS;try{var z=D.readFile("output.gb")}catch{_r();return}Ei(z,X)})}function _r(){Pt("Build failed"),sr?(sr=!1,vn()):(en=!1,mn())}function Ei(q,X){if(sr)sr=!1,vn();else{en=!1;var a=256,D={},z=/^\s*\$([0-9a-f]+) = ([\w\.]+)/,k=/^\s*(\w+) bank #(\d+)/,A=/^\s*SECTION: \$([0-9a-f]+)-\$([0-9a-f]+)/,h=/^\s*SLACK: \$([0-9a-f]+) bytes/,s="",l=0;for(var t of X.split(`
`)){var e;if(e=z.exec(t)){var r=parseInt(e[1],16),n=e[2];if(n.startsWith("__SEC_")){n=n.substr(6);var i=n.substr(n.indexOf("_")+1);i=i.substr(i.indexOf("_")+1);var o=parseInt(n.split("_")[1],16);r=r&16383|l<<14,D[r]=[i,o]}else n=="emustart"||n=="emuStart"||n=="emu_start"?a=r:r<32768?(r=r&16383|l<<14,Or[r]=n):Ir[r]=n}else if(e=A.exec(t)){var d=parseInt(e[1],16),v=parseInt(e[2],16)+1;d<32768?(d=d&16383|l<<14,v=v&16383|l<<14,Or[d]=null,Or[v]=null):(Ir[d]=null,Ir[v]=null)}else if(e=k.exec(t))s=e[1],l=parseInt(e[2]);else if(e=h.exec(t)){var _=parseInt(e[1],16),C=16384;s.startsWith("WRAM")?C=4096:s.startsWith("HRAM")&&(C=127),Pt("Space left: "+s+"["+l+"]: "+_+"  ("+(_/C*100).toFixed(1)+"%)")}}Pt("Build done"),Nr(),mn(q,a,D)}}var Si=(()=>{var q=import.meta.url;return function(X={}){var a=X,D,z;a.ready=new Promise((ne,Ee)=>{D=ne,z=Ee});var k=Object.assign({},a),A=(ne,Ee)=>{throw Ee},h=!0,s="";function l(ne){return a.locateFile?a.locateFile(ne,s):s+ne}typeof document<"u"&&document.currentScript&&(s=document.currentScript.src),q&&(s=q),s.indexOf("blob:")!==0?s=s.substr(0,s.replace(/[?#].*/,"").lastIndexOf("/")+1):s="";var t=a.print||console.log.bind(console),e=a.printErr||console.error.bind(console);Object.assign(a,k),k=null,a.arguments&&a.arguments,a.thisProgram&&a.thisProgram,a.quit&&(A=a.quit);var r;a.wasmBinary&&(r=a.wasmBinary);var n=a.noExitRuntime||!0;typeof WebAssembly!="object"&&ce("no native wasm support detected");var i,o=!1,d,v,_,C;function $(){var ne=i.buffer;a.HEAP8=new Int8Array(ne),a.HEAP16=new Int16Array(ne),a.HEAPU8=d=new Uint8Array(ne),a.HEAPU16=new Uint16Array(ne),a.HEAP32=v=new Int32Array(ne),a.HEAPU32=_=new Uint32Array(ne),a.HEAPF32=new Float32Array(ne),a.HEAPF64=C=new Float64Array(ne)}var c=[],g=[],E=[],m=0;function p(){return n||m>0}function f(){if(a.preRun)for(typeof a.preRun=="function"&&(a.preRun=[a.preRun]);a.preRun.length;)I(a.preRun.shift());Pe(c)}function F(){Pe(g)}function R(){if(a.postRun)for(typeof a.postRun=="function"&&(a.postRun=[a.postRun]);a.postRun.length;)P(a.postRun.shift());Pe(E)}function I(ne){c.unshift(ne)}function S(ne){g.unshift(ne)}function P(ne){E.unshift(ne)}var G=0,Z=null;function ae(ne){G++,a.monitorRunDependencies&&a.monitorRunDependencies(G)}function re(ne){if(G--,a.monitorRunDependencies&&a.monitorRunDependencies(G),G==0&&Z){var Ee=Z;Z=null,Ee()}}function ce(ne){a.onAbort&&a.onAbort(ne),ne="Aborted("+ne+")",e(ne),o=!0,ne+=". Build with -sASSERTIONS for more info.";var Ee=new WebAssembly.RuntimeError(ne);throw z(Ee),Ee}var j="data:application/octet-stream;base64,";function ee(ne){return ne.startsWith(j)}var ie;a.locateFile?(ie="binjgb.wasm",ee(ie)||(ie=l(ie))):ie=new URL("/rgbds-live/assets/binjgb-2522a0cd.wasm",self.location).href;function fe(ne){if(ne==ie&&r)return new Uint8Array(r);throw"both async and sync fetching of the wasm failed"}function he(ne){return!r&&h&&typeof fetch=="function"?fetch(ne,{credentials:"same-origin"}).then(Ee=>{if(!Ee.ok)throw"failed to load wasm binary file at '"+ne+"'";return Ee.arrayBuffer()}).catch(()=>fe(ne)):Promise.resolve().then(()=>fe(ne))}function ye(ne,Ee,We){return he(ne).then(et=>WebAssembly.instantiate(et,Ee)).then(et=>et).then(We,et=>{e(`failed to asynchronously prepare wasm: ${et}`),ce(et)})}function Te(ne,Ee,We,et){return!ne&&typeof WebAssembly.instantiateStreaming=="function"&&!ee(Ee)&&typeof fetch=="function"?fetch(Ee,{credentials:"same-origin"}).then(Le=>{var vt=WebAssembly.instantiateStreaming(Le,We);return vt.then(et,function(Ie){return e(`wasm streaming compile failed: ${Ie}`),e("falling back to ArrayBuffer instantiation"),ye(Ee,We,et)})}):ye(Ee,We,et)}function ke(){var ne={a:Qe};function Ee(et,Le){var vt=et.exports;return Ce=vt,i=Ce.h,$(),Ce.H,S(Ce.i),re(),vt}ae();function We(et){Ee(et.instance)}if(a.instantiateWasm)try{return a.instantiateWasm(ne,Ee)}catch(et){e(`Module.instantiateWasm callback failed with error: ${et}`),z(et)}return Te(r,ie,ne,We).catch(z),{}}var Fe={13556:ne=>{emulator.serialCallback(ne)}};function De(ne){this.name="ExitStatus",this.message=`Program terminated with exit(${ne})`,this.status=ne}var Pe=ne=>{for(;ne.length>0;)ne.shift()(a)},Ye=[],qe=(ne,Ee)=>{Ye.length=0;for(var We;We=d[ne++];)Ee+=We!=105&&Ee%8?4:0,Ye.push(We==105?v[Ee>>2]:C[Ee>>3]),Ee+=We==105?4:8;return Ye},B=(ne,Ee,We)=>{var et=qe(Ee,We);return Fe[ne].apply(null,et)},_e=(ne,Ee,We)=>B(ne,Ee,We),me=(ne,Ee,We)=>d.copyWithin(ne,Ee,Ee+We),te=ne=>{ce("OOM")},Q=ne=>{d.length,te()},Y=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,pe=(ne,Ee,We)=>{for(var et=Ee+We,Le=Ee;ne[Le]&&!(Le>=et);)++Le;if(Le-Ee>16&&ne.buffer&&Y)return Y.decode(ne.subarray(Ee,Le));for(var vt="";Ee<Le;){var Ie=ne[Ee++];if(!(Ie&128)){vt+=String.fromCharCode(Ie);continue}var At=ne[Ee++]&63;if((Ie&224)==192){vt+=String.fromCharCode((Ie&31)<<6|At);continue}var He=ne[Ee++]&63;if((Ie&240)==224?Ie=(Ie&15)<<12|At<<6|He:Ie=(Ie&7)<<18|At<<12|He<<6|ne[Ee++]&63,Ie<65536)vt+=String.fromCharCode(Ie);else{var Rt=Ie-65536;vt+=String.fromCharCode(55296|Rt>>10,56320|Rt&1023)}}return vt},le=ne=>{p()||(a.onExit&&a.onExit(ne),o=!0),A(ne,new De(ne))},se=(ne,Ee)=>{le(ne)},ve=se,Se=ne=>52;function $e(ne,Ee,We,et,Le){return 70}var Ae=[null,[],[]],Ge=(ne,Ee)=>{var We=Ae[ne];Ee===0||Ee===10?((ne===1?t:e)(pe(We,0)),We.length=0):We.push(Ee)},be=(ne,Ee,We,et)=>{for(var Le=0,vt=0;vt<We;vt++){var Ie=_[Ee>>2],At=_[Ee+4>>2];Ee+=8;for(var He=0;He<At;He++)Ge(ne,d[Ie+He]);Le+=At}return _[et>>2]=Le,0},Qe={g:_e,f:me,d:Q,b:ve,e:Se,c:$e,a:be},Ce=ke();a._malloc=ne=>(a._malloc=Ce.j)(ne),a._file_data_delete=ne=>(a._file_data_delete=Ce.k)(ne),a._free=ne=>(a._free=Ce.l)(ne),a._emulator_set_builtin_palette=(ne,Ee)=>(a._emulator_set_builtin_palette=Ce.m)(ne,Ee),a._emulator_was_ext_ram_updated=ne=>(a._emulator_was_ext_ram_updated=Ce.n)(ne),a._emulator_read_ext_ram=(ne,Ee)=>(a._emulator_read_ext_ram=Ce.o)(ne,Ee),a._emulator_write_ext_ram=(ne,Ee)=>(a._emulator_write_ext_ram=Ce.p)(ne,Ee),a._emulator_delete=ne=>(a._emulator_delete=Ce.q)(ne),a._emulator_get_PC=ne=>(a._emulator_get_PC=Ce.r)(ne),a._emulator_get_A=ne=>(a._emulator_get_A=Ce.s)(ne),a._emulator_get_BC=ne=>(a._emulator_get_BC=Ce.t)(ne),a._emulator_get_DE=ne=>(a._emulator_get_DE=Ce.u)(ne),a._emulator_get_HL=ne=>(a._emulator_get_HL=Ce.v)(ne),a._emulator_get_F=ne=>(a._emulator_get_F=Ce.w)(ne),a._emulator_get_SP=ne=>(a._emulator_get_SP=Ce.x)(ne),a._emulator_set_PC=(ne,Ee)=>(a._emulator_set_PC=Ce.y)(ne,Ee),a._emulator_get_wram_ptr=ne=>(a._emulator_get_wram_ptr=Ce.z)(ne),a._emulator_get_hram_ptr=ne=>(a._emulator_get_hram_ptr=Ce.A)(ne),a._emulator_read_mem=(ne,Ee)=>(a._emulator_read_mem=Ce.B)(ne,Ee),a._emulator_write_mem=(ne,Ee,We)=>(a._emulator_write_mem=Ce.C)(ne,Ee,We),a._emulator_set_breakpoint=(ne,Ee)=>(a._emulator_set_breakpoint=Ce.D)(ne,Ee),a._emulator_clear_breakpoints=ne=>(a._emulator_clear_breakpoints=Ce.E)(ne),a._emulator_render_vram=(ne,Ee)=>(a._emulator_render_vram=Ce.F)(ne,Ee),a._emulator_render_background=(ne,Ee,We)=>(a._emulator_render_background=Ce.G)(ne,Ee,We),a._joypad_new=()=>(a._joypad_new=Ce.I)(),a._joypad_delete=ne=>(a._joypad_delete=Ce.J)(ne),a._rewind_append=(ne,Ee)=>(a._rewind_append=Ce.K)(ne,Ee),a._rewind_delete=ne=>(a._rewind_delete=Ce.L)(ne),a._emulator_new_simple=(ne,Ee,We,et,Le)=>(a._emulator_new_simple=Ce.M)(ne,Ee,We,et,Le),a._emulator_get_ticks_f64=ne=>(a._emulator_get_ticks_f64=Ce.N)(ne),a._emulator_run_until_f64=(ne,Ee)=>(a._emulator_run_until_f64=Ce.O)(ne,Ee),a._rewind_get_newest_ticks_f64=ne=>(a._rewind_get_newest_ticks_f64=Ce.P)(ne),a._rewind_get_oldest_ticks_f64=ne=>(a._rewind_get_oldest_ticks_f64=Ce.Q)(ne),a._emulator_set_default_joypad_callback=(ne,Ee)=>(a._emulator_set_default_joypad_callback=Ce.R)(ne,Ee),a._emulator_set_bw_palette_simple=(ne,Ee,We,et,Le,vt)=>(a._emulator_set_bw_palette_simple=Ce.S)(ne,Ee,We,et,Le,vt),a._rewind_new_simple=(ne,Ee,We)=>(a._rewind_new_simple=Ce.T)(ne,Ee,We),a._rewind_begin=(ne,Ee,We)=>(a._rewind_begin=Ce.U)(ne,Ee,We),a._emulator_set_rewind_joypad_callback=ne=>(a._emulator_set_rewind_joypad_callback=Ce.V)(ne),a._rewind_to_ticks_wrapper=(ne,Ee)=>(a._rewind_to_ticks_wrapper=Ce.W)(ne,Ee),a._rewind_end=ne=>(a._rewind_end=Ce.X)(ne),a._set_joyp_up=(ne,Ee)=>(a._set_joyp_up=Ce.Y)(ne,Ee),a._set_joyp_down=(ne,Ee)=>(a._set_joyp_down=Ce.Z)(ne,Ee),a._set_joyp_left=(ne,Ee)=>(a._set_joyp_left=Ce._)(ne,Ee),a._set_joyp_right=(ne,Ee)=>(a._set_joyp_right=Ce.$)(ne,Ee),a._set_joyp_B=(ne,Ee)=>(a._set_joyp_B=Ce.aa)(ne,Ee),a._set_joyp_A=(ne,Ee)=>(a._set_joyp_A=Ce.ba)(ne,Ee),a._set_joyp_start=(ne,Ee)=>(a._set_joyp_start=Ce.ca)(ne,Ee),a._set_joyp_select=(ne,Ee)=>(a._set_joyp_select=Ce.da)(ne,Ee),a._get_frame_buffer_ptr=ne=>(a._get_frame_buffer_ptr=Ce.ea)(ne),a._get_frame_buffer_size=ne=>(a._get_frame_buffer_size=Ce.fa)(ne),a._get_sgb_frame_buffer_ptr=ne=>(a._get_sgb_frame_buffer_ptr=Ce.ga)(ne),a._get_sgb_frame_buffer_size=ne=>(a._get_sgb_frame_buffer_size=Ce.ha)(ne),a._get_audio_buffer_ptr=ne=>(a._get_audio_buffer_ptr=Ce.ia)(ne),a._get_audio_buffer_capacity=ne=>(a._get_audio_buffer_capacity=Ce.ja)(ne),a._ext_ram_file_data_new=ne=>(a._ext_ram_file_data_new=Ce.ka)(ne),a._get_file_data_ptr=ne=>(a._get_file_data_ptr=Ce.la)(ne),a._get_file_data_size=ne=>(a._get_file_data_size=Ce.ma)(ne),a._set_log_apu_writes=(ne,Ee)=>(a._set_log_apu_writes=Ce.na)(ne,Ee),a._get_apu_log_data_size=ne=>(a._get_apu_log_data_size=Ce.oa)(ne),a._get_apu_log_data_ptr=ne=>(a._get_apu_log_data_ptr=Ce.pa)(ne),a._reset_apu_log=ne=>(a._reset_apu_log=Ce.qa)(ne);var Xe;Z=function ne(){Xe||ft(),Xe||(Z=ne)};function ft(){if(G>0||(f(),G>0))return;function ne(){Xe||(Xe=!0,a.calledRun=!0,!o&&(F(),D(a),a.onRuntimeInitialized&&a.onRuntimeInitialized(),R()))}a.setStatus?(a.setStatus("Running..."),setTimeout(function(){setTimeout(function(){a.setStatus("")},1),ne()},1)):ne()}if(a.preInit)for(typeof a.preInit=="function"&&(a.preInit=[a.preInit]);a.preInit.length>0;)a.preInit.pop()();return ft(),X.ready}})();const Ze=await Si();var rt,dr,Qr=0,Ur,un,Mt,vr,Yr=2048;function Ai(q,X){Tt()&&zn(),typeof Mt>"u"&&(Mt=new AudioContext);var a=(X.length-1|16383)+1;a<32768&&(a=32768),Qr<a&&(typeof dr<"u"&&Ze._free(dr),dr=Ze._malloc(a),Qr=a);for(var D=0;D<Qr;D++)Ze.HEAP8[dr+D]=0;for(var D=0;D<X.length;D++)Ze.HEAP8[dr+D]=X[D];rt=Ze._emulator_new_simple(dr,Qr,Mt.sampleRate,Yr),Ze._emulator_set_bw_palette_simple(rt,0,4290965700,4289247578,4285423646,4278197037),Ze._emulator_set_bw_palette_simple(rt,1,4290965700,4289247578,4285423646,4278197037),Ze._emulator_set_bw_palette_simple(rt,2,4290965700,4289247578,4285423646,4278197037),Ze._emulator_set_default_joypad_callback(rt,0),q&&(Ur=q.getContext("2d"),un=Ur.createImageData(q.width,q.height)),Mt.resume(),vr=Mt.currentTime}function zn(){Tt()&&(Ze._emulator_delete(rt),rt=void 0)}function Tt(){return typeof rt<"u"}function Ci(q){if(Tt()){var X=Ze._emulator_get_ticks_f64(rt);for(q=="single"?X+=1:q=="frame"&&(X+=70224);;){var a=Ze._emulator_run_until_f64(rt,X);if(a&2&&zi(),a&8||a&16)return!0;if(a!=2&&q!="run")return!1;if(q=="run"&&a&4)if(vr<Mt.currentTime+.1)X+=70224;else return!1}}}function ki(){if(Tt()){var q=new Uint8Array(Ze.HEAP8.buffer,Ze._get_frame_buffer_ptr(rt),Ze._get_frame_buffer_size(rt));un.data.set(q),Ur.putImageData(un,0,0)}}function Ri(q){if(Tt()){var X=q.getContext("2d"),a=Ur.createImageData(256,256),D=Ze._malloc(4*256*256);Ze._emulator_render_vram(rt,D);var z=new Uint8Array(Ze.HEAP8.buffer,D,4*256*256);a.data.set(z),X.putImageData(a,0,0),Ze._free(D)}}function En(q,X){if(Tt()){var a=q.getContext("2d"),D=Ur.createImageData(256,256),z=Ze._malloc(4*256*256);Ze._emulator_render_background(rt,z,X);var k=new Uint8Array(Ze.HEAP8.buffer,z,4*256*256);D.data.set(k),a.putImageData(D,0,0),Ze._free(z)}}function Fi(){if(Tt()){var q=Ze._emulator_get_wram_ptr(rt);return new Uint8Array(Ze.HEAP8.buffer,q,32768)}}function Mi(){if(Tt()){var q=Ze._emulator_get_hram_ptr(rt);return new Uint8Array(Ze.HEAP8.buffer,q,127)}}function Di(){return Ze._emulator_get_PC(rt)}function Ti(q){Ze._emulator_set_PC(rt,q)}function xi(){return Ze._emulator_get_SP(rt)}function Li(){return Ze._emulator_get_A(rt)}function Bi(){return Ze._emulator_get_BC(rt)}function Oi(){return Ze._emulator_get_DE(rt)}function Ii(){return Ze._emulator_get_HL(rt)}function Pi(){var q=Ze._emulator_get_F(rt),X="";return q&128&&(X+="Z "),q&16&&(X+="C "),q&32&&(X+="H "),q&64&&(X+="N "),X}function Ui(q){return Tt()?Ze._emulator_read_mem(rt,q):255}function Ni(q){Tt()&&Ze._emulator_set_breakpoint(rt,q)}function Wi(){Tt()&&Ze._emulator_clear_breakpoints(rt)}function er(q,X){Tt()&&(q=="right"&&Ze._set_joyp_right(rt,X),q=="left"&&Ze._set_joyp_left(rt,X),q=="up"&&Ze._set_joyp_up(rt,X),q=="down"&&Ze._set_joyp_down(rt,X),q=="a"&&Ze._set_joyp_A(rt,X),q=="b"&&Ze._set_joyp_B(rt,X),q=="select"&&Ze._set_joyp_select(rt,X),q=="start"&&Ze._set_joyp_start(rt,X))}function zi(){vr<Mt.currentTime&&(vr=Mt.currentTime);var q=new Uint8Array(Ze.HEAP8.buffer,Ze._get_audio_buffer_ptr(rt),Ze._get_audio_buffer_capacity(rt));const X=.5,a=Mt.createBuffer(2,Yr,Mt.sampleRate),D=a.getChannelData(0),z=a.getChannelData(1);for(let h=0;h<Yr;h++)D[h]=q[2*h]*X/255,z[h]=q[2*h+1]*X/255;const k=Mt.createBufferSource();k.buffer=a,k.connect(Mt.destination),k.start(vr);const A=Yr/Mt.sampleRate;vr+=A}var Hn={exports:{}};(function(q,X){(function(){var a="ace",D=function(){return this}();!D&&typeof window<"u"&&(D=window);var z=function(t,e,r){if(typeof t!="string"){z.original?z.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace());return}arguments.length==2&&(r=e),z.modules[t]||(z.payloads[t]=r,z.modules[t]=null)};z.modules={},z.payloads={};var k=function(t,e,r){if(typeof e=="string"){var n=s(t,e);if(n!=null)return r&&r(),n}else if(Object.prototype.toString.call(e)==="[object Array]"){for(var i=[],o=0,d=e.length;o<d;++o){var v=s(t,e[o]);if(v==null&&A.original)return;i.push(v)}return r&&r.apply(null,i)||!0}},A=function(t,e){var r=k("",t,e);return r==null&&A.original?A.original.apply(this,arguments):r},h=function(t,e){if(e.indexOf("!")!==-1){var r=e.split("!");return h(t,r[0])+"!"+h(t,r[1])}if(e.charAt(0)=="."){var n=t.split("/").slice(0,-1).join("/");for(e=n+"/"+e;e.indexOf(".")!==-1&&i!=e;){var i=e;e=e.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return e},s=function(t,e){e=h(t,e);var r=z.modules[e];if(!r){if(r=z.payloads[e],typeof r=="function"){var n={},i={id:e,uri:"",exports:n,packaged:!0},o=function(v,_){return k(e,v,_)},d=r(o,n,i);n=d||i.exports,z.modules[e]=n,delete z.payloads[e]}r=z.modules[e]=n||r}return r};function l(t){var e=D;t&&(D[t]||(D[t]={}),e=D[t]),(!e.define||!e.define.packaged)&&(z.original=e.define,e.define=z,e.define.packaged=!0),(!e.require||!e.require.packaged)&&(A.original=e.require,e.require=A,e.require.packaged=!0)}l(a)})(),ace.define("ace/lib/fixoldbrowsers",["require","exports","module"],function(a,D,z){typeof Element<"u"&&!Element.prototype.remove&&Object.defineProperty(Element.prototype,"remove",{enumerable:!1,writable:!0,configurable:!0,value:function(){this.parentNode&&this.parentNode.removeChild(this)}})}),ace.define("ace/lib/useragent",["require","exports","module"],function(a,D,z){D.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},D.getOS=function(){return D.isMac?D.OS.MAC:D.isLinux?D.OS.LINUX:D.OS.WINDOWS};var k=typeof navigator=="object"?navigator:{},A=(/mac|win|linux/i.exec(k.platform)||["other"])[0].toLowerCase(),h=k.userAgent||"",s=k.appName||"";D.isWin=A=="win",D.isMac=A=="mac",D.isLinux=A=="linux",D.isIE=s=="Microsoft Internet Explorer"||s.indexOf("MSAppHost")>=0?parseFloat((h.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((h.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),D.isOldIE=D.isIE&&D.isIE<9,D.isGecko=D.isMozilla=h.match(/ Gecko\/\d+/),D.isOpera=typeof opera=="object"&&Object.prototype.toString.call(window.opera)=="[object Opera]",D.isWebKit=parseFloat(h.split("WebKit/")[1])||void 0,D.isChrome=parseFloat(h.split(" Chrome/")[1])||void 0,D.isEdge=parseFloat(h.split(" Edge/")[1])||void 0,D.isAIR=h.indexOf("AdobeAIR")>=0,D.isAndroid=h.indexOf("Android")>=0,D.isChromeOS=h.indexOf(" CrOS ")>=0,D.isIOS=/iPad|iPhone|iPod/.test(h)&&!window.MSStream,D.isIOS&&(D.isMac=!0),D.isMobile=D.isIOS||D.isAndroid}),ace.define("ace/lib/dom",["require","exports","module","ace/lib/useragent"],function(a,D,z){var k=a("./useragent"),A="http://www.w3.org/1999/xhtml";if(D.buildDom=function s(l,t,e){if(typeof l=="string"&&l){var r=document.createTextNode(l);return t&&t.appendChild(r),r}if(!Array.isArray(l))return l&&l.appendChild&&t&&t.appendChild(l),l;if(typeof l[0]!="string"||!l[0]){for(var n=[],i=0;i<l.length;i++){var o=s(l[i],t,e);o&&n.push(o)}return n}var d=document.createElement(l[0]),v=l[1],_=1;v&&typeof v=="object"&&!Array.isArray(v)&&(_=2);for(var i=_;i<l.length;i++)s(l[i],d,e);return _==2&&Object.keys(v).forEach(function(C){var $=v[C];C==="class"?d.className=Array.isArray($)?$.join(" "):$:typeof $=="function"||C=="value"||C[0]=="$"?d[C]=$:C==="ref"?e&&(e[$]=d):$!=null&&d.setAttribute(C,$)}),t&&t.appendChild(d),d},D.getDocumentHead=function(s){return s||(s=document),s.head||s.getElementsByTagName("head")[0]||s.documentElement},D.createElement=function(s,l){return document.createElementNS?document.createElementNS(l||A,s):document.createElement(s)},D.removeChildren=function(s){s.innerHTML=""},D.createTextNode=function(s,l){var t=l?l.ownerDocument:document;return t.createTextNode(s)},D.createFragment=function(s){var l=s?s.ownerDocument:document;return l.createDocumentFragment()},D.hasCssClass=function(s,l){var t=(s.className+"").split(/\s+/g);return t.indexOf(l)!==-1},D.addCssClass=function(s,l){D.hasCssClass(s,l)||(s.className+=" "+l)},D.removeCssClass=function(s,l){for(var t=s.className.split(/\s+/g);;){var e=t.indexOf(l);if(e==-1)break;t.splice(e,1)}s.className=t.join(" ")},D.toggleCssClass=function(s,l){for(var t=s.className.split(/\s+/g),e=!0;;){var r=t.indexOf(l);if(r==-1)break;e=!1,t.splice(r,1)}return e&&t.push(l),s.className=t.join(" "),e},D.setCssClass=function(s,l,t){t?D.addCssClass(s,l):D.removeCssClass(s,l)},D.hasCssString=function(s,l){var t=0,e;if(l=l||document,e=l.querySelectorAll("style")){for(;t<e.length;)if(e[t++].id===s)return!0}},D.importCssString=function(l,t,e){var r=e;!e||!e.getRootNode?r=document:(r=e.getRootNode(),(!r||r==e)&&(r=document));var n=r.ownerDocument||r;if(t&&D.hasCssString(t,r))return null;t&&(l+=`
/*# sourceURL=ace/css/`+t+" */");var i=D.createElement("style");i.appendChild(n.createTextNode(l)),t&&(i.id=t),r==n&&(r=D.getDocumentHead(n)),r.insertBefore(i,r.firstChild)},D.importCssStylsheet=function(s,l){D.buildDom(["link",{rel:"stylesheet",href:s}],D.getDocumentHead(l))},D.scrollbarWidth=function(s){var l=D.createElement("ace_inner");l.style.width="100%",l.style.minWidth="0px",l.style.height="200px",l.style.display="block";var t=D.createElement("ace_outer"),e=t.style;e.position="absolute",e.left="-10000px",e.overflow="hidden",e.width="200px",e.minWidth="0px",e.height="150px",e.display="block",t.appendChild(l);var r=s.documentElement;r.appendChild(t);var n=l.offsetWidth;e.overflow="scroll";var i=l.offsetWidth;return n==i&&(i=t.clientWidth),r.removeChild(t),n-i},typeof document>"u"&&(D.importCssString=function(){}),D.computedStyle=function(s,l){return window.getComputedStyle(s,"")||{}},D.setStyle=function(s,l,t){s[l]!==t&&(s[l]=t)},D.HAS_CSS_ANIMATION=!1,D.HAS_CSS_TRANSFORMS=!1,D.HI_DPI=k.isWin?typeof window<"u"&&window.devicePixelRatio>=1.5:!0,typeof document<"u"){var h=document.createElement("div");D.HI_DPI&&h.style.transform!==void 0&&(D.HAS_CSS_TRANSFORMS=!0),!k.isEdge&&typeof h.style.animationName<"u"&&(D.HAS_CSS_ANIMATION=!0),h=null}D.HAS_CSS_TRANSFORMS?D.translate=function(s,l,t){s.style.transform="translate("+Math.round(l)+"px, "+Math.round(t)+"px)"}:D.translate=function(s,l,t){s.style.top=Math.round(t)+"px",s.style.left=Math.round(l)+"px"}}),ace.define("ace/lib/oop",["require","exports","module"],function(a,D,z){D.inherits=function(k,A){k.super_=A,k.prototype=Object.create(A.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}})},D.mixin=function(k,A){for(var h in A)k[h]=A[h];return k},D.implement=function(k,A){D.mixin(k,A)}}),ace.define("ace/lib/keys",["require","exports","module","ace/lib/oop"],function(a,D,z){var k=a("./oop"),A=function(){var h={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta",91:"MetaLeft",92:"MetaRight",93:"ContextMenu"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8,control:1},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}},s,l;for(l in h.FUNCTION_KEYS)s=h.FUNCTION_KEYS[l].toLowerCase(),h[s]=parseInt(l,10);for(l in h.PRINTABLE_KEYS)s=h.PRINTABLE_KEYS[l].toLowerCase(),h[s]=parseInt(l,10);return k.mixin(h,h.MODIFIER_KEYS),k.mixin(h,h.PRINTABLE_KEYS),k.mixin(h,h.FUNCTION_KEYS),h.enter=h.return,h.escape=h.esc,h.del=h.delete,h[173]="-",function(){for(var t=["cmd","ctrl","alt","shift"],e=Math.pow(2,t.length);e--;)h.KEY_MODS[e]=t.filter(function(r){return e&h.KEY_MODS[r]}).join("-")+"-"}(),h.KEY_MODS[0]="",h.KEY_MODS[-1]="input-",h}();k.mixin(D,A),D.keyCodeToString=function(h){var s=A[h];return typeof s!="string"&&(s=String.fromCharCode(h)),s.toLowerCase()}}),ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(a,D,z){var k=a("./keys"),A=a("./useragent"),h=null,s=0,l;function t(){l=!1;try{document.createComment("").addEventListener("test",function(){},{get passive(){l={passive:!1}}})}catch{}}function e(){return l==null&&t(),l}function r(C,$,c){this.elem=C,this.type=$,this.callback=c}r.prototype.destroy=function(){i(this.elem,this.type,this.callback),this.elem=this.type=this.callback=void 0};var n=D.addListener=function(C,$,c,g){C.addEventListener($,c,e()),g&&g.$toDestroy.push(new r(C,$,c))},i=D.removeListener=function(C,$,c){C.removeEventListener($,c,e())};D.stopEvent=function(C){return D.stopPropagation(C),D.preventDefault(C),!1},D.stopPropagation=function(C){C.stopPropagation&&C.stopPropagation()},D.preventDefault=function(C){C.preventDefault&&C.preventDefault()},D.getButton=function(C){return C.type=="dblclick"?0:C.type=="contextmenu"||A.isMac&&C.ctrlKey&&!C.altKey&&!C.shiftKey?2:C.button},D.capture=function(C,$,c){var g=C&&C.ownerDocument||document;function E(m){$&&$(m),c&&c(m),i(g,"mousemove",$),i(g,"mouseup",E),i(g,"dragstart",E)}return n(g,"mousemove",$),n(g,"mouseup",E),n(g,"dragstart",E),E},D.addMouseWheelListener=function(C,$,c){"onmousewheel"in C?n(C,"mousewheel",function(g){var E=8;g.wheelDeltaX!==void 0?(g.wheelX=-g.wheelDeltaX/E,g.wheelY=-g.wheelDeltaY/E):(g.wheelX=0,g.wheelY=-g.wheelDelta/E),$(g)},c):"onwheel"in C?n(C,"wheel",function(g){var E=.35;switch(g.deltaMode){case g.DOM_DELTA_PIXEL:g.wheelX=g.deltaX*E||0,g.wheelY=g.deltaY*E||0;break;case g.DOM_DELTA_LINE:case g.DOM_DELTA_PAGE:g.wheelX=(g.deltaX||0)*5,g.wheelY=(g.deltaY||0)*5;break}$(g)},c):n(C,"DOMMouseScroll",function(g){g.axis&&g.axis==g.HORIZONTAL_AXIS?(g.wheelX=(g.detail||0)*5,g.wheelY=0):(g.wheelX=0,g.wheelY=(g.detail||0)*5),$(g)},c)},D.addMultiMouseDownListener=function(C,$,c,g,E){var m=0,p,f,F,R={2:"dblclick",3:"tripleclick",4:"quadclick"};function I(S){if(D.getButton(S)!==0?m=0:S.detail>1?(m++,m>4&&(m=1)):m=1,A.isIE){var P=Math.abs(S.clientX-p)>5||Math.abs(S.clientY-f)>5;(!F||P)&&(m=1),F&&clearTimeout(F),F=setTimeout(function(){F=null},$[m-1]||600),m==1&&(p=S.clientX,f=S.clientY)}if(S._clicks=m,c[g]("mousedown",S),m>4)m=0;else if(m>1)return c[g](R[m],S)}Array.isArray(C)||(C=[C]),C.forEach(function(S){n(S,"mousedown",I,E)})};var o=function(C){return 0|(C.ctrlKey?1:0)|(C.altKey?2:0)|(C.shiftKey?4:0)|(C.metaKey?8:0)};D.getModifierString=function(C){return k.KEY_MODS[o(C)]};function d(C,$,c){var g=o($);if(!A.isMac&&h){if($.getModifierState&&($.getModifierState("OS")||$.getModifierState("Win"))&&(g|=8),h.altGr)if((3&g)!=3)h.altGr=0;else return;if(c===18||c===17){var E="location"in $?$.location:$.keyLocation;if(c===17&&E===1)h[c]==1&&(s=$.timeStamp);else if(c===18&&g===3&&E===2){var m=$.timeStamp-s;m<50&&(h.altGr=!0)}}}if(c in k.MODIFIER_KEYS&&(c=-1),!g&&c===13){var E="location"in $?$.location:$.keyLocation;if(E===3&&(C($,g,-c),$.defaultPrevented))return}if(A.isChromeOS&&g&8){if(C($,g,c),$.defaultPrevented)return;g&=-9}return!g&&!(c in k.FUNCTION_KEYS)&&!(c in k.PRINTABLE_KEYS)?!1:C($,g,c)}D.addCommandKeyListener=function(C,$,c){if(A.isOldGecko||A.isOpera&&!("KeyboardEvent"in window)){var g=null;n(C,"keydown",function(m){g=m.keyCode},c),n(C,"keypress",function(m){return d($,m,g)},c)}else{var E=null;n(C,"keydown",function(m){h[m.keyCode]=(h[m.keyCode]||0)+1;var p=d($,m,m.keyCode);return E=m.defaultPrevented,p},c),n(C,"keypress",function(m){E&&(m.ctrlKey||m.altKey||m.shiftKey||m.metaKey)&&(D.stopEvent(m),E=null)},c),n(C,"keyup",function(m){h[m.keyCode]=null},c),h||(v(),n(window,"focus",v))}};function v(){h=Object.create(null)}if(typeof window=="object"&&window.postMessage&&!A.isOldIE){var _=1;D.nextTick=function(C,$){$=$||window;var c="zero-timeout-message-"+_++,g=function(E){E.data==c&&(D.stopPropagation(E),i($,"message",g),C())};n($,"message",g),$.postMessage(c,"*")}}D.$idleBlocked=!1,D.onIdle=function(C,$){return setTimeout(function c(){D.$idleBlocked?setTimeout(c,100):C()},$)},D.$idleBlockId=null,D.blockIdle=function(C){D.$idleBlockId&&clearTimeout(D.$idleBlockId),D.$idleBlocked=!0,D.$idleBlockId=setTimeout(function(){D.$idleBlocked=!1},C||100)},D.nextFrame=typeof window=="object"&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),D.nextFrame?D.nextFrame=D.nextFrame.bind(window):D.nextFrame=function(C){setTimeout(C,17)}}),ace.define("ace/range",["require","exports","module"],function(a,D,z){var k=function(h,s){return h.row-s.row||h.column-s.column},A=function(h,s,l,t){this.start={row:h,column:s},this.end={row:l,column:t}};(function(){this.isEqual=function(h){return this.start.row===h.start.row&&this.end.row===h.end.row&&this.start.column===h.start.column&&this.end.column===h.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(h,s){return this.compare(h,s)==0},this.compareRange=function(h){var s,l=h.end,t=h.start;return s=this.compare(l.row,l.column),s==1?(s=this.compare(t.row,t.column),s==1?2:s==0?1:0):s==-1?-2:(s=this.compare(t.row,t.column),s==-1?-1:s==1?42:0)},this.comparePoint=function(h){return this.compare(h.row,h.column)},this.containsRange=function(h){return this.comparePoint(h.start)==0&&this.comparePoint(h.end)==0},this.intersects=function(h){var s=this.compareRange(h);return s==-1||s==0||s==1},this.isEnd=function(h,s){return this.end.row==h&&this.end.column==s},this.isStart=function(h,s){return this.start.row==h&&this.start.column==s},this.setStart=function(h,s){typeof h=="object"?(this.start.column=h.column,this.start.row=h.row):(this.start.row=h,this.start.column=s)},this.setEnd=function(h,s){typeof h=="object"?(this.end.column=h.column,this.end.row=h.row):(this.end.row=h,this.end.column=s)},this.inside=function(h,s){return this.compare(h,s)==0?!(this.isEnd(h,s)||this.isStart(h,s)):!1},this.insideStart=function(h,s){return this.compare(h,s)==0?!this.isEnd(h,s):!1},this.insideEnd=function(h,s){return this.compare(h,s)==0?!this.isStart(h,s):!1},this.compare=function(h,s){return!this.isMultiLine()&&h===this.start.row?s<this.start.column?-1:s>this.end.column?1:0:h<this.start.row?-1:h>this.end.row?1:this.start.row===h?s>=this.start.column?0:-1:this.end.row===h?s<=this.end.column?0:1:0},this.compareStart=function(h,s){return this.start.row==h&&this.start.column==s?-1:this.compare(h,s)},this.compareEnd=function(h,s){return this.end.row==h&&this.end.column==s?1:this.compare(h,s)},this.compareInside=function(h,s){return this.end.row==h&&this.end.column==s?1:this.start.row==h&&this.start.column==s?-1:this.compare(h,s)},this.clipRows=function(h,s){if(this.end.row>s)var l={row:s+1,column:0};else if(this.end.row<h)var l={row:h,column:0};if(this.start.row>s)var t={row:s+1,column:0};else if(this.start.row<h)var t={row:h,column:0};return A.fromPoints(t||this.start,l||this.end)},this.extend=function(h,s){var l=this.compare(h,s);if(l==0)return this;if(l==-1)var t={row:h,column:s};else var e={row:h,column:s};return A.fromPoints(t||this.start,e||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return A.fromPoints(this.start,this.end)},this.collapseRows=function(){return this.end.column==0?new A(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new A(this.start.row,0,this.end.row,0)},this.toScreenRange=function(h){var s=h.documentToScreenPosition(this.start),l=h.documentToScreenPosition(this.end);return new A(s.row,s.column,l.row,l.column)},this.moveBy=function(h,s){this.start.row+=h,this.start.column+=s,this.end.row+=h,this.end.column+=s}}).call(A.prototype),A.fromPoints=function(h,s){return new A(h.row,h.column,s.row,s.column)},A.comparePoints=k,A.comparePoints=function(h,s){return h.row-s.row||h.column-s.column},D.Range=A}),ace.define("ace/lib/lang",["require","exports","module"],function(a,D,z){D.last=function(h){return h[h.length-1]},D.stringReverse=function(h){return h.split("").reverse().join("")},D.stringRepeat=function(h,s){for(var l="";s>0;)s&1&&(l+=h),(s>>=1)&&(h+=h);return l};var k=/^\s\s*/,A=/\s\s*$/;D.stringTrimLeft=function(h){return h.replace(k,"")},D.stringTrimRight=function(h){return h.replace(A,"")},D.copyObject=function(h){var s={};for(var l in h)s[l]=h[l];return s},D.copyArray=function(h){for(var s=[],l=0,t=h.length;l<t;l++)h[l]&&typeof h[l]=="object"?s[l]=this.copyObject(h[l]):s[l]=h[l];return s},D.deepCopy=function h(s){if(typeof s!="object"||!s)return s;var l;if(Array.isArray(s)){l=[];for(var t=0;t<s.length;t++)l[t]=h(s[t]);return l}if(Object.prototype.toString.call(s)!=="[object Object]")return s;l={};for(var t in s)l[t]=h(s[t]);return l},D.arrayToMap=function(h){for(var s={},l=0;l<h.length;l++)s[h[l]]=1;return s},D.createMap=function(h){var s=Object.create(null);for(var l in h)s[l]=h[l];return s},D.arrayRemove=function(h,s){for(var l=0;l<=h.length;l++)s===h[l]&&h.splice(l,1)},D.escapeRegExp=function(h){return h.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},D.escapeHTML=function(h){return(""+h).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},D.getMatchOffsets=function(h,s){var l=[];return h.replace(s,function(t){l.push({offset:arguments[arguments.length-2],length:t.length})}),l},D.deferredCall=function(h){var s=null,l=function(){s=null,h()},t=function(e){return t.cancel(),s=setTimeout(l,e||0),t};return t.schedule=t,t.call=function(){return this.cancel(),h(),t},t.cancel=function(){return clearTimeout(s),s=null,t},t.isPending=function(){return s},t},D.delayedCall=function(h,s){var l=null,t=function(){l=null,h()},e=function(r){l==null&&(l=setTimeout(t,r||s))};return e.delay=function(r){l&&clearTimeout(l),l=setTimeout(t,r||s)},e.schedule=e,e.call=function(){this.cancel(),h()},e.cancel=function(){l&&clearTimeout(l),l=null},e.isPending=function(){return l},e}}),ace.define("ace/clipboard",["require","exports","module"],function(a,D,z){var k;z.exports={lineMode:!1,pasteCancelled:function(){return k&&k>Date.now()-50?!0:k=!1},cancel:function(){k=Date.now()}}}),ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/clipboard","ace/lib/keys"],function(a,D,z){var k=a("../lib/event"),A=a("../lib/useragent"),h=a("../lib/dom"),s=a("../lib/lang"),l=a("../clipboard"),t=A.isChrome<18,e=A.isIE,r=A.isChrome>63,n=400,i=a("../lib/keys"),o=i.KEY_MODS,d=A.isIOS,v=d?/\s/:/\n/,_=A.isMobile,C=function($,c){var g=h.createElement("textarea");g.className="ace_text-input",g.setAttribute("wrap","off"),g.setAttribute("autocorrect","off"),g.setAttribute("autocapitalize","off"),g.setAttribute("spellcheck",!1),g.style.opacity="0",$.insertBefore(g,$.firstChild);var E=!1,m=!1,p=!1,f=!1,F="";_||(g.style.fontSize="1px");var R=!1,I=!1,S="",P=0,G=0,Z=0;try{var ae=document.activeElement===g}catch{}k.addListener(g,"blur",function(le){I||(c.onBlur(le),ae=!1)},c),k.addListener(g,"focus",function(le){if(!I){if(ae=!0,A.isEdge)try{if(!document.hasFocus())return}catch{}c.onFocus(le),A.isEdge?setTimeout(re):re()}},c),this.$focusScroll=!1,this.focus=function(){if(F||r||this.$focusScroll=="browser")return g.focus({preventScroll:!0});var le=g.style.top;g.style.position="fixed",g.style.top="0px";try{var se=g.getBoundingClientRect().top!=0}catch{return}var ve=[];if(se)for(var Se=g.parentElement;Se&&Se.nodeType==1;)ve.push(Se),Se.setAttribute("ace_nocontext",!0),!Se.parentElement&&Se.getRootNode?Se=Se.getRootNode().host:Se=Se.parentElement;g.focus({preventScroll:!0}),se&&ve.forEach(function($e){$e.removeAttribute("ace_nocontext")}),setTimeout(function(){g.style.position="",g.style.top=="0px"&&(g.style.top=le)},0)},this.blur=function(){g.blur()},this.isFocused=function(){return ae},c.on("beforeEndOperation",function(){var le=c.curOp,se=le&&le.command&&le.command.name;if(se!="insertstring"){var ve=se&&(le.docChanged||le.selectionChanged);p&&ve&&(S=g.value="",qe()),re()}});var re=d?function(le){if(!(!ae||E&&!le||f)){le||(le="");var se=`
 ab`+le+`cde fg
`;se!=g.value&&(g.value=S=se);var ve=4,Se=4+(le.length||(c.selection.isEmpty()?0:1));(P!=ve||G!=Se)&&g.setSelectionRange(ve,Se),P=ve,G=Se}}:function(){if(!(p||f)&&!(!ae&&!ie)){p=!0;var le=0,se=0,ve="";if(c.session){var Se=c.selection,$e=Se.getRange(),Ae=Se.cursor.row;if(le=$e.start.column,se=$e.end.column,ve=c.session.getLine(Ae),$e.start.row!=Ae){var Ge=c.session.getLine(Ae-1);le=$e.start.row<Ae-1?0:le,se+=Ge.length+1,ve=Ge+`
`+ve}else if($e.end.row!=Ae){var be=c.session.getLine(Ae+1);se=$e.end.row>Ae+1?be.length:se,se+=ve.length+1,ve=ve+`
`+be}else _&&Ae>0&&(ve=`
`+ve,se+=1,le+=1);ve.length>n&&(le<n&&se<n?ve=ve.slice(0,n):(ve=`
`,le==se?le=se=0:(le=0,se=1)))}var Qe=ve+`

`;if(Qe!=S&&(g.value=S=Qe,P=G=Qe.length),ie&&(P=g.selectionStart,G=g.selectionEnd),G!=se||P!=le||g.selectionEnd!=G)try{g.setSelectionRange(le,se),P=le,G=se}catch{}p=!1}};this.resetSelection=re,ae&&c.onFocus();var ce=function(le){return le.selectionStart===0&&le.selectionEnd>=S.length&&le.value===S&&S&&le.selectionEnd!==G},j=function(le){p||(E?E=!1:ce(g)?(c.selectAll(),re()):_&&g.selectionStart!=P&&re())},ee=null;this.setInputHandler=function(le){ee=le},this.getInputHandler=function(){return ee};var ie=!1,fe=function(le,se){if(ie&&(ie=!1),m)return re(),le&&c.onPaste(le),m=!1,"";for(var ve=g.selectionStart,Se=g.selectionEnd,$e=P,Ae=S.length-G,Ge=le,be=le.length-ve,Qe=le.length-Se,Ce=0;$e>0&&S[Ce]==le[Ce];)Ce++,$e--;for(Ge=Ge.slice(Ce),Ce=1;Ae>0&&S.length-Ce>P-1&&S[S.length-Ce]==le[le.length-Ce];)Ce++,Ae--;be-=Ce-1,Qe-=Ce-1;var Xe=Ge.length-Ce+1;if(Xe<0&&($e=-Xe,Xe=0),Ge=Ge.slice(0,Xe),!se&&!Ge&&!be&&!$e&&!Ae&&!Qe)return"";f=!0;var ft=!1;return A.isAndroid&&Ge==". "&&(Ge="  ",ft=!0),Ge&&!$e&&!Ae&&!be&&!Qe||R?c.onTextInput(Ge):c.onTextInput(Ge,{extendLeft:$e,extendRight:Ae,restoreStart:be,restoreEnd:Qe}),f=!1,S=le,P=ve,G=Se,Z=Qe,ft?`
`:Ge},he=function(le){if(p)return Ye();if(le&&le.inputType){if(le.inputType=="historyUndo")return c.execCommand("undo");if(le.inputType=="historyRedo")return c.execCommand("redo")}var se=g.value,ve=fe(se,!0);(se.length>n+100||v.test(ve)||_&&P<1&&P==G)&&re()},ye=function(le,se,ve){var Se=le.clipboardData||window.clipboardData;if(!(!Se||t)){var $e=e||ve?"Text":"text/plain";try{return se?Se.setData($e,se)!==!1:Se.getData($e)}catch(Ae){if(!ve)return ye(Ae,se,!0)}}},Te=function(le,se){var ve=c.getCopyText();if(!ve)return k.preventDefault(le);ye(le,ve)?(d&&(re(ve),E=ve,setTimeout(function(){E=!1},10)),se?c.onCut():c.onCopy(),k.preventDefault(le)):(E=!0,g.value=ve,g.select(),setTimeout(function(){E=!1,re(),se?c.onCut():c.onCopy()}))},ke=function(le){Te(le,!0)},Fe=function(le){Te(le,!1)},De=function(le){var se=ye(le);l.pasteCancelled()||(typeof se=="string"?(se&&c.onPaste(se,le),A.isIE&&setTimeout(re),k.preventDefault(le)):(g.value="",m=!0))};k.addCommandKeyListener(g,c.onCommandKey.bind(c),c),k.addListener(g,"select",j,c),k.addListener(g,"input",he,c),k.addListener(g,"cut",ke,c),k.addListener(g,"copy",Fe,c),k.addListener(g,"paste",De,c),(!("oncut"in g)||!("oncopy"in g)||!("onpaste"in g))&&k.addListener($,"keydown",function(le){if(!(A.isMac&&!le.metaKey||!le.ctrlKey))switch(le.keyCode){case 67:Fe(le);break;case 86:De(le);break;case 88:ke(le);break}},c);var Pe=function(le){if(!(p||!c.onCompositionStart||c.$readOnly)&&(p={},!R)){le.data&&(p.useTextareaForIME=!1),setTimeout(Ye,0),c._signal("compositionStart"),c.on("mousedown",B);var se=c.getSelectionRange();se.end.row=se.start.row,se.end.column=se.start.column,p.markerRange=se,p.selectionStart=P,c.onCompositionStart(p),p.useTextareaForIME?(S=g.value="",P=0,G=0):(g.msGetInputContext&&(p.context=g.msGetInputContext()),g.getInputContext&&(p.context=g.getInputContext()))}},Ye=function(){if(!(!p||!c.onCompositionUpdate||c.$readOnly)){if(R)return B();if(p.useTextareaForIME)c.onCompositionUpdate(g.value);else{var le=g.value;fe(le),p.markerRange&&(p.context&&(p.markerRange.start.column=p.selectionStart=p.context.compositionStartOffset),p.markerRange.end.column=p.markerRange.start.column+G-p.selectionStart+Z)}}},qe=function(le){!c.onCompositionEnd||c.$readOnly||(p=!1,c.onCompositionEnd(),c.off("mousedown",B),le&&he())};function B(){I=!0,g.blur(),g.focus(),I=!1}var _e=s.delayedCall(Ye,50).schedule.bind(null,null);function me(le){le.keyCode==27&&g.value.length<g.selectionStart&&(p||(S=g.value),P=G=-1,re()),_e()}k.addListener(g,"compositionstart",Pe,c),k.addListener(g,"compositionupdate",Ye,c),k.addListener(g,"keyup",me,c),k.addListener(g,"keydown",_e,c),k.addListener(g,"compositionend",qe,c),this.getElement=function(){return g},this.setCommandMode=function(le){R=le,g.readOnly=!1},this.setReadOnly=function(le){R||(g.readOnly=le)},this.setCopyWithEmptySelection=function(le){},this.onContextMenu=function(le){ie=!0,re(),c._emit("nativecontextmenu",{target:c,domEvent:le}),this.moveToMouse(le,!0)},this.moveToMouse=function(le,se){F||(F=g.style.cssText),g.style.cssText=(se?"z-index:100000;":"")+(A.isIE?"opacity:0.1;":"")+"text-indent: -"+(P+G)*c.renderer.characterWidth*.5+"px;";var ve=c.container.getBoundingClientRect(),Se=h.computedStyle(c.container),$e=ve.top+(parseInt(Se.borderTopWidth)||0),Ae=ve.left+(parseInt(ve.borderLeftWidth)||0),Ge=ve.bottom-$e-g.clientHeight-2,be=function(Qe){h.translate(g,Qe.clientX-Ae-2,Math.min(Qe.clientY-$e-2,Ge))};be(le),le.type=="mousedown"&&(c.renderer.$isMousePressed=!0,clearTimeout(te),A.isWin&&k.capture(c.container,be,Q))},this.onContextMenuClose=Q;var te;function Q(){clearTimeout(te),te=setTimeout(function(){F&&(g.style.cssText=F,F=""),c.renderer.$isMousePressed=!1,c.renderer.$keepTextAreaAtCursor&&c.renderer.$moveTextAreaToCursor()},0)}var Y=function(le){c.textInput.onContextMenu(le),Q()};k.addListener(g,"mouseup",Y,c),k.addListener(g,"mousedown",function(le){le.preventDefault(),Q()},c),k.addListener(c.renderer.scroller,"contextmenu",Y,c),k.addListener(g,"contextmenu",Y,c),d&&pe($,c,g);function pe(le,se,ve){var Se=null,$e=!1;ve.addEventListener("keydown",function(Ge){Se&&clearTimeout(Se),$e=!0},!0),ve.addEventListener("keyup",function(Ge){Se=setTimeout(function(){$e=!1},100)},!0);var Ae=function(Ge){if(document.activeElement===ve&&!($e||p||se.$mouseHandler.isMousePressed)&&!E){var be=ve.selectionStart,Qe=ve.selectionEnd,Ce=null,Xe=0;if(be==0?Ce=i.up:be==1?Ce=i.home:Qe>G&&S[Qe]==`
`?Ce=i.end:be<P&&S[be-1]==" "?(Ce=i.left,Xe=o.option):be<P||be==P&&G!=P&&be==Qe?Ce=i.left:Qe>G&&S.slice(0,Qe).split(`
`).length>2?Ce=i.down:Qe>G&&S[Qe-1]==" "?(Ce=i.right,Xe=o.option):(Qe>G||Qe==G&&G!=P&&be==Qe)&&(Ce=i.right),be!==Qe&&(Xe|=o.shift),Ce){var ft=se.onCommandKey({},Xe,Ce);if(!ft&&se.commands){Ce=i.keyCodeToString(Ce);var ne=se.commands.findKeyCommand(Xe,Ce);ne&&se.execCommand(ne)}P=be,G=Qe,re("")}}};document.addEventListener("selectionchange",Ae),se.on("destroy",function(){document.removeEventListener("selectionchange",Ae)})}};D.TextInput=C,D.$setUserAgentForTests=function($,c){_=$,d=c}}),ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/useragent"],function(a,D,z){var k=a("../lib/useragent"),A=0,h=550;function s(e){e.$clickSelection=null;var r=e.editor;r.setDefaultHandler("mousedown",this.onMouseDown.bind(e)),r.setDefaultHandler("dblclick",this.onDoubleClick.bind(e)),r.setDefaultHandler("tripleclick",this.onTripleClick.bind(e)),r.setDefaultHandler("quadclick",this.onQuadClick.bind(e)),r.setDefaultHandler("mousewheel",this.onMouseWheel.bind(e));var n=["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"];n.forEach(function(i){e[i]=this[i]},this),e.selectByLines=this.extendSelectionBy.bind(e,"getLineRange"),e.selectByWords=this.extendSelectionBy.bind(e,"getWordRange")}(function(){this.onMouseDown=function(e){var r=e.inSelection(),n=e.getDocumentPosition();this.mousedownEvent=e;var i=this.editor,o=e.getButton();if(o!==0){var d=i.getSelectionRange(),v=d.isEmpty();(v||o==1)&&i.selection.moveToPosition(n),o==2&&(i.textInput.onContextMenu(e.domEvent),k.isMozilla||e.preventDefault());return}if(this.mousedownEvent.time=Date.now(),r&&!i.isFocused()&&(i.focus(),this.$focusTimeout&&!this.$clickSelection&&!i.inMultiSelectMode)){this.setState("focusWait"),this.captureMouse(e);return}return this.captureMouse(e),this.startSelect(n,e.domEvent._clicks>1),e.preventDefault()},this.startSelect=function(e,r){e=e||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var n=this.editor;this.mousedownEvent&&(this.mousedownEvent.getShiftKey()?n.selection.selectToPosition(e):r||n.selection.moveToPosition(e),r||this.select(),n.renderer.scroller.setCapture&&n.renderer.scroller.setCapture(),n.setStyle("ace_selecting"),this.setState("select"))},this.select=function(){var e,r=this.editor,n=r.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var i=this.$clickSelection.comparePoint(n);if(i==-1)e=this.$clickSelection.end;else if(i==1)e=this.$clickSelection.start;else{var o=t(this.$clickSelection,n);n=o.cursor,e=o.anchor}r.selection.setSelectionAnchor(e.row,e.column)}r.selection.selectToPosition(n),r.renderer.scrollCursorIntoView()},this.extendSelectionBy=function(e){var r,n=this.editor,i=n.renderer.screenToTextCoordinates(this.x,this.y),o=n.selection[e](i.row,i.column);if(this.$clickSelection){var d=this.$clickSelection.comparePoint(o.start),v=this.$clickSelection.comparePoint(o.end);if(d==-1&&v<=0)r=this.$clickSelection.end,(o.end.row!=i.row||o.end.column!=i.column)&&(i=o.start);else if(v==1&&d>=0)r=this.$clickSelection.start,(o.start.row!=i.row||o.start.column!=i.column)&&(i=o.end);else if(d==-1&&v==1)i=o.end,r=o.start;else{var _=t(this.$clickSelection,i);i=_.cursor,r=_.anchor}n.selection.setSelectionAnchor(r.row,r.column)}n.selection.selectToPosition(i),n.renderer.scrollCursorIntoView()},this.selectEnd=this.selectAllEnd=this.selectByWordsEnd=this.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting"),this.editor.renderer.scroller.releaseCapture&&this.editor.renderer.scroller.releaseCapture()},this.focusWait=function(){var e=l(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),r=Date.now();(e>A||r-this.mousedownEvent.time>this.$focusTimeout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},this.onDoubleClick=function(e){var r=e.getDocumentPosition(),n=this.editor,i=n.session,o=i.getBracketRange(r);o?(o.isEmpty()&&(o.start.column--,o.end.column++),this.setState("select")):(o=n.selection.getWordRange(r.row,r.column),this.setState("selectByWords")),this.$clickSelection=o,this.select()},this.onTripleClick=function(e){var r=e.getDocumentPosition(),n=this.editor;this.setState("selectByLines");var i=n.getSelectionRange();i.isMultiLine()&&i.contains(r.row,r.column)?(this.$clickSelection=n.selection.getLineRange(i.start.row),this.$clickSelection.end=n.selection.getLineRange(i.end.row).end):this.$clickSelection=n.selection.getLineRange(r.row),this.select()},this.onQuadClick=function(e){var r=this.editor;r.selectAll(),this.$clickSelection=r.getSelectionRange(),this.setState("selectAll")},this.onMouseWheel=function(e){if(!e.getAccelKey()){e.getShiftKey()&&e.wheelY&&!e.wheelX&&(e.wheelX=e.wheelY,e.wheelY=0);var r=this.editor;this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0});var n=this.$lastScroll,i=e.domEvent.timeStamp,o=i-n.t,d=o?e.wheelX/o:n.vx,v=o?e.wheelY/o:n.vy;o<h&&(d=(d+n.vx)/2,v=(v+n.vy)/2);var _=Math.abs(d/v),C=!1;if(_>=1&&r.renderer.isScrollableBy(e.wheelX*e.speed,0)&&(C=!0),_<=1&&r.renderer.isScrollableBy(0,e.wheelY*e.speed)&&(C=!0),C)n.allowed=i;else if(i-n.allowed<h){var $=Math.abs(d)<=1.5*Math.abs(n.vx)&&Math.abs(v)<=1.5*Math.abs(n.vy);$?(C=!0,n.allowed=i):n.allowed=0}if(n.t=i,n.vx=d,n.vy=v,C)return r.renderer.scrollBy(e.wheelX*e.speed,e.wheelY*e.speed),e.stop()}}}).call(s.prototype),D.DefaultHandlers=s;function l(e,r,n,i){return Math.sqrt(Math.pow(n-e,2)+Math.pow(i-r,2))}function t(e,r){if(e.start.row==e.end.row)var n=2*r.column-e.start.column-e.end.column;else if(e.start.row==e.end.row-1&&!e.start.column&&!e.end.column)var n=r.column-4;else var n=2*r.row-e.start.row-e.end.row;return n<0?{cursor:e.start,anchor:e.end}:{cursor:e.end,anchor:e.start}}}),ace.define("ace/tooltip",["require","exports","module","ace/lib/oop","ace/lib/dom"],function(a,D,z){a("./lib/oop");var k=a("./lib/dom");function A(h){this.isOpen=!1,this.$element=null,this.$parentNode=h}(function(){this.$init=function(){return this.$element=k.createElement("div"),this.$element.className="ace_tooltip",this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},this.getElement=function(){return this.$element||this.$init()},this.setText=function(h){this.getElement().textContent=h},this.setHtml=function(h){this.getElement().innerHTML=h},this.setPosition=function(h,s){this.getElement().style.left=h+"px",this.getElement().style.top=s+"px"},this.setClassName=function(h){k.addCssClass(this.getElement(),h)},this.show=function(h,s,l){h!=null&&this.setText(h),s!=null&&l!=null&&this.setPosition(s,l),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},this.hide=function(){this.isOpen&&(this.getElement().style.display="none",this.isOpen=!1)},this.getHeight=function(){return this.getElement().offsetHeight},this.getWidth=function(){return this.getElement().offsetWidth},this.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)}}).call(A.prototype),D.Tooltip=A}),ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event","ace/tooltip"],function(a,D,z){var k=a("../lib/dom"),A=a("../lib/oop"),h=a("../lib/event"),s=a("../tooltip").Tooltip;function l(e){var r=e.editor,n=r.renderer.$gutterLayer,i=new t(r.container);e.editor.setDefaultHandler("guttermousedown",function(c){if(!(!r.isFocused()||c.getButton()!=0)){var g=n.getRegion(c);if(g!="foldWidgets"){var E=c.getDocumentPosition().row,m=r.session.selection;if(c.getShiftKey())m.selectTo(E,0);else{if(c.domEvent.detail==2)return r.selectAll(),c.preventDefault();e.$clickSelection=r.selection.getLineRange(E)}return e.setState("selectByLines"),e.captureMouse(c),c.preventDefault()}}});var o,d,v;function _(){var c=d.getDocumentPosition().row,g=n.$annotations[c];if(!g)return C();var E=r.session.getLength();if(c==E){var m=r.renderer.pixelToScreenCoordinates(0,d.y).row,p=d.$pos;if(m>r.session.documentToScreenRow(p.row,p.column))return C()}if(v!=g)if(v=g.text.join("<br/>"),i.setHtml(v),i.show(),r._signal("showGutterTooltip",i),r.on("mousewheel",C),e.$tooltipFollowsMouse)$(d);else{var f=d.domEvent.target,F=f.getBoundingClientRect(),R=i.getElement().style;R.left=F.right+"px",R.top=F.bottom+"px"}}function C(){o&&(o=clearTimeout(o)),v&&(i.hide(),v=null,r._signal("hideGutterTooltip",i),r.off("mousewheel",C))}function $(c){i.setPosition(c.x,c.y)}e.editor.setDefaultHandler("guttermousemove",function(c){var g=c.domEvent.target||c.domEvent.srcElement;if(k.hasCssClass(g,"ace_fold-widget"))return C();v&&e.$tooltipFollowsMouse&&$(c),d=c,!o&&(o=setTimeout(function(){o=null,d&&!e.isMousePressed?_():C()},50))}),h.addListener(r.renderer.$gutter,"mouseout",function(c){d=null,!(!v||o)&&(o=setTimeout(function(){o=null,C()},50))},r),r.on("changeSession",C)}function t(e){s.call(this,e)}A.inherits(t,s),(function(){this.setPosition=function(e,r){var n=window.innerWidth||document.documentElement.clientWidth,i=window.innerHeight||document.documentElement.clientHeight,o=this.getWidth(),d=this.getHeight();e+=15,r+=15,e+o>n&&(e-=e+o-n),r+d>i&&(r-=20+d),s.prototype.setPosition.call(this,e,r)}}).call(t.prototype),D.GutterHandler=l}),ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(a,D,z){var k=a("../lib/event"),A=a("../lib/useragent"),h=D.MouseEvent=function(s,l){this.domEvent=s,this.editor=l,this.x=this.clientX=s.clientX,this.y=this.clientY=s.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1};(function(){this.stopPropagation=function(){k.stopPropagation(this.domEvent),this.propagationStopped=!0},this.preventDefault=function(){k.preventDefault(this.domEvent),this.defaultPrevented=!0},this.stop=function(){this.stopPropagation(),this.preventDefault()},this.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},this.inSelection=function(){if(this.$inSelection!==null)return this.$inSelection;var s=this.editor,l=s.getSelectionRange();if(l.isEmpty())this.$inSelection=!1;else{var t=this.getDocumentPosition();this.$inSelection=l.contains(t.row,t.column)}return this.$inSelection},this.getButton=function(){return k.getButton(this.domEvent)},this.getShiftKey=function(){return this.domEvent.shiftKey},this.getAccelKey=A.isMac?function(){return this.domEvent.metaKey}:function(){return this.domEvent.ctrlKey}}).call(h.prototype)}),ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(a,D,z){var k=a("../lib/dom"),A=a("../lib/event"),h=a("../lib/useragent"),s=200,l=200,t=5;function e(n){var i=n.editor,o=k.createElement("img");o.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",h.isOpera&&(o.style.cssText="width:1px;height:1px;position:fixed;top:0;left:0;z-index:2147483647;opacity:0;");var d=["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"];d.forEach(function(ie){n[ie]=this[ie]},this),i.on("mousedown",this.onMouseDown.bind(n));var v=i.container,_,C,$,c,g,E,m=0,p,f,F,R,I;this.onDragStart=function(ie){if(this.cancelDrag||!v.draggable){var fe=this;return setTimeout(function(){fe.startSelect(),fe.captureMouse(ie)},0),ie.preventDefault()}g=i.getSelectionRange();var he=ie.dataTransfer;he.effectAllowed=i.getReadOnly()?"copy":"copyMove",h.isOpera&&(i.container.appendChild(o),o.scrollTop=0),he.setDragImage&&he.setDragImage(o,0,0),h.isOpera&&i.container.removeChild(o),he.clearData(),he.setData("Text",i.session.getTextRange()),f=!0,this.setState("drag")},this.onDragEnd=function(ie){if(v.draggable=!1,f=!1,this.setState(null),!i.getReadOnly()){var fe=ie.dataTransfer.dropEffect;!p&&fe=="move"&&i.session.remove(i.getSelectionRange()),i.$resetCursorStyle()}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(ie){if(!(i.getReadOnly()||!j(ie.dataTransfer)))return C=ie.clientX,$=ie.clientY,_||Z(),m++,ie.dataTransfer.dropEffect=p=ee(ie),A.preventDefault(ie)},this.onDragOver=function(ie){if(!(i.getReadOnly()||!j(ie.dataTransfer)))return C=ie.clientX,$=ie.clientY,_||(Z(),m++),re!==null&&(re=null),ie.dataTransfer.dropEffect=p=ee(ie),A.preventDefault(ie)},this.onDragLeave=function(ie){if(m--,m<=0&&_)return ae(),p=null,A.preventDefault(ie)},this.onDrop=function(ie){if(E){var fe=ie.dataTransfer;if(f)switch(p){case"move":g.contains(E.row,E.column)?g={start:E,end:E}:g=i.moveText(g,E);break;case"copy":g=i.moveText(g,E,!0);break}else{var he=fe.getData("Text");g={start:E,end:i.session.insert(E,he)},i.focus(),p=null}return ae(),A.preventDefault(ie)}},A.addListener(v,"dragstart",this.onDragStart.bind(n),i),A.addListener(v,"dragend",this.onDragEnd.bind(n),i),A.addListener(v,"dragenter",this.onDragEnter.bind(n),i),A.addListener(v,"dragover",this.onDragOver.bind(n),i),A.addListener(v,"dragleave",this.onDragLeave.bind(n),i),A.addListener(v,"drop",this.onDrop.bind(n),i);function S(ie,fe){var he=Date.now(),ye=!fe||ie.row!=fe.row,Te=!fe||ie.column!=fe.column;if(!R||ye||Te)i.moveCursorToPosition(ie),R=he,I={x:C,y:$};else{var ke=r(I.x,I.y,C,$);ke>t?R=null:he-R>=l&&(i.renderer.scrollCursorIntoView(),R=null)}}function P(ie,fe){var he=Date.now(),ye=i.renderer.layerConfig.lineHeight,Te=i.renderer.layerConfig.characterWidth,ke=i.renderer.scroller.getBoundingClientRect(),Fe={x:{left:C-ke.left,right:ke.right-C},y:{top:$-ke.top,bottom:ke.bottom-$}},De=Math.min(Fe.x.left,Fe.x.right),Pe=Math.min(Fe.y.top,Fe.y.bottom),Ye={row:ie.row,column:ie.column};De/Te<=2&&(Ye.column+=Fe.x.left<Fe.x.right?-3:2),Pe/ye<=1&&(Ye.row+=Fe.y.top<Fe.y.bottom?-1:1);var qe=ie.row!=Ye.row,B=ie.column!=Ye.column,_e=!fe||ie.row!=fe.row;qe||B&&!_e?F?he-F>=s&&i.renderer.scrollCursorIntoView(Ye):F=he:F=null}function G(){var ie=E;E=i.renderer.screenToTextCoordinates(C,$),S(E,ie),P(E,ie)}function Z(){g=i.selection.toOrientedRange(),_=i.session.addMarker(g,"ace_selection",i.getSelectionStyle()),i.clearSelection(),i.isFocused()&&i.renderer.$cursorLayer.setBlinking(!1),clearInterval(c),G(),c=setInterval(G,20),m=0,A.addListener(document,"mousemove",ce)}function ae(){clearInterval(c),i.session.removeMarker(_),_=null,i.selection.fromOrientedRange(g),i.isFocused()&&!f&&i.$resetCursorStyle(),g=null,E=null,m=0,F=null,R=null,A.removeListener(document,"mousemove",ce)}var re=null;function ce(){re==null&&(re=setTimeout(function(){re!=null&&_&&ae()},20))}function j(ie){var fe=ie.types;return!fe||Array.prototype.some.call(fe,function(he){return he=="text/plain"||he=="Text"})}function ee(ie){var fe=["copy","copymove","all","uninitialized"],he=["move","copymove","linkmove","all","uninitialized"],ye=h.isMac?ie.altKey:ie.ctrlKey,Te="uninitialized";try{Te=ie.dataTransfer.effectAllowed.toLowerCase()}catch{}var ke="none";return ye&&fe.indexOf(Te)>=0?ke="copy":he.indexOf(Te)>=0?ke="move":fe.indexOf(Te)>=0&&(ke="copy"),ke}}(function(){this.dragWait=function(){var n=Date.now()-this.mousedownEvent.time;n>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){var n=this.editor.container;n.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(n){this.editor.$resetCursorStyle(),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var n=this.editor,i=n.container;i.draggable=!0,n.renderer.$cursorLayer.setBlinking(!1),n.setStyle("ace_dragging");var o=h.isWin?"default":"move";n.renderer.setCursorStyle(o),this.setState("dragReady")},this.onMouseDrag=function(n){var i=this.editor.container;if(h.isIE&&this.state=="dragReady"){var o=r(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);o>3&&i.dragDrop()}if(this.state==="dragWait"){var o=r(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);o>0&&(i.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))}},this.onMouseDown=function(n){if(this.$dragEnabled){this.mousedownEvent=n;var i=this.editor,o=n.inSelection(),d=n.getButton(),v=n.domEvent.detail||1;if(v===1&&d===0&&o){if(n.editor.inMultiSelectMode&&(n.getAccelKey()||n.getShiftKey()))return;this.mousedownEvent.time=Date.now();var _=n.domEvent.target||n.domEvent.srcElement;if("unselectable"in _&&(_.unselectable="on"),i.getDragDelay()){if(h.isWebKit){this.cancelDrag=!0;var C=i.container;C.draggable=!0}this.setState("dragWait")}else this.startDrag();this.captureMouse(n,this.onMouseDrag.bind(this)),n.defaultPrevented=!0}}}}).call(e.prototype);function r(n,i,o,d){return Math.sqrt(Math.pow(o-n,2)+Math.pow(d-i,2))}D.DragdropHandler=e}),ace.define("ace/mouse/touch_handler",["require","exports","module","ace/mouse/mouse_event","ace/lib/event","ace/lib/dom"],function(a,D,z){var k=a("./mouse_event").MouseEvent,A=a("../lib/event"),h=a("../lib/dom");D.addTouchListeners=function(s,l){var t="scroll",e,r,n,i,o,d,v=0,_,C=0,$=0,c=0,g,E;function m(){var S=window.navigator&&window.navigator.clipboard,P=!1,G=function(){var ae=l.getCopyText(),re=l.session.getUndoManager().hasUndo();E.replaceChild(h.buildDom(P?["span",!ae&&["span",{class:"ace_mobile-button",action:"selectall"},"Select All"],ae&&["span",{class:"ace_mobile-button",action:"copy"},"Copy"],ae&&["span",{class:"ace_mobile-button",action:"cut"},"Cut"],S&&["span",{class:"ace_mobile-button",action:"paste"},"Paste"],re&&["span",{class:"ace_mobile-button",action:"undo"},"Undo"],["span",{class:"ace_mobile-button",action:"find"},"Find"],["span",{class:"ace_mobile-button",action:"openCommandPallete"},"Pallete"]]:["span"]),E.firstChild)},Z=function(ae){var re=ae.target.getAttribute("action");if(re=="more"||!P)return P=!P,G();re=="paste"?S.readText().then(function(ce){l.execCommand(re,ce)}):re&&((re=="cut"||re=="copy")&&(S?S.writeText(l.getCopyText()):document.execCommand("copy")),l.execCommand(re)),E.firstChild.style.display="none",P=!1,re!="openCommandPallete"&&l.focus()};E=h.buildDom(["div",{class:"ace_mobile-menu",ontouchstart:function(ae){t="menu",ae.stopPropagation(),ae.preventDefault(),l.textInput.focus()},ontouchend:function(ae){ae.stopPropagation(),ae.preventDefault(),Z(ae)},onclick:Z},["span"],["span",{class:"ace_mobile-button",action:"more"},"..."]],l.container)}function p(){E||m();var S=l.selection.cursor,P=l.renderer.textToScreenCoordinates(S.row,S.column),G=l.renderer.textToScreenCoordinates(0,0).pageX,Z=l.renderer.scrollLeft,ae=l.container.getBoundingClientRect();E.style.top=P.pageY-ae.top-3+"px",P.pageX-ae.left<ae.width-70?(E.style.left="",E.style.right="10px"):(E.style.right="",E.style.left=G+Z-ae.left+"px"),E.style.display="",E.firstChild.style.display="none",l.on("input",f)}function f(S){E&&(E.style.display="none"),l.off("input",f)}function F(){o=null,clearTimeout(o);var S=l.selection.getRange(),P=S.contains(_.row,_.column);(S.isEmpty()||!P)&&(l.selection.moveToPosition(_),l.selection.selectWord()),t="wait",p()}function R(){o=null,clearTimeout(o),l.selection.moveToPosition(_);var S=C>=2?l.selection.getLineRange(_.row):l.session.getBracketRange(_);S&&!S.isEmpty()?l.selection.setRange(S):l.selection.selectWord(),t="wait"}A.addListener(s,"contextmenu",function(S){if(g){var P=l.textInput.getElement();P.focus()}},l),A.addListener(s,"touchstart",function(S){var P=S.touches;if(o||P.length>1){clearTimeout(o),o=null,n=-1,t="zoom";return}g=l.$mouseHandler.isMousePressed=!0;var G=l.renderer.layerConfig.lineHeight,Z=l.renderer.layerConfig.lineHeight,ae=S.timeStamp;i=ae;var re=P[0],ce=re.clientX,j=re.clientY;Math.abs(e-ce)+Math.abs(r-j)>G&&(n=-1),e=S.clientX=ce,r=S.clientY=j,$=c=0;var ee=new k(S,l);if(_=ee.getDocumentPosition(),ae-n<500&&P.length==1&&!v)C++,S.preventDefault(),S.button=0,R();else{C=0;var ie=l.selection.cursor,fe=l.selection.isEmpty()?ie:l.selection.anchor,he=l.renderer.$cursorLayer.getPixelPosition(ie,!0),ye=l.renderer.$cursorLayer.getPixelPosition(fe,!0),Te=l.renderer.scroller.getBoundingClientRect(),ke=l.renderer.layerConfig.offset,Fe=l.renderer.scrollLeft,De=function(qe,B){return qe=qe/Z,B=B/G-.75,qe*qe+B*B};if(S.clientX<Te.left){t="zoom";return}var Pe=De(S.clientX-Te.left-he.left+Fe,S.clientY-Te.top-he.top+ke),Ye=De(S.clientX-Te.left-ye.left+Fe,S.clientY-Te.top-ye.top+ke);Pe<3.5&&Ye<3.5&&(t=Pe>Ye?"cursor":"anchor"),Ye<3.5?t="anchor":Pe<3.5?t="cursor":t="scroll",o=setTimeout(F,450)}n=ae},l),A.addListener(s,"touchend",function(S){g=l.$mouseHandler.isMousePressed=!1,d&&clearInterval(d),t=="zoom"?(t="",v=0):o?(l.selection.moveToPosition(_),v=0,p()):t=="scroll"?(I(),f()):p(),clearTimeout(o),o=null},l),A.addListener(s,"touchmove",function(S){o&&(clearTimeout(o),o=null);var P=S.touches;if(!(P.length>1||t=="zoom")){var G=P[0],Z=e-G.clientX,ae=r-G.clientY;if(t=="wait")if(Z*Z+ae*ae>4)t="cursor";else return S.preventDefault();e=G.clientX,r=G.clientY,S.clientX=G.clientX,S.clientY=G.clientY;var re=S.timeStamp,ce=re-i;if(i=re,t=="scroll"){var j=new k(S,l);j.speed=1,j.wheelX=Z,j.wheelY=ae,10*Math.abs(Z)<Math.abs(ae)&&(Z=0),10*Math.abs(ae)<Math.abs(Z)&&(ae=0),ce!=0&&($=Z/ce,c=ae/ce),l._emit("mousewheel",j),j.propagationStopped||($=c=0)}else{var ee=new k(S,l),ie=ee.getDocumentPosition();t=="cursor"?l.selection.moveCursorToPosition(ie):t=="anchor"&&l.selection.setSelectionAnchor(ie.row,ie.column),l.renderer.scrollCursorIntoView(ie),S.preventDefault()}}},l);function I(){v+=60,d=setInterval(function(){v--<=0&&(clearInterval(d),d=null),Math.abs($)<.01&&($=0),Math.abs(c)<.01&&(c=0),v<20&&($=.9*$),v<20&&(c=.9*c);var S=l.session.getScrollTop();l.renderer.scrollBy(10*$,10*c),S==l.session.getScrollTop()&&(v=0)},10)}}}),ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(a,D,z){var k=a("./dom");D.get=function(A,h){var s=new XMLHttpRequest;s.open("GET",A,!0),s.onreadystatechange=function(){s.readyState===4&&h(s.responseText)},s.send(null)},D.loadScript=function(A,h){var s=k.getDocumentHead(),l=document.createElement("script");l.src=A,s.appendChild(l),l.onload=l.onreadystatechange=function(t,e){(e||!l.readyState||l.readyState=="loaded"||l.readyState=="complete")&&(l=l.onload=l.onreadystatechange=null,e||h())}},D.qualifyURL=function(A){var h=document.createElement("a");return h.href=A,h.href}}),ace.define("ace/lib/event_emitter",["require","exports","module"],function(a,D,z){var k={},A=function(){this.propagationStopped=!0},h=function(){this.defaultPrevented=!0};k._emit=k._dispatchEvent=function(s,l){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var t=this._eventRegistry[s]||[],e=this._defaultHandlers[s];if(!(!t.length&&!e)){(typeof l!="object"||!l)&&(l={}),l.type||(l.type=s),l.stopPropagation||(l.stopPropagation=A),l.preventDefault||(l.preventDefault=h),t=t.slice();for(var r=0;r<t.length&&(t[r](l,this),!l.propagationStopped);r++);if(e&&!l.defaultPrevented)return e(l,this)}},k._signal=function(s,l){var t=(this._eventRegistry||{})[s];if(t){t=t.slice();for(var e=0;e<t.length;e++)t[e](l,this)}},k.once=function(s,l){var t=this;if(this.on(s,function e(){t.off(s,e),l.apply(null,arguments)}),!l)return new Promise(function(e){l=e})},k.setDefaultHandler=function(s,l){var t=this._defaultHandlers;if(t||(t=this._defaultHandlers={_disabled_:{}}),t[s]){var e=t[s],r=t._disabled_[s];r||(t._disabled_[s]=r=[]),r.push(e);var n=r.indexOf(l);n!=-1&&r.splice(n,1)}t[s]=l},k.removeDefaultHandler=function(s,l){var t=this._defaultHandlers;if(t){var e=t._disabled_[s];if(t[s]==l)e&&this.setDefaultHandler(s,e.pop());else if(e){var r=e.indexOf(l);r!=-1&&e.splice(r,1)}}},k.on=k.addEventListener=function(s,l,t){this._eventRegistry=this._eventRegistry||{};var e=this._eventRegistry[s];return e||(e=this._eventRegistry[s]=[]),e.indexOf(l)==-1&&e[t?"unshift":"push"](l),l},k.off=k.removeListener=k.removeEventListener=function(s,l){this._eventRegistry=this._eventRegistry||{};var t=this._eventRegistry[s];if(t){var e=t.indexOf(l);e!==-1&&t.splice(e,1)}},k.removeAllListeners=function(s){s||(this._eventRegistry=this._defaultHandlers=void 0),this._eventRegistry&&(this._eventRegistry[s]=void 0),this._defaultHandlers&&(this._defaultHandlers[s]=void 0)},D.EventEmitter=k}),ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(a,D,z){"no use strict";var k=a("./oop"),A=a("./event_emitter").EventEmitter,h={setOptions:function(e){Object.keys(e).forEach(function(r){this.setOption(r,e[r])},this)},getOptions:function(e){var r={};if(e)Array.isArray(e)||(r=e,e=Object.keys(r));else{var n=this.$options;e=Object.keys(n).filter(function(i){return!n[i].hidden})}return e.forEach(function(i){r[i]=this.getOption(i)},this),r},setOption:function(e,r){if(this["$"+e]!==r){var n=this.$options[e];if(!n)return s('misspelled option "'+e+'"');if(n.forwardTo)return this[n.forwardTo]&&this[n.forwardTo].setOption(e,r);n.handlesSet||(this["$"+e]=r),n&&n.set&&n.set.call(this,r)}},getOption:function(e){var r=this.$options[e];return r?r.forwardTo?this[r.forwardTo]&&this[r.forwardTo].getOption(e):r&&r.get?r.get.call(this):this["$"+e]:s('misspelled option "'+e+'"')}};function s(e){typeof console<"u"&&console.warn&&console.warn.apply(console,arguments)}function l(e,r){var n=new Error(e);n.data=r,typeof console=="object"&&console.error&&console.error(n),setTimeout(function(){throw n})}var t=function(){this.$defaultOptions={}};(function(){k.implement(this,A),this.defineOptions=function(e,r,n){return e.$options||(this.$defaultOptions[r]=e.$options={}),Object.keys(n).forEach(function(i){var o=n[i];typeof o=="string"&&(o={forwardTo:o}),o.name||(o.name=i),e.$options[o.name]=o,"initialValue"in o&&(e["$"+o.name]=o.initialValue)}),k.implement(e,h),this},this.resetOptions=function(e){Object.keys(e.$options).forEach(function(r){var n=e.$options[r];"value"in n&&e.setOption(r,n.value)})},this.setDefaultValue=function(e,r,n){if(!e){for(e in this.$defaultOptions)if(this.$defaultOptions[e][r])break;if(!this.$defaultOptions[e][r])return!1}var i=this.$defaultOptions[e]||(this.$defaultOptions[e]={});i[r]&&(i.forwardTo?this.setDefaultValue(i.forwardTo,r,n):i[r].value=n)},this.setDefaultValues=function(e,r){Object.keys(r).forEach(function(n){this.setDefaultValue(e,n,r[n])},this)},this.warn=s,this.reportError=l}).call(t.prototype),D.AppConfig=t}),ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/lib/net","ace/lib/app_config"],function(a,D,z){"no use strict";var k=a("./lib/lang");a("./lib/oop");var A=a("./lib/net"),h=a("./lib/app_config").AppConfig;z.exports=D=new h;var s=function(){return this||typeof window<"u"&&window}(),l={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{},loadWorkerFromBlob:!0,sharedPopups:!1};D.get=function(n){if(!l.hasOwnProperty(n))throw new Error("Unknown config key: "+n);return l[n]},D.set=function(n,i){if(l.hasOwnProperty(n))l[n]=i;else if(this.setDefaultValue("",n,i)==!1)throw new Error("Unknown config key: "+n)},D.all=function(){return k.copyObject(l)},D.$modes={},D.moduleUrl=function(n,i){if(l.$moduleUrls[n])return l.$moduleUrls[n];var o=n.split("/");i=i||o[o.length-2]||"";var d=i=="snippets"?"/":"-",v=o[o.length-1];if(i=="worker"&&d=="-"){var _=new RegExp("^"+i+"[\\-_]|[\\-_]"+i+"$","g");v=v.replace(_,"")}(!v||v==i)&&o.length>1&&(v=o[o.length-2]);var C=l[i+"Path"];return C==null?C=l.basePath:d=="/"&&(i=d=""),C&&C.slice(-1)!="/"&&(C+="/"),C+i+d+v+this.get("suffix")},D.setModuleUrl=function(n,i){return l.$moduleUrls[n]=i},D.$loading={},D.loadModule=function(n,i){var o,d;Array.isArray(n)&&(d=n[0],n=n[1]);try{o=a(n)}catch{}if(o&&!D.$loading[n])return i&&i(o);if(D.$loading[n]||(D.$loading[n]=[]),D.$loading[n].push(i),!(D.$loading[n].length>1)){var v=function(){a([n],function(_){D._emit("load.module",{name:n,module:_});var C=D.$loading[n];D.$loading[n]=null,C.forEach(function($){$&&$(_)})})};if(!D.get("packaged"))return v();A.loadScript(D.moduleUrl(n,d),v),t()}};var t=function(){!l.basePath&&!l.workerPath&&!l.modePath&&!l.themePath&&!Object.keys(l.$moduleUrls).length&&(console.error("Unable to infer path to ace from script src,","use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes","or with webpack use ace/webpack-resolver"),t=function(){})};e(!0);function e(n){if(!(!s||!s.document)){l.packaged=n||a.packaged||z.packaged||s.define&&(void 0).packaged;for(var i={},o="",d=document.currentScript||document._currentScript,v=d&&d.ownerDocument||document,_=v.getElementsByTagName("script"),C=0;C<_.length;C++){var $=_[C],c=$.src||$.getAttribute("src");if(c){for(var g=$.attributes,E=0,m=g.length;E<m;E++){var p=g[E];p.name.indexOf("data-ace-")===0&&(i[r(p.name.replace(/^data-ace-/,""))]=p.value)}var f=c.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/);f&&(o=f[1])}}o&&(i.base=i.base||o,i.packaged=!0),i.basePath=i.base,i.workerPath=i.workerPath||i.base,i.modePath=i.modePath||i.base,i.themePath=i.themePath||i.base,delete i.base;for(var F in i)typeof i[F]<"u"&&D.set(F,i[F])}}D.init=e;function r(n){return n.replace(/-(.)/g,function(i,o){return o.toUpperCase()})}D.version="1.4.12"}),ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/mouse/touch_handler","ace/config"],function(a,D,z){var k=a("../lib/event"),A=a("../lib/useragent"),h=a("./default_handlers").DefaultHandlers,s=a("./default_gutter_handler").GutterHandler,l=a("./mouse_event").MouseEvent,t=a("./dragdrop_handler").DragdropHandler,e=a("./touch_handler").addTouchListeners,r=a("../config"),n=function(i){var o=this;this.editor=i,new h(this),new s(this),new t(this);var d=function(C){var $=!document.hasFocus||!document.hasFocus()||!i.isFocused()&&document.activeElement==(i.textInput&&i.textInput.getElement());$&&window.focus(),i.focus()},v=i.renderer.getMouseEventTarget();k.addListener(v,"click",this.onMouseEvent.bind(this,"click"),i),k.addListener(v,"mousemove",this.onMouseMove.bind(this,"mousemove"),i),k.addMultiMouseDownListener([v,i.renderer.scrollBarV&&i.renderer.scrollBarV.inner,i.renderer.scrollBarH&&i.renderer.scrollBarH.inner,i.textInput&&i.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent",i),k.addMouseWheelListener(i.container,this.onMouseWheel.bind(this,"mousewheel"),i),e(i.container,i);var _=i.renderer.$gutter;k.addListener(_,"mousedown",this.onMouseEvent.bind(this,"guttermousedown"),i),k.addListener(_,"click",this.onMouseEvent.bind(this,"gutterclick"),i),k.addListener(_,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick"),i),k.addListener(_,"mousemove",this.onMouseEvent.bind(this,"guttermousemove"),i),k.addListener(v,"mousedown",d,i),k.addListener(_,"mousedown",d,i),A.isIE&&i.renderer.scrollBarV&&(k.addListener(i.renderer.scrollBarV.element,"mousedown",d,i),k.addListener(i.renderer.scrollBarH.element,"mousedown",d,i)),i.on("mousemove",function(C){if(!(o.state||o.$dragDelay||!o.$dragEnabled)){var $=i.renderer.screenToTextCoordinates(C.x,C.y),c=i.session.selection.getRange(),g=i.renderer;!c.isEmpty()&&c.insideStart($.row,$.column)?g.setCursorStyle("default"):g.setCursorStyle("")}},i)};(function(){this.onMouseEvent=function(i,o){this.editor._emit(i,new l(o,this.editor))},this.onMouseMove=function(i,o){var d=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;!d||!d.length||this.editor._emit(i,new l(o,this.editor))},this.onMouseWheel=function(i,o){var d=new l(o,this.editor);d.speed=this.$scrollSpeed*2,d.wheelX=o.wheelX,d.wheelY=o.wheelY,this.editor._emit(i,d)},this.setState=function(i){this.state=i},this.captureMouse=function(i,o){this.x=i.x,this.y=i.y,this.isMousePressed=!0;var d=this.editor,v=this.editor.renderer;v.$isMousePressed=!0;var _=this,C=function(m){if(m){if(A.isWebKit&&!m.which&&_.releaseMouse)return _.releaseMouse();_.x=m.clientX,_.y=m.clientY,o&&o(m),_.mouseEvent=new l(m,_.editor),_.$mouseMoved=!0}},$=function(m){d.off("beforeEndOperation",g),clearInterval(E),c(),_[_.state+"End"]&&_[_.state+"End"](m),_.state="",_.isMousePressed=v.$isMousePressed=!1,v.$keepTextAreaAtCursor&&v.$moveTextAreaToCursor(),_.$onCaptureMouseMove=_.releaseMouse=null,m&&_.onMouseEvent("mouseup",m),d.endOperation()},c=function(){_[_.state]&&_[_.state](),_.$mouseMoved=!1};if(A.isOldIE&&i.domEvent.type=="dblclick")return setTimeout(function(){$(i)});var g=function(m){_.releaseMouse&&d.curOp.command.name&&d.curOp.selectionChanged&&(_[_.state+"End"]&&_[_.state+"End"](),_.state="",_.releaseMouse())};d.on("beforeEndOperation",g),d.startOperation({command:{name:"mouse"}}),_.$onCaptureMouseMove=C,_.releaseMouse=k.capture(this.editor.container,C,$);var E=setInterval(c,20)},this.releaseMouse=null,this.cancelContextMenu=function(){var i=(function(o){o&&o.domEvent&&o.domEvent.type!="contextmenu"||(this.editor.off("nativecontextmenu",i),o&&o.domEvent&&k.stopEvent(o.domEvent))}).bind(this);setTimeout(i,10),this.editor.on("nativecontextmenu",i)},this.destroy=function(){this.releaseMouse&&this.releaseMouse()}}).call(n.prototype),r.defineOptions(n.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:A.isMac?150:0},dragEnabled:{initialValue:!0},focusTimeout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),D.MouseHandler=n}),ace.define("ace/mouse/fold_handler",["require","exports","module","ace/lib/dom"],function(a,D,z){var k=a("../lib/dom");function A(h){h.on("click",function(s){var l=s.getDocumentPosition(),t=h.session,e=t.getFoldAt(l.row,l.column,1);e&&(s.getAccelKey()?t.removeFold(e):t.expandFold(e),s.stop());var r=s.domEvent&&s.domEvent.target;r&&k.hasCssClass(r,"ace_inline_button")&&k.hasCssClass(r,"ace_toggle_wrap")&&(t.setOption("wrap",!t.getUseWrapMode()),h.renderer.scrollCursorIntoView())}),h.on("gutterclick",function(s){var l=h.renderer.$gutterLayer.getRegion(s);if(l=="foldWidgets"){var t=s.getDocumentPosition().row,e=h.session;e.foldWidgets&&e.foldWidgets[t]&&h.session.onFoldWidgetClick(t,s),h.isFocused()||h.focus(),s.stop()}}),h.on("gutterdblclick",function(s){var l=h.renderer.$gutterLayer.getRegion(s);if(l=="foldWidgets"){var t=s.getDocumentPosition().row,e=h.session,r=e.getParentFoldRangeData(t,!0),n=r.range||r.firstRange;if(n){t=n.start.row;var i=e.getFoldAt(t,e.getLine(t).length,1);i?e.removeFold(i):(e.addFold("...",n),h.renderer.scrollCursorIntoView({row:n.start.row,column:0}))}s.stop()}})}D.FoldHandler=A}),ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(a,D,z){var k=a("../lib/keys"),A=a("../lib/event"),h=function(s){this.$editor=s,this.$data={editor:s},this.$handlers=[],this.setDefaultHandler(s.commands)};(function(){this.setDefaultHandler=function(s){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=s,this.addKeyboardHandler(s,0)},this.setKeyboardHandler=function(s){var l=this.$handlers;if(l[l.length-1]!=s){for(;l[l.length-1]&&l[l.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(l[l.length-1]);this.addKeyboardHandler(s,1)}},this.addKeyboardHandler=function(s,l){if(s){typeof s=="function"&&!s.handleKeyboard&&(s.handleKeyboard=s);var t=this.$handlers.indexOf(s);t!=-1&&this.$handlers.splice(t,1),l==null?this.$handlers.push(s):this.$handlers.splice(l,0,s),t==-1&&s.attach&&s.attach(this.$editor)}},this.removeKeyboardHandler=function(s){var l=this.$handlers.indexOf(s);return l==-1?!1:(this.$handlers.splice(l,1),s.detach&&s.detach(this.$editor),!0)},this.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},this.getStatusText=function(){var s=this.$data,l=s.editor;return this.$handlers.map(function(t){return t.getStatusText&&t.getStatusText(l,s)||""}).filter(Boolean).join(" ")},this.$callKeyboardHandlers=function(s,l,t,e){for(var r,n=!1,i=this.$editor.commands,o=this.$handlers.length;o--&&(r=this.$handlers[o].handleKeyboard(this.$data,s,l,t,e),!(!(!r||!r.command)&&(r.command=="null"?n=!0:n=i.exec(r.command,this.$editor,r.args,e),n&&e&&s!=-1&&r.passEvent!=!0&&r.command.passEvent!=!0&&A.stopEvent(e),n))););return!n&&s==-1&&(r={command:"insertstring"},n=i.exec("insertstring",this.$editor,l)),n&&this.$editor._signal&&this.$editor._signal("keyboardActivity",r),n},this.onCommandKey=function(s,l,t){var e=k.keyCodeToString(t);return this.$callKeyboardHandlers(l,e,t,s)},this.onTextInput=function(s){return this.$callKeyboardHandlers(-1,s)}}).call(h.prototype),D.KeyBinding=h}),ace.define("ace/lib/bidiutil",["require","exports","module"],function(a,D,z){var k=0,A=0,h=!1,s=!1,l=!1,t=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],e=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],r=0,n=1,i=0,o=1,d=2,v=3,_=4,C=5,$=6,c=7,g=8,E=9,m=10,p=11,f=12,F=13,R=14,I=15,S=16,P=17,G=18,Z=[G,G,G,G,G,G,G,G,G,$,C,$,g,C,G,G,G,G,G,G,G,G,G,G,G,G,G,G,C,C,C,$,g,_,_,p,p,p,_,_,_,_,_,m,E,m,E,E,d,d,d,d,d,d,d,d,d,d,E,_,_,_,_,_,_,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,_,_,_,_,_,_,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,i,_,_,_,_,G,G,G,G,G,G,C,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,G,E,_,p,p,p,p,_,_,_,_,i,_,_,G,_,_,p,p,d,d,_,i,_,_,_,d,i,_,_,_,_,_],ae=[g,g,g,g,g,g,g,g,g,g,g,G,G,G,i,o,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,g,C,F,R,I,S,P,E,p,p,p,p,p,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,E,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,_,g];function re(ie,fe,he,ye){var Te=k?e:t,ke=null,Fe=null,De=null,Pe=0,Ye=null,qe=null,B=-1,_e=null,me=null,te=[];if(!ye)for(_e=0,ye=[];_e<he;_e++)ye[_e]=ee(ie[_e]);for(A=k,h=!1,s=!1,l=!1,me=0;me<he;me++){if(ke=Pe,te[me]=Fe=j(ie,ye,te,me),Pe=Te[ke][Fe],Ye=Pe&240,Pe&=15,fe[me]=De=Te[Pe][5],Ye>0)if(Ye==16){for(_e=B;_e<me;_e++)fe[_e]=1;B=-1}else B=-1;if(qe=Te[Pe][6],qe)B==-1&&(B=me);else if(B>-1){for(_e=B;_e<me;_e++)fe[_e]=De;B=-1}ye[me]==C&&(fe[me]=0),A|=De}if(l){for(_e=0;_e<he;_e++)if(ye[_e]==$){fe[_e]=k;for(var Q=_e-1;Q>=0&&ye[Q]==g;Q--)fe[Q]=k}}}function ce(ie,fe,he){if(!(A<ie)){if(ie==1&&k==n&&!s){he.reverse();return}for(var ye=he.length,Te=0,ke,Fe,De,Pe;Te<ye;){if(fe[Te]>=ie){for(ke=Te+1;ke<ye&&fe[ke]>=ie;)ke++;for(Fe=Te,De=ke-1;Fe<De;Fe++,De--)Pe=he[Fe],he[Fe]=he[De],he[De]=Pe;Te=ke}Te++}}}function j(ie,fe,he,ye){var Te=fe[ye],ke,Fe,De,Pe;switch(Te){case i:case o:h=!1;case _:case v:return Te;case d:return h?v:d;case c:return h=!0,o;case g:return _;case E:return ye<1||ye+1>=fe.length||(ke=he[ye-1])!=d&&ke!=v||(Fe=fe[ye+1])!=d&&Fe!=v?_:(h&&(Fe=v),Fe==ke?Fe:_);case m:return ke=ye>0?he[ye-1]:C,ke==d&&ye+1<fe.length&&fe[ye+1]==d?d:_;case p:if(ye>0&&he[ye-1]==d)return d;if(h)return _;for(Pe=ye+1,De=fe.length;Pe<De&&fe[Pe]==p;)Pe++;return Pe<De&&fe[Pe]==d?d:_;case f:for(De=fe.length,Pe=ye+1;Pe<De&&fe[Pe]==f;)Pe++;if(Pe<De){var Ye=ie[ye],qe=Ye>=1425&&Ye<=2303||Ye==64286;if(ke=fe[Pe],qe&&(ke==o||ke==c))return o}return ye<1||(ke=fe[ye-1])==C?_:he[ye-1];case C:return h=!1,s=!0,k;case $:return l=!0,_;case F:case R:case S:case P:case I:h=!1;case G:return _}}function ee(ie){var fe=ie.charCodeAt(0),he=fe>>8;return he==0?fe>191?i:Z[fe]:he==5?/[\u0591-\u05f4]/.test(ie)?o:i:he==6?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(ie)?f:/[\u0660-\u0669\u066b-\u066c]/.test(ie)?v:fe==1642?p:/[\u06f0-\u06f9]/.test(ie)?d:c:he==32&&fe<=8287?ae[fe&255]:he==254&&fe>=65136?c:_}D.L=i,D.R=o,D.EN=d,D.ON_R=3,D.AN=4,D.R_H=5,D.B=6,D.RLE=7,D.DOT="·",D.doBidiReorder=function(ie,fe,he){if(ie.length<2)return{};var ye=ie.split(""),Te=new Array(ye.length),ke=new Array(ye.length),Fe=[];k=he?n:r,re(ye,Fe,ye.length,fe);for(var De=0;De<Te.length;Te[De]=De,De++);ce(2,Fe,Te),ce(1,Fe,Te);for(var De=0;De<Te.length-1;De++)fe[De]===v?Fe[De]=D.AN:Fe[De]===o&&(fe[De]>c&&fe[De]<F||fe[De]===_||fe[De]===G)?Fe[De]=D.ON_R:De>0&&ye[De-1]==="ل"&&/\u0622|\u0623|\u0625|\u0627/.test(ye[De])&&(Fe[De-1]=Fe[De]=D.R_H,De++);ye[ye.length-1]===D.DOT&&(Fe[ye.length-1]=D.B),ye[0]==="‫"&&(Fe[0]=D.RLE);for(var De=0;De<Te.length;De++)ke[De]=Fe[Te[De]];return{logicalFromVisual:Te,bidiLevels:ke}},D.hasBidiCharacters=function(ie,fe){for(var he=!1,ye=0;ye<ie.length;ye++)fe[ye]=ee(ie.charAt(ye)),!he&&(fe[ye]==o||fe[ye]==c||fe[ye]==v)&&(he=!0);return he},D.getVisualFromLogicalIdx=function(ie,fe){for(var he=0;he<fe.logicalFromVisual.length;he++)if(fe.logicalFromVisual[he]==ie)return he;return 0}}),ace.define("ace/bidihandler",["require","exports","module","ace/lib/bidiutil","ace/lib/lang"],function(a,D,z){var k=a("./lib/bidiutil"),A=a("./lib/lang"),h=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\u202B]/,s=function(l){this.session=l,this.bidiMap={},this.currentRow=null,this.bidiUtil=k,this.charWidths=[],this.EOL="¬",this.showInvisibles=!0,this.isRtlDir=!1,this.$isRtl=!1,this.line="",this.wrapIndent=0,this.EOF="¶",this.RLE="‫",this.contentWidth=0,this.fontMetrics=null,this.rtlLineOffset=0,this.wrapOffset=0,this.isMoveLeftOperation=!1,this.seenBidi=h.test(l.getValue())};(function(){this.isBidiRow=function(l,t,e){return this.seenBidi?(l!==this.currentRow&&(this.currentRow=l,this.updateRowLine(t,e),this.updateBidiMap()),this.bidiMap.bidiLevels):!1},this.onChange=function(l){this.seenBidi?this.currentRow=null:l.action=="insert"&&h.test(l.lines.join(`
`))&&(this.seenBidi=!0,this.currentRow=null)},this.getDocumentRow=function(){var l=0,t=this.session.$screenRowCache;if(t.length){var e=this.session.$getRowCacheIndex(t,this.currentRow);e>=0&&(l=this.session.$docRowCache[e])}return l},this.getSplitIndex=function(){var l=0,t=this.session.$screenRowCache;if(t.length)for(var e,r=this.session.$getRowCacheIndex(t,this.currentRow);this.currentRow-l>0&&(e=this.session.$getRowCacheIndex(t,this.currentRow-l-1),e===r);)r=e,l++;else l=this.currentRow;return l},this.updateRowLine=function(l,t){l===void 0&&(l=this.getDocumentRow());var e=l===this.session.getLength()-1,r=e?this.EOF:this.EOL;if(this.wrapIndent=0,this.line=this.session.getLine(l),this.isRtlDir=this.$isRtl||this.line.charAt(0)===this.RLE,this.session.$useWrapMode){var n=this.session.$wrapData[l];n&&(t===void 0&&(t=this.getSplitIndex()),t>0&&n.length?(this.wrapIndent=n.indent,this.wrapOffset=this.wrapIndent*this.charWidths[k.L],this.line=t<n.length?this.line.substring(n[t-1],n[t]):this.line.substring(n[n.length-1])):this.line=this.line.substring(0,n[t])),t==n.length&&(this.line+=this.showInvisibles?r:k.DOT)}else this.line+=this.showInvisibles?r:k.DOT;var i=this.session,o=0,d;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,function(v,_){return v==="	"||i.isFullWidth(v.charCodeAt(0))?(d=v==="	"?i.getScreenTabSize(_+o):2,o+=d-1,A.stringRepeat(k.DOT,d)):v}),this.isRtlDir&&(this.fontMetrics.$main.textContent=this.line.charAt(this.line.length-1)==k.DOT?this.line.substr(0,this.line.length-1):this.line,this.rtlLineOffset=this.contentWidth-this.fontMetrics.$main.getBoundingClientRect().width)},this.updateBidiMap=function(){var l=[];k.hasBidiCharacters(this.line,l)||this.isRtlDir?this.bidiMap=k.doBidiReorder(this.line,l,this.isRtlDir):this.bidiMap={}},this.markAsDirty=function(){this.currentRow=null},this.updateCharacterWidths=function(l){if(this.characterWidth!==l.$characterSize.width){this.fontMetrics=l;var t=this.characterWidth=l.$characterSize.width,e=l.$measureCharWidth("ה");this.charWidths[k.L]=this.charWidths[k.EN]=this.charWidths[k.ON_R]=t,this.charWidths[k.R]=this.charWidths[k.AN]=e,this.charWidths[k.R_H]=e*.45,this.charWidths[k.B]=this.charWidths[k.RLE]=0,this.currentRow=null}},this.setShowInvisibles=function(l){this.showInvisibles=l,this.currentRow=null},this.setEolChar=function(l){this.EOL=l},this.setContentWidth=function(l){this.contentWidth=l},this.isRtlLine=function(l){return this.$isRtl?!0:l!=null?this.session.getLine(l).charAt(0)==this.RLE:this.isRtlDir},this.setRtlDirection=function(l,t){for(var e=l.getCursorPosition(),r=l.selection.getSelectionAnchor().row;r<=e.row;r++)!t&&l.session.getLine(r).charAt(0)===l.session.$bidiHandler.RLE?l.session.doc.removeInLine(r,0,1):t&&l.session.getLine(r).charAt(0)!==l.session.$bidiHandler.RLE&&l.session.doc.insert({column:0,row:r},l.session.$bidiHandler.RLE)},this.getPosLeft=function(l){l-=this.wrapIndent;var t=this.line.charAt(0)===this.RLE?1:0,e=l>t?this.session.getOverwrite()?l:l-1:t,r=k.getVisualFromLogicalIdx(e,this.bidiMap),n=this.bidiMap.bidiLevels,i=0;!this.session.getOverwrite()&&l<=t&&n[r]%2!==0&&r++;for(var o=0;o<r;o++)i+=this.charWidths[n[o]];return!this.session.getOverwrite()&&l>t&&n[r]%2===0&&(i+=this.charWidths[n[r]]),this.wrapIndent&&(i+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset),this.isRtlDir&&(i+=this.rtlLineOffset),i},this.getSelections=function(l,t){var e=this.bidiMap,r=e.bidiLevels,n,i=[],o=0,d=Math.min(l,t)-this.wrapIndent,v=Math.max(l,t)-this.wrapIndent,_=!1,C=!1,$=0;this.wrapIndent&&(o+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(var c,g=0;g<r.length;g++)c=e.logicalFromVisual[g],n=r[g],_=c>=d&&c<v,_&&!C?$=o:!_&&C&&i.push({left:$,width:o-$}),o+=this.charWidths[n],C=_;if(_&&g===r.length&&i.push({left:$,width:o-$}),this.isRtlDir)for(var E=0;E<i.length;E++)i[E].left+=this.rtlLineOffset;return i},this.offsetToCol=function(e){this.isRtlDir&&(e-=this.rtlLineOffset);var t=0,e=Math.max(e,0),r=0,n=0,i=this.bidiMap.bidiLevels,o=this.charWidths[i[n]];for(this.wrapIndent&&(e-=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);e>r+o/2;){if(r+=o,n===i.length-1){o=0;break}o=this.charWidths[i[++n]]}return n>0&&i[n-1]%2!==0&&i[n]%2===0?(e<r&&n--,t=this.bidiMap.logicalFromVisual[n]):n>0&&i[n-1]%2===0&&i[n]%2!==0?t=1+(e>r?this.bidiMap.logicalFromVisual[n]:this.bidiMap.logicalFromVisual[n-1]):this.isRtlDir&&n===i.length-1&&o===0&&i[n-1]%2===0||!this.isRtlDir&&n===0&&i[n]%2!==0?t=1+this.bidiMap.logicalFromVisual[n]:(n>0&&i[n-1]%2!==0&&o!==0&&n--,t=this.bidiMap.logicalFromVisual[n]),t===0&&this.isRtlDir&&t++,t+this.wrapIndent}}).call(s.prototype),D.BidiHandler=s}),ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(a,D,z){var k=a("./lib/oop"),A=a("./lib/lang"),h=a("./lib/event_emitter").EventEmitter,s=a("./range").Range,l=function(t){this.session=t,this.doc=t.getDocument(),this.clearSelection(),this.cursor=this.lead=this.doc.createAnchor(0,0),this.anchor=this.doc.createAnchor(0,0),this.$silent=!1;var e=this;this.cursor.on("change",function(r){e.$cursorChanged=!0,e.$silent||e._emit("changeCursor"),!e.$isEmpty&&!e.$silent&&e._emit("changeSelection"),!e.$keepDesiredColumnOnChange&&r.old.column!=r.value.column&&(e.$desiredColumn=null)}),this.anchor.on("change",function(){e.$anchorChanged=!0,!e.$isEmpty&&!e.$silent&&e._emit("changeSelection")})};(function(){k.implement(this,h),this.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},this.isMultiLine=function(){return!this.$isEmpty&&this.anchor.row!=this.cursor.row},this.getCursor=function(){return this.lead.getPosition()},this.setSelectionAnchor=function(t,e){this.$isEmpty=!1,this.anchor.setPosition(t,e)},this.getAnchor=this.getSelectionAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},this.getSelectionLead=function(){return this.lead.getPosition()},this.isBackwards=function(){var t=this.anchor,e=this.lead;return t.row>e.row||t.row==e.row&&t.column>e.column},this.getRange=function(){var t=this.anchor,e=this.lead;return this.$isEmpty?s.fromPoints(e,e):this.isBackwards()?s.fromPoints(e,t):s.fromPoints(t,e)},this.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},this.selectAll=function(){this.$setSelection(0,0,Number.MAX_VALUE,Number.MAX_VALUE)},this.setRange=this.setSelectionRange=function(t,e){var r=e?t.end:t.start,n=e?t.start:t.end;this.$setSelection(r.row,r.column,n.row,n.column)},this.$setSelection=function(t,e,r,n){if(!this.$silent){var i=this.$isEmpty,o=this.inMultiSelectMode;this.$silent=!0,this.$cursorChanged=this.$anchorChanged=!1,this.anchor.setPosition(t,e),this.cursor.setPosition(r,n),this.$isEmpty=!s.comparePoints(this.anchor,this.cursor),this.$silent=!1,this.$cursorChanged&&this._emit("changeCursor"),(this.$cursorChanged||this.$anchorChanged||i!=this.$isEmpty||o)&&this._emit("changeSelection")}},this.$moveSelection=function(t){var e=this.lead;this.$isEmpty&&this.setSelectionAnchor(e.row,e.column),t.call(this)},this.selectTo=function(t,e){this.$moveSelection(function(){this.moveCursorTo(t,e)})},this.selectToPosition=function(t){this.$moveSelection(function(){this.moveCursorToPosition(t)})},this.moveTo=function(t,e){this.clearSelection(),this.moveCursorTo(t,e)},this.moveToPosition=function(t){this.clearSelection(),this.moveCursorToPosition(t)},this.selectUp=function(){this.$moveSelection(this.moveCursorUp)},this.selectDown=function(){this.$moveSelection(this.moveCursorDown)},this.selectRight=function(){this.$moveSelection(this.moveCursorRight)},this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},this.getWordRange=function(t,e){if(typeof e>"u"){var r=t||this.lead;t=r.row,e=r.column}return this.session.getWordRange(t,e)},this.selectWord=function(){this.setSelectionRange(this.getWordRange())},this.selectAWord=function(){var t=this.getCursor(),e=this.session.getAWordRange(t.row,t.column);this.setSelectionRange(e)},this.getLineRange=function(t,e){var r=typeof t=="number"?t:this.lead.row,n,i=this.session.getFoldLine(r);return i?(r=i.start.row,n=i.end.row):n=r,e===!0?new s(r,0,n,this.session.getLine(n).length):new s(r,0,n+1,0)},this.selectLine=function(){this.setSelectionRange(this.getLineRange())},this.moveCursorUp=function(){this.moveCursorBy(-1,0)},this.moveCursorDown=function(){this.moveCursorBy(1,0)},this.wouldMoveIntoSoftTab=function(t,e,r){var n=t.column,i=t.column+e;return r<0&&(n=t.column-e,i=t.column),this.session.isTabStop(t)&&this.doc.getLine(t.row).slice(n,i).split(" ").length-1==e},this.moveCursorLeft=function(){var t=this.lead.getPosition(),e;if(e=this.session.getFoldAt(t.row,t.column,-1))this.moveCursorTo(e.start.row,e.start.column);else if(t.column===0)t.row>0&&this.moveCursorTo(t.row-1,this.doc.getLine(t.row-1).length);else{var r=this.session.getTabSize();this.wouldMoveIntoSoftTab(t,r,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-r):this.moveCursorBy(0,-1)}},this.moveCursorRight=function(){var t=this.lead.getPosition(),e;if(e=this.session.getFoldAt(t.row,t.column,1))this.moveCursorTo(e.end.row,e.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var r=this.session.getTabSize(),t=this.lead;this.wouldMoveIntoSoftTab(t,r,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,r):this.moveCursorBy(0,1)}},this.moveCursorLineStart=function(){var t=this.lead.row,e=this.lead.column,r=this.session.documentToScreenRow(t,e),n=this.session.screenToDocumentPosition(r,0),i=this.session.getDisplayLine(t,null,n.row,n.column),o=i.match(/^\s*/);o[0].length!=e&&!this.session.$useEmacsStyleLineStart&&(n.column+=o[0].length),this.moveCursorToPosition(n)},this.moveCursorLineEnd=function(){var t=this.lead,e=this.session.getDocumentLastRowColumnPosition(t.row,t.column);if(this.lead.column==e.column){var r=this.session.getLine(e.row);if(e.column==r.length){var n=r.search(/\s+$/);n>0&&(e.column=n)}}this.moveCursorTo(e.row,e.column)},this.moveCursorFileEnd=function(){var t=this.doc.getLength()-1,e=this.doc.getLine(t).length;this.moveCursorTo(t,e)},this.moveCursorFileStart=function(){this.moveCursorTo(0,0)},this.moveCursorLongWordRight=function(){var t=this.lead.row,e=this.lead.column,r=this.doc.getLine(t),n=r.substring(e);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var i=this.session.getFoldAt(t,e,1);if(i){this.moveCursorTo(i.end.row,i.end.column);return}if(this.session.nonTokenRe.exec(n)&&(e+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,n=r.substring(e)),e>=r.length){this.moveCursorTo(t,r.length),this.moveCursorRight(),t<this.doc.getLength()-1&&this.moveCursorWordRight();return}this.session.tokenRe.exec(n)&&(e+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(t,e)},this.moveCursorLongWordLeft=function(){var t=this.lead.row,e=this.lead.column,r;if(r=this.session.getFoldAt(t,e,-1)){this.moveCursorTo(r.start.row,r.start.column);return}var n=this.session.getFoldStringAt(t,e,-1);n==null&&(n=this.doc.getLine(t).substring(0,e));var i=A.stringReverse(n);if(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(i)&&(e-=this.session.nonTokenRe.lastIndex,i=i.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),e<=0){this.moveCursorTo(t,0),this.moveCursorLeft(),t>0&&this.moveCursorWordLeft();return}this.session.tokenRe.exec(i)&&(e-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(t,e)},this.$shortWordEndIndex=function(t){var e=0,r,n=/\s/,i=this.session.tokenRe;if(i.lastIndex=0,this.session.tokenRe.exec(t))e=this.session.tokenRe.lastIndex;else{for(;(r=t[e])&&n.test(r);)e++;if(e<1){for(i.lastIndex=0;(r=t[e])&&!i.test(r);)if(i.lastIndex=0,e++,n.test(r))if(e>2){e--;break}else{for(;(r=t[e])&&n.test(r);)e++;if(e>2)break}}}return i.lastIndex=0,e},this.moveCursorShortWordRight=function(){var t=this.lead.row,e=this.lead.column,r=this.doc.getLine(t),n=r.substring(e),i=this.session.getFoldAt(t,e,1);if(i)return this.moveCursorTo(i.end.row,i.end.column);if(e==r.length){var o=this.doc.getLength();do t++,n=this.doc.getLine(t);while(t<o&&/^\s*$/.test(n));/^\s+/.test(n)||(n=""),e=0}var d=this.$shortWordEndIndex(n);this.moveCursorTo(t,e+d)},this.moveCursorShortWordLeft=function(){var t=this.lead.row,e=this.lead.column,r;if(r=this.session.getFoldAt(t,e,-1))return this.moveCursorTo(r.start.row,r.start.column);var n=this.session.getLine(t).substring(0,e);if(e===0){do t--,n=this.doc.getLine(t);while(t>0&&/^\s*$/.test(n));e=n.length,/\s+$/.test(n)||(n="")}var i=A.stringReverse(n),o=this.$shortWordEndIndex(i);return this.moveCursorTo(t,e-o)},this.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},this.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},this.moveCursorBy=function(t,e){var r=this.session.documentToScreenPosition(this.lead.row,this.lead.column),n;if(e===0&&(t!==0&&(this.session.$bidiHandler.isBidiRow(r.row,this.lead.row)?(n=this.session.$bidiHandler.getPosLeft(r.column),r.column=Math.round(n/this.session.$bidiHandler.charWidths[0])):n=r.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?r.column=this.$desiredColumn:this.$desiredColumn=r.column),t!=0&&this.session.lineWidgets&&this.session.lineWidgets[this.lead.row]){var i=this.session.lineWidgets[this.lead.row];t<0?t-=i.rowsAbove||0:t>0&&(t+=i.rowCount-(i.rowsAbove||0))}var o=this.session.screenToDocumentPosition(r.row+t,r.column,n);t!==0&&e===0&&o.row===this.lead.row&&(o.column,this.lead.column),this.moveCursorTo(o.row,o.column+e,e===0)},this.moveCursorToPosition=function(t){this.moveCursorTo(t.row,t.column)},this.moveCursorTo=function(t,e,r){var n=this.session.getFoldAt(t,e,1);n&&(t=n.start.row,e=n.start.column),this.$keepDesiredColumnOnChange=!0;var i=this.session.getLine(t);/[\uDC00-\uDFFF]/.test(i.charAt(e))&&i.charAt(e-1)&&(this.lead.row==t&&this.lead.column==e+1?e=e-1:e=e+1),this.lead.setPosition(t,e),this.$keepDesiredColumnOnChange=!1,r||(this.$desiredColumn=null)},this.moveCursorToScreen=function(t,e,r){var n=this.session.screenToDocumentPosition(t,e);this.moveCursorTo(n.row,n.column,r)},this.detach=function(){this.lead.detach(),this.anchor.detach(),this.session=this.doc=null},this.fromOrientedRange=function(t){this.setSelectionRange(t,t.cursor==t.start),this.$desiredColumn=t.desiredColumn||this.$desiredColumn},this.toOrientedRange=function(t){var e=this.getRange();return t?(t.start.column=e.start.column,t.start.row=e.start.row,t.end.column=e.end.column,t.end.row=e.end.row):t=e,t.cursor=this.isBackwards()?t.start:t.end,t.desiredColumn=this.$desiredColumn,t},this.getRangeOfMovements=function(t){var e=this.getCursor();try{t(this);var r=this.getCursor();return s.fromPoints(e,r)}catch{return s.fromPoints(e,e)}finally{this.moveCursorToPosition(e)}},this.toJSON=function(){if(this.rangeCount)var t=this.ranges.map(function(e){var r=e.clone();return r.isBackwards=e.cursor==e.start,r});else{var t=this.getRange();t.isBackwards=this.isBackwards()}return t},this.fromJSON=function(t){if(t.start==null)if(this.rangeList&&t.length>1){this.toSingleRange(t[0]);for(var e=t.length;e--;){var r=s.fromPoints(t[e].start,t[e].end);t[e].isBackwards&&(r.cursor=r.start),this.addRange(r,!0)}return}else t=t[0];this.rangeList&&this.toSingleRange(t),this.setSelectionRange(t,t.isBackwards)},this.isEqual=function(t){if((t.length||this.rangeCount)&&t.length!=this.rangeCount)return!1;if(!t.length||!this.ranges)return this.getRange().isEqual(t);for(var e=this.ranges.length;e--;)if(!this.ranges[e].isEqual(t[e]))return!1;return!0}}).call(l.prototype),D.Selection=l}),ace.define("ace/tokenizer",["require","exports","module","ace/config"],function(a,D,z){var k=a("./config"),A=2e3,h=function(s){this.states=s,this.regExps={},this.matchMappings={};for(var l in this.states){for(var t=this.states[l],e=[],r=0,n=this.matchMappings[l]={defaultToken:"text"},i="g",o=[],d=0;d<t.length;d++){var v=t[d];if(v.defaultToken&&(n.defaultToken=v.defaultToken),v.caseInsensitive&&(i="gi"),v.regex!=null){v.regex instanceof RegExp&&(v.regex=v.regex.toString().slice(1,-1));var _=v.regex,C=new RegExp("(?:("+_+")|(.))").exec("a").length-2;Array.isArray(v.token)?v.token.length==1||C==1?v.token=v.token[0]:C-1!=v.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:v,groupCount:C-1}),v.token=v.token[0]):(v.tokenArray=v.token,v.token=null,v.onMatch=this.$arrayTokens):typeof v.token=="function"&&!v.onMatch&&(C>1?v.onMatch=this.$applyToken:v.onMatch=v.token),C>1&&(/\\\d/.test(v.regex)?_=v.regex.replace(/\\([0-9]+)/g,function($,c){return"\\"+(parseInt(c,10)+r+1)}):(C=1,_=this.removeCapturingGroups(v.regex)),!v.splitRegex&&typeof v.token!="string"&&o.push(v)),n[r]=d,r+=C,e.push(_),v.onMatch||(v.onMatch=null)}}e.length||(n[0]=0,e.push("$")),o.forEach(function($){$.splitRegex=this.createSplitterRegexp($.regex,i)},this),this.regExps[l]=new RegExp("("+e.join(")|(")+")|($)",i)}};(function(){this.$setMaxTokenCount=function(s){A=s|0},this.$applyToken=function(s){var l=this.splitRegex.exec(s).slice(1),t=this.token.apply(this,l);if(typeof t=="string")return[{type:t,value:s}];for(var e=[],r=0,n=t.length;r<n;r++)l[r]&&(e[e.length]={type:t[r],value:l[r]});return e},this.$arrayTokens=function(s){if(!s)return[];var l=this.splitRegex.exec(s);if(!l)return"text";for(var t=[],e=this.tokenArray,r=0,n=e.length;r<n;r++)l[r+1]&&(t[t.length]={type:e[r],value:l[r+1]});return t},this.removeCapturingGroups=function(s){var l=s.replace(/\\.|\[(?:\\.|[^\\\]])*|\(\?[:=!]|(\()/g,function(t,e){return e?"(?:":t});return l},this.createSplitterRegexp=function(s,l){if(s.indexOf("(?=")!=-1){var t=0,e=!1,r={};s.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(n,i,o,d,v,_){return e?e=v!="]":v?e=!0:d?(t==r.stack&&(r.end=_+1,r.stack=-1),t--):o&&(t++,o.length!=1&&(r.stack=t,r.start=_)),n}),r.end!=null&&/^\)*$/.test(s.substr(r.end))&&(s=s.substring(0,r.start)+s.substr(r.end))}return s.charAt(0)!="^"&&(s="^"+s),s.charAt(s.length-1)!="$"&&(s+="$"),new RegExp(s,(l||"").replace("g",""))},this.getLineTokens=function(s,l){if(l&&typeof l!="string"){var t=l.slice(0);l=t[0],l==="#tmp"&&(t.shift(),l=t.shift())}else var t=[];var e=l||"start",r=this.states[e];r||(e="start",r=this.states[e]);var n=this.matchMappings[e],i=this.regExps[e];i.lastIndex=0;for(var o,d=[],v=0,_=0,C={type:null,value:""};o=i.exec(s);){var $=n.defaultToken,c=null,g=o[0],E=i.lastIndex;if(E-g.length>v){var m=s.substring(v,E-g.length);C.type==$?C.value+=m:(C.type&&d.push(C),C={type:$,value:m})}for(var p=0;p<o.length-2;p++)if(o[p+1]!==void 0){c=r[n[p]],c.onMatch?$=c.onMatch(g,e,t,s):$=c.token,c.next&&(typeof c.next=="string"?e=c.next:e=c.next(e,t),r=this.states[e],r||(this.reportError("state doesn't exist",e),e="start",r=this.states[e]),n=this.matchMappings[e],v=E,i=this.regExps[e],i.lastIndex=E),c.consumeLineEnd&&(v=E);break}if(g){if(typeof $=="string")(!c||c.merge!==!1)&&C.type===$?C.value+=g:(C.type&&d.push(C),C={type:$,value:g});else if($){C.type&&d.push(C),C={type:null,value:""};for(var p=0;p<$.length;p++)d.push($[p])}}if(v==s.length)break;if(v=E,_++>A){for(_>2*s.length&&this.reportError("infinite loop with in ace tokenizer",{startState:l,line:s});v<s.length;)C.type&&d.push(C),C={value:s.substring(v,v+=500),type:"overflow"};e="start",t=[];break}}return C.type&&d.push(C),t.length>1&&t[0]!==e&&t.unshift("#tmp",e),{tokens:d,state:t.length?t:e}},this.reportError=k.reportError}).call(h.prototype),D.Tokenizer=h}),ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/lang"],function(a,D,z){var k=a("../lib/lang"),A=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}};(function(){this.addRules=function(l,t){if(!t){for(var e in l)this.$rules[e]=l[e];return}for(var e in l){for(var r=l[e],n=0;n<r.length;n++){var i=r[n];(i.next||i.onMatch)&&(typeof i.next=="string"&&i.next.indexOf(t)!==0&&(i.next=t+i.next),i.nextState&&i.nextState.indexOf(t)!==0&&(i.nextState=t+i.nextState))}this.$rules[t+e]=r}},this.getRules=function(){return this.$rules},this.embedRules=function(l,t,e,r,n){var i=typeof l=="function"?new l().getRules():l;if(r)for(var o=0;o<r.length;o++)r[o]=t+r[o];else{r=[];for(var d in i)r.push(t+d)}if(this.addRules(i,t),e)for(var v=Array.prototype[n?"push":"unshift"],o=0;o<r.length;o++)v.apply(this.$rules[r[o]],k.deepCopy(e));this.$embeds||(this.$embeds=[]),this.$embeds.push(t)},this.getEmbeds=function(){return this.$embeds};var h=function(l,t){return(l!="start"||t.length)&&t.unshift(this.nextState,l),this.nextState},s=function(l,t){return t.shift(),t.shift()||"start"};this.normalizeRules=function(){var l=0,t=this.$rules;function e(r){var n=t[r];n.processed=!0;for(var i=0;i<n.length;i++){var o=n[i],d=null;Array.isArray(o)&&(d=o,o={}),!o.regex&&o.start&&(o.regex=o.start,o.next||(o.next=[]),o.next.push({defaultToken:o.token},{token:o.token+".end",regex:o.end||o.start,next:"pop"}),o.token=o.token+".start",o.push=!0);var v=o.next||o.push;if(v&&Array.isArray(v)){var _=o.stateName;_||(_=o.token,typeof _!="string"&&(_=_[0]||""),t[_]&&(_+=l++)),t[_]=v,o.next=_,e(_)}else v=="pop"&&(o.next=s);if(o.push&&(o.nextState=o.next||o.push,o.next=h,delete o.push),o.rules)for(var C in o.rules)t[C]?t[C].push&&t[C].push.apply(t[C],o.rules[C]):t[C]=o.rules[C];var $=typeof o=="string"?o:o.include;if($&&(Array.isArray($)?d=$.map(function(g){return t[g]}):d=t[$]),d){var c=[i,1].concat(d);o.noEscape&&(c=c.filter(function(g){return!g.next})),n.splice.apply(n,c),i--}o.keywordMap&&(o.token=this.createKeywordMapper(o.keywordMap,o.defaultToken||"text",o.caseInsensitive),delete o.defaultToken)}}Object.keys(t).forEach(e,this)},this.createKeywordMapper=function(l,t,e,r){var n=Object.create(null);return this.$keywordList=[],Object.keys(l).forEach(function(i){for(var o=l[i],d=o.split(r||"|"),v=d.length;v--;){var _=d[v];this.$keywordList.push(_),e&&(_=_.toLowerCase()),n[_]=i}},this),l=null,e?function(i){return n[i.toLowerCase()]||t}:function(i){return n[i]||t}},this.getKeywords=function(){return this.$keywords}}).call(A.prototype),D.TextHighlightRules=A}),ace.define("ace/mode/behaviour",["require","exports","module"],function(a,D,z){var k=function(){this.$behaviours={}};(function(){this.add=function(A,h,s){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[A]:this.$behaviours[A]={}}this.$behaviours[A][h]=s},this.addBehaviours=function(A){for(var h in A)for(var s in A[h])this.add(h,s,A[h][s])},this.remove=function(A){this.$behaviours&&this.$behaviours[A]&&delete this.$behaviours[A]},this.inherit=function(A,h){if(typeof A=="function")var s=new A().getBehaviours(h);else var s=A.getBehaviours(h);this.addBehaviours(s)},this.getBehaviours=function(A){if(A){for(var h={},s=0;s<A.length;s++)this.$behaviours[A[s]]&&(h[A[s]]=this.$behaviours[A[s]]);return h}else return this.$behaviours}}).call(k.prototype),D.Behaviour=k}),ace.define("ace/token_iterator",["require","exports","module","ace/range"],function(a,D,z){var k=a("./range").Range,A=function(h,s,l){this.$session=h,this.$row=s,this.$rowTokens=h.getTokens(s);var t=h.getTokenAt(s,l);this.$tokenIndex=t?t.index:-1};(function(){this.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},this.stepForward=function(){this.$tokenIndex+=1;for(var h;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,h||(h=this.$session.getLength()),this.$row>=h)return this.$row=h-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},this.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},this.getCurrentTokenRow=function(){return this.$row},this.getCurrentTokenColumn=function(){var h=this.$rowTokens,s=this.$tokenIndex,l=h[s].start;if(l!==void 0)return l;for(l=0;s>0;)s-=1,l+=h[s].value.length;return l},this.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},this.getCurrentTokenRange=function(){var h=this.$rowTokens[this.$tokenIndex],s=this.getCurrentTokenColumn();return new k(this.$row,s,this.$row,s+h.value.length)}}).call(A.prototype),D.TokenIterator=A}),ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(a,D,z){var k=a("../../lib/oop"),A=a("../behaviour").Behaviour,h=a("../../token_iterator").TokenIterator,s=a("../../lib/lang"),l=["text","paren.rparen","rparen","paren","punctuation.operator"],t=["text","paren.rparen","rparen","paren","punctuation.operator","comment"],e,r={},n={'"':'"',"'":"'"},i=function(v){var _=-1;if(v.multiSelect&&(_=v.selection.index,r.rangeCount!=v.multiSelect.rangeCount&&(r={rangeCount:v.multiSelect.rangeCount})),r[_])return e=r[_];e=r[_]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},o=function(v,_,C,$){var c=v.end.row-v.start.row;return{text:C+_+$,selection:[0,v.start.column+1,c,v.end.column+(c?0:1)]}},d=function(v){this.add("braces","insertion",function(_,C,$,c,g){var E=$.getCursorPosition(),m=c.doc.getLine(E.row);if(g=="{"){i($);var p=$.getSelectionRange(),f=c.doc.getTextRange(p);if(f!==""&&f!=="{"&&$.getWrapBehavioursEnabled())return o(p,f,"{","}");if(d.isSaneInsertion($,c))return/[\]\}\)]/.test(m[E.column])||$.inMultiSelectMode||v&&v.braces?(d.recordAutoInsert($,c,"}"),{text:"{}",selection:[1,1]}):(d.recordMaybeInsert($,c,"{"),{text:"{",selection:[1,1]})}else if(g=="}"){i($);var F=m.substring(E.column,E.column+1);if(F=="}"){var R=c.$findOpeningBracket("}",{column:E.column+1,row:E.row});if(R!==null&&d.isAutoInsertedClosing(E,m,g))return d.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}else if(g==`
`||g==`\r
`){i($);var I="";d.isMaybeInsertedClosing(E,m)&&(I=s.stringRepeat("}",e.maybeInsertedBrackets),d.clearMaybeInsertedClosing());var F=m.substring(E.column,E.column+1);if(F==="}"){var S=c.findMatchingBracket({row:E.row,column:E.column+1},"}");if(!S)return null;var P=this.$getIndent(c.getLine(S.row))}else if(I)var P=this.$getIndent(m);else{d.clearMaybeInsertedClosing();return}var G=P+c.getTabString();return{text:`
`+G+`
`+P+I,selection:[1,G.length,1,G.length]}}else d.clearMaybeInsertedClosing()}),this.add("braces","deletion",function(_,C,$,c,g){var E=c.doc.getTextRange(g);if(!g.isMultiLine()&&E=="{"){i($);var m=c.doc.getLine(g.start.row),p=m.substring(g.end.column,g.end.column+1);if(p=="}")return g.end.column++,g;e.maybeInsertedBrackets--}}),this.add("parens","insertion",function(_,C,$,c,g){if(g=="("){i($);var E=$.getSelectionRange(),m=c.doc.getTextRange(E);if(m!==""&&$.getWrapBehavioursEnabled())return o(E,m,"(",")");if(d.isSaneInsertion($,c))return d.recordAutoInsert($,c,")"),{text:"()",selection:[1,1]}}else if(g==")"){i($);var p=$.getCursorPosition(),f=c.doc.getLine(p.row),F=f.substring(p.column,p.column+1);if(F==")"){var R=c.$findOpeningBracket(")",{column:p.column+1,row:p.row});if(R!==null&&d.isAutoInsertedClosing(p,f,g))return d.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("parens","deletion",function(_,C,$,c,g){var E=c.doc.getTextRange(g);if(!g.isMultiLine()&&E=="("){i($);var m=c.doc.getLine(g.start.row),p=m.substring(g.start.column+1,g.start.column+2);if(p==")")return g.end.column++,g}}),this.add("brackets","insertion",function(_,C,$,c,g){if(g=="["){i($);var E=$.getSelectionRange(),m=c.doc.getTextRange(E);if(m!==""&&$.getWrapBehavioursEnabled())return o(E,m,"[","]");if(d.isSaneInsertion($,c))return d.recordAutoInsert($,c,"]"),{text:"[]",selection:[1,1]}}else if(g=="]"){i($);var p=$.getCursorPosition(),f=c.doc.getLine(p.row),F=f.substring(p.column,p.column+1);if(F=="]"){var R=c.$findOpeningBracket("]",{column:p.column+1,row:p.row});if(R!==null&&d.isAutoInsertedClosing(p,f,g))return d.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("brackets","deletion",function(_,C,$,c,g){var E=c.doc.getTextRange(g);if(!g.isMultiLine()&&E=="["){i($);var m=c.doc.getLine(g.start.row),p=m.substring(g.start.column+1,g.start.column+2);if(p=="]")return g.end.column++,g}}),this.add("string_dquotes","insertion",function(_,C,$,c,g){var E=c.$mode.$quotes||n;if(g.length==1&&E[g]){if(this.lineCommentStart&&this.lineCommentStart.indexOf(g)!=-1)return;i($);var m=g,p=$.getSelectionRange(),f=c.doc.getTextRange(p);if(f!==""&&(f.length!=1||!E[f])&&$.getWrapBehavioursEnabled())return o(p,f,m,m);if(!f){var F=$.getCursorPosition(),R=c.doc.getLine(F.row),I=R.substring(F.column-1,F.column),S=R.substring(F.column,F.column+1),P=c.getTokenAt(F.row,F.column),G=c.getTokenAt(F.row,F.column+1);if(I=="\\"&&P&&/escape/.test(P.type))return null;var Z=P&&/string|escape/.test(P.type),ae=!G||/string|escape/.test(G.type),re;if(S==m)re=Z!==ae,re&&/string\.end/.test(G.type)&&(re=!1);else{if(Z&&!ae||Z&&ae)return null;var ce=c.$mode.tokenRe;ce.lastIndex=0;var j=ce.test(I);ce.lastIndex=0;var ee=ce.test(I);if(j||ee||S&&!/[\s;,.})\]\\]/.test(S))return null;var ie=R[F.column-2];if(I==m&&(ie==m||ce.test(ie)))return null;re=!0}return{text:re?m+m:"",selection:[1,1]}}}}),this.add("string_dquotes","deletion",function(_,C,$,c,g){var E=c.$mode.$quotes||n,m=c.doc.getTextRange(g);if(!g.isMultiLine()&&E.hasOwnProperty(m)){i($);var p=c.doc.getLine(g.start.row),f=p.substring(g.start.column+1,g.start.column+2);if(f==m)return g.end.column++,g}})};d.isSaneInsertion=function(v,_){var C=v.getCursorPosition(),$=new h(_,C.row,C.column);if(!this.$matchTokenType($.getCurrentToken()||"text",l)){if(/[)}\]]/.test(v.session.getLine(C.row)[C.column]))return!0;var c=new h(_,C.row,C.column+1);if(!this.$matchTokenType(c.getCurrentToken()||"text",l))return!1}return $.stepForward(),$.getCurrentTokenRow()!==C.row||this.$matchTokenType($.getCurrentToken()||"text",t)},d.$matchTokenType=function(v,_){return _.indexOf(v.type||v)>-1},d.recordAutoInsert=function(v,_,C){var $=v.getCursorPosition(),c=_.doc.getLine($.row);this.isAutoInsertedClosing($,c,e.autoInsertedLineEnd[0])||(e.autoInsertedBrackets=0),e.autoInsertedRow=$.row,e.autoInsertedLineEnd=C+c.substr($.column),e.autoInsertedBrackets++},d.recordMaybeInsert=function(v,_,C){var $=v.getCursorPosition(),c=_.doc.getLine($.row);this.isMaybeInsertedClosing($,c)||(e.maybeInsertedBrackets=0),e.maybeInsertedRow=$.row,e.maybeInsertedLineStart=c.substr(0,$.column)+C,e.maybeInsertedLineEnd=c.substr($.column),e.maybeInsertedBrackets++},d.isAutoInsertedClosing=function(v,_,C){return e.autoInsertedBrackets>0&&v.row===e.autoInsertedRow&&C===e.autoInsertedLineEnd[0]&&_.substr(v.column)===e.autoInsertedLineEnd},d.isMaybeInsertedClosing=function(v,_){return e.maybeInsertedBrackets>0&&v.row===e.maybeInsertedRow&&_.substr(v.column)===e.maybeInsertedLineEnd&&_.substr(0,v.column)==e.maybeInsertedLineStart},d.popAutoInsertedClosing=function(){e.autoInsertedLineEnd=e.autoInsertedLineEnd.substr(1),e.autoInsertedBrackets--},d.clearMaybeInsertedClosing=function(){e&&(e.maybeInsertedBrackets=0,e.maybeInsertedRow=-1)},k.inherits(d,A),D.CstyleBehaviour=d}),ace.define("ace/unicode",["require","exports","module"],function(a,D,z){for(var k=[48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2],A=0,h=[],s=0;s<k.length;s+=2)h.push(A+=k[s]),k[s+1]&&h.push(45,A+=k[s+1]);D.wordChars=String.fromCharCode.apply(null,h)}),ace.define("ace/mode/text",["require","exports","module","ace/config","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour/cstyle","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(a,D,z){var k=a("../config"),A=a("../tokenizer").Tokenizer,h=a("./text_highlight_rules").TextHighlightRules,s=a("./behaviour/cstyle").CstyleBehaviour,l=a("../unicode"),t=a("../lib/lang"),e=a("../token_iterator").TokenIterator,r=a("../range").Range,n=function(){this.HighlightRules=h};(function(){this.$defaultBehaviour=new s,this.tokenRe=new RegExp("^["+l.wordChars+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+l.wordChars+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new A(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(i,o,d,v){var _=o.doc,C=!0,$=!0,c=1/0,g=o.getTabSize(),E=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))var f=this.lineCommentStart.map(t.escapeRegExp).join("|"),m=this.lineCommentStart[0];else var f=t.escapeRegExp(this.lineCommentStart),m=this.lineCommentStart;f=new RegExp("^(\\s*)(?:"+f+") ?"),E=o.getUseSoftTabs();var I=function(ee,ie){var fe=ee.match(f);if(fe){var he=fe[1].length,ye=fe[0].length;!G(ee,he,ye)&&fe[0][ye-1]==" "&&ye--,_.removeInLine(ie,he,ye)}},P=m+" ",R=function(ee,ie){(!C||/\S/.test(ee))&&(G(ee,c,c)?_.insertInLine({row:ie,column:c},P):_.insertInLine({row:ie,column:c},m))},S=function(ee,ie){return f.test(ee)},G=function(ee,ie,fe){for(var he=0;ie--&&ee.charAt(ie)==" ";)he++;if(he%g!=0)return!1;for(var he=0;ee.charAt(fe++)==" ";)he++;return g>2?he%g!=g-1:he%g==0}}else{if(!this.blockComment)return!1;var m=this.blockComment.start,p=this.blockComment.end,f=new RegExp("^(\\s*)(?:"+t.escapeRegExp(m)+")"),F=new RegExp("(?:"+t.escapeRegExp(p)+")\\s*$"),R=function(re,ce){S(re,ce)||(!C||/\S/.test(re))&&(_.insertInLine({row:ce,column:re.length},p),_.insertInLine({row:ce,column:c},m))},I=function(re,ce){var j;(j=re.match(F))&&_.removeInLine(ce,re.length-j[0].length,re.length),(j=re.match(f))&&_.removeInLine(ce,j[1].length,j[0].length)},S=function(re,ce){if(f.test(re))return!0;for(var j=o.getTokens(ce),ee=0;ee<j.length;ee++)if(j[ee].type==="comment")return!0}}function Z(re){for(var ce=d;ce<=v;ce++)re(_.getLine(ce),ce)}var ae=1/0;Z(function(re,ce){var j=re.search(/\S/);j!==-1?(j<c&&(c=j),$&&!S(re,ce)&&($=!1)):ae>re.length&&(ae=re.length)}),c==1/0&&(c=ae,C=!1,$=!1),E&&c%g!=0&&(c=Math.floor(c/g)*g),Z($?I:R)},this.toggleBlockComment=function(i,o,d,v){var _=this.blockComment;if(_){!_.start&&_[0]&&(_=_[0]);var C=new e(o,v.row,v.column),$=C.getCurrentToken();o.selection;var c=o.selection.toOrientedRange(),g,E;if($&&/comment/.test($.type)){for(var m,p;$&&/comment/.test($.type);){var f=$.value.indexOf(_.start);if(f!=-1){var F=C.getCurrentTokenRow(),R=C.getCurrentTokenColumn()+f;m=new r(F,R,F,R+_.start.length);break}$=C.stepBackward()}for(var C=new e(o,v.row,v.column),$=C.getCurrentToken();$&&/comment/.test($.type);){var f=$.value.indexOf(_.end);if(f!=-1){var F=C.getCurrentTokenRow(),R=C.getCurrentTokenColumn()+f;p=new r(F,R,F,R+_.end.length);break}$=C.stepForward()}p&&o.remove(p),m&&(o.remove(m),g=m.start.row,E=-_.start.length)}else E=_.start.length,g=d.start.row,o.insert(d.end,_.end),o.insert(d.start,_.start);c.start.row==g&&(c.start.column+=E),c.end.row==g&&(c.end.column+=E),o.selection.fromOrientedRange(c)}},this.getNextLineIndent=function(i,o,d){return this.$getIndent(o)},this.checkOutdent=function(i,o,d){return!1},this.autoOutdent=function(i,o,d){},this.$getIndent=function(i){return i.match(/^\s*/)[0]},this.createWorker=function(i){return null},this.createModeDelegates=function(i){this.$embeds=[],this.$modes={};for(var o in i)if(i[o]){var d=i[o],v=d.prototype.$id,_=k.$modes[v];_||(k.$modes[v]=_=new d),k.$modes[o]||(k.$modes[o]=_),this.$embeds.push(o),this.$modes[o]=_}for(var C=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"],o=0;o<C.length;o++)(function(c){var g=C[o],E=c[g];c[C[o]]=function(){return this.$delegator(g,arguments,E)}})(this)},this.$delegator=function(i,o,d){var v=o[0]||"start";if(typeof v!="string"){if(Array.isArray(v[2])){var _=v[2][v[2].length-1],C=this.$modes[_];if(C)return C[i].apply(C,[v[1]].concat([].slice.call(o,1)))}v=v[0]||"start"}for(var $=0;$<this.$embeds.length;$++)if(this.$modes[this.$embeds[$]]){var c=v.split(this.$embeds[$]);if(!c[0]&&c[1]){o[0]=c[1];var C=this.$modes[this.$embeds[$]];return C[i].apply(C,o)}}var g=d.apply(this,o);return d?g:void 0},this.transformAction=function(i,o,d,v,_){if(this.$behaviour){var C=this.$behaviour.getBehaviours();for(var $ in C)if(C[$][o]){var c=C[$][o].apply(this,arguments);if(c)return c}}},this.getKeywords=function(i){if(!this.completionKeywords){var o=this.$tokenizer.rules,d=[];for(var v in o)for(var _=o[v],C=0,$=_.length;C<$;C++)if(typeof _[C].token=="string")/keyword|support|storage/.test(_[C].token)&&d.push(_[C].regex);else if(typeof _[C].token=="object"){for(var c=0,g=_[C].token.length;c<g;c++)if(/keyword|support|storage/.test(_[C].token[c])){var v=_[C].regex.match(/\(.+?\)/g)[c];d.push(v.substr(1,v.length-2))}}this.completionKeywords=d}return i?d.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(i,o,d,v){var _=this.$keywordList||this.$createKeywordList();return _.map(function(C){return{name:C,value:C,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}).call(n.prototype),D.Mode=n}),ace.define("ace/apply_delta",["require","exports","module"],function(a,D,z){D.applyDelta=function(k,A,h){var s=A.start.row,l=A.start.column,t=k[s]||"";switch(A.action){case"insert":var e=A.lines;if(e.length===1)k[s]=t.substring(0,l)+A.lines[0]+t.substring(l);else{var r=[s,1].concat(A.lines);k.splice.apply(k,r),k[s]=t.substring(0,l)+k[s],k[s+A.lines.length-1]+=t.substring(l)}break;case"remove":var n=A.end.column,i=A.end.row;s===i?k[s]=t.substring(0,l)+t.substring(n):k.splice(s,i-s+1,t.substring(0,l)+k[i].substring(n));break}}}),ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(a,D,z){var k=a("./lib/oop"),A=a("./lib/event_emitter").EventEmitter,h=D.Anchor=function(s,l,t){this.$onChange=this.onChange.bind(this),this.attach(s),typeof t>"u"?this.setPosition(l.row,l.column):this.setPosition(l,t)};(function(){k.implement(this,A),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(t){if(!(t.start.row==t.end.row&&t.start.row!=this.row)&&!(t.start.row>this.row)){var e=l(t,{row:this.row,column:this.column},this.$insertRight);this.setPosition(e.row,e.column,!0)}};function s(t,e,r){var n=r?t.column<=e.column:t.column<e.column;return t.row<e.row||t.row==e.row&&n}function l(t,e,r){var n=t.action=="insert",i=(n?1:-1)*(t.end.row-t.start.row),o=(n?1:-1)*(t.end.column-t.start.column),d=t.start,v=n?d:t.end;return s(e,d,r)?{row:e.row,column:e.column}:s(v,e,!r)?{row:e.row+i,column:e.column+(e.row==v.row?o:0)}:{row:d.row,column:d.column}}this.setPosition=function(t,e,r){var n;if(r?n={row:t,column:e}:n=this.$clipPositionToDocument(t,e),!(this.row==n.row&&this.column==n.column)){var i={row:this.row,column:this.column};this.row=n.row,this.column=n.column,this._signal("change",{old:i,value:n})}},this.detach=function(){this.document.off("change",this.$onChange)},this.attach=function(t){this.document=t||this.document,this.document.on("change",this.$onChange)},this.$clipPositionToDocument=function(t,e){var r={};return t>=this.document.getLength()?(r.row=Math.max(0,this.document.getLength()-1),r.column=this.document.getLine(r.row).length):t<0?(r.row=0,r.column=0):(r.row=t,r.column=Math.min(this.document.getLine(r.row).length,Math.max(0,e))),e<0&&(r.column=0),r}}).call(h.prototype)}),ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(a,D,z){var k=a("./lib/oop"),A=a("./apply_delta").applyDelta,h=a("./lib/event_emitter").EventEmitter,s=a("./range").Range,l=a("./anchor").Anchor,t=function(e){this.$lines=[""],e.length===0?this.$lines=[""]:Array.isArray(e)?this.insertMergedLines({row:0,column:0},e):this.insert({row:0,column:0},e)};(function(){k.implement(this,h),this.setValue=function(e){var r=this.getLength()-1;this.remove(new s(0,0,r,this.getLine(r).length)),this.insert({row:0,column:0},e)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(e,r){return new l(this,e,r)},"aaa".split(/a/).length===0?this.$split=function(e){return e.replace(/\r\n|\r/g,`
`).split(`
`)}:this.$split=function(e){return e.split(/\r\n|\r|\n/)},this.$detectNewLine=function(e){var r=e.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=r?r[1]:`
`,this._signal("changeNewLineMode")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return`\r
`;case"unix":return`
`;default:return this.$autoNewLine||`
`}},this.$autoNewLine="",this.$newLineMode="auto",this.setNewLineMode=function(e){this.$newLineMode!==e&&(this.$newLineMode=e,this._signal("changeNewLineMode"))},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(e){return e==`\r
`||e=="\r"||e==`
`},this.getLine=function(e){return this.$lines[e]||""},this.getLines=function(e,r){return this.$lines.slice(e,r+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(e){return this.getLinesForRange(e).join(this.getNewLineCharacter())},this.getLinesForRange=function(e){var r;if(e.start.row===e.end.row)r=[this.getLine(e.start.row).substring(e.start.column,e.end.column)];else{r=this.getLines(e.start.row,e.end.row),r[0]=(r[0]||"").substring(e.start.column);var n=r.length-1;e.end.row-e.start.row==n&&(r[n]=r[n].substring(0,e.end.column))}return r},this.insertLines=function(e,r){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(e,r)},this.removeLines=function(e,r){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(e,r)},this.insertNewLine=function(e){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(e,["",""])},this.insert=function(e,r){return this.getLength()<=1&&this.$detectNewLine(r),this.insertMergedLines(e,this.$split(r))},this.insertInLine=function(e,r){var n=this.clippedPos(e.row,e.column),i=this.pos(e.row,e.column+r.length);return this.applyDelta({start:n,end:i,action:"insert",lines:[r]},!0),this.clonePos(i)},this.clippedPos=function(e,r){var n=this.getLength();e===void 0?e=n:e<0?e=0:e>=n&&(e=n-1,r=void 0);var i=this.getLine(e);return r==null&&(r=i.length),r=Math.min(Math.max(r,0),i.length),{row:e,column:r}},this.clonePos=function(e){return{row:e.row,column:e.column}},this.pos=function(e,r){return{row:e,column:r}},this.$clipPosition=function(e){var r=this.getLength();return e.row>=r?(e.row=Math.max(0,r-1),e.column=this.getLine(r-1).length):(e.row=Math.max(0,e.row),e.column=Math.min(Math.max(e.column,0),this.getLine(e.row).length)),e},this.insertFullLines=function(e,r){e=Math.min(Math.max(e,0),this.getLength());var n=0;e<this.getLength()?(r=r.concat([""]),n=0):(r=[""].concat(r),e--,n=this.$lines[e].length),this.insertMergedLines({row:e,column:n},r)},this.insertMergedLines=function(e,r){var n=this.clippedPos(e.row,e.column),i={row:n.row+r.length-1,column:(r.length==1?n.column:0)+r[r.length-1].length};return this.applyDelta({start:n,end:i,action:"insert",lines:r}),this.clonePos(i)},this.remove=function(e){var r=this.clippedPos(e.start.row,e.start.column),n=this.clippedPos(e.end.row,e.end.column);return this.applyDelta({start:r,end:n,action:"remove",lines:this.getLinesForRange({start:r,end:n})}),this.clonePos(r)},this.removeInLine=function(e,r,n){var i=this.clippedPos(e,r),o=this.clippedPos(e,n);return this.applyDelta({start:i,end:o,action:"remove",lines:this.getLinesForRange({start:i,end:o})},!0),this.clonePos(i)},this.removeFullLines=function(e,r){e=Math.min(Math.max(0,e),this.getLength()-1),r=Math.min(Math.max(0,r),this.getLength()-1);var n=r==this.getLength()-1&&e>0,i=r<this.getLength()-1,o=n?e-1:e,d=n?this.getLine(o).length:0,v=i?r+1:r,_=i?0:this.getLine(v).length,C=new s(o,d,v,_),$=this.$lines.slice(e,r+1);return this.applyDelta({start:C.start,end:C.end,action:"remove",lines:this.getLinesForRange(C)}),$},this.removeNewLine=function(e){e<this.getLength()-1&&e>=0&&this.applyDelta({start:this.pos(e,this.getLine(e).length),end:this.pos(e+1,0),action:"remove",lines:["",""]})},this.replace=function(e,r){if(e instanceof s||(e=s.fromPoints(e.start,e.end)),r.length===0&&e.isEmpty())return e.start;if(r==this.getTextRange(e))return e.end;this.remove(e);var n;return r?n=this.insert(e.start,r):n=e.start,n},this.applyDeltas=function(e){for(var r=0;r<e.length;r++)this.applyDelta(e[r])},this.revertDeltas=function(e){for(var r=e.length-1;r>=0;r--)this.revertDelta(e[r])},this.applyDelta=function(e,r){var n=e.action=="insert";(n?e.lines.length<=1&&!e.lines[0]:!s.comparePoints(e.start,e.end))||(n&&e.lines.length>2e4?this.$splitAndapplyLargeDelta(e,2e4):(A(this.$lines,e,r),this._signal("change",e)))},this.$safeApplyDelta=function(e){var r=this.$lines.length;(e.action=="remove"&&e.start.row<r&&e.end.row<r||e.action=="insert"&&e.start.row<=r)&&this.applyDelta(e)},this.$splitAndapplyLargeDelta=function(e,r){for(var n=e.lines,i=n.length-r+1,o=e.start.row,d=e.start.column,v=0,_=0;v<i;v=_){_+=r-1;var C=n.slice(v,_);C.push(""),this.applyDelta({start:this.pos(o+v,d),end:this.pos(o+_,d=0),action:e.action,lines:C},!0)}e.lines=n.slice(v),e.start.row=o+v,e.start.column=d,this.applyDelta(e,!0)},this.revertDelta=function(e){this.$safeApplyDelta({start:this.clonePos(e.start),end:this.clonePos(e.end),action:e.action=="insert"?"remove":"insert",lines:e.lines.slice()})},this.indexToPosition=function(e,r){for(var n=this.$lines||this.getAllLines(),i=this.getNewLineCharacter().length,o=r||0,d=n.length;o<d;o++)if(e-=n[o].length+i,e<0)return{row:o,column:e+n[o].length+i};return{row:d-1,column:e+n[d-1].length+i}},this.positionToIndex=function(e,r){for(var n=this.$lines||this.getAllLines(),i=this.getNewLineCharacter().length,o=0,d=Math.min(e.row,n.length),v=r||0;v<d;++v)o+=n[v].length+i;return o+e.column}}).call(t.prototype),D.Document=t}),ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(a,D,z){var k=a("./lib/oop"),A=a("./lib/event_emitter").EventEmitter,h=function(s,l){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=s;var t=this;this.$worker=function(){if(t.running){for(var e=new Date,r=t.currentLine,n=-1,i=t.doc,o=r;t.lines[r];)r++;var d=i.getLength(),v=0;for(t.running=!1;r<d;){t.$tokenizeRow(r),n=r;do r++;while(t.lines[r]);if(v++,v%5===0&&new Date-e>20){t.running=setTimeout(t.$worker,20);break}}t.currentLine=r,n==-1&&(n=r),o<=n&&t.fireUpdateEvent(o,n)}}};(function(){k.implement(this,A),this.setTokenizer=function(s){this.tokenizer=s,this.lines=[],this.states=[],this.start(0)},this.setDocument=function(s){this.doc=s,this.lines=[],this.states=[],this.stop()},this.fireUpdateEvent=function(s,l){var t={first:s,last:l};this._signal("update",{data:t})},this.start=function(s){this.currentLine=Math.min(s||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},this.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},this.$updateOnChange=function(s){var l=s.start.row,t=s.end.row-l;if(t===0)this.lines[l]=null;else if(s.action=="remove")this.lines.splice(l,t+1,null),this.states.splice(l,t+1,null);else{var e=Array(t+1);e.unshift(l,1),this.lines.splice.apply(this.lines,e),this.states.splice.apply(this.states,e)}this.currentLine=Math.min(l,this.currentLine,this.doc.getLength()),this.stop()},this.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},this.getTokens=function(s){return this.lines[s]||this.$tokenizeRow(s)},this.getState=function(s){return this.currentLine==s&&this.$tokenizeRow(s),this.states[s]||"start"},this.$tokenizeRow=function(s){var l=this.doc.getLine(s),t=this.states[s-1],e=this.tokenizer.getLineTokens(l,t,s);return this.states[s]+""!=e.state+""?(this.states[s]=e.state,this.lines[s+1]=null,this.currentLine>s+1&&(this.currentLine=s+1)):this.currentLine==s&&(this.currentLine=s+1),this.lines[s]=e.tokens}}).call(h.prototype),D.BackgroundTokenizer=h}),ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(a,D,z){var k=a("./lib/lang");a("./lib/oop");var A=a("./range").Range,h=function(s,l,t){this.setRegexp(s),this.clazz=l,this.type=t||"text"};(function(){this.MAX_RANGES=500,this.setRegexp=function(s){this.regExp+""!=s+""&&(this.regExp=s,this.cache=[])},this.update=function(s,l,t,e){if(this.regExp)for(var r=e.firstRow,n=e.lastRow,i=r;i<=n;i++){var o=this.cache[i];o==null&&(o=k.getMatchOffsets(t.getLine(i),this.regExp),o.length>this.MAX_RANGES&&(o=o.slice(0,this.MAX_RANGES)),o=o.map(function(v){return new A(i,v.offset,i,v.offset+v.length)}),this.cache[i]=o.length?o:"");for(var d=o.length;d--;)l.drawSingleLineMarker(s,o[d].toScreenRange(t),this.clazz,e)}}}).call(h.prototype),D.SearchHighlight=h}),ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(a,D,z){var k=a("../range").Range;function A(h,s){this.foldData=h,Array.isArray(s)?this.folds=s:s=this.folds=[s];var l=s[s.length-1];this.range=new k(s[0].start.row,s[0].start.column,l.end.row,l.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(t){t.setFoldLine(this)},this)}(function(){this.shiftRow=function(h){this.start.row+=h,this.end.row+=h,this.folds.forEach(function(s){s.start.row+=h,s.end.row+=h})},this.addFold=function(h){if(h.sameRow){if(h.start.row<this.startRow||h.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(h),this.folds.sort(function(s,l){return-s.range.compareEnd(l.start.row,l.start.column)}),this.range.compareEnd(h.start.row,h.start.column)>0?(this.end.row=h.end.row,this.end.column=h.end.column):this.range.compareStart(h.end.row,h.end.column)<0&&(this.start.row=h.start.row,this.start.column=h.start.column)}else if(h.start.row==this.end.row)this.folds.push(h),this.end.row=h.end.row,this.end.column=h.end.column;else if(h.end.row==this.start.row)this.folds.unshift(h),this.start.row=h.start.row,this.start.column=h.start.column;else throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");h.foldLine=this},this.containsRow=function(h){return h>=this.start.row&&h<=this.end.row},this.walk=function(h,s,l){var t=0,e=this.folds,r,n,i,o=!0;s==null&&(s=this.end.row,l=this.end.column);for(var d=0;d<e.length;d++){if(r=e[d],n=r.range.compareStart(s,l),n==-1){h(null,s,l,t,o);return}if(i=h(null,r.start.row,r.start.column,t,o),i=!i&&h(r.placeholder,r.start.row,r.start.column,t),i||n===0)return;o=!r.sameRow,t=r.end.column}h(null,s,l,t,o)},this.getNextFoldTo=function(h,s){for(var l,t,e=0;e<this.folds.length;e++){if(l=this.folds[e],t=l.range.compareEnd(h,s),t==-1)return{fold:l,kind:"after"};if(t===0)return{fold:l,kind:"inside"}}return null},this.addRemoveChars=function(h,s,l){var t=this.getNextFoldTo(h,s),e,r;if(t){if(e=t.fold,t.kind=="inside"&&e.start.column!=s&&e.start.row!=h)window.console&&window.console.log(h,s,e);else if(e.start.row==h){r=this.folds;var n=r.indexOf(e);for(n===0&&(this.start.column+=l),n;n<r.length;n++){if(e=r[n],e.start.column+=l,!e.sameRow)return;e.end.column+=l}this.end.column+=l}}},this.split=function(h,s){var l=this.getNextFoldTo(h,s);if(!l||l.kind=="inside")return null;var t=l.fold,e=this.folds,r=this.foldData,n=e.indexOf(t),i=e[n-1];this.end.row=i.end.row,this.end.column=i.end.column,e=e.splice(n,e.length-n);var o=new A(r,e);return r.splice(r.indexOf(this)+1,0,o),o},this.merge=function(h){for(var s=h.folds,l=0;l<s.length;l++)this.addFold(s[l]);var t=this.foldData;t.splice(t.indexOf(h),1)},this.toString=function(){var h=[this.range.toString()+": ["];return this.folds.forEach(function(s){h.push("  "+s.toString())}),h.push("]"),h.join(`
`)},this.idxToPosition=function(h){for(var s=0,l=0;l<this.folds.length;l++){var t=this.folds[l];if(h-=t.start.column-s,h<0)return{row:t.start.row,column:t.start.column+h};if(h-=t.placeholder.length,h<0)return t.start;s=t.end.column}return{row:this.end.row,column:this.end.column+h}}}).call(A.prototype),D.FoldLine=A}),ace.define("ace/range_list",["require","exports","module","ace/range"],function(a,D,z){var k=a("./range").Range,A=k.comparePoints,h=function(){this.ranges=[],this.$bias=1};(function(){this.comparePoints=A,this.pointIndex=function(s,l,t){for(var e=this.ranges,r=t||0;r<e.length;r++){var n=e[r],i=A(s,n.end);if(!(i>0)){var o=A(s,n.start);return i===0?l&&o!==0?-r-2:r:o>0||o===0&&!l?r:-r-1}}return-r-1},this.add=function(s){var l=!s.isEmpty(),t=this.pointIndex(s.start,l);t<0&&(t=-t-1);var e=this.pointIndex(s.end,l,t);return e<0?e=-e-1:e++,this.ranges.splice(t,e-t,s)},this.addList=function(s){for(var l=[],t=s.length;t--;)l.push.apply(l,this.add(s[t]));return l},this.substractPoint=function(s){var l=this.pointIndex(s);if(l>=0)return this.ranges.splice(l,1)},this.merge=function(){var s=[],l=this.ranges;l=l.sort(function(i,o){return A(i.start,o.start)});for(var t=l[0],e,r=1;r<l.length;r++){e=t,t=l[r];var n=A(e.end,t.start);n<0||n==0&&!e.isEmpty()&&!t.isEmpty()||(A(e.end,t.end)<0&&(e.end.row=t.end.row,e.end.column=t.end.column),l.splice(r,1),s.push(t),t=e,r--)}return this.ranges=l,s},this.contains=function(s,l){return this.pointIndex({row:s,column:l})>=0},this.containsPoint=function(s){return this.pointIndex(s)>=0},this.rangeAtPoint=function(s){var l=this.pointIndex(s);if(l>=0)return this.ranges[l]},this.clipRows=function(s,l){var t=this.ranges;if(t[0].start.row>l||t[t.length-1].start.row<s)return[];var e=this.pointIndex({row:s,column:0});e<0&&(e=-e-1);var r=this.pointIndex({row:l,column:0},e);r<0&&(r=-r-1);for(var n=[],i=e;i<r;i++)n.push(t[i]);return n},this.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},this.attach=function(s){this.session&&this.detach(),this.session=s,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},this.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},this.$onChange=function(s){for(var l=s.start,t=s.end,e=l.row,r=t.row,n=this.ranges,i=0,o=n.length;i<o;i++){var d=n[i];if(d.end.row>=e)break}if(s.action=="insert")for(var v=r-e,_=-l.column+t.column;i<o;i++){var d=n[i];if(d.start.row>e)break;if(d.start.row==e&&d.start.column>=l.column&&(d.start.column==l.column&&this.$bias<=0||(d.start.column+=_,d.start.row+=v)),d.end.row==e&&d.end.column>=l.column){if(d.end.column==l.column&&this.$bias<0)continue;d.end.column==l.column&&_>0&&i<o-1&&d.end.column>d.start.column&&d.end.column==n[i+1].start.column&&(d.end.column-=_),d.end.column+=_,d.end.row+=v}}else for(var v=e-r,_=l.column-t.column;i<o;i++){var d=n[i];if(d.start.row>r)break;d.end.row<r&&(e<d.end.row||e==d.end.row&&l.column<d.end.column)?(d.end.row=e,d.end.column=l.column):d.end.row==r?d.end.column<=t.column?(v||d.end.column>l.column)&&(d.end.column=l.column,d.end.row=l.row):(d.end.column+=_,d.end.row+=v):d.end.row>r&&(d.end.row+=v),d.start.row<r&&(e<d.start.row||e==d.start.row&&l.column<d.start.column)?(d.start.row=e,d.start.column=l.column):d.start.row==r?d.start.column<=t.column?(v||d.start.column>l.column)&&(d.start.column=l.column,d.start.row=l.row):(d.start.column+=_,d.start.row+=v):d.start.row>r&&(d.start.row+=v)}if(v!=0&&i<o)for(;i<o;i++){var d=n[i];d.start.row+=v,d.end.row+=v}}}).call(h.prototype),D.RangeList=h}),ace.define("ace/edit_session/fold",["require","exports","module","ace/range_list","ace/lib/oop"],function(a,D,z){var k=a("../range_list").RangeList,A=a("../lib/oop"),h=D.Fold=function(r,n){this.foldLine=null,this.placeholder=n,this.range=r,this.start=r.start,this.end=r.end,this.sameRow=r.start.row==r.end.row,this.subFolds=this.ranges=[]};A.inherits(h,k),(function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},this.setFoldLine=function(r){this.foldLine=r,this.subFolds.forEach(function(n){n.setFoldLine(r)})},this.clone=function(){var r=this.range.clone(),n=new h(r,this.placeholder);return this.subFolds.forEach(function(i){n.subFolds.push(i.clone())}),n.collapseChildren=this.collapseChildren,n},this.addSubFold=function(r){if(!this.range.isEqual(r)){l(r,this.start);for(var v=r.start.row,_=r.start.column,n=0,i=-1;n<this.subFolds.length&&(i=this.subFolds[n].range.compare(v,_),i==1);n++);var o=this.subFolds[n],d=0;if(i==0){if(o.range.containsRange(r))return o.addSubFold(r);d=1}for(var v=r.range.end.row,_=r.range.end.column,C=n,i=-1;C<this.subFolds.length&&(i=this.subFolds[C].range.compare(v,_),i==1);C++);i==0&&C++;for(var $=this.subFolds.splice(n,C-n,r),c=i==0?$.length-1:$.length,g=d;g<c;g++)r.addSubFold($[g]);return r.setFoldLine(this.foldLine),r}},this.restoreRange=function(r){return e(r,this.start)}}).call(h.prototype);function s(r,n){r.row-=n.row,r.row==0&&(r.column-=n.column)}function l(r,n){s(r.start,n),s(r.end,n)}function t(r,n){r.row==0&&(r.column+=n.column),r.row+=n.row}function e(r,n){t(r.start,n),t(r.end,n)}}),ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator"],function(a,D,z){var k=a("../range").Range,A=a("./fold_line").FoldLine,h=a("./fold").Fold,s=a("../token_iterator").TokenIterator;function l(){this.getFoldAt=function(t,e,r){var n=this.getFoldLine(t);if(!n)return null;for(var i=n.folds,o=0;o<i.length;o++){var d=i[o].range;if(d.contains(t,e)){if(r==1&&d.isEnd(t,e)&&!d.isEmpty())continue;if(r==-1&&d.isStart(t,e)&&!d.isEmpty())continue;return i[o]}}},this.getFoldsInRange=function(t){var e=t.start,r=t.end,n=this.$foldData,i=[];e.column+=1,r.column-=1;for(var o=0;o<n.length;o++){var d=n[o].range.compareRange(t);if(d!=2){if(d==-2)break;for(var v=n[o].folds,_=0;_<v.length;_++){var C=v[_];if(d=C.range.compareRange(t),d==-2)break;if(d==2)continue;if(d==42)break;i.push(C)}}}return e.column-=1,r.column+=1,i},this.getFoldsInRangeList=function(t){if(Array.isArray(t)){var e=[];t.forEach(function(r){e=e.concat(this.getFoldsInRange(r))},this)}else var e=this.getFoldsInRange(t);return e},this.getAllFolds=function(){for(var t=[],e=this.$foldData,r=0;r<e.length;r++)for(var n=0;n<e[r].folds.length;n++)t.push(e[r].folds[n]);return t},this.getFoldStringAt=function(t,e,r,n){if(n=n||this.getFoldLine(t),!n)return null;for(var i={end:{column:0}},o,d,v=0;v<n.folds.length;v++){d=n.folds[v];var _=d.range.compareEnd(t,e);if(_==-1){o=this.getLine(d.start.row).substring(i.end.column,d.start.column);break}else if(_===0)return null;i=d}return o||(o=this.getLine(d.start.row).substring(i.end.column)),r==-1?o.substring(0,e-i.end.column):r==1?o.substring(e-i.end.column):o},this.getFoldLine=function(t,e){var r=this.$foldData,n=0;for(e&&(n=r.indexOf(e)),n==-1&&(n=0),n;n<r.length;n++){var i=r[n];if(i.start.row<=t&&i.end.row>=t)return i;if(i.end.row>t)return null}return null},this.getNextFoldLine=function(t,e){var r=this.$foldData,n=0;for(e&&(n=r.indexOf(e)),n==-1&&(n=0),n;n<r.length;n++){var i=r[n];if(i.end.row>=t)return i}return null},this.getFoldedRowCount=function(t,e){for(var r=this.$foldData,n=e-t+1,i=0;i<r.length;i++){var o=r[i],d=o.end.row,v=o.start.row;if(d>=e){v<e&&(v>=t?n-=e-v:n=0);break}else d>=t&&(v>=t?n-=d-v:n-=d-t+1)}return n},this.$addFoldLine=function(t){return this.$foldData.push(t),this.$foldData.sort(function(e,r){return e.start.row-r.start.row}),t},this.addFold=function(t,e){var r=this.$foldData,n=!1,i;t instanceof h?i=t:(i=new h(e,t),i.collapseChildren=e.collapseChildren),this.$clipRangeToDocument(i.range);var o=i.start.row,d=i.start.column,v=i.end.row,_=i.end.column,C=this.getFoldAt(o,d,1),$=this.getFoldAt(v,_,-1);if(C&&$==C)return C.addSubFold(i);C&&!C.range.isStart(o,d)&&this.removeFold(C),$&&!$.range.isEnd(v,_)&&this.removeFold($);var c=this.getFoldsInRange(i.range);c.length>0&&(this.removeFolds(c),i.collapseChildren||c.forEach(function(p){i.addSubFold(p)}));for(var g=0;g<r.length;g++){var E=r[g];if(v==E.start.row){E.addFold(i),n=!0;break}else if(o==E.end.row){if(E.addFold(i),n=!0,!i.sameRow){var m=r[g+1];if(m&&m.start.row==v){E.merge(m);break}}break}else if(v<=E.start.row)break}return n||(E=this.$addFoldLine(new A(this.$foldData,i))),this.$useWrapMode?this.$updateWrapData(E.start.row,E.start.row):this.$updateRowLengthCache(E.start.row,E.start.row),this.$modified=!0,this._signal("changeFold",{data:i,action:"add"}),i},this.addFolds=function(t){t.forEach(function(e){this.addFold(e)},this)},this.removeFold=function(t){var e=t.foldLine,r=e.start.row,n=e.end.row,i=this.$foldData,o=e.folds;if(o.length==1)i.splice(i.indexOf(e),1);else if(e.range.isEnd(t.end.row,t.end.column))o.pop(),e.end.row=o[o.length-1].end.row,e.end.column=o[o.length-1].end.column;else if(e.range.isStart(t.start.row,t.start.column))o.shift(),e.start.row=o[0].start.row,e.start.column=o[0].start.column;else if(t.sameRow)o.splice(o.indexOf(t),1);else{var d=e.split(t.start.row,t.start.column);o=d.folds,o.shift(),d.start.row=o[0].start.row,d.start.column=o[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(r,n):this.$updateRowLengthCache(r,n)),this.$modified=!0,this._signal("changeFold",{data:t,action:"remove"})},this.removeFolds=function(t){for(var e=[],r=0;r<t.length;r++)e.push(t[r]);e.forEach(function(n){this.removeFold(n)},this),this.$modified=!0},this.expandFold=function(t){this.removeFold(t),t.subFolds.forEach(function(e){t.restoreRange(e),this.addFold(e)},this),t.collapseChildren>0&&this.foldAll(t.start.row+1,t.end.row,t.collapseChildren-1),t.subFolds=[]},this.expandFolds=function(t){t.forEach(function(e){this.expandFold(e)},this)},this.unfold=function(t,e){var r,n;if(t==null?(r=new k(0,0,this.getLength(),0),e==null&&(e=!0)):typeof t=="number"?r=new k(t,0,t,this.getLine(t).length):"row"in t?r=k.fromPoints(t,t):r=t,n=this.getFoldsInRangeList(r),e!=!1?this.removeFolds(n):this.expandFolds(n),n.length)return n},this.isRowFolded=function(t,e){return!!this.getFoldLine(t,e)},this.getRowFoldEnd=function(t,e){var r=this.getFoldLine(t,e);return r?r.end.row:t},this.getRowFoldStart=function(t,e){var r=this.getFoldLine(t,e);return r?r.start.row:t},this.getFoldDisplayLine=function(t,e,r,n,i){n==null&&(n=t.start.row),i==null&&(i=0),e==null&&(e=t.end.row),r==null&&(r=this.getLine(e).length);var o=this.doc,d="";return t.walk(function(v,_,C,$){if(!(_<n)){if(_==n){if(C<i)return;$=Math.max(i,$)}v!=null?d+=v:d+=o.getLine(_).substring($,C)}},e,r),d},this.getDisplayLine=function(t,e,r,n){var i=this.getFoldLine(t);if(i)return this.getFoldDisplayLine(i,t,e,r,n);var o;return o=this.doc.getLine(t),o.substring(n||0,e||o.length)},this.$cloneFoldData=function(){var t=[];return t=this.$foldData.map(function(e){var r=e.folds.map(function(n){return n.clone()});return new A(t,r)}),t},this.toggleFold=function(t){var e=this.selection,r=e.getRange(),n,i;if(r.isEmpty()){var o=r.start;if(n=this.getFoldAt(o.row,o.column),n){this.expandFold(n);return}else(i=this.findMatchingBracket(o))?r.comparePoint(i)==1?r.end=i:(r.start=i,r.start.column++,r.end.column--):(i=this.findMatchingBracket({row:o.row,column:o.column+1}))?(r.comparePoint(i)==1?r.end=i:r.start=i,r.start.column++):r=this.getCommentFoldRange(o.row,o.column)||r}else{var d=this.getFoldsInRange(r);if(t&&d.length){this.expandFolds(d);return}else d.length==1&&(n=d[0])}if(n||(n=this.getFoldAt(r.start.row,r.start.column)),n&&n.range.toString()==r.toString()){this.expandFold(n);return}var v="...";if(!r.isMultiLine()){if(v=this.getTextRange(r),v.length<4)return;v=v.trim().substring(0,2)+".."}this.addFold(v,r)},this.getCommentFoldRange=function(t,e,r){var n=new s(this,t,e),i=n.getCurrentToken(),o=i&&i.type;if(i&&/^comment|string/.test(o)){o=o.match(/comment|string/)[0],o=="comment"&&(o+="|doc-start");var d=new RegExp(o),v=new k;if(r!=1){do i=n.stepBackward();while(i&&d.test(i.type));n.stepForward()}if(v.start.row=n.getCurrentTokenRow(),v.start.column=n.getCurrentTokenColumn()+2,n=new s(this,t,e),r!=-1){var _=-1;do if(i=n.stepForward(),_==-1){var C=this.getState(n.$row);d.test(C)||(_=n.$row)}else if(n.$row>_)break;while(i&&d.test(i.type));i=n.stepBackward()}else i=n.getCurrentToken();return v.end.row=n.getCurrentTokenRow(),v.end.column=n.getCurrentTokenColumn()+i.value.length-2,v}},this.foldAll=function(t,e,r,n){r==null&&(r=1e5);var i=this.foldWidgets;if(i){e=e||this.getLength(),t=t||0;for(var o=t;o<e;o++)if(i[o]==null&&(i[o]=this.getFoldWidget(o)),i[o]=="start"&&!(n&&!n(o))){var d=this.getFoldWidgetRange(o);d&&d.isMultiLine()&&d.end.row<=e&&d.start.row>=t&&(o=d.end.row,d.collapseChildren=r,this.addFold("...",d))}}},this.foldToLevel=function(t){for(this.foldAll();t-- >0;)this.unfold(null,!1)},this.foldAllComments=function(){var t=this;this.foldAll(null,null,null,function(e){for(var r=t.getTokens(e),n=0;n<r.length;n++){var i=r[n];if(!(i.type=="text"&&/^\s+$/.test(i.value)))return!!/comment/.test(i.type)}})},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(t){if(!this.$foldStyles[t])throw new Error("invalid fold style: "+t+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=t){this.$foldStyle=t,t=="manual"&&this.unfold();var e=this.$foldMode;this.$setFolding(null),this.$setFolding(e)}},this.$setFolding=function(t){if(this.$foldMode!=t){if(this.$foldMode=t,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),!t||this.$foldStyle=="manual"){this.foldWidgets=null;return}this.foldWidgets=[],this.getFoldWidget=t.getFoldWidget.bind(t,this,this.$foldStyle),this.getFoldWidgetRange=t.getFoldWidgetRange.bind(t,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)}},this.getParentFoldRangeData=function(t,e){var r=this.foldWidgets;if(!r||e&&r[t])return{};for(var n=t-1,i;n>=0;){var o=r[n];if(o==null&&(o=r[n]=this.getFoldWidget(n)),o=="start"){var d=this.getFoldWidgetRange(n);if(i||(i=d),d&&d.end.row>=t)break}n--}return{range:n!==-1&&d,firstRange:i}},this.onFoldWidgetClick=function(t,e){e=e.domEvent;var r={children:e.shiftKey,all:e.ctrlKey||e.metaKey,siblings:e.altKey},n=this.$toggleFoldWidget(t,r);if(!n){var i=e.target||e.srcElement;i&&/ace_fold-widget/.test(i.className)&&(i.className+=" ace_invalid")}},this.$toggleFoldWidget=function(t,e){if(this.getFoldWidget){var r=this.getFoldWidget(t),n=this.getLine(t),i=r==="end"?-1:1,o=this.getFoldAt(t,i===-1?0:n.length,i);if(o)return e.children||e.all?this.removeFold(o):this.expandFold(o),o;var d=this.getFoldWidgetRange(t,!0);if(d&&!d.isMultiLine()&&(o=this.getFoldAt(d.start.row,d.start.column,1),o&&d.isEqual(o.range)))return this.removeFold(o),o;if(e.siblings){var v=this.getParentFoldRangeData(t);if(v.range)var _=v.range.start.row+1,C=v.range.end.row;this.foldAll(_,C,e.all?1e4:0)}else e.children?(C=d?d.end.row:this.getLength(),this.foldAll(t+1,C,e.all?1e4:0)):d&&(e.all&&(d.collapseChildren=1e4),this.addFold("...",d));return d}},this.toggleFoldWidget=function(t){var e=this.selection.getCursor().row;e=this.getRowFoldStart(e);var r=this.$toggleFoldWidget(e,{});if(!r){var n=this.getParentFoldRangeData(e,!0);if(r=n.range||n.firstRange,r){e=r.start.row;var i=this.getFoldAt(e,this.getLine(e).length,1);i?this.removeFold(i):this.addFold("...",r)}}},this.updateFoldWidgets=function(t){var e=t.start.row,r=t.end.row-e;if(r===0)this.foldWidgets[e]=null;else if(t.action=="remove")this.foldWidgets.splice(e,r+1,null);else{var n=Array(r+1);n.unshift(e,1),this.foldWidgets.splice.apply(this.foldWidgets,n)}},this.tokenizerUpdateFoldWidgets=function(t){var e=t.data;e.first!=e.last&&this.foldWidgets.length>e.first&&this.foldWidgets.splice(e.first,this.foldWidgets.length)}}D.Folding=l}),ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(a,D,z){var k=a("../token_iterator").TokenIterator,A=a("../range").Range;function h(){this.findMatchingBracket=function(s,l){if(s.column==0)return null;var t=l||this.getLine(s.row).charAt(s.column-1);if(t=="")return null;var e=t.match(/([\(\[\{])|([\)\]\}])/);return e?e[1]?this.$findClosingBracket(e[1],s):this.$findOpeningBracket(e[2],s):null},this.getBracketRange=function(s){var l=this.getLine(s.row),t=!0,e,r=l.charAt(s.column-1),n=r&&r.match(/([\(\[\{])|([\)\]\}])/);if(n||(r=l.charAt(s.column),s={row:s.row,column:s.column+1},n=r&&r.match(/([\(\[\{])|([\)\]\}])/),t=!1),!n)return null;if(n[1]){var i=this.$findClosingBracket(n[1],s);if(!i)return null;e=A.fromPoints(s,i),t||(e.end.column++,e.start.column--),e.cursor=e.end}else{var i=this.$findOpeningBracket(n[2],s);if(!i)return null;e=A.fromPoints(i,s),t||(e.start.column++,e.end.column--),e.cursor=e.start}return e},this.getMatchingBracketRanges=function(s){var l=this.getLine(s.row),t=l.charAt(s.column-1),e=t&&t.match(/([\(\[\{])|([\)\]\}])/);if(e||(t=l.charAt(s.column),s={row:s.row,column:s.column+1},e=t&&t.match(/([\(\[\{])|([\)\]\}])/)),!e)return null;var r=new A(s.row,s.column-1,s.row,s.column),n=e[1]?this.$findClosingBracket(e[1],s):this.$findOpeningBracket(e[2],s);if(!n)return[r];var i=new A(n.row,n.column,n.row,n.column+1);return[r,i]},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{","<":">",">":"<"},this.$findOpeningBracket=function(s,l,t){var e=this.$brackets[s],r=1,n=new k(this,l.row,l.column),i=n.getCurrentToken();if(i||(i=n.stepForward()),!!i){t||(t=new RegExp("(\\.?"+i.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)")+")+"));for(var o=l.column-n.getCurrentTokenColumn()-2,d=i.value;;){for(;o>=0;){var v=d.charAt(o);if(v==e){if(r-=1,r==0)return{row:n.getCurrentTokenRow(),column:o+n.getCurrentTokenColumn()}}else v==s&&(r+=1);o-=1}do i=n.stepBackward();while(i&&!t.test(i.type));if(i==null)break;d=i.value,o=d.length-1}return null}},this.$findClosingBracket=function(s,l,t){var e=this.$brackets[s],r=1,n=new k(this,l.row,l.column),i=n.getCurrentToken();if(i||(i=n.stepForward()),!!i){t||(t=new RegExp("(\\.?"+i.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)")+")+"));for(var o=l.column-n.getCurrentTokenColumn();;){for(var d=i.value,v=d.length;o<v;){var _=d.charAt(o);if(_==e){if(r-=1,r==0)return{row:n.getCurrentTokenRow(),column:o+n.getCurrentTokenColumn()}}else _==s&&(r+=1);o+=1}do i=n.stepForward();while(i&&!t.test(i.type));if(i==null)break;o=0}return null}}}D.BracketMatch=h}),ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/bidihandler","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/edit_session/folding","ace/edit_session/bracket_match"],function(a,D,z){var k=a("./lib/oop"),A=a("./lib/lang"),h=a("./bidihandler").BidiHandler,s=a("./config"),l=a("./lib/event_emitter").EventEmitter,t=a("./selection").Selection,e=a("./mode/text").Mode,r=a("./range").Range,n=a("./document").Document,i=a("./background_tokenizer").BackgroundTokenizer,o=a("./search_highlight").SearchHighlight,d=function(v,_){this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.id="session"+ ++d.$uid,this.$foldData.toString=function(){return this.join(`
`)},this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),(typeof v!="object"||!v.getLine)&&(v=new n(v)),this.setDocument(v),this.selection=new t(this),this.$bidiHandler=new h(this),s.resetOptions(this),this.setMode(_),s._signal("session",this)};d.$uid=0,(function(){k.implement(this,l),this.setDocument=function(f){this.doc&&this.doc.removeListener("change",this.$onChange),this.doc=f,f.on("change",this.$onChange),this.bgTokenizer&&this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},this.getDocument=function(){return this.doc},this.$resetRowCache=function(f){if(!f){this.$docRowCache=[],this.$screenRowCache=[];return}var F=this.$docRowCache.length,R=this.$getRowCacheIndex(this.$docRowCache,f)+1;F>R&&(this.$docRowCache.splice(R,F),this.$screenRowCache.splice(R,F))},this.$getRowCacheIndex=function(f,F){for(var R=0,I=f.length-1;R<=I;){var S=R+I>>1,P=f[S];if(F>P)R=S+1;else if(F<P)I=S-1;else return S}return R-1},this.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.bgTokenizer&&this.bgTokenizer.start(0)},this.onChangeFold=function(f){var F=f.data;this.$resetRowCache(F.start.row)},this.onChange=function(f){this.$modified=!0,this.$bidiHandler.onChange(f),this.$resetRowCache(f.start.row);var F=this.$updateInternalDataOnChange(f);!this.$fromUndo&&this.$undoManager&&(F&&F.length&&(this.$undoManager.add({action:"removeFolds",folds:F},this.mergeUndoDeltas),this.mergeUndoDeltas=!0),this.$undoManager.add(f,this.mergeUndoDeltas),this.mergeUndoDeltas=!0,this.$informUndoManager.schedule()),this.bgTokenizer&&this.bgTokenizer.$updateOnChange(f),this._signal("change",f)},this.setValue=function(f){this.doc.setValue(f),this.selection.moveTo(0,0),this.$resetRowCache(0),this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},this.getValue=this.toString=function(){return this.doc.getValue()},this.getSelection=function(){return this.selection},this.getState=function(f){return this.bgTokenizer.getState(f)},this.getTokens=function(f){return this.bgTokenizer.getTokens(f)},this.getTokenAt=function(f,F){var R=this.bgTokenizer.getTokens(f),I,S=0;if(F==null){var P=R.length-1;S=this.getLine(f).length}else for(var P=0;P<R.length&&(S+=R[P].value.length,!(S>=F));P++);return I=R[P],I?(I.index=P,I.start=S-I.value.length,I):null},this.setUndoManager=function(f){if(this.$undoManager=f,this.$informUndoManager&&this.$informUndoManager.cancel(),f){var F=this;f.addSession(this),this.$syncInformUndoManager=function(){F.$informUndoManager.cancel(),F.mergeUndoDeltas=!1},this.$informUndoManager=A.delayedCall(this.$syncInformUndoManager)}else this.$syncInformUndoManager=function(){}},this.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},this.$defaultUndoManager={undo:function(){},redo:function(){},hasUndo:function(){},hasRedo:function(){},reset:function(){},add:function(){},addSelection:function(){},startNewGroup:function(){},addSession:function(){}},this.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},this.getTabString=function(){return this.getUseSoftTabs()?A.stringRepeat(" ",this.getTabSize()):"	"},this.setUseSoftTabs=function(f){this.setOption("useSoftTabs",f)},this.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},this.setTabSize=function(f){this.setOption("tabSize",f)},this.getTabSize=function(){return this.$tabSize},this.isTabStop=function(f){return this.$useSoftTabs&&f.column%this.$tabSize===0},this.setNavigateWithinSoftTabs=function(f){this.setOption("navigateWithinSoftTabs",f)},this.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},this.$overwrite=!1,this.setOverwrite=function(f){this.setOption("overwrite",f)},this.getOverwrite=function(){return this.$overwrite},this.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},this.addGutterDecoration=function(f,F){this.$decorations[f]||(this.$decorations[f]=""),this.$decorations[f]+=" "+F,this._signal("changeBreakpoint",{})},this.removeGutterDecoration=function(f,F){this.$decorations[f]=(this.$decorations[f]||"").replace(" "+F,""),this._signal("changeBreakpoint",{})},this.getBreakpoints=function(){return this.$breakpoints},this.setBreakpoints=function(f){this.$breakpoints=[];for(var F=0;F<f.length;F++)this.$breakpoints[f[F]]="ace_breakpoint";this._signal("changeBreakpoint",{})},this.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},this.setBreakpoint=function(f,F){F===void 0&&(F="ace_breakpoint"),F?this.$breakpoints[f]=F:delete this.$breakpoints[f],this._signal("changeBreakpoint",{})},this.clearBreakpoint=function(f){delete this.$breakpoints[f],this._signal("changeBreakpoint",{})},this.addMarker=function(f,F,R,I){var S=this.$markerId++,P={range:f,type:R||"line",renderer:typeof R=="function"?R:null,clazz:F,inFront:!!I,id:S};return I?(this.$frontMarkers[S]=P,this._signal("changeFrontMarker")):(this.$backMarkers[S]=P,this._signal("changeBackMarker")),S},this.addDynamicMarker=function(f,F){if(f.update){var R=this.$markerId++;return f.id=R,f.inFront=!!F,F?(this.$frontMarkers[R]=f,this._signal("changeFrontMarker")):(this.$backMarkers[R]=f,this._signal("changeBackMarker")),f}},this.removeMarker=function(f){var F=this.$frontMarkers[f]||this.$backMarkers[f];if(F){var R=F.inFront?this.$frontMarkers:this.$backMarkers;delete R[f],this._signal(F.inFront?"changeFrontMarker":"changeBackMarker")}},this.getMarkers=function(f){return f?this.$frontMarkers:this.$backMarkers},this.highlight=function(f){if(!this.$searchHighlight){var F=new o(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(F)}this.$searchHighlight.setRegexp(f)},this.highlightLines=function(f,F,R,I){typeof F!="number"&&(R=F,F=f),R||(R="ace_step");var S=new r(f,0,F,1/0);return S.id=this.addMarker(S,R,"fullLine",I),S},this.setAnnotations=function(f){this.$annotations=f,this._signal("changeAnnotation",{})},this.getAnnotations=function(){return this.$annotations||[]},this.clearAnnotations=function(){this.setAnnotations([])},this.$detectNewLine=function(f){var F=f.match(/^.*?(\r?\n)/m);F?this.$autoNewLine=F[1]:this.$autoNewLine=`
`},this.getWordRange=function(f,F){var R=this.getLine(f),I=!1;if(F>0&&(I=!!R.charAt(F-1).match(this.tokenRe)),I||(I=!!R.charAt(F).match(this.tokenRe)),I)var S=this.tokenRe;else if(/^\s+$/.test(R.slice(F-1,F+1)))var S=/\s/;else var S=this.nonTokenRe;var P=F;if(P>0){do P--;while(P>=0&&R.charAt(P).match(S));P++}for(var G=F;G<R.length&&R.charAt(G).match(S);)G++;return new r(f,P,f,G)},this.getAWordRange=function(f,F){for(var R=this.getWordRange(f,F),I=this.getLine(R.end.row);I.charAt(R.end.column).match(/[ \t]/);)R.end.column+=1;return R},this.setNewLineMode=function(f){this.doc.setNewLineMode(f)},this.getNewLineMode=function(){return this.doc.getNewLineMode()},this.setUseWorker=function(f){this.setOption("useWorker",f)},this.getUseWorker=function(){return this.$useWorker},this.onReloadTokenizer=function(f){var F=f.data;this.bgTokenizer.start(F.first),this._signal("tokenizerUpdate",f)},this.$modes=s.$modes,this.$mode=null,this.$modeId=null,this.setMode=function(f,F){if(f&&typeof f=="object"){if(f.getTokenizer)return this.$onChangeMode(f);var R=f,I=R.path}else I=f||"ace/mode/text";if(this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new e),this.$modes[I]&&!R){this.$onChangeMode(this.$modes[I]),F&&F();return}this.$modeId=I,s.loadModule(["mode",I],(function(S){if(this.$modeId!==I)return F&&F();this.$modes[I]&&!R?this.$onChangeMode(this.$modes[I]):S&&S.Mode&&(S=new S.Mode(R),R||(this.$modes[I]=S,S.$id=I),this.$onChangeMode(S)),F&&F()}).bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},this.$onChangeMode=function(f,F){if(F||(this.$modeId=f.$id),this.$mode!==f){var R=this.$mode;this.$mode=f,this.$stopWorker(),this.$useWorker&&this.$startWorker();var I=f.getTokenizer();if(I.on!==void 0){var S=this.onReloadTokenizer.bind(this);I.on("update",S)}if(this.bgTokenizer)this.bgTokenizer.setTokenizer(I);else{this.bgTokenizer=new i(I);var P=this;this.bgTokenizer.on("update",function(G){P._signal("tokenizerUpdate",G)})}this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=f.tokenRe,this.nonTokenRe=f.nonTokenRe,F||(f.attachToSession&&f.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(f.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode",{oldMode:R,mode:f}))}},this.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},this.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(f){s.warn("Could not load worker",f),this.$worker=null}},this.getMode=function(){return this.$mode},this.$scrollTop=0,this.setScrollTop=function(f){this.$scrollTop===f||isNaN(f)||(this.$scrollTop=f,this._signal("changeScrollTop",f))},this.getScrollTop=function(){return this.$scrollTop},this.$scrollLeft=0,this.setScrollLeft=function(f){this.$scrollLeft===f||isNaN(f)||(this.$scrollLeft=f,this._signal("changeScrollLeft",f))},this.getScrollLeft=function(){return this.$scrollLeft},this.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},this.getLineWidgetMaxWidth=function(){if(this.lineWidgetsWidth!=null)return this.lineWidgetsWidth;var f=0;return this.lineWidgets.forEach(function(F){F&&F.screenWidth>f&&(f=F.screenWidth)}),this.lineWidgetWidth=f},this.$computeWidth=function(f){if(this.$modified||f){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var F=this.doc.getAllLines(),R=this.$rowLengthCache,I=0,S=0,P=this.$foldData[S],G=P?P.start.row:1/0,Z=F.length,ae=0;ae<Z;ae++){if(ae>G){if(ae=P.end.row+1,ae>=Z)break;P=this.$foldData[S++],G=P?P.start.row:1/0}R[ae]==null&&(R[ae]=this.$getStringScreenWidth(F[ae])[0]),R[ae]>I&&(I=R[ae])}this.screenWidth=I}},this.getLine=function(f){return this.doc.getLine(f)},this.getLines=function(f,F){return this.doc.getLines(f,F)},this.getLength=function(){return this.doc.getLength()},this.getTextRange=function(f){return this.doc.getTextRange(f||this.selection.getRange())},this.insert=function(f,F){return this.doc.insert(f,F)},this.remove=function(f){return this.doc.remove(f)},this.removeFullLines=function(f,F){return this.doc.removeFullLines(f,F)},this.undoChanges=function(f,F){if(f.length){this.$fromUndo=!0;for(var R=f.length-1;R!=-1;R--){var I=f[R];I.action=="insert"||I.action=="remove"?this.doc.revertDelta(I):I.folds&&this.addFolds(I.folds)}!F&&this.$undoSelect&&(f.selectionBefore?this.selection.fromJSON(f.selectionBefore):this.selection.setRange(this.$getUndoSelection(f,!0))),this.$fromUndo=!1}},this.redoChanges=function(f,F){if(f.length){this.$fromUndo=!0;for(var R=0;R<f.length;R++){var I=f[R];(I.action=="insert"||I.action=="remove")&&this.doc.$safeApplyDelta(I)}!F&&this.$undoSelect&&(f.selectionAfter?this.selection.fromJSON(f.selectionAfter):this.selection.setRange(this.$getUndoSelection(f,!1))),this.$fromUndo=!1}},this.setUndoSelect=function(f){this.$undoSelect=f},this.$getUndoSelection=function(f,F){function R(Z){return F?Z.action!=="insert":Z.action==="insert"}for(var I,S,P=0;P<f.length;P++){var G=f[P];if(G.start){if(!I){R(G)?I=r.fromPoints(G.start,G.end):I=r.fromPoints(G.start,G.start);continue}R(G)?(S=G.start,I.compare(S.row,S.column)==-1&&I.setStart(S),S=G.end,I.compare(S.row,S.column)==1&&I.setEnd(S)):(S=G.start,I.compare(S.row,S.column)==-1&&(I=r.fromPoints(G.start,G.start)))}}return I},this.replace=function(f,F){return this.doc.replace(f,F)},this.moveText=function(f,F,R){var I=this.getTextRange(f),S=this.getFoldsInRange(f),P=r.fromPoints(F,F);if(!R){this.remove(f);var G=f.start.row-f.end.row,Z=G?-f.end.column:f.start.column-f.end.column;Z&&(P.start.row==f.end.row&&P.start.column>f.end.column&&(P.start.column+=Z),P.end.row==f.end.row&&P.end.column>f.end.column&&(P.end.column+=Z)),G&&P.start.row>=f.end.row&&(P.start.row+=G,P.end.row+=G)}if(P.end=this.insert(P.start,I),S.length){var ae=f.start,re=P.start,G=re.row-ae.row,Z=re.column-ae.column;this.addFolds(S.map(function(ee){return ee=ee.clone(),ee.start.row==ae.row&&(ee.start.column+=Z),ee.end.row==ae.row&&(ee.end.column+=Z),ee.start.row+=G,ee.end.row+=G,ee}))}return P},this.indentRows=function(f,F,R){R=R.replace(/\t/g,this.getTabString());for(var I=f;I<=F;I++)this.doc.insertInLine({row:I,column:0},R)},this.outdentRows=function(f){for(var F=f.collapseRows(),R=new r(0,0,0,0),I=this.getTabSize(),S=F.start.row;S<=F.end.row;++S){var P=this.getLine(S);R.start.row=S,R.end.row=S;for(var G=0;G<I&&P.charAt(G)==" ";++G);G<I&&P.charAt(G)=="	"?(R.start.column=G,R.end.column=G+1):(R.start.column=0,R.end.column=G),this.remove(R)}},this.$moveLines=function(f,F,R){if(f=this.getRowFoldStart(f),F=this.getRowFoldEnd(F),R<0){var I=this.getRowFoldStart(f+R);if(I<0)return 0;var S=I-f}else if(R>0){var I=this.getRowFoldEnd(F+R);if(I>this.doc.getLength()-1)return 0;var S=I-F}else{f=this.$clipRowToDocument(f),F=this.$clipRowToDocument(F);var S=F-f+1}var P=new r(f,0,F,Number.MAX_VALUE),G=this.getFoldsInRange(P).map(function(ae){return ae=ae.clone(),ae.start.row+=S,ae.end.row+=S,ae}),Z=R==0?this.doc.getLines(f,F):this.doc.removeFullLines(f,F);return this.doc.insertFullLines(f+S,Z),G.length&&this.addFolds(G),S},this.moveLinesUp=function(f,F){return this.$moveLines(f,F,-1)},this.moveLinesDown=function(f,F){return this.$moveLines(f,F,1)},this.duplicateLines=function(f,F){return this.$moveLines(f,F,0)},this.$clipRowToDocument=function(f){return Math.max(0,Math.min(f,this.doc.getLength()-1))},this.$clipColumnToRow=function(f,F){return F<0?0:Math.min(this.doc.getLine(f).length,F)},this.$clipPositionToDocument=function(f,F){if(F=Math.max(0,F),f<0)f=0,F=0;else{var R=this.doc.getLength();f>=R?(f=R-1,F=this.doc.getLine(R-1).length):F=Math.min(this.doc.getLine(f).length,F)}return{row:f,column:F}},this.$clipRangeToDocument=function(f){f.start.row<0?(f.start.row=0,f.start.column=0):f.start.column=this.$clipColumnToRow(f.start.row,f.start.column);var F=this.doc.getLength()-1;return f.end.row>F?(f.end.row=F,f.end.column=this.doc.getLine(F).length):f.end.column=this.$clipColumnToRow(f.end.row,f.end.column),f},this.$wrapLimit=80,this.$useWrapMode=!1,this.$wrapLimitRange={min:null,max:null},this.setUseWrapMode=function(f){if(f!=this.$useWrapMode){if(this.$useWrapMode=f,this.$modified=!0,this.$resetRowCache(0),f){var F=this.getLength();this.$wrapData=Array(F),this.$updateWrapData(0,F-1)}this._signal("changeWrapMode")}},this.getUseWrapMode=function(){return this.$useWrapMode},this.setWrapLimitRange=function(f,F){(this.$wrapLimitRange.min!==f||this.$wrapLimitRange.max!==F)&&(this.$wrapLimitRange={min:f,max:F},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode"))},this.adjustWrapLimit=function(f,F){var R=this.$wrapLimitRange;R.max<0&&(R={min:F,max:F});var I=this.$constrainWrapLimit(f,R.min,R.max);return I!=this.$wrapLimit&&I>1?(this.$wrapLimit=I,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0):!1},this.$constrainWrapLimit=function(f,F,R){return F&&(f=Math.max(F,f)),R&&(f=Math.min(R,f)),f},this.getWrapLimit=function(){return this.$wrapLimit},this.setWrapLimit=function(f){this.setWrapLimitRange(f,f)},this.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},this.$updateInternalDataOnChange=function(f){var F=this.$useWrapMode,R=f.action,I=f.start,S=f.end,P=I.row,G=S.row,Z=G-P,ae=null;if(this.$updating=!0,Z!=0)if(R==="remove"){this[F?"$wrapData":"$rowLengthCache"].splice(P,Z);var re=this.$foldData;ae=this.getFoldsInRange(f),this.removeFolds(ae);var ce=this.getFoldLine(S.row),j=0;if(ce){ce.addRemoveChars(S.row,S.column,I.column-S.column),ce.shiftRow(-Z);var ee=this.getFoldLine(P);ee&&ee!==ce&&(ee.merge(ce),ce=ee),j=re.indexOf(ce)+1}for(j;j<re.length;j++){var ce=re[j];ce.start.row>=S.row&&ce.shiftRow(-Z)}G=P}else{var ie=Array(Z);ie.unshift(P,0);var fe=F?this.$wrapData:this.$rowLengthCache;fe.splice.apply(fe,ie);var re=this.$foldData,ce=this.getFoldLine(P),j=0;if(ce){var he=ce.range.compareInside(I.row,I.column);he==0?(ce=ce.split(I.row,I.column),ce&&(ce.shiftRow(Z),ce.addRemoveChars(G,0,S.column-I.column))):he==-1&&(ce.addRemoveChars(P,0,S.column-I.column),ce.shiftRow(Z)),j=re.indexOf(ce)+1}for(j;j<re.length;j++){var ce=re[j];ce.start.row>=P&&ce.shiftRow(Z)}}else{Z=Math.abs(f.start.column-f.end.column),R==="remove"&&(ae=this.getFoldsInRange(f),this.removeFolds(ae),Z=-Z);var ce=this.getFoldLine(P);ce&&ce.addRemoveChars(P,I.column,Z)}return F&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,F?this.$updateWrapData(P,G):this.$updateRowLengthCache(P,G),ae},this.$updateRowLengthCache=function(f,F,R){this.$rowLengthCache[f]=null,this.$rowLengthCache[F]=null},this.$updateWrapData=function(f,F){var R=this.doc.getAllLines(),I=this.getTabSize(),S=this.$wrapData,P=this.$wrapLimit,G,Z,ae=f;for(F=Math.min(F,R.length-1);ae<=F;)Z=this.getFoldLine(ae,Z),Z?(G=[],Z.walk((function(re,ce,j,ee){var ie;if(re!=null){ie=this.$getDisplayTokens(re,G.length),ie[0]=C;for(var fe=1;fe<ie.length;fe++)ie[fe]=$}else ie=this.$getDisplayTokens(R[ce].substring(ee,j),G.length);G=G.concat(ie)}).bind(this),Z.end.row,R[Z.end.row].length+1),S[Z.start.row]=this.$computeWrapSplits(G,P,I),ae=Z.end.row+1):(G=this.$getDisplayTokens(R[ae]),S[ae]=this.$computeWrapSplits(G,P,I),ae++)};var v=1,_=2,C=3,$=4,c=9,g=10,E=11,m=12;this.$computeWrapSplits=function(f,F,R){if(f.length==0)return[];var I=[],S=f.length,P=0,G=0,Z=this.$wrapAsCode,ae=this.$indentedSoftWrap,re=F<=Math.max(2*R,8)||ae===!1?0:Math.floor(F/2);function ce(){var he=0;if(re===0)return he;if(ae)for(var ye=0;ye<f.length;ye++){var Te=f[ye];if(Te==g)he+=1;else if(Te==E)he+=R;else{if(Te==m)continue;break}}return Z&&ae!==!1&&(he+=R),Math.min(he,re)}function j(he){for(var ye=he-P,Te=P;Te<he;Te++){var ke=f[Te];(ke===12||ke===2)&&(ye-=1)}I.length||(ee=ce(),I.indent=ee),G+=ye,I.push(G),P=he}for(var ee=0;S-P>F-ee;){var ie=P+F-ee;if(f[ie-1]>=g&&f[ie]>=g){j(ie);continue}if(f[ie]==C||f[ie]==$){for(ie;ie!=P-1&&f[ie]!=C;ie--);if(ie>P){j(ie);continue}for(ie=P+F,ie;ie<f.length&&f[ie]==$;ie++);if(ie==f.length)break;j(ie);continue}for(var fe=Math.max(ie-(F-(F>>2)),P-1);ie>fe&&f[ie]<C;)ie--;if(Z){for(;ie>fe&&f[ie]<C;)ie--;for(;ie>fe&&f[ie]==c;)ie--}else for(;ie>fe&&f[ie]<g;)ie--;if(ie>fe){j(++ie);continue}ie=P+F,f[ie]==_&&ie--,j(ie-ee)}return I},this.$getDisplayTokens=function(f,F){var R=[],I;F=F||0;for(var S=0;S<f.length;S++){var P=f.charCodeAt(S);if(P==9){I=this.getScreenTabSize(R.length+F),R.push(E);for(var G=1;G<I;G++)R.push(m)}else P==32?R.push(g):P>39&&P<48||P>57&&P<64?R.push(c):P>=4352&&p(P)?R.push(v,_):R.push(v)}return R},this.$getStringScreenWidth=function(f,F,R){if(F==0)return[0,0];F==null&&(F=1/0),R=R||0;var I,S;for(S=0;S<f.length&&(I=f.charCodeAt(S),I==9?R+=this.getScreenTabSize(R):I>=4352&&p(I)?R+=2:R+=1,!(R>F));S++);return[R,S]},this.lineWidgets=null,this.getRowLength=function(f){var F=1;return this.lineWidgets&&(F+=this.lineWidgets[f]&&this.lineWidgets[f].rowCount||0),!this.$useWrapMode||!this.$wrapData[f]?F:this.$wrapData[f].length+F},this.getRowLineCount=function(f){return!this.$useWrapMode||!this.$wrapData[f]?1:this.$wrapData[f].length+1},this.getRowWrapIndent=function(f){if(this.$useWrapMode){var F=this.screenToDocumentPosition(f,Number.MAX_VALUE),R=this.$wrapData[F.row];return R.length&&R[0]<F.column?R.indent:0}else return 0},this.getScreenLastRowColumn=function(f){var F=this.screenToDocumentPosition(f,Number.MAX_VALUE);return this.documentToScreenColumn(F.row,F.column)},this.getDocumentLastRowColumn=function(f,F){var R=this.documentToScreenRow(f,F);return this.getScreenLastRowColumn(R)},this.getDocumentLastRowColumnPosition=function(f,F){var R=this.documentToScreenRow(f,F);return this.screenToDocumentPosition(R,Number.MAX_VALUE/10)},this.getRowSplitData=function(f){if(this.$useWrapMode)return this.$wrapData[f]},this.getScreenTabSize=function(f){return this.$tabSize-(f%this.$tabSize|0)},this.screenToDocumentRow=function(f,F){return this.screenToDocumentPosition(f,F).row},this.screenToDocumentColumn=function(f,F){return this.screenToDocumentPosition(f,F).column},this.screenToDocumentPosition=function(f,F,R){if(f<0)return{row:0,column:0};var I,S=0,P=0,G,Z=0,ae=0,re=this.$screenRowCache,ce=this.$getRowCacheIndex(re,f),j=re.length;if(j&&ce>=0)var Z=re[ce],S=this.$docRowCache[ce],ee=f>re[j-1];else var ee=!j;for(var ie=this.getLength()-1,fe=this.getNextFoldLine(S),he=fe?fe.start.row:1/0;Z<=f&&(ae=this.getRowLength(S),!(Z+ae>f||S>=ie));)Z+=ae,S++,S>he&&(S=fe.end.row+1,fe=this.getNextFoldLine(S,fe),he=fe?fe.start.row:1/0),ee&&(this.$docRowCache.push(S),this.$screenRowCache.push(Z));if(fe&&fe.start.row<=S)I=this.getFoldDisplayLine(fe),S=fe.start.row;else{if(Z+ae<=f||S>ie)return{row:ie,column:this.getLine(ie).length};I=this.getLine(S),fe=null}var ye=0,Te=Math.floor(f-Z);if(this.$useWrapMode){var ke=this.$wrapData[S];ke&&(G=ke[Te],Te>0&&ke.length&&(ye=ke.indent,P=ke[Te-1]||ke[ke.length-1],I=I.substring(P)))}return R!==void 0&&this.$bidiHandler.isBidiRow(Z+Te,S,Te)&&(F=this.$bidiHandler.offsetToCol(R)),P+=this.$getStringScreenWidth(I,F-ye)[1],this.$useWrapMode&&P>=G&&(P=G-1),fe?fe.idxToPosition(P):{row:S,column:P}},this.documentToScreenPosition=function(f,F){if(typeof F>"u")var R=this.$clipPositionToDocument(f.row,f.column);else R=this.$clipPositionToDocument(f,F);f=R.row,F=R.column;var I=0,S=null,P=null;P=this.getFoldAt(f,F,1),P&&(f=P.start.row,F=P.start.column);var G,Z=0,ae=this.$docRowCache,re=this.$getRowCacheIndex(ae,f),ce=ae.length;if(ce&&re>=0)var Z=ae[re],I=this.$screenRowCache[re],j=f>ae[ce-1];else var j=!ce;for(var ee=this.getNextFoldLine(Z),ie=ee?ee.start.row:1/0;Z<f;){if(Z>=ie){if(G=ee.end.row+1,G>f)break;ee=this.getNextFoldLine(G,ee),ie=ee?ee.start.row:1/0}else G=Z+1;I+=this.getRowLength(Z),Z=G,j&&(this.$docRowCache.push(Z),this.$screenRowCache.push(I))}var fe="";ee&&Z>=ie?(fe=this.getFoldDisplayLine(ee,f,F),S=ee.start.row):(fe=this.getLine(f).substring(0,F),S=f);var he=0;if(this.$useWrapMode){var ye=this.$wrapData[S];if(ye){for(var Te=0;fe.length>=ye[Te];)I++,Te++;fe=fe.substring(ye[Te-1]||0,fe.length),he=Te>0?ye.indent:0}}return this.lineWidgets&&this.lineWidgets[Z]&&this.lineWidgets[Z].rowsAbove&&(I+=this.lineWidgets[Z].rowsAbove),{row:I,column:he+this.$getStringScreenWidth(fe)[0]}},this.documentToScreenColumn=function(f,F){return this.documentToScreenPosition(f,F).column},this.documentToScreenRow=function(f,F){return this.documentToScreenPosition(f,F).row},this.getScreenLength=function(){var f=0,F=null;if(this.$useWrapMode)for(var S=this.$wrapData.length,P=0,I=0,F=this.$foldData[I++],G=F?F.start.row:1/0;P<S;){var Z=this.$wrapData[P];f+=Z?Z.length+1:1,P++,P>G&&(P=F.end.row+1,F=this.$foldData[I++],G=F?F.start.row:1/0)}else{f=this.getLength();for(var R=this.$foldData,I=0;I<R.length;I++)F=R[I],f-=F.end.row-F.start.row}return this.lineWidgets&&(f+=this.$getWidgetScreenLength()),f},this.$setFontMetrics=function(f){this.$enableVarChar&&(this.$getStringScreenWidth=function(F,R,I){if(R===0)return[0,0];R||(R=1/0),I=I||0;var S,P;for(P=0;P<F.length&&(S=F.charAt(P),S==="	"?I+=this.getScreenTabSize(I):I+=f.getCharacterWidth(S),!(I>R));P++);return[I,P]})},this.destroy=function(){this.bgTokenizer&&(this.bgTokenizer.setDocument(null),this.bgTokenizer=null),this.$stopWorker(),this.removeAllListeners(),this.selection.detach()},this.isFullWidth=p;function p(f){return f<4352?!1:f>=4352&&f<=4447||f>=4515&&f<=4519||f>=4602&&f<=4607||f>=9001&&f<=9002||f>=11904&&f<=11929||f>=11931&&f<=12019||f>=12032&&f<=12245||f>=12272&&f<=12283||f>=12288&&f<=12350||f>=12353&&f<=12438||f>=12441&&f<=12543||f>=12549&&f<=12589||f>=12593&&f<=12686||f>=12688&&f<=12730||f>=12736&&f<=12771||f>=12784&&f<=12830||f>=12832&&f<=12871||f>=12880&&f<=13054||f>=13056&&f<=19903||f>=19968&&f<=42124||f>=42128&&f<=42182||f>=43360&&f<=43388||f>=44032&&f<=55203||f>=55216&&f<=55238||f>=55243&&f<=55291||f>=63744&&f<=64255||f>=65040&&f<=65049||f>=65072&&f<=65106||f>=65108&&f<=65126||f>=65128&&f<=65131||f>=65281&&f<=65376||f>=65504&&f<=65510}}).call(d.prototype),a("./edit_session/folding").Folding.call(d.prototype),a("./edit_session/bracket_match").BracketMatch.call(d.prototype),s.defineOptions(d.prototype,"session",{wrap:{set:function(v){if(!v||v=="off"?v=!1:v=="free"?v=!0:v=="printMargin"?v=-1:typeof v=="string"&&(v=parseInt(v,10)||!1),this.$wrap!=v)if(this.$wrap=v,!v)this.setUseWrapMode(!1);else{var _=typeof v=="number"?v:null;this.setWrapLimitRange(_,_),this.setUseWrapMode(!0)}},get:function(){return this.getUseWrapMode()?this.$wrap==-1?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(v){v=v=="auto"?this.$mode.type!="text":v!="text",v!=this.$wrapAsCode&&(this.$wrapAsCode=v,this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0)))},initialValue:"auto"},indentedSoftWrap:{set:function(){this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0))},initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(v){this.$useWorker=v,this.$stopWorker(),v&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(v){v=parseInt(v),v>0&&this.$tabSize!==v&&(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=v,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},foldStyle:{set:function(v){this.setFoldStyle(v)},handlesSet:!0},overwrite:{set:function(v){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(v){this.doc.setNewLineMode(v)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(v){this.setMode(v)},get:function(){return this.$modeId},handlesSet:!0}}),D.EditSession=d}),ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(a,D,z){var k=a("./lib/lang"),A=a("./lib/oop"),h=a("./range").Range,s=function(){this.$options={}};(function(){this.set=function(t){return A.mixin(this.$options,t),this},this.getOptions=function(){return k.copyObject(this.$options)},this.setOptions=function(t){this.$options=t},this.find=function(t){var e=this.$options,r=this.$matchIterator(t,e);if(!r)return!1;var n=null;return r.forEach(function(i,o,d,v){return n=new h(i,o,d,v),o==v&&e.start&&e.start.start&&e.skipCurrent!=!1&&n.isEqual(e.start)?(n=null,!1):!0}),n},this.findAll=function(t){var e=this.$options;if(!e.needle)return[];this.$assembleRegExp(e);var r=e.range,n=r?t.getLines(r.start.row,r.end.row):t.doc.getAllLines(),i=[],o=e.re;if(e.$isMultiLine){var d=o.length,v=n.length-d,_;e:for(var C=o.offset||0;C<=v;C++){for(var $=0;$<d;$++)if(n[C+$].search(o[$])==-1)continue e;var c=n[C],g=n[C+d-1],E=c.length-c.match(o[0])[0].length,m=g.match(o[d-1])[0].length;_&&_.end.row===C&&_.end.column>E||(i.push(_=new h(C,E,C+d-1,m)),d>2&&(C=C+d-2))}}else for(var p=0;p<n.length;p++)for(var f=k.getMatchOffsets(n[p],o),$=0;$<f.length;$++){var F=f[$];i.push(new h(p,F.offset,p,F.offset+F.length))}if(r){for(var R=r.start.column,I=r.start.column,p=0,$=i.length-1;p<$&&i[p].start.column<R&&i[p].start.row==r.start.row;)p++;for(;p<$&&i[$].end.column>I&&i[$].end.row==r.end.row;)$--;for(i=i.slice(p,$+1),p=0,$=i.length;p<$;p++)i[p].start.row+=r.start.row,i[p].end.row+=r.start.row}return i},this.replace=function(t,e){var r=this.$options,n=this.$assembleRegExp(r);if(r.$isMultiLine)return e;if(n){var i=n.exec(t);if(!i||i[0].length!=t.length)return null;if(e=t.replace(n,e),r.preserveCase){e=e.split("");for(var o=Math.min(t.length,t.length);o--;){var d=t[o];d&&d.toLowerCase()!=d?e[o]=e[o].toUpperCase():e[o]=e[o].toLowerCase()}e=e.join("")}return e}},this.$assembleRegExp=function(t,e){if(t.needle instanceof RegExp)return t.re=t.needle;var r=t.needle;if(!t.needle)return t.re=!1;t.regExp||(r=k.escapeRegExp(r)),t.wholeWord&&(r=l(r,t));var n=t.caseSensitive?"gm":"gmi";if(t.$isMultiLine=!e&&/[\n\r]/.test(r),t.$isMultiLine)return t.re=this.$assembleMultilineRegExp(r,n);try{var i=new RegExp(r,n)}catch{i=!1}return t.re=i},this.$assembleMultilineRegExp=function(t,e){for(var r=t.replace(/\r\n|\r|\n/g,`$
^`).split(`
`),n=[],i=0;i<r.length;i++)try{n.push(new RegExp(r[i],e))}catch{return!1}return n},this.$matchIterator=function(t,e){var r=this.$assembleRegExp(e);if(!r)return!1;var n=e.backwards==!0,i=e.skipCurrent!=!1,o=e.range,d=e.start;d||(d=o?o[n?"end":"start"]:t.selection.getRange()),d.start&&(d=d[i!=n?"end":"start"]);var v=o?o.start.row:0,_=o?o.end.row:t.getLength()-1;if(n)var C=function(g){var E=d.row;if(!c(E,d.column,g)){for(E--;E>=v;E--)if(c(E,Number.MAX_VALUE,g))return;if(e.wrap!=!1){for(E=_,v=d.row;E>=v;E--)if(c(E,Number.MAX_VALUE,g))return}}};else var C=function(E){var m=d.row;if(!c(m,d.column,E)){for(m=m+1;m<=_;m++)if(c(m,0,E))return;if(e.wrap!=!1){for(m=v,_=d.row;m<=_;m++)if(c(m,0,E))return}}};if(e.$isMultiLine)var $=r.length,c=function(g,E,m){var p=n?g-$+1:g;if(!(p<0)){var f=t.getLine(p),F=f.search(r[0]);if(!(!n&&F<E||F===-1)){for(var R=1;R<$;R++)if(f=t.getLine(p+R),f.search(r[R])==-1)return;var I=f.match(r[$-1])[0].length;if(!(n&&I>E)&&m(p,F,p+$-1,I))return!0}}};else if(n)var c=function(E,m,p){var f=t.getLine(E),F=[],R,I=0;for(r.lastIndex=0;R=r.exec(f);){var S=R[0].length;if(I=R.index,!S){if(I>=f.length)break;r.lastIndex=I+=1}if(R.index+S>m)break;F.push(R.index,S)}for(var P=F.length-1;P>=0;P-=2){var G=F[P-1],S=F[P];if(p(E,G,E,G+S))return!0}};else var c=function(E,m,p){var f=t.getLine(E),F,R;for(r.lastIndex=m;R=r.exec(f);){var I=R[0].length;if(F=R.index,p(E,F,E,F+I))return!0;if(!I&&(r.lastIndex=F+=1,F>=f.length))return!1}};return{forEach:C}}}).call(s.prototype);function l(t,e){function r(n){return/\w/.test(n)||e.regExp?"\\b":""}return r(t[0])+t+r(t[t.length-1])}D.Search=s}),ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(a,D,z){var k=a("../lib/keys"),A=a("../lib/useragent"),h=k.KEY_MODS;function s(t,e){this.platform=e||(A.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(t),this.$singleCommand=!0}function l(t,e){s.call(this,t,e),this.$singleCommand=!1}l.prototype=s.prototype,(function(){this.addCommand=function(e){this.commands[e.name]&&this.removeCommand(e),this.commands[e.name]=e,e.bindKey&&this._buildKeyHash(e)},this.removeCommand=function(e,r){var n=e&&(typeof e=="string"?e:e.name);e=this.commands[n],r||delete this.commands[n];var i=this.commandKeyBinding;for(var o in i){var d=i[o];if(d==e)delete i[o];else if(Array.isArray(d)){var v=d.indexOf(e);v!=-1&&(d.splice(v,1),d.length==1&&(i[o]=d[0]))}}},this.bindKey=function(e,r,n){if(typeof e=="object"&&e&&(n==null&&(n=e.position),e=e[this.platform]),!!e){if(typeof r=="function")return this.addCommand({exec:r,bindKey:e,name:r.name||e});e.split("|").forEach(function(i){var o="";if(i.indexOf(" ")!=-1){var d=i.split(/\s+/);i=d.pop(),d.forEach(function(C){var $=this.parseKeys(C),c=h[$.hashId]+$.key;o+=(o?" ":"")+c,this._addCommandToBinding(o,"chainKeys")},this),o+=" "}var v=this.parseKeys(i),_=h[v.hashId]+v.key;this._addCommandToBinding(o+_,r,n)},this)}};function t(e){return typeof e=="object"&&e.bindKey&&e.bindKey.position||(e.isDefault?-100:0)}this._addCommandToBinding=function(e,r,n){var i=this.commandKeyBinding,o;if(!r)delete i[e];else if(!i[e]||this.$singleCommand)i[e]=r;else{Array.isArray(i[e])?(o=i[e].indexOf(r))!=-1&&i[e].splice(o,1):i[e]=[i[e]],typeof n!="number"&&(n=t(r));var d=i[e];for(o=0;o<d.length;o++){var v=d[o],_=t(v);if(_>n)break}d.splice(o,0,r)}},this.addCommands=function(e){e&&Object.keys(e).forEach(function(r){var n=e[r];if(n){if(typeof n=="string")return this.bindKey(n,r);typeof n=="function"&&(n={exec:n}),typeof n=="object"&&(n.name||(n.name=r),this.addCommand(n))}},this)},this.removeCommands=function(e){Object.keys(e).forEach(function(r){this.removeCommand(e[r])},this)},this.bindKeys=function(e){Object.keys(e).forEach(function(r){this.bindKey(r,e[r])},this)},this._buildKeyHash=function(e){this.bindKey(e.bindKey,e)},this.parseKeys=function(e){var r=e.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(_){return _}),n=r.pop(),i=k[n];if(k.FUNCTION_KEYS[i])n=k.FUNCTION_KEYS[i].toLowerCase();else if(r.length){if(r.length==1&&r[0]=="shift")return{key:n.toUpperCase(),hashId:-1}}else return{key:n,hashId:-1};for(var o=0,d=r.length;d--;){var v=k.KEY_MODS[r[d]];if(v==null)return typeof console<"u"&&console.error("invalid modifier "+r[d]+" in "+e),!1;o|=v}return{key:n,hashId:o}},this.findKeyCommand=function(r,n){var i=h[r]+n;return this.commandKeyBinding[i]},this.handleKeyboard=function(e,r,n,i){if(!(i<0)){var o=h[r]+n,d=this.commandKeyBinding[o];return e.$keyChain&&(e.$keyChain+=" "+o,d=this.commandKeyBinding[e.$keyChain]||d),d&&(d=="chainKeys"||d[d.length-1]=="chainKeys")?(e.$keyChain=e.$keyChain||o,{command:"null"}):(e.$keyChain&&((!r||r==4)&&n.length==1?e.$keyChain=e.$keyChain.slice(0,-o.length-1):(r==-1||i>0)&&(e.$keyChain="")),{command:d})}},this.getStatusText=function(e,r){return r.$keyChain||""}}).call(s.prototype),D.HashHandler=s,D.MultiHashHandler=l}),ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(a,D,z){var k=a("../lib/oop"),A=a("../keyboard/hash_handler").MultiHashHandler,h=a("../lib/event_emitter").EventEmitter,s=function(l,t){A.call(this,t,l),this.byName=this.commands,this.setDefaultHandler("exec",function(e){return e.command.exec(e.editor,e.args||{})})};k.inherits(s,A),(function(){k.implement(this,h),this.exec=function(l,t,e){if(Array.isArray(l)){for(var r=l.length;r--;)if(this.exec(l[r],t,e))return!0;return!1}if(typeof l=="string"&&(l=this.commands[l]),!l||t&&t.$readOnly&&!l.readOnly||this.$checkCommandState!=!1&&l.isAvailable&&!l.isAvailable(t))return!1;var n={editor:t,command:l,args:e};return n.returnValue=this._emit("exec",n),this._signal("afterExec",n),n.returnValue!==!1},this.toggleRecording=function(l){if(!this.$inReplay)return l&&l._emit("changeStatus"),this.recording?(this.macro.pop(),this.off("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=(function(t){this.macro.push([t.command,t.args])}).bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},this.replay=function(l){if(!(this.$inReplay||!this.macro)){if(this.recording)return this.toggleRecording(l);try{this.$inReplay=!0,this.macro.forEach(function(t){typeof t=="string"?this.exec(t,l):this.exec(t[0],l,t[1])},this)}finally{this.$inReplay=!1}}},this.trimMacro=function(l){return l.map(function(t){return typeof t[0]!="string"&&(t[0]=t[0].name),t[1]||(t=t[0]),t})}}).call(s.prototype),D.CommandManager=s}),ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],function(a,D,z){var k=a("../lib/lang"),A=a("../config"),h=a("../range").Range;function s(t,e){return{win:t,mac:e}}D.commands=[{name:"showSettingsMenu",bindKey:s("Ctrl-,","Command-,"),exec:function(t){A.loadModule("ace/ext/settings_menu",function(e){e.init(t),t.showSettingsMenu()})},readOnly:!0},{name:"goToNextError",bindKey:s("Alt-E","F4"),exec:function(t){A.loadModule("./ext/error_marker",function(e){e.showErrorMarker(t,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",bindKey:s("Alt-Shift-E","Shift-F4"),exec:function(t){A.loadModule("./ext/error_marker",function(e){e.showErrorMarker(t,-1)})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",description:"Select all",bindKey:s("Ctrl-A","Command-A"),exec:function(t){t.selectAll()},readOnly:!0},{name:"centerselection",description:"Center selection",bindKey:s(null,"Ctrl-L"),exec:function(t){t.centerSelection()},readOnly:!0},{name:"gotoline",description:"Go to line...",bindKey:s("Ctrl-L","Command-L"),exec:function(t,e){typeof e=="number"&&!isNaN(e)&&t.gotoLine(e),t.prompt({$type:"gotoLine"})},readOnly:!0},{name:"fold",bindKey:s("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(t){t.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:s("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(t){t.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",bindKey:s("F2","F2"),exec:function(t){t.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",bindKey:s("Alt-F2","Alt-F2"),exec:function(t){t.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",description:"Fold all",bindKey:s(null,"Ctrl-Command-Option-0"),exec:function(t){t.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldAllComments",description:"Fold all comments",bindKey:s(null,"Ctrl-Command-Option-0"),exec:function(t){t.session.foldAllComments()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",description:"Fold other",bindKey:s("Alt-0","Command-Option-0"),exec:function(t){t.session.foldAll(),t.session.unfold(t.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",description:"Unfold all",bindKey:s("Alt-Shift-0","Command-Option-Shift-0"),exec:function(t){t.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",description:"Find next",bindKey:s("Ctrl-K","Command-G"),exec:function(t){t.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",description:"Find previous",bindKey:s("Ctrl-Shift-K","Command-Shift-G"),exec:function(t){t.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",description:"Select or find next",bindKey:s("Alt-K","Ctrl-G"),exec:function(t){t.selection.isEmpty()?t.selection.selectWord():t.findNext()},readOnly:!0},{name:"selectOrFindPrevious",description:"Select or find previous",bindKey:s("Alt-Shift-K","Ctrl-Shift-G"),exec:function(t){t.selection.isEmpty()?t.selection.selectWord():t.findPrevious()},readOnly:!0},{name:"find",description:"Find",bindKey:s("Ctrl-F","Command-F"),exec:function(t){A.loadModule("ace/ext/searchbox",function(e){e.Search(t)})},readOnly:!0},{name:"overwrite",description:"Overwrite",bindKey:"Insert",exec:function(t){t.toggleOverwrite()},readOnly:!0},{name:"selecttostart",description:"Select to start",bindKey:s("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(t){t.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",description:"Go to start",bindKey:s("Ctrl-Home","Command-Home|Command-Up"),exec:function(t){t.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",description:"Select up",bindKey:s("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(t){t.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",description:"Go line up",bindKey:s("Up","Up|Ctrl-P"),exec:function(t,e){t.navigateUp(e.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",description:"Select to end",bindKey:s("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(t){t.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",description:"Go to end",bindKey:s("Ctrl-End","Command-End|Command-Down"),exec:function(t){t.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",description:"Select down",bindKey:s("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(t){t.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",description:"Go line down",bindKey:s("Down","Down|Ctrl-N"),exec:function(t,e){t.navigateDown(e.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",description:"Select word left",bindKey:s("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(t){t.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",description:"Go to word left",bindKey:s("Ctrl-Left","Option-Left"),exec:function(t){t.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",description:"Select to line start",bindKey:s("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(t){t.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",description:"Go to line start",bindKey:s("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(t){t.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",description:"Select left",bindKey:s("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(t){t.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",description:"Go to left",bindKey:s("Left","Left|Ctrl-B"),exec:function(t,e){t.navigateLeft(e.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",description:"Select word right",bindKey:s("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(t){t.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",description:"Go to word right",bindKey:s("Ctrl-Right","Option-Right"),exec:function(t){t.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",description:"Select to line end",bindKey:s("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(t){t.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",description:"Go to line end",bindKey:s("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(t){t.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",description:"Select right",bindKey:s("Shift-Right","Shift-Right"),exec:function(t){t.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",description:"Go to right",bindKey:s("Right","Right|Ctrl-F"),exec:function(t,e){t.navigateRight(e.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",description:"Select page down",bindKey:"Shift-PageDown",exec:function(t){t.selectPageDown()},readOnly:!0},{name:"pagedown",description:"Page down",bindKey:s(null,"Option-PageDown"),exec:function(t){t.scrollPageDown()},readOnly:!0},{name:"gotopagedown",description:"Go to page down",bindKey:s("PageDown","PageDown|Ctrl-V"),exec:function(t){t.gotoPageDown()},readOnly:!0},{name:"selectpageup",description:"Select page up",bindKey:"Shift-PageUp",exec:function(t){t.selectPageUp()},readOnly:!0},{name:"pageup",description:"Page up",bindKey:s(null,"Option-PageUp"),exec:function(t){t.scrollPageUp()},readOnly:!0},{name:"gotopageup",description:"Go to page up",bindKey:"PageUp",exec:function(t){t.gotoPageUp()},readOnly:!0},{name:"scrollup",description:"Scroll up",bindKey:s("Ctrl-Up",null),exec:function(t){t.renderer.scrollBy(0,-2*t.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",description:"Scroll down",bindKey:s("Ctrl-Down",null),exec:function(t){t.renderer.scrollBy(0,2*t.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",description:"Select line start",bindKey:"Shift-Home",exec:function(t){t.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",description:"Select line end",bindKey:"Shift-End",exec:function(t){t.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",description:"Toggle recording",bindKey:s("Ctrl-Alt-E","Command-Option-E"),exec:function(t){t.commands.toggleRecording(t)},readOnly:!0},{name:"replaymacro",description:"Replay macro",bindKey:s("Ctrl-Shift-E","Command-Shift-E"),exec:function(t){t.commands.replay(t)},readOnly:!0},{name:"jumptomatching",description:"Jump to matching",bindKey:s("Ctrl-\\|Ctrl-P","Command-\\"),exec:function(t){t.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",description:"Select to matching",bindKey:s("Ctrl-Shift-\\|Ctrl-Shift-P","Command-Shift-\\"),exec:function(t){t.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",description:"Expand to matching",bindKey:s("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(t){t.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",description:"Pass keys to browser",bindKey:s(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",description:"Copy",exec:function(t){},readOnly:!0},{name:"cut",description:"Cut",exec:function(t){var e=t.$copyWithEmptySelection&&t.selection.isEmpty(),r=e?t.selection.getLineRange():t.selection.getRange();t._emit("cut",r),r.isEmpty()||t.session.remove(r),t.clearSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",description:"Paste",exec:function(t,e){t.$handlePaste(e)},scrollIntoView:"cursor"},{name:"removeline",description:"Remove line",bindKey:s("Ctrl-D","Command-D"),exec:function(t){t.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",description:"Duplicate selection",bindKey:s("Ctrl-Shift-D","Command-Shift-D"),exec:function(t){t.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",description:"Sort lines",bindKey:s("Ctrl-Alt-S","Command-Alt-S"),exec:function(t){t.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",description:"Toggle comment",bindKey:s("Ctrl-/","Command-/"),exec:function(t){t.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",description:"Toggle block comment",bindKey:s("Ctrl-Shift-/","Command-Shift-/"),exec:function(t){t.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",description:"Modify number up",bindKey:s("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(t){t.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",description:"Modify number down",bindKey:s("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(t){t.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",description:"Replace",bindKey:s("Ctrl-H","Command-Option-F"),exec:function(t){A.loadModule("ace/ext/searchbox",function(e){e.Search(t,!0)})}},{name:"undo",description:"Undo",bindKey:s("Ctrl-Z","Command-Z"),exec:function(t){t.undo()}},{name:"redo",description:"Redo",bindKey:s("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(t){t.redo()}},{name:"copylinesup",description:"Copy lines up",bindKey:s("Alt-Shift-Up","Command-Option-Up"),exec:function(t){t.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",description:"Move lines up",bindKey:s("Alt-Up","Option-Up"),exec:function(t){t.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",description:"Copy lines down",bindKey:s("Alt-Shift-Down","Command-Option-Down"),exec:function(t){t.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",description:"Move lines down",bindKey:s("Alt-Down","Option-Down"),exec:function(t){t.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",description:"Delete",bindKey:s("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(t){t.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",description:"Backspace",bindKey:s("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(t){t.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",description:"Cut or delete",bindKey:s("Shift-Delete",null),exec:function(t){if(t.selection.isEmpty())t.remove("left");else return!1},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",description:"Remove to line start",bindKey:s("Alt-Backspace","Command-Backspace"),exec:function(t){t.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",description:"Remove to line end",bindKey:s("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(t){t.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",description:"Remove to line start hard",bindKey:s("Ctrl-Shift-Backspace",null),exec:function(t){var e=t.selection.getRange();e.start.column=0,t.session.remove(e)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",description:"Remove to line end hard",bindKey:s("Ctrl-Shift-Delete",null),exec:function(t){var e=t.selection.getRange();e.end.column=Number.MAX_VALUE,t.session.remove(e)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",description:"Remove word left",bindKey:s("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(t){t.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",description:"Remove word right",bindKey:s("Ctrl-Delete","Alt-Delete"),exec:function(t){t.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",description:"Outdent",bindKey:s("Shift-Tab","Shift-Tab"),exec:function(t){t.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",description:"Indent",bindKey:s("Tab","Tab"),exec:function(t){t.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",description:"Block outdent",bindKey:s("Ctrl-[","Ctrl-["),exec:function(t){t.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",description:"Block indent",bindKey:s("Ctrl-]","Ctrl-]"),exec:function(t){t.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",description:"Insert string",exec:function(t,e){t.insert(e)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",description:"Insert text",exec:function(t,e){t.insert(k.stringRepeat(e.text||"",e.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",description:"Split line",bindKey:s(null,"Ctrl-O"),exec:function(t){t.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",description:"Transpose letters",bindKey:s("Alt-Shift-X","Ctrl-T"),exec:function(t){t.transposeLetters()},multiSelectAction:function(t){t.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",description:"To uppercase",bindKey:s("Ctrl-U","Ctrl-U"),exec:function(t){t.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",description:"To lowercase",bindKey:s("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(t){t.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"autoindent",description:"Auto Indent",bindKey:s(null,null),exec:function(t){t.autoIndent()},multiSelectAction:"forEachLine",scrollIntoView:"animate"},{name:"expandtoline",description:"Expand to line",bindKey:s("Ctrl-Shift-L","Command-Shift-L"),exec:function(t){var e=t.selection.getRange();e.start.column=e.end.column=0,e.end.row++,t.selection.setRange(e,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"joinlines",description:"Join lines",bindKey:s(null,null),exec:function(t){for(var e=t.selection.isBackwards(),r=e?t.selection.getSelectionLead():t.selection.getSelectionAnchor(),n=e?t.selection.getSelectionAnchor():t.selection.getSelectionLead(),i=t.session.doc.getLine(r.row).length,o=t.session.doc.getTextRange(t.selection.getRange()),d=o.replace(/\n\s*/," ").length,v=t.session.doc.getLine(r.row),_=r.row+1;_<=n.row+1;_++){var C=k.stringTrimLeft(k.stringTrimRight(t.session.doc.getLine(_)));C.length!==0&&(C=" "+C),v+=C}n.row+1<t.session.doc.getLength()-1&&(v+=t.session.doc.getNewLineCharacter()),t.clearSelection(),t.session.doc.replace(new h(r.row,0,n.row+2,0),v),d>0?(t.selection.moveCursorTo(r.row,r.column),t.selection.selectTo(r.row,r.column+d)):(i=t.session.doc.getLine(r.row).length>i?i+1:i,t.selection.moveCursorTo(r.row,i))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",description:"Invert selection",bindKey:s(null,null),exec:function(t){var e=t.session.doc.getLength()-1,r=t.session.doc.getLine(e).length,n=t.selection.rangeList.ranges,i=[];n.length<1&&(n=[t.selection.getRange()]);for(var o=0;o<n.length;o++)o==n.length-1&&(n[o].end.row===e&&n[o].end.column===r||i.push(new h(n[o].end.row,n[o].end.column,e,r))),o===0?n[o].start.row===0&&n[o].start.column===0||i.push(new h(0,0,n[o].start.row,n[o].start.column)):i.push(new h(n[o-1].end.row,n[o-1].end.column,n[o].start.row,n[o].start.column));t.exitMultiSelectMode(),t.clearSelection();for(var o=0;o<i.length;o++)t.selection.addRange(i[o],!1)},readOnly:!0,scrollIntoView:"none"},{name:"addLineAfter",exec:function(t){t.selection.clearSelection(),t.navigateLineEnd(),t.insert(`
`)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"addLineBefore",exec:function(t){t.selection.clearSelection();var e=t.getCursorPosition();t.selection.moveTo(e.row-1,Number.MAX_VALUE),t.insert(`
`),e.row===0&&t.navigateUp()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"openCommandPallete",description:"Open command pallete",bindKey:s("F1","F1"),exec:function(t){t.prompt({$type:"commands"})},readOnly:!0},{name:"modeSelect",description:"Change language mode...",bindKey:s(null,null),exec:function(t){t.prompt({$type:"modes"})},readOnly:!0}];for(var l=1;l<9;l++)D.commands.push({name:"foldToLevel"+l,description:"Fold To Level "+l,level:l,exec:function(t){t.session.foldToLevel(this.level)},scrollIntoView:"center",readOnly:!0})}),ace.define("ace/editor",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator","ace/clipboard"],function(a,D,z){a("./lib/fixoldbrowsers");var k=a("./lib/oop"),A=a("./lib/dom"),h=a("./lib/lang"),s=a("./lib/useragent"),l=a("./keyboard/textinput").TextInput,t=a("./mouse/mouse_handler").MouseHandler,e=a("./mouse/fold_handler").FoldHandler,r=a("./keyboard/keybinding").KeyBinding,n=a("./edit_session").EditSession,i=a("./search").Search,o=a("./range").Range,d=a("./lib/event_emitter").EventEmitter,v=a("./commands/command_manager").CommandManager,_=a("./commands/default_commands").commands,C=a("./config"),$=a("./token_iterator").TokenIterator,c=a("./clipboard"),g=function(m,p,f){this.$toDestroy=[];var F=m.getContainerElement();this.container=F,this.renderer=m,this.id="editor"+ ++g.$uid,this.commands=new v(s.isMac?"mac":"win",_),typeof document=="object"&&(this.textInput=new l(m.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new t(this),new e(this)),this.keyBinding=new r(this),this.$search=new i().set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=h.delayedCall((function(){this._signal("input",{}),this.session&&this.session.bgTokenizer&&this.session.bgTokenizer.scheduleStart()}).bind(this)),this.on("change",function(R,I){I._$emitInputEvent.schedule(31)}),this.setSession(p||f&&f.session||new n("")),C.resetOptions(this),f&&this.setOptions(f),C._signal("editor",this)};g.$uid=0,(function(){k.implement(this,d),this.$initOperationListeners=function(){this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=h.delayedCall(this.endOperation.bind(this,!0)),this.on("change",(function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.docChanged=!0}).bind(this),!0),this.on("changeSelection",(function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.selectionChanged=!0}).bind(this),!0)},this.curOp=null,this.prevOp={},this.startOperation=function(m){if(this.curOp){if(!m||this.curOp.command)return;this.prevOp=this.curOp}m||(this.previousCommand=null,m={}),this.$opResetTimer.schedule(),this.curOp=this.session.curOp={command:m.command||{},args:m.args,scrollTop:this.renderer.scrollTop},this.curOp.selectionBefore=this.selection.toJSON()},this.endOperation=function(m){if(this.curOp&&this.session){if(m&&m.returnValue===!1||!this.session)return this.curOp=null;if(m==!0&&this.curOp.command&&this.curOp.command.name=="mouse"||(this._signal("beforeEndOperation"),!this.curOp))return;var p=this.curOp.command,f=p&&p.scrollIntoView;if(f){switch(f){case"center-animate":f="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var F=this.selection.getRange(),R=this.renderer.layerConfig;(F.start.row>=R.lastRow||F.end.row<=R.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead);break}f=="animate"&&this.renderer.animateScrolling(this.curOp.scrollTop)}var I=this.selection.toJSON();this.curOp.selectionAfter=I,this.$lastSel=this.selection.toJSON(),this.session.getUndoManager().addSelection(I),this.prevOp=this.curOp,this.curOp=null}},this.$mergeableCommands=["backspace","del","insertstring"],this.$historyTracker=function(m){if(this.$mergeUndoDeltas){var p=this.prevOp,f=this.$mergeableCommands,F=p.command&&m.command.name==p.command.name;if(m.command.name=="insertstring"){var R=m.args;this.mergeNextCommand===void 0&&(this.mergeNextCommand=!0),F=F&&this.mergeNextCommand&&(!/\s/.test(R)||/\s/.test(p.args)),this.mergeNextCommand=!0}else F=F&&f.indexOf(m.command.name)!==-1;this.$mergeUndoDeltas!="always"&&Date.now()-this.sequenceStartTime>2e3&&(F=!1),F?this.session.mergeUndoDeltas=!0:f.indexOf(m.command.name)!==-1&&(this.sequenceStartTime=Date.now())}},this.setKeyboardHandler=function(m,p){if(m&&typeof m=="string"&&m!="ace"){this.$keybindingId=m;var f=this;C.loadModule(["keybinding",m],function(F){f.$keybindingId==m&&f.keyBinding.setKeyboardHandler(F&&F.handler),p&&p()})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(m),p&&p()},this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},this.setSession=function(m){if(this.session!=m){this.curOp&&this.endOperation(),this.curOp={};var p=this.session;if(p){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange);var f=this.session.getSelection();f.off("changeCursor",this.$onCursorChange),f.off("changeSelection",this.$onSelectionChange)}this.session=m,m?(this.$onDocumentChange=this.onDocumentChange.bind(this),m.on("change",this.$onDocumentChange),this.renderer.setSession(m),this.$onChangeMode=this.onChangeMode.bind(this),m.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),m.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),m.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),m.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),m.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),m.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=m.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.onCursorChange(),this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(m)),this._signal("changeSession",{session:m,oldSession:p}),this.curOp=null,p&&p._signal("changeEditor",{oldEditor:this}),m&&m._signal("changeEditor",{editor:this}),m&&m.bgTokenizer&&m.bgTokenizer.scheduleStart()}},this.getSession=function(){return this.session},this.setValue=function(m,p){return this.session.doc.setValue(m),p?p==1?this.navigateFileEnd():p==-1&&this.navigateFileStart():this.selectAll(),m},this.getValue=function(){return this.session.getValue()},this.getSelection=function(){return this.selection},this.resize=function(m){this.renderer.onResize(m)},this.setTheme=function(m,p){this.renderer.setTheme(m,p)},this.getTheme=function(){return this.renderer.getTheme()},this.setStyle=function(m){this.renderer.setStyle(m)},this.unsetStyle=function(m){this.renderer.unsetStyle(m)},this.getFontSize=function(){return this.getOption("fontSize")||A.computedStyle(this.container).fontSize},this.setFontSize=function(m){this.setOption("fontSize",m)},this.$highlightBrackets=function(){if(!this.$highlightPending){var m=this;this.$highlightPending=!0,setTimeout(function(){m.$highlightPending=!1;var p=m.session;if(!(!p||!p.bgTokenizer)){p.$bracketHighlight&&(p.$bracketHighlight.markerIds.forEach(function(R){p.removeMarker(R)}),p.$bracketHighlight=null);var f=p.getMatchingBracketRanges(m.getCursorPosition());if(!f&&p.$mode.getMatching&&(f=p.$mode.getMatching(m.session)),!!f){var F="ace_bracket";Array.isArray(f)?f.length==1&&(F="ace_error_bracket"):f=[f],f.length==2&&(o.comparePoints(f[0].end,f[1].start)==0?f=[o.fromPoints(f[0].start,f[1].end)]:o.comparePoints(f[0].start,f[1].end)==0&&(f=[o.fromPoints(f[1].start,f[0].end)])),p.$bracketHighlight={ranges:f,markerIds:f.map(function(R){return p.addMarker(R,F,"text")})}}}},50)}},this.$highlightTags=function(){if(!this.$highlightTagPending){var m=this;this.$highlightTagPending=!0,setTimeout(function(){m.$highlightTagPending=!1;var p=m.session;if(!(!p||!p.bgTokenizer)){var f=m.getCursorPosition(),F=new $(m.session,f.row,f.column),R=F.getCurrentToken();if(!R||!/\b(?:tag-open|tag-name)/.test(R.type)){p.removeMarker(p.$tagHighlight),p.$tagHighlight=null;return}if(!(R.type.indexOf("tag-open")!==-1&&(R=F.stepForward(),!R))){var I=R.value,S=R.value,P=0,G=F.stepBackward();if(G.value==="<")do G=R,R=F.stepForward(),R&&(R.type.indexOf("tag-name")!==-1?(S=R.value,I===S&&(G.value==="<"?P++:G.value==="</"&&P--)):I===S&&R.value==="/>"&&P--);while(R&&P>=0);else{do if(R=G,G=F.stepBackward(),R){if(R.type.indexOf("tag-name")!==-1)I===R.value&&(G.value==="<"?P++:G.value==="</"&&P--);else if(R.value==="/>"){for(var Z=0,ae=G;ae;){if(ae.type.indexOf("tag-name")!==-1&&ae.value===I){P--;break}else if(ae.value==="<")break;ae=F.stepBackward(),Z++}for(var re=0;re<Z;re++)F.stepForward()}}while(G&&P<=0);F.stepForward()}if(!R){p.removeMarker(p.$tagHighlight),p.$tagHighlight=null;return}var ce=F.getCurrentTokenRow(),j=F.getCurrentTokenColumn(),ee=new o(ce,j,ce,j+R.value.length),ie=p.$backMarkers[p.$tagHighlight];p.$tagHighlight&&ie!=null&&ee.compareRange(ie.range)!==0&&(p.removeMarker(p.$tagHighlight),p.$tagHighlight=null),p.$tagHighlight||(p.$tagHighlight=p.addMarker(ee,"ace_bracket","text"))}}},50)}},this.focus=function(){var m=this;setTimeout(function(){m.isFocused()||m.textInput.focus()}),this.textInput.focus()},this.isFocused=function(){return this.textInput.isFocused()},this.blur=function(){this.textInput.blur()},this.onFocus=function(m){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",m))},this.onBlur=function(m){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",m))},this.$cursorChange=function(){this.renderer.updateCursor(),this.$highlightBrackets(),this.$highlightTags(),this.$updateHighlightActiveLine()},this.onDocumentChange=function(m){var p=this.session.$useWrapMode,f=m.start.row==m.end.row?m.end.row:1/0;this.renderer.updateLines(m.start.row,f,p),this._signal("change",m),this.$cursorChange()},this.onTokenizerUpdate=function(m){var p=m.data;this.renderer.updateLines(p.first,p.last)},this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},this.onCursorChange=function(){this.$cursorChange(),this._signal("changeSelection")},this.$updateHighlightActiveLine=function(){var m=this.getSession(),p;if(this.$highlightActiveLine&&((this.$selectionStyle!="line"||!this.selection.isMultiLine())&&(p=this.getCursorPosition()),this.renderer.theme&&this.renderer.theme.$selectionColorConflict&&!this.selection.isEmpty()&&(p=!1),this.renderer.$maxLines&&this.session.getLength()===1&&!(this.renderer.$minLines>1)&&(p=!1)),m.$highlightLineMarker&&!p)m.removeMarker(m.$highlightLineMarker.id),m.$highlightLineMarker=null;else if(!m.$highlightLineMarker&&p){var f=new o(p.row,p.column,p.row,1/0);f.id=m.addMarker(f,"ace_active-line","screenLine"),m.$highlightLineMarker=f}else p&&(m.$highlightLineMarker.start.row=p.row,m.$highlightLineMarker.end.row=p.row,m.$highlightLineMarker.start.column=p.column,m._signal("changeBackMarker"))},this.onSelectionChange=function(m){var p=this.session;if(p.$selectionMarker&&p.removeMarker(p.$selectionMarker),p.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var f=this.selection.getRange(),F=this.getSelectionStyle();p.$selectionMarker=p.addMarker(f,"ace_selection",F)}var R=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(R),this._signal("changeSelection")},this.$getSelectionHighLightRegexp=function(){var m=this.session,p=this.getSelectionRange();if(!(p.isEmpty()||p.isMultiLine())){var f=p.start.column,F=p.end.column,R=m.getLine(p.start.row),I=R.substring(f,F);if(!(I.length>5e3||!/[\w\d]/.test(I))){var S=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:I}),P=R.substring(f-1,F+1);if(S.test(P))return S}}},this.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},this.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},this.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},this.onChangeMode=function(m){this.renderer.updateText(),this._emit("changeMode",m)},this.onChangeWrapLimit=function(){this.renderer.updateFull()},this.onChangeWrapMode=function(){this.renderer.onResize(!0)},this.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},this.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},this.getCopyText=function(){var m=this.getSelectedText(),p=this.session.doc.getNewLineCharacter(),f=!1;if(!m&&this.$copyWithEmptySelection){f=!0;for(var F=this.selection.getAllRanges(),R=0;R<F.length;R++){var I=F[R];R&&F[R-1].start.row==I.start.row||(m+=this.session.getLine(I.start.row)+p)}}var S={text:m};return this._signal("copy",S),c.lineMode=f?S.text:"",S.text},this.onCopy=function(){this.commands.exec("copy",this)},this.onCut=function(){this.commands.exec("cut",this)},this.onPaste=function(m,p){var f={text:m,event:p};this.commands.exec("paste",this,f)},this.$handlePaste=function(m){typeof m=="string"&&(m={text:m}),this._signal("paste",m);var p=m.text,f=p==c.lineMode,F=this.session;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)f?F.insert({row:this.selection.lead.row,column:0},p):this.insert(p);else if(f)this.selection.rangeList.ranges.forEach(function(Z){F.insert({row:Z.start.row,column:0},p)});else{var R=p.split(/\r\n|\r|\n/),I=this.selection.rangeList.ranges,S=R.length==2&&(!R[0]||!R[1]);if(R.length!=I.length||S)return this.commands.exec("insertstring",this,p);for(var P=I.length;P--;){var G=I[P];G.isEmpty()||F.remove(G),F.insert(G.start,R[P])}}},this.execCommand=function(m,p){return this.commands.exec(m,this,p)},this.insert=function(m,p){var f=this.session,F=f.getMode(),R=this.getCursorPosition();if(this.getBehavioursEnabled()&&!p){var I=F.transformAction(f.getState(R.row),"insertion",this,f,m);I&&(m!==I.text&&(this.inVirtualSelectionMode||(this.session.mergeUndoDeltas=!1,this.mergeNextCommand=!1)),m=I.text)}if(m=="	"&&(m=this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()&&m.indexOf(`
`)==-1){var S=new o.fromPoints(R,R);S.end.column+=m.length,this.session.remove(S)}}else{var S=this.getSelectionRange();R=this.session.remove(S),this.clearSelection()}if(m==`
`||m==`\r
`){var ae=f.getLine(R.row);if(R.column>ae.search(/\S|$/)){var P=ae.substr(R.column).search(/\S|$/);f.doc.removeInLine(R.row,R.column,R.column+P)}}this.clearSelection();var G=R.column,Z=f.getState(R.row),ae=f.getLine(R.row),re=F.checkOutdent(Z,ae,m);if(f.insert(R,m),I&&I.selection&&(I.selection.length==2?this.selection.setSelectionRange(new o(R.row,G+I.selection[0],R.row,G+I.selection[1])):this.selection.setSelectionRange(new o(R.row+I.selection[0],I.selection[1],R.row+I.selection[2],I.selection[3]))),this.$enableAutoIndent){if(f.getDocument().isNewLine(m)){var ce=F.getNextLineIndent(Z,ae.slice(0,R.column),f.getTabString());f.insert({row:R.row+1,column:0},ce)}re&&F.autoOutdent(Z,f,R.row)}},this.autoIndent=function(){var m=this.session,p=m.getMode(),f,F;if(this.selection.isEmpty())f=0,F=m.doc.getLength()-1;else{var R=this.getSelectionRange();f=R.start.row,F=R.end.row}for(var I="",S="",P="",G,Z,ae,re=m.getTabString(),ce=f;ce<=F;ce++)ce>0&&(I=m.getState(ce-1),S=m.getLine(ce-1),P=p.getNextLineIndent(I,S,re)),G=m.getLine(ce),Z=p.$getIndent(G),P!==Z&&(Z.length>0&&(ae=new o(ce,0,ce,Z.length),m.remove(ae)),P.length>0&&m.insert({row:ce,column:0},P)),p.autoOutdent(I,m,ce)},this.onTextInput=function(m,p){if(!p)return this.keyBinding.onTextInput(m);this.startOperation({command:{name:"insertstring"}});var f=this.applyComposition.bind(this,m,p);this.selection.rangeCount?this.forEachSelection(f):f(),this.endOperation()},this.applyComposition=function(m,p){if(p.extendLeft||p.extendRight){var f=this.selection.getRange();f.start.column-=p.extendLeft,f.end.column+=p.extendRight,f.start.column<0&&(f.start.row--,f.start.column+=this.session.getLine(f.start.row).length+1),this.selection.setRange(f),!m&&!f.isEmpty()&&this.remove()}if((m||!this.selection.isEmpty())&&this.insert(m,!0),p.restoreStart||p.restoreEnd){var f=this.selection.getRange();f.start.column-=p.restoreStart,f.end.column-=p.restoreEnd,this.selection.setRange(f)}},this.onCommandKey=function(m,p,f){return this.keyBinding.onCommandKey(m,p,f)},this.setOverwrite=function(m){this.session.setOverwrite(m)},this.getOverwrite=function(){return this.session.getOverwrite()},this.toggleOverwrite=function(){this.session.toggleOverwrite()},this.setScrollSpeed=function(m){this.setOption("scrollSpeed",m)},this.getScrollSpeed=function(){return this.getOption("scrollSpeed")},this.setDragDelay=function(m){this.setOption("dragDelay",m)},this.getDragDelay=function(){return this.getOption("dragDelay")},this.setSelectionStyle=function(m){this.setOption("selectionStyle",m)},this.getSelectionStyle=function(){return this.getOption("selectionStyle")},this.setHighlightActiveLine=function(m){this.setOption("highlightActiveLine",m)},this.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},this.setHighlightGutterLine=function(m){this.setOption("highlightGutterLine",m)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.setHighlightSelectedWord=function(m){this.setOption("highlightSelectedWord",m)},this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},this.setAnimatedScroll=function(m){this.renderer.setAnimatedScroll(m)},this.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},this.setShowInvisibles=function(m){this.renderer.setShowInvisibles(m)},this.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},this.setDisplayIndentGuides=function(m){this.renderer.setDisplayIndentGuides(m)},this.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},this.setShowPrintMargin=function(m){this.renderer.setShowPrintMargin(m)},this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},this.setPrintMarginColumn=function(m){this.renderer.setPrintMarginColumn(m)},this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},this.setReadOnly=function(m){this.setOption("readOnly",m)},this.getReadOnly=function(){return this.getOption("readOnly")},this.setBehavioursEnabled=function(m){this.setOption("behavioursEnabled",m)},this.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},this.setWrapBehavioursEnabled=function(m){this.setOption("wrapBehavioursEnabled",m)},this.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},this.setShowFoldWidgets=function(m){this.setOption("showFoldWidgets",m)},this.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},this.setFadeFoldWidgets=function(m){this.setOption("fadeFoldWidgets",m)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.remove=function(m){this.selection.isEmpty()&&(m=="left"?this.selection.selectLeft():this.selection.selectRight());var p=this.getSelectionRange();if(this.getBehavioursEnabled()){var f=this.session,F=f.getState(p.start.row),R=f.getMode().transformAction(F,"deletion",this,f,p);if(p.end.column===0){var I=f.getTextRange(p);if(I[I.length-1]==`
`){var S=f.getLine(p.end.row);/^\s+$/.test(S)&&(p.end.column=S.length)}}R&&(p=R)}this.session.remove(p),this.clearSelection()},this.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.selection.isEmpty()&&this.selection.selectLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var m=this.getSelectionRange();m.start.column==m.end.column&&m.start.row==m.end.row&&(m.end.column=0,m.end.row++),this.session.remove(m),this.clearSelection()},this.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var m=this.getCursorPosition();this.insert(`
`),this.moveCursorToPosition(m)},this.transposeLetters=function(){if(this.selection.isEmpty()){var m=this.getCursorPosition(),p=m.column;if(p!==0){var f=this.session.getLine(m.row),F,R;p<f.length?(F=f.charAt(p)+f.charAt(p-1),R=new o(m.row,p-1,m.row,p+1)):(F=f.charAt(p-1)+f.charAt(p-2),R=new o(m.row,p-2,m.row,p)),this.session.replace(R,F),this.session.selection.moveToPosition(R.end)}}},this.toLowerCase=function(){var m=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var p=this.getSelectionRange(),f=this.session.getTextRange(p);this.session.replace(p,f.toLowerCase()),this.selection.setSelectionRange(m)},this.toUpperCase=function(){var m=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var p=this.getSelectionRange(),f=this.session.getTextRange(p);this.session.replace(p,f.toUpperCase()),this.selection.setSelectionRange(m)},this.indent=function(){var m=this.session,p=this.getSelectionRange();if(p.start.row<p.end.row){var f=this.$getSelectedRows();m.indentRows(f.first,f.last,"	");return}else if(p.start.column<p.end.column){var F=m.getTextRange(p);if(!/^\s+$/.test(F)){var f=this.$getSelectedRows();m.indentRows(f.first,f.last,"	");return}}var R=m.getLine(p.start.row),I=p.start,S=m.getTabSize(),P=m.documentToScreenColumn(I.row,I.column);if(this.session.getUseSoftTabs())var G=S-P%S,Z=h.stringRepeat(" ",G);else{for(var G=P%S;R[p.start.column-1]==" "&&G;)p.start.column--,G--;this.selection.setSelectionRange(p),Z="	"}return this.insert(Z)},this.blockIndent=function(){var m=this.$getSelectedRows();this.session.indentRows(m.first,m.last,"	")},this.blockOutdent=function(){var m=this.session.getSelection();this.session.outdentRows(m.getRange())},this.sortLines=function(){for(var m=this.$getSelectedRows(),p=this.session,f=[],F=m.first;F<=m.last;F++)f.push(p.getLine(F));f.sort(function(S,P){return S.toLowerCase()<P.toLowerCase()?-1:S.toLowerCase()>P.toLowerCase()?1:0});for(var R=new o(0,0,0,0),F=m.first;F<=m.last;F++){var I=p.getLine(F);R.start.row=F,R.end.row=F,R.end.column=I.length,p.replace(R,f[F-m.first])}},this.toggleCommentLines=function(){var m=this.session.getState(this.getCursorPosition().row),p=this.$getSelectedRows();this.session.getMode().toggleCommentLines(m,this.session,p.first,p.last)},this.toggleBlockComment=function(){var m=this.getCursorPosition(),p=this.session.getState(m.row),f=this.getSelectionRange();this.session.getMode().toggleBlockComment(p,this.session,f,m)},this.getNumberAt=function(m,p){var f=/[\-]?[0-9]+(?:\.[0-9]+)?/g;f.lastIndex=0;for(var F=this.session.getLine(m);f.lastIndex<p;){var R=f.exec(F);if(R.index<=p&&R.index+R[0].length>=p){var I={value:R[0],start:R.index,end:R.index+R[0].length};return I}}return null},this.modifyNumber=function(m){var p=this.selection.getCursor().row,f=this.selection.getCursor().column,F=new o(p,f-1,p,f),R=this.session.getTextRange(F);if(!isNaN(parseFloat(R))&&isFinite(R)){var I=this.getNumberAt(p,f);if(I){var S=I.value.indexOf(".")>=0?I.start+I.value.indexOf(".")+1:I.end,P=I.start+I.value.length-S,G=parseFloat(I.value);G*=Math.pow(10,P),S!==I.end&&f<S?m*=Math.pow(10,I.end-f-1):m*=Math.pow(10,I.end-f),G+=m,G/=Math.pow(10,P);var Z=G.toFixed(P),ae=new o(p,I.start,p,I.end);this.session.replace(ae,Z),this.moveCursorTo(p,Math.max(I.start+1,f+Z.length-I.value.length))}}else this.toggleWord()},this.$toggleWordPairs=[["first","last"],["true","false"],["yes","no"],["width","height"],["top","bottom"],["right","left"],["on","off"],["x","y"],["get","set"],["max","min"],["horizontal","vertical"],["show","hide"],["add","remove"],["up","down"],["before","after"],["even","odd"],["in","out"],["inside","outside"],["next","previous"],["increase","decrease"],["attach","detach"],["&&","||"],["==","!="]],this.toggleWord=function(){var m=this.selection.getCursor().row,p=this.selection.getCursor().column;this.selection.selectWord();var f=this.getSelectedText(),F=this.selection.getWordRange().start.column,R=f.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g,"$1 ").split(/\s/),I=p-F-1;I<0&&(I=0);var S=0,P=0,G=this;f.match(/[A-Za-z0-9_]+/)&&R.forEach(function(he,ye){P=S+he.length,I>=S&&I<=P&&(f=he,G.selection.clearSelection(),G.moveCursorTo(m,S+F),G.selection.selectTo(m,P+F)),S=P});for(var Z=this.$toggleWordPairs,ae,re=0;re<Z.length;re++)for(var ce=Z[re],j=0;j<=1;j++){var ee=+!j,ie=f.match(new RegExp("^\\s?_?("+h.escapeRegExp(ce[j])+")\\s?$","i"));if(ie){var fe=f.match(new RegExp("([_]|^|\\s)("+h.escapeRegExp(ie[1])+")($|\\s)","g"));fe&&(ae=f.replace(new RegExp(h.escapeRegExp(ce[j]),"i"),function(he){var ye=ce[ee];return he.toUpperCase()==he?ye=ye.toUpperCase():he.charAt(0).toUpperCase()==he.charAt(0)&&(ye=ye.substr(0,0)+ce[ee].charAt(0).toUpperCase()+ye.substr(1)),ye}),this.insert(ae),ae="")}}},this.removeLines=function(){var m=this.$getSelectedRows();this.session.removeFullLines(m.first,m.last),this.clearSelection()},this.duplicateSelection=function(){var m=this.selection,p=this.session,f=m.getRange(),F=m.isBackwards();if(f.isEmpty()){var R=f.start.row;p.duplicateLines(R,R)}else{var I=F?f.start:f.end,S=p.insert(I,p.getTextRange(f),!1);f.start=I,f.end=S,m.setSelectionRange(f,F)}},this.moveLinesDown=function(){this.$moveLines(1,!1)},this.moveLinesUp=function(){this.$moveLines(-1,!1)},this.moveText=function(m,p,f){return this.session.moveText(m,p,f)},this.copyLinesUp=function(){this.$moveLines(-1,!0)},this.copyLinesDown=function(){this.$moveLines(1,!0)},this.$moveLines=function(m,p){var f,F,R=this.selection;if(!R.inMultiSelectMode||this.inVirtualSelectionMode){var I=R.toOrientedRange();f=this.$getSelectedRows(I),F=this.session.$moveLines(f.first,f.last,p?0:m),p&&m==-1&&(F=0),I.moveBy(F,0),R.fromOrientedRange(I)}else{var S=R.rangeList.ranges;R.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var P=0,G=0,Z=S.length,ae=0;ae<Z;ae++){var re=ae;S[ae].moveBy(P,0),f=this.$getSelectedRows(S[ae]);for(var ce=f.first,j=f.last;++ae<Z;){G&&S[ae].moveBy(G,0);var ee=this.$getSelectedRows(S[ae]);if(p&&ee.first!=j)break;if(!p&&ee.first>j+1)break;j=ee.last}for(ae--,P=this.session.$moveLines(ce,j,p?0:m),p&&m==-1&&(re=ae+1);re<=ae;)S[re].moveBy(P,0),re++;p||(P=0),G+=P}R.fromOrientedRange(R.ranges[0]),R.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},this.$getSelectedRows=function(m){return m=(m||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(m.start.row),last:this.session.getRowFoldEnd(m.end.row)}},this.onCompositionStart=function(m){this.renderer.showComposition(m)},this.onCompositionUpdate=function(m){this.renderer.setCompositionText(m)},this.onCompositionEnd=function(){this.renderer.hideComposition()},this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},this.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},this.isRowVisible=function(m){return m>=this.getFirstVisibleRow()&&m<=this.getLastVisibleRow()},this.isRowFullyVisible=function(m){return m>=this.renderer.getFirstFullyVisibleRow()&&m<=this.renderer.getLastFullyVisibleRow()},this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},this.$moveByPage=function(m,p){var f=this.renderer,F=this.renderer.layerConfig,R=m*Math.floor(F.height/F.lineHeight);p===!0?this.selection.$moveSelection(function(){this.moveCursorBy(R,0)}):p===!1&&(this.selection.moveCursorBy(R,0),this.selection.clearSelection());var I=f.scrollTop;f.scrollBy(0,R*F.lineHeight),p!=null&&f.scrollCursorIntoView(null,.5),f.animateScrolling(I)},this.selectPageDown=function(){this.$moveByPage(1,!0)},this.selectPageUp=function(){this.$moveByPage(-1,!0)},this.gotoPageDown=function(){this.$moveByPage(1,!1)},this.gotoPageUp=function(){this.$moveByPage(-1,!1)},this.scrollPageDown=function(){this.$moveByPage(1)},this.scrollPageUp=function(){this.$moveByPage(-1)},this.scrollToRow=function(m){this.renderer.scrollToRow(m)},this.scrollToLine=function(m,p,f,F){this.renderer.scrollToLine(m,p,f,F)},this.centerSelection=function(){var m=this.getSelectionRange(),p={row:Math.floor(m.start.row+(m.end.row-m.start.row)/2),column:Math.floor(m.start.column+(m.end.column-m.start.column)/2)};this.renderer.alignCursor(p,.5)},this.getCursorPosition=function(){return this.selection.getCursor()},this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},this.getSelectionRange=function(){return this.selection.getRange()},this.selectAll=function(){this.selection.selectAll()},this.clearSelection=function(){this.selection.clearSelection()},this.moveCursorTo=function(m,p){this.selection.moveCursorTo(m,p)},this.moveCursorToPosition=function(m){this.selection.moveCursorToPosition(m)},this.jumpToMatching=function(m,p){var f=this.getCursorPosition(),F=new $(this.session,f.row,f.column),R=F.getCurrentToken(),I=R||F.stepForward();if(I){var S,P=!1,G={},Z=f.column-I.start,ae,re={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(I.value.match(/[{}()\[\]]/g)){for(;Z<I.value.length&&!P;Z++)if(re[I.value[Z]])switch(ae=re[I.value[Z]]+"."+I.type.replace("rparen","lparen"),isNaN(G[ae])&&(G[ae]=0),I.value[Z]){case"(":case"[":case"{":G[ae]++;break;case")":case"]":case"}":G[ae]--,G[ae]===-1&&(S="bracket",P=!0);break}}else I.type.indexOf("tag-name")!==-1&&(isNaN(G[I.value])&&(G[I.value]=0),R.value==="<"?G[I.value]++:R.value==="</"&&G[I.value]--,G[I.value]===-1&&(S="tag",P=!0));P||(R=I,I=F.stepForward(),Z=0)}while(I&&!P);if(S){var ce,j;if(S==="bracket")ce=this.session.getBracketRange(f),ce||(ce=new o(F.getCurrentTokenRow(),F.getCurrentTokenColumn()+Z-1,F.getCurrentTokenRow(),F.getCurrentTokenColumn()+Z-1),j=ce.start,(p||j.row===f.row&&Math.abs(j.column-f.column)<2)&&(ce=this.session.getBracketRange(j)));else if(S==="tag"){if(I&&I.type.indexOf("tag-name")!==-1)var ee=I.value;else return;if(ce=new o(F.getCurrentTokenRow(),F.getCurrentTokenColumn()-2,F.getCurrentTokenRow(),F.getCurrentTokenColumn()-2),ce.compare(f.row,f.column)===0){P=!1;do I=R,R=F.stepBackward(),R&&(R.type.indexOf("tag-close")!==-1&&ce.setEnd(F.getCurrentTokenRow(),F.getCurrentTokenColumn()+1),I.value===ee&&I.type.indexOf("tag-name")!==-1&&(R.value==="<"?G[ee]++:R.value==="</"&&G[ee]--,G[ee]===0&&(P=!0)));while(R&&!P)}I&&I.type.indexOf("tag-name")&&(j=ce.start,j.row==f.row&&Math.abs(j.column-f.column)<2&&(j=ce.end))}j=ce&&ce.cursor||j,j&&(m?ce&&p?this.selection.setRange(ce):ce&&ce.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(j.row,j.column):this.selection.moveTo(j.row,j.column))}}},this.gotoLine=function(m,p,f){this.selection.clearSelection(),this.session.unfold({row:m-1,column:p||0}),this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(m-1,p||0),this.isRowFullyVisible(m-1)||this.scrollToLine(m-1,!0,f)},this.navigateTo=function(m,p){this.selection.moveTo(m,p)},this.navigateUp=function(m){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var p=this.selection.anchor.getPosition();return this.moveCursorToPosition(p)}this.selection.clearSelection(),this.selection.moveCursorBy(-m||-1,0)},this.navigateDown=function(m){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var p=this.selection.anchor.getPosition();return this.moveCursorToPosition(p)}this.selection.clearSelection(),this.selection.moveCursorBy(m||1,0)},this.navigateLeft=function(m){if(this.selection.isEmpty())for(m=m||1;m--;)this.selection.moveCursorLeft();else{var p=this.getSelectionRange().start;this.moveCursorToPosition(p)}this.clearSelection()},this.navigateRight=function(m){if(this.selection.isEmpty())for(m=m||1;m--;)this.selection.moveCursorRight();else{var p=this.getSelectionRange().end;this.moveCursorToPosition(p)}this.clearSelection()},this.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},this.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},this.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},this.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},this.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},this.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},this.replace=function(m,p){p&&this.$search.set(p);var f=this.$search.find(this.session),F=0;return f&&(this.$tryReplace(f,m)&&(F=1),this.selection.setSelectionRange(f),this.renderer.scrollSelectionIntoView(f.start,f.end)),F},this.replaceAll=function(m,p){p&&this.$search.set(p);var f=this.$search.findAll(this.session),F=0;if(!f.length)return F;var R=this.getSelectionRange();this.selection.moveTo(0,0);for(var I=f.length-1;I>=0;--I)this.$tryReplace(f[I],m)&&F++;return this.selection.setSelectionRange(R),F},this.$tryReplace=function(m,p){var f=this.session.getTextRange(m);return p=this.$search.replace(f,p),p!==null?(m.end=this.session.replace(m,p),m):null},this.getLastSearchOptions=function(){return this.$search.getOptions()},this.find=function(m,p,f){p||(p={}),typeof m=="string"||m instanceof RegExp?p.needle=m:typeof m=="object"&&k.mixin(p,m);var F=this.selection.getRange();p.needle==null&&(m=this.session.getTextRange(F)||this.$search.$options.needle,m||(F=this.session.getWordRange(F.start.row,F.start.column),m=this.session.getTextRange(F)),this.$search.set({needle:m})),this.$search.set(p),p.start||this.$search.set({start:F});var R=this.$search.find(this.session);if(p.preventScroll)return R;if(R)return this.revealRange(R,f),R;p.backwards?F.start=F.end:F.end=F.start,this.selection.setRange(F)},this.findNext=function(m,p){this.find({skipCurrent:!0,backwards:!1},m,p)},this.findPrevious=function(m,p){this.find(m,{skipCurrent:!0,backwards:!0},p)},this.revealRange=function(m,p){this.session.unfold(m),this.selection.setSelectionRange(m);var f=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(m.start,m.end,.5),p!==!1&&this.renderer.animateScrolling(f)},this.undo=function(){this.session.getUndoManager().undo(this.session),this.renderer.scrollCursorIntoView(null,.5)},this.redo=function(){this.session.getUndoManager().redo(this.session),this.renderer.scrollCursorIntoView(null,.5)},this.destroy=function(){this.$toDestroy&&(this.$toDestroy.forEach(function(m){m.destroy()}),this.$toDestroy=null),this.$mouseHandler&&this.$mouseHandler.destroy(),this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy(),this._$emitInputEvent&&this._$emitInputEvent.cancel(),this.removeAllListeners()},this.setAutoScrollEditorIntoView=function(m){if(m){var p,f=this,F=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var R=this.$scrollAnchor;R.style.cssText="position:absolute",this.container.insertBefore(R,this.container.firstChild);var I=this.on("changeSelection",function(){F=!0}),S=this.renderer.on("beforeRender",function(){F&&(p=f.renderer.container.getBoundingClientRect())}),P=this.renderer.on("afterRender",function(){if(F&&p&&(f.isFocused()||f.searchBox&&f.searchBox.isFocused())){var G=f.renderer,Z=G.$cursorLayer.$pixelPos,ae=G.layerConfig,re=Z.top-ae.offset;Z.top>=0&&re+p.top<0?F=!0:Z.top<ae.height&&Z.top+p.top+ae.lineHeight>window.innerHeight?F=!1:F=null,F!=null&&(R.style.top=re+"px",R.style.left=Z.left+"px",R.style.height=ae.lineHeight+"px",R.scrollIntoView(F)),F=p=null}});this.setAutoScrollEditorIntoView=function(G){G||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",I),this.renderer.off("afterRender",P),this.renderer.off("beforeRender",S))}}},this.$resetCursorStyle=function(){var m=this.$cursorStyle||"ace",p=this.renderer.$cursorLayer;p&&(p.setSmoothBlinking(/smooth/.test(m)),p.isBlinking=!this.$readOnly&&m!="wide",A.setCssClass(p.element,"ace_slim-cursors",/slim/.test(m)))},this.prompt=function(m,p,f){var F=this;C.loadModule("./ext/prompt",function(R){R.prompt(F,m,p,f)})}}).call(g.prototype),C.defineOptions(g.prototype,"editor",{selectionStyle:{set:function(m){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:m})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(m){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(m){this.textInput.setReadOnly(m),this.$resetCursorStyle()},initialValue:!1},copyWithEmptySelection:{set:function(m){this.textInput.setCopyWithEmptySelection(m)},initialValue:!1},cursorStyle:{set:function(m){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},enableAutoIndent:{initialValue:!0},autoScrollEditorIntoView:{set:function(m){this.setAutoScrollEditorIntoView(m)}},keyboardHandler:{set:function(m){this.setKeyboardHandler(m)},get:function(){return this.$keybindingId},handlesSet:!0},value:{set:function(m){this.session.setValue(m)},get:function(){return this.getValue()},handlesSet:!0,hidden:!0},session:{set:function(m){this.setSession(m)},get:function(){return this.session},handlesSet:!0,hidden:!0},showLineNumbers:{set:function(m){this.renderer.$gutterLayer.setShowLineNumbers(m),this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER),m&&this.$relativeLineNumbers?E.attach(this):E.detach(this)},initialValue:!0},relativeLineNumbers:{set:function(m){this.$showLineNumbers&&m?E.attach(this):E.detach(this)}},placeholder:{set:function(m){this.$updatePlaceholder||(this.$updatePlaceholder=(function(){var p=this.session&&(this.renderer.$composition||this.getValue());if(p&&this.renderer.placeholderNode)this.renderer.off("afterRender",this.$updatePlaceholder),A.removeCssClass(this.container,"ace_hasPlaceholder"),this.renderer.placeholderNode.remove(),this.renderer.placeholderNode=null;else if(!p&&!this.renderer.placeholderNode){this.renderer.on("afterRender",this.$updatePlaceholder),A.addCssClass(this.container,"ace_hasPlaceholder");var f=A.createElement("div");f.className="ace_placeholder",f.textContent=this.$placeholder||"",this.renderer.placeholderNode=f,this.renderer.content.appendChild(this.renderer.placeholderNode)}else!p&&this.renderer.placeholderNode&&(this.renderer.placeholderNode.textContent=this.$placeholder||"")}).bind(this),this.on("input",this.$updatePlaceholder)),this.$updatePlaceholder()}},hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",displayIndentGuides:"renderer",showGutter:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",hasCssTransforms:"renderer",maxPixelHeight:"renderer",useTextareaForIME:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimeout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",navigateWithinSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"});var E={getText:function(m,p){return(Math.abs(m.selection.lead.row-p)||p+1+(p<9?"·":""))+""},getWidth:function(m,p,f){return Math.max(p.toString().length,(f.lastRow+1).toString().length,2)*f.characterWidth},update:function(m,p){p.renderer.$loop.schedule(p.renderer.CHANGE_GUTTER)},attach:function(m){m.renderer.$gutterLayer.$renderer=this,m.on("changeSelection",this.update),this.update(null,m)},detach:function(m){m.renderer.$gutterLayer.$renderer==this&&(m.renderer.$gutterLayer.$renderer=null),m.off("changeSelection",this.update),this.update(null,m)}};D.Editor=g}),ace.define("ace/undomanager",["require","exports","module","ace/range"],function(a,D,z){var k=function(){this.$maxRev=0,this.$fromUndo=!1,this.reset()};(function(){this.addSession=function(c){this.$session=c},this.add=function(c,g,E){this.$fromUndo||c!=this.$lastDelta&&(this.$keepRedoStack||(this.$redoStack.length=0),(g===!1||!this.lastDeltas)&&(this.lastDeltas=[],this.$undoStack.push(this.lastDeltas),c.id=this.$rev=++this.$maxRev),(c.action=="remove"||c.action=="insert")&&(this.$lastDelta=c),this.lastDeltas.push(c))},this.addSelection=function(c,g){this.selections.push({value:c,rev:g||this.$rev})},this.startNewGroup=function(){return this.lastDeltas=null,this.$rev},this.markIgnored=function(c,g){g==null&&(g=this.$rev+1);for(var E=this.$undoStack,m=E.length;m--;){var p=E[m][0];if(p.id<=c)break;p.id<g&&(p.ignore=!0)}this.lastDeltas=null},this.getSelection=function(c,g){for(var E=this.selections,m=E.length;m--;){var p=E[m];if(p.rev<c)return g&&(p=E[m+1]),p}},this.getRevision=function(){return this.$rev},this.getDeltas=function(c,g){g==null&&(g=this.$rev+1);for(var E=this.$undoStack,m=null,p=0,f=E.length;f--;){var F=E[f][0];if(F.id<g&&!m&&(m=f+1),F.id<=c){p=f+1;break}}return E.slice(p,m)},this.getChangedRanges=function(c,g){g==null&&(g=this.$rev+1)},this.getChangedLines=function(c,g){g==null&&(g=this.$rev+1)},this.undo=function(c,g){this.lastDeltas=null;var E=this.$undoStack;if(A(E,E.length)){c||(c=this.$session),this.$redoStackBaseRev!==this.$rev&&this.$redoStack.length&&(this.$redoStack=[]),this.$fromUndo=!0;var m=E.pop(),p=null;return m&&(p=c.undoChanges(m,g),this.$redoStack.push(m),this.$syncRev()),this.$fromUndo=!1,p}},this.redo=function(c,g){if(this.lastDeltas=null,c||(c=this.$session),this.$fromUndo=!0,this.$redoStackBaseRev!=this.$rev){var E=this.getDeltas(this.$redoStackBaseRev,this.$rev+1);$(this.$redoStack,E),this.$redoStackBaseRev=this.$rev,this.$redoStack.forEach(function(f){f[0].id=++this.$maxRev},this)}var m=this.$redoStack.pop(),p=null;return m&&(p=c.redoChanges(m,g),this.$undoStack.push(m),this.$syncRev()),this.$fromUndo=!1,p},this.$syncRev=function(){var c=this.$undoStack,g=c[c.length-1],E=g&&g[0].id||0;this.$redoStackBaseRev=E,this.$rev=E},this.reset=function(){this.lastDeltas=null,this.$lastDelta=null,this.$undoStack=[],this.$redoStack=[],this.$rev=0,this.mark=0,this.$redoStackBaseRev=this.$rev,this.selections=[]},this.canUndo=function(){return this.$undoStack.length>0},this.canRedo=function(){return this.$redoStack.length>0},this.bookmark=function(c){c==null&&(c=this.$rev),this.mark=c},this.isAtBookmark=function(){return this.$rev===this.mark},this.toJSON=function(){},this.fromJSON=function(){},this.hasUndo=this.canUndo,this.hasRedo=this.canRedo,this.isClean=this.isAtBookmark,this.markClean=this.bookmark,this.$prettyPrint=function(c){return c?e(c):e(this.$undoStack)+`
---
`+e(this.$redoStack)}}).call(k.prototype);function A(c,g){for(var E=g;E--;){var m=c[E];if(m&&!m[0].ignore){for(;E<g-1;){var p=i(c[E],c[E+1]);c[E]=p[0],c[E+1]=p[1],E++}return!0}}}var h=a("./range").Range,s=h.comparePoints;h.comparePoints;function l(c){return{row:c.row,column:c.column}}function t(c){return{start:l(c.start),end:l(c.end),action:c.action,lines:c.lines.slice()}}function e(c){if(c=c||this,Array.isArray(c))return c.map(e).join(`
`);var g="";return c.action?(g=c.action=="insert"?"+":"-",g+="["+c.lines+"]"):c.value&&(Array.isArray(c.value)?g=c.value.map(r).join(`
`):g=r(c.value)),c.start&&(g+=r(c)),(c.id||c.rev)&&(g+="	("+(c.id||c.rev)+")"),g}function r(c){return c.start.row+":"+c.start.column+"=>"+c.end.row+":"+c.end.column}function n(c,g){var E=c.action=="insert",m=g.action=="insert";if(E&&m)if(s(g.start,c.end)>=0)d(g,c,-1);else if(s(g.start,c.start)<=0)d(c,g,1);else return null;else if(E&&!m)if(s(g.start,c.end)>=0)d(g,c,-1);else if(s(g.end,c.start)<=0)d(c,g,-1);else return null;else if(!E&&m)if(s(g.start,c.start)>=0)d(g,c,1);else if(s(g.start,c.start)<=0)d(c,g,1);else return null;else if(!E&&!m)if(s(g.start,c.start)>=0)d(g,c,1);else if(s(g.end,c.start)<=0)d(c,g,-1);else return null;return[g,c]}function i(c,g){for(var E=c.length;E--;)for(var m=0;m<g.length;m++)if(!n(c[E],g[m])){for(;E<c.length;){for(;m--;)n(g[m],c[E]);m=g.length,E++}return[c,g]}return c.selectionBefore=g.selectionBefore=c.selectionAfter=g.selectionAfter=null,[g,c]}function o(c,g){var E=c.action=="insert",m=g.action=="insert";if(E&&m)s(c.start,g.start)<0?d(g,c,1):d(c,g,1);else if(E&&!m)s(c.start,g.end)>=0?d(c,g,-1):(s(c.start,g.start)<=0||d(c,h.fromPoints(g.start,c.start),-1),d(g,c,1));else if(!E&&m)s(g.start,c.end)>=0?d(g,c,-1):(s(g.start,c.start)<=0||d(g,h.fromPoints(c.start,g.start),-1),d(c,g,1));else if(!E&&!m)if(s(g.start,c.end)>=0)d(g,c,-1);else if(s(g.end,c.start)<=0)d(c,g,-1);else{var p,f;return s(c.start,g.start)<0&&(p=c,c=_(c,g.start)),s(c.end,g.end)>0&&(f=_(c,g.end)),v(g.end,c.start,c.end,-1),f&&!p&&(c.lines=f.lines,c.start=f.start,c.end=f.end,f=c),[g,p,f].filter(Boolean)}return[g,c]}function d(c,g,E){v(c.start,g.start,g.end,E),v(c.end,g.start,g.end,E)}function v(c,g,E,m){c.row==(m==1?g:E).row&&(c.column+=m*(E.column-g.column)),c.row+=m*(E.row-g.row)}function _(c,g){var E=c.lines,m=c.end;c.end=l(g);var p=c.end.row-c.start.row,f=E.splice(p,E.length),F=p?g.column:g.column-c.start.column;E.push(f[0].substring(0,F)),f[0]=f[0].substr(F);var R={start:l(g),end:m,lines:f,action:c.action};return R}function C(c,g){g=t(g);for(var E=c.length;E--;){for(var m=c[E],p=0;p<m.length;p++){var f=m[p],F=o(f,g);g=F[0],F.length!=2&&(F[2]?(m.splice(p+1,1,F[1],F[2]),p++):F[1]||(m.splice(p,1),p--))}m.length||c.splice(E,1)}return c}function $(c,g){for(var E=0;E<g.length;E++)for(var m=g[E],p=0;p<m.length;p++)C(c,m[p])}D.UndoManager=k}),ace.define("ace/layer/lines",["require","exports","module","ace/lib/dom"],function(a,D,z){var k=a("../lib/dom"),A=function(h,s){this.element=h,this.canvasHeight=s||5e5,this.element.style.height=this.canvasHeight*2+"px",this.cells=[],this.cellCache=[],this.$offsetCoefficient=0};(function(){this.moveContainer=function(h){k.translate(this.element,0,-(h.firstRowScreen*h.lineHeight%this.canvasHeight)-h.offset*this.$offsetCoefficient)},this.pageChanged=function(h,s){return Math.floor(h.firstRowScreen*h.lineHeight/this.canvasHeight)!==Math.floor(s.firstRowScreen*s.lineHeight/this.canvasHeight)},this.computeLineTop=function(h,s,l){var t=s.firstRowScreen*s.lineHeight,e=Math.floor(t/this.canvasHeight),r=l.documentToScreenRow(h,0)*s.lineHeight;return r-e*this.canvasHeight},this.computeLineHeight=function(h,s,l){return s.lineHeight*l.getRowLineCount(h)},this.getLength=function(){return this.cells.length},this.get=function(h){return this.cells[h]},this.shift=function(){this.$cacheCell(this.cells.shift())},this.pop=function(){this.$cacheCell(this.cells.pop())},this.push=function(h){if(Array.isArray(h)){this.cells.push.apply(this.cells,h);for(var s=k.createFragment(this.element),l=0;l<h.length;l++)s.appendChild(h[l].element);this.element.appendChild(s)}else this.cells.push(h),this.element.appendChild(h.element)},this.unshift=function(h){if(Array.isArray(h)){this.cells.unshift.apply(this.cells,h);for(var s=k.createFragment(this.element),l=0;l<h.length;l++)s.appendChild(h[l].element);this.element.firstChild?this.element.insertBefore(s,this.element.firstChild):this.element.appendChild(s)}else this.cells.unshift(h),this.element.insertAdjacentElement("afterbegin",h.element)},this.last=function(){return this.cells.length?this.cells[this.cells.length-1]:null},this.$cacheCell=function(h){h&&(h.element.remove(),this.cellCache.push(h))},this.createCell=function(h,s,l,t){var e=this.cellCache.pop();if(!e){var r=k.createElement("div");t&&t(r),this.element.appendChild(r),e={element:r,text:"",row:h}}return e.row=h,e}}).call(A.prototype),D.Lines=A}),ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/layer/lines"],function(a,D,z){var k=a("../lib/dom"),A=a("../lib/oop"),h=a("../lib/lang"),s=a("../lib/event_emitter").EventEmitter,l=a("./lines").Lines,t=function(r){this.element=k.createElement("div"),this.element.className="ace_layer ace_gutter-layer",r.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$lines=new l(this.element),this.$lines.$offsetCoefficient=1};(function(){A.implement(this,s),this.setSession=function(r){this.session&&this.session.off("change",this.$updateAnnotations),this.session=r,r&&r.on("change",this.$updateAnnotations)},this.addGutterDecoration=function(r,n){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(r,n)},this.removeGutterDecoration=function(r,n){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(r,n)},this.setAnnotations=function(r){this.$annotations=[];for(var n=0;n<r.length;n++){var i=r[n],o=i.row,d=this.$annotations[o];d||(d=this.$annotations[o]={text:[]});var v=i.text;v=v?h.escapeHTML(v):i.html||"",d.text.indexOf(v)===-1&&d.text.push(v);var _=i.type;_=="error"?d.className=" ace_error":_=="warning"&&d.className!=" ace_error"?d.className=" ace_warning":_=="info"&&!d.className&&(d.className=" ace_info")}},this.$updateAnnotations=function(r){if(this.$annotations.length){var n=r.start.row,i=r.end.row-n;if(i!==0)if(r.action=="remove")this.$annotations.splice(n,i+1,null);else{var o=new Array(i+1);o.unshift(n,1),this.$annotations.splice.apply(this.$annotations,o)}}},this.update=function(r){this.config=r;var n=this.session,i=r.firstRow,o=Math.min(r.lastRow+r.gutterOffset,n.getLength()-1);this.oldLastRow=o,this.config=r,this.$lines.moveContainer(r),this.$updateCursorRow();for(var d=n.getNextFoldLine(i),v=d?d.start.row:1/0,_=null,C=-1,$=i;;){if($>v&&($=d.end.row+1,d=n.getNextFoldLine($,d),v=d?d.start.row:1/0),$>o){for(;this.$lines.getLength()>C+1;)this.$lines.pop();break}_=this.$lines.get(++C),_?_.row=$:(_=this.$lines.createCell($,r,this.session,e),this.$lines.push(_)),this.$renderCell(_,r,d,$),$++}this._signal("afterRender"),this.$updateGutterWidth(r)},this.$updateGutterWidth=function(r){var n=this.session,i=n.gutterRenderer||this.$renderer,o=n.$firstLineNumber,d=this.$lines.last()?this.$lines.last().text:"";(this.$fixedWidth||n.$useWrapMode)&&(d=n.getLength()+o-1);var v=i?i.getWidth(n,d,r):d.toString().length*r.characterWidth,_=this.$padding||this.$computePadding();v+=_.left+_.right,v!==this.gutterWidth&&!isNaN(v)&&(this.gutterWidth=v,this.element.parentNode.style.width=this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._signal("changeGutterWidth",v))},this.$updateCursorRow=function(){if(this.$highlightGutterLine){var r=this.session.selection.getCursor();this.$cursorRow!==r.row&&(this.$cursorRow=r.row)}},this.updateLineHighlight=function(){if(this.$highlightGutterLine){var r=this.session.selection.cursor.row;if(this.$cursorRow=r,!(this.$cursorCell&&this.$cursorCell.row==r)){this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ",""));var n=this.$lines.cells;this.$cursorCell=null;for(var i=0;i<n.length;i++){var o=n[i];if(o.row>=this.$cursorRow){if(o.row>this.$cursorRow){var d=this.session.getFoldLine(this.$cursorRow);if(i>0&&d&&d.start.row==n[i-1].row)o=n[i-1];else break}o.element.className="ace_gutter-active-line "+o.element.className,this.$cursorCell=o;break}}}}},this.scrollLines=function(r){var n=this.config;if(this.config=r,this.$updateCursorRow(),this.$lines.pageChanged(n,r))return this.update(r);this.$lines.moveContainer(r);var i=Math.min(r.lastRow+r.gutterOffset,this.session.getLength()-1),o=this.oldLastRow;if(this.oldLastRow=i,!n||o<r.firstRow)return this.update(r);if(i<n.firstRow)return this.update(r);if(n.firstRow<r.firstRow)for(var d=this.session.getFoldedRowCount(n.firstRow,r.firstRow-1);d>0;d--)this.$lines.shift();if(o>i)for(var d=this.session.getFoldedRowCount(i+1,o);d>0;d--)this.$lines.pop();r.firstRow<n.firstRow&&this.$lines.unshift(this.$renderLines(r,r.firstRow,n.firstRow-1)),i>o&&this.$lines.push(this.$renderLines(r,o+1,i)),this.updateLineHighlight(),this._signal("afterRender"),this.$updateGutterWidth(r)},this.$renderLines=function(r,n,i){for(var o=[],d=n,v=this.session.getNextFoldLine(d),_=v?v.start.row:1/0;d>_&&(d=v.end.row+1,v=this.session.getNextFoldLine(d,v),_=v?v.start.row:1/0),!(d>i);){var C=this.$lines.createCell(d,r,this.session,e);this.$renderCell(C,r,v,d),o.push(C),d++}return o},this.$renderCell=function(r,n,i,o){var d=r.element,v=this.session,_=d.childNodes[0],C=d.childNodes[1],$=v.$firstLineNumber,c=v.$breakpoints,g=v.$decorations,E=v.gutterRenderer||this.$renderer,m=this.$showFoldWidgets&&v.foldWidgets,p=i?i.start.row:Number.MAX_VALUE,f="ace_gutter-cell ";if(this.$highlightGutterLine&&(o==this.$cursorRow||i&&o<this.$cursorRow&&o>=p&&this.$cursorRow<=i.end.row)&&(f+="ace_gutter-active-line ",this.$cursorCell!=r&&(this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ","")),this.$cursorCell=r)),c[o]&&(f+=c[o]),g[o]&&(f+=g[o]),this.$annotations[o]&&(f+=this.$annotations[o].className),d.className!=f&&(d.className=f),m){var F=m[o];F==null&&(F=m[o]=v.getFoldWidget(o))}if(F){var f="ace_fold-widget ace_"+F;F=="start"&&o==p&&o<i.end.row?f+=" ace_closed":f+=" ace_open",C.className!=f&&(C.className=f);var R=n.lineHeight+"px";k.setStyle(C.style,"height",R),k.setStyle(C.style,"display","inline-block")}else C&&k.setStyle(C.style,"display","none");var I=(E?E.getText(v,o):o+$).toString();return I!==_.data&&(_.data=I),k.setStyle(r.element.style,"height",this.$lines.computeLineHeight(o,n,v)+"px"),k.setStyle(r.element.style,"top",this.$lines.computeLineTop(o,n,v)+"px"),r.text=I,r},this.$fixedWidth=!1,this.$highlightGutterLine=!0,this.$renderer="",this.setHighlightGutterLine=function(r){this.$highlightGutterLine=r},this.$showLineNumbers=!0,this.$renderer="",this.setShowLineNumbers=function(r){this.$renderer=!r&&{getWidth:function(){return 0},getText:function(){return""}}},this.getShowLineNumbers=function(){return this.$showLineNumbers},this.$showFoldWidgets=!0,this.setShowFoldWidgets=function(r){r?k.addCssClass(this.element,"ace_folding-enabled"):k.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=r,this.$padding=null},this.getShowFoldWidgets=function(){return this.$showFoldWidgets},this.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var r=k.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=(parseInt(r.borderLeftWidth)||0)+(parseInt(r.paddingLeft)||0)+1,this.$padding.right=(parseInt(r.borderRightWidth)||0)+(parseInt(r.paddingRight)||0),this.$padding},this.getRegion=function(r){var n=this.$padding||this.$computePadding(),i=this.element.getBoundingClientRect();if(r.x<n.left+i.left)return"markers";if(this.$showFoldWidgets&&r.x>i.right-n.right)return"foldWidgets"}}).call(t.prototype);function e(r){var n=document.createTextNode("");r.appendChild(n);var i=k.createElement("span");return r.appendChild(i),r}D.Gutter=t}),ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(a,D,z){var k=a("../range").Range,A=a("../lib/dom"),h=function(s){this.element=A.createElement("div"),this.element.className="ace_layer ace_marker-layer",s.appendChild(this.element)};(function(){this.$padding=0,this.setPadding=function(l){this.$padding=l},this.setSession=function(l){this.session=l},this.setMarkers=function(l){this.markers=l},this.elt=function(l,t){var e=this.i!=-1&&this.element.childNodes[this.i];e?this.i++:(e=document.createElement("div"),this.element.appendChild(e),this.i=-1),e.style.cssText=t,e.className=l},this.update=function(l){if(l){this.config=l,this.i=0;var t;for(var e in this.markers){var r=this.markers[e];if(!r.range){r.update(t,this,this.session,l);continue}var n=r.range.clipRows(l.firstRow,l.lastRow);if(!n.isEmpty())if(n=n.toScreenRange(this.session),r.renderer){var i=this.$getTop(n.start.row,l),o=this.$padding+n.start.column*l.characterWidth;r.renderer(t,n,o,i,l)}else r.type=="fullLine"?this.drawFullLineMarker(t,n,r.clazz,l):r.type=="screenLine"?this.drawScreenLineMarker(t,n,r.clazz,l):n.isMultiLine()?r.type=="text"?this.drawTextMarker(t,n,r.clazz,l):this.drawMultiLineMarker(t,n,r.clazz,l):this.drawSingleLineMarker(t,n,r.clazz+" ace_start ace_br15",l)}if(this.i!=-1)for(;this.i<this.element.childElementCount;)this.element.removeChild(this.element.lastChild)}},this.$getTop=function(l,t){return(l-t.firstRowScreen)*t.lineHeight};function s(l,t,e,r){return(l?1:0)|(t?2:0)|(e?4:0)|(r?8:0)}this.drawTextMarker=function(l,t,e,r,n){for(var i=this.session,o=t.start.row,d=t.end.row,v=o,_=0,C=0,$=i.getScreenLastRowColumn(v),c=new k(v,t.start.column,v,C);v<=d;v++)c.start.row=c.end.row=v,c.start.column=v==o?t.start.column:i.getRowWrapIndent(v),c.end.column=$,_=C,C=$,$=v+1<d?i.getScreenLastRowColumn(v+1):v==d?0:t.end.column,this.drawSingleLineMarker(l,c,e+(v==o?" ace_start":"")+" ace_br"+s(v==o||v==o+1&&t.start.column,_<C,C>$,v==d),r,v==d?0:1,n)},this.drawMultiLineMarker=function(l,t,e,r,n){var i=this.$padding,o=r.lineHeight,d=this.$getTop(t.start.row,r),v=i+t.start.column*r.characterWidth;if(n=n||"",this.session.$bidiHandler.isBidiRow(t.start.row)){var _=t.clone();_.end.row=_.start.row,_.end.column=this.session.getLine(_.start.row).length,this.drawBidiSingleLineMarker(l,_,e+" ace_br1 ace_start",r,null,n)}else this.elt(e+" ace_br1 ace_start","height:"+o+"px;right:0;top:"+d+"px;left:"+v+"px;"+(n||""));if(this.session.$bidiHandler.isBidiRow(t.end.row)){var _=t.clone();_.start.row=_.end.row,_.start.column=0,this.drawBidiSingleLineMarker(l,_,e+" ace_br12",r,null,n)}else{d=this.$getTop(t.end.row,r);var C=t.end.column*r.characterWidth;this.elt(e+" ace_br12","height:"+o+"px;width:"+C+"px;top:"+d+"px;left:"+i+"px;"+(n||""))}if(o=(t.end.row-t.start.row-1)*r.lineHeight,!(o<=0)){d=this.$getTop(t.start.row+1,r);var $=(t.start.column?1:0)|(t.end.column?0:8);this.elt(e+($?" ace_br"+$:""),"height:"+o+"px;right:0;top:"+d+"px;left:"+i+"px;"+(n||""))}},this.drawSingleLineMarker=function(l,t,e,r,n,i){if(this.session.$bidiHandler.isBidiRow(t.start.row))return this.drawBidiSingleLineMarker(l,t,e,r,n,i);var o=r.lineHeight,d=(t.end.column+(n||0)-t.start.column)*r.characterWidth,v=this.$getTop(t.start.row,r),_=this.$padding+t.start.column*r.characterWidth;this.elt(e,"height:"+o+"px;width:"+d+"px;top:"+v+"px;left:"+_+"px;"+(i||""))},this.drawBidiSingleLineMarker=function(l,t,e,r,n,i){var o=r.lineHeight,d=this.$getTop(t.start.row,r),v=this.$padding,_=this.session.$bidiHandler.getSelections(t.start.column,t.end.column);_.forEach(function(C){this.elt(e,"height:"+o+"px;width:"+C.width+(n||0)+"px;top:"+d+"px;left:"+(v+C.left)+"px;"+(i||""))},this)},this.drawFullLineMarker=function(l,t,e,r,n){var i=this.$getTop(t.start.row,r),o=r.lineHeight;t.start.row!=t.end.row&&(o+=this.$getTop(t.end.row,r)-i),this.elt(e,"height:"+o+"px;top:"+i+"px;left:0;right:0;"+(n||""))},this.drawScreenLineMarker=function(l,t,e,r,n){var i=this.$getTop(t.start.row,r),o=r.lineHeight;this.elt(e,"height:"+o+"px;top:"+i+"px;left:0;right:0;"+(n||""))}}).call(h.prototype),D.Marker=h}),ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/layer/lines","ace/lib/event_emitter"],function(a,D,z){var k=a("../lib/oop"),A=a("../lib/dom"),h=a("../lib/lang"),s=a("./lines").Lines,l=a("../lib/event_emitter").EventEmitter,t=function(e){this.dom=A,this.element=this.dom.createElement("div"),this.element.className="ace_layer ace_text-layer",e.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this),this.$lines=new s(this.element)};(function(){k.implement(this,l),this.EOF_CHAR="¶",this.EOL_CHAR_LF="¬",this.EOL_CHAR_CRLF="¤",this.EOL_CHAR=this.EOL_CHAR_LF,this.TAB_CHAR="—",this.SPACE_CHAR="·",this.$padding=0,this.MAX_LINE_LENGTH=1e4,this.$updateEolChar=function(){var e=this.session.doc,r=e.getNewLineCharacter()==`
`&&e.getNewLineMode()!="windows",n=r?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=n)return this.EOL_CHAR=n,!0},this.setPadding=function(e){this.$padding=e,this.element.style.margin="0 "+e+"px"},this.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},this.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},this.$setFontMetrics=function(e){this.$fontMetrics=e,this.$fontMetrics.on("changeCharacterSize",(function(r){this._signal("changeCharacterSize",r)}).bind(this)),this.$pollSizeChanges()},this.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},this.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},this.setSession=function(e){this.session=e,e&&this.$computeTabString()},this.showInvisibles=!1,this.showSpaces=!1,this.showTabs=!1,this.showEOL=!1,this.setShowInvisibles=function(e){return this.showInvisibles==e?!1:(this.showInvisibles=e,typeof e=="string"?(this.showSpaces=/tab/i.test(e),this.showTabs=/space/i.test(e),this.showEOL=/eol/i.test(e)):this.showSpaces=this.showTabs=this.showEOL=e,this.$computeTabString(),!0)},this.displayIndentGuides=!0,this.setDisplayIndentGuides=function(e){return this.displayIndentGuides==e?!1:(this.displayIndentGuides=e,this.$computeTabString(),!0)},this.$tabStrings=[],this.onChangeTabSize=this.$computeTabString=function(){var e=this.session.getTabSize();this.tabSize=e;for(var r=this.$tabStrings=[0],n=1;n<e+1;n++)if(this.showTabs){var i=this.dom.createElement("span");i.className="ace_invisible ace_invisible_tab",i.textContent=h.stringRepeat(this.TAB_CHAR,n),r.push(i)}else r.push(this.dom.createTextNode(h.stringRepeat(" ",n),this.element));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var o="ace_indent-guide",d=this.showSpaces?" ace_invisible ace_invisible_space":"",v=this.showSpaces?h.stringRepeat(this.SPACE_CHAR,this.tabSize):h.stringRepeat(" ",this.tabSize),_=this.showTabs?" ace_invisible ace_invisible_tab":"",C=this.showTabs?h.stringRepeat(this.TAB_CHAR,this.tabSize):v,i=this.dom.createElement("span");i.className=o+d,i.textContent=v,this.$tabStrings[" "]=i;var i=this.dom.createElement("span");i.className=o+_,i.textContent=C,this.$tabStrings["	"]=i}},this.updateLines=function(e,r,n){if(this.config.lastRow!=e.lastRow||this.config.firstRow!=e.firstRow)return this.update(e);this.config=e;for(var i=Math.max(r,e.firstRow),o=Math.min(n,e.lastRow),d=this.element.childNodes,v=0,C=e.firstRow;C<i;C++){var $=this.session.getFoldLine(C);if($)if($.containsRow(i)){i=$.start.row;break}else C=$.end.row;v++}for(var _=!1,C=i,$=this.session.getNextFoldLine(C),c=$?$.start.row:1/0;C>c&&(C=$.end.row+1,$=this.session.getNextFoldLine(C,$),c=$?$.start.row:1/0),!(C>o);){var g=d[v++];if(g){this.dom.removeChildren(g),this.$renderLine(g,C,C==c?$:!1),_&&(g.style.top=this.$lines.computeLineTop(C,e,this.session)+"px");var E=e.lineHeight*this.session.getRowLength(C)+"px";g.style.height!=E&&(_=!0,g.style.height=E)}C++}if(_)for(;v<this.$lines.cells.length;){var m=this.$lines.cells[v++];m.element.style.top=this.$lines.computeLineTop(m.row,e,this.session)+"px"}},this.scrollLines=function(e){var r=this.config;if(this.config=e,this.$lines.pageChanged(r,e))return this.update(e);this.$lines.moveContainer(e);var n=e.lastRow,i=r?r.lastRow:-1;if(!r||i<e.firstRow)return this.update(e);if(n<r.firstRow)return this.update(e);if(!r||r.lastRow<e.firstRow)return this.update(e);if(e.lastRow<r.firstRow)return this.update(e);if(r.firstRow<e.firstRow)for(var o=this.session.getFoldedRowCount(r.firstRow,e.firstRow-1);o>0;o--)this.$lines.shift();if(r.lastRow>e.lastRow)for(var o=this.session.getFoldedRowCount(e.lastRow+1,r.lastRow);o>0;o--)this.$lines.pop();e.firstRow<r.firstRow&&this.$lines.unshift(this.$renderLinesFragment(e,e.firstRow,r.firstRow-1)),e.lastRow>r.lastRow&&this.$lines.push(this.$renderLinesFragment(e,r.lastRow+1,e.lastRow))},this.$renderLinesFragment=function(e,r,n){for(var i=[],o=r,d=this.session.getNextFoldLine(o),v=d?d.start.row:1/0;o>v&&(o=d.end.row+1,d=this.session.getNextFoldLine(o,d),v=d?d.start.row:1/0),!(o>n);){var _=this.$lines.createCell(o,e,this.session),C=_.element;this.dom.removeChildren(C),A.setStyle(C.style,"height",this.$lines.computeLineHeight(o,e,this.session)+"px"),A.setStyle(C.style,"top",this.$lines.computeLineTop(o,e,this.session)+"px"),this.$renderLine(C,o,o==v?d:!1),this.$useLineGroups()?C.className="ace_line_group":C.className="ace_line",i.push(_),o++}return i},this.update=function(e){this.$lines.moveContainer(e),this.config=e;for(var r=e.firstRow,n=e.lastRow,i=this.$lines;i.getLength();)i.pop();i.push(this.$renderLinesFragment(e,r,n))},this.$textToken={text:!0,rparen:!0,lparen:!0},this.$renderToken=function(e,r,n,i){for(var o=this,d=/(\t)|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\uFEFF\uFFF9-\uFFFC]+)|(\u3000)|([\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,v=this.dom.createFragment(this.element),_,C=0;_=d.exec(i);){var $=_[1],c=_[2],g=_[3],E=_[4],m=_[5];if(!(!o.showSpaces&&c)){var p=C!=_.index?i.slice(C,_.index):"";if(C=_.index+_[0].length,p&&v.appendChild(this.dom.createTextNode(p,this.element)),$){var f=o.session.getScreenTabSize(r+_.index);v.appendChild(o.$tabStrings[f].cloneNode(!0)),r+=f-1}else if(c)if(o.showSpaces){var F=this.dom.createElement("span");F.className="ace_invisible ace_invisible_space",F.textContent=h.stringRepeat(o.SPACE_CHAR,c.length),v.appendChild(F)}else v.appendChild(this.com.createTextNode(c,this.element));else if(g){var F=this.dom.createElement("span");F.className="ace_invisible ace_invisible_space ace_invalid",F.textContent=h.stringRepeat(o.SPACE_CHAR,g.length),v.appendChild(F)}else if(E){r+=1;var F=this.dom.createElement("span");F.style.width=o.config.characterWidth*2+"px",F.className=o.showSpaces?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",F.textContent=o.showSpaces?o.SPACE_CHAR:E,v.appendChild(F)}else if(m){r+=1;var F=this.dom.createElement("span");F.style.width=o.config.characterWidth*2+"px",F.className="ace_cjk",F.textContent=m,v.appendChild(F)}}}if(v.appendChild(this.dom.createTextNode(C?i.slice(C):i,this.element)),this.$textToken[n.type])e.appendChild(v);else{var R="ace_"+n.type.replace(/\./g," ace_"),F=this.dom.createElement("span");n.type=="fold"&&(F.style.width=n.value.length*this.config.characterWidth+"px"),F.className=R,F.appendChild(v),e.appendChild(F)}return r+i.length},this.renderIndentGuide=function(e,r,n){var i=r.search(this.$indentGuideRe);if(i<=0||i>=n)return r;if(r[0]==" "){i-=i%this.tabSize;for(var o=i/this.tabSize,d=0;d<o;d++)e.appendChild(this.$tabStrings[" "].cloneNode(!0));return r.substr(i)}else if(r[0]=="	"){for(var d=0;d<i;d++)e.appendChild(this.$tabStrings["	"].cloneNode(!0));return r.substr(i)}return r},this.$createLineElement=function(e){var r=this.dom.createElement("div");return r.className="ace_line",r.style.height=this.config.lineHeight+"px",r},this.$renderWrappedLine=function(e,r,n){var i=0,o=0,d=n[0],v=0,_=this.$createLineElement();e.appendChild(_);for(var C=0;C<r.length;C++){var $=r[C],c=$.value;if(C==0&&this.displayIndentGuides){if(i=c.length,c=this.renderIndentGuide(_,c,d),!c)continue;i-=c.length}if(i+c.length<d)v=this.$renderToken(_,v,$,c),i+=c.length;else{for(;i+c.length>=d;)v=this.$renderToken(_,v,$,c.substring(0,d-i)),c=c.substring(d-i),i=d,_=this.$createLineElement(),e.appendChild(_),_.appendChild(this.dom.createTextNode(h.stringRepeat(" ",n.indent),this.element)),o++,v=0,d=n[o]||Number.MAX_VALUE;c.length!=0&&(i+=c.length,v=this.$renderToken(_,v,$,c))}}n[n.length-1]>this.MAX_LINE_LENGTH&&this.$renderOverflowMessage(_,v,null,"",!0)},this.$renderSimpleLine=function(e,r){var n=0,i=r[0],o=i.value;this.displayIndentGuides&&(o=this.renderIndentGuide(e,o)),o&&(n=this.$renderToken(e,n,i,o));for(var d=1;d<r.length;d++){if(i=r[d],o=i.value,n+o.length>this.MAX_LINE_LENGTH)return this.$renderOverflowMessage(e,n,i,o);n=this.$renderToken(e,n,i,o)}},this.$renderOverflowMessage=function(e,r,n,i,o){n&&this.$renderToken(e,r,n,i.slice(0,this.MAX_LINE_LENGTH-r));var d=this.dom.createElement("span");d.className="ace_inline_button ace_keyword ace_toggle_wrap",d.textContent=o?"<hide>":"<click to see more...>",e.appendChild(d)},this.$renderLine=function(e,r,n){if(!n&&n!=!1&&(n=this.session.getFoldLine(r)),n)var i=this.$getFoldLineTokens(r,n);else var i=this.session.getTokens(r);var o=e;if(i.length){var d=this.session.getRowSplitData(r);if(d&&d.length){this.$renderWrappedLine(e,i,d);var o=e.lastChild}else{var o=e;this.$useLineGroups()&&(o=this.$createLineElement(),e.appendChild(o)),this.$renderSimpleLine(o,i)}}else this.$useLineGroups()&&(o=this.$createLineElement(),e.appendChild(o));if(this.showEOL&&o){n&&(r=n.end.row);var v=this.dom.createElement("span");v.className="ace_invisible ace_invisible_eol",v.textContent=r==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,o.appendChild(v)}},this.$getFoldLineTokens=function(e,r){var n=this.session,i=[];function o(v,_,C){for(var $=0,c=0;c+v[$].value.length<_;)if(c+=v[$].value.length,$++,$==v.length)return;if(c!=_){var g=v[$].value.substring(_-c);g.length>C-_&&(g=g.substring(0,C-_)),i.push({type:v[$].type,value:g}),c=_+g.length,$+=1}for(;c<C&&$<v.length;){var g=v[$].value;g.length+c>C?i.push({type:v[$].type,value:g.substring(0,C-c)}):i.push(v[$]),c+=g.length,$+=1}}var d=n.getTokens(e);return r.walk(function(v,_,C,$,c){v!=null?i.push({type:"fold",value:v}):(c&&(d=n.getTokens(_)),d.length&&o(d,$,C))},r.end.row,this.session.getLine(r.end.row).length),i},this.$useLineGroups=function(){return this.session.getUseWrapMode()},this.destroy=function(){}}).call(t.prototype),D.Text=t}),ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(a,D,z){var k=a("../lib/dom"),A=function(h){this.element=k.createElement("div"),this.element.className="ace_layer ace_cursor-layer",h.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),k.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateOpacity.bind(this)};(function(){this.$updateOpacity=function(h){for(var s=this.cursors,l=s.length;l--;)k.setStyle(s[l].style,"opacity",h?"":"0")},this.$startCssAnimation=function(){for(var h=this.cursors,s=h.length;s--;)h[s].style.animationDuration=this.blinkInterval+"ms";setTimeout((function(){k.addCssClass(this.element,"ace_animate-blinking")}).bind(this))},this.$stopCssAnimation=function(){k.removeCssClass(this.element,"ace_animate-blinking")},this.$padding=0,this.setPadding=function(h){this.$padding=h},this.setSession=function(h){this.session=h},this.setBlinking=function(h){h!=this.isBlinking&&(this.isBlinking=h,this.restartTimer())},this.setBlinkInterval=function(h){h!=this.blinkInterval&&(this.blinkInterval=h,this.restartTimer())},this.setSmoothBlinking=function(h){h!=this.smoothBlinking&&(this.smoothBlinking=h,k.setCssClass(this.element,"ace_smooth-blinking",h),this.$updateCursors(!0),this.restartTimer())},this.addCursor=function(){var h=k.createElement("div");return h.className="ace_cursor",this.element.appendChild(h),this.cursors.push(h),h},this.removeCursor=function(){if(this.cursors.length>1){var h=this.cursors.pop();return h.parentNode.removeChild(h),h}},this.hideCursor=function(){this.isVisible=!1,k.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.showCursor=function(){this.isVisible=!0,k.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.restartTimer=function(){var h=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.$stopCssAnimation(),this.smoothBlinking&&k.removeCssClass(this.element,"ace_smooth-blinking"),h(!0),!this.isBlinking||!this.blinkInterval||!this.isVisible){this.$stopCssAnimation();return}if(this.smoothBlinking&&setTimeout((function(){k.addCssClass(this.element,"ace_smooth-blinking")}).bind(this)),k.HAS_CSS_ANIMATION)this.$startCssAnimation();else{var s=(function(){this.timeoutId=setTimeout(function(){h(!1)},.6*this.blinkInterval)}).bind(this);this.intervalId=setInterval(function(){h(!0),s()},this.blinkInterval),s()}},this.getPixelPosition=function(h,s){if(!this.config||!this.session)return{left:0,top:0};h||(h=this.session.selection.getCursor());var l=this.session.documentToScreenPosition(h),t=this.$padding+(this.session.$bidiHandler.isBidiRow(l.row,h.row)?this.session.$bidiHandler.getPosLeft(l.column):l.column*this.config.characterWidth),e=(l.row-(s?this.config.firstRowScreen:0))*this.config.lineHeight;return{left:t,top:e}},this.isCursorInView=function(h,s){return h.top>=0&&h.top<s.maxHeight},this.update=function(h){this.config=h;var s=this.session.$selectionMarkers,l=0,t=0;(s===void 0||s.length===0)&&(s=[{cursor:null}]);for(var l=0,e=s.length;l<e;l++){var r=this.getPixelPosition(s[l].cursor,!0);if(!((r.top>h.height+h.offset||r.top<0)&&l>1)){var n=this.cursors[t++]||this.addCursor(),i=n.style;this.drawCursor?this.drawCursor(n,r,h,s[l],this.session):this.isCursorInView(r,h)?(k.setStyle(i,"display","block"),k.translate(n,r.left,r.top),k.setStyle(i,"width",Math.round(h.characterWidth)+"px"),k.setStyle(i,"height",h.lineHeight+"px")):k.setStyle(i,"display","none")}}for(;this.cursors.length>t;)this.removeCursor();var o=this.session.getOverwrite();this.$setOverwrite(o),this.$pixelPos=r,this.restartTimer()},this.drawCursor=null,this.$setOverwrite=function(h){h!=this.overwrite&&(this.overwrite=h,h?k.addCssClass(this.element,"ace_overwrite-cursors"):k.removeCssClass(this.element,"ace_overwrite-cursors"))},this.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)}}).call(A.prototype),D.Cursor=A}),ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(a,D,z){var k=a("./lib/oop"),A=a("./lib/dom"),h=a("./lib/event"),s=a("./lib/event_emitter").EventEmitter,l=32768,t=function(n){this.element=A.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+this.classSuffix,this.inner=A.createElement("div"),this.inner.className="ace_scrollbar-inner",this.inner.textContent=" ",this.element.appendChild(this.inner),n.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,h.addListener(this.element,"scroll",this.onScroll.bind(this)),h.addListener(this.element,"mousedown",h.preventDefault)};(function(){k.implement(this,s),this.setVisible=function(n){this.element.style.display=n?"":"none",this.isVisible=n,this.coeff=1}}).call(t.prototype);var e=function(n,i){t.call(this,n),this.scrollTop=0,this.scrollHeight=0,i.$scrollbarWidth=this.width=A.scrollbarWidth(n.ownerDocument),this.inner.style.width=this.element.style.width=(this.width||15)+5+"px",this.$minWidth=0};k.inherits(e,t),(function(){this.classSuffix="-v",this.onScroll=function(){if(!this.skipEvent){if(this.scrollTop=this.element.scrollTop,this.coeff!=1){var n=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-n)/(this.coeff-n)}this._emit("scroll",{data:this.scrollTop})}this.skipEvent=!1},this.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},this.setHeight=function(n){this.element.style.height=n+"px"},this.setInnerHeight=this.setScrollHeight=function(n){this.scrollHeight=n,n>l?(this.coeff=l/n,n=l):this.coeff!=1&&(this.coeff=1),this.inner.style.height=n+"px"},this.setScrollTop=function(n){this.scrollTop!=n&&(this.skipEvent=!0,this.scrollTop=n,this.element.scrollTop=n*this.coeff)}}).call(e.prototype);var r=function(n,i){t.call(this,n),this.scrollLeft=0,this.height=i.$scrollbarWidth,this.inner.style.height=this.element.style.height=(this.height||15)+5+"px"};k.inherits(r,t),(function(){this.classSuffix="-h",this.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},this.getHeight=function(){return this.isVisible?this.height:0},this.setWidth=function(n){this.element.style.width=n+"px"},this.setInnerWidth=function(n){this.inner.style.width=n+"px"},this.setScrollWidth=function(n){this.inner.style.width=n+"px"},this.setScrollLeft=function(n){this.scrollLeft!=n&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=n)}}).call(r.prototype),D.ScrollBar=e,D.ScrollBarV=e,D.ScrollBarH=r,D.VScrollBar=e,D.HScrollBar=r}),ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],function(a,D,z){var k=a("./lib/event"),A=function(h,s){this.onRender=h,this.pending=!1,this.changes=0,this.$recursionLimit=2,this.window=s||window;var l=this;this._flush=function(t){l.pending=!1;var e=l.changes;if(e&&(k.blockIdle(100),l.changes=0,l.onRender(e)),l.changes){if(l.$recursionLimit--<0)return;l.schedule()}else l.$recursionLimit=2}};(function(){this.schedule=function(h){this.changes=this.changes|h,this.changes&&!this.pending&&(k.nextFrame(this._flush),this.pending=!0)},this.clear=function(h){var s=this.changes;return this.changes=0,s}}).call(A.prototype),D.RenderLoop=A}),ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/lib/useragent","ace/lib/event_emitter"],function(a,D,z){var k=a("../lib/oop"),A=a("../lib/dom"),h=a("../lib/lang"),s=a("../lib/event"),l=a("../lib/useragent"),t=a("../lib/event_emitter").EventEmitter,e=256,r=typeof ResizeObserver=="function",n=200,i=D.FontMetrics=function(o){this.el=A.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=A.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=A.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),o.appendChild(this.el),this.$measureNode.textContent=h.stringRepeat("X",e),this.$characterSize={width:0,height:0},r?this.$addObserver():this.checkForSizeChanges()};(function(){k.implement(this,t),this.$characterSize={width:0,height:0},this.$setMeasureNodeStyles=function(o,d){o.width=o.height="auto",o.left=o.top="0px",o.visibility="hidden",o.position="absolute",o.whiteSpace="pre",l.isIE<8?o["font-family"]="inherit":o.font="inherit",o.overflow=d?"hidden":"visible"},this.checkForSizeChanges=function(o){if(o===void 0&&(o=this.$measureSizes()),o&&(this.$characterSize.width!==o.width||this.$characterSize.height!==o.height)){this.$measureNode.style.fontWeight="bold";var d=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=o,this.charSizes=Object.create(null),this.allowBoldFonts=d&&d.width===o.width&&d.height===o.height,this._emit("changeCharacterSize",{data:o})}},this.$addObserver=function(){var o=this;this.$observer=new window.ResizeObserver(function(d){o.checkForSizeChanges()}),this.$observer.observe(this.$measureNode)},this.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer||this.$observer)return this.$pollSizeChangesTimer;var o=this;return this.$pollSizeChangesTimer=s.onIdle(function d(){o.checkForSizeChanges(),s.onIdle(d,500)},500)},this.setPolling=function(o){o?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},this.$measureSizes=function(o){var d={height:(o||this.$measureNode).clientHeight,width:(o||this.$measureNode).clientWidth/e};return d.width===0||d.height===0?null:d},this.$measureCharWidth=function(o){this.$main.textContent=h.stringRepeat(o,e);var d=this.$main.getBoundingClientRect();return d.width/e},this.getCharacterWidth=function(o){var d=this.charSizes[o];return d===void 0&&(d=this.charSizes[o]=this.$measureCharWidth(o)/this.$characterSize.width),d},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$observer&&this.$observer.disconnect(),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},this.$getZoom=function o(d){return!d||!d.parentElement?1:(window.getComputedStyle(d).zoom||1)*o(d.parentElement)},this.$initTransformMeasureNodes=function(){var o=function(d,v){return["div",{style:"position: absolute;top:"+d+"px;left:"+v+"px;"}]};this.els=A.buildDom([o(0,0),o(n,0),o(0,n),o(n,n)],this.el)},this.transformCoordinates=function(o,d){if(o){var v=this.$getZoom(this.el);o=c(1/v,o)}function _(re,ce,j){var ee=re[1]*ce[0]-re[0]*ce[1];return[(-ce[1]*j[0]+ce[0]*j[1])/ee,(+re[1]*j[0]-re[0]*j[1])/ee]}function C(re,ce){return[re[0]-ce[0],re[1]-ce[1]]}function $(re,ce){return[re[0]+ce[0],re[1]+ce[1]]}function c(re,ce){return[re*ce[0],re*ce[1]]}this.els||this.$initTransformMeasureNodes();function g(re){var ce=re.getBoundingClientRect();return[ce.left,ce.top]}var E=g(this.els[0]),m=g(this.els[1]),p=g(this.els[2]),f=g(this.els[3]),F=_(C(f,m),C(f,p),C($(m,p),$(f,E))),R=c(1+F[0],C(m,E)),I=c(1+F[1],C(p,E));if(d){var S=d,P=F[0]*S[0]/n+F[1]*S[1]/n+1,G=$(c(S[0],R),c(S[1],I));return $(c(1/P/n,G),E)}var Z=C(o,E),ae=_(C(R,c(F[0],Z)),C(I,c(F[1],Z)),Z);return c(n,ae)}}).call(i.prototype)}),ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/config","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter","ace/lib/useragent"],function(a,D,z){var k=a("./lib/oop"),A=a("./lib/dom"),h=a("./config"),s=a("./layer/gutter").Gutter,l=a("./layer/marker").Marker,t=a("./layer/text").Text,e=a("./layer/cursor").Cursor,r=a("./scrollbar").HScrollBar,n=a("./scrollbar").VScrollBar,i=a("./renderloop").RenderLoop,o=a("./layer/font_metrics").FontMetrics,d=a("./lib/event_emitter").EventEmitter,v=`	.ace_br1 {border-top-left-radius    : 3px;}	.ace_br2 {border-top-right-radius   : 3px;}	.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}	.ace_br4 {border-bottom-right-radius: 3px;}	.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}	.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}	.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}	.ace_br8 {border-bottom-left-radius : 3px;}	.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}	.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}	.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}	.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}	.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}	.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}	.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}	.ace_editor {	position: relative;	overflow: hidden;	padding: 0;	font: 12px/normal 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', monospace;	direction: ltr;	text-align: left;	-webkit-tap-highlight-color: rgba(0, 0, 0, 0);	}	.ace_scroller {	position: absolute;	overflow: hidden;	top: 0;	bottom: 0;	background-color: inherit;	-ms-user-select: none;	-moz-user-select: none;	-webkit-user-select: none;	user-select: none;	cursor: text;	}	.ace_content {	position: absolute;	box-sizing: border-box;	min-width: 100%;	contain: style size layout;	font-variant-ligatures: no-common-ligatures;	}	.ace_dragging .ace_scroller:before{	position: absolute;	top: 0;	left: 0;	right: 0;	bottom: 0;	content: '';	background: rgba(250, 250, 250, 0.01);	z-index: 1000;	}	.ace_dragging.ace_dark .ace_scroller:before{	background: rgba(0, 0, 0, 0.01);	}	.ace_selecting, .ace_selecting * {	cursor: text !important;	}	.ace_gutter {	position: absolute;	overflow : hidden;	width: auto;	top: 0;	bottom: 0;	left: 0;	cursor: default;	z-index: 4;	-ms-user-select: none;	-moz-user-select: none;	-webkit-user-select: none;	user-select: none;	contain: style size layout;	}	.ace_gutter-active-line {	position: absolute;	left: 0;	right: 0;	}	.ace_scroller.ace_scroll-left {	box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;	}	.ace_gutter-cell {	position: absolute;	top: 0;	left: 0;	right: 0;	padding-left: 19px;	padding-right: 6px;	background-repeat: no-repeat;	}	.ace_gutter-cell.ace_error {	background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");	background-repeat: no-repeat;	background-position: 2px center;	}	.ace_gutter-cell.ace_warning {	background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");	background-position: 2px center;	}	.ace_gutter-cell.ace_info {	background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");	background-position: 2px center;	}	.ace_dark .ace_gutter-cell.ace_info {	background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");	}	.ace_scrollbar {	contain: strict;	position: absolute;	right: 0;	bottom: 0;	z-index: 6;	}	.ace_scrollbar-inner {	position: absolute;	cursor: text;	left: 0;	top: 0;	}	.ace_scrollbar-v{	overflow-x: hidden;	overflow-y: scroll;	top: 0;	}	.ace_scrollbar-h {	overflow-x: scroll;	overflow-y: hidden;	left: 0;	}	.ace_print-margin {	position: absolute;	height: 100%;	}	.ace_text-input {	position: absolute;	z-index: 0;	width: 0.5em;	height: 1em;	opacity: 0;	background: transparent;	-moz-appearance: none;	appearance: none;	border: none;	resize: none;	outline: none;	overflow: hidden;	font: inherit;	padding: 0 1px;	margin: 0 -1px;	contain: strict;	-ms-user-select: text;	-moz-user-select: text;	-webkit-user-select: text;	user-select: text;	white-space: pre!important;	}	.ace_text-input.ace_composition {	background: transparent;	color: inherit;	z-index: 1000;	opacity: 1;	}	.ace_composition_placeholder { color: transparent }	.ace_composition_marker { 	border-bottom: 1px solid;	position: absolute;	border-radius: 0;	margin-top: 1px;	}	[ace_nocontext=true] {	transform: none!important;	filter: none!important;	clip-path: none!important;	mask : none!important;	contain: none!important;	perspective: none!important;	mix-blend-mode: initial!important;	z-index: auto;	}	.ace_layer {	z-index: 1;	position: absolute;	overflow: hidden;	word-wrap: normal;	white-space: pre;	height: 100%;	width: 100%;	box-sizing: border-box;	pointer-events: none;	}	.ace_gutter-layer {	position: relative;	width: auto;	text-align: right;	pointer-events: auto;	height: 1000000px;	contain: style size layout;	}	.ace_text-layer {	font: inherit !important;	position: absolute;	height: 1000000px;	width: 1000000px;	contain: style size layout;	}	.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {	contain: style size layout;	position: absolute;	top: 0;	left: 0;	right: 0;	}	.ace_hidpi .ace_text-layer,	.ace_hidpi .ace_gutter-layer,	.ace_hidpi .ace_content,	.ace_hidpi .ace_gutter {	contain: strict;	will-change: transform;	}	.ace_hidpi .ace_text-layer > .ace_line, 	.ace_hidpi .ace_text-layer > .ace_line_group {	contain: strict;	}	.ace_cjk {	display: inline-block;	text-align: center;	}	.ace_cursor-layer {	z-index: 4;	}	.ace_cursor {	z-index: 4;	position: absolute;	box-sizing: border-box;	border-left: 2px solid;	transform: translatez(0);	}	.ace_multiselect .ace_cursor {	border-left-width: 1px;	}	.ace_slim-cursors .ace_cursor {	border-left-width: 1px;	}	.ace_overwrite-cursors .ace_cursor {	border-left-width: 0;	border-bottom: 1px solid;	}	.ace_hidden-cursors .ace_cursor {	opacity: 0.2;	}	.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {	opacity: 0;	}	.ace_smooth-blinking .ace_cursor {	transition: opacity 0.18s;	}	.ace_animate-blinking .ace_cursor {	animation-duration: 1000ms;	animation-timing-function: step-end;	animation-name: blink-ace-animate;	animation-iteration-count: infinite;	}	.ace_animate-blinking.ace_smooth-blinking .ace_cursor {	animation-duration: 1000ms;	animation-timing-function: ease-in-out;	animation-name: blink-ace-animate-smooth;	}	@keyframes blink-ace-animate {	from, to { opacity: 1; }	60% { opacity: 0; }	}	@keyframes blink-ace-animate-smooth {	from, to { opacity: 1; }	45% { opacity: 1; }	60% { opacity: 0; }	85% { opacity: 0; }	}	.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {	position: absolute;	z-index: 3;	}	.ace_marker-layer .ace_selection {	position: absolute;	z-index: 5;	}	.ace_marker-layer .ace_bracket {	position: absolute;	z-index: 6;	}	.ace_marker-layer .ace_error_bracket {	position: absolute;	border-bottom: 1px solid #DE5555;	border-radius: 0;	}	.ace_marker-layer .ace_active-line {	position: absolute;	z-index: 2;	}	.ace_marker-layer .ace_selected-word {	position: absolute;	z-index: 4;	box-sizing: border-box;	}	.ace_line .ace_fold {	box-sizing: border-box;	display: inline-block;	height: 11px;	margin-top: -2px;	vertical-align: middle;	background-image:	url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),	url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");	background-repeat: no-repeat, repeat-x;	background-position: center center, top left;	color: transparent;	border: 1px solid black;	border-radius: 2px;	cursor: pointer;	pointer-events: auto;	}	.ace_dark .ace_fold {	}	.ace_fold:hover{	background-image:	url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),	url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");	}	.ace_tooltip {	background-color: #FFF;	background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));	border: 1px solid gray;	border-radius: 1px;	box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);	color: black;	max-width: 100%;	padding: 3px 4px;	position: fixed;	z-index: 999999;	box-sizing: border-box;	cursor: default;	white-space: pre;	word-wrap: break-word;	line-height: normal;	font-style: normal;	font-weight: normal;	letter-spacing: normal;	pointer-events: none;	}	.ace_folding-enabled > .ace_gutter-cell {	padding-right: 13px;	}	.ace_fold-widget {	box-sizing: border-box;	margin: 0 -12px 0 1px;	display: none;	width: 11px;	vertical-align: top;	background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");	background-repeat: no-repeat;	background-position: center;	border-radius: 3px;	border: 1px solid transparent;	cursor: pointer;	}	.ace_folding-enabled .ace_fold-widget {	display: inline-block;   	}	.ace_fold-widget.ace_end {	background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");	}	.ace_fold-widget.ace_closed {	background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");	}	.ace_fold-widget:hover {	border: 1px solid rgba(0, 0, 0, 0.3);	background-color: rgba(255, 255, 255, 0.2);	box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);	}	.ace_fold-widget:active {	border: 1px solid rgba(0, 0, 0, 0.4);	background-color: rgba(0, 0, 0, 0.05);	box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);	}	.ace_dark .ace_fold-widget {	background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");	}	.ace_dark .ace_fold-widget.ace_end {	background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");	}	.ace_dark .ace_fold-widget.ace_closed {	background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");	}	.ace_dark .ace_fold-widget:hover {	box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);	background-color: rgba(255, 255, 255, 0.1);	}	.ace_dark .ace_fold-widget:active {	box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);	}	.ace_inline_button {	border: 1px solid lightgray;	display: inline-block;	margin: -1px 8px;	padding: 0 5px;	pointer-events: auto;	cursor: pointer;	}	.ace_inline_button:hover {	border-color: gray;	background: rgba(200,200,200,0.2);	display: inline-block;	pointer-events: auto;	}	.ace_fold-widget.ace_invalid {	background-color: #FFB4B4;	border-color: #DE5555;	}	.ace_fade-fold-widgets .ace_fold-widget {	transition: opacity 0.4s ease 0.05s;	opacity: 0;	}	.ace_fade-fold-widgets:hover .ace_fold-widget {	transition: opacity 0.05s ease 0.05s;	opacity:1;	}	.ace_underline {	text-decoration: underline;	}	.ace_bold {	font-weight: bold;	}	.ace_nobold .ace_bold {	font-weight: normal;	}	.ace_italic {	font-style: italic;	}	.ace_error-marker {	background-color: rgba(255, 0, 0,0.2);	position: absolute;	z-index: 9;	}	.ace_highlight-marker {	background-color: rgba(255, 255, 0,0.2);	position: absolute;	z-index: 8;	}	.ace_mobile-menu {	position: absolute;	line-height: 1.5;	border-radius: 4px;	-ms-user-select: none;	-moz-user-select: none;	-webkit-user-select: none;	user-select: none;	background: white;	box-shadow: 1px 3px 2px grey;	border: 1px solid #dcdcdc;	color: black;	}	.ace_dark > .ace_mobile-menu {	background: #333;	color: #ccc;	box-shadow: 1px 3px 2px grey;	border: 1px solid #444;	}	.ace_mobile-button {	padding: 2px;	cursor: pointer;	overflow: hidden;	}	.ace_mobile-button:hover {	background-color: #eee;	opacity:1;	}	.ace_mobile-button:active {	background-color: #ddd;	}	.ace_placeholder {	font-family: arial;	transform: scale(0.9);	transform-origin: left;	white-space: pre;	opacity: 0.7;	margin: 0 10px;	}`,_=a("./lib/useragent"),C=_.isIE;A.importCssString(v,"ace_editor.css");var $=function(c,g){var E=this;this.container=c||A.createElement("div"),A.addCssClass(this.container,"ace_editor"),A.HI_DPI&&A.addCssClass(this.container,"ace_hidpi"),this.setTheme(g),this.$gutter=A.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden",!0),this.scroller=A.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=A.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new s(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new l(this.content);var m=this.$textLayer=new t(this.content);this.canvas=m.element,this.$markerFront=new l(this.content),this.$cursorLayer=new e(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new n(this.container,this),this.scrollBarH=new r(this.container,this),this.scrollBarV.on("scroll",function(p){E.$scrollAnimation||E.session.setScrollTop(p.data-E.scrollMargin.top)}),this.scrollBarH.on("scroll",function(p){E.$scrollAnimation||E.session.setScrollLeft(p.data-E.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new o(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.on("changeCharacterSize",function(p){E.updateCharacterSize(),E.onResize(!0,E.gutterWidth,E.$size.width,E.$size.height),E._signal("changeCharacterSize",p)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.margin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$keepTextAreaAtCursor=!_.isIOS,this.$loop=new i(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),h.resetOptions(this),h._signal("renderer",this)};(function(){this.CHANGE_CURSOR=1,this.CHANGE_MARKER=2,this.CHANGE_GUTTER=4,this.CHANGE_SCROLL=8,this.CHANGE_LINES=16,this.CHANGE_TEXT=32,this.CHANGE_SIZE=64,this.CHANGE_MARKER_BACK=128,this.CHANGE_MARKER_FRONT=256,this.CHANGE_FULL=512,this.CHANGE_H_SCROLL=1024,k.implement(this,d),this.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin(),A.setStyle(this.scroller.style,"line-height",this.lineHeight+"px")},this.setSession=function(c){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=c,c&&this.scrollMargin.top&&c.getScrollTop()<=0&&c.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(c),this.$markerBack.setSession(c),this.$markerFront.setSession(c),this.$gutterLayer.setSession(c),this.$textLayer.setSession(c),c&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},this.updateLines=function(c,g,E){if(g===void 0&&(g=1/0),this.$changedLines?(this.$changedLines.firstRow>c&&(this.$changedLines.firstRow=c),this.$changedLines.lastRow<g&&(this.$changedLines.lastRow=g)):this.$changedLines={firstRow:c,lastRow:g},this.$changedLines.lastRow<this.layerConfig.firstRow)if(E)this.$changedLines.lastRow=this.layerConfig.lastRow;else return;this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},this.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},this.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},this.updateFull=function(c){c?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},this.$changes=0,this.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},this.onResize=function(c,g,E,m){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=c?1:0;var p=this.container;m||(m=p.clientHeight||p.scrollHeight),E||(E=p.clientWidth||p.scrollWidth);var f=this.$updateCachedSize(c,g,E,m);if(!this.$size.scrollerHeight||!E&&!m)return this.resizing=0;c&&(this.$gutterLayer.$padding=null),c?this.$renderChanges(f|this.$changes,!0):this.$loop.schedule(f|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarV.scrollLeft=this.scrollBarV.scrollTop=null}},this.$updateCachedSize=function(c,g,E,m){m-=this.$extraHeight||0;var p=0,f=this.$size,F={width:f.width,height:f.height,scrollerHeight:f.scrollerHeight,scrollerWidth:f.scrollerWidth};if(m&&(c||f.height!=m)&&(f.height=m,p|=this.CHANGE_SIZE,f.scrollerHeight=f.height,this.$horizScroll&&(f.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",p=p|this.CHANGE_SCROLL),E&&(c||f.width!=E)){p|=this.CHANGE_SIZE,f.width=E,g==null&&(g=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=g,A.setStyle(this.scrollBarH.element.style,"left",g+"px"),A.setStyle(this.scroller.style,"left",g+this.margin.left+"px"),f.scrollerWidth=Math.max(0,E-g-this.scrollBarV.getWidth()-this.margin.h),A.setStyle(this.$gutter.style,"left",this.margin.left+"px");var R=this.scrollBarV.getWidth()+"px";A.setStyle(this.scrollBarH.element.style,"right",R),A.setStyle(this.scroller.style,"right",R),A.setStyle(this.scroller.style,"bottom",this.scrollBarH.getHeight()),(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||c)&&(p|=this.CHANGE_FULL)}return f.$dirty=!E||!m,p&&this._signal("resize",F),p},this.onGutterResize=function(c){var g=this.$showGutter?c:0;g!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,g,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):this.$computeLayerConfig()},this.adjustWrapLimit=function(){var c=this.$size.scrollerWidth-this.$padding*2,g=Math.floor(c/this.characterWidth);return this.session.adjustWrapLimit(g,this.$showPrintMargin&&this.$printMarginColumn)},this.setAnimatedScroll=function(c){this.setOption("animatedScroll",c)},this.getAnimatedScroll=function(){return this.$animatedScroll},this.setShowInvisibles=function(c){this.setOption("showInvisibles",c),this.session.$bidiHandler.setShowInvisibles(c)},this.getShowInvisibles=function(){return this.getOption("showInvisibles")},this.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},this.setDisplayIndentGuides=function(c){this.setOption("displayIndentGuides",c)},this.setShowPrintMargin=function(c){this.setOption("showPrintMargin",c)},this.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},this.setPrintMarginColumn=function(c){this.setOption("printMarginColumn",c)},this.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},this.getShowGutter=function(){return this.getOption("showGutter")},this.setShowGutter=function(c){return this.setOption("showGutter",c)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.setFadeFoldWidgets=function(c){this.setOption("fadeFoldWidgets",c)},this.setHighlightGutterLine=function(c){this.setOption("highlightGutterLine",c)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.$updatePrintMargin=function(){if(!(!this.$showPrintMargin&&!this.$printMarginEl)){if(!this.$printMarginEl){var c=A.createElement("div");c.className="ace_layer ace_print-margin-layer",this.$printMarginEl=A.createElement("div"),this.$printMarginEl.className="ace_print-margin",c.appendChild(this.$printMarginEl),this.content.insertBefore(c,this.content.firstChild)}var g=this.$printMarginEl.style;g.left=Math.round(this.characterWidth*this.$printMarginColumn+this.$padding)+"px",g.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&this.session.$wrap==-1&&this.adjustWrapLimit()}},this.getContainerElement=function(){return this.container},this.getMouseEventTarget=function(){return this.scroller},this.getTextAreaContainer=function(){return this.container},this.$moveTextAreaToCursor=function(){if(!this.$isMousePressed){var c=this.textarea.style,g=this.$composition;if(!this.$keepTextAreaAtCursor&&!g){A.translate(this.textarea,-100,0);return}var E=this.$cursorLayer.$pixelPos;if(E){g&&g.markerRange&&(E=this.$cursorLayer.getPixelPosition(g.markerRange.start,!0));var m=this.layerConfig,p=E.top,f=E.left;p-=m.offset;var F=g&&g.useTextareaForIME?this.lineHeight:C?0:1;if(p<0||p>m.height-F){A.translate(this.textarea,0,0);return}var R=1,I=this.$size.height-F;if(!g)p+=this.lineHeight;else if(g.useTextareaForIME){var S=this.textarea.value;R=this.characterWidth*this.session.$getStringScreenWidth(S)[0]}else p+=this.lineHeight+2;f-=this.scrollLeft,f>this.$size.scrollerWidth-R&&(f=this.$size.scrollerWidth-R),f+=this.gutterWidth+this.margin.left,A.setStyle(c,"height",F+"px"),A.setStyle(c,"width",R+"px"),A.translate(this.textarea,Math.min(f,this.$size.scrollerWidth-R),Math.min(p,I))}}},this.getFirstVisibleRow=function(){return this.layerConfig.firstRow},this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(this.layerConfig.offset===0?0:1)},this.getLastFullyVisibleRow=function(){var c=this.layerConfig,g=c.lastRow,E=this.session.documentToScreenRow(g,0)*c.lineHeight;return E-this.session.getScrollTop()>c.height-c.lineHeight?g-1:g},this.getLastVisibleRow=function(){return this.layerConfig.lastRow},this.$padding=null,this.setPadding=function(c){this.$padding=c,this.$textLayer.setPadding(c),this.$cursorLayer.setPadding(c),this.$markerFront.setPadding(c),this.$markerBack.setPadding(c),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},this.setScrollMargin=function(c,g,E,m){var p=this.scrollMargin;p.top=c|0,p.bottom=g|0,p.right=m|0,p.left=E|0,p.v=p.top+p.bottom,p.h=p.left+p.right,p.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-p.top),this.updateFull()},this.setMargin=function(c,g,E,m){var p=this.margin;p.top=c|0,p.bottom=g|0,p.right=m|0,p.left=E|0,p.v=p.top+p.bottom,p.h=p.left+p.right,this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this.updateFull()},this.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},this.setHScrollBarAlwaysVisible=function(c){this.setOption("hScrollBarAlwaysVisible",c)},this.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},this.setVScrollBarAlwaysVisible=function(c){this.setOption("vScrollBarAlwaysVisible",c)},this.$updateScrollBarV=function(){var c=this.layerConfig.maxHeight,g=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(c-=(g-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>c-g&&(c=this.scrollTop+g,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(c+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},this.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},this.$frozen=!1,this.freeze=function(){this.$frozen=!0},this.unfreeze=function(){this.$frozen=!1},this.$renderChanges=function(c,g){if(this.$changes&&(c|=this.$changes,this.$changes=0),!this.session||!this.container.offsetWidth||this.$frozen||!c&&!g){this.$changes|=c;return}if(this.$size.$dirty)return this.$changes|=c,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender",c),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var E=this.layerConfig;if(c&this.CHANGE_FULL||c&this.CHANGE_SIZE||c&this.CHANGE_TEXT||c&this.CHANGE_LINES||c&this.CHANGE_SCROLL||c&this.CHANGE_H_SCROLL){if(c|=this.$computeLayerConfig()|this.$loop.clear(),E.firstRow!=this.layerConfig.firstRow&&E.firstRowScreen==this.layerConfig.firstRowScreen){var m=this.scrollTop+(E.firstRow-this.layerConfig.firstRow)*this.lineHeight;m>0&&(this.scrollTop=m,c=c|this.CHANGE_SCROLL,c|=this.$computeLayerConfig()|this.$loop.clear())}E=this.layerConfig,this.$updateScrollBarV(),c&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),A.translate(this.content,-this.scrollLeft,-E.offset);var p=E.width+2*this.$padding+"px",f=E.minHeight+"px";A.setStyle(this.content.style,"width",p),A.setStyle(this.content.style,"height",f)}if(c&this.CHANGE_H_SCROLL&&(A.translate(this.content,-this.scrollLeft,-E.offset),this.scroller.className=this.scrollLeft<=0?"ace_scroller":"ace_scroller ace_scroll-left"),c&this.CHANGE_FULL){this.$changedLines=null,this.$textLayer.update(E),this.$showGutter&&this.$gutterLayer.update(E),this.$markerBack.update(E),this.$markerFront.update(E),this.$cursorLayer.update(E),this.$moveTextAreaToCursor(),this._signal("afterRender",c);return}if(c&this.CHANGE_SCROLL){this.$changedLines=null,c&this.CHANGE_TEXT||c&this.CHANGE_LINES?this.$textLayer.update(E):this.$textLayer.scrollLines(E),this.$showGutter&&(c&this.CHANGE_GUTTER||c&this.CHANGE_LINES?this.$gutterLayer.update(E):this.$gutterLayer.scrollLines(E)),this.$markerBack.update(E),this.$markerFront.update(E),this.$cursorLayer.update(E),this.$moveTextAreaToCursor(),this._signal("afterRender",c);return}c&this.CHANGE_TEXT?(this.$changedLines=null,this.$textLayer.update(E),this.$showGutter&&this.$gutterLayer.update(E)):c&this.CHANGE_LINES?(this.$updateLines()||c&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(E):c&this.CHANGE_TEXT||c&this.CHANGE_GUTTER?this.$showGutter&&this.$gutterLayer.update(E):c&this.CHANGE_CURSOR&&this.$highlightGutterLine&&this.$gutterLayer.updateLineHighlight(E),c&this.CHANGE_CURSOR&&(this.$cursorLayer.update(E),this.$moveTextAreaToCursor()),c&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(E),c&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(E),this._signal("afterRender",c)},this.$autosize=function(){var c=this.session.getScreenLength()*this.lineHeight,g=this.$maxLines*this.lineHeight,E=Math.min(g,Math.max((this.$minLines||1)*this.lineHeight,c))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&(E+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&E>this.$maxPixelHeight&&(E=this.$maxPixelHeight);var m=E<=2*this.lineHeight,p=!m&&c>g;if(E!=this.desiredHeight||this.$size.height!=this.desiredHeight||p!=this.$vScroll){p!=this.$vScroll&&(this.$vScroll=p,this.scrollBarV.setVisible(p));var f=this.container.clientWidth;this.container.style.height=E+"px",this.$updateCachedSize(!0,this.$gutterWidth,f,E),this.desiredHeight=E,this._signal("autosize")}},this.$computeLayerConfig=function(){var c=this.session,g=this.$size,E=g.height<=2*this.lineHeight,m=this.session.getScreenLength(),p=m*this.lineHeight,f=this.$getLongestLine(),F=!E&&(this.$hScrollBarAlwaysVisible||g.scrollerWidth-f-2*this.$padding<0),R=this.$horizScroll!==F;R&&(this.$horizScroll=F,this.scrollBarH.setVisible(F));var I=this.$vScroll;this.$maxLines&&this.lineHeight>1&&this.$autosize();var S=g.scrollerHeight+this.lineHeight,P=!this.$maxLines&&this.$scrollPastEnd?(g.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;p+=P;var G=this.scrollMargin;this.session.setScrollTop(Math.max(-G.top,Math.min(this.scrollTop,p-g.scrollerHeight+G.bottom))),this.session.setScrollLeft(Math.max(-G.left,Math.min(this.scrollLeft,f+2*this.$padding-g.scrollerWidth+G.right)));var Z=!E&&(this.$vScrollBarAlwaysVisible||g.scrollerHeight-p+P<0||this.scrollTop>G.top),ae=I!==Z;ae&&(this.$vScroll=Z,this.scrollBarV.setVisible(Z));var re=this.scrollTop%this.lineHeight,ce=Math.ceil(S/this.lineHeight)-1,j=Math.max(0,Math.round((this.scrollTop-re)/this.lineHeight)),ee=j+ce,ie,fe,he=this.lineHeight;j=c.screenToDocumentRow(j,0);var ye=c.getFoldLine(j);ye&&(j=ye.start.row),ie=c.documentToScreenRow(j,0),fe=c.getRowLength(j)*he,ee=Math.min(c.screenToDocumentRow(ee,0),c.getLength()-1),S=g.scrollerHeight+c.getRowLength(ee)*he+fe,re=this.scrollTop-ie*he;var Te=0;return(this.layerConfig.width!=f||R)&&(Te=this.CHANGE_H_SCROLL),(R||ae)&&(Te|=this.$updateCachedSize(!0,this.gutterWidth,g.width,g.height),this._signal("scrollbarVisibilityChanged"),ae&&(f=this.$getLongestLine())),this.layerConfig={width:f,padding:this.$padding,firstRow:j,firstRowScreen:ie,lastRow:ee,lineHeight:he,characterWidth:this.characterWidth,minHeight:S,maxHeight:p,offset:re,gutterOffset:he?Math.max(0,Math.ceil((re+g.height-g.scrollerHeight)/he)):0,height:this.$size.scrollerHeight},this.session.$bidiHandler&&this.session.$bidiHandler.setContentWidth(f-this.$padding),Te},this.$updateLines=function(){if(this.$changedLines){var c=this.$changedLines.firstRow,g=this.$changedLines.lastRow;this.$changedLines=null;var E=this.layerConfig;if(!(c>E.lastRow+1)&&!(g<E.firstRow)){if(g===1/0){this.$showGutter&&this.$gutterLayer.update(E),this.$textLayer.update(E);return}return this.$textLayer.updateLines(E,c,g),!0}}},this.$getLongestLine=function(){var c=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(c+=1),this.$textLayer&&c>this.$textLayer.MAX_LINE_LENGTH&&(c=this.$textLayer.MAX_LINE_LENGTH+30),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(c*this.characterWidth))},this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},this.addGutterDecoration=function(c,g){this.$gutterLayer.addGutterDecoration(c,g)},this.removeGutterDecoration=function(c,g){this.$gutterLayer.removeGutterDecoration(c,g)},this.updateBreakpoints=function(c){this.$loop.schedule(this.CHANGE_GUTTER)},this.setAnnotations=function(c){this.$gutterLayer.setAnnotations(c),this.$loop.schedule(this.CHANGE_GUTTER)},this.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},this.hideCursor=function(){this.$cursorLayer.hideCursor()},this.showCursor=function(){this.$cursorLayer.showCursor()},this.scrollSelectionIntoView=function(c,g,E){this.scrollCursorIntoView(c,E),this.scrollCursorIntoView(g,E)},this.scrollCursorIntoView=function(c,g,E){if(this.$size.scrollerHeight!==0){var m=this.$cursorLayer.getPixelPosition(c),p=m.left,f=m.top,F=E&&E.top||0,R=E&&E.bottom||0,I=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;I+F>f?(g&&I+F>f+this.lineHeight&&(f-=g*this.$size.scrollerHeight),f===0&&(f=-this.scrollMargin.top),this.session.setScrollTop(f)):I+this.$size.scrollerHeight-R<f+this.lineHeight&&(g&&I+this.$size.scrollerHeight-R<f-this.lineHeight&&(f+=g*this.$size.scrollerHeight),this.session.setScrollTop(f+this.lineHeight+R-this.$size.scrollerHeight));var S=this.scrollLeft;S>p?(p<this.$padding+2*this.layerConfig.characterWidth&&(p=-this.scrollMargin.left),this.session.setScrollLeft(p)):S+this.$size.scrollerWidth<p+this.characterWidth?this.session.setScrollLeft(Math.round(p+this.characterWidth-this.$size.scrollerWidth)):S<=this.$padding&&p-S<this.characterWidth&&this.session.setScrollLeft(0)}},this.getScrollTop=function(){return this.session.getScrollTop()},this.getScrollLeft=function(){return this.session.getScrollLeft()},this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},this.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},this.scrollToRow=function(c){this.session.setScrollTop(c*this.lineHeight)},this.alignCursor=function(c,g){typeof c=="number"&&(c={row:c,column:0});var E=this.$cursorLayer.getPixelPosition(c),m=this.$size.scrollerHeight-this.lineHeight,p=E.top-m*(g||0);return this.session.setScrollTop(p),p},this.STEPS=8,this.$calcSteps=function(c,g){var E=0,m=this.STEPS,p=[],f=function(F,R,I){return I*(Math.pow(F-1,3)+1)+R};for(E=0;E<m;++E)p.push(f(E/this.STEPS,c,g-c));return p},this.scrollToLine=function(c,g,E,m){var p=this.$cursorLayer.getPixelPosition({row:c,column:0}),f=p.top;g&&(f-=this.$size.scrollerHeight/2);var F=this.scrollTop;this.session.setScrollTop(f),E!==!1&&this.animateScrolling(F,m)},this.animateScrolling=function(c,g){var E=this.scrollTop;if(this.$animatedScroll){var m=this;if(c!=E){if(this.$scrollAnimation){var p=this.$scrollAnimation.steps;if(p.length&&(c=p[0],c==E))return}var f=m.$calcSteps(c,E);this.$scrollAnimation={from:c,to:E,steps:f},clearInterval(this.$timer),m.session.setScrollTop(f.shift()),m.session.$scrollTop=E,this.$timer=setInterval(function(){if(!m.session)return clearInterval(m.$timer);f.length?(m.session.setScrollTop(f.shift()),m.session.$scrollTop=E):E!=null?(m.session.$scrollTop=-1,m.session.setScrollTop(E),E=null):(m.$timer=clearInterval(m.$timer),m.$scrollAnimation=null,g&&g())},10)}}},this.scrollToY=function(c){this.scrollTop!==c&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=c)},this.scrollToX=function(c){this.scrollLeft!==c&&(this.scrollLeft=c),this.$loop.schedule(this.CHANGE_H_SCROLL)},this.scrollTo=function(c,g){this.session.setScrollTop(g),this.session.setScrollLeft(g)},this.scrollBy=function(c,g){g&&this.session.setScrollTop(this.session.getScrollTop()+g),c&&this.session.setScrollLeft(this.session.getScrollLeft()+c)},this.isScrollableBy=function(c,g){if(g<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||g>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||c<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||c>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right)return!0},this.pixelToScreenCoordinates=function(c,g){var E;if(this.$hasCssTransforms){E={top:0,left:0};var m=this.$fontMetrics.transformCoordinates([c,g]);c=m[1]-this.gutterWidth-this.margin.left,g=m[0]}else E=this.scroller.getBoundingClientRect();var p=c+this.scrollLeft-E.left-this.$padding,f=p/this.characterWidth,F=Math.floor((g+this.scrollTop-E.top)/this.lineHeight),R=this.$blockCursor?Math.floor(f):Math.round(f);return{row:F,column:R,side:f-R>0?1:-1,offsetX:p}},this.screenToTextCoordinates=function(c,g){var E;if(this.$hasCssTransforms){E={top:0,left:0};var m=this.$fontMetrics.transformCoordinates([c,g]);c=m[1]-this.gutterWidth-this.margin.left,g=m[0]}else E=this.scroller.getBoundingClientRect();var p=c+this.scrollLeft-E.left-this.$padding,f=p/this.characterWidth,F=this.$blockCursor?Math.floor(f):Math.round(f),R=Math.floor((g+this.scrollTop-E.top)/this.lineHeight);return this.session.screenToDocumentPosition(R,Math.max(F,0),p)},this.textToScreenCoordinates=function(c,g){var E=this.scroller.getBoundingClientRect(),m=this.session.documentToScreenPosition(c,g),p=this.$padding+(this.session.$bidiHandler.isBidiRow(m.row,c)?this.session.$bidiHandler.getPosLeft(m.column):Math.round(m.column*this.characterWidth)),f=m.row*this.lineHeight;return{pageX:E.left+p-this.scrollLeft,pageY:E.top+f-this.scrollTop}},this.visualizeFocus=function(){A.addCssClass(this.container,"ace_focus")},this.visualizeBlur=function(){A.removeCssClass(this.container,"ace_focus")},this.showComposition=function(c){this.$composition=c,c.cssText||(c.cssText=this.textarea.style.cssText),c.useTextareaForIME==null&&(c.useTextareaForIME=this.$useTextareaForIME),this.$useTextareaForIME?(A.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor(),this.$cursorLayer.element.style.display="none"):c.markerId=this.session.addMarker(c.markerRange,"ace_composition_marker","text")},this.setCompositionText=function(c){var g=this.session.selection.cursor;this.addToken(c,"composition_placeholder",g.row,g.column),this.$moveTextAreaToCursor()},this.hideComposition=function(){if(this.$composition){this.$composition.markerId&&this.session.removeMarker(this.$composition.markerId),A.removeCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText=this.$composition.cssText;var c=this.session.selection.cursor;this.removeExtraToken(c.row,c.column),this.$composition=null,this.$cursorLayer.element.style.display=""}},this.addToken=function(c,g,E,m){var p=this.session;p.bgTokenizer.lines[E]=null;var f={type:g,value:c},F=p.getTokens(E);if(m==null)F.push(f);else for(var R=0,I=0;I<F.length;I++){var S=F[I];if(R+=S.value.length,m<=R){var P=S.value.length-(R-m),G=S.value.slice(0,P),Z=S.value.slice(P);F.splice(I,1,{type:S.type,value:G},f,{type:S.type,value:Z});break}}this.updateLines(E,E)},this.removeExtraToken=function(c,g){this.updateLines(c,c)},this.setTheme=function(c,g){var E=this;if(this.$themeId=c,E._dispatchEvent("themeChange",{theme:c}),!c||typeof c=="string"){var m=c||this.$options.theme.initialValue;h.loadModule(["theme",m],p)}else p(c);function p(f){if(E.$themeId!=c)return g&&g();if(!f||!f.cssClass)throw new Error("couldn't load module "+c+" or it didn't call define");f.$id&&(E.$themeId=f.$id),A.importCssString(f.cssText,f.cssClass,E.container),E.theme&&A.removeCssClass(E.container,E.theme.cssClass);var F="padding"in f?f.padding:"padding"in(E.theme||{})?4:E.$padding;E.$padding&&F!=E.$padding&&E.setPadding(F),E.$theme=f.cssClass,E.theme=f,A.addCssClass(E.container,f.cssClass),A.setCssClass(E.container,"ace_dark",f.isDark),E.$size&&(E.$size.width=0,E.$updateSizeAsync()),E._dispatchEvent("themeLoaded",{theme:f}),g&&g()}},this.getTheme=function(){return this.$themeId},this.setStyle=function(c,g){A.setCssClass(this.container,c,g!==!1)},this.unsetStyle=function(c){A.removeCssClass(this.container,c)},this.setCursorStyle=function(c){A.setStyle(this.scroller.style,"cursor",c)},this.setMouseCursor=function(c){A.setStyle(this.scroller.style,"cursor",c)},this.attachToShadowRoot=function(){A.importCssString(v,"ace_editor.css",this.container)},this.destroy=function(){this.freeze(),this.$fontMetrics.destroy(),this.$cursorLayer.destroy(),this.removeAllListeners(),this.container.textContent=""}}).call($.prototype),h.defineOptions($.prototype,"renderer",{animatedScroll:{initialValue:!1},showInvisibles:{set:function(c){this.$textLayer.setShowInvisibles(c)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(c){typeof c=="number"&&(this.$printMarginColumn=c),this.$showPrintMargin=!!c,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(c){this.$gutter.style.display=c?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},fadeFoldWidgets:{set:function(c){A.setCssClass(this.$gutter,"ace_fade-fold-widgets",c)},initialValue:!1},showFoldWidgets:{set:function(c){this.$gutterLayer.setShowFoldWidgets(c),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(c){this.$textLayer.setDisplayIndentGuides(c)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightGutterLine:{set:function(c){this.$gutterLayer.setHighlightGutterLine(c),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},hScrollBarAlwaysVisible:{set:function(c){(!this.$hScrollBarAlwaysVisible||!this.$horizScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(c){(!this.$vScrollBarAlwaysVisible||!this.$vScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(c){typeof c=="number"&&(c=c+"px"),this.container.style.fontSize=c,this.updateFontSize()},initialValue:12},fontFamily:{set:function(c){this.container.style.fontFamily=c,this.updateFontSize()}},maxLines:{set:function(c){this.updateFull()}},minLines:{set:function(c){this.$minLines<562949953421311||(this.$minLines=0),this.updateFull()}},maxPixelHeight:{set:function(c){this.updateFull()},initialValue:0},scrollPastEnd:{set:function(c){c=+c||0,this.$scrollPastEnd!=c&&(this.$scrollPastEnd=c,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(c){this.$gutterLayer.$fixedWidth=!!c,this.$loop.schedule(this.CHANGE_GUTTER)}},theme:{set:function(c){this.setTheme(c)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0},hasCssTransforms:{},useTextareaForIME:{initialValue:!_.isMobile&&!_.isIE}}),D.VirtualRenderer=$}),ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],function(a,D,z){var k=a("../lib/oop"),A=a("../lib/net"),h=a("../lib/event_emitter").EventEmitter,s=a("../config");function l(n){var i="importScripts('"+A.qualifyURL(n)+"');";try{return new Blob([i],{type:"application/javascript"})}catch{var o=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,d=new o;return d.append(i),d.getBlob("application/javascript")}}function t(n){if(typeof Worker>"u")return{postMessage:function(){},terminate:function(){}};if(s.get("loadWorkerFromBlob")){var i=l(n),o=window.URL||window.webkitURL,d=o.createObjectURL(i);return new Worker(d)}return new Worker(n)}var e=function(n){n.postMessage||(n=this.$createWorkerFromOldConfig.apply(this,arguments)),this.$worker=n,this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){k.implement(this,h),this.$createWorkerFromOldConfig=function(n,i,o,d,v){if(a.nameToUrl&&!a.toUrl&&(a.toUrl=a.nameToUrl),s.get("packaged")||!a.toUrl)d=d||s.moduleUrl(i,"worker");else{var _=this.$normalizePath;d=d||_(a.toUrl("ace/worker/worker.js",null,"_"));var C={};n.forEach(function($){C[$]=_(a.toUrl($,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}return this.$worker=t(d),v&&this.send("importScripts",v),this.$worker.postMessage({init:!0,tlns:C,module:i,classname:o}),this.$worker},this.onMessage=function(n){var i=n.data;switch(i.type){case"event":this._signal(i.name,{data:i.data});break;case"call":var o=this.callbacks[i.id];o&&(o(i.data),delete this.callbacks[i.id]);break;case"error":this.reportError(i.data);break;case"log":window.console&&console.log&&console.log.apply(console,i.data);break}},this.reportError=function(n){window.console&&console.error&&console.error(n)},this.$normalizePath=function(n){return A.qualifyURL(n)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(n,i){this.$worker.postMessage({command:n,args:i})},this.call=function(n,i,o){if(o){var d=this.callbackId++;this.callbacks[d]=o,i.push(d)}this.send(n,i)},this.emit=function(n,i){try{i.data&&i.data.err&&(i.data.err={message:i.data.err.message,stack:i.data.err.stack,code:i.data.err.code}),this.$worker.postMessage({event:n,data:{data:i.data}})}catch(o){console.error(o.stack)}},this.attachToDocument=function(n){this.$doc&&this.terminate(),this.$doc=n,this.call("setValue",[n.getValue()]),n.on("change",this.changeListener)},this.changeListener=function(n){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),n.action=="insert"?this.deltaQueue.push(n.start,n.lines):this.deltaQueue.push(n.start,n.end)},this.$sendDeltaQueue=function(){var n=this.deltaQueue;n&&(this.deltaQueue=null,n.length>50&&n.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:n}))}}).call(e.prototype);var r=function(n,i,o){var d=null,v=!1,_=Object.create(h),C=[],$=new e({messageBuffer:C,terminate:function(){},postMessage:function(g){C.push(g),d&&(v?setTimeout(c):c())}});$.setEmitSync=function(g){v=g};var c=function(){var g=C.shift();g.command?d[g.command].apply(d,g.args):g.event&&_._signal(g.event,g.data)};return _.postMessage=function(g){$.onMessage({data:g})},_.callback=function(g,E){this.postMessage({type:"call",id:E,data:g})},_.emit=function(g,E){this.postMessage({type:"event",name:g,data:E})},s.loadModule(["worker",i],function(g){for(d=new g[o](_);C.length;)c()}),$};D.UIWorkerClient=r,D.WorkerClient=e,D.createWorker=t}),ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(a,D,z){var k=a("./range").Range,A=a("./lib/event_emitter").EventEmitter,h=a("./lib/oop"),s=function(l,t,e,r,n,i){var o=this;this.length=t,this.session=l,this.doc=l.getDocument(),this.mainClass=n,this.othersClass=i,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate),this.$others=r,this.$onCursorChange=function(){setTimeout(function(){o.onCursorChange()})},this.$pos=e;var d=l.getUndoManager().$undoStack||l.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=d.length,this.setup(),l.selection.on("changeCursor",this.$onCursorChange)};(function(){h.implement(this,A),this.setup=function(){var l=this,t=this.doc,e=this.session;this.selectionBefore=e.selection.toJSON(),e.selection.inMultiSelectMode&&e.selection.toSingleRange(),this.pos=t.createAnchor(this.$pos.row,this.$pos.column);var r=this.pos;r.$insertRight=!0,r.detach(),r.markerId=e.addMarker(new k(r.row,r.column,r.row,r.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach(function(n){var i=t.createAnchor(n.row,n.column);i.$insertRight=!0,i.detach(),l.others.push(i)}),e.setUndoSelect(!1)},this.showOtherMarkers=function(){if(!this.othersActive){var l=this.session,t=this;this.othersActive=!0,this.others.forEach(function(e){e.markerId=l.addMarker(new k(e.row,e.column,e.row,e.column+t.length),t.othersClass,null,!1)})}},this.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var l=0;l<this.others.length;l++)this.session.removeMarker(this.others[l].markerId)}},this.onUpdate=function(l){if(this.$updating)return this.updateAnchors(l);var t=l;if(t.start.row===t.end.row&&t.start.row===this.pos.row){this.$updating=!0;var e=l.action==="insert"?t.end.column-t.start.column:t.start.column-t.end.column,r=t.start.column>=this.pos.column&&t.start.column<=this.pos.column+this.length+1,n=t.start.column-this.pos.column;if(this.updateAnchors(l),r&&(this.length+=e),r&&!this.session.$fromUndo){if(l.action==="insert")for(var i=this.others.length-1;i>=0;i--){var o=this.others[i],d={row:o.row,column:o.column+n};this.doc.insertMergedLines(d,l.lines)}else if(l.action==="remove")for(var i=this.others.length-1;i>=0;i--){var o=this.others[i],d={row:o.row,column:o.column+n};this.doc.remove(new k(d.row,d.column,d.row,d.column-e))}}this.$updating=!1,this.updateMarkers()}},this.updateAnchors=function(l){this.pos.onChange(l);for(var t=this.others.length;t--;)this.others[t].onChange(l);this.updateMarkers()},this.updateMarkers=function(){if(!this.$updating){var l=this,t=this.session,e=function(n,i){t.removeMarker(n.markerId),n.markerId=t.addMarker(new k(n.row,n.column,n.row,n.column+l.length),i,null,!1)};e(this.pos,this.mainClass);for(var r=this.others.length;r--;)e(this.others[r],this.othersClass)}},this.onCursorChange=function(l){if(!(this.$updating||!this.session)){var t=this.session.selection.getCursor();t.row===this.pos.row&&t.column>=this.pos.column&&t.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",l)):(this.hideOtherMarkers(),this._emit("cursorLeave",l))}},this.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.off("change",this.$onUpdate),this.session.selection.off("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},this.cancel=function(){if(this.$undoStackDepth!==-1){for(var l=this.session.getUndoManager(),t=(l.$undoStack||l.$undostack).length-this.$undoStackDepth,e=0;e<t;e++)l.undo(this.session,!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}}}).call(s.prototype),D.PlaceHolder=s}),ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(a,D,z){var k=a("../lib/event"),A=a("../lib/useragent");function h(l,t){return l.row==t.row&&l.column==t.column}function s(l){var t=l.domEvent,e=t.altKey,r=t.shiftKey,n=t.ctrlKey,i=l.getAccelKey(),o=l.getButton();if(n&&A.isMac&&(o=t.button),l.editor.inMultiSelectMode&&o==2){l.editor.textInput.onContextMenu(l.domEvent);return}if(!n&&!e&&!i){o===0&&l.editor.inMultiSelectMode&&l.editor.exitMultiSelectMode();return}if(o===0){var d=l.editor,v=d.selection,_=d.inMultiSelectMode,C=l.getDocumentPosition(),$=v.getCursor(),c=l.inSelection()||v.isEmpty()&&h(C,$),g=l.x,E=l.y,m=function(j){g=j.clientX,E=j.clientY},p=d.session,f=d.renderer.pixelToScreenCoordinates(g,E),F=f,R;if(d.$mouseHandler.$enableJumpToDef)n&&e||i&&e?R=r?"block":"add":e&&d.$blockSelectEnabled&&(R="block");else if(i&&!e){if(R="add",!_&&r)return}else e&&d.$blockSelectEnabled&&(R="block");if(R&&A.isMac&&t.ctrlKey&&d.$mouseHandler.cancelContextMenu(),R=="add"){if(!_&&c)return;if(!_){var I=v.toOrientedRange();d.addSelectionMarker(I)}var S=v.rangeList.rangeAtPoint(C);d.inVirtualSelectionMode=!0,r&&(S=null,I=v.ranges[0]||I,d.removeSelectionMarker(I)),d.once("mouseup",function(){var j=v.toOrientedRange();S&&j.isEmpty()&&h(S.cursor,j.cursor)?v.substractPoint(j.cursor):(r?v.substractPoint(I.cursor):I&&(d.removeSelectionMarker(I),v.addRange(I)),v.addRange(j)),d.inVirtualSelectionMode=!1})}else if(R=="block"){l.stop(),d.inVirtualSelectionMode=!0;var P,G=[],Z=function(){var j=d.renderer.pixelToScreenCoordinates(g,E),ee=p.screenToDocumentPosition(j.row,j.column,j.offsetX);h(F,j)&&h(ee,v.lead)||(F=j,d.selection.moveToPosition(ee),d.renderer.scrollCursorIntoView(),d.removeSelectionMarkers(G),G=v.rectangularRangeBlock(F,f),d.$mouseHandler.$clickSelection&&G.length==1&&G[0].isEmpty()&&(G[0]=d.$mouseHandler.$clickSelection.clone()),G.forEach(d.addSelectionMarker,d),d.updateSelectionMarkers())};_&&!i?v.toSingleRange():!_&&i&&(P=v.toOrientedRange(),d.addSelectionMarker(P)),r?f=p.documentToScreenPosition(v.lead):v.moveToPosition(C),F={row:-1,column:-1};var ae=function(j){Z(),clearInterval(ce),d.removeSelectionMarkers(G),G.length||(G=[v.toOrientedRange()]),P&&(d.removeSelectionMarker(P),v.toSingleRange(P));for(var ee=0;ee<G.length;ee++)v.addRange(G[ee]);d.inVirtualSelectionMode=!1,d.$mouseHandler.$clickSelection=null},re=Z;k.capture(d.container,m,ae);var ce=setInterval(function(){re()},20);return l.preventDefault()}}}D.onMouseDown=s}),ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(a,D,z){D.defaultCommands=[{name:"addCursorAbove",description:"Add cursor above",exec:function(A){A.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",description:"Add cursor below",exec:function(A){A.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",description:"Add cursor above (skip current)",exec:function(A){A.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",description:"Add cursor below (skip current)",exec:function(A){A.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",description:"Select more before",exec:function(A){A.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",description:"Select more after",exec:function(A){A.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",description:"Select next before",exec:function(A){A.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",description:"Select next after",exec:function(A){A.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"toggleSplitSelectionIntoLines",description:"Split into lines",exec:function(A){A.multiSelect.rangeCount>1?A.multiSelect.joinSelections():A.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"splitSelectionIntoLines",description:"Split into lines",exec:function(A){A.multiSelect.splitIntoLines()},readOnly:!0},{name:"alignCursors",description:"Align cursors",exec:function(A){A.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",description:"Find all",exec:function(A){A.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],D.multiSelectCommands=[{name:"singleSelection",description:"Single selection",bindKey:"esc",exec:function(A){A.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(A){return A&&A.inMultiSelectMode}}];var k=a("../keyboard/hash_handler").HashHandler;D.keyboardHandler=new k(D.multiSelectCommands)}),ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(a,D,z){var k=a("./range_list").RangeList,A=a("./range").Range,h=a("./selection").Selection,s=a("./mouse/multi_select_handler").onMouseDown,l=a("./lib/event"),t=a("./lib/lang"),e=a("./commands/multi_select_commands");D.commands=e.defaultCommands.concat(e.multiSelectCommands);var r=a("./search").Search,n=new r;function i($,c,g){return n.$options.wrap=!0,n.$options.needle=c,n.$options.backwards=g==-1,n.find($)}var o=a("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(o.prototype),(function(){this.ranges=null,this.rangeList=null,this.addRange=function($,c){if($){if(!this.inMultiSelectMode&&this.rangeCount===0){var g=this.toOrientedRange();if(this.rangeList.add(g),this.rangeList.add($),this.rangeList.ranges.length!=2)return this.rangeList.removeAll(),c||this.fromOrientedRange($);this.rangeList.removeAll(),this.rangeList.add(g),this.$onAddRange(g)}$.cursor||($.cursor=$.end);var E=this.rangeList.add($);return this.$onAddRange($),E.length&&this.$onRemoveRange(E),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),c||this.fromOrientedRange($)}},this.toSingleRange=function($){$=$||this.ranges[0];var c=this.rangeList.removeAll();c.length&&this.$onRemoveRange(c),$&&this.fromOrientedRange($)},this.substractPoint=function($){var c=this.rangeList.substractPoint($);if(c)return this.$onRemoveRange(c),c[0]},this.mergeOverlappingRanges=function(){var $=this.rangeList.merge();$.length&&this.$onRemoveRange($)},this.$onAddRange=function($){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift($),this._signal("addRange",{range:$})},this.$onRemoveRange=function($){if(this.rangeCount=this.rangeList.ranges.length,this.rangeCount==1&&this.inMultiSelectMode){var c=this.rangeList.ranges.pop();$.push(c),this.rangeCount=0}for(var g=$.length;g--;){var E=this.ranges.indexOf($[g]);this.ranges.splice(E,1)}this._signal("removeRange",{ranges:$}),this.rangeCount===0&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),c=c||this.ranges[0],c&&!c.isEqual(this.getRange())&&this.fromOrientedRange(c)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new k,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){for(var $=this.ranges.length?this.ranges:[this.getRange()],c=[],g=0;g<$.length;g++){var E=$[g],m=E.start.row,p=E.end.row;if(m===p)c.push(E.clone());else{for(c.push(new A(m,E.start.column,m,this.session.getLine(m).length));++m<p;)c.push(this.getLineRange(m,!0));c.push(new A(p,0,p,E.end.column))}g==0&&!this.isBackwards()&&(c=c.reverse())}this.toSingleRange();for(var g=c.length;g--;)this.addRange(c[g])},this.joinSelections=function(){var $=this.rangeList.ranges,c=$[$.length-1],g=A.fromPoints($[0].start,c.end);this.toSingleRange(),this.setSelectionRange(g,c.cursor==c.start)},this.toggleBlockSelection=function(){if(this.rangeCount>1){var $=this.rangeList.ranges,c=$[$.length-1],g=A.fromPoints($[0].start,c.end);this.toSingleRange(),this.setSelectionRange(g,c.cursor==c.start)}else{var E=this.session.documentToScreenPosition(this.cursor),m=this.session.documentToScreenPosition(this.anchor),p=this.rectangularRangeBlock(E,m);p.forEach(this.addRange,this)}},this.rectangularRangeBlock=function($,c,g){var E=[],m=$.column<c.column;if(m)var p=$.column,f=c.column,F=$.offsetX,R=c.offsetX;else var p=c.column,f=$.column,F=c.offsetX,R=$.offsetX;var I=$.row<c.row;if(I)var S=$.row,P=c.row;else var S=c.row,P=$.row;p<0&&(p=0),S<0&&(S=0),S==P&&(g=!0);for(var G,Z=S;Z<=P;Z++){var ae=A.fromPoints(this.session.screenToDocumentPosition(Z,p,F),this.session.screenToDocumentPosition(Z,f,R));if(ae.isEmpty()){if(G&&v(ae.end,G))break;G=ae.end}ae.cursor=m?ae.start:ae.end,E.push(ae)}if(I&&E.reverse(),!g){for(var re=E.length-1;E[re].isEmpty()&&re>0;)re--;if(re>0)for(var ce=0;E[ce].isEmpty();)ce++;for(var j=re;j>=ce;j--)E[j].isEmpty()&&E.splice(j,1)}return E}}).call(h.prototype);var d=a("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function($){$.cursor||($.cursor=$.end);var c=this.getSelectionStyle();return $.marker=this.session.addMarker($,"ace_selection",c),this.session.$selectionMarkers.push($),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,$},this.removeSelectionMarker=function($){if($.marker){this.session.removeMarker($.marker);var c=this.session.$selectionMarkers.indexOf($);c!=-1&&this.session.$selectionMarkers.splice(c,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function($){for(var c=this.session.$selectionMarkers,g=$.length;g--;){var E=$[g];if(E.marker){this.session.removeMarker(E.marker);var m=c.indexOf(E);m!=-1&&c.splice(m,1)}}this.session.selectionMarkerCount=c.length},this.$onAddRange=function($){this.addSelectionMarker($.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function($){this.removeSelectionMarkers($.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function($){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(e.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function($){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(e.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function($){var c=$.command,g=$.editor;if(g.multiSelect){if(c.multiSelectAction)c.multiSelectAction=="forEach"?E=g.forEachSelection(c,$.args):c.multiSelectAction=="forEachLine"?E=g.forEachSelection(c,$.args,!0):c.multiSelectAction=="single"?(g.exitMultiSelectMode(),E=c.exec(g,$.args||{})):E=c.multiSelectAction(g,$.args||{});else{var E=c.exec(g,$.args||{});g.multiSelect.addRange(g.multiSelect.toOrientedRange()),g.multiSelect.mergeOverlappingRanges()}return E}},this.forEachSelection=function($,c,g){if(!this.inVirtualSelectionMode){var E=g&&g.keepOrder,m=g==!0||g&&g.$byLines,p=this.session,f=this.selection,F=f.rangeList,R=(E?f:F).ranges,I;if(!R.length)return $.exec?$.exec(this,c||{}):$(this,c||{});var S=f._eventRegistry;f._eventRegistry={};var P=new h(p);this.inVirtualSelectionMode=!0;for(var G=R.length;G--;){if(m)for(;G>0&&R[G].start.row==R[G-1].end.row;)G--;P.fromOrientedRange(R[G]),P.index=G,this.selection=p.selection=P;var Z=$.exec?$.exec(this,c||{}):$(this,c||{});!I&&Z!==void 0&&(I=Z),P.toOrientedRange(R[G])}P.detach(),this.selection=p.selection=f,this.inVirtualSelectionMode=!1,f._eventRegistry=S,f.mergeOverlappingRanges(),f.ranges[0]&&f.fromOrientedRange(f.ranges[0]);var ae=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),ae&&ae.from==ae.to&&this.renderer.animateScrolling(ae.from),I}},this.exitMultiSelectMode=function(){!this.inMultiSelectMode||this.inVirtualSelectionMode||this.multiSelect.toSingleRange()},this.getSelectedText=function(){var $="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var c=this.multiSelect.rangeList.ranges,g=[],E=0;E<c.length;E++)g.push(this.session.getTextRange(c[E]));var m=this.session.getDocument().getNewLineCharacter();$=g.join(m),$.length==(g.length-1)*m.length&&($="")}else this.selection.isEmpty()||($=this.session.getTextRange(this.getSelectionRange()));return $},this.$checkMultiselectChange=function($,c){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var g=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&c==this.multiSelect.anchor)return;var E=c==this.multiSelect.anchor?g.cursor==g.start?g.end:g.start:g.cursor;E.row!=c.row||this.session.$clipPositionToDocument(E.row,E.column).column!=c.column?this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange()):this.multiSelect.mergeOverlappingRanges()}},this.findAll=function($,c,g){if(c=c||{},c.needle=$||c.needle,c.needle==null){var E=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();c.needle=this.session.getTextRange(E)}this.$search.set(c);var m=this.$search.findAll(this.session);if(!m.length)return 0;var p=this.multiSelect;g||p.toSingleRange(m[0]);for(var f=m.length;f--;)p.addRange(m[f],!0);return E&&p.rangeList.rangeAtPoint(E.start)&&p.addRange(E,!0),m.length},this.selectMoreLines=function($,c){var g=this.selection.toOrientedRange(),E=g.cursor==g.end,m=this.session.documentToScreenPosition(g.cursor);this.selection.$desiredColumn&&(m.column=this.selection.$desiredColumn);var p=this.session.screenToDocumentPosition(m.row+$,m.column);if(g.isEmpty())var F=p;else var f=this.session.documentToScreenPosition(E?g.end:g.start),F=this.session.screenToDocumentPosition(f.row+$,f.column);if(E){var R=A.fromPoints(p,F);R.cursor=R.start}else{var R=A.fromPoints(F,p);R.cursor=R.end}if(R.desiredColumn=m.column,!this.selection.inMultiSelectMode)this.selection.addRange(g);else if(c)var I=g.cursor;this.selection.addRange(R),I&&this.selection.substractPoint(I)},this.transposeSelections=function($){for(var c=this.session,g=c.multiSelect,E=g.ranges,m=E.length;m--;){var p=E[m];if(p.isEmpty()){var f=c.getWordRange(p.start.row,p.start.column);p.start.row=f.start.row,p.start.column=f.start.column,p.end.row=f.end.row,p.end.column=f.end.column}}g.mergeOverlappingRanges();for(var F=[],m=E.length;m--;){var p=E[m];F.unshift(c.getTextRange(p))}$<0?F.unshift(F.pop()):F.push(F.shift());for(var m=E.length;m--;){var p=E[m],f=p.clone();c.replace(p,F[m]),p.start.row=f.start.row,p.start.column=f.start.column}g.fromOrientedRange(g.ranges[0])},this.selectMore=function($,c,g){var E=this.session,m=E.multiSelect,p=m.toOrientedRange();if(!(p.isEmpty()&&(p=E.getWordRange(p.start.row,p.start.column),p.cursor=$==-1?p.start:p.end,this.multiSelect.addRange(p),g))){var f=E.getTextRange(p),F=i(E,f,$);F&&(F.cursor=$==-1?F.start:F.end,this.session.unfold(F),this.multiSelect.addRange(F),this.renderer.scrollCursorIntoView(null,.5)),c&&this.multiSelect.substractPoint(p.cursor)}},this.alignCursors=function(){var $=this.session,c=$.multiSelect,g=c.ranges,E=-1,m=g.filter(function(re){if(re.cursor.row==E)return!0;E=re.cursor.row});if(!g.length||m.length==g.length-1){var p=this.selection.getRange(),f=p.start.row,F=p.end.row,R=f==F;if(R){var I=this.session.getLength(),S;do S=this.session.getLine(F);while(/[=:]/.test(S)&&++F<I);do S=this.session.getLine(f);while(/[=:]/.test(S)&&--f>0);f<0&&(f=0),F>=I&&(F=I-1)}var P=this.session.removeFullLines(f,F);P=this.$reAlignText(P,R),this.session.insert({row:f,column:0},P.join(`
`)+`
`),R||(p.start.column=0,p.end.column=P[P.length-1].length),this.selection.setRange(p)}else{m.forEach(function(re){c.substractPoint(re.cursor)});var G=0,Z=1/0,ae=g.map(function(re){var ce=re.cursor,j=$.getLine(ce.row),ee=j.substr(ce.column).search(/\S/g);return ee==-1&&(ee=0),ce.column>G&&(G=ce.column),ee<Z&&(Z=ee),ee});g.forEach(function(re,ce){var j=re.cursor,ee=G-j.column,ie=ae[ce]-Z;ee>ie?$.insert(j,t.stringRepeat(" ",ee-ie)):$.remove(new A(j.row,j.column,j.row,j.column-ee+ie)),re.start.column=re.end.column=G,re.start.row=re.end.row=j.row,re.cursor=re.end}),c.fromOrientedRange(g[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}},this.$reAlignText=function($,c){var g=!0,E=!0,m,p,f;return $.map(function(P){var G=P.match(/(\s*)(.*?)(\s*)([=:].*)/);return G?m==null?(m=G[1].length,p=G[2].length,f=G[3].length,G):(m+p+f!=G[1].length+G[2].length+G[3].length&&(E=!1),m!=G[1].length&&(g=!1),m>G[1].length&&(m=G[1].length),p<G[2].length&&(p=G[2].length),f>G[3].length&&(f=G[3].length),G):[P]}).map(c?R:g?E?I:R:S);function F(P){return t.stringRepeat(" ",P)}function R(P){return P[2]?F(m)+P[2]+F(p-P[2].length+f)+P[4].replace(/^([=:])\s+/,"$1 "):P[0]}function I(P){return P[2]?F(m+p-P[2].length)+P[2]+F(f)+P[4].replace(/^([=:])\s+/,"$1 "):P[0]}function S(P){return P[2]?F(m)+P[2]+F(f)+P[4].replace(/^([=:])\s+/,"$1 "):P[0]}}}).call(d.prototype);function v($,c){return $.row==c.row&&$.column==c.column}D.onSessionChange=function($){var c=$.session;c&&!c.multiSelect&&(c.$selectionMarkers=[],c.selection.$initRangeList(),c.multiSelect=c.selection),this.multiSelect=c&&c.multiSelect;var g=$.oldSession;g&&(g.multiSelect.off("addRange",this.$onAddRange),g.multiSelect.off("removeRange",this.$onRemoveRange),g.multiSelect.off("multiSelect",this.$onMultiSelect),g.multiSelect.off("singleSelect",this.$onSingleSelect),g.multiSelect.lead.off("change",this.$checkMultiselectChange),g.multiSelect.anchor.off("change",this.$checkMultiselectChange)),c&&(c.multiSelect.on("addRange",this.$onAddRange),c.multiSelect.on("removeRange",this.$onRemoveRange),c.multiSelect.on("multiSelect",this.$onMultiSelect),c.multiSelect.on("singleSelect",this.$onSingleSelect),c.multiSelect.lead.on("change",this.$checkMultiselectChange),c.multiSelect.anchor.on("change",this.$checkMultiselectChange)),c&&this.inMultiSelectMode!=c.selection.inMultiSelectMode&&(c.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())};function _($){$.$multiselectOnSessionChange||($.$onAddRange=$.$onAddRange.bind($),$.$onRemoveRange=$.$onRemoveRange.bind($),$.$onMultiSelect=$.$onMultiSelect.bind($),$.$onSingleSelect=$.$onSingleSelect.bind($),$.$multiselectOnSessionChange=D.onSessionChange.bind($),$.$checkMultiselectChange=$.$checkMultiselectChange.bind($),$.$multiselectOnSessionChange($),$.on("changeSession",$.$multiselectOnSessionChange),$.on("mousedown",s),$.commands.addCommands(e.defaultCommands),C($))}function C($){if(!$.textInput)return;var c=$.textInput.getElement(),g=!1;l.addListener(c,"keydown",function(m){var p=m.keyCode==18&&!(m.ctrlKey||m.shiftKey||m.metaKey);$.$blockSelectEnabled&&p?g||($.renderer.setMouseCursor("crosshair"),g=!0):g&&E()},$),l.addListener(c,"keyup",E,$),l.addListener(c,"blur",E,$);function E(m){g&&($.renderer.setMouseCursor(""),g=!1)}}D.MultiSelect=_,a("./config").defineOptions(d.prototype,"editor",{enableMultiselect:{set:function($){_(this),$?(this.on("changeSession",this.$multiselectOnSessionChange),this.on("mousedown",s)):(this.off("changeSession",this.$multiselectOnSessionChange),this.off("mousedown",s))},value:!0},enableBlockSelect:{set:function($){this.$blockSelectEnabled=$},value:!0}})}),ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(a,D,z){var k=a("../../range").Range,A=D.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(h,s,l){var t=h.getLine(l);return this.foldingStartMarker.test(t)?"start":s=="markbeginend"&&this.foldingStopMarker&&this.foldingStopMarker.test(t)?"end":""},this.getFoldWidgetRange=function(h,s,l){return null},this.indentationBlock=function(h,s,l){var t=/\S/,e=h.getLine(s),r=e.search(t);if(r!=-1){for(var n=l||e.length,i=h.getLength(),o=s,d=s;++s<i;){var v=h.getLine(s).search(t);if(v!=-1){if(v<=r){var _=h.getTokenAt(s,0);if(!_||_.type!=="string")break}d=s}}if(d>o){var C=h.getLine(d).length;return new k(o,n,d,C)}}},this.openingBracketBlock=function(h,s,l,t,e){var r={row:l,column:t+1},n=h.$findClosingBracket(s,r,e);if(n){var i=h.foldWidgets[n.row];return i==null&&(i=h.getFoldWidget(n.row)),i=="start"&&n.row>r.row&&(n.row--,n.column=h.getLine(n.row).length),k.fromPoints(r,n)}},this.closingBracketBlock=function(h,s,l,t,e){var r={row:l,column:t},n=h.$findOpeningBracket(s,r);if(n)return n.column++,r.column--,k.fromPoints(n,r)}}).call(A.prototype)}),ace.define("ace/theme/textmate",["require","exports","module","ace/lib/dom"],function(a,D,z){D.isDark=!1,D.cssClass="ace-tm",D.cssText='.ace-tm .ace_gutter {	background: #f0f0f0;	color: #333;	}	.ace-tm .ace_print-margin {	width: 1px;	background: #e8e8e8;	}	.ace-tm .ace_fold {	background-color: #6B72E6;	}	.ace-tm {	background-color: #FFFFFF;	color: black;	}	.ace-tm .ace_cursor {	color: black;	}	.ace-tm .ace_invisible {	color: rgb(191, 191, 191);	}	.ace-tm .ace_storage,	.ace-tm .ace_keyword {	color: blue;	}	.ace-tm .ace_constant {	color: rgb(197, 6, 11);	}	.ace-tm .ace_constant.ace_buildin {	color: rgb(88, 72, 246);	}	.ace-tm .ace_constant.ace_language {	color: rgb(88, 92, 246);	}	.ace-tm .ace_constant.ace_library {	color: rgb(6, 150, 14);	}	.ace-tm .ace_invalid {	background-color: rgba(255, 0, 0, 0.1);	color: red;	}	.ace-tm .ace_support.ace_function {	color: rgb(60, 76, 114);	}	.ace-tm .ace_support.ace_constant {	color: rgb(6, 150, 14);	}	.ace-tm .ace_support.ace_type,	.ace-tm .ace_support.ace_class {	color: rgb(109, 121, 222);	}	.ace-tm .ace_keyword.ace_operator {	color: rgb(104, 118, 135);	}	.ace-tm .ace_string {	color: rgb(3, 106, 7);	}	.ace-tm .ace_comment {	color: rgb(76, 136, 107);	}	.ace-tm .ace_comment.ace_doc {	color: rgb(0, 102, 255);	}	.ace-tm .ace_comment.ace_doc.ace_tag {	color: rgb(128, 159, 191);	}	.ace-tm .ace_constant.ace_numeric {	color: rgb(0, 0, 205);	}	.ace-tm .ace_variable {	color: rgb(49, 132, 149);	}	.ace-tm .ace_xml-pe {	color: rgb(104, 104, 91);	}	.ace-tm .ace_entity.ace_name.ace_function {	color: #0000A2;	}	.ace-tm .ace_heading {	color: rgb(12, 7, 255);	}	.ace-tm .ace_list {	color:rgb(185, 6, 144);	}	.ace-tm .ace_meta.ace_tag {	color:rgb(0, 22, 142);	}	.ace-tm .ace_string.ace_regex {	color: rgb(255, 0, 0)	}	.ace-tm .ace_marker-layer .ace_selection {	background: rgb(181, 213, 255);	}	.ace-tm.ace_multiselect .ace_selection.ace_start {	box-shadow: 0 0 3px 0px white;	}	.ace-tm .ace_marker-layer .ace_step {	background: rgb(252, 255, 0);	}	.ace-tm .ace_marker-layer .ace_stack {	background: rgb(164, 229, 101);	}	.ace-tm .ace_marker-layer .ace_bracket {	margin: -1px 0 0 -1px;	border: 1px solid rgb(192, 192, 192);	}	.ace-tm .ace_marker-layer .ace_active-line {	background: rgba(0, 0, 0, 0.07);	}	.ace-tm .ace_gutter-active-line {	background-color : #dcdcdc;	}	.ace-tm .ace_marker-layer .ace_selected-word {	background: rgb(250, 250, 255);	border: 1px solid rgb(200, 200, 250);	}	.ace-tm .ace_indent-guide {	background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;	}	',D.$id="ace/theme/textmate";var k=a("../lib/dom");k.importCssString(D.cssText,D.cssClass)}),ace.define("ace/line_widgets",["require","exports","module","ace/lib/dom"],function(a,D,z){var k=a("./lib/dom");function A(h){this.session=h,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}(function(){this.getRowLength=function(h){var s;return this.lineWidgets?s=this.lineWidgets[h]&&this.lineWidgets[h].rowCount||0:s=0,!this.$useWrapMode||!this.$wrapData[h]?1+s:this.$wrapData[h].length+1+s},this.$getWidgetScreenLength=function(){var h=0;return this.lineWidgets.forEach(function(s){s&&s.rowCount&&!s.hidden&&(h+=s.rowCount)}),h},this.$onChangeEditor=function(h){this.attach(h.editor)},this.attach=function(h){h&&h.widgetManager&&h.widgetManager!=this&&h.widgetManager.detach(),this.editor!=h&&(this.detach(),this.editor=h,h&&(h.widgetManager=this,h.renderer.on("beforeRender",this.measureWidgets),h.renderer.on("afterRender",this.renderWidgets)))},this.detach=function(h){var s=this.editor;if(s){this.editor=null,s.widgetManager=null,s.renderer.off("beforeRender",this.measureWidgets),s.renderer.off("afterRender",this.renderWidgets);var l=this.session.lineWidgets;l&&l.forEach(function(t){t&&t.el&&t.el.parentNode&&(t._inDocument=!1,t.el.parentNode.removeChild(t.el))})}},this.updateOnFold=function(h,s){var l=s.lineWidgets;if(!(!l||!h.action)){for(var t=h.data,e=t.start.row,r=t.end.row,n=h.action=="add",i=e+1;i<r;i++)l[i]&&(l[i].hidden=n);l[r]&&(n?l[e]?l[r].hidden=n:l[e]=l[r]:(l[e]==l[r]&&(l[e]=void 0),l[r].hidden=n))}},this.updateOnChange=function(h){var s=this.session.lineWidgets;if(s){var l=h.start.row,t=h.end.row-l;if(t!==0)if(h.action=="remove"){var e=s.splice(l+1,t);!s[l]&&e[e.length-1]&&(s[l]=e.pop()),e.forEach(function(n){n&&this.removeLineWidget(n)},this),this.$updateRows()}else{var r=new Array(t);s[l]&&s[l].column!=null&&h.start.column>s[l].column&&l++,r.unshift(l,0),s.splice.apply(s,r),this.$updateRows()}}},this.$updateRows=function(){var h=this.session.lineWidgets;if(h){var s=!0;h.forEach(function(l,t){if(l)for(s=!1,l.row=t;l.$oldWidget;)l.$oldWidget.row=t,l=l.$oldWidget}),s&&(this.session.lineWidgets=null)}},this.$registerLineWidget=function(h){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var s=this.session.lineWidgets[h.row];return s&&(h.$oldWidget=s,s.el&&s.el.parentNode&&(s.el.parentNode.removeChild(s.el),s._inDocument=!1)),this.session.lineWidgets[h.row]=h,h},this.addLineWidget=function(h){if(this.$registerLineWidget(h),h.session=this.session,!this.editor)return h;var s=this.editor.renderer;h.html&&!h.el&&(h.el=k.createElement("div"),h.el.innerHTML=h.html),h.el&&(k.addCssClass(h.el,"ace_lineWidgetContainer"),h.el.style.position="absolute",h.el.style.zIndex=5,s.container.appendChild(h.el),h._inDocument=!0,h.coverGutter||(h.el.style.zIndex=3),h.pixelHeight==null&&(h.pixelHeight=h.el.offsetHeight)),h.rowCount==null&&(h.rowCount=h.pixelHeight/s.layerConfig.lineHeight);var l=this.session.getFoldAt(h.row,0);if(h.$fold=l,l){var t=this.session.lineWidgets;h.row==l.end.row&&!t[l.start.row]?t[l.start.row]=h:h.hidden=!0}return this.session._emit("changeFold",{data:{start:{row:h.row}}}),this.$updateRows(),this.renderWidgets(null,s),this.onWidgetChanged(h),h},this.removeLineWidget=function(h){if(h._inDocument=!1,h.session=null,h.el&&h.el.parentNode&&h.el.parentNode.removeChild(h.el),h.editor&&h.editor.destroy)try{h.editor.destroy()}catch{}if(this.session.lineWidgets){var s=this.session.lineWidgets[h.row];if(s==h)this.session.lineWidgets[h.row]=h.$oldWidget,h.$oldWidget&&this.onWidgetChanged(h.$oldWidget);else for(;s;){if(s.$oldWidget==h){s.$oldWidget=h.$oldWidget;break}s=s.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:h.row}}}),this.$updateRows()},this.getWidgetsAtRow=function(h){for(var s=this.session.lineWidgets,l=s&&s[h],t=[];l;)t.push(l),l=l.$oldWidget;return t},this.onWidgetChanged=function(h){this.session._changedWidgets.push(h),this.editor&&this.editor.renderer.updateFull()},this.measureWidgets=function(h,s){var l=this.session._changedWidgets,t=s.layerConfig;if(!(!l||!l.length)){for(var e=1/0,r=0;r<l.length;r++){var n=l[r];if(!(!n||!n.el)&&n.session==this.session){if(!n._inDocument){if(this.session.lineWidgets[n.row]!=n)continue;n._inDocument=!0,s.container.appendChild(n.el)}n.h=n.el.offsetHeight,n.fixedWidth||(n.w=n.el.offsetWidth,n.screenWidth=Math.ceil(n.w/t.characterWidth));var i=n.h/t.lineHeight;n.coverLine&&(i-=this.session.getRowLineCount(n.row),i<0&&(i=0)),n.rowCount!=i&&(n.rowCount=i,n.row<e&&(e=n.row))}}e!=1/0&&(this.session._emit("changeFold",{data:{start:{row:e}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},this.renderWidgets=function(h,s){var l=s.layerConfig,t=this.session.lineWidgets;if(t){for(var e=Math.min(this.firstRow,l.firstRow),r=Math.max(this.lastRow,l.lastRow,t.length);e>0&&!t[e];)e--;this.firstRow=l.firstRow,this.lastRow=l.lastRow,s.$cursorLayer.config=l;for(var n=e;n<=r;n++){var i=t[n];if(!(!i||!i.el)){if(i.hidden){i.el.style.top=-100-(i.pixelHeight||0)+"px";continue}i._inDocument||(i._inDocument=!0,s.container.appendChild(i.el));var o=s.$cursorLayer.getPixelPosition({row:n,column:0},!0).top;i.coverLine||(o+=l.lineHeight*this.session.getRowLineCount(i.row)),i.el.style.top=o-l.offset+"px";var d=i.coverGutter?0:s.gutterWidth;i.fixedWidth||(d-=s.scrollLeft),i.el.style.left=d+"px",i.fullWidth&&i.screenWidth&&(i.el.style.minWidth=l.width+2*l.padding+"px"),i.fixedWidth?i.el.style.right=s.scrollBar.getWidth()+"px":i.el.style.right=""}}}}}).call(A.prototype),D.LineWidgets=A}),ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range"],function(a,D,z){var k=a("../line_widgets").LineWidgets,A=a("../lib/dom"),h=a("../range").Range;function s(t,e,r){for(var n=0,i=t.length-1;n<=i;){var o=n+i>>1,d=r(e,t[o]);if(d>0)n=o+1;else if(d<0)i=o-1;else return o}return-(n+1)}function l(t,e,r){var n=t.getAnnotations().sort(h.comparePoints);if(n.length){var i=s(n,{row:e,column:-1},h.comparePoints);i<0&&(i=-i-1),i>=n.length?i=r>0?0:n.length-1:i===0&&r<0&&(i=n.length-1);var o=n[i];if(!(!o||!r)){if(o.row===e){do o=n[i+=r];while(o&&o.row===e);if(!o)return n.slice()}var d=[];e=o.row;do d[r<0?"unshift":"push"](o),o=n[i+=r];while(o&&o.row==e);return d.length&&d}}}D.showErrorMarker=function(t,e){var r=t.session;r.widgetManager||(r.widgetManager=new k(r),r.widgetManager.attach(t));var n=t.getCursorPosition(),i=n.row,o=r.widgetManager.getWidgetsAtRow(i).filter(function(m){return m.type=="errorMarker"})[0];o?o.destroy():i-=e;var d=l(r,i,e),v;if(d){var _=d[0];n.column=(_.pos&&typeof _.column!="number"?_.pos.sc:_.column)||0,n.row=_.row,v=t.renderer.$gutterLayer.$annotations[n.row]}else{if(o)return;v={text:["Looks good!"],className:"ace_ok"}}t.session.unfold(n.row),t.selection.moveToPosition(n);var C={row:n.row,fixedWidth:!0,coverGutter:!0,el:A.createElement("div"),type:"errorMarker"},$=C.el.appendChild(A.createElement("div")),c=C.el.appendChild(A.createElement("div"));c.className="error_widget_arrow "+v.className;var g=t.renderer.$cursorLayer.getPixelPosition(n).left;c.style.left=g+t.renderer.gutterWidth-5+"px",C.el.className="error_widget_wrapper",$.className="error_widget "+v.className,$.innerHTML=v.text.join("<br>"),$.appendChild(A.createElement("div"));var E=function(m,p,f){if(p===0&&(f==="esc"||f==="return"))return C.destroy(),{command:"null"}};C.destroy=function(){t.$mouseHandler.isMousePressed||(t.keyBinding.removeKeyboardHandler(E),r.widgetManager.removeLineWidget(C),t.off("changeSelection",C.destroy),t.off("changeSession",C.destroy),t.off("mouseup",C.destroy),t.off("change",C.destroy))},t.keyBinding.addKeyboardHandler(E),t.on("changeSelection",C.destroy),t.on("changeSession",C.destroy),t.on("mouseup",C.destroy),t.on("change",C.destroy),t.session.widgetManager.addLineWidget(C),C.el.onmousedown=t.focus.bind(t),t.renderer.scrollCursorIntoView(null,.5,{bottom:C.el.offsetHeight})},A.importCssString("	    .error_widget_wrapper {	        background: inherit;	        color: inherit;	        border:none	    }	    .error_widget {	        border-top: solid 2px;	        border-bottom: solid 2px;	        margin: 5px 0;	        padding: 10px 40px;	        white-space: pre-wrap;	    }	    .error_widget.ace_error, .error_widget_arrow.ace_error{	        border-color: #ff5a5a	    }	    .error_widget.ace_warning, .error_widget_arrow.ace_warning{	        border-color: #F1D817	    }	    .error_widget.ace_info, .error_widget_arrow.ace_info{	        border-color: #5a5a5a	    }	    .error_widget.ace_ok, .error_widget_arrow.ace_ok{	        border-color: #5aaa5a	    }	    .error_widget_arrow {	        position: absolute;	        border: solid 5px;	        border-top-color: transparent!important;	        border-right-color: transparent!important;	        border-left-color: transparent!important;	        top: -5px;	    }	","")}),ace.define("ace/ace",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/dom","ace/lib/event","ace/range","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config"],function(a,D,z){a("./lib/fixoldbrowsers");var k=a("./lib/dom"),A=a("./lib/event"),h=a("./range").Range,s=a("./editor").Editor,l=a("./edit_session").EditSession,t=a("./undomanager").UndoManager,e=a("./virtual_renderer").VirtualRenderer;a("./worker/worker_client"),a("./keyboard/hash_handler"),a("./placeholder"),a("./multi_select"),a("./mode/folding/fold_mode"),a("./theme/textmate"),a("./ext/error_marker"),D.config=a("./config"),D.require=a,D.edit=function(r,n){if(typeof r=="string"){var i=r;if(r=document.getElementById(i),!r)throw new Error("ace.edit can't find div #"+i)}if(r&&r.env&&r.env.editor instanceof s)return r.env.editor;var o="";if(r&&/input|textarea/i.test(r.tagName)){var d=r;o=d.value,r=k.createElement("pre"),d.parentNode.replaceChild(r,d)}else r&&(o=r.textContent,r.innerHTML="");var v=D.createEditSession(o),_=new s(new e(r),v,n),C={document:v,editor:_,onResize:_.resize.bind(_,null)};return d&&(C.textarea=d),A.addListener(window,"resize",C.onResize),_.on("destroy",function(){A.removeListener(window,"resize",C.onResize),C.editor.container.env=null}),_.container.env=_.env=C,_},D.createEditSession=function(r,n){var i=new l(r,n);return i.setUndoManager(new t),i},D.Range=h,D.Editor=s,D.EditSession=l,D.UndoManager=t,D.VirtualRenderer=e,D.version=D.config.version}),function(){ace.require(["ace/ace"],function(a){a&&(a.config.init(!0),a.define=ace.define),window.ace||(window.ace=a);for(var D in a)a.hasOwnProperty(D)&&(window.ace[D]=a[D]);window.ace.default=window.ace,q&&(q.exports=window.ace)})}()})(Hn);var on=Hn.exports;const Hi=fn(on),Wr=ti({__proto__:null,default:Hi},[on]);var Gi={exports:{}};(function(q,X){ace.define("ace/mode/coffee_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(a,D,z){var k=a("../lib/oop"),A=a("./text_highlight_rules").TextHighlightRules;k.inherits(h,A);function h(){var s="[$A-Za-z_\\x7f-\\uffff][$\\w\\x7f-\\uffff]*",l="this|throw|then|try|typeof|super|switch|return|break|by|continue|catch|class|in|instanceof|is|isnt|if|else|extends|for|own|finally|function|while|when|new|no|not|delete|debugger|do|loop|of|off|or|on|unless|until|and|yes|yield|export|import|default",t="true|false|null|undefined|NaN|Infinity",e="case|const|function|var|void|with|enum|implements|interface|let|package|private|protected|public|static",r="Array|Boolean|Date|Function|Number|Object|RegExp|ReferenceError|String|Error|EvalError|InternalError|RangeError|ReferenceError|StopIteration|SyntaxError|TypeError|URIError|ArrayBuffer|Float32Array|Float64Array|Int16Array|Int32Array|Int8Array|Uint16Array|Uint32Array|Uint8Array|Uint8ClampedArray",n="Math|JSON|isNaN|isFinite|parseInt|parseFloat|encodeURI|encodeURIComponent|decodeURI|decodeURIComponent|String|",i="window|arguments|prototype|document",o=this.createKeywordMapper({keyword:l,"constant.language":t,"invalid.illegal":e,"language.support.class":r,"language.support.function":n,"variable.language":i},"identifier"),d={token:["paren.lparen","variable.parameter","paren.rparen","text","storage.type"],regex:/(?:(\()((?:"[^")]*?"|'[^')]*?'|\/[^\/)]*?\/|[^()"'\/])*?)(\))(\s*))?([\-=]>)/.source},v=/\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|[0-2][0-7]{0,2}|3[0-6][0-7]?|37[0-7]?|[4-7][0-7]?|.)/;this.$rules={start:[{token:"constant.numeric",regex:"(?:0x[\\da-fA-F]+|(?:\\d+(?:\\.\\d+)?|\\.\\d+)(?:[eE][+-]?\\d+)?)"},{stateName:"qdoc",token:"string",regex:"'''",next:[{token:"string",regex:"'''",next:"start"},{token:"constant.language.escape",regex:v},{defaultToken:"string"}]},{stateName:"qqdoc",token:"string",regex:'"""',next:[{token:"string",regex:'"""',next:"start"},{token:"paren.string",regex:"#{",push:"start"},{token:"constant.language.escape",regex:v},{defaultToken:"string"}]},{stateName:"qstring",token:"string",regex:"'",next:[{token:"string",regex:"'",next:"start"},{token:"constant.language.escape",regex:v},{defaultToken:"string"}]},{stateName:"qqstring",token:"string.start",regex:'"',next:[{token:"string.end",regex:'"',next:"start"},{token:"paren.string",regex:"#{",push:"start"},{token:"constant.language.escape",regex:v},{defaultToken:"string"}]},{stateName:"js",token:"string",regex:"`",next:[{token:"string",regex:"`",next:"start"},{token:"constant.language.escape",regex:v},{defaultToken:"string"}]},{regex:"[{}]",onMatch:function(_,C,$){return this.next="",_=="{"&&$.length?($.unshift("start",C),"paren"):_=="}"&&$.length&&($.shift(),this.next=$.shift()||"",this.next.indexOf("string")!=-1)?"paren.string":"paren"}},{token:"string.regex",regex:"///",next:"heregex"},{token:"string.regex",regex:/(?:\/(?![\s=])[^[\/\n\\]*(?:(?:\\[\s\S]|\[[^\]\n\\]*(?:\\[\s\S][^\]\n\\]*)*])[^[\/\n\\]*)*\/)(?:[imgy]{0,4})(?!\w)/},{token:"comment",regex:"###(?!#)",next:"comment"},{token:"comment",regex:"#.*"},{token:["punctuation.operator","text","identifier"],regex:"(\\.)(\\s*)("+e+")"},{token:"punctuation.operator",regex:"\\.{1,3}"},{token:["keyword","text","language.support.class","text","keyword","text","language.support.class"],regex:"(class)(\\s+)("+s+")(?:(\\s+)(extends)(\\s+)("+s+"))?"},{token:["entity.name.function","text","keyword.operator","text"].concat(d.token),regex:"("+s+")(\\s*)([=:])(\\s*)"+d.regex},d,{token:"variable",regex:"@(?:"+s+")?"},{token:o,regex:s},{token:"punctuation.operator",regex:"\\,|\\."},{token:"storage.type",regex:"[\\-=]>"},{token:"keyword.operator",regex:"(?:[-+*/%<>&|^!?=]=|>>>=?|\\-\\-|\\+\\+|::|&&=|\\|\\|=|<<=|>>=|\\?\\.|\\.{2,3}|[!*+-=><])"},{token:"paren.lparen",regex:"[({[]"},{token:"paren.rparen",regex:"[\\]})]"},{token:"text",regex:"\\s+"}],heregex:[{token:"string.regex",regex:".*?///[imgy]{0,4}",next:"start"},{token:"comment.regex",regex:"\\s+(?:#.*)?"},{token:"string.regex",regex:"\\S+"}],comment:[{token:"comment",regex:"###",next:"start"},{defaultToken:"comment"}]},this.normalizeRules()}D.CoffeeHighlightRules=h}),ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(a,D,z){var k=a("../range").Range,A=function(){};(function(){this.checkOutdent=function(h,s){return/^\s+$/.test(h)?/^\s*\}/.test(s):!1},this.autoOutdent=function(h,s){var l=h.getLine(s),t=l.match(/^(\s*\})/);if(!t)return 0;var e=t[1].length,r=h.findMatchingBracket({row:s,column:e});if(!r||r.row==s)return 0;var n=this.$getIndent(h.getLine(r.row));h.replace(new k(s,0,s,e-1),n)},this.$getIndent=function(h){return h.match(/^\s*/)[0]}}).call(A.prototype),D.MatchingBraceOutdent=A}),ace.define("ace/mode/folding/coffee",["require","exports","module","ace/lib/oop","ace/mode/folding/fold_mode","ace/range"],function(a,D,z){var k=a("../../lib/oop"),A=a("./fold_mode").FoldMode,h=a("../../range").Range,s=D.FoldMode=function(){};k.inherits(s,A),(function(){this.getFoldWidgetRange=function(l,t,e){var r=this.indentationBlock(l,e);if(r)return r;var n=/\S/,i=l.getLine(e),o=i.search(n);if(!(o==-1||i[o]!="#")){for(var d=i.length,v=l.getLength(),_=e,C=e;++e<v;){i=l.getLine(e);var $=i.search(n);if($!=-1){if(i[$]!="#")break;C=e}}if(C>_){var c=l.getLine(C).length;return new h(_,d,C,c)}}},this.getFoldWidget=function(l,t,e){var r=l.getLine(e),n=r.search(/\S/),i=l.getLine(e+1),o=l.getLine(e-1),d=o.search(/\S/),v=i.search(/\S/);if(n==-1)return l.foldWidgets[e-1]=d!=-1&&d<v?"start":"","";if(d==-1){if(n==v&&r[n]=="#"&&i[n]=="#")return l.foldWidgets[e-1]="",l.foldWidgets[e+1]="","start"}else if(d==n&&r[n]=="#"&&o[n]=="#"&&l.getLine(e-2).search(/\S/)==-1)return l.foldWidgets[e-1]="start",l.foldWidgets[e+1]="","";return d!=-1&&d<n?l.foldWidgets[e-1]="start":l.foldWidgets[e-1]="",n<v?"start":""}}).call(s.prototype)}),ace.define("ace/mode/coffee",["require","exports","module","ace/mode/coffee_highlight_rules","ace/mode/matching_brace_outdent","ace/mode/folding/coffee","ace/range","ace/mode/text","ace/worker/worker_client","ace/lib/oop"],function(a,D,z){var k=a("./coffee_highlight_rules").CoffeeHighlightRules,A=a("./matching_brace_outdent").MatchingBraceOutdent,h=a("./folding/coffee").FoldMode;a("../range").Range;var s=a("./text").Mode,l=a("../worker/worker_client").WorkerClient,t=a("../lib/oop");function e(){this.HighlightRules=k,this.$outdent=new A,this.foldingRules=new h}t.inherits(e,s),(function(){var r=/(?:[({[=:]|[-=]>|\b(?:else|try|(?:swi|ca)tch(?:\s+[$A-Za-z_\x7f-\uffff][$\w\x7f-\uffff]*)?|finally))\s*$|^\s*(else\b\s*)?(?:if|for|while|loop)\b(?!.*\bthen\b)/;this.lineCommentStart="#",this.blockComment={start:"###",end:"###"},this.getNextLineIndent=function(n,i,o){var d=this.$getIndent(i),v=this.getTokenizer().getLineTokens(i,n).tokens;return!(v.length&&v[v.length-1].type==="comment")&&n==="start"&&r.test(i)&&(d+=o),d},this.checkOutdent=function(n,i,o){return this.$outdent.checkOutdent(i,o)},this.autoOutdent=function(n,i,o){this.$outdent.autoOutdent(i,o)},this.createWorker=function(n){var i=new l(["ace"],"ace/mode/coffee_worker","Worker");return i.attachToDocument(n.getDocument()),i.on("annotate",function(o){n.setAnnotations(o.data)}),i.on("terminate",function(){n.clearAnnotations()}),i},this.$id="ace/mode/coffee",this.snippetFileId="ace/snippets/coffee"}).call(e.prototype),D.Mode=e}),function(){ace.require(["ace/mode/coffee"],function(a){q&&(q.exports=a)})}()})(Gi);var Vi={exports:{}};(function(q,X){ace.define("ace/theme/tomorrow",["require","exports","module","ace/lib/dom"],function(a,D,z){D.isDark=!1,D.cssClass="ace-tomorrow",D.cssText=".ace-tomorrow .ace_gutter {	background: #f6f6f6;	color: #4D4D4C	}	.ace-tomorrow .ace_print-margin {	width: 1px;	background: #f6f6f6	}	.ace-tomorrow {	background-color: #FFFFFF;	color: #4D4D4C	}	.ace-tomorrow .ace_cursor {	color: #AEAFAD	}	.ace-tomorrow .ace_marker-layer .ace_selection {	background: #D6D6D6	}	.ace-tomorrow.ace_multiselect .ace_selection.ace_start {	box-shadow: 0 0 3px 0px #FFFFFF;	}	.ace-tomorrow .ace_marker-layer .ace_step {	background: rgb(255, 255, 0)	}	.ace-tomorrow .ace_marker-layer .ace_bracket {	margin: -1px 0 0 -1px;	border: 1px solid #D1D1D1	}	.ace-tomorrow .ace_marker-layer .ace_active-line {	background: #EFEFEF	}	.ace-tomorrow .ace_gutter-active-line {	background-color : #dcdcdc	}	.ace-tomorrow .ace_marker-layer .ace_selected-word {	border: 1px solid #D6D6D6	}	.ace-tomorrow .ace_invisible {	color: #D1D1D1	}	.ace-tomorrow .ace_keyword,	.ace-tomorrow .ace_meta,	.ace-tomorrow .ace_storage,	.ace-tomorrow .ace_storage.ace_type,	.ace-tomorrow .ace_support.ace_type {	color: #8959A8	}	.ace-tomorrow .ace_keyword.ace_operator {	color: #3E999F	}	.ace-tomorrow .ace_constant.ace_character,	.ace-tomorrow .ace_constant.ace_language,	.ace-tomorrow .ace_constant.ace_numeric,	.ace-tomorrow .ace_keyword.ace_other.ace_unit,	.ace-tomorrow .ace_support.ace_constant,	.ace-tomorrow .ace_variable.ace_parameter {	color: #F5871F	}	.ace-tomorrow .ace_constant.ace_other {	color: #666969	}	.ace-tomorrow .ace_invalid {	color: #FFFFFF;	background-color: #C82829	}	.ace-tomorrow .ace_invalid.ace_deprecated {	color: #FFFFFF;	background-color: #8959A8	}	.ace-tomorrow .ace_fold {	background-color: #4271AE;	border-color: #4D4D4C	}	.ace-tomorrow .ace_entity.ace_name.ace_function,	.ace-tomorrow .ace_support.ace_function,	.ace-tomorrow .ace_variable {	color: #4271AE	}	.ace-tomorrow .ace_support.ace_class,	.ace-tomorrow .ace_support.ace_type {	color: #C99E00	}	.ace-tomorrow .ace_heading,	.ace-tomorrow .ace_markup.ace_heading,	.ace-tomorrow .ace_string {	color: #718C00	}	.ace-tomorrow .ace_entity.ace_name.ace_tag,	.ace-tomorrow .ace_entity.ace_other.ace_attribute-name,	.ace-tomorrow .ace_meta.ace_tag,	.ace-tomorrow .ace_string.ace_regexp,	.ace-tomorrow .ace_variable {	color: #C82829	}	.ace-tomorrow .ace_comment {	color: #8E908C	}	.ace-tomorrow .ace_indent-guide {	background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bdu3f/BwAlfgctduB85QAAAABJRU5ErkJggg==) right repeat-y	}";var k=a("../lib/dom");k.importCssString(D.cssText,D.cssClass)}),function(){ace.require(["ace/theme/tomorrow"],function(a){q&&(q.exports=a)})}()})(Vi);on.config.set("basePath","//rgbds-live//assets/ace");globalThis.ace=Wr;function zr(q){return new Promise((X,a)=>{on.require([q],D=>{D||a(Error(`Could not load ${q}`)),X(D)})})}const _t={_HW:{description:"Start of the hardware IO registers.",value:"$FF00->$FF80"},_VRAM:{description:"VRAM Memory",value:"$8000->$9FFF"},_SCRN0:{description:"Background 0 Memory",value:"$9800->$9BFF"},_SCRN1:{description:"Background 1 Memory",value:"$9C00->$9FFF"},_SRAM:{description:"Card SRAM",value:"$A000->$BFFF"},_RAM:{description:"WRAM Memory",value:"$C000->$DFFF"},_OAMRAM:{description:"OAM Memory",value:"$FE00->$FE9F",flags:{OAMF_PRI:{value:"%10000000",description:"Flag to set on OAM attribute byte to make the background colors 1-3 to have priority over the sprite."},OAMF_YFLIP:{value:"%01000000",description:"Flag to set on OAM attribute byte to make the sprite flip in the Y direction"},OAMF_XFLIP:{value:"%00100000",description:"Flag to set on OAM attribute byte to make the sprite flip in the X direction"},OAMF_PAL0:{value:"%00000000",description:"Flag to set on OAM attribute byte to make the sprite use OBP0 in DMG (non-color) mode."},OAMF_PAL1:{value:"%00010000",description:"Flag to set on OAM attribute byte to make the sprite use OBP1 in DMG (non-color) mode."},OAMF_BANK0:{value:"%00000000",description:"Flag to set on OAM attribute byte to use a sprite graphics from VRAM Bank 0 in GBC mode."},OAMF_BANK1:{value:"%00001000",description:"Flag to set on OAM attribute byte to use a sprite graphics from VRAM Bank 1 in GBC mode."},OAMF_PALMASK:{value:"%00000111",description:"Mask of the color sprite palette index in the OAM attribute byte. In GBC mode."},OAMB_PRI:{value:"7",description:"Bit number to set on OAM attribute byte to make the background colors 1-3 to have priority over the sprite."},OAMB_YFLIP:{value:"6",description:"Bit number to set on OAM attribute byte to make the sprite flip in the Y direction."},OAMB_XFLIP:{value:"5",description:"Bit number to set on OAM attribute byte to make the sprite flip in the X direction."},OAMB_PAL1:{value:"4",description:"Bit number to set on OAM attribute byte to make the sprite use OBP1 in DMG (non-color) mode."},OAMB_BANK1:{value:"3",description:"Bit number to set on OAM attribute byte to use a sprite graphics from VRAM Bank 1 in GBC mode."}}},_AUD3WAVERAM:{description:"WAVE Channel Memory",value:"$FF30->$FF3F"},_HRAM:{description:"HRAM Memory",value:"$FF80->$FFFE"},rP1:{description:"Register for reading joy pad info. (R/W)",value:"$FF00",flags:{P1F_5:{value:"%00100000",description:"P15 out port, set to 0 to get buttons"},P1F_4:{value:"%00010000",description:"P14 out port, set to 0 to get dpad"},P1F_3:{value:"%00001000",description:"P13 in port"},P1F_2:{value:"%00000100",description:"P12 in port"},P1F_1:{value:"%00000010",description:"P11 in port"},P1F_0:{value:"%00000001",description:"P10 in port"},P1F_GET_DPAD:{description:"Value to load in rP1 to enable the reading of the DPad inputs."},P1F_GET_BTN:{description:"Value to load in rP1 to enable the reading of the A/B/Start/Select inputs."},P1F_GET_NONE:{description:"Value to load in rP1 to disable the reading of input buttons."}}},rSB:{description:"Serial Transfer Data (R/W)",value:"$FF01"},rSC:{description:"Serial I/O Control (R/W)",value:"$FF02"},rDIV:{description:`Divider register (R/W)
Incremented at 16384Hz or 32768Hz depending on the CPU speed.
Write any value to reset to zero.`,value:"$FF04"},rTIMA:{description:"Timer counter (R/W)",value:"$FF05"},rTMA:{description:"Timer modulo (R/W)",value:"$FF06"},rTAC:{description:"Timer control (R/W)",value:"$FF07",flags:{TACF_START:{value:"%00000100"},TACF_STOP:{value:"%00000000"},TACF_4KHZ:{value:"%00000000"},TACF_16KHZ:{value:"%00000011"},TACF_65KHZ:{value:"%00000010"},TACF_262KHZ:{value:"%00000001"}}},rIF:{description:`Interrupt Flag (R/W)
Contains the currently 'ready' interrupts, set by hardware, cleared when interrupt is executed.
Generally only written to zero to clear pending interrupts before enabling interrupts.`,value:"$FF0F",flags:"rIE"},rLCDC:{description:"LCD Control (R/W)",value:"$FF40",flags:{LCDCF_OFF:{value:"%00000000",description:"LCD Control Operation"},LCDCF_ON:{value:"%10000000",description:"LCD Control Operation"},LCDCF_WIN9800:{value:"%00000000",description:"Window Tile Map Display Select"},LCDCF_WIN9C00:{value:"%01000000",description:"Window Tile Map Display Select"},LCDCF_WINOFF:{value:"%00000000",description:"Window Display"},LCDCF_WINON:{value:"%00100000",description:"Window Display"},LCDCF_BG8800:{value:"%00000000",description:"BG & Window Tile Data Select"},LCDCF_BG8000:{value:"%00010000",description:"BG & Window Tile Data Select"},LCDCF_BG9800:{value:"%00000000",description:"BG Tile Map Display Select"},LCDCF_BG9C00:{value:"%00001000",description:"BG Tile Map Display Select"},LCDCF_OBJ8:{value:"%00000000",description:"OBJ Construction"},LCDCF_OBJ16:{value:"%00000100",description:"OBJ Construction"},LCDCF_OBJOFF:{value:"%00000000",description:"OBJ Display"},LCDCF_OBJON:{value:"%00000010",description:"OBJ Display"},LCDCF_BGOFF:{value:"%00000000",description:"BG Display"},LCDCF_BGON:{value:"%00000001",description:"BG Display"}}},rSTAT:{description:"LCDC Status (R/W)",value:"$FF41",flags:{STATF_LYC:{value:"%01000000",description:"LYC=LY Coincidence interrupt enabled (writable)"},STATF_MODE10:{value:"%00100000",description:"Mode 10 OAM STAT interrupt enabled (writable)"},STATF_MODE01:{value:"%00010000",description:"Mode 01 V-Blank STAT interrupt enabled (writable)"},STATF_MODE00:{value:"%00001000",description:"Mode 00 H-Blank STAT interrupt enabled (writable)"},STATF_LYCF:{value:"%00000100",description:"Coincidence Flag"},STATF_HB:{value:"%00000000",description:"H-Blank"},STATF_VB:{value:"%00000001",description:"V-Blank"},STATF_OAM:{value:"%00000010",description:"OAM-RAM is used by system"},STATF_LCD:{value:"%00000011",description:"Both OAM and VRAM used by system"},STATF_BUSY:{value:"%00000010",description:"When set, VRAM access is unsafe"}}},rSCY:{description:"Scroll Y (R/W)",value:"$FF42"},rSCX:{description:"Scroll X (R/W)",value:"$FF43"},rLY:{description:"LCDC Y-Coordinate (R)<br>Values range from 0->153. 144->153 is the VBlank period.",value:"$FF44"},rLYC:{description:"LY Compare (R/W)<br>When LY==LYC, STATF_LYCF will be set in STAT",value:"$FF45"},rDMA:{description:"DMA Transfer and Start Address (W)",value:"$FF46"},rBGP:{description:"BG Palette Data (W)<br>Bit 7-6 - Intensity for %11<br>Bit 5-4 - Intensity for %10<br>Bit 3-2 - Intensity for %01<br>Bit 1-0 - Intensity for %00",value:"$FF47"},rOBP0:{description:"Object Palette 0 Data (W)<br>Bit 7-6 - Intensity for %11<br>Bit 5-4 - Intensity for %10<br>Bit 3-2 - Intensity for %01<br>Bit 1-0 - Ignored, %00 is transparent",value:"$FF48"},rOBP1:{description:"Object Palette 1 Data (W)<br>Bit 7-6 - Intensity for %11<br>Bit 5-4 - Intensity for %10<br>Bit 3-2 - Intensity for %01<br>Bit 1-0 - Ignored, %00 is transparent",value:"$FF49"},rWY:{description:"Window Y Position (R/W)<br>0 <= WY <= 143",value:"$FF4A"},rWX:{description:"Window X Position (R/W)<br>7 <EQU WX <EQU 166",value:"$FF4B"},rKEY1:{description:"Select CPU Speed (R/W) GBC Only!<br>Bit 7 contains current speed: 1 is double speed.<br>Write bit 0 to 1 and execute a STOP instruction to switch speed.",value:"$FF4D"},rVBK:{description:"Select Video RAM Bank (R/W) GBC Only!",value:"$FF4F"},rHDMA1:{description:"Horizontal Blanking, General Purpose DMA (W) GBC Only!",value:"$FF51"},rHDMA2:{description:"Horizontal Blanking, General Purpose DMA (W) GBC Only!",value:"$FF52"},rHDMA3:{description:"Horizontal Blanking, General Purpose DMA (W) GBC Only!",value:"$FF53"},rHDMA4:{description:"Horizontal Blanking, General Purpose DMA (W) GBC Only!",value:"$FF54"},rHDMA5:{description:"Horizontal Blanking, General Purpose DMA (R/W) GBC Only!",value:"$FF55"},rRP:{description:"Infrared Communications Port (R/W) GBC Only!",value:"$FF56"},rBCPS:{description:"Background Color Palette Specification (R/W) GBC Only!",value:"$FF68"},rBCPD:{description:"Background Color Palette Data (R/W) GBC Only!",value:"$FF69"},rOCPS:{description:"Object Color Palette Specification (R/W) GBC Only!",value:"$FF6A"},rOCPD:{description:"Object Color Palette Data (R/W) GBC Only!",value:"$FF6B"},rSVBK:{description:"Select Main RAM Bank (R/W) GBC Only!",value:"$FF70"},rIE:{description:"Interrupt Enable (R/W)",value:"$FFFF",flags:{IEF_HILO:{value:"%00010000",description:"Transition from High to Low of Pin number P10-P13"},IEF_SERIAL:{value:"%00001000",description:"Serial I/O transfer end"},IEF_TIMER:{value:"%00000100",description:"Timer Overflow"},IEF_LCDC:{value:"%00000010",description:"LCDC (see STAT)"},IEF_VBLANK:{value:"%00000001",description:"V-Blank"}}},rNR50:{description:"Channel control / ON-OFF / Volume (R/W)<br>Bit 7   - Vin->SO2 ON/OFF (Vin??)<br>Bit 6-4 - SO2 output level (volume) (# 0-7)<br>Bit 3   - Vin->SO1 ON/OFF (Vin??)<br>Bit 2-0 - SO1 output level (volume) (# 0-7)",value:"$FF24",alias:"rAUDVOL"},rNR51:{description:"Selection of Sound output terminal (R/W)<br>Bit 7   - Output sound 4 to SO2 terminal<br>Bit 6   - Output sound 3 to SO2 terminal<br>Bit 5   - Output sound 2 to SO2 terminal<br>Bit 4   - Output sound 1 to SO2 terminal<br>Bit 3   - Output sound 4 to SO1 terminal<br>Bit 2   - Output sound 3 to SO1 terminal<br>Bit 1   - Output sound 2 to SO1 terminal<br>Bit 0   - Output sound 0 to SO1 terminal",value:"$FF25",alias:"rAUDTERM",flags:{AUDTERM_4_LEFT:{description:"%10000000"},AUDTERM_3_LEFT:{description:"%01000000"},AUDTERM_2_LEFT:{description:"%00100000"},AUDTERM_1_LEFT:{description:"%00010000"},AUDTERM_4_RIGHT:{description:"%00001000"},AUDTERM_3_RIGHT:{description:"%00000100"},AUDTERM_2_RIGHT:{description:"%00000010"},AUDTERM_1_RIGHT:{description:"%00000001"}}},rNR52:{description:"Sound on/off (R/W)<br>Bit 7   - All sound on/off (sets all audio regs to 0!)<br>Bit 3   - Sound 4 ON flag (read only)<br>Bit 2   - Sound 3 ON flag (read only)<br>Bit 1   - Sound 2 ON flag (read only)<br>Bit 0   - Sound 1 ON flag (read only)",value:"$FF26",alias:"rAUDENA",flags:{AUDENA_ON:{description:"%10000000"},AUDENA_OFF:{description:"%00000000  ; sets all audio regs to 0!"}}},rNR10:{description:"Sweep register (R/W)<br>Bit 6-4 - Sweep Time<br>Bit 3   - Sweep Increase/Decrease<br>&nbsp; 0: Addition<br>&nbsp; 1: Subtraction<br>Bit 2-0 - Number of sweep shift (# 0-7)<br>Sweep Time: (n*7.8ms)",value:"$FF10",alias:"rAUD1SWEEP",flags:{AUD1SWEEP_UP:{description:"%00000000"},AUD1SWEEP_DOWN:{description:"%00001000"}}},rNR11:{description:"Sound length/Wave pattern duty (R/W)<br>Bit 7-6 - Wave Pattern Duty (00:12.5% 01:25% 10:50% 11:75%)<br>Bit 5-0 - Sound length data (# 0-63)",value:"$FF11",alias:"rAUD1LEN",flags:{AUDLEN_DUTY_12_5:{value:"%00000000",description:"12.5%"},AUDLEN_DUTY_25:{value:"%01000000",description:"25%"},AUDLEN_DUTY_50:{value:"%10000000",description:"50%"},AUDLEN_DUTY_75:{value:"%11000000",description:"75%"}}},rNR12:{description:`Envelope (R/W)
Bit 7-4 - Initial value of envelope
Bit 3   - Envelope UP/DOWN
        0: Decrease
        1: Range of increase
Bit 2-0 - Number of envelope sweep (# 0-7)`,value:"$FF12",alias:"rAUD1ENV",flags:{AUDENV_UP:{value:"%00001000"},AUDENV_DOWN:{value:"%00000000"}}},rNR13:{description:"Frequency lo (W)",value:"$FF13",alias:"rAUD1LOW"},rNR14:{description:"Frequency hi (W)",value:"$FF14",alias:"rAUD1HIGH",flags:{AUDHIGH_RESTART:{description:"%10000000"},AUDHIGH_LENGTH_ON:{description:"%01000000"},AUDHIGH_LENGTH_OFF:{description:"%00000000"}}},rNR21:{description:"Sound Length; Wave Pattern Duty (R/W)",value:"$FF16",alias:"rAUD2LEN",flags:"rAUD1LEN"},rNR22:{description:"Envelope (R/W)",value:"$FF17",alias:"rAUD2ENV",flags:"rAUD1ENV"},rNR23:{description:"Frequency lo (W)",value:"$FF18",alias:"rAUD2LOW"},rNR24:{description:"Frequency hi (W)",value:"$FF19",alias:"rAUD2HIGH",flags:"rAUD1HIGH"},rNR30:{description:"Sound on/off (R/W)",value:"$FF1A",alias:"rAUD3ENA"},rNR31:{description:"Sound length (R/W)",value:"$FF1B",alias:"rAUD3LEN"},rNR32:{description:"Select output level",value:"$FF1C",alias:"rAUD3LEVEL"},rNR33:{description:"Frequency lo (W)",value:"$FF1D",alias:"rAUD3LOW"},rNR34:{description:"Frequency hi (W)",value:"$FF1E",alias:"rAUD3HIGH",flags:"rAUD1HIGH"},rNR41:{description:"Sound length (R/W)",value:"$FF20",alias:"rAUD4LEN"},rNR42:{description:"Envelope (R/W)",value:"$FF21",alias:"rAUD4ENV",flags:"rAUD1ENV"},rNR43:{description:"Polynomial counter (R/W)",value:"$FF22",alias:"rAUD4POLY"},rNR44:{description:"",value:"$FF23",alias:"rAUD4GO"},rPCM12:{description:"Sound channel 1&2 PCM amplitude (R) GBC Only!",value:"$FF76"},rPCM34:{description:"Sound channel 3&4 PCM amplitude (R) GBC Only!",value:"$FF77"},CART_COMPATIBLE_DMG:{description:"Store at $0143 to indicate DMG cartridge. ($00)"},CART_COMPATIBLE_DMG_GBC:{description:"Store at $0143 to indicate DMG and GBC compatible cartridge. ($80)"},CART_COMPATIBLE_GBC:{description:"Store at $0143 to indicate GBC compatible cartridge. ($C0)"},CART_ROM:{description:"Store at $0147 to cart type. ($00)"},CART_ROM_MBC1:{description:"Store at $0147 to cart type. ($01)"},CART_ROM_MBC1_RAM:{description:"Store at $0147 to cart type. ($02)"},CART_ROM_MBC1_RAM_BAT:{description:"Store at $0147 to cart type. ($03)"},CART_ROM_MBC2:{description:"Store at $0147 to cart type. ($05)"},CART_ROM_MBC2_BAT:{description:"Store at $0147 to cart type. ($06)"},CART_ROM_RAM:{description:"Store at $0147 to cart type. ($08)"},CART_ROM_RAM_BAT:{description:"Store at $0147 to cart type. ($09)"},CART_ROM_MBC3_BAT_RTC:{description:"Store at $0147 to cart type. ($0F)"},CART_ROM_MBC3_RAM_BAT_RTC:{description:"Store at $0147 to cart type. ($10)"},CART_ROM_MBC3:{description:"Store at $0147 to cart type. ($11)"},CART_ROM_MBC3_RAM:{description:"Store at $0147 to cart type. ($12)"},CART_ROM_MBC3_RAM_BAT:{description:"Store at $0147 to cart type. ($13)"},CART_ROM_MBC5:{description:"Store at $0147 to cart type. ($19)"},CART_ROM_MBC5_BAT:{description:"Store at $0147 to cart type. ($1A)"},CART_ROM_MBC5_RAM_BAT:{description:"Store at $0147 to cart type. ($1B)"},CART_ROM_MBC5_RUMBLE:{description:"Store at $0147 to cart type. ($1C)"},CART_ROM_MBC5_RAM_RUMBLE:{description:"Store at $0147 to cart type. ($1D)"},CART_ROM_MBC5_RAM_BAT_RUMBLE:{description:"Store at $0147 to cart type. ($1E)"},CART_ROM_MBC7_RAM_BAT_GYRO:{description:"Store at $0147 to cart type. ($22)"},CART_ROM_POCKET_CAMERA:{description:"Store at $0147 to cart type. ($FC)"},CART_ROM_256K:{description:"Store at $0148 to indicate the number of ROM banks: 2 banks"},CART_ROM_512K:{description:"Store at $0148 to indicate the number of ROM banks: 4 banks"},CART_ROM_1M:{description:"Store at $0148 to indicate the number of ROM banks: 8 banks"},CART_ROM_2M:{description:"Store at $0148 to indicate the number of ROM banks: 16 banks"},CART_ROM_4M:{description:"Store at $0148 to indicate the number of ROM banks: 32 banks"},CART_ROM_8M:{description:"Store at $0148 to indicate the number of ROM banks: 64 banks"},CART_ROM_16M:{description:"Store at $0148 to indicate the number of ROM banks: 128 banks"},CART_ROM_32M:{description:"Store at $0148 to indicate the number of ROM banks: 256 banks"},CART_ROM_64M:{description:"Store at $0148 to indicate the number of ROM banks: 512 banks"},CART_RAM_NONE:{description:"Store at $0149 to indicate the amount of SRAM: No SRAM"},CART_RAM_16K:{description:"Store at $0149 to indicate the amount of SRAM: 2 KiloByte, 1 bank"},CART_RAM_64K:{description:"Store at $0149 to indicate the amount of SRAM: 8 KiloByte, 1 bank"},CART_RAM_256K:{description:"Store at $0149 to indicate the amount of SRAM: 32 KiloByte, 4 banks"},CART_RAM_1M:{description:"Store at $0149 to indicate the amount of SRAM: 128 KiloByte, 16 banks"},CART_RAM_ENABLE:{description:"Write this value to $0000 to enable SRAM. ($0A)"},CART_RAM_DISABLE:{description:"Write this value to $0000 to disable SRAM. ($00)"},PADF_DOWN:{description:"$80"},PADF_UP:{description:"$40"},PADF_LEFT:{description:"$20"},PADF_RIGHT:{description:"$10"},PADF_START:{description:"$08"},PADF_SELECT:{description:"$04"},PADF_B:{description:"$02"},PADF_A:{description:"$01"},PADB_DOWN:{description:"$7"},PADB_UP:{description:"$6"},PADB_LEFT:{description:"$5"},PADB_RIGHT:{description:"$4"},PADB_START:{description:"$3"},PADB_SELECT:{description:"$2"},PADB_B:{description:"$1"},PADB_A:{description:"$0"},SCRN_X:{description:"Width of screen in pixels",value:"160"},SCRN_Y:{description:"Height of screen in pixels",value:"144"},SCRN_X_B:{description:"Width of screen in bytes",value:"20"},SCRN_Y_B:{description:"Height of screen in bytes",value:"18"},SCRN_VX:{description:"Virtual width of screen in pixels",value:"256"},SCRN_VY:{description:"Virtual height of screen in pixels",value:"256"},SCRN_VX_B:{description:"Virtual width of screen in bytes",value:"32"},SCRN_VY_B:{description:"Virtual height of screen in bytes",value:"32"}};for(var Wt in _t){if(typeof _t[Wt].flags=="string"&&(_t[Wt].flags=_t[_t[Wt].flags].flags),_t[Wt].flags)for(var Sn in _t[Wt].flags)_t[Sn]=_t[Wt].flags[Sn];_t[Wt].alias&&(_t[_t[Wt].alias]=Object.assign({},_t[Wt]),_t[_t[Wt].alias].alias=Wt)}const{TextHighlightRules:Qi}=await zr("ace/mode/text_highlight_rules"),Ki="\\b(?:"+Object.keys(_t).join("|")+")\\b";class ji extends Qi{constructor(){super(),this.$rules={start:[{token:"keyword.control.assembly",regex:"\\b(?:ADC|ADD|AND|CP|DEC|INC|OR|SBC|SUB|XOR|BIT|RES|SET|SWAP|RL|RLA|RLC|RLCA|RR|RRA|RRC|RRCA|SLA|SRA|SRL|LD|LDH|CALL|JP|JR|RET|RETI|RST|POP|PUSH|CCF|CPL|DAA|DI|EI|HALT|NOP|SCF|STOP)\\b",caseInsensitive:!0},{token:"keyword.control.sections",regex:"\\b(?:ROM0|ROMX|VRAM|WRAM0|WRAMX|OAM|HRAM)\\b",caseInsensitive:!0},{token:"keyword.control.reserved",regex:"\\b(?:SECTION|INCLUDE|BANK|ALIGN|PURGE|INCBIN|CHARMAP|NEWCHARMAP|SETCHARMAP|PUSHC|POPC|FAIL|WARN|FATAL|ASSERT|STATIC_ASSERT|MACRO|ENDM|SHIFT|REPT|ENDR|LOAD|ENDL|IF|ELSE|ELIF|ENDC|UNION|NEXTU|EQU|EQUS|PUSHS|POPS|PUSHO|POPO|OPT)\\b",caseInsensitive:!0},{token:"variable.constant",regex:Ki,caseInsensitive:!0},{token:"variable.parameter.register.assembly",regex:"\\b(?:A|B|C|D|E|H|L|AF|BC|DE|HL)\\b",caseInsensitive:!0},{token:"constant.character.decimal.assembly",regex:"\\b[0-9]+\\b"},{token:"constant.character.binary.assembly",regex:"\\%[0-1]+\\b"},{token:"constant.character.quaternary.assembly",regex:"\\`[0-3]+\\b"},{token:"constant.character.hexadecimal.assembly",regex:"\\$[A-F0-9]+\\b",caseInsensitive:!0},{token:"string.assembly",regex:/'([^\\']|\\.)*'/},{token:"string.assembly",regex:/"([^\\"]|\\.)*"/},{token:"entity.name.function.assembly",regex:"^\\s*%%[\\w.]+?:$"},{token:"entity.name.function.assembly",regex:"^\\s*%\\$[\\w.]+?:$"},{token:"entity.name.function.assembly",regex:"^[\\w.]+?:"},{token:"comment.assembly",regex:";.*$"}]},this.normalizeRules()}static metaData={fileTypes:["asm"],name:"Gameboy Z80",scopeName:"source.assembly"}}const{FoldMode:Yi}=await zr("ace/mode/folding/coffee");class Xi extends Yi{constructor(){super()}getFoldWidgetRange(X,a,D){var z=this.indentationBlock(X,D);if(z)return z;var k=/\S/,A=X.getLine(D),h=A.search(k);if(!(h==-1||A[h]!="#")){for(var s=A.length,l=X.getLength(),t=D,e=D;++D<l;){A=X.getLine(D);var r=A.search(k);if(r!=-1){if(A[r]!="#")break;e=D}}if(e>t){var n=X.getLine(e).length;return new ace.Range(t,s,e,n)}}}getFoldWidget(X,a,D){var z=X.getLine(D),k=z.search(/\S/),A=X.getLine(D+1),h=X.getLine(D-1),s=h.search(/\S/),l=A.search(/\S/);if(k==-1)return X.foldWidgets[D-1]=s!=-1&&s<l?"start":"","";if(s==-1){if(k==l&&z[k]=="#"&&A[k]=="#")return X.foldWidgets[D-1]="",X.foldWidgets[D+1]="","start"}else if(s==k&&z[k]=="#"&&h[k]=="#"&&X.getLine(D-2).search(/\S/)==-1)return X.foldWidgets[D-1]="start",X.foldWidgets[D+1]="","";return s!=-1&&s<k?X.foldWidgets[D-1]="start":X.foldWidgets[D-1]="",k<l?"start":""}}const{Mode:Zi}=await zr("ace/mode/text");class Ji extends Zi{static lineCommentStart=[";"];static $id="ace/mode/gbz80";constructor(){super(),this.HighlightRules=ji,this.foldingRules=new Xi,this.$behaviour=this.$defaultBehaviour}}ace.define("ace/mode/gbz80",["exports"],q=>Object.assign(q,{Mode:Ji}));const{Tooltip:An}=await zr("ace/tooltip"),Cn=await zr("ace/lib/event");class qi extends An{token={};range=new Wr.Range;constructor(X){super(X.container),!X.tokenTooltip&&(X.tokenTooltip=this,this.editor=X,this.update=this.update.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseOut=this.onMouseOut.bind(this),Cn.addListener(X.renderer.scroller,"mousemove",this.onMouseMove),Cn.addListener(X.renderer.content,"mouseout",this.onMouseOut))}update(){this.$timer=null;var X=this.editor.renderer;this.lastT-(X.timeStamp||0)>1e3&&(X.rect=null,X.timeStamp=this.lastT,this.maxHeight=window.innerHeight,this.maxWidth=window.innerWidth);var a=X.rect||(X.rect=X.scroller.getBoundingClientRect()),D=(this.x+X.scrollLeft-a.left-X.$padding)/X.characterWidth,z=Math.floor((this.y+X.scrollTop-a.top)/X.lineHeight),k=Math.round(D),A={row:z,column:k,side:D-k>0?1:-1},h=this.editor.session,s=h.screenToDocumentPosition(A.row,A.column),l=h.getTokenAt(s.row,s.column);if(!l&&!h.getLine(s.row)&&(l={type:"",value:"",state:h.bgTokenizer.getState(0)}),!l){this.hide();return}var t="";if(l.type=="variable.constant"&&l.value in _t){var e=_t[l.value];if(t=e.description,e.value&&(t+=`
Value: `+e.value),e.flags){t+=`
`;for(var r in e.flags)t+=`
`+r+": "+e.flags[r].description}}else{this.hide();return}this.tokenText!=t&&(this.setText(t),this.width=this.getWidth(),this.height=this.getHeight(),this.tokenText=t),this.show(null,this.x,this.y),this.token=l}onMouseMove(X){this.x=X.clientX,this.y=X.clientY,this.isOpen&&(this.lastT=X.timeStamp,this.setPosition(this.x,this.y)),this.$timer||(this.$timer=setTimeout(this.update,100))}onMouseOut(X){X&&X.currentTarget.contains(X.relatedTarget)||(this.hide(),this.$timer=clearTimeout(this.$timer))}setPosition(X,a){X+10+this.width>this.maxWidth&&(X=window.innerWidth-this.width-10),(a>window.innerHeight*.75||a+20+this.height>this.maxHeight)&&(a=a-this.height-30),An.prototype.setPosition.call(this,X+10,a+20)}destroy(){this.onMouseOut(),event.removeListener(this.editor.renderer.scroller,"mousemove",this.onMouseMove),event.removeListener(this.editor.renderer.content,"mouseout",this.onMouseOut),delete this.editor.tokenTooltip}}var es=[{name:"adc a, r8",description:"a = a + r8 + carry",optionalA:!0,cycles:1,bytes:1,flags:{z:"Set if result is 0",n:"0",h:"Set if overflow from bit 3",c:"Set if overflow from bit 7"}},{name:"adc a, [hl]",description:"a = a + [hl] + carry",optionalA:!0,cycles:2,bytes:1,flags:{z:"Set if result is 0",n:"0",h:"Set if overflow from bit 3",c:"Set if overflow from bit 7"}},{name:"adc a, n8",description:"a = a + n8 + carry",optionalA:!0,cycles:2,bytes:2,flags:{z:"Set if result is 0",n:"0",h:"Set if overflow from bit 3",c:"Set if overflow from bit 7"}},{name:"add a, r8",description:"a = a + r8",optionalA:!0,cycles:1,bytes:1,flags:{z:"Set if result is 0",n:"0",h:"Set if overflow from bit 3",c:"Set if overflow from bit 7"}},{name:"add a, [hl]",description:"a = a + [hl]",optionalA:!0,cycles:2,bytes:1,flags:{z:"Set if result is 0",n:"0",h:"Set if overflow from bit 3",c:"Set if overflow from bit 7"}},{name:"add a, n8",description:"a = a + n8",optionalA:!0,cycles:2,bytes:2,flags:{z:"Set if result is 0",n:"0",h:"Set if overflow from bit 3",c:"Set if overflow from bit 7"}},{name:"add hl, r16",description:"hl = hl + r16",cycles:2,bytes:1,flags:{n:"0",h:"Set if overflow from bit 11",c:"Set if overflow from bit 15"}},{name:"add hl, sp",description:"hl = hl + sp",cycles:2,bytes:1,flags:{n:"0",h:"Set if overflow from bit 11",c:"Set if overflow from bit 15"}},{name:"add sp, e8",description:"sp = sp + e8",cycles:4,bytes:2,flags:{z:"0",n:"0",h:"Set if overflow from bit 3",c:"Set if overflow from bit 7"}},{name:"and a, r8",description:"a = a & r8",optionalA:!0,cycles:1,bytes:1,flags:{z:"Set if result is 0",n:"0",h:"1",c:"0"}},{name:"and a, [hl]",description:"a = a & [hl]",optionalA:!0,cycles:2,bytes:1,flags:{z:"Set if result is 0",n:"0",h:"1",c:"0"}},{name:"and a, n8",description:"a = a & n8",optionalA:!0,cycles:2,bytes:2,flags:{z:"Set if result is 0",n:"0",h:"1",c:"0"}},{name:"bit u3, r8",description:"Sets Z if bit u3 in r8 is 0",cycles:2,bytes:2,flags:{z:"Set if selected bit is 0",n:"0",h:"1"}},{name:"bit u3, [hl]",description:"Sets Z if bit u3 in [hl] is 0",cycles:3,bytes:2,flags:{z:"Set if selected bit is 0",n:"0",h:"1"}},{name:"call n16",description:"Calls address n16",cycles:6,bytes:3,flags:{}},{name:"call cc, n16",description:"Calls address n16 if condition cc is met",cycles:"6/3",bytes:3,flags:{}},{name:"ccf",description:"Complements the carry flag",cycles:1,bytes:1,flags:{n:"0",h:"0",c:"Complemented"}},{name:"cp a, r8",description:"flags = a - r8",optionalA:!0,cycles:1,bytes:1,flags:{z:"Set if result is 0 (a == r8)",n:"1",h:"Set if no borrow from bit 4",c:"Set if no borrow (a < r8)"}},{name:"cp a, [hl]",description:"flags = a - [hl]",optionalA:!0,cycles:2,bytes:1,flags:{z:"Set if result is 0 (a == [hl])",n:"1",h:"Set if no borrow from bit 4",c:"Set if no borrow (a < [hl])"}},{name:"cp a, n8",description:"flags = a - n8",optionalA:!0,cycles:2,bytes:2,flags:{z:"Set if result is 0 (a == n8)",n:"1",h:"Set if no borrow from bit 4",c:"Set if no borrow (a < n8)"}},{name:"cpl",description:"a = ~a",cycles:1,bytes:1,flags:{n:"1",h:"1"}},{name:"daa",description:"Decimal adjusts a to correct BCD value after arithmetic",cycles:1,bytes:1,flags:{z:"Set if result is 0",h:"0",c:"Set or reset based on operation"}},{name:"dec r8",description:"r8 -= 1",cycles:1,bytes:1,flags:{z:"Set if result is 0",n:"1",h:"Set if no borrow from bit 4"}},{name:"dec [hl]",description:"[hl] -= 1",cycles:3,bytes:1,flags:{z:"Set if result is 0",n:"1",h:"Set if no borrow from bit 4"}},{name:"dec r16",description:"r16 -= 1",cycles:2,bytes:1,flags:{}},{name:"dec sp",description:"sp -= 1",cycles:2,bytes:1,flags:{}},{name:"di",description:"Disables interrupts",cycles:1,bytes:1,flags:{}},{name:"ei",description:"Enables interrupts",cycles:1,bytes:1,flags:{}},{name:"halt",description:"Puts the CPU into low power mode",cycles:"-",bytes:1,flags:{}},{name:"inc r8",description:"r8 += 1",cycles:1,bytes:1,flags:{z:"Set if result is 0",n:"0",h:"Set if overflow from bit 3"}},{name:"inc [hl]",description:"[hl] += 1",cycles:3,bytes:1,flags:{z:"Set if result is 0",n:"0",h:"Set if overflow from bit 3"}},{name:"inc r16",description:"r16 += 1",cycles:2,bytes:1,flags:{}},{name:"inc sp",description:"sp += 1",cycles:2,bytes:1,flags:{}},{name:"jp n16",description:"Jumps to address n16",cycles:4,bytes:3,flags:{}},{name:"jp cc, n16",description:"Jumps to address n16 if condition cc is met",cycles:"4/3",bytes:3,flags:{}},{name:"jp hl",description:"Jumps to address in hl",cycles:1,bytes:1,flags:{}},{name:"jr e8",description:"Relative jumps by adding e8 to pc",cycles:3,bytes:2,flags:{}},{name:"jr cc, e8",description:"Relative jumps by adding e8 to pc if condition cc is met",cycles:"3/2",bytes:2,flags:{}},{name:"ld r8, r8",description:"Copies the value from the right register into the left",cycles:1,bytes:1,flags:{}},{name:"ld r8, n8",description:"r8 = n8",cycles:2,bytes:2,flags:{}},{name:"ld r16, n16",description:"r16 = n16",cycles:3,bytes:3,flags:{}},{name:"ld [hl], r8",description:"[hl] = r8",cycles:2,bytes:1,flags:{}},{name:"ld [hl], n8",description:"[hl] = n8",cycles:3,bytes:2,flags:{}},{name:"ld r8, [hl]",description:"r8 = [hl]",cycles:2,bytes:1,flags:{}},{name:"ld [r16], a",description:"[r16] = a",cycles:2,bytes:1,flags:{}},{name:"ld [n16], a",description:"[n16] = a",cycles:4,bytes:3,flags:{}},{name:"ldh [$ff00+n8], a",description:"[$ff00+n8] = a",cycles:3,bytes:2,flags:{}},{name:"ld [$ff00+c], a",description:"[$ff00+c] = a",cycles:2,bytes:1,flags:{}},{name:"ld a, [r16]",description:"a = [r16]",cycles:2,bytes:1,flags:{}},{name:"ld a, [n16]",description:"a = [n16]",cycles:4,bytes:3,flags:{}},{name:"ldh a, [$ff00+n8]",description:"a = [$ff00+n8]",cycles:3,bytes:2,flags:{}},{name:"ld a, [$ff00+c]",description:"a = [$ff00+c]",cycles:2,bytes:1,flags:{}},{name:"ld [hl+], a",description:"[hl] = a, hl += 1",aliasHLI:!0,cycles:2,bytes:1,flags:{}},{name:"ld [hl-], a",description:"[hl] = a, hl -= 1",aliasHLD:!0,cycles:2,bytes:1,flags:{}},{name:"ld a, [hl+]",description:"a = [hl], hl += 1",aliasHLI:!0,cycles:2,bytes:1,flags:{}},{name:"ld a, [hl-]",description:"a = [hl], hl -= 1",aliasHLD:!0,cycles:2,bytes:1,flags:{}},{name:"ld sp, n16",description:"sp = n16",cycles:3,bytes:3,flags:{}},{name:"ld [n16], sp",description:"[n16, n16 + 1] = sp",cycles:5,bytes:3,flags:{}},{name:"ld hl, sp+e8",description:"hl = sp + e8",cycles:3,bytes:2,flags:{z:"0",n:"0",h:"Set if overflow from bit 3",c:"Set if overflow from bit 7"}},{name:"ld sp, hl",description:"sp = hl",cycles:2,bytes:1,flags:{}},{name:"nop",description:"No operation",cycles:1,bytes:1,flags:{}},{name:"or a, r8",description:"a = a | r8",optionalA:!0,cycles:1,bytes:1,flags:{z:"Set if result is 0",n:"0",h:"0",c:"0"}},{name:"or a, [hl]",description:"a = a | [hl]",optionalA:!0,cycles:2,bytes:1,flags:{z:"Set if result is 0",n:"0",h:"0",c:"0"}},{name:"or a, n8",description:"a = a | n8",optionalA:!0,cycles:2,bytes:2,flags:{z:"Set if result is 0",n:"0",h:"0",c:"0"}},{name:"pop af",description:"Pops the stack into af",cycles:3,bytes:1,flags:{}},{name:"pop r16",description:"Pops the stack into r16",cycles:3,bytes:1,flags:{}},{name:"push af",description:"Pushes af onto the stack",cycles:4,bytes:1,flags:{}},{name:"push r16",description:"Pushes r16 onto the stack",cycles:4,bytes:1,flags:{}},{name:"res u3, r8",description:"Sets the bit u3 in r8 to 0",cycles:2,bytes:2,flags:{}},{name:"res u3, [hl]",description:"Sets the bit u3 in [hl] to 0",cycles:4,bytes:2,flags:{}},{name:"ret",description:"Returns from the current subroutine",cycles:4,bytes:1,flags:{}},{name:"ret cc",description:"Returns from the current subroutine if condition cc is met",cycles:"5/2",bytes:1,flags:{}},{name:"reti",description:"Returns from the current subroutine and enables interrupts",cycles:4,bytes:1,flags:{}},{name:"rl r8",description:"Rotates r8 left, sets bit 0 to carry, sets carry to old bit 7",cycles:2,bytes:2,flags:{z:"Set if result is 0",n:"0",h:"0",c:"Set to old bit 7"}},{name:"rl [hl]",description:"Rotates [hl] left, sets bit 0 to carry, sets carry to old bit 7",cycles:4,bytes:2,flags:{z:"Set if result is 0",n:"0",h:"0",c:"Set to old bit 7"}},{name:"rla",description:"Rotates a left, sets bit 0 to carry, sets carry to old bit 7",cycles:1,bytes:1,flags:{z:"0",n:"0",h:"0",c:"Set to old bit 7"}},{name:"rlc r8",description:"Rotates r8 left, sets bit 0 and carry to old bit 7",cycles:2,bytes:2,flags:{z:"Set if result is 0",n:"0",h:"0",c:"Set to old bit 7"}},{name:"rlc [hl]",description:"Rotates [hl] left, sets bit 0 and carry to old bit 7",cycles:4,bytes:2,flags:{z:"Set if result is 0",n:"0",h:"0",c:"Set to old bit 7"}},{name:"rlca",description:"Rotates a left, sets bit 0 and carry to old bit 7",cycles:1,bytes:1,flags:{z:"0",n:"0",h:"0",c:"Set to old bit 7"}},{name:"rr r8",description:"Rotates r8 right, sets bit 7 to carry, sets carry to old bit 0",cycles:2,bytes:2,flags:{z:"Set if result is 0",n:"0",h:"0",c:"Set to old bit 0"}},{name:"rr [hl]",description:"Rotates [hl] right, sets bit 7 to carry, sets carry to old bit 0",cycles:4,bytes:2,flags:{z:"Set if result is 0",n:"0",h:"0",c:"Set to old bit 0"}},{name:"rra",description:"Rotates a right, sets bit 7 to carry, sets carry to old bit 0",cycles:1,bytes:1,flags:{z:"0",n:"0",h:"0",c:"Set to old bit 0"}},{name:"rrc r8",description:"Rotates r8 right, sets bit 7 and carry to old bit 0",cycles:2,bytes:2,flags:{z:"Set if result is 0",n:"0",h:"0",c:"Set to old bit 0"}},{name:"rrc [hl]",description:"Rotates [hl] right, sets bit 7 and carry to old bit 0",cycles:4,bytes:2,flags:{z:"Set if result is 0",n:"0",h:"0",c:"Set to old bit 0"}},{name:"rrca",description:"Rotates a right, sets bit 7 and carry to old bit 0",cycles:1,bytes:1,flags:{z:"0",n:"0",h:"0",c:"Set to old bit 0"}},{name:"rst vec",description:"Calls given reset vector",cycles:4,bytes:1,flags:{}},{name:"sbc a, r8",description:"a = a - r8 - c",optionalA:!0,cycles:1,bytes:1,flags:{z:"Set if result is 0",n:"1",h:"Set if no borrow from bit 4",c:"Set if no borrow"}},{name:"sbc a, [hl]",description:"a = a - [hl] - c",optionalA:!0,cycles:2,bytes:1,flags:{z:"Set if result is 0",n:"1",h:"Set if no borrow from bit 4",c:"Set if no borrow"}},{name:"sbc a, n8",description:"a = a - n8 - c",optionalA:!0,cycles:2,bytes:2,flags:{z:"Set if result is 0",n:"1",h:"Set if no borrow from bit 4",c:"Set if no borrow"}},{name:"scf",description:"Sets the carry flag to 1",cycles:1,bytes:1,flags:{n:"0",h:"0",c:"1"}},{name:"set u3, r8",description:"Sets the bit u3 in r8 to 1",cycles:2,bytes:2,flags:{}},{name:"set u3, [hl]",description:"Sets the bit u3 in [hl] to 1",cycles:4,bytes:2,flags:{}},{name:"sla r8",description:"Shifts r8 left, sets carry to old bit 7",cycles:2,bytes:2,flags:{z:"Set if result is 0",n:"0",h:"0",c:"Set to old bit 7"}},{name:"sla [hl]",description:"Shifts [hl] left, sets carry to old bit 7",cycles:4,bytes:2,flags:{z:"Set if result is 0",n:"0",h:"0",c:"Set to old bit 7"}},{name:"sra r8",description:"Shifts r8 right keeping bit 7 unchanged, sets carry to old bit 0",cycles:2,bytes:2,flags:{z:"Set if result is 0",n:"0",h:"0",c:"Set to old bit 0"}},{name:"sra [hl]",description:"Shifts [hl] right keeping bit 7 unchanged, sets carry to old bit 0",cycles:4,bytes:2,flags:{z:"Set if result is 0",n:"0",h:"0",c:"Set to old bit 0"}},{name:"srl r8",description:"Shifts r8 right, sets carry to old bit 0",cycles:2,bytes:2,flags:{z:"Set if result is 0",n:"0",h:"0",c:"Set to old bit 0"}},{name:"srl [hl]",description:"Shifts [hl] right, sets carry to old bit 0",cycles:4,bytes:2,flags:{z:"Set if result is 0",n:"0",h:"0",c:"Set to old bit 0"}},{name:"stop",description:"Puts the CPU into very low power mode",cycles:"-",bytes:"2",flags:{}},{name:"sub a, r8",description:"a = a - r8",optionalA:!0,cycles:1,bytes:1,flags:{z:"Set if result is 0 (a == r8)",n:"1",h:"Set if no borrow from bit 4",c:"Set if no borrow (a < r8)"}},{name:"sub a, [hl]",description:"a = a - [hl]",optionalA:!0,cycles:2,bytes:1,flags:{z:"Set if result is 0 (a == [hl])",n:"1",h:"Set if no borrow from bit 4",c:"Set if no borrow (a < [hl])"}},{name:"sub a, n8",description:"a = a - n8",optionalA:!0,cycles:2,bytes:2,flags:{z:"Set if result is 0 (a == n8)",n:"1",h:"Set if no borrow from bit 4",c:"Set if no borrow (a < n8)"}},{name:"swap r8",description:"Swaps the upper and lower 4 bits in r8",cycles:2,bytes:2,flags:{z:"Set if result is 0",n:"0",h:"0",c:"0"}},{name:"swap [hl]",description:"Swaps the upper and lower 4 bits in [hl]",cycles:4,bytes:2,flags:{z:"Set if result is 0",n:"0",h:"0",c:"0"}},{name:"xor a, r8",description:"a = a ^ r8",optionalA:!0,cycles:1,bytes:1,flags:{z:"Set if result is 0",n:"0",h:"0",c:"0"}},{name:"xor a, [hl]",description:"a = a ^ [hl]",optionalA:!0,cycles:2,bytes:1,flags:{z:"Set if result is 0",n:"0",h:"0",c:"0"}},{name:"xor a, n8",description:"a = a ^ n8",optionalA:!0,cycles:2,bytes:2,flags:{z:"Set if result is 0",n:"0",h:"0",c:"0"}}],Gn=[];es.forEach(function(q){var X="<table><tr><td colspan=2>"+q.description;X+="<tr><td>cycles:<td>"+q.cycles,X+="<tr><td>size:<td>"+q.bytes,X+="<tr><td>Flag Z:<td>"+q.flags.z,X+="<tr><td>Flag N:<td>"+q.flags.n,X+="<tr><td>Flag H:<td>"+q.flags.H,X+="<tr><td>Flag C:<td>"+q.flags.C;var a={caption:q.name,value:q.name,meta:"",docHTML:X};a.completer={insertMatch:function(D,z){}},Gn.push(a)});var Vn=[];for(var ln in _t){var jt=_t[ln],xr="";if(jt.description&&(xr=jt.description.replace(`
`,"<br>")),jt.value&&(xr+="<br><b>Value:</b> "+jt.value),jt.flags)for(var kn in jt.flags)xr+="<br><b>"+kn+":</b> "+jt.flags[kn].description;jt.alias&&(xr+="<br><b>Alias:</b> "+jt.alias);var ts={caption:ln,value:ln,meta:"",docHTML:xr};Vn.push(ts)}var rs={getCompletions:function(q,X,a,D,z){var k=X.getLine(a.row),A=k.substr(0,a.column-1).trim();A.trim()==""||A.trim().endsWith(":")?z(null,Gn.filter(function(h){return h.value.startsWith(D.toLowerCase())})):z(null,Vn.filter(function(h){return h.value.toLowerCase().startsWith(D.toLowerCase())}))}};Wr.config.set("basePath","//rgbds-live//assets/ace");var yt=[],Dt=null,Xr=null,Zr=null,Kr=null,$r=[],cn={};function Qn(q,X){var a=Wr.edit(q);new qi(a),a.setTheme("ace/theme/tomorrow"),a.session.setMode("ace/mode/gbz80"),a.setOptions({tabSize:2,useSoftTabs:!0,navigateWithinSoftTabs:!0,enableLiveAutocompletion:!0,enableSnippets:!0}),a.completers=[rs],a.session.on("change",function(D){a.curOp&&a.curOp.command.name&&(nr(Dt,a.getValue()),X())}),a.on("guttermousedown",function(D){var z=D.domEvent.target;if(z.className.indexOf("ace_gutter-cell")!=-1){var k=D.getDocumentPosition().row;ss(Dt,k+1),D.stop()}}),yt.push(a)}function Kn(q){Dt!=null&&(cn[Dt]=yt[0].selection.getCursor()),Dt=q,yt[0].setValue(Jt()[q]),yt[0].selection.clearSelection(),yt[0].session.getUndoManager().reset(),Dt in cn?yt[0].selection.moveCursorToPosition(cn[Dt]):yt[0].selection.moveCursorTo(0,0),yt[0].scrollToLine(yt[0].selection.getCursor().row,!0),yt[0].focus(),wn(),Yn()}function wn(){var q=[];for(var[X,a,D,z]of Nn())a==Dt&&q.push({row:D-1,column:0,type:X,text:z});yt[0].session.setAnnotations(q)}function rn(q,X,a){Xr=q,Zr=X,Yn(a)}function ns(q,X){$r.push([q,X]),window.updateBreakpoints(),jn()}function is(q,X){$r=$r.filter(a=>a[0]!=q||a[1]!=X),window.updateBreakpoints(),jn()}function ss(q,X){var a=$r.findIndex(D=>D[0]==q&&D[1]==X);a>-1?is(q,X):ns(q,X)}function jn(){yt[0].session.clearBreakpoints();for(var[q,X,a]of $r)q==Dt&&yt[0].session.setBreakpoint(X-1,a?"ace_breakpoint":"ace_invalid_breakpoint")}function Yn(q){q&&Dt!=null&&Dt!=Xr&&Kn(Xr),Kr!=null&&(yt[0].session.removeMarker(Kr),Kr=null),Xr==Dt&&(Kr=yt[0].session.addMarker(new Wr.Range(Zr-1,0,Zr-1,1),"cpuLineMarker","fullLine"),q&&yt[0].scrollToLine(Zr-1,!0,!1,function(){}))}function os(){return Dt}function Xn(){return $r}function as(){yt[0].renderer.getContainerElement().style.display="none"}function ls(){yt[0].renderer.getContainerElement().style.display="",yt[0].resize(),yt[0].renderer.updateFull()}const cs=Object.freeze(Object.defineProperty({__proto__:null,getBreakpoints:Xn,getCurrentFilename:os,hide:as,register:Qn,setCpuLine:rn,setCurrentFile:Kn,show:ls,updateErrors:wn},Symbol.toStringTag,{value:"Module"}));var us={hide:function(){document.getElementById("nullEditorDiv").style.display="none"},show:function(){document.getElementById("nullEditorDiv").style.display=""},setCurrentFile:function(){}},gr=us,Zn="";function nn(){return Zn}function pr(q){Zn=q;var X=gr;return typeof Jt()[q]=="string"?gr=cs:gr=gfxEditor,X!=gr&&(X.hide(),gr.show()),gr.setCurrentFile(q)}function Rn(q){var X=q.lastIndexOf(".");if(X<0)return"binary";var a=q.substr(X+1).toLowerCase();return a=="inc"||a=="asm"||a=="z80"||a=="h"||a=="c"||a=="cpp"||a=="hpp"||a=="txt"?"text":"binary"}var Jr=[4290965700,4289247578,4285423646,4278197037],Fn,tr,jr,Xt,Lr,hn,sn=0;function hs(q){jr=document.getElementById(q),Xt=document.getElementById("gfxEditorTilesCanvas"),Lr=document.getElementById("gfxEditorDrawCanvas"),hn=document.getElementById("gfxEditorPalette"),new ResizeObserver(function(){Xt.parentElement.style.maxWidth=jr.clientWidth,Xt.parentElement.style.maxHeight=jr.clientHeight-300,Xt.parentElement.style.display=""}).observe(jr),Lr.onmousemove=function(X){var a=X.target.getBoundingClientRect(),D=~~((X.clientX-a.left)/a.width*X.target.width),z=~~((X.clientY-a.top)/a.height*X.target.height);X.preventDefault(),X.buttons!=0&&ds(D,z,sn)},Lr.onmousedown=Lr.onmousemove,Lr.oncontextmenu=function(){return!1},hn.onmousedown=function(X){var a=X.target.getBoundingClientRect();~~((X.clientX-a.left)/a.width*X.target.width/16);var D=~~((X.clientY-a.top)/a.height*X.target.height/16);X.preventDefault(),sn=D,Mn()},Mn(),Xt.onmousedown=function(X){var a=X.target.getBoundingClientRect(),D=~~((X.clientX-a.left)/a.width*X.target.width/8),z=~~((X.clientY-a.top)/a.height*X.target.height/8);X.preventDefault(),editor.setTileIndex(D+z*16)}}function fs(q,X,a,D){for(var z=0;z<8;z++)for(var k=q[z*2],A=q[z*2+1],h=0;h<8;h++){var s=0;k&128>>h&&(s|=1),A&128>>h&&(s|=2),X[a+h+z*D]=Jr[s]}}function ds(q,X,a){var D=storage.getFiles()[Fn];a&1?D[tr*16+X*2+0]|=128>>q:D[tr*16+X*2+0]&=~(128>>q),a&2?D[tr*16+X*2+1]|=128>>q:D[tr*16+X*2+1]&=~(128>>q),editor.setTileIndex(tr),storage.update(Fn,D);var z=Xt.getContext("2d"),k=z.getImageData(0,0,Xt.width,Xt.height),A=new Uint32Array(k.data.buffer),h=Xt.width,s=tr%16,l=~~(tr/16),t=s*8+l*8*h;fs(new Uint8Array(D.buffer,tr*16,16),A,t,h),z.putImageData(k,0,0)}function Mn(){for(var q=hn.getContext("2d"),X=0;X<4;X++)q.fillStyle="rgb("+(Jr[X]&255)+", "+(Jr[X]>>8&255)+", "+(Jr[X]>>16&255)+")",q.fillRect(0,X*16,16,16);q.strokeStyle="#FFF",q.beginPath(),q.rect(2.5,sn*16+2.5,11,11),q.stroke(),q.strokeStyle="#000",q.beginPath(),q.rect(1.5,sn*16+1.5,13,13),q.stroke()}var Jn,or,yr={},Zt={},Ft="";vi(function(q){var X=document.getElementById("output");if(q===null){X.value="";return}X.value+=q+`
`,X.scrollTop=X.clientHeight});function Dn(){wi(function(q,X,a){if(wn(),ir(),gs(),!(typeof q>"u")){or=q,Jn=X,yr=a;for(var D in yr){var[z,k]=yr[D];typeof Zt[z]>"u"&&(Zt[z]={}),typeof Zt[z][k]>"u"&&(Zt[z][k]=[]),Zt[z][k].push(D)}wr()}})}function gs(){zn(),yr={},Zt={},or=void 0,rn(null,null)}function qn(q){typeof or>"u"||(Ai(document.getElementById("emulator_screen_canvas"),or),Ti(Jn),_n(q),ms())}function Br(q){if(!Tt())return qn(q=="single"||q=="frame"),!1;var X=Ci(q);return _n(q=="single"||q=="frame"),X}function ms(){Wi();var q=Xn();for(var X of q){var[a,D,z]=X;if(X[2]=!1,!(typeof Zt[a]>"u"||typeof Zt[a][D]>"u")){X[2]=!0;for(var k of Zt[a][D])Ni(k)}}}function Tn(q,X){q==39&&er("right",X),q==37&&er("left",X),q==38&&er("up",X),q==40&&er("down",X),q==83&&er("a",X),q==65&&er("b",X),q==16&&er("select",X),q==13&&er("start",X),q==27&&(document.getElementById("cpu_run_check").checked=!1,document.getElementById("cpu_run_check").onclick())}function mr(q,X){return"$"+("0000"+q.toString(16)).slice(-X)}function _n(q){ki();var X=Di();document.getElementById("cpu_pc").innerHTML=mr(X,4),document.getElementById("cpu_sp").innerHTML=mr(xi(),4),document.getElementById("cpu_a").innerHTML=mr(Li(),2),document.getElementById("cpu_bc").innerHTML=mr(Bi(),4),document.getElementById("cpu_de").innerHTML=mr(Oi(),4),document.getElementById("cpu_hl").innerHTML=mr(Ii(),4),document.getElementById("cpu_flags").innerHTML=Pi();var a=yr[X];typeof a>"u"&&(a=yr[X-1]),typeof a<"u"?rn(a[0],a[1],q):rn(null,null),qr(),wr()}function qr(){var q=document.getElementById("emulator_vram_canvas");q.style.display==""&&(Ft=="vram"&&Ri(q),Ft=="bg0"&&En(q,0),Ft=="bg1"&&En(q,1))}function wr(){var q=document.getElementById("emulator_display_text");if(q.style.display==""){var X=or,a=16384,D=0,z=_i();if(Ft=="wram"&&(X=Fi(),a=4096,D=49152,z=bn()),Ft=="hram"&&(X=Mi(),a=4096,D=65408,z=bn()),Ft=="io"){var h="",k=[{name:"P1",value:65280},{name:"SB",value:65281},{name:"SC",value:65282},{name:"DIV",value:65284},{name:"TIMA",value:65285},{name:"TMA",value:65286},{name:"TAC",value:65287},{name:"IF",value:65295},{name:"LCDC",value:65344},{name:"STAT",value:65345},{name:"SCY",value:65346},{name:"SCX",value:65347},{name:"LY",value:65348},{name:"LYC",value:65349},{name:"DMA",value:65350},{name:"BGP",value:65351},{name:"OBP0",value:65352},{name:"OBP1",value:65353},{name:"WY",value:65354},{name:"WX",value:65355},{name:"KEY1",value:65357},{name:"VBK",value:65359},{name:"RP",value:65366},{name:"BCPS",value:65384},{name:"BCPD",value:65385},{name:"OCPS",value:65386},{name:"OCPD",value:65387},{name:"SVBK",value:65392},{name:"IE",value:65535}];for(var A of k)h+="<span style='float: left; width: 50px'>"+A.name+":</span>"+("00"+Ui(A.value).toString(16)).slice(-2)+"<br/>";q.innerHTML=h;return}if(!(typeof X>"u")){for(var h="<div style='position: fixed; background-color: #fff'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0&nbsp; 1&nbsp; 2&nbsp; 3&nbsp; 4&nbsp; 5&nbsp; 6&nbsp; 7&nbsp; 8&nbsp; 9&nbsp; a&nbsp; b&nbsp; c&nbsp; d&nbsp; e&nbsp; f</div><br/>",s=null,l=!1,t=0,e=0;e<X.length;e+=16){var r=Array.prototype.map.call(X.slice(e,e+16),v=>("00"+v.toString(16)).slice(-2)),n=~~(e/a),i=e&a-1;n>0&&(i+=a),h+=("00"+n.toString(16)).slice(-2)+":"+("0000"+(i+D).toString(16)).slice(-4);for(var o=0;o<r.length;o++){h+=" ";var d=z[e+o+D];d?(s=d,l&&(h+="</span>"),l=!1,t=(t+71)%360):d===null&&(s=null,l&&(h+="</span>"),l=!1),s&&!l&&(h+="<span title='"+s+"' style='background-color: hsl("+t+", 50%, 50%)'>",l=!0),h+=r[o]}l&&(h+="</span>"),l=!1,h+="<br/>"}q.innerHTML=h}}}function ir(){var q=document.getElementById("filelist");q.textContent="";for(const A of Object.keys(Jt()).sort()){var X=document.createElement("li");X.textContent=A,q.appendChild(X),A==nn()&&X.classList.add("active");for(var[a,D,z,k]of Nn())if(D==A&&(X.classList.add(a),a=="error")){X.classList.remove("warning");break}}}function ps(q){Object.keys(Jt()).length<2||(nr(q,null),nn()==q&&pr(Object.keys(Jt()).sort()[0]),ir())}function vs(q){Qn("textEditorDiv",Dn),hs("gfxEditorDiv"),si(),pr(Object.keys(Jt()).pop()),ir(),document.getElementById("filelist").onclick=function(a){a.target.childNodes[0].wholeText&&(pr(a.target.childNodes[0].wholeText),ir(),_n())},document.getElementById("newfile").onclick=function(){document.getElementById("newfiledialog").style.display="block"},document.getElementById("newfiledialog").onclick=function(a){a.target==document.getElementById("newfiledialog")&&(document.getElementById("newfiledialog").style.display="none")},document.getElementById("newfiledialogclose").onclick=function(){document.getElementById("newfiledialog").style.display="none"},document.getElementById("newfile_empty_create").onclick=function(){var a=document.getElementById("newfile_name").value;a&&(a.indexOf(".")<0&&(a+=".asm"),!(a in Jt())&&(Rn(a)==="text"?nr(a,""):nr(a,new Uint8Array(16)),pr(a),ir(),document.getElementById("newfiledialog").style.display="none"))},document.getElementById("newfile_upload").onchange=function(a){if(a.target.files.length>0){var D=a.target.files[0].name,z=Rn(D)=="text"?a.target.files[0].text():a.target.files[0].arrayBuffer();z.then(function(k){nr(D,k),pr(D),ir()}),a.target.value="",document.getElementById("newfiledialog").style.display="none"}},document.getElementById("delfile").onclick=function(){confirm("Are you sure you want to delete: "+nn()+"?")&&ps(nn())},document.getElementById("newproject").onclick=function(){confirm("Are you sure to clear the current project?")&&(On(),pr("main.asm"),ir())},Dn(),document.getElementById("cpu_single_step").onclick=function(){Br("single")},document.getElementById("cpu_frame_step").onclick=function(){Br("frame")},document.getElementById("cpu_reset").onclick=function(){qn(!0)},document.getElementById("cpu_run_check").onclick=function(){if(document.getElementById("cpu_run_check").checked){let a=function(){document.hidden||Br("run")&&(document.getElementById("cpu_run_check").checked=!1),document.getElementById("cpu_run_check").checked&&requestAnimationFrame(a)};requestAnimationFrame(a)}};var X=document.getElementById("emulator_screen_canvas");X.tabIndex=-1,X.onkeydown=function(a){Tn(a.keyCode,!0),a.preventDefault()},X.onkeyup=function(a){Tn(a.keyCode,!1),a.preventDefault()},document.onkeydown=function(a){a.code=="F8"&&(Br("single"),a.preventDefault()),a.code=="F9"&&(Br("frame"),a.preventDefault())},document.getElementById("emulator_display_screen").onclick=function(){document.getElementById("emulator_screen_canvas").style.display="",document.getElementById("emulator_vram_canvas").style.display="none",document.getElementById("emulator_display_text").style.display="none",Ft="display"},document.getElementById("emulator_display_vram").onclick=function(){document.getElementById("emulator_screen_canvas").style.display="none",document.getElementById("emulator_vram_canvas").style.display="",document.getElementById("emulator_display_text").style.display="none",Ft="vram",qr()},document.getElementById("emulator_display_bg0").onclick=function(){document.getElementById("emulator_screen_canvas").style.display="none",document.getElementById("emulator_vram_canvas").style.display="",document.getElementById("emulator_display_text").style.display="none",Ft="bg0",qr()},document.getElementById("emulator_display_bg1").onclick=function(){document.getElementById("emulator_screen_canvas").style.display="none",document.getElementById("emulator_vram_canvas").style.display="",document.getElementById("emulator_display_text").style.display="none",Ft="bg1",qr()},document.getElementById("emulator_display_rom").onclick=function(){document.getElementById("emulator_screen_canvas").style.display="none",document.getElementById("emulator_vram_canvas").style.display="none",document.getElementById("emulator_display_text").style.display="",Ft="rom",wr()},document.getElementById("emulator_display_wram").onclick=function(){document.getElementById("emulator_screen_canvas").style.display="none",document.getElementById("emulator_vram_canvas").style.display="none",document.getElementById("emulator_display_text").style.display="",Ft="wram",wr()},document.getElementById("emulator_display_hram").onclick=function(){document.getElementById("emulator_screen_canvas").style.display="none",document.getElementById("emulator_vram_canvas").style.display="none",document.getElementById("emulator_display_text").style.display="",Ft="hram",wr()},document.getElementById("emulator_display_io").onclick=function(){document.getElementById("emulator_screen_canvas").style.display="none",document.getElementById("emulator_vram_canvas").style.display="none",document.getElementById("emulator_display_text").style.display="",Ft="io",wr()},document.getElementById("download_rom").onclick=function(){if(!(typeof or>"u")){var a=document.createElement("a"),D=window.URL.createObjectURL(new Blob([or.buffer],{type:"application/octet-stream"}));a.setAttribute("href",D),a.setAttribute("download","rom.gb"),a.style.display="none",document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(D)}},document.getElementById("importmenu").onclick=function(){document.getElementById("importdialog").style.display="block"},document.getElementById("importdialog").onclick=function(a){a.target==document.getElementById("importdialog")&&(document.getElementById("importdialog").style.display="none")},document.getElementById("importdialogclose").onclick=function(){document.getElementById("importdialog").style.display="none"},document.getElementById("import_gist").onclick=function(){Un(document.getElementById("import_gist_url").value),document.getElementById("importdialog").style.display="none"},document.getElementById("import_zipfile").onchange=function(a){a.target.files.length>0&&(ci(a.target.files[0]),a.target.value="",document.getElementById("importdialog").style.display="none")},document.getElementById("exportmenu").onclick=function(){document.getElementById("exportdialog").style.display="block",document.getElementById("export_hash_url").value=In()},document.getElementById("exportdialog").onclick=function(a){a.target==document.getElementById("exportdialog")&&(document.getElementById("exportdialog").style.display="none")},document.getElementById("exportdialogclose").onclick=function(){document.getElementById("exportdialog").style.display="none"},document.getElementById("export_gist").onclick=function(){var a=document.getElementById("export_gist_url").value,D=document.getElementById("export_gist_username").value,z=document.getElementById("export_gist_token").value;if(a=ai(D,z,a),a==null)document.getElementById("export_gist_import_url").value="Gist create/update failed. Incorrect token?";else{document.getElementById("export_gist_url").value=a;var k=new URL(document.location);k.hash=a,document.getElementById("export_gist_import_url").value=k.toString()}},document.getElementById("export_zip").onclick=function(){li()},document.getElementById("infomenu").onclick=function(){document.getElementById("infodialog").style.display="block"},document.getElementById("infodialog").onclick=function(a){a.target==document.getElementById("infodialog")&&(document.getElementById("infodialog").style.display="none")},document.getElementById("infodialogclose").onclick=function(){document.getElementById("infodialog").style.display="none"},document.getElementById("auto_url_update").checked=Yt.autoUrl,document.getElementById("auto_url_update").onclick=function(){Yt.autoUrl=document.getElementById("auto_url_update").checked,Yt.autoUrl?nr():document.location.hash=""},document.getElementById("auto_local_storage_update").checked=Yt.autoLocalStorage,document.getElementById("auto_local_storage_update").onclick=function(){Yt.autoLocalStorage=document.getElementById("auto_local_storage_update").checked,nr()}}vs();
